@use 'design-system' as *;

.docsNavOuter {
    --right-margin: #{$spacing-size-16};
    --nav-max-width: 272px; // TODO: Review magic number

    --item-min-height: 34px;
    --item-left-offset: #{$spacing-size-2};

    --indent-size: #{$spacing-size-4};
    --indent-border-color: #e3e8f0; // TODO: Why isn't this a colour from :root ?
    --indent-border-offset: #{$spacing-size-1};

    position: sticky;
    width: calc(var(--layout-width-3-12) - var(--right-margin)); // TODO: Refactor docs nav width
    height: calc(100vh - var(--layout-site-header-height));
    top: var(--layout-site-header-height);
    overflow-x: hidden;
    overflow-y: auto;
}

.docsNavInner {
    padding-top: $spacing-size-8; // Temp padding
    padding-bottom: $spacing-size-32; // Temp padding
}

.whatsNewLink a {
    --height: 26px;

    display: block;
    position: relative;
    width: fit-content;
    height: var(--height);
    margin-bottom: $spacing-size-4;
    padding: 2px 10px;
    border-radius: var(--height);
    font-size: var(--text-fs-sm);
    text-decoration: none;
    color: var(--color-logo-orange);
    border: 1px solid var(--color-logo-orange);
    transition:
        background-color $transition-default-timing,
        color $transition-default-timing;
    -webkit-font-smoothing: auto;

    &:hover,
    &:focus {
        background-color: color-mix(in srgb, var(--color-logo-orange) 5%, var(--color-bg-primary));
    }

    #{$selector-darkmode} & {
        &:hover,
        &:focus {
            background-color: color-mix(in srgb, var(--color-logo-orange) 10%, var(--color-bg-primary));
        }
    }
}

.section {
    max-width: var(--nav-max-width);
}

.sectionTitle,
.groupTitle,
.item {
    display: flex;
    align-items: center;
    margin: 0;
    min-height: var(--item-min-height);
}

.sectionTitle {
    padding-left: var(--item-left-offset);
    text-transform: uppercase;
    color: var(--color-util-gray-500);
}

.divider {
    max-width: calc(var(--nav-max-width) - var(--item-left-offset));
    margin-top: $spacing-size-8;
    margin-bottom: $spacing-size-4;
    margin-left: var(--item-left-offset);
    background-color: var(--color-border-secondary);
}

.group {
}

.groupTitle {
    position: relative;
    padding-left: calc(var(--indent-size) + var(--item-left-offset));
    font-weight: var(--text-semibold);

    &:hover {
        color: var(--color-util-brand-600);
    }
}

// TODO: Refactor icons in buttons so !important not nessisary
.groupChevron {
    position: absolute !important;
    left: calc(var(--indent-border-offset) * -1 + var(--item-left-offset));
    top: 7px;
    bottom: auto !important;
    width: $spacing-size-5;
    height: $spacing-size-5;
    margin: 0 !important;
    fill: var(--color-util-gray-400) !important;
    transition:
        transform $transition-default-timing,
        fill $transition-default-timing;

    .groupTitle:hover & {
        transform: translate(2px, 0);
    }

    .group.isOpen & {
        fill: var(--color-fg-primary) !important;
        transform: rotate(90deg) translate(0, 2px);
    }
}

.groupChildren {
    --indent-level: 1;

    display: flex;
    flex-direction: column;
}

.nestedItems {
    border-left: 1px solid var(--indent-border-color);
    margin-left: calc(var(--item-left-offset) + 4px);
    padding-left: var(--item-left-offset);
}

.item {
    color: var(--color-fg-primary);
    padding-left: var(--item-left-offset);
    transition:
        background-color $transition-default-timing,
        color $transition-default-timing,
        border-color $transition-default-timing;

    &:hover {
        background-color: var(--color-util-brand-50);
    }

    .groupChildren & {
        margin-left: calc(var(--indent-size) - var(--indent-border-offset));
        padding-left: calc(var(--item-left-offset) + var(--indent-border-offset));
        border-left: 1px solid var(--indent-border-color);
    }

    &.isIsActive {
        --indent-border-color: var(--color-util-brand-400);

        background-color: var(--color-util-brand-50);
        color: var(--color-util-brand-500);
    }

    &.hasIcon:not(:last-child) {
        margin-bottom: $spacing-size-1;
    }
}

// TODO: Refactor icons in links so don't need to override icon CSS vars
.itemIcon {
    fill: var(--color-fg-secondary);
    margin-right: $spacing-size-2;
    transition: fill $transition-default-timing;

    .item.isIsActive & {
        fill: var(--color-util-brand-500);
    }
}

// TODO: Refactor icons in links/buttons so we don't require !important/overrides
.enterpriseIcon {
    position: relative;
    top: 1px;
    width: $spacing-size-5;
    height: $spacing-size-5;
    margin-left: $spacing-size-1 !important;
    fill: var(--color-enterprise-icon) !important;
}
