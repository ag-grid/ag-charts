@use 'design-system' as *;

@media screen and (min-width: $breakpoint-docs-nav-medium) {
    :global(#docs-mobile-nav-collapser) {
        --right-margin: #{$spacing-size-16};

        height: unset !important;
        width: calc(var(--layout-width-3-12));
        overflow: unset !important;
    }

    :global(#docs-mobile-nav-collapser > div) {
        display: unset !important;
    }
}

@media screen and (min-width: $breakpoint-docs-nav-large) {
    :global(#docs-mobile-nav-collapser) {
        width: calc(var(--layout-width-3-12) - var(--right-margin));
    }
}

.docsNavOuter {
    --right-margin: #{$spacing-size-16};
    --nav-max-width: 276px;

    --item-min-height: 34px;
    --item-left-offset: #{$spacing-size-2};

    --indent-size: #{$spacing-size-4};
    --indent-border-color: var(--color-util-gray-300);
    --indent-border-offset: #{$spacing-size-1};

    position: sticky;
    width: 100%;
    height: calc(100vh - var(--layout-site-header-height));
    top: var(--layout-site-header-height);
    overflow-x: hidden;
    overflow-y: auto;
}

.docsNavInner {
    padding-top: $spacing-size-10;
    padding-bottom: $spacing-size-8;

    @media screen and (min-width: $breakpoint-docs-nav-medium) {
        padding-bottom: $spacing-size-32;
    }

    @media screen and (min-width: $breakpoint-docs-nav-large) {
        max-width: var(--nav-max-width);
    }
}

.whatsNewLink a {
    --height: 26px;

    display: block;
    position: relative;
    width: fit-content;
    height: var(--height);
    margin-bottom: $spacing-size-4;
    margin-left: $spacing-size-2;
    padding: 2px 10px;
    border-radius: var(--height);
    font-size: var(--text-fs-sm);
    text-decoration: none;
    color: var(--color-logo-orange);
    border: 1px solid var(--color-logo-orange);
    transition:
        background-color $transition-default-timing,
        color $transition-default-timing;
    -webkit-font-smoothing: auto;

    &:hover,
    &:focus {
        background-color: color-mix(in srgb, var(--color-logo-orange) 5%, var(--color-bg-primary));
    }

    #{$selector-darkmode} & {
        &:hover,
        &:focus {
            background-color: color-mix(in srgb, var(--color-logo-orange) 10%, var(--color-bg-primary));
        }
    }
}

.section {
    @media screen and (min-width: $breakpoint-docs-nav-medium) {
        max-width: var(--nav-max-width);
    }
}

.sectionTitle,
.groupTitle,
.item {
    display: flex;
    align-items: center;
    margin: 0;
    min-height: var(--item-min-height);
}

.sectionTitle {
    padding-left: var(--item-left-offset);
    text-transform: uppercase;
    color: var(--color-util-gray-500);
}

.divider {
    margin-top: $spacing-size-6;
    margin-bottom: $spacing-size-3;
    margin-left: var(--item-left-offset);
    background-color: var(--color-border-secondary);
}

.groupTitle {
    position: relative;
    padding-left: calc(var(--indent-size) + var(--item-left-offset));
    font-weight: var(--text-semibold);
    transition: color $transition-default-timing;

    &:hover {
        color: var(--color-util-brand-600);
    }
}

// TODO: Refactor icons in buttons so !important not nessisary
.groupChevron {
    position: absolute !important;
    left: calc(var(--indent-border-offset) * -1 + var(--item-left-offset));
    top: 7px;
    bottom: auto !important;
    width: $spacing-size-5;
    height: $spacing-size-5;
    margin: 0 !important;
    fill: var(--color-util-gray-400) !important;
    transition:
        transform $transition-default-timing,
        fill $transition-default-timing;

    #{$selector-darkmode} & {
        fill: var(--color-util-gray-500) !important;
    }

    .groupTitle:hover & {
        transform: translate(2px, 0);
    }

    .group.isOpen & {
        fill: var(--color-fg-primary) !important;
        transform: rotate(90deg) translate(0, 2px);
    }
}

.groupChildren {
    --indent-level: 1;

    display: flex;
    flex-direction: column;
}

.nestedItems {
    border-left: 1px solid var(--indent-border-color);
    margin-left: calc(var(--item-left-offset) + 4px);
    padding-left: var(--item-left-offset);
}

.item {
    color: var(--color-fg-primary);
    padding-left: var(--item-left-offset);
    transition:
        background-color $transition-default-timing,
        color $transition-default-timing,
        border-color $transition-default-timing;

    &:hover {
        background-color: var(--color-util-brand-50);

        #{$selector-darkmode} & {
            background-color: color-mix(in srgb, var(--color-brand-400) 10%, transparent);
        }
    }

    .groupChildren & {
        margin-left: calc(var(--indent-size) - var(--indent-border-offset));
        padding-left: calc(var(--item-left-offset) + var(--indent-border-offset));
        border-left: 1px solid var(--indent-border-color);
    }

    &.isIsActive {
        --indent-border-color: var(--color-util-brand-400);

        background-color: var(--color-util-brand-50);
        color: var(--color-util-brand-500);

        #{$selector-darkmode} & {
            --indent-border-color: var(--color-brand-300);

            background-color: color-mix(in srgb, var(--color-brand-400) 10%, transparent);
            color: var(--color-brand-300);
        }
    }

    &.hasIcon:not(:last-child) {
        margin-bottom: $spacing-size-1;
    }
}

// TODO: Refactor icons in links so don't need to override icon CSS vars
.itemIcon {
    fill: var(--color-fg-secondary);
    margin-right: $spacing-size-2;
    transition: fill $transition-default-timing;

    .item.isIsActive & {
        fill: var(--color-util-brand-500);

        #{$selector-darkmode} & {
            fill: var(--color-brand-300);
        }
    }
}

// TODO: Refactor icons in links/buttons so we don't require !important/overrides
.enterpriseIcon {
    width: $spacing-size-5;
    height: $spacing-size-5;
    margin-left: $spacing-size-1 !important;
    fill: var(--color-enterprise-icon) !important;

    .groupTitle & {
        position: relative;
        top: 1px;
    }
}
