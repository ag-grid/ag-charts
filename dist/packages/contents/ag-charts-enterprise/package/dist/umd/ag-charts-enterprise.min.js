(function(Xh,Js){typeof exports=="object"&&typeof module=="object"?module.exports=Js():typeof define=="function"&&define.amd?define("agCharts",[],Js):typeof exports=="object"?exports.agCharts=Js():Xh.agCharts=Js()})(this,()=>{var Xh={},Js={exports:Xh};if(typeof Q8>"u")var Q8=function(e){throw new Error("Unknown module: "+e)};var $h=Object.defineProperty,n1=Object.defineProperties,Ak=Object.getOwnPropertyDescriptor,a1=Object.getOwnPropertyDescriptors,Lk=Object.getOwnPropertyNames,mp=Object.getOwnPropertySymbols,o1=Object.getPrototypeOf,Jy=Object.prototype.hasOwnProperty,Tk=Object.prototype.propertyIsEnumerable,r1=Reflect.get,tv=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),nt=Math.pow,Nk=(t,e,i)=>e in t?$h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,B=(t,e)=>{for(var i in e||(e={}))Jy.call(e,i)&&Nk(t,i,e[i]);if(mp)for(var i of mp(e))Tk.call(e,i)&&Nk(t,i,e[i]);return t},K=(t,e)=>n1(t,a1(e)),se=(t,e)=>{var i={};for(var s in t)Jy.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&mp)for(var s of mp(t))e.indexOf(s)<0&&Tk.call(t,s)&&(i[s]=t[s]);return i},L=(t,e)=>function(){return t&&(e=(0,t[Lk(t)[0]])(t=0)),e},tn=(t,e)=>{for(var i in e)$h(t,i,{get:e[i],enumerable:!0})},l1=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Lk(e))!Jy.call(t,n)&&n!==i&&$h(t,n,{get:()=>e[n],enumerable:!(s=Ak(e,n))||s.enumerable});return t},W=t=>l1($h({},"__esModule",{value:!0}),t),_=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ak(e,i):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$h(e,i,n),n},As=(t,e,i)=>r1(o1(t),i,e),F=(t,e,i)=>new Promise((s,n)=>{var a=l=>{try{r(i.next(l))}catch(c){n(c)}},o=l=>{try{r(i.throw(l))}catch(c){n(c)}},r=l=>l.done?s(l.value):Promise.resolve(l.value).then(a,o);r((i=i.apply(t,e)).next())}),c1=function(t,e){this[0]=t,this[1]=e},ev=t=>{var e=t[tv("asyncIterator")],i=!1,s,n={};return e==null?(e=t[tv("iterator")](),s=a=>n[a]=o=>e[a](o)):(e=e.call(t),s=a=>n[a]=o=>{if(i){if(i=!1,a==="throw")throw o;return o}return i=!0,{done:!1,value:new c1(new Promise(r=>{var l=e[a](o);if(!(l instanceof Object))throw TypeError("Object expected");r(l)}),1)}}),n[tv("iterator")]=()=>n,s("next"),"throw"in e?s("throw"):n.throw=a=>{throw a},"return"in e&&s("return"),n},h1=L({"packages/ag-charts-locale/src/ar-EG.ts"(){"use strict"}}),u1=L({"packages/ag-charts-locale/src/bg-BG.ts"(){"use strict"}}),d1=L({"packages/ag-charts-locale/src/cs-CZ.ts"(){"use strict"}}),p1=L({"packages/ag-charts-locale/src/da-DK.ts"(){"use strict"}}),g1=L({"packages/ag-charts-locale/src/de-DE.ts"(){"use strict"}}),f1=L({"packages/ag-charts-locale/src/el-GR.ts"(){"use strict"}}),iv,m1=L({"packages/ag-charts-locale/src/en-US.ts"(){"use strict";iv={ariaAnnounceVisible:"visible",ariaAnnounceHidden:"hidden",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number], ",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",toolbarAnnotationsTrendLine:"Trend line",toolbarAnnotationsHorizontalLine:"Horizontal line",toolbarAnnotationsVerticalLine:"Vertical line",toolbarAnnotationsParallelChannel:"Parallel channel",toolbarAnnotationsDisjointChannel:"Disjoint channel",toolbarAnnotationsClearAll:"Clear all annotations",toolbarAnnotationsColor:"Pick annotation color",toolbarAnnotationsLock:"Lock annotation",toolbarAnnotationsUnlock:"Unlock annotation",toolbarAnnotationsDelete:"Delete annotation",toolbarRange1Month:"1m",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3m",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6m",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here"}}}),y1=L({"packages/ag-charts-locale/src/es-ES.ts"(){"use strict"}}),v1=L({"packages/ag-charts-locale/src/fa-IR.ts"(){"use strict"}}),x1=L({"packages/ag-charts-locale/src/fi-FI.ts"(){"use strict"}}),b1=L({"packages/ag-charts-locale/src/fr-FR.ts"(){"use strict"}}),S1=L({"packages/ag-charts-locale/src/he-IL.ts"(){"use strict"}}),M1=L({"packages/ag-charts-locale/src/hr-HR.ts"(){"use strict"}}),_1=L({"packages/ag-charts-locale/src/hu-HU.ts"(){"use strict"}}),k1=L({"packages/ag-charts-locale/src/it-IT.ts"(){"use strict"}}),D1=L({"packages/ag-charts-locale/src/ja-JP.ts"(){"use strict"}}),I1=L({"packages/ag-charts-locale/src/ko-KR.ts"(){"use strict"}}),A1=L({"packages/ag-charts-locale/src/nb-NO.ts"(){"use strict"}}),L1=L({"packages/ag-charts-locale/src/nl-NL.ts"(){"use strict"}}),T1=L({"packages/ag-charts-locale/src/pl-PL.ts"(){"use strict"}}),N1=L({"packages/ag-charts-locale/src/pt-BR.ts"(){"use strict"}}),O1=L({"packages/ag-charts-locale/src/pt-PT.ts"(){"use strict"}}),C1=L({"packages/ag-charts-locale/src/ro-RO.ts"(){"use strict"}}),E1=L({"packages/ag-charts-locale/src/sk-SK.ts"(){"use strict"}}),R1=L({"packages/ag-charts-locale/src/sv-SE.ts"(){"use strict"}}),w1=L({"packages/ag-charts-locale/src/tr-TR.ts"(){"use strict"}}),P1=L({"packages/ag-charts-locale/src/uk-UA.ts"(){"use strict"}}),B1=L({"packages/ag-charts-locale/src/ur-PK.ts"(){"use strict"}}),F1=L({"packages/ag-charts-locale/src/vi-VN.ts"(){"use strict"}}),z1=L({"packages/ag-charts-locale/src/zh-CN.ts"(){"use strict"}}),G1=L({"packages/ag-charts-locale/src/zh-HK.ts"(){"use strict"}}),V1=L({"packages/ag-charts-locale/src/zh-TW.ts"(){"use strict"}}),Ok=L({"packages/ag-charts-locale/src/main.ts"(){"use strict";h1(),u1(),d1(),p1(),g1(),f1(),m1(),y1(),v1(),x1(),b1(),S1(),M1(),_1(),k1(),D1(),I1(),A1(),L1(),T1(),N1(),O1(),C1(),E1(),R1(),w1(),P1(),B1(),F1(),z1(),G1(),V1()}}),U1=L({"packages/ag-charts-types/src/api/presetOptions.ts"(){"use strict"}}),H1=L({"packages/ag-charts-types/src/chart/annotationsOptions.ts"(){"use strict"}}),W1=L({"packages/ag-charts-types/src/chart/axisOptions.ts"(){"use strict"}}),Y1=L({"packages/ag-charts-types/src/chart/callbackOptions.ts"(){"use strict"}}),K1=L({"packages/ag-charts-types/src/chart/crosshairOptions.ts"(){"use strict"}}),j1=L({"packages/ag-charts-types/src/chart/chartOptions.ts"(){"use strict"}}),X1=L({"packages/ag-charts-types/src/chart/chartBuilderOptions.ts"(){"use strict"}}),$1=L({"packages/ag-charts-types/src/chart/contextMenuOptions.ts"(){"use strict"}}),Z1=L({"packages/ag-charts-types/src/chart/crossLineOptions.ts"(){"use strict"}}),q1=L({"packages/ag-charts-types/src/chart/dropShadowOptions.ts"(){"use strict"}}),Ck,Q1=L({"packages/ag-charts-types/src/chart/errorBarOptions.ts"(){"use strict";Ck=["bar","line","scatter"]}}),J1=L({"packages/ag-charts-types/src/chart/eventOptions.ts"(){"use strict"}}),tP=L({"packages/ag-charts-types/src/chart/gradientLegendOptions.ts"(){"use strict"}}),eP=L({"packages/ag-charts-types/src/chart/labelOptions.ts"(){"use strict"}}),iP=L({"packages/ag-charts-types/src/chart/legendOptions.ts"(){"use strict"}}),sP=L({"packages/ag-charts-types/src/chart/localeOptions.ts"(){"use strict"}}),Ek,Rk,nP=L({"packages/ag-charts-types/src/chart/navigatorOptions.ts"(){"use strict";Ek={},Rk=void 0,Rk=Ek}}),aP=L({"packages/ag-charts-types/src/chart/polarAxisOptions.ts"(){"use strict"}}),oP=L({"packages/ag-charts-types/src/chart/toolbarOptions.ts"(){"use strict"}}),yp,rP=L({"packages/ag-charts-types/src/chart/tooltipOptions.ts"(){"use strict";yp=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(yp||{})}}),wk,Pk,lP=L({"packages/ag-charts-types/src/chart/themeOptions.ts"(){"use strict";wk={},Pk=void 0,Pk=wk}}),cP=L({"packages/ag-charts-types/src/chart/types.ts"(){"use strict"}}),hP=L({"packages/ag-charts-types/src/chart/zoomOptions.ts"(){"use strict"}}),uP=L({"packages/ag-charts-types/src/series/seriesOptions.ts"(){"use strict"}}),dP=L({"packages/ag-charts-types/src/series/cartesian/cartesianOptions.ts"(){"use strict"}}),pP=L({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTooltipOptions.ts"(){"use strict"}}),gP=L({"packages/ag-charts-types/src/series/cartesian/cartesianSeriesTypes.ts"(){"use strict"}}),fP=L({"packages/ag-charts-types/src/series/cartesian/areaOptions.ts"(){"use strict"}}),mP=L({"packages/ag-charts-types/src/series/cartesian/barOptions.ts"(){"use strict"}}),yP=L({"packages/ag-charts-types/src/series/cartesian/boxPlotOptions.ts"(){"use strict"}}),vP=L({"packages/ag-charts-types/src/series/cartesian/ohlcBaseOptions.ts"(){"use strict"}}),xP=L({"packages/ag-charts-types/src/series/cartesian/candlestickOptions.ts"(){"use strict"}}),bP=L({"packages/ag-charts-types/src/series/cartesian/ohlcOptions.ts"(){"use strict"}}),SP=L({"packages/ag-charts-types/src/series/cartesian/bubbleOptions.ts"(){"use strict"}}),MP=L({"packages/ag-charts-types/src/series/cartesian/bulletOptions.ts"(){"use strict"}}),_P=L({"packages/ag-charts-types/src/series/cartesian/commonOptions.ts"(){"use strict"}}),kP=L({"packages/ag-charts-types/src/series/cartesian/lineOptions.ts"(){"use strict"}}),DP=L({"packages/ag-charts-types/src/series/cartesian/heatmapOptions.ts"(){"use strict"}}),IP=L({"packages/ag-charts-types/src/series/cartesian/histogramOptions.ts"(){"use strict"}}),AP=L({"packages/ag-charts-types/src/series/cartesian/rangeBarOptions.ts"(){"use strict"}}),LP=L({"packages/ag-charts-types/src/series/cartesian/rangeAreaOptions.ts"(){"use strict"}}),TP=L({"packages/ag-charts-types/src/series/cartesian/scatterOptions.ts"(){"use strict"}}),NP=L({"packages/ag-charts-types/src/series/cartesian/waterfallOptions.ts"(){"use strict"}}),OP=L({"packages/ag-charts-types/src/series/hierarchy/hierarchyOptions.ts"(){"use strict"}}),CP=L({"packages/ag-charts-types/src/series/hierarchy/sunburstOptions.ts"(){"use strict"}}),EP=L({"packages/ag-charts-types/src/series/hierarchy/treemapOptions.ts"(){"use strict"}}),RP=L({"packages/ag-charts-types/src/series/polar/nightingaleOptions.ts"(){"use strict"}}),wP=L({"packages/ag-charts-types/src/series/polar/donutOptions.ts"(){"use strict"}}),PP=L({"packages/ag-charts-types/src/series/polar/pieOptions.ts"(){"use strict"}}),BP=L({"packages/ag-charts-types/src/series/polar/polarOptions.ts"(){"use strict"}}),FP=L({"packages/ag-charts-types/src/series/polar/radarOptions.ts"(){"use strict"}}),zP=L({"packages/ag-charts-types/src/series/polar/radarLineOptions.ts"(){"use strict"}}),GP=L({"packages/ag-charts-types/src/series/polar/radarAreaOptions.ts"(){"use strict"}}),VP=L({"packages/ag-charts-types/src/series/polar/radialBarOptions.ts"(){"use strict"}}),UP=L({"packages/ag-charts-types/src/series/polar/radialColumnOptions.ts"(){"use strict"}}),HP=L({"packages/ag-charts-types/src/series/polar/radialOptions.ts"(){"use strict"}}),WP=L({"packages/ag-charts-types/src/series/topology/topologyOptions.ts"(){"use strict"}}),YP=L({"packages/ag-charts-types/src/series/topology/mapShapeOptions.ts"(){"use strict"}}),KP=L({"packages/ag-charts-types/src/series/topology/mapLineOptions.ts"(){"use strict"}}),jP=L({"packages/ag-charts-types/src/series/topology/mapMarkerOptions.ts"(){"use strict"}}),XP=L({"packages/ag-charts-types/src/series/topology/mapShapeBackgroundOptions.ts"(){"use strict"}}),$P=L({"packages/ag-charts-types/src/series/topology/mapLineBackgroundOptions.ts"(){"use strict"}}),ZP=L({"packages/ag-charts-types/src/series/flow-proportion/flowProportionOptions.ts"(){"use strict"}}),qP=L({"packages/ag-charts-types/src/series/flow-proportion/chordOptions.ts"(){"use strict"}}),QP=L({"packages/ag-charts-types/src/series/flow-proportion/sankeyOptions.ts"(){"use strict"}}),JP=L({"packages/ag-charts-types/src/series/interpolationOptions.ts"(){"use strict"}}),tB=L({"packages/ag-charts-types/src/series/markerOptions.ts"(){"use strict"}}),Bk=L({"packages/ag-charts-types/src/main.ts"(){"use strict";U1(),H1(),W1(),Y1(),K1(),j1(),X1(),$1(),Z1(),q1(),Q1(),J1(),tP(),eP(),iP(),sP(),nP(),aP(),oP(),rP(),lP(),cP(),hP(),uP(),dP(),pP(),gP(),fP(),mP(),yP(),vP(),xP(),bP(),SP(),MP(),_P(),kP(),DP(),IP(),AP(),LP(),TP(),NP(),OP(),CP(),EP(),RP(),wP(),PP(),BP(),FP(),zP(),GP(),VP(),UP(),HP(),WP(),YP(),KP(),jP(),XP(),$P(),ZP(),qP(),QP(),JP(),tB()}});function sv(t,e){xp.has(e)||(xp.set(e,!0),t())}function Fk(t){return t}function*vp(...t){for(const e of t)yield*ev(e)}function zk(t,e=0,i){const{leading:s=!0,trailing:n=!0}=i??{};let a,o,r=!1;function l(){n&&o?(a=setTimeout(l,e),t(...o)):r=!1,o=null}function c(...h){r?o=h:(r=!0,a=setTimeout(l,e),s?t(...h):o=h)}return Object.assign(c,{cancel(){clearTimeout(a),r=!1,o=null}})}function eB(...t){return()=>{for(const e of t)e()}}var xp,Zh=L({"packages/ag-charts-community/src/util/function.ts"(){"use strict";xp=new Map,sv.clear=()=>xp.clear()}}),Z,yt=L({"packages/ag-charts-community/src/util/logger.ts"(){"use strict";Zh(),Z={log(...t){console.log(...t)},warn(t,...e){console.warn(`AG Charts - ${t}`,...e)},error(t,...e){typeof t=="object"?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)},table(...t){console.table(...t)},warnOnce(t,...e){sv(()=>Z.warn(t,...e),`Logger.warn: ${t}`)},errorOnce(t,...e){sv(()=>Z.error(t,...e),`Logger.error: ${t}`)}}}}),So,qi,vi=L({"packages/ag-charts-community/src/util/time/interval.ts"(){"use strict";yt(),So=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var s;const n=(s=this._rangeCallback)==null?void 0:s.call(this,t,e),a=this._encode(i?this.floor(t):this.ceil(t)),o=this._encode(i?this.ceil(e):this.floor(e));if(o<a)return[];const r=[];for(let l=a;l<=o;l++){const c=this._decode(l);r.push(c)}return n?.(),r}},qi=class extends So{getOffset(t,e){const i=typeof t=="number"||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i=0,s;const n=t;t=Math.max(1,Math.round(t)),n!==t&&Z.warnOnce(`interval step of [${n}] rounded to [${t}].`);const{snapTo:a="start"}=e??{};if(typeof a=="string"){const l=i;s=(c,h)=>{const u=a==="start"?c:h;return i=this.getOffset(u,t),()=>i=l}}else typeof a=="number"?i=this.getOffset(new Date(a),t):a instanceof Date&&(i=this.getOffset(a,t));const o=l=>{const c=this._encode(l);return Math.floor((c-i)/t)},r=l=>this._decode(l*t+i);return new So(o,r,s)}}}});function iB(t){return t.getTime()}function sB(t){return new Date(t)}var bp,Gk,Vk=L({"packages/ag-charts-community/src/util/time/millisecond.ts"(){"use strict";vi(),bp=new qi(iB,sB),Gk=bp}}),nB,ya,Ze,xi,ds,En,tc,yr,Rn=L({"packages/ag-charts-community/src/util/time/duration.ts"(){"use strict";nB=new Date(0).getFullYear(),ya=1e3,Ze=ya*60,xi=Ze*60,ds=xi*24,En=ds*7,tc=ds*30,yr=ds*365}});function aB(t){return Math.floor((t.getTime()-nv)/ya)}function oB(t){return new Date(nv+t*ya)}var nv,Sp,ec,av=L({"packages/ag-charts-community/src/util/time/second.ts"(){"use strict";Rn(),vi(),nv=new Date().getTimezoneOffset()*Ze,Sp=new qi(aB,oB),ec=Sp}});function rB(t){return Math.floor((t.getTime()-ov)/Ze)}function lB(t){return new Date(ov+t*Ze)}var ov,Mp,ic,rv=L({"packages/ag-charts-community/src/util/time/minute.ts"(){"use strict";Rn(),vi(),ov=new Date().getTimezoneOffset()*Ze,Mp=new qi(rB,lB),ic=Mp}});function cB(t){return Math.floor((t.getTime()-lv)/xi)}function hB(t){return new Date(lv+t*xi)}var lv,_p,sc,cv=L({"packages/ag-charts-community/src/util/time/hour.ts"(){"use strict";Rn(),vi(),lv=new Date().getTimezoneOffset()*Ze,_p=new qi(cB,hB),sc=_p}});function uB(t){const e=t.getTimezoneOffset()*Ze;return Math.floor((t.getTime()-e)/ds)}function dB(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var kp,Dp,hv=L({"packages/ag-charts-community/src/util/time/day.ts"(){"use strict";Rn(),vi(),kp=new qi(uB,dB),Dp=kp}});function vr(t){const i=(7+t-4)%7;function s(a){const o=a.getTimezoneOffset()*Ze;return Math.floor((a.getTime()-o)/En-i/7)}function n(a){const o=new Date(1970,0,1);return o.setDate(o.getDate()+a*7+i),o}return new qi(s,n)}var Ip,uv,dv,pv,gv,fv,mv,qh,yv=L({"packages/ag-charts-community/src/util/time/week.ts"(){"use strict";Rn(),vi(),Ip=vr(0),uv=vr(1),dv=vr(2),pv=vr(3),gv=vr(4),fv=vr(5),mv=vr(6),qh=Ip}});function pB(t){return t.getFullYear()*12+t.getMonth()}function gB(t){const e=Math.floor(t/12),i=t-e*12;return new Date(e,i,1)}var Ap,xr,vv=L({"packages/ag-charts-community/src/util/time/month.ts"(){"use strict";vi(),Ap=new qi(pB,gB),xr=Ap}});function fB(t){return t.getFullYear()}function mB(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var Lp,Tp,xv=L({"packages/ag-charts-community/src/util/time/year.ts"(){"use strict";vi(),Lp=new qi(fB,mB),Tp=Lp}});function yB(t){return Math.floor(t.getTime()/Ze)}function vB(t){return new Date(t*Ze)}var bv,xB=L({"packages/ag-charts-community/src/util/time/utcMinute.ts"(){"use strict";Rn(),vi(),bv=new qi(yB,vB)}});function bB(t){return Math.floor(t.getTime()/xi)}function SB(t){return new Date(t*xi)}var Sv,MB=L({"packages/ag-charts-community/src/util/time/utcHour.ts"(){"use strict";Rn(),vi(),Sv=new qi(bB,SB)}});function _B(t){return Math.floor(t.getTime()/ds)}function kB(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}var Mv,DB=L({"packages/ag-charts-community/src/util/time/utcDay.ts"(){"use strict";Rn(),vi(),Mv=new qi(_B,kB)}});function IB(t){return t.getUTCFullYear()*12+t.getUTCMonth()}function AB(t){const e=Math.floor(t/12),i=t-e*12;return new Date(Date.UTC(e,i,1))}var _v,LB=L({"packages/ag-charts-community/src/util/time/utcMonth.ts"(){"use strict";vi(),_v=new qi(IB,AB)}});function TB(t){return t.getUTCFullYear()}function NB(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}var kv,OB=L({"packages/ag-charts-community/src/util/time/utcYear.ts"(){"use strict";vi(),kv=new qi(TB,NB)}}),Uk={};tn(Uk,{TimeInterval:()=>So,day:()=>kp,friday:()=>fv,hour:()=>_p,millisecond:()=>bp,minute:()=>Mp,monday:()=>uv,month:()=>Ap,saturday:()=>mv,second:()=>Sp,sunday:()=>Ip,thursday:()=>gv,tuesday:()=>dv,utcDay:()=>Mv,utcHour:()=>Sv,utcMinute:()=>bv,utcMonth:()=>_v,utcYear:()=>kv,wednesday:()=>pv,year:()=>Lp});var Np=L({"packages/ag-charts-community/src/util/time/index.ts"(){"use strict";Vk(),av(),rv(),cv(),hv(),yv(),vv(),xv(),xB(),MB(),DB(),LB(),OB(),vi()}});function Hk(){Op.clear()}function wn(t){var e;const i=t.constructor,s=Object.hasOwn(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const n=((e=Op.get(s))!=null?e:0)+1;return Op.set(s,n),`${s}-${n}`}function CB(){return URL.createObjectURL(new Blob).split("/").at(-1)}var Op,en=L({"packages/ag-charts-community/src/util/id.ts"(){"use strict";Op=new Map}}),Qh,Dv,Iv=L({"packages/ag-charts-community/src/util/interpolating.ts"(){"use strict";Qh="$interpolate",Dv=t=>t[Qh]!=null}});function Cp(t,e,i,s=1/0){const n={nearest:void 0,distanceSquared:s};for(const a of i){const o=a.distanceSquared(t,e);if(o===0)return{nearest:a,distanceSquared:0};o<n.distanceSquared&&(n.nearest=a,n.distanceSquared=o)}return n}function EB(t,e,i,s=1/0){const{x:n,y:a}=i.transformPoint(t,e),o={nearest:void 0,distanceSquared:s};for(const r of i.children){const{nearest:l,distanceSquared:c}=r.nearestSquared(n,a,o.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<o.distanceSquared&&(o.nearest=l,o.distanceSquared=c)}return o}var Ep=L({"packages/ag-charts-community/src/util/nearest.ts"(){"use strict"}});function St(t,e,i){return Math.min(i,Math.max(t,e))}function Rp(t,e){const[i,s]=Ls(e);return St(i,t,s)}function Ls(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Jh(t){const[e,i]=Ls(t);return i-e}function br(t,e,i=1e-10){return Math.abs(t-e)<i}function nc(t){return Math.sign(t)===-1||Object.is(t,-0)}function Av(t,e=2){const i=nt(10,e);return Math.round(t*i)/i}function wp(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function Pp(t,e){return Math.floor(t%e+(t<0?e:0))}function Bp(t,e=10){const[,i=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return i.length}function Lv(t,e){return e=e??navigator.language,new Intl.NumberFormat(e,{style:"percent"}).format(t)}function Tv(t,e){return Lv(t/100,e)}var _t=L({"packages/ag-charts-community/src/util/number.ts"(){"use strict"}}),ac,ot,Mt=L({"packages/ag-charts-community/src/scene/bbox.ts"(){"use strict";Iv(),Ep(),_t(),ac=class up{constructor(e,i,s,n){this.x=e,this.y=i,this.width=s,this.height=n}static fromDOMRect({x:e,y:i,width:s,height:n}){return new up(e,i,s,n)}clone(){const{x:e,y:i,width:s,height:n}=this;return new up(e,i,s,n)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,i){return e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,i){if(this.containsPoint(e,i))return 0;const s=e-St(this.x,e,this.x+this.width),n=i-St(this.y,i,this.y+this.height);return s*s+n*n}static nearestBox(e,i,s){return Cp(e,i,s)}clip(e){if(e===void 0)return this;const i=Math.max(this.x,e.x),s=Math.max(this.y,e.y),n=Math.min(this.x+this.width,e.x+e.width),a=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.y=s,this.width=Math.max(0,n-i),this.height=Math.max(0,a-s),this}shrink(e,i){const s=(n,a)=>{switch(n){case"top":this.y+=a;case"bottom":this.height-=a;break;case"left":this.x+=a;case"right":this.width-=a;break;case"vertical":this.y+=a,this.height-=a*2;break;case"horizontal":this.x+=a,this.width-=a*2;break;case void 0:this.x+=a,this.width-=a*2,this.y+=a,this.height-=a*2;break;default:}};return typeof e=="number"?s(i,e):typeof e=="object"&&Object.entries(e).forEach(([n,a])=>s(n,a)),this}grow(e,i){if(typeof e=="number")this.shrink(-e,i);else{const s=B({},e);for(const n in s)s[n]*=-1;this.shrink(s)}return this}translate(e,i){return this.x+=e,this.y+=i,this}combine(e){const{x:i,y:s,width:n,height:a}=this;this.x=Math.min(i,e.x),this.y=Math.min(s,e.y),this.width=Math.max(i+n,e.x+e.width)-this.x,this.height=Math.max(s+a,e.y+e.height)-this.y}static merge(e){let i=1/0,s=1/0,n=-1/0,a=-1/0;for(const o of e)o.x<i&&(i=o.x),o.y<s&&(s=o.y),o.x+o.width>n&&(n=o.x+o.width),o.y+o.height>a&&(a=o.y+o.height);return new up(i,s,n-i,a-s)}[Qh](e,i){return new up(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}},ac.zero=new ac(0,0,0,0),ac.NaN=new ac(NaN,NaN,NaN,NaN),ot=ac}});function at(t){return function(e,i){const s=`__${i}`;e[i]||RB(e,i,s,t)}}function RB(t,e,i,s){const{redraw:n=1,type:a="normal",changeCb:o,convertor:r,checkDirtyOnAssignment:l=!1}=s??{},c={redraw:n,type:a,changeCb:o,checkDirtyOnAssignment:l,convertor:r};let h;switch(a){case"normal":h=FB(i,c);break;case"transform":h=zB(i,c);break;case"path":h=GB(i,c);break;case"font":h=VB(i,c);break}h=BB(PB(wB(h,c),c),c),Object.defineProperty(t,e,{set:h,get:function(){return this[i]},enumerable:!0,configurable:!0})}function wB(t,e){const{convertor:i}=e;return i?function(s){t.call(this,i(s))}:t}function PB(t,e){const{changeCb:i}=e;return i?function(s){const n=t.call(this,s);return n!==Sr&&i.call(this,this),n}:t}function BB(t,e){const{checkDirtyOnAssignment:i}=e;return i?function(s){const n=t.call(this,s);return n!==Sr&&s!=null&&s._dirty>0&&this.markDirty(s,s._dirty),n}:t}function FB(t,e){const{redraw:i=1,changeCb:s}=e;return function(n){const a=this[t];return n!==a?(this[t]=n,this.markDirty(this,i),s?.(this),n):Sr}}function zB(t,e){const{redraw:i=1}=e;return function(s){const n=this[t];return s!==n?(this[t]=s,this.markDirtyTransform(i),s):Sr}}function GB(t,e){const{redraw:i=1}=e;return function(s){const n=this[t];return s!==n?(this[t]=s,this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,i)),s):Sr}}function VB(t,e){const{redraw:i=1}=e;return function(s){const n=this[t];return s!==n?(this[t]=s,this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,i)),s):Sr}}var va,Sr,Wk,tu=L({"packages/ag-charts-community/src/scene/changeDetectable.ts"(){"use strict";va=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(va||{}),Sr=Symbol("no-change"),Wk=class{constructor(){this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}}}}),Fp,sn,Nv=L({"packages/ag-charts-community/src/scene/matrix.ts"(){"use strict";Mt(),Fp=class dp{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){const i=this.elements;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],this}get identity(){const e=this.elements;return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0}AxB(e,i,s){const n=e[0]*i[0]+e[2]*i[1],a=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],r=e[1]*i[2]+e[3]*i[3],l=e[0]*i[4]+e[2]*i[5]+e[4],c=e[1]*i[4]+e[3]*i[5]+e[5];s=s??e,s[0]=n,s[1]=a,s[2]=o,s[3]=r,s[4]=l,s[5]=c}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const i=new Array(6);return this.AxB(this.elements,e.elements,i),new dp(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new dp([a,-s,-n,i,n*r-a*o,s*o-i*r])}inverseTo(e){const i=this.elements;let s=i[0],n=i[1],a=i[2],o=i[3];const r=i[4],l=i[5],c=1/(s*o-n*a);return s*=c,n*=c,a*=c,o*=c,e.setElements([o,-n,-a,s,a*l-o*r,n*r-s*l]),this}invertSelf(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,e[0]=a,e[1]=-s,e[2]=-n,e[3]=i,e[4]=n*r-a*o,e[5]=s*o-i*r,this}transformPoint(e,i){const s=this.elements;return{x:e*s[0]+i*s[2]+s[4],y:e*s[1]+i*s[3]+s[5]}}transformBBox(e,i){const s=this.elements,n=s[0],a=s[1],o=s[2],r=s[3],l=e.width*.5,c=e.height*.5,h=e.x+l,u=e.y+c,d=Math.abs(l*n)+Math.abs(c*o),p=Math.abs(l*a)+Math.abs(c*r);return i||(i=new ot(0,0,0,0)),i.x=h*n+u*o+s[4]-d,i.y=h*a+u*r+s[5]-p,i.width=d+d,i.height=p+p,i}toContext(e){if(this.identity)return;const i=this.elements;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static flyweight(e){return dp.instance.setElements(e.elements)}static updateTransformMatrix(e,i,s,n,a,o,r){const[l,c]=[0,0],h=i,u=s;let d,p;h===1&&u===1?(d=0,p=0):(d=r?.scalingCenterX==null?l:r?.scalingCenterX,p=r?.scalingCenterY==null?c:r?.scalingCenterY);const g=n,f=Math.cos(g),m=Math.sin(g);let v,y;g===0?(v=0,y=0):(v=r?.rotationCenterX==null?l:r?.rotationCenterX,y=r?.rotationCenterY==null?c:r?.rotationCenterY);const x=a,b=o,S=d*(1-h)-v,k=p*(1-u)-y;return e.setElements([f*h,m*h,-m*u,f*u,f*S-m*k+v+x,m*S+f*k+y+b]),e}static fromContext(e){const i=e.getTransform();return new dp([i.a,i.b,i.c,i.d,i.e,i.f])}},Fp.instance=new Fp,sn=Fp}}),Ov,Pi,Mr,ae=L({"packages/ag-charts-community/src/scene/node.ts"(){"use strict";en(),Mt(),tu(),Nv(),Ov=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(Ov||{}),Pi=class Cw extends Wk{constructor({isVirtual:e,tag:i,zIndex:s}={}){super(),this.serialNumber=Cw._nextSerialNumber++,this.id=wn(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new sn,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this._childNodeCounts={groups:0,nonGroups:0},this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=e??!1,this.tag=i??NaN,this.zIndex=s??0}get datum(){var e,i;return(i=this._datum)!=null?i:(e=this._parent)==null?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum),this._datum=e}_setLayerManager(e){this._layerManager=e,this._debug=e?.debug;for(const i of this._children)i._setLayerManager(e);for(const i of this._virtualChildren)i._setLayerManager(e)}get layerManager(){return this._layerManager}*ancestors(){let e=this;for(;e=e.parent;)yield e}*traverseUp(){yield this,yield*ev(this.ancestors())}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap(e=>e.children)):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(e,i){const s=i??Object.keys(e);for(const n of s)this[n]=e[n];return this}append(e){Array.isArray(e)||(e=[e]);for(const i of e){if(i.parent)throw new Error(`${i} already belongs to another parent: ${i.parent}.`);if(i.layerManager)throw new Error(`${i} already belongs to a scene: ${i.layerManager}.`);if(this.childSet[i.id])throw new Error(`Duplicate ${i.constructor.name} node: ${i}`);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(e){return this.append(e),e}removeChild(e){const i=()=>{throw new Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&i(),e.isVirtual){const s=this._virtualChildren.indexOf(e);s<0&&i(),this._virtualChildren.splice(s,1)}else{const s=this._children.indexOf(e);s<0&&i(),this._children.splice(s,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,3),e}calculateCumulativeMatrix(){this.computeTransformMatrix();const e=sn.flyweight(this.matrix);for(const i of this.ancestors())i.computeTransformMatrix(),e.preMultiplySelf(i.matrix);return e}transformPoint(e,i){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,i)}inverseTransformPoint(e,i){return this.calculateCumulativeMatrix().transformPoint(e,i)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}destroy(){var e;(e=this.parent)==null||e.removeChild(this)}containsPoint(e,i){return!1}pickNode(e,i){var s;if(!this.visible||this.pointerEvents===1||!this.containsPoint(e,i))return;const{children:n}=this;if(n.length>1e3)for(let a=n.length-1;a>=0;a--){const o=n[a],l=((s=o.computeTransformedBBox())==null?void 0:s.containsPoint(e,i))?o.pickNode(e,i):void 0;if(l)return l}else if(n.length)for(let a=n.length-1;a>=0;a--){const o=n[a].pickNode(e,i);if(o)return o}else if(!this.isContainerNode)return this}getCachedBBox(){var e;return(e=this.cachedBBox)!=null?e:ot.zero}computeBBox(){}computeTransformedBBox(){const e=this.computeBBox();if(!e)return;this.computeTransformMatrix();const i=sn.flyweight(this.matrix);for(const s of this.ancestors())s.computeTransformMatrix(),i.preMultiplySelf(s.matrix);return i.transformBBox(e,e),e}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:e,scalingX:i,scalingY:s,rotation:n,translationX:a,translationY:o,scalingCenterX:r,scalingCenterY:l,rotationCenterX:c,rotationCenterY:h}=this;sn.updateTransformMatrix(e,i,s,n,a,o,{scalingCenterX:r,scalingCenterY:l,rotationCenterX:c,rotationCenterY:h}),this.dirtyTransform=!1}preRender(){this._childNodeCounts.groups=0,this._childNodeCounts.nonGroups=1;for(const e of this.children){const i=e.preRender();this._childNodeCounts.groups+=i.groups,this._childNodeCounts.nonGroups+=i.nonGroups}return this._childNodeCounts}render(e){const{stats:i}=e;this._dirty=0,this.cachedBBox=this.computeBBox(),i&&i.nodesRendered++}markDirty(e,i=1,s=i){this._dirty>i||this._dirty===i&&i===s||(this._dirty=i,this.parent?this.parent.markDirty(this,s):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){const{force:i=!1,recursive:s=!0}=e??{};if(!(this._dirty===0&&!i)){if(this._dirty=0,s!==!1)for(const n of this._virtualChildren)n.markClean({force:i});if(s===!0)for(const n of this._children)n.markClean({force:i})}}onVisibleChange(){}get nodeCount(){let e=1,i=this._dirty>=0||this.dirtyTransform?1:0,s=this.visible?1:0;const n=a=>{const{count:o,visibleCount:r,dirtyCount:l}=a.nodeCount;e+=o,s+=r,i+=l};for(const a of this._children)n(a);for(const a of this._virtualChildren)n(a);return{count:e,visibleCount:s,dirtyCount:i}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}},Pi._nextSerialNumber=0,_([at({type:"transform"})],Pi.prototype,"scalingX",2),_([at({type:"transform"})],Pi.prototype,"scalingY",2),_([at({type:"transform"})],Pi.prototype,"scalingCenterX",2),_([at({type:"transform"})],Pi.prototype,"scalingCenterY",2),_([at({type:"transform"})],Pi.prototype,"rotationCenterX",2),_([at({type:"transform"})],Pi.prototype,"rotationCenterY",2),_([at({type:"transform"})],Pi.prototype,"rotation",2),_([at({type:"transform"})],Pi.prototype,"translationX",2),_([at({type:"transform"})],Pi.prototype,"translationY",2),_([at({redraw:3,changeCb:t=>t.onVisibleChange()})],Pi.prototype,"visible",2),_([at({redraw:1,changeCb:t=>t.onZIndexChange()})],Pi.prototype,"zIndex",2),_([at({redraw:1,changeCb:t=>t.onZIndexChange()})],Pi.prototype,"zIndexSubOrder",2),Mr=Pi}}),eu,zp,Gp,Cv,nn,Vp=L({"packages/ag-charts-community/src/util/color.ts"(){"use strict";_t(),eu=(t,e,i)=>t*(1-i)+e*i,zp=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*nt((i+.055)/1.055,2.4)},Gp=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*nt(i,1/2.4)-.055):12.92*t},Cv=class ie{constructor(e,i,s,n=1){this.r=St(0,e||0,1),this.g=St(0,i||0,1),this.b=St(0,s||0,1),this.a=St(0,n||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!ie.parseHex(e):e.indexOf("rgb")>=0?!!ie.stringToRgba(e):!!ie.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return ie.fromHexString(e);const i=ie.nameToHex[e.toLowerCase()];if(i)return ie.fromHexString(i);if(e.indexOf("rgb")>=0)return ie.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static parseHex(e){e=e.replace(/ /g,"").slice(1);let i;switch(e.length){case 6:case 8:i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(`${e[s]}${e[s+1]}`,16));break;case 3:case 4:i=e.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if(i?.length>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(e){const i=ie.parseHex(e);if(i){const[s,n,a,o]=i;return new ie(s/255,n/255,a/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let i=-1,s=-1;for(let r=0;r<e.length;r++){const l=e[r];if(i===-1&&l==="(")i=r;else if(l===")"){s=r;break}}if(i===-1||s===-1)return;const a=e.substring(i+1,s).split(","),o=[];for(let r=0;r<a.length;r++){const l=a[r];let c=parseFloat(l);if(!Number.isFinite(c))return;l.indexOf("%")>=0?(c=St(0,c,100),c/=100):r===3?c=St(0,c,1):(c=St(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(e){const i=ie.stringToRgba(e);if(i){if(i.length===3)return new ie(i[0],i[1],i[2]);if(i.length===4)return new ie(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(e.length===4)return new ie(e[0],e[1],e[2],e[3]);if(e.length===3)return new ie(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s,n=1){const a=ie.HSBtoRGB(e,i,s);return new ie(a[0],a[1],a[2],n)}static fromHSL(e,i,s,n=1){const a=ie.HSLtoRGB(e,i,s);return new ie(a[0],a[1],a[2],n)}static fromOKLCH(e,i,s,n=1){const a=ie.OKLCHtoRGB(e,i,s);return new ie(a[0],a[1],a[2],n)}static padHex(e){return e.length===1?"0"+e:e}toHexString(){let e="#"+ie.padHex(Math.round(this.r*255).toString(16))+ie.padHex(Math.round(this.g*255).toString(16))+ie.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(e+=ie.padHex(Math.round(this.a*255).toString(16))),e}toRgbaString(e=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,e);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return ie.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,i,s){const n=zp(e),a=zp(i),o=zp(s),r=Math.cbrt(.4122214708*n+.5363325363*a+.0514459929*o),l=Math.cbrt(.2119034982*n+.6806995451*a+.1073969566*o),c=Math.cbrt(.0883024619*n+.2817188376*a+.6299787005*o),h=.2104542553*r+.793617785*l-.0040720468*c,u=1.9779984951*r-2.428592205*l+.4505937099*c,d=.0259040371*r+.7827717662*l-.808675766*c,p=Math.atan2(d,u)*180/Math.PI,g=h,f=Math.hypot(u,d),m=p>=0?p:p+360;return[g,f,m]}static OKLCHtoRGB(e,i,s){const n=e,a=i*Math.cos(s*Math.PI/180),o=i*Math.sin(s*Math.PI/180),r=nt(n+.3963377774*a+.2158037573*o,3),l=nt(n-.1055613458*a-.0638541728*o,3),c=nt(n-.0894841775*a-1.291485548*o,3),h=4.0767416621*r-3.3077115913*l+.2309699292*c,u=-1.2684380046*r+2.6097574011*l-.3413193965*c,d=-.0041960863*r-.7034186147*l+1.707614701*c,p=Gp(h),g=Gp(u),f=Gp(d);return[p,g,f]}static RGBtoHSL(e,i,s){const n=Math.min(e,i,s),a=Math.max(e,i,s),o=(a+n)/2;let r,l;if(a===n)r=0,l=0;else{const c=a-n;l=o>.5?c/(2-a-n):c/(a+n),a===e?r=(i-s)/c+(i<s?6:0):a===i?r=(s-e)/c+2:r=(e-i)/c+4,r*=360/6}return[r,l,o]}static HSLtoRGB(e,i,s){if(e=(e%360+360)%360,i===0)return[s,s,s];const n=s<.5?s*(1+i):s+i-s*i,a=2*s-n;function o(h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?a+(n-a)*6*h:h<1/2?n:h<2/3?a+(n-a)*(2/3-h)*6:a}const r=o(e/360+1/3),l=o(e/360),c=o(e/360-1/3);return[r,l,c]}static RGBtoHSB(e,i,s){const n=Math.min(e,i,s),a=Math.max(e,i,s),o=a===0?0:(a-n)/a;let r=0;if(n!==a){const l=a-n,c=(a-e)/l,h=(a-i)/l,u=(a-s)/l;e===a?r=u-h:i===a?r=2+c-u:r=4+h-c,r/=6,r<0&&(r=r+1)}return[r*360,o,a]}static HSBtoRGB(e,i,s){e=(e%360+360)%360/360;let n=0,a=0,o=0;if(i===0)n=a=o=s;else{const r=(e-Math.floor(e))*6,l=r-Math.floor(r),c=s*(1-i),h=s*(1-i*l),u=s*(1-i*(1-l));switch(r>>0){case 0:n=s,a=u,o=c;break;case 1:n=h,a=s,o=c;break;case 2:n=c,a=s,o=u;break;case 3:n=c,a=h,o=s;break;case 4:n=u,a=c,o=s;break;case 5:n=s,a=c,o=h;break}}return[n,a,o]}static mix(e,i,s){return new ie(eu(e.r,i.r,s),eu(e.g,i.g,s),eu(e.b,i.b,s),eu(e.a,i.a,s))}},Cv.nameToHex={__proto__:null,aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},nn=Cv}});function Yk(t,e){return i=>Number(t)*(1-i)+Number(e)*i}function Kk(t,e){if(typeof t=="string")try{t=nn.fromString(t)}catch{t=nn.fromArray([0,0,0])}if(typeof e=="string")try{e=nn.fromString(e)}catch{e=nn.fromArray([0,0,0])}return i=>nn.mix(t,e,i).toRgbaString()}var jk=L({"packages/ag-charts-community/src/util/interpolate.ts"(){"use strict";Vp()}});function Xk(t,e){Object.getOwnPropertyDescriptor(t,_r)==null&&Object.defineProperty(t,_r,{value:{}});const i=t[_r],s=e.toString();if(typeof i[s]<"u")return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const a=Object.getOwnPropertyDescriptor(t,e),o=a?.set,r=a?.get;return Object.defineProperty(t,e,{set:function(h){const{setters:u,observers:d}=i[s];let p;u.some(g=>g.length>2)&&(p=r?r.call(this):n.get(this));for(const g of u)if(h=g(this,e,h,p),h===iu)return;o?o.call(this,h):n.set(this,h);for(const g of d)g(this,h,p)},get:function(){let h=r?r.call(this):n.get(this);for(const u of i[s].getters)if(h=u(this,e,h),h===iu)return;return h},enumerable:!0,configurable:!1}),i[s]}function xa(t,e,i){return(s,n)=>{const a=Xk(s,n);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function UB(t){return(e,i)=>{Xk(e,i).observers.push(t)}}function Up(t){return typeof t<"u"&&_r in t}function oc(t){const e=new Set;for(;Up(t);)e.add(t?.[_r]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(i=>Object.keys(i))}function HB(t){return oc(t).reduce((e,i)=>{var s;return e[i]=(s=t[i])!=null?s:null,e},{})}function WB(t,e){const i=e.toString();for(;Up(t);){const s=t[_r];if(Object.hasOwn(s,i))return s[i];t=Object.getPrototypeOf(t)}}var iu,_r,kr=L({"packages/ag-charts-community/src/util/decorator.ts"(){"use strict";iu=Symbol("BREAK"),_r="__decorator_config"}});function su(t){return t!=null}function ke(t){return Array.isArray(t)}function $k(t){return typeof t=="boolean"}function nu(t){return t instanceof Date}function au(t){return nu(t)&&!isNaN(Number(t))}function Zk(t){return t instanceof RegExp}function Dr(t){return typeof t=="function"}function Ts(t){return typeof t=="object"&&t!==null&&!ke(t)}function YB(t){return ke(t)||Ns(t)}function Ns(t){return typeof t=="object"&&t!==null&&t.constructor===Object}function Os(t){return typeof t=="string"}function ps(t){return typeof t=="number"}function Ot(t){return ps(t)&&Number.isFinite(t)}function qk(t){return typeof window<"u"&&t instanceof HTMLElement}function KB(t,e){return Os(e)&&Object.keys(t).includes(e)}function Qk(t,e){return Object.values(t).includes(e)}function Jk(t){return typeof t=="symbol"}var Ct=L({"packages/ag-charts-community/src/util/type-guards.ts"(){"use strict"}});function jB(...t){return kt(...t.reverse())}function kt(...t){var e;const i={};for(const s of t){if(!Ts(s))continue;const n=Up(s)?oc(s):Object.keys(s);for(const a of n)Ns(i[a])&&Ns(s[a])?i[a]=kt(i[a],s[a]):(e=i[a])!=null||(i[a]=s[a])}return i}function Ev(t,...e){return e&&ke(t)?t.map(i=>kt(i,...e)):t}function Rv(t,e){return Object.entries(t).reduce((i,[s,n])=>(i[s]=e(n,s,t),i),{})}function wv(t,e){const i=B({},t);for(const s of e)delete i[s];return i}function Pv(t,e){return(ke(e)?e:e.split(".")).reduce((s,n)=>s[n],t)}function Bv(t,e,i){const s=ke(e)?e.slice():e.split("."),n=s.pop();if(s.some(o=>Hp.has(o)))return;const a=s.reduce((o,r)=>o[r],t);return a[n]=i,a[n]}function Ir(t,e,i){if(i===void 0)return e;for(const s of t){const n=i[s];n!==void 0&&(e[s]=n)}return e}var Hp,ue=L({"packages/ag-charts-community/src/util/object.ts"(){"use strict";kr(),Ct(),Hp=new Set(["__proto__","constructor","prototype"])}});function Pn(t){return t instanceof xt||t instanceof ou}var xt,ou,ne=L({"packages/ag-charts-community/src/util/properties.ts"(){"use strict";kr(),yt(),Ct(),xt=class{set(t){const{className:e=this.constructor.name}=this.constructor;if(typeof t!="object")return Z.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of oc(this))if(i.has(s)){const n=t[s],a=this;Pn(a[s])?a[s]=a[s]instanceof ou?a[s].reset(n):a[s].set(n):a[s]=n,i.delete(s)}for(const s of i)Z.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}isValid(t){return oc(this).every(e=>{const{optional:i}=WB(this,e),s=i===!0||typeof this[e]<"u";return s||Z.warnOnce(`${t??""}[${e}] is required.`),s})}toJson(){return oc(this).reduce((t,e)=>{const i=this[e];return t[e]=Pn(i)?i.toJson():i,t},{})}},ou=class Ew extends Array{constructor(e,...i){super(i.length);const n=(a=>{var o,r;return!!((r=(o=a?.prototype)==null?void 0:o.constructor)!=null&&r.name)})(e)?a=>new e().set(a):e;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(ke(e)){this.length=e.length;for(let i=0;i<e.length;i++)this[i]=this.itemFactory(e[i])}return this}reset(e){return new Ew(this.itemFactory,...e)}toJson(){return this.map(e=>{var i,s;return(s=(i=e?.toJson)==null?void 0:i.call(e))!=null?s:e})}}}});function gs(t,e,i){if(ke(e)){if(!ke(t)||t.length!==e.length||e.some((s,n)=>gs(t[n],s)!=null))return e}else if(Ns(e)){if(!Ns(t))return e;const s={},n=new Set([...Object.keys(t),...Object.keys(e)]);for(const a of n)if(!(t[a]===e[a]||i?.includes(a)))if(typeof t[a]==typeof e[a]){const o=gs(t[a],e[a]);o!==null&&(s[a]=o)}else s[a]=e[a];return Object.keys(s).length?s:null}else if(t!==e)return e;return null}function ri(t,e){return ke(t)?t.map(i=>ri(i,e)):Ns(t)?Rv(t,(i,s)=>{var n;return(n=e?.shallow)!=null&&n.includes(s)?Wp(i):ri(i,e)}):Wp(t)}function Wp(t){return ke(t)?[...t]:Ns(t)?B({},t):nu(t)?new Date(t):Zk(t)?new RegExp(t.source,t.flags):t}function Bn(t,e,i,...s){var n;if(ke(t))e(t,...s),t.forEach((a,o)=>{Bn(a,e,i,...tD(s,o))});else if(Ns(t)){e(t,...s);for(const a of Object.keys(t)){if((n=i?.skip)!=null&&n.includes(a))continue;const o=t[a];(ke(o)||Ns(o))&&Bn(o,e,i,...tD(s,a))}}}function ba(t,e,i={}){const{path:s,constructedArrays:n,matcherPath:a=s?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(t==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(e==null)return t;if(Pn(t))return t.set(e);const r=t,l=Fv(t);for(const c in e){if(Hp.has(c))continue;const h=`${a?a+".":""}${c}`;if(o.includes(h))continue;const u=e[c],d=`${s?s+".":""}${c}`,p=r.constructor,g=r[c];let f;try{const m=Fv(g),v=Fv(u);if(l===ru&&!(c in t)){Z.warn(`unable to set [${d}] in ${p?.name} - property is unknown`);continue}if(m!=null&&v!=null&&v!==m&&(m!==ru||v!=="object")){Z.warn(`unable to set [${d}] in ${p?.name} - can't apply type of [${v}], allowed types are: [${m}]`);continue}if(Pn(g))r[c].set(u);else if(v==="array")if(f??(f=n?.get(g)),f==null)r[c]=u;else{const y=u;r[c]=y.map(x=>ba(new f,x,K(B({},i),{path:d,matcherPath:h+"[]"})))}else v===ru?r[c]=u:v==="object"?g!=null?ba(g,u,K(B({},i),{path:d,matcherPath:h})):f==null?(r[c]={},ba(r[c],u,K(B({},i),{path:d,matcherPath:h}))):r[c]=ba(new f,u,K(B({},i),{path:d,matcherPath:h})):r[c]=u}catch(m){Z.warn(`unable to set [${d}] in [${p?.name}]; nested error is: ${m.message}`)}}return t}function tD(t,e){return t.map(i=>i?.[e])}function Fv(t){return t==null?null:qk(t)||nu(t)?"primitive":ke(t)?"array":Ts(t)?Ns(t)?"object":ru:Dr(t)?"function":"primitive"}var ru,bi=L({"packages/ag-charts-community/src/util/json.ts"(){"use strict";yt(),ue(),ne(),Ct(),ru="class-instance"}}),zv={};tn(zv,{easeIn:()=>eD,easeInOut:()=>iD,easeInOutQuad:()=>aD,easeInQuad:()=>sD,easeOut:()=>rc,easeOutQuad:()=>nD,inverseEaseOut:()=>Vv,linear:()=>Gv});var Gv,eD,rc,iD,sD,nD,aD,Vv,lc=L({"packages/ag-charts-community/src/motion/easing.ts"(){"use strict";Gv=t=>t,eD=t=>1-Math.cos(t*Math.PI/2),rc=t=>Math.sin(t*Math.PI/2),iD=t=>-(Math.cos(t*Math.PI)-1)/2,sD=t=>t*t,nD=t=>1-nt(1-t,2),aD=t=>t<.5?2*t*t:1-nt(-2*t+2,2)/2,Vv=t=>2*Math.asin(t)/Math.PI}});function XB(t){return t.every(e=>e instanceof Mr)}function Yp(t){return XB(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var lu,Ar,cc,Uv,Hv,Lr=L({"packages/ag-charts-community/src/motion/animation.ts"(){"use strict";ae(),jk(),Iv(),bi(),_t(),lc(),lu=.2,Ar=["initial","remove","update","add","trailing","end","none"],cc={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:lu,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+lu,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},Uv=(t=>(t.Loop="loop",t.Reverse="reverse",t))(Uv||{}),Hv=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1;var e,i,s,n,a,o,r;this.id=t.id,this.groupId=t.groupId,this.autoplay=(e=t.autoplay)!=null?e:!0,this.ease=(i=t.ease)!=null?i:Gv,this.phase=t.phase;const l=(s=t.duration)!=null?s:cc[this.phase].animationDuration;this.duration=l*t.defaultDuration,this.delay=((n=t.delay)!=null?n:0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&((a=this.onUpdate)==null||a.call(this,t.to,!1,this),(o=this.onStop)==null||o.call(this,this),(r=this.onComplete)==null||r.call(this,this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return t.from===t.to?0:(typeof t.from=="object"?gs(t.from,t.to):null)?e:0}play(t=!1){var e,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,(e=this.onPlay)==null||e.call(this,this),this.autoplay&&(this.autoplay=!1,t&&((i=this.onUpdate)==null||i.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var t;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,(t=this.onStop)==null||t.call(this,this))}update(t){var e,i;if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const s=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);(e=this.onUpdate)==null||e.call(this,n,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,(i=this.onComplete)==null||i.call(this,this),t-(a-s)):0}get delta(){return this.ease(St(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if(typeof e!="object"||Dv(e))return this.interpolateValue(t,e);const i=[];for(const s in e){const n=this.interpolateValue(t[s],e[s]);n!=null&&i.push([s,n])}return s=>{const n={};for(const[a,o]of i)n[a]=o(s);return n}}interpolateValue(t,e){if(!(t===void 0||e===void 0)){if(Dv(t))return i=>t[Qh](e,i);try{switch(typeof t){case"number":return Yk(t,e);case"string":return Kk(t,e);case"boolean":if(t===e)return()=>t;break}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}}}}),oD={};tn(oD,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Si,fromToMotion:()=>xe,staticFromToMotion:()=>Fn});function xe(t,e,i,s,n,a,o){const{fromFn:r,toFn:l,intermediateFn:c}=n,{nodes:h,selections:u}=Yp(s),d=(g,f)=>{var m;let v,y=0,x=0;for(const b of f){const S=g[y]===b,k={last:x>=f.length-1,lastLive:y>=g.length-1,prev:f[x-1],prevFromProps:v,prevLive:g[y-1],next:f[x+1],nextLive:g[y+(S?1:0)]},D=`${t}_${e}_${b.id}`;i.stopByAnimationId(D);let T="unknown";S?a&&o&&(T=$B(b,b.datum,a,o)):T="removed";const I=r(b,b.datum,T,k),{phase:N,start:C,finish:E,delay:O,duration:P}=I,w=se(I,["phase","start","finish","delay","duration"]),R=l(b,b.datum,T,k),{phase:G,start:z,finish:U,delay:V,duration:X}=R,j=se(R,["phase","start","finish","delay","duration"]),tt=E==null&&U==null;i.animate({id:D,groupId:t,phase:(m=N??G)!=null?m:"update",duration:P??X,delay:O??V,from:w,to:j,ease:rc,collapsable:tt,onPlay:()=>{b.setProperties(B(B({},C),z))},onUpdate(ct){b.setProperties(ct),c&&b.setProperties(c(b,b.datum,T,k))},onStop:()=>{b.setProperties(B(B(B(B(B(B({},C),z),w),j),E),U))}}),S&&y++,x++,v=w}};let p=0;for(const g of u){const f=g.nodes(),m=f.filter(v=>!g.isGarbage(v));d(m,f),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:rc,onStop(){g.cleanup()}}),p++}d(h,h)}function Fn(t,e,i,s,n,a,o){const{nodes:r,selections:l}=Yp(s),{start:c,finish:h,phase:u}=o,d=h==null;i.animate({id:`${t}_${e}`,groupId:t,phase:u??"update",from:n,to:a,ease:rc,collapsable:d,onPlay:()=>{if(c){for(const p of r)p.setProperties(c);for(const p of l)for(const g of p.nodes())g.setProperties(c)}},onUpdate(p){for(const g of r)g.setProperties(p);for(const g of l)for(const f of g.nodes())f.setProperties(p)},onStop:()=>{for(const p of r)p.setProperties(B(B({},a),h));for(const p of l)for(const g of p.nodes())g.setProperties(B(B({},a),h))}})}function $B(t,e,i,s){const n=i(t,e);return s.added.has(n)?"added":s.removed.has(n)?"removed":"updated"}var Si,li=L({"packages/ag-charts-community/src/motion/fromToMotion.ts"(){"use strict";Lr(),lc(),Si={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"}}});function Wv(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+i*6e4,n=36e5*24;return Math.floor(s/n)}function rD(t,e){const s=new Date(t.getFullYear(),0,1).getDay(),n=(e-s+7)%7,a=new Date(t.getFullYear(),0,n+1);return a<=t?Math.floor(Wv(t,a)/7)+1:0}function lD(t,e=t.getFullYear()){const s=new Date(e,0,1).getDay(),n=(Kv-s+7)%7,a=new Date(e,0,n-(Kv-Yv)+1);return a<=t?Math.floor(Wv(t,a)/7)+1:lD(t,e-1)}function ZB(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${ci(Math.floor(i/60),2,"0")}${ci(Math.floor(i%60),2,"0")}`}function ci(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function cu(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(i!==0){const r=i>0?t.substring(0,i):t;e.push(r)}if(i<0)break;const s=t[i+1],n=uD[s];n!=null&&i++;const a=t[i+1],o=hD[a];if(typeof o=="function")e.push([o,n]);else if(typeof o=="string"){const r=cu(o);e.push([r,n])}else e.push(`${n??""}${a}`);t=t.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return e.map(n=>typeof n=="string"?n:n[0](s,n[1])).join("")}}var hu,cD,Yv,Kv,hD,uD,Kp=L({"packages/ag-charts-community/src/util/timeFormat.ts"(){"use strict";hu={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},cD=0,Yv=1,Kv=4,hD={a:t=>hu.shortDays[t.getDay()],A:t=>hu.days[t.getDay()],b:t=>hu.shortMonths[t.getMonth()],B:t=>hu.months[t.getMonth()],c:"%x, %X",d:(t,e)=>ci(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>ci(t.getMilliseconds()*1e3,6,e??"0"),H:(t,e)=>ci(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return i===0?"12":ci(i,2,e??"0")},j:(t,e)=>ci(Wv(t)+1,3,e??"0"),m:(t,e)=>ci(t.getMonth()+1,2,e??"0"),M:(t,e)=>ci(t.getMinutes(),2,e??"0"),L:(t,e)=>ci(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>ci(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>ci(rD(t,cD),2,e??"0"),V:(t,e)=>ci(lD(t),2,e??"0"),w:(t,e)=>ci(t.getDay(),2,e??"0"),W:(t,e)=>ci(rD(t,Yv),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>ci(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>ci(t.getFullYear(),4,e??"0"),Z:t=>ZB(t),"%":()=>"%"},uD={_:" ",0:"0","-":""}}});function Qi(t){return t instanceof Date?t.getTime():t}function jv(t,e,i){const s=dD(t,e,i),n=cu(s);return a=>n(a)}function dD(t=[],e=t,i=0){let s=1/0;for(let l=1;l<t.length;l++)s=Math.min(s,Math.abs(t[l]-t[l-1]));const n=new Date(e[0]).getFullYear(),o=new Date(e.at(-1)).getFullYear()-n>0,r=isFinite(s)?qB(s,t):QB(t[0]);return tF(Math.max(r-i,0),o,t)}function qB(t,e){return t<ya?0:t<Ze?1:t<xi?2:t<ds?3:t<En?4:t<ds*28||t<ds*31&&JB(e)?5:t<yr?6:7}function QB(t){return ec.floor(t)<t?0:ic.floor(t)<t?1:sc.floor(t)<t?2:Dp.floor(t)<t?3:xr.floor(t)<t?qh.floor(t)<t?4:5:Tp.floor(t)<t?6:7}function JB(t){let e=new Date(t[0]).getMonth();for(let i=1;i<t.length;i++){const s=new Date(t[i]).getMonth();if(e===s)return!0;e=s}return!1}function tF(t,e,i){const s=Qi(i[0]),n=Qi(i.at(-1)),a=Math.abs(n-s),o=e||t===7,r=a===0,c=[["hour",6*xi,14*ds,3,"%I %p"],["hour",Ze,6*xi,3,"%I:%M"],["second",1e3,6*xi,1,":%S"],["ms",0,6*xi,0,".%L"],["am/pm",Ze,6*xi,3,"%p"]," ",["day",ds,En,4,"%a"],["month",r?0:En,52*En,5,"%b %d"],["month",5*En,10*yr,6,"%B"]," ",["year",o?0:yr,1/0,7,"%Y"]].filter(d=>{if(typeof d=="string")return!0;const[p,g,f,m]=d;return m>=t&&g<=a&&a<f}).reduce((d,p)=>(typeof p=="string"?d.result.push(p):d.used.has(p[0])||(d.result.push(p),d.used.add(p[0])),d),{result:[],used:new Set}).result,h=c.findIndex(d=>typeof d!="string"),u=c.length-[...c].reverse().findIndex(d=>typeof d!="string");return c.slice(h,u).map(d=>typeof d=="string"?d:d[4]).join("").replaceAll(/\s+/g," ").trim()}var jp=L({"packages/ag-charts-community/src/util/timeFormatDefaults.ts"(){"use strict";hv(),cv(),rv(),vv(),av(),yv(),xv(),Rn(),Kp()}}),Ge,hc=L({"packages/ag-charts-community/src/scale/invalidating.ts"(){"use strict";Ge=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})}}}),uu,Sa,Tr=L({"packages/ag-charts-community/src/scale/bandScale.ts"(){"use strict";yt(),_t(),jp(),hc(),uu=class Rw{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof Rw}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Z.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.index=new Map,this.invalid=!0,this._domain=[];for(const i of e){const s=Qi(i);this.getIndex(s)===void 0&&this.index.set(s,this._domain.push(i)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(e){var i;this.refresh();const s=this.getIndex(e);return s==null?NaN:(i=this.ordinalRange[s])!=null?i:NaN}invert(e){this.refresh();const i=this.ordinalRange.findIndex(s=>s===e);return this.domain[i]}invertNearest(e){var i;this.refresh();let s=-1,n=1/0;const a=this.ordinalRange.findIndex((o,r)=>{if(o===e)return!0;const l=Math.abs(e-o);return l<n&&(n=l,s=r),!1});return(i=this.domain[a])!=null?i:this.domain[s]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=St(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=St(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=St(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(e===0)return;const[i,s]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:a,round:o}=this,r=s-i;let l,c,h;e===1?(n=0,l=r*(1-a*2),c=o?Math.round(l):l,h=r*a):(l=r/Math.max(1,e-n+a*2),c=o?Math.floor(l):l,h=i+(r-c*(e-n))/2);let u=c*(1-n);o&&(h=Math.round(h),u=Math.round(u)),this._step=c,this._inset=h,this._bandwidth=u,this._rawBandwidth=l*(1-n),this.ordinalRange=this._domain.map((d,p)=>h+c*p)}getIndex(e){return this.index.get(e instanceof Date?e.getTime():e)}},_([Ge],uu.prototype,"range",2),_([Ge],uu.prototype,"round",2),_([Ge],uu.prototype,"interval",2),Sa=uu}});function A(t,e={}){const{optional:i=!1,property:s}=e;return xa((n,a,o)=>{var r;const l=K(B({},e),{target:n,property:a});if(i&&typeof o>"u"||t(o,l))return Pn(n[a])&&!Pn(o)?(n[a].set(o),n[a]):o;const c=s??String(a).replace(/^_*/,""),h=(r=n.constructor.className)!=null?r:n.constructor.name.replace(/Properties$/,"");let u=pu(o);const d=50;if(u!=null&&u.length>d){const p=u.length-d;u=u.slice(0,d)+`... (+${p} characters)`}return Z.warn(`Property [${c}] of [${h}] cannot be set to [${u}]${t.message?`; expecting ${du(t,l)}`:""}, ignoring.`),iu},void 0,{optional:i})}function Jt(t,e="a"){return Kt(i=>t.includes(i),`${e} keyword such as ${eF(t)}`)}function Kt(t,e){return t.message=e,t}function eF(t){const e=t.map(s=>`'${s}'`);if(e.length===1)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}function du(t,e){return Dr(t.message)?t.message(e):t.message}function iF(t){return e=>du(e,t)}function sF(t){return Object.assign(t,{restrict({length:e,minLength:i}={}){let s="an array";return ps(i)&&i>0?s="a non-empty array":ps(e)&&(s=`an array of length ${e}`),Kt(n=>ke(n)&&(ps(e)?n.length===e:!0)&&(ps(i)?n.length>=i:!0),s)}})}function nF(t){return Object.assign(t,{restrict({min:e,max:i}={}){const s=["a number"],n=ps(e),a=ps(i);return n&&a?s.push(`between ${e} and ${i} inclusive`):n?s.push(`greater than or equal to ${e}`):a&&s.push(`less than or equal to ${i}`),Kt(o=>Ot(o)&&(n?o>=e:!0)&&(a?o<=i:!0),s.join(" "))}})}function pD(t){return Object.assign(t,{restrict(e){return Kt(i=>i instanceof e,i=>{var s;return(s=du(t,i))!=null?s:`an instance of ${e.name}`})}})}function pu(t){if(typeof t=="number"){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var fs,Mo,rt,Xv,pt,Bi,et,jt,gu,q,Rt,Ma,Nr,Or,zn,fu,Cr,Er,Xp,$p,$v,Et,ms,gD,mu,Zv,fD,qv,Qv,mD,Gn,Zp,_a,ka,yu,Jv,yD,vD,tx,ex,vu,qp,ix,sx,gt=L({"packages/ag-charts-community/src/util/validation.ts"(){"use strict";Vp(),kr(),yt(),ne(),Ct(),fs=(...t)=>{const e=[];return Kt((i,s)=>(e.length=0,t.every(n=>{const a=n(i,s);return a||e.push(du(n,s)),a})),()=>e.filter(Boolean).join(" AND "))},Mo=(...t)=>Kt((e,i)=>t.some(s=>s(e,i)),e=>t.map(iF(e)).filter(Boolean).join(" OR ")),rt=pD(Kt((t,e)=>Pn(t)||Ts(t)&&Pn(e.target[e.property]),"a properties object")),Xv=pD(Kt(t=>Ts(t),"an object")),pt=Kt($k,"a boolean"),Bi=Kt(Dr,"a function"),et=Kt(Os,"a string"),jt=nF(Kt(Ot,"a number")),gu=Kt(t=>ps(t)&&isNaN(t),"NaN"),q=jt.restrict({min:0}),Rt=jt.restrict({min:0,max:1}),Ma=jt.restrict({min:-360,max:360}),Nr=Mo(jt,gu),Or=sF(Kt(ke,"an array")),zn=(t,e)=>Kt((i,s)=>ke(i)&&i.every(n=>t(n,s)),i=>{var s;const n=(s=du(Or,i))!=null?s:"";return e?`${n} of ${e}`:n}),fu=t=>Ot(t)||au(t),Cr=t=>Kt((e,i)=>!fu(e)||!fu(i.target[t])||e<i.target[t],`to be less than ${t}`),Er=t=>Kt((e,i)=>!fu(e)||!fu(i.target[t])||e>i.target[t],`to be greater than ${t}`),Xp=Kt(au,"Date object"),$p=Mo(Xp,q),$v="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Et=Kt(t=>Os(t)&&nn.validColorString(t),`color String. ${$v}`),ms=Kt(zn(Et),`color strings. ${$v}`),gD=zn(pt,"boolean values"),mu=zn(jt,"numbers"),Zv=zn(et,"strings"),fD=Kt(zn(Xp),"Date objects"),qv=Kt(zn(rt),"objects"),Qv=Jt(["butt","round","square"],"a line cap"),mD=Jt(["round","bevel","miter"],"a line join"),Gn=Kt(zn(q),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Zp=Jt(["top","right","bottom","left"],"a position"),_a=Jt(["normal","italic","oblique"],"a font style"),ka=Mo(Jt(["normal","bold","bolder","lighter"],"a font weight"),jt.restrict({min:1,max:1e3})),yu=Jt(["never","always","hyphenate","on-space"],"a text wrap strategy"),Jv=Jt(["left","center","right"],"a text align"),yD=Jt(["top","middle","bottom"],"a vertical align"),vD=Jt(["ellipsis","hide"],"an overflow strategy"),tx=Jt(["horizontal","vertical"],"a direction"),ex=Jt(["inside","outside"],"a placement"),vu=Mo(Jt(["exact","nearest"],"interaction range"),jt),qp=Jt(["top","bottom","left","right"]),ix=Mo(fs(jt.restrict({min:1}),Cr("maxSpacing")),gu),sx=Mo(fs(jt.restrict({min:1}),Er("minSpacing")),gu)}}),Qp,de=L({"packages/ag-charts-community/src/chart/chartAxisDirection.ts"(){"use strict";Qp=(t=>(t.X="x",t.Y="y",t))(Qp||{})}});function xD(t,e){var i;(i=Jp.constructedArrays)==null||i.set(t,e)}var Jp,nx=L({"packages/ag-charts-community/src/chart/chartOptions.ts"(){"use strict";Jp={constructedArrays:new WeakMap}}}),an,zt,Ji=L({"packages/ag-charts-community/src/scale/continuousScale.ts"(){"use strict";yt(),_t(),hc(),an=class mk{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=mk.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof mk}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const i=this.getDomain(),s=this.getPixelRange(),n=Math.abs(i[1]-i[0])/e+1,a=Math.floor(s),o=Math.min(n,a);return s/Math.max(1,o)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,i){var s;const n=(s=i?.clampMode)!=null?s:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const a=this.getDomain().map(u=>this.transform(u)),[o,r]=a,{range:l}=this,[c,h]=l;if(e=this.transform(e),n==="clamped"){const[u,d]=Ls(a.map(Number));if(Number(e)<u)return c;if(Number(e)>d)return h}return o===r?(c+h)/2:e===o?c:e===r?h:c+(Number(e)-Number(o))/(Number(r)-Number(o))*(h-c)}invert(e){this.refresh();const i=this.getDomain().map(d=>this.transform(d)),[s,n]=i,{range:a}=this,[o,r]=a,l=o>r,c=l?r:o,h=l?o:r;let u;return e<c?l?n:s:e>h?l?s:n:(o===r?u=this.toDomain((Number(s)+Number(n))/2):u=this.toDomain(Number(s)+(e-o)/(r-o)*(Number(n)-Number(s))),this.transformInvert(u))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Z.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[e,i]=this.range;return Math.abs(i-e)}},an.defaultTickCount=5,an.defaultMaxTickCount=6,_([Ge],an.prototype,"domain",2),_([Ge],an.prototype,"range",2),_([Ge],an.prototype,"nice",2),_([Ge],an.prototype,"interval",2),_([Ge],an.prototype,"tickCount",2),_([Ge],an.prototype,"minTickCount",2),_([Ge],an.prototype,"maxTickCount",2),zt=an}});function bD(t,e){const i=[];for(let s=0;s<t;s++)i.push(e(s));return i}function Vn(t){if(t.length===0)return;let e=1/0,i=-1/0;for(let n of t)n instanceof Date&&(n=n.getTime()),typeof n=="number"&&(n<e&&(e=n),n>i&&(i=n));const s=[e,i];if(s.every(isFinite))return s}function SD(t,e,i){return xu(t,e,i).extent}function xu(t,e,i){var s;let n=!1;return t.length>2&&(t=(s=Vn(t))!=null?s:[NaN,NaN]),isNaN(e)||(n||(n=e>t[0]),t=[e,t[1]]),isNaN(i)||(n||(n=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:n}}function Rr(t,e){if(t==null||e==null||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!Rr(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function ax(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function tg(t){return Array.from(new Set(t))}function ox(t,e){return t.reduce((i,s)=>{var n;const a=e(s);return(n=i[a])!=null||(i[a]=[]),i[a].push(s),i},{})}function rx(t,e,i=0){if(t.length===0)return[];const s=[];for(let n=0;n<e;n++)s.push(t.at((n+i)%t.length));return s}function MD(t,e){return e.reduce(([i,s],n)=>t(n)?[[...i,n],s]:[i,[...s,n]],[[],[]])}function*aF(t,e){for(const i of t)yield e(i)}function oF(t,e){return t.includes(e)}function rF(t,e){return oF(t,e)}function eg(t,e){return!e.some(i=>!rF(t,i))}var Ve=L({"packages/ag-charts-community/src/util/array.ts"(){"use strict"}});function _D(t){let e,i;const s=AD.exec(t);s&&([,e,t,i]=s);const n=ID.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,a,o,r,l,c,h,u,d,p,g]=n;return{fill:a,align:o,sign:r,symbol:l,zero:c,width:parseInt(h),comma:u,precision:parseInt(d),trim:!!p,type:g,prefix:e,suffix:i}}function kD(t){const e=typeof t=="string"?_D(t):t,{fill:i,align:s,sign:n="-",symbol:a,zero:o,width:r,comma:l,type:c,prefix:h="",suffix:u="",precision:d}=e;let{trim:p}=e;const g=d==null||isNaN(d);let f;if(!c)f=ys.g,p=!0;else if(c in ys&&c in wr)f=g?wr[c]:ys[c];else if(c in ys)f=ys[c];else if(c in wr)f=wr[c];else throw new Error(`The number formatter type is invalid: ${c}`);let m;return d==null||g?m=c?6:12:m=d,v=>{let y=f(v,m);return p&&(y=lF(y)),l&&(y=cF(y,l)),y=uF(v,y,n),a&&a!=="#"&&(y=`${a}${y}`),a==="#"&&c==="x"&&(y=`0x${y}`),c==="s"&&(y=`${y}${hF(v)}`),(c==="%"||c==="p")&&(y=`${y}%`),r!=null&&!isNaN(r)&&(y=dF(y,r,i??o,s)),y=`${h}${y}${u}`,y}}function ig(t){return Math.floor(Math.abs(t))}function lF(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function cF(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let a=s.length-3;a>0;a-=3)s.splice(a,0,e);return`${s.join("")}${n}`}function hF(t){return LD[DD(t)]}function DD(t){return St(lx,t?Math.floor(Math.log10(Math.abs(t))/3)*3:0,cx)}function uF(t,e,i=""){if(i==="(")return t>=0?e:`(${e})`;const s=i==="+"?"+":"";return`${t>=0?s:TD}${e}`}function dF(t,e,i=" ",s=">"){let n=t;if(s===">"||!s)n=n.padStart(e,i);else if(s==="<")n=n.padEnd(e,i);else if(s==="^"){const a=Math.max(0,e-n.length),o=Math.ceil(a/2),r=Math.floor(a/2);n=n.padStart(o+n.length,i),n=n.padEnd(r+n.length,i)}return n}var ID,AD,wr,ys,lx,cx,LD,TD,ND=L({"packages/ag-charts-community/src/util/numberFormat.ts"(){"use strict";_t(),ID=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,AD=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,wr={b:t=>ig(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>ig(t).toString(8),x:t=>ig(t).toString(16),X:t=>wr.x(t).toUpperCase(),n:t=>wr.d(t),"%":t=>`${ig(t*100).toFixed(0)}`},ys={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>ys.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>ys.f(t,e).toUpperCase(),g:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>ys.g(t,e).toUpperCase(),n:(t,e)=>ys.g(t,e),p:(t,e)=>ys.r(t*100,e),r:(t,e)=>{if(t===0)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const a=nt(10,n);return(Math.round(i/a)*a).toFixed()},s:(t,e)=>{const i=DD(t);return ys.r(t/nt(10,i),e)},"%":(t,e)=>ys.f(t*100,e)},lx=-24,cx=24,LD={[lx]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[cx]:"Y"},TD="\u2212"}});function sg(t,e,i,s,n){if(i<2)return bu(t,e,e-t);const a=uc(t,e,i,s,n);return isNaN(a)?[]:(t=Math.ceil(t/a)*a,e=Math.floor(e/a)*a,bu(t,e,a))}function OD(t,e,i,s,n,a){const o=a??Math.abs(e-t)/Math.max(i,1);let r=0;for(const d of dc){if(o<=d.duration)break;r++}if(r===0){const d=Math.max(uc(t,e,i,s,n),1);return Gk.every(d)}else if(r===dc.length){const d=a==null?uc(t/yr,e/yr,i,s,n):1;return Tp.every(d)}const l=dc[r-1],c=dc[r],{timeInterval:h,step:u}=o-l.duration<c.duration-o?l:c;return h.every(u)}function uc(t,e,i,s=0,n=1/0){if(t===e)return 1;if(i<1)return NaN;const a=Math.abs(e-t),o=nt(10,Math.floor(Math.log10(a/i)));let r=NaN,l=1/0,c=!1;for(const h of hx){const u=Math.ceil(a/(h*o)),d=u>=s&&u<=n;if(c&&!d)continue;const p=Math.abs(u-i);(l>p||c!==d)&&(c||(c=d),l=p,r=h)}return r*o}function CD(t){for(let e=t.length-1;e>=0;e-=1)if(t[e]!=="0")return e+1;return 0}function ED(t,e){const i=_D(e??",f");(i.precision==null||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...t.map(n=>{if(!Number.isFinite(n))return 0;const[a,o]=n.toExponential((i.type?6:12)-1).split(/\.|e/g);return(a!=="1"&&a!=="-1"?1:0)+CD(o)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...t.map(n=>{if(!Number.isFinite(n)||n===0)return 0;const a=Math.floor(Math.log10(Math.abs(n))),o=i.type?6:12,[r,l]=n.toExponential(o-1).split(/\.|e/g),c=CD(l);return Math.max(0,c-a)}))));const s=kD(i);return n=>s(Number(n))}function bu(t,e,i){const s=Math.ceil(Math.abs(e-t)/i),n=nt(10,Bp(i)),a=Math.min(t,e);return bD(s+1,o=>Math.round((a+i*o)*n)/n)}function Su(t,e){return t>=e?(Z.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function pF(t,e){const i=Math.abs(e-t),s=nt(10,Math.floor(Math.log10(i)));let n=1/0,a=[t,e];for(const o of hx){const r=o*s,l=Math.floor(t/r)*r,c=Math.ceil(e/r)*r,h=1-i/Math.abs(c-l);n>h&&(n=h,a=[l,c])}return a}var le,dc,hx,pc=L({"packages/ag-charts-community/src/util/ticks.ts"(){"use strict";Ve(),yt(),_t(),ND(),hv(),Rn(),cv(),vi(),Vk(),rv(),vv(),av(),yv(),xv(),le=(t,e,i)=>({duration:e*i,timeInterval:t,step:i}),dc=[le(ec,ya,1),le(ec,ya,5),le(ec,ya,15),le(ec,ya,30),le(ic,Ze,1),le(ic,Ze,5),le(ic,Ze,15),le(ic,Ze,30),le(sc,xi,1),le(sc,xi,3),le(sc,xi,6),le(sc,xi,12),le(Dp,ds,1),le(Dp,ds,2),le(qh,En,1),le(qh,En,2),le(qh,En,3),le(xr,tc,1),le(xr,tc,2),le(xr,tc,3),le(xr,tc,4),le(xr,tc,6),le(Tp,yr,1)],hx=[1,2,5,10]}}),Mu,ng=L({"packages/ag-charts-community/src/scale/timeScale.ts"(){"use strict";_t(),pc(),vi(),Kp(),jp(),Ji(),Mu=class jy extends zt{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,i){return super.convert(new Date(e),i)}invert(e){return new Date(super.invert(e))}ticks(){var e;if(!this.domain||this.domain.length<2)return[];this.refresh();const{interval:i,nice:s,tickCount:n,minTickCount:a,maxTickCount:o}=this,[r,l]=Ls(this.getDomain().map(Qi));return i!=null?(e=jy.getTicksForInterval({start:r,stop:l,interval:i,availableRange:this.getPixelRange()}))!=null?e:jy.getDefaultTicks({start:r,stop:l,tickCount:n,minTickCount:a,maxTickCount:o}):s&&n===2?this.niceDomain:s&&n===1?this.niceDomain.slice(0,1):jy.getDefaultTicks({start:r,stop:l,tickCount:n,minTickCount:a,maxTickCount:o})}static getDefaultTicks({start:e,stop:i,tickCount:s,minTickCount:n,maxTickCount:a}){const o=OD(e,i,s,n,a);return o?o.range(new Date(e),new Date(i)):[]}static getTicksForInterval({start:e,stop:i,interval:s,availableRange:n}){if(!s)return[];if(s instanceof So){const u=s.range(new Date(e),new Date(i));return Su(u.length,n)?void 0:u}const a=Math.abs(s);if(Su((i-e)/a,n))return;const r=[...dc].reverse().find(u=>a%u.duration===0);if(r)return r.timeInterval.every(a/(r.duration/r.step)).range(new Date(e),new Date(i));let l=new Date(e);const c=new Date(i),h=[];for(;l<=c;)h.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+a);return h}tickFormat({ticks:e,domain:i,specifier:s,formatOffset:n}){return s==null?jv(e,i,n):cu(s)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[i,s]=this.domain;for(let n=0;n<4;n++){this.updateNiceDomainIteration(i,s);const[a,o]=this.niceDomain;if(Qi(i)===Qi(a)&&Qi(s)===Qi(o))break;i=a,s=o}}updateNiceDomainIteration(e,i){const s=Math.min(Qi(e),Qi(i)),n=Math.max(Qi(e),Qi(i)),a=e>i,{interval:o}=this;let r;if(o instanceof So)r=o;else{const l=typeof o=="number"?(n-s)/Math.max(o,1):this.tickCount;r=OD(s,n,l,this.minTickCount,this.maxTickCount)}if(r){const l=r.range(new Date(s),new Date(n),!0),c=a?[...l].reverse():l,h=c[0],u=c.at(-1);this.niceDomain=[h,u]}}}}});function gF(t,e){return t-e}var gc,Cs,_u=L({"packages/ag-charts-community/src/scale/ordinalTimeScale.ts"(){"use strict";Ve(),Kp(),jp(),Tr(),Ji(),hc(),ng(),gc=class ww extends Sa{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=zt.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.timestamps=[],this.sortedTimestamps=[],this.visibleRange=[0,1]}static is(e){return e instanceof ww}setVisibleRange(e){this.visibleRange=e}set domain(e){if(this.invalid=!0,e.length===0){this._domain=[];return}this._domain=e,this.timestamps=tg(e.map(Qi)),this.sortedTimestamps=this.timestamps.slice().sort(gF)}get domain(){return this._domain}ticks(){var e;this.refresh();const[i,s]=[this.timestamps[0],this.timestamps.at(-1)],n=Math.min(i,s),a=Math.max(i,s),o=i>s;let r;if(this.interval==null)r=this.getDefaultTicks(this.maxTickCount,o);else{const[c,h]=this.range,u=Math.abs(h-c);r=(e=Mu.getTicksForInterval({start:n,stop:a,interval:this.interval,availableRange:u}))!=null?e:[]}const l=new Set;return r.filter(c=>{const h=this.convert(c);return isNaN(h)||l.has(h)?!1:(l.add(h),!0)})}getDefaultTicks(e,i){const s=[],n=this.timestamps.length,a=Math.ceil(n*(this.visibleRange[1]-this.visibleRange[0])/e),o=Math.floor(a/2);for(const[r,l]of this.timestamps.entries())a>0&&(r+o)%a||(i?s.push(new Date(this.timestamps[n-r-1])):s.push(new Date(l)));return s}convert(e){var i;this.refresh();const s=Number(e);if(s<this.sortedTimestamps[0])return NaN;let n=this.findInterval(s);return this.timestamps[0]!==this.sortedTimestamps[0]&&(n=this.timestamps.length-n-1),(i=this.ordinalRange[n])!=null?i:NaN}findInterval(e){const{sortedTimestamps:i}=this;let s=0,n=i.length-1;for(;s<=n;){const a=Math.floor((s+n)/2);if(i[a]===e)return a;i[a]<e?s=a+1:n=a-1}return s}tickFormat({ticks:e,domain:i,specifier:s}){return s==null?jv(e,i):cu(s)}invert(e){this.refresh();const i=this.ordinalRange.findIndex(s=>e<=s);return this.domain[i]}invertNearest(e){return new Date(super.invertNearest(e))}},_([Ge],gc.prototype,"tickCount",2),_([Ge],gc.prototype,"minTickCount",2),_([Ge],gc.prototype,"maxTickCount",2),_([Ge],gc.prototype,"interval",2),Cs=gc}});function RD(t,e){return typeof t=="number"&&typeof e=="number"?t-e:typeof t=="string"&&typeof e=="string"?t.localeCompare(e):t==null&&e==null?0:t==null?-1:e==null?1:String(t).localeCompare(String(e))}function wD(t){return typeof t=="function"?t():t}function PD(t,e,i){for(const s in t){const n=i(wD(t[s]),wD(e[s]));if(n!==0)return n}return 0}var BD=L({"packages/ag-charts-community/src/util/compare.ts"(){"use strict"}}),ag,ut,be=L({"packages/ag-charts-community/src/scene/group.ts"(){"use strict";BD(),_t(),Mt(),ae(),ag=class Xy extends Mr{constructor(e){var i;super({isVirtual:e?.isVirtual}),this.opts=e,this.opacity=1,this.lastBBox=void 0;const{zIndex:s,zIndexSubOrder:n}=e??{};this.isContainerNode=!0,s!==void 0&&(this.zIndex=s),n!==void 0&&(this.zIndexSubOrder=n),this.name=(i=this.opts)==null?void 0:i.name}static is(e){return e instanceof Xy}onZIndexChange(){var e;super.onZIndexChange(),this.layer&&((e=this._layerManager)==null||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(e){if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");super._setLayerManager(e)}initialiseLayer(){var e;this.layer||!this._layerManager||((e=this.opts)==null?void 0:e.layer)!==!0||(this.layer=this._layerManager.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()}))}getComputedOpacity(){let e=1;for(const i of this.traverseUp())i instanceof Xy&&(e*=i.opacity);return e}getVisibility(){for(const e of this.traverseUp())if(!e.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,i=1){if(this.isVirtual){super.markDirty(e,i);return}let s=i;(i<2||this.layer!=null)&&(s=1),super.markDirty(e,i,s)}containsPoint(e,i){return!0}computeBBox(){return this.computeTransformMatrix(),Xy.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}computeTransformedRegionBBox(){return this.clipRect?(this.computeTransformMatrix(),this.matrix.transformBBox(this.clipRect)):this.computeTransformedBBox()}preRender(){var e,i;const s=super.preRender();return s.groups+=1,s.nonGroups-=1,((e=this.opts)==null?void 0:e.layer)!==!0||this.layer!=null||(s.nonGroups>0&&this.initialiseLayer(),(i=this.opts)!=null&&i.nonEmptyChildDerivedZIndex&&s.nonGroups>0&&this.deriveZIndexFromChildren()),s}deriveZIndexFromChildren(){var e;const i=this.children.filter(n=>n._childNodeCounts.nonGroups>0);this.sortChildren(i);const s=i.at(-1);this.zIndex=(e=s?.zIndex)!=null?e:-1/0,this.zIndexSubOrder=s?.zIndexSubOrder}render(e){var i,s;const{opts:{name:n=void 0}={},_debug:a}=this,{dirty:o,dirtyZIndex:r,layer:l,children:c,clipRect:h,dirtyTransform:u}=this;let{ctx:d,forceRender:p,clipBBox:g}=e;const{resized:f,stats:m}=e,v=d.getTransform(),y=o>=2||r||f;let x=y,b=!1;for(const N of c)if(x||(x=N.layerManager==null&&N.dirty>=1),b||(b=N.layerManager!=null&&N.dirty>=1),x)break;if(n&&a?.({name:n,group:this,isDirty:y,isChildDirty:x,dirtyTransform:u,renderCtx:e,forceRender:p}),u)p="dirtyTransform";else if(l){const N=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(N))&&(p="dirtyTransform",this.lastBBox=N)}if(!y&&!x&&!b&&!p){n&&m&&a?.({name:n,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this}),l&&m&&(m.layersSkipped++,m.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}const S=this.visible;if(l){if(d=l.context,d.save(),d.setTransform(l.pixelRatio,0,0,l.pixelRatio,0,0),p!=="dirtyTransform"&&(p=x||r),p&&l.clear(),g){const{width:N,height:C,x:E,y:O}=g;a?.(()=>({name:n,clipBBox:g,ctxTransform:d.getTransform(),renderCtx:e,group:this})),d.beginPath(),d.rect(E,O,N,C),d.clip()}d.setTransform(v)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),h){const{x:N,y:C,width:E,height:O}=h;d.save(),a?.(()=>({name:n,clipRect:h,ctxTransform:d.getTransform(),renderCtx:e,group:this})),d.beginPath(),d.rect(N,C,E,O),d.clip(),g=this.matrix.transformBBox(h)}const k=this.hasVirtualChildren();r?(this.sortChildren(c),p!=="dirtyTransform"&&(p=!0)):k&&this.sortChildren(c);const T=p!==e.forceRender||g!==e.clipBBox||d!==e.ctx?K(B({},e),{ctx:d,forceRender:p,clipBBox:g}):e;let I=0;for(const N of c){if(!N.visible||!S){N.markClean(),m&&(I+=N.nodeCount.count);continue}if(!p&&N.dirty===0){m&&(I+=N.nodeCount.count);continue}d.save(),N.render(T),d.restore()}if(m&&(m.nodesSkipped+=I),super.render(e),h&&d.restore(),k)for(const N of this.virtualChildren)N.markClean({recursive:"virtual"});l&&(m&&m.layersRendered++,d.restore(),p&&l.snapshot(),(s=(i=l.context).verifyDepthZero)==null||s.call(i)),n&&m&&a?.({name:n,result:"rendered",skipped:I,renderCtx:e,counts:this.nodeCount,group:this})}sortChildren(e){this.dirtyZIndex=!1,e.sort((i,s)=>{var n,a;return PD([i.zIndex,...(n=i.zIndexSubOrder)!=null?n:[void 0,void 0],i.serialNumber],[s.zIndex,...(a=s.zIndexSubOrder)!=null?a:[void 0,void 0],s.serialNumber],RD)})}static computeBBox(e){let i=1/0,s=-1/0,n=1/0,a=-1/0;for(const o of e){if(!o.visible)continue;const r=o.computeTransformedBBox();if(!r)continue;const{x:l,y:c,width:h,height:u}=r;l<i&&(i=l),c<n&&(n=c),l+h>s&&(s=l+h),c+u>a&&(a=c+u)}return new ot(i,n,s-i,a-n)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}},ag.className="Group",_([at({redraw:3,convertor:t=>St(0,t,1)})],ag.prototype,"opacity",2),ut=ag}});function oe(t){return t%=vs,t+=vs,t%=vs,t}function fF(t){return t%=vs,t+=vs,t!==vs&&(t%=vs),t}function ku(t){return t%=vs,t<-Math.PI?t+=vs:t>=Math.PI&&(t-=vs),t}function _o(t,e,i){const s=oe(t),n=oe(e),a=oe(i);return n<a?n<=s&&s<=a:n>a?n<=s||s<=a:!0}function Fi(t){return t/180*Math.PI}function mF(t){return t/Math.PI*180}function FD(t,e,i){i&&([t,e]=[e,t]);const s=oe(t);return(oe(e)+vs-s)%vs}function og(t,e){return t=oe(t),e=oe(e),e-t+(t>e?2*Math.PI:0)}function yF(t,e,i,s){const n=t+i*Math.cos(s),a=e+i*Math.sin(s);return{x:n,y:a}}var vs,zi=L({"packages/ag-charts-community/src/util/angle.ts"(){"use strict";vs=Math.PI*2}}),zD,vF=L({"packages/ag-charts-community/src/scene/gradient/gradient.ts"(){"use strict";zD=class{constructor(t=[]){this.stops=t}}}}),GD,xF=L({"packages/ag-charts-community/src/scene/gradient/linearGradient.ts"(){"use strict";zi(),vF(),GD=class extends zD{constructor(t,e=0){super(t),this.angle=e}createGradient(t,e){const{stops:s,angle:n}=this,a=oe(Fi(n+90)),o=Math.cos(a),r=Math.sin(a),l=e.width,c=e.height,h=e.x+l*.5,u=e.y+c*.5;if(l>0&&c>0){const d=Math.sqrt(c*c+l*l)/2,p=Math.atan2(c,l);let g;a<Math.PI/2?g=a:a<Math.PI?g=Math.PI-a:a<1.5*Math.PI?g=a-Math.PI:g=2*Math.PI-a;const f=d*Math.abs(Math.cos(g-p)),m=t.createLinearGradient(h+o*f,u+r*f,h-o*f,u-r*f);for(const v of s)m.addColorStop(v.offset,v.color);return m}return"black"}}}}),VD,Gi,xs,ko=L({"packages/ag-charts-community/src/scene/shape/shape.ts"(){"use strict";_t(),xF(),ae(),VD=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,Gi=class ma extends Mr{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=ma.defaultStyles.fill,this.stroke=ma.defaultStyles.stroke,this.strokeWidth=ma.defaultStyles.strokeWidth,this.lineDash=ma.defaultStyles.lineDash,this.lineDashOffset=ma.defaultStyles.lineDashOffset,this.lineCap=ma.defaultStyles.lineCap,this.lineJoin=ma.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=ma.defaultStyles.opacity,this.fillShadow=ma.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}onFillChange(){const{fill:e}=this;let i;if(e?.startsWith("linear-gradient")&&(i=VD.exec(e))){const s=parseFloat(i[1]),n=[],a=i[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=o.exec(a);)n.push(r[0]);this.gradient=new GD(n.map((l,c)=>({color:l,offset:c/(n.length-1)})),s)}else this.gradient=void 0}align(e,i){var s,n,a;const o=(a=(n=(s=this.layerManager)==null?void 0:s.canvas)==null?void 0:n.pixelRatio)!=null?a:1,r=Math.round(e*o)/o;return i==null?r:i===0?0:i<1?Math.ceil(i*o)/o:Math.round((i+e)*o)/o-r}fillStroke(e,i){this.renderFill(e,i),this.renderStroke(e,i)}renderFill(e,i){if(this.fill){const{globalAlpha:s}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),this.executeFill(e,i),e.globalAlpha=s}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,i){i?e.fill(i):e.fill()}applyFill(e){var i,s;e.fillStyle=(s=(i=this.gradient)==null?void 0:i.createGradient(e,this.computeBBox()))!=null?s:this.fill}applyFillAlpha(e){e.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(e){var i,s;const n=(s=(i=this.layerManager)==null?void 0:i.canvas.pixelRatio)!=null?s:1,a=this.fillShadow;a?.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*n,e.shadowOffsetY=a.yOffset*n,e.shadowBlur=a.blur*n)}renderStroke(e,i){if(this.stroke&&this.strokeWidth){const{globalAlpha:s}=e;e.strokeStyle=this.stroke,e.globalAlpha*=this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),this.miterLimit!=null&&(e.miterLimit=this.miterLimit),this.executeStroke(e,i),e.globalAlpha=s}}executeStroke(e,i){i?e.stroke(i):e.stroke()}containsPoint(e,i){return this.isPointInPath(e,i)}},Gi.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},_([at({redraw:2})],Gi.prototype,"fillOpacity",2),_([at({redraw:2})],Gi.prototype,"strokeOpacity",2),_([at({redraw:2,changeCb:t=>t.onFillChange()})],Gi.prototype,"fill",2),_([at({redraw:2})],Gi.prototype,"stroke",2),_([at({redraw:2})],Gi.prototype,"strokeWidth",2),_([at({redraw:2})],Gi.prototype,"lineDash",2),_([at({redraw:2})],Gi.prototype,"lineDashOffset",2),_([at({redraw:2})],Gi.prototype,"lineCap",2),_([at({redraw:2})],Gi.prototype,"lineJoin",2),_([at({redraw:2})],Gi.prototype,"miterLimit",2),_([at({redraw:2,convertor:t=>St(0,t,1)})],Gi.prototype,"opacity",2),_([at({redraw:2,checkDirtyOnAssignment:!0})],Gi.prototype,"fillShadow",2),xs=Gi}}),on,bF=L({"packages/ag-charts-community/src/scene/shape/range.ts"(){"use strict";Mt(),ae(),ko(),on=class extends xs{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new ot(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n}=t;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:o,x2:r,y2:l}=this;a=this.align(a),o=this.align(o),r=this.align(r),l=this.align(l);const{fill:c,opacity:h,isRange:u}=this;if(!!(u&&c)){const{fillOpacity:y}=this;i.fillStyle=c,i.globalAlpha=h*y,i.beginPath(),i.moveTo(a,o),i.lineTo(r,o),i.lineTo(r,l),i.lineTo(a,l),i.closePath(),i.fill()}const{stroke:p,strokeWidth:g,startLine:f,endLine:m}=this;if(!!((f||m)&&p&&g)){const{strokeOpacity:y,lineDash:x,lineDashOffset:b,lineCap:S,lineJoin:k}=this;i.strokeStyle=p,i.globalAlpha=h*y,i.lineWidth=g,x&&i.setLineDash(x),b&&(i.lineDashOffset=b),S&&(i.lineCap=S),k&&(i.lineJoin=k),i.beginPath(),f&&(i.moveTo(a,o),i.lineTo(r,o)),m&&(i.moveTo(r,l),i.lineTo(a,l)),i.stroke()}(e=this.fillShadow)==null||e.markClean(),super.render(t)}},on.className="Range",on.defaultStyles=K(B({},xs.defaultStyles),{strokeWidth:1}),_([at({redraw:2})],on.prototype,"x1",2),_([at({redraw:2})],on.prototype,"y1",2),_([at({redraw:2})],on.prototype,"x2",2),_([at({redraw:2})],on.prototype,"y2",2),_([at({redraw:2})],on.prototype,"startLine",2),_([at({redraw:2})],on.prototype,"endLine",2),_([at({redraw:2})],on.prototype,"isRange",2)}});function Du(t,e){var i,s,n;const a=JSON.stringify(t,null,0);return fc.has(e)||fc.set(e,new Map),(i=fc.get(e))!=null&&i.has(a)||(s=fc.get(e))==null||s.set(a,e(t)),(n=fc.get(e))==null?void 0:n.get(a)}function UD(t){return(e,...i)=>{var s,n,a;const o=JSON.stringify(e,null,0);return mc.has(t)||mc.set(t,new Map),(s=mc.get(t))!=null&&s.has(o)||(n=mc.get(t))==null||n.set(o,t(e,...i)),(a=mc.get(t))==null?void 0:a.get(o)}}var fc,mc,HD=L({"packages/ag-charts-community/src/util/memo.ts"(){"use strict";fc=new WeakMap,mc=new WeakMap}});function SF(t=0,e=0){return new OffscreenCanvas(t,e).getContext("2d")}var MF=L({"packages/ag-charts-community/src/util/canvas.util.ts"(){"use strict"}}),bs,ux=L({"packages/ag-charts-community/src/util/textMeasurer.ts"(){"use strict";MF(),bs=class{constructor(t){this.ctx=t,this.charMap=new Map}static createFontMeasurer(t){const e=SF(),i=new this(e);return this.instanceMap.set(t,i),e.font=t,i}static getFontMeasurer(t){var e;const i=(e=this.instanceMap.get(t.font))!=null?e:this.createFontMeasurer(t.font);return t.textAlign&&(i.ctx.textAlign=t.textAlign),t.textBaseline&&(i.ctx.textBaseline=t.textBaseline),i}static measureText(t,e){const{ctx:i}=this.getFontMeasurer(e);return this.getMetrics(i,t)}static measureLines(t,e){const{ctx:i}=this.getFontMeasurer(e),s=typeof t=="string"?t.split(this.lineSplitter):t;return this.getMultilineMetrics(i,s)}static wrapText(t,e){return this.wrapLines(t,e).join(`
`)}static wrapLines(t,e){const i=t.split(this.lineSplitter),s=this.getFontMeasurer(e);if(e.textWrap==="never")return i.map(r=>this.truncateLine(r.trimEnd(),s,e.maxWidth));const n=[],a=e.textWrap==="hyphenate",o=e.textWrap==="on-space";for(let r of i){r=r.trimEnd();for(let l=0,c=0,h=0;l<r.length;l++){const u=r.charAt(l);if(c+=s.textWidth(u),u===" "&&(h=l),c>e.maxWidth){if(l===0)break;if(h){const g=this.getWordAt(r,h+1),f=s.textWidth(g);if(f<=e.maxWidth){n.push(r.slice(0,h).trimEnd()),r=r.slice(h).trimStart(),l=-1,c=0,h=0;continue}else o&&f>e.maxWidth&&n.push(r.slice(0,h).trimEnd(),this.truncateLine(r.slice(h).trimStart(),s,e.maxWidth,!0))}else o&&n.push(this.truncateLine(r,s,e.maxWidth,!0));if(o){r="";break}const d=a?"-":"";let p=r.slice(0,l).trim();for(;p.length&&s.textWidth(p+d)>e.maxWidth;)p=p.slice(0,-1).trimEnd();if(n.push(p+d),!p.length){r="";break}r=r.slice(p.length).trimStart(),l=-1,c=0,h=0}}r&&n.push(r)}return this.avoidOrphans(n,s,e),this.clipLines(n,s,e)}static getWordAt(t,e){const i=t.indexOf(" ",e);return i===-1?t.slice(e):t.slice(e,i)}static clipLines(t,e,i){if(!i.maxHeight)return t;const{height:s,lineMetrics:n}=this.measureLines(t,i);if(s<=i.maxHeight)return t;for(let a=0,o=0;a<n.length;a++){const{lineHeight:r}=n[a];if(o+=r,o>i.maxHeight){const l=t.slice(0,Math.max(a,1)),c=l.pop();return l.concat(this.truncateLine(c,e,i.maxWidth,!0))}}return t}static avoidOrphans(t,e,i){if(t.length<2)return;const{length:s}=t,n=t[s-1],a=t[s-2];if(a.length<n.length)return;const o=a.lastIndexOf(" ");if(o===-1||o===a.indexOf(" ")||n.includes(" "))return;const r=a.slice(o+1);e.textWidth(n+r)<=i.maxWidth&&(t[s-2]=a.slice(0,o),t[s-1]=r+" "+n)}static truncateLine(t,e,i,s){const n=e.textWidth(this.EllipsisChar);let a=0,o=0;for(;o<t.length;o++){const r=e.textWidth(t.charAt(o));if(a+r>i)break;a+=r}if(t.length===o&&(!s||a+n<=i))return s?t+this.EllipsisChar:t;for(t=t.slice(0,o).trimEnd();t.length&&e.textWidth(t)+n>i;)t=t.slice(0,-1).trimEnd();return t+this.EllipsisChar}static getMetrics(t,e){var i,s;const n=t.measureText(e);return(i=n.fontBoundingBoxAscent)!=null||(n.fontBoundingBoxAscent=n.emHeightAscent),(s=n.fontBoundingBoxDescent)!=null||(n.fontBoundingBoxDescent=n.emHeightDescent),{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent,lineHeight:n.fontBoundingBoxAscent+n.fontBoundingBoxDescent,offsetTop:n.actualBoundingBoxAscent,offsetLeft:n.actualBoundingBoxLeft}}static getMultilineMetrics(t,e){let i=0,s=0,n=0,a=0,o=0;const r=this.getVerticalModifier(t.textBaseline),l=e.map((c,h,{length:u})=>{var d,p;const g=t.measureText(c);return(d=g.fontBoundingBoxAscent)!=null||(g.fontBoundingBoxAscent=g.emHeightAscent),(p=g.fontBoundingBoxDescent)!=null||(g.fontBoundingBoxDescent=g.emHeightDescent),i<g.width&&(i=g.width),a<g.actualBoundingBoxLeft&&(a=g.actualBoundingBoxLeft),h===0?(s+=g.actualBoundingBoxAscent,n+=g.actualBoundingBoxAscent):o+=g.fontBoundingBoxAscent,h===u-1?s+=g.actualBoundingBoxDescent:o+=g.fontBoundingBoxDescent,{text:c,width:g.width,height:g.actualBoundingBoxAscent+g.actualBoundingBoxDescent,lineHeight:g.fontBoundingBoxAscent+g.fontBoundingBoxDescent,offsetTop:g.actualBoundingBoxAscent,offsetLeft:g.actualBoundingBoxLeft}});return s+=o,n+=o*r,{width:i,height:s,offsetTop:n,offsetLeft:a,lineMetrics:l}}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}textWidth(t,e){var i;if(e){let s=0;for(let n=0;n<t.length;n++)s+=this.textWidth(t.charAt(n));return s}return t.length>1?this.ctx.measureText(t).width:(i=this.charMap.get(t))!=null?i:this.charWidth(t)}charWidth(t){const{width:e}=this.ctx.measureText(t);return this.charMap.set(t,e),e}},bs.EllipsisChar="\u2026",bs.instanceMap=new Map,bs.lineSplitter=/\r?\n/g}});function rg(t){const{redraw:e=3,changeCb:i}=t??{};return at({redraw:e,type:"font",changeCb:i})}function Pr(t){const{fontFamily:e,fontSize:i,fontStyle:s,fontWeight:n}=t;return[s??"",n??"",i+"px",e].join(" ").trim()}var WD,qe,wt,hi=L({"packages/ag-charts-community/src/scene/shape/text.ts"(){"use strict";HD(),ux(),Mt(),ae(),ko(),WD="\u2026",qe=class ql extends xs{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=ql.defaultStyles.textAlign,this.textBaseline=ql.defaultStyles.textBaseline}onTextChange(){var e,i;this.lines=(i=(e=this.text)==null?void 0:e.split(`
`).map(s=>s.trim()))!=null?i:[]}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Pr(this)),this._font}computeBBox(){const{x:e,y:i,lines:s,textBaseline:n,textAlign:a}=this,{offsetTop:o,offsetLeft:r,width:l,height:c}=bs.measureLines(s,{font:Pr(this),textBaseline:n,textAlign:a});return new ot(e-r,i-o,l,c)}getLineHeight(e){var i;return(i=this.lineHeight)!=null?i:bs.measureText(e,this).lineHeight}isPointInPath(e,i){const s=this.transformPoint(e,i),n=this.computeBBox();return n?n.containsPoint(s.x,s.y):!1}render(e){const{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);const{fill:a,stroke:o,strokeWidth:r}=this,{pixelRatio:l}=this.layerManager.canvas;if(i.font=this.font,i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,a){i.fillStyle=a,i.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:c}=this;c?.enabled&&(i.shadowColor=c.color,i.shadowOffsetX=c.xOffset*l,i.shadowOffsetY=c.yOffset*l,i.shadowBlur=c.blur*l),this.renderLines((h,u,d)=>i.fillText(h,u,d))}if(o&&r){i.strokeStyle=o,i.lineWidth=r,i.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:c,lineDashOffset:h,lineCap:u,lineJoin:d}=this;c&&i.setLineDash(c),h&&(i.lineDashOffset=h),u&&(i.lineCap=u),d&&(i.lineJoin=d),this.renderLines((p,g,f)=>i.strokeText(p,g,f))}super.render(e)}renderLines(e){const{lines:i,x:s,y:n}=this,a=i.map(l=>this.getLineHeight(l)),o=a.reduce((l,c)=>l+c,0);let r=(a[0]-o)*ql.getVerticalModifier(this.textBaseline);for(let l=0;l<i.length;l++)e(i[l],s,n+r),r+=a[l]}static wrapLines(e,i,s,n,a,o){const r=bs.wrapLines(e,{maxWidth:i,maxHeight:s,font:Pr(n),textAlign:n.textAlign,textBaseline:n.textBaseline,textWrap:a});if(!(o==="hide"&&r.some(l=>l.endsWith(bs.EllipsisChar))))return r}static wrap(e,i,s,n,a,o="ellipsis"){var r;const l=ql.wrapLines(e,i,s,n,a,o);return(r=l?.join(`
`).trim())!=null?r:""}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}static getVerticalModifier(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}static measureText(e,i,s,n){return this._measureText({text:e,font:i,textBaseline:s,textAlign:n})}static getTextSize(e,i){return this._getTextSize({text:e,font:i})}static getTextSizeMultiline(e,i,s=ql.defaultStyles.textBaseline,n=ql.defaultStyles.textAlign){const a=bs.measureLines(e,{font:i,textBaseline:s,textAlign:n});return{top:a.offsetTop,left:a.offsetLeft,width:a.width,height:a.height}}},qe.className="Text",qe.defaultLineHeightRatio=1.15,qe.defaultStyles=Object.assign({},xs.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),qe.ellipsis=WD,qe._measureText=UD(({text:t,font:e,textBaseline:i,textAlign:s})=>bs.measureText(t,{font:e,textBaseline:i,textAlign:s})),qe._getTextSize=UD(({text:t,font:e})=>bs.measureText(t,{font:e})),_([at({redraw:3})],qe.prototype,"x",2),_([at({redraw:3})],qe.prototype,"y",2),_([at({redraw:3,changeCb:t=>t.onTextChange()})],qe.prototype,"text",2),_([rg()],qe.prototype,"fontStyle",2),_([rg()],qe.prototype,"fontWeight",2),_([rg()],qe.prototype,"fontSize",2),_([rg()],qe.prototype,"fontFamily",2),_([at({redraw:3})],qe.prototype,"textAlign",2),_([at({redraw:3})],qe.prototype,"textBaseline",2),_([at({redraw:3})],qe.prototype,"lineHeight",2),wt=qe}});function lg(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?oe(Fi(t.rotation)):0,n=!s&&e>=0&&e<=Math.PI?-1:1,a=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=n*Math.PI/2:a===-1&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:a}}function _F(t,e){return isNaN(t)?e?0:10:t}function kF(t,e,i,s){return t&&!e?i*s===-1?"hanging":"bottom":"middle"}function dx(t,e,i,s,n){const a=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI,r=a||o?-1:1;if(t)if(e||i){if(s*r===-1)return"end"}else return"center";else if(s*n===-1)return"end";return"start"}function DF(t,e,i,s,n){const{width:a,height:o}=e,r=new ot(i,s,0,0);n.transformBBox(r,e);const{x:l,y:c}=e;return e.width=a,e.height=o,{point:{x:l,y:c},label:{text:t,width:a,height:o}}}var Oe,Es=L({"packages/ag-charts-community/src/chart/label.ts"(){"use strict";Mt(),hi(),zi(),ne(),gt(),Oe=class extends xt{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Pr(this)}},_([A(pt)],Oe.prototype,"enabled",2),_([A(Et,{optional:!0})],Oe.prototype,"color",2),_([A(_a,{optional:!0})],Oe.prototype,"fontStyle",2),_([A(ka,{optional:!0})],Oe.prototype,"fontWeight",2),_([A(q)],Oe.prototype,"fontSize",2),_([A(et)],Oe.prototype,"fontFamily",2),_([A(Bi,{optional:!0})],Oe.prototype,"formatter",2)}}),px,ts=L({"packages/ag-charts-community/src/chart/layers.ts"(){"use strict";px=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.SERIES_HIGHLIGHT_ZINDEX=5]="SERIES_HIGHLIGHT_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=6]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=7]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=8]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=9]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.SERIES_ANNOTATION_ZINDEX=10]="SERIES_ANNOTATION_ZINDEX",t[t.LEGEND_ZINDEX=11]="LEGEND_ZINDEX",t[t.NAVIGATOR_ZINDEX=12]="NAVIGATOR_ZINDEX",t))(px||{})}});function YD(t){return t!=null&&Object.hasOwn(t,"toString")&&Os(t.toString())}function KD(t){return t!=null&&Object.hasOwn(t,"valueOf")&&Ot(t.valueOf())}function cg(t){return Ot(t)||au(t)||KD(t)}function gx(t,e){return t!=null&&(!e||cg(t))}function yc(t){return YD(t)&&Object.hasOwn(t,"id")?t.id:t}var vc=L({"packages/ag-charts-community/src/util/value.ts"(){"use strict";Ct()}}),hg,fx,jD=L({"packages/ag-charts-community/src/chart/crossline/crossLine.ts"(){"use strict";Ji(),_u(),yt(),gt(),vc(),hg=t=>t==="value"?Kt((e,i)=>i.target.type==="line",e=>e.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Kt((e,i)=>i.target.type==="range",e=>e.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),fx=(t,e,i,s)=>{const n=t==="line"&&e!==void 0,a=t==="range"&&i!==void 0;if(!n&&!a)return!0;const[o,r]=i??[e,void 0],l=zt.is(s)||Cs.is(s),c=gx(o,l)&&!isNaN(s.convert(o)),h=gx(r,l)&&!isNaN(s.convert(r));if(n&&c||a&&c&&h)return!0;const u=["Expecting crossLine"];return a?(c||u.push(`range start ${pu(o)}`),h||u.push(`${c?"":"and "}range end ${pu(r)}`)):u.push(`value ${pu(o)}`),u.push("to match the axis scale domain."),Z.warnOnce(u.join(" ")),!1}}});function mx({yDirection:t,padding:e=0,position:i="top",bbox:s}){const n=t?$D:ZD,{xTranslationDirection:a,yTranslationDirection:o}=n[i],r=t?s.width:s.height,l=t?s.height:s.width,c=a*(e+r/2),h=o*(e+l/2);return{xTranslation:c,yTranslation:h}}function XD({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||(s==="top"&&!t?n.top=i+e.height:s==="bottom"&&!t?n.bottom=i+e.height:s==="left"&&t?n.left=i+e.width:s==="right"&&t&&(n.right=i+e.width)),n}var $D,ZD,Iu,yx,vx,xx,qD,bx,Sx,Mx,_x,kx,QD=L({"packages/ag-charts-community/src/chart/crossline/crossLineLabelPosition.ts"(){"use strict";$D={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},ZD={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}},Iu=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},yx=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:e,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},vx=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},xx=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i/2,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:(s+n)/2},qD=({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2}),bx=({yDirection:t,xStart:e,xEnd:i,yStart:s})=>t?{x:e/2,y:s}:{x:i,y:s},Sx=({yDirection:t,xStart:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},Mx=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},_x=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:n},kx={top:{c:Iu},bottom:{c:xx},left:{c:yx},right:{c:vx},topLeft:{c:bx},topRight:{c:Mx},bottomLeft:{c:Sx},bottomRight:{c:_x},inside:{c:qD},insideLeft:{c:yx},insideRight:{c:vx},insideTop:{c:Iu},insideBottom:{c:xx},insideTopLeft:{c:bx},insideBottomLeft:{c:Sx},insideTopRight:{c:Mx},insideBottomRight:{c:_x}}}}),JD,Ss,Mi,ug,tI=L({"packages/ag-charts-community/src/chart/crossline/cartesianCrossLine.ts"(){"use strict";Tr(),Ji(),_u(),Mt(),be(),ae(),bF(),hi(),en(),_t(),gt(),de(),Es(),ts(),jD(),QD(),JD=Jt(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Ss=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}},_([A(pt,{optional:!0})],Ss.prototype,"enabled",2),_([A(et,{optional:!0})],Ss.prototype,"text",2),_([A(_a,{optional:!0})],Ss.prototype,"fontStyle",2),_([A(ka,{optional:!0})],Ss.prototype,"fontWeight",2),_([A(q)],Ss.prototype,"fontSize",2),_([A(et)],Ss.prototype,"fontFamily",2),_([A(jt)],Ss.prototype,"padding",2),_([A(Et,{optional:!0})],Ss.prototype,"color",2),_([A(JD,{optional:!0})],Ss.prototype,"position",2),_([A(Ma,{optional:!0})],Ss.prototype,"rotation",2),_([A(pt,{optional:!0})],Ss.prototype,"parallel",2),Mi=class pp{constructor(){this.id=wn(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Ss,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new ut({name:`${this.id}`,layer:!0,zIndex:pp.LINE_LAYER_ZINDEX}),this.labelGroup=new ut({name:`${this.id}`,layer:!0,zIndex:pp.LABEL_LAYER_ZINDEX}),this.crossLineRange=new on,this.crossLineLabel=new wt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:i,crossLineRange:s,crossLineLabel:n}=this;e.append(s),i.append(n),s.pointerEvents=1}update(e){const{enabled:i,data:s,type:n,value:a,range:o,scale:r}=this;if(!n||!r||!i||!e||!fx(n,a,o,r)||s.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e,i){if(!e||!this.createNodeData(i))return;const{sideFlag:n,gridLength:a,data:o}=this,r=[],l=0,c=n*a,h=o[0],u=o[1],d=new ot(Math.min(l,c),Math.min(h,u),Math.abs(l-c),Math.abs(h-u));r.push(d);const p=this.computeLabelBBox();return p&&r.push(p),ot.merge(r)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(e){var i,s,n;const{scale:a,gridLength:o,sideFlag:r,direction:l,label:{position:c="top"},clippedRange:h,strokeWidth:u=0}=this;if(this.data=[],!a)return!1;const d=(i=a.bandwidth)!=null?i:0,p=(s=a.step)!=null?s:0,g=(e?-1:1)*(a instanceof Sa?(p-d)/2:0),[f,m]=[0,r*o];let[v,y]=this.getRange();const x=y===void 0&&Cs.is(a)?d/2+g:0;let[b,S]=[Number(a.convert(v,{clampMode:"clamped"}))-g+x,a.convert(y,{clampMode:"clamped"})+d+g];b=Rp(b,h),S=Rp(S,h),[v,y]=[Number(a.convert(v))+x,a.convert(y)+d];const k=(v===b||y===S||b!==S)&&Math.abs(S-b)>0;if(k&&b>S&&([b,S]=[S,b],[v,y]=[y,v]),v-g>=b&&(v-=g),y+g<=S&&(y+=g),this.isRange=k,this.startLine=u>0&&v>=b&&v<=b+g,this.endLine=u>0&&y>=S-d-g&&y<=S,!k&&!this.startLine&&!this.endLine)return!1;if(this.data=[b,S],this.label.enabled){const D=l==="y",{c:T=Iu}=(n=kx[c])!=null?n:{},{x:I,y:N}=T({yDirection:D,xStart:f,xEnd:m,yStart:b,yEnd:S});this.labelPoint={x:I,y:N}}return!0}updateRangeNode(){var e;const{crossLineRange:i,sideFlag:s,gridLength:n,data:a,startLine:o,endLine:r,isRange:l,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,lineDash:p}=this;i.x1=0,i.x2=s*n,i.y1=a[0],i.y2=a[1],i.startLine=o,i.endLine=r,i.isRange=l,i.fill=c,i.fillOpacity=h??1,i.stroke=u,i.strokeWidth=d??1,i.strokeOpacity=(e=this.strokeOpacity)!=null?e:1,i.lineDash=p}updateLabel(){const{crossLineLabel:e,label:i}=this;i.text&&(e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.fontSize=i.fontSize,e.fontFamily=i.fontFamily,e.fill=i.color,e.text=i.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:n,rotation:a,position:o="top",padding:r=0},direction:l,parallelFlipRotation:c,regularFlipRotation:h}=this;if(i===void 0||s===void 0)return;const{defaultRotation:u,configuredRotation:d}=lg({rotation:a,parallel:n,regularFlipRotation:h,parallelFlipRotation:c});e.rotation=u+d,e.textBaseline="middle",e.textAlign="center";const p=e.computeTransformedBBox();if(!p)return;const g=l==="y",{xTranslation:f,yTranslation:m}=mx({yDirection:g,padding:r,position:o,bbox:p});e.translationX=i+f,e.translationY=s+m}getZIndex(e=!1){return e?pp.RANGE_LAYER_ZINDEX:pp.LINE_LAYER_ZINDEX}getRange(){var e;const{value:i,range:s,scale:n}=this,a=zt.is(n)||Cs.is(n),o=(e=s?.[0])!=null?e:i;let r=s?.[1];return!a&&r===void 0&&(r=o),a&&o===r&&(r=void 0),[o,r]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const i=new wt;i.fontFamily=e.fontFamily,i.fontSize=e.fontSize,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.text=e.text;const{labelPoint:{x:s=void 0,y:n=void 0}={},label:{parallel:a,rotation:o,position:r="top",padding:l=0},direction:c,parallelFlipRotation:h,regularFlipRotation:u}=this;if(s===void 0||n===void 0)return;const{configuredRotation:d}=lg({rotation:o,parallel:a,regularFlipRotation:u,parallelFlipRotation:h});i.rotation=d,i.textBaseline="middle",i.textAlign="center";const p=i.computeTransformedBBox();if(!p)return;const g=c==="y",{xTranslation:f,yTranslation:m}=mx({yDirection:g,padding:l,position:r,bbox:p});return i.translationX=s+f,i.translationY=n+m,i.computeTransformedBBox()}calculatePadding(e){var i,s,n,a,o,r,l,c;const{isRange:h,startLine:u,endLine:d,direction:p,label:{padding:g=0,position:f="top"}}=this;if(!h&&!u&&!d)return;const m=this.computeLabelBBox();if(m?.x==null||m?.y==null)return;const v=XD({yDirection:p==="y",padding:g,position:f,bbox:m});e.left=Math.max((i=e.left)!=null?i:0,(s=v.left)!=null?s:0),e.right=Math.max((n=e.right)!=null?n:0,(a=v.right)!=null?a:0),e.top=Math.max((o=e.top)!=null?o:0,(r=v.top)!=null?r:0),e.bottom=Math.max((l=e.bottom)!=null?l:0,(c=v.bottom)!=null?c:0)}},Mi.LINE_LAYER_ZINDEX=9,Mi.RANGE_LAYER_ZINDEX=3,Mi.LABEL_LAYER_ZINDEX=8,Mi.className="CrossLine",_([A(pt,{optional:!0})],Mi.prototype,"enabled",2),_([A(Jt(["range","line"],"a crossLine type"),{optional:!0})],Mi.prototype,"type",2),_([A(fs(hg("range"),Or.restrict({length:2})),{optional:!0})],Mi.prototype,"range",2),_([A(hg("value"),{optional:!0})],Mi.prototype,"value",2),_([A(Et,{optional:!0})],Mi.prototype,"fill",2),_([A(Rt,{optional:!0})],Mi.prototype,"fillOpacity",2),_([A(Et,{optional:!0})],Mi.prototype,"stroke",2),_([A(jt,{optional:!0})],Mi.prototype,"strokeWidth",2),_([A(Rt,{optional:!0})],Mi.prototype,"strokeOpacity",2),_([A(Gn,{optional:!0})],Mi.prototype,"lineDash",2),ug=Mi}}),dg,Dx=L({"packages/ag-charts-community/src/module/moduleMap.ts"(){"use strict";Ct(),dg=class{constructor(){this.moduleMap=new Map}*modules(){const t=["toolbar","navigator"];for(const e of this.moduleMap.values())t.includes(e.module.optionsKey)||(yield e.moduleInstance);for(const e of t){const i=this.moduleMap.get(e);i&&(yield i.moduleInstance)}}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){var e;const i=Os(t)?t:t.optionsKey;(e=this.moduleMap.get(i))==null||e.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(t){var e;return(e=this.moduleMap.get(Os(t)?t:t.optionsKey))==null?void 0:e.moduleInstance}isEnabled(t){return this.moduleMap.has(Os(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,i)=>t(e.moduleInstance,i))}destroy(){var t;for(const e of this.moduleMap.keys())(t=this.moduleMap.get(e))==null||t.moduleInstance.destroy();this.moduleMap.clear()}}}}),eI={};tn(eI,{resetMotion:()=>Ce});function Ce(t,e){const{nodes:i,selections:s}=Yp(t);for(const n of s){for(const a of n.nodes()){const o=e(a,a.datum);a.setProperties(o)}n.cleanup()}for(const n of i){const a=e(n,n.datum);n.setProperties(a)}}var Do=L({"packages/ag-charts-community/src/motion/resetMotion.ts"(){"use strict";Lr()}}),Ix,pg,Ax=L({"packages/ag-charts-community/src/scale/logScale.ts"(){"use strict";Zh(),yt(),_t(),ND(),pc(),Ct(),Ji(),hc(),Ix=class yk extends zt{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=Fk,this.basePow=Fk,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,Z.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=yk.getBaseLogMethod(this.base),this.basePow=yk.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,i]=this.domain,s=e>i?Math.ceil:Math.floor,n=e>i?Math.floor:Math.ceil,a=this.pow(s(this.log(e))),o=this.pow(n(this.log(i)));this.niceDomain=[a,o]}ticks(){var e;const i=(e=this.tickCount)!=null?e:10;if(!this.domain||this.domain.length<2||i<1)return[];this.refresh();const s=this.base,[n,a]=this.getDomain(),o=Math.min(n,a),r=Math.max(n,a);let l=this.log(o),c=this.log(r);if(this.interval){const m=x=>x>=o&&x<=r,v=Math.min(Math.abs(this.interval),Math.abs(c-l)),y=bu(l,c,v).map(this.pow).filter(m);if(!Su(y.length,this.getPixelRange()))return y}const h=s%1===0,u=c-l>=i;if(!h||u)return sg(l,c,Math.min(c-l,i)).map(this.pow);const d=[],p=o>0;l=Math.floor(l)-1,c=Math.round(c)+1;const g=Jh(this.range)/i;let f=1/0;for(let m=l;m<=c;m++){const v=this.convert(this.pow(m+1));for(let y=1;y<s;y++){const x=p?y:s-y+1,b=this.pow(m)*x,S=this.convert(b),k=Math.abs(f-S),D=Math.abs(S-v),T=k>=g&&D>=g;b>=o&&b<=r&&(y===1||T||d.length===0)&&(d.push(b),f=S)}}return d}tickFormat({count:e,ticks:i,specifier:s}){return e!==1/0&&i==null&&this.ticks(),s??(s=this.base===10?".0e":","),Os(s)?kD(s):s}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const i=Math.log(e);return s=>Math.log(s)/i}}static getBasePowerMethod(e){switch(e){case 10:return i=>i>=0?nt(10,i):1/nt(10,-i);case Math.E:return Math.exp;default:return i=>nt(e,i)}}},_([Ge],Ix.prototype,"base",2),pg=Ix}});function Da(t){var e;return t?(e=rn.document)==null?void 0:e[t]:rn.document}function Un(t){var e;return t?(e=rn.window)==null?void 0:e[t]:rn.window}function ui(t,e,i){const s=Da().createElement(t);return typeof e=="object"&&(i=e,e=void 0),e&&s.classList.add(e),i&&Object.assign(s.style,i),s}function iI(t,e){const{body:i}=Da(),s=ui("a",{display:"none"});s.href=t,s.download=e,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}function sI(t){rn.document=t}function nI(t){rn.window=t}function Ia(t,e){t&&(t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.left=`${e.x}px`,t.style.top=`${e.y}px`)}var rn,Ue=L({"packages/ag-charts-community/src/util/dom.ts"(){"use strict";rn={},typeof window<"u"?rn.window=window:typeof global<"u"&&(rn.window=global.window),typeof document<"u"?rn.document=document:typeof global<"u"&&(rn.document=global.document)}}),aI,Lx,oI,Xt,Ee=L({"packages/ag-charts-community/src/util/debug.ts"(){"use strict";Ve(),Ue(),yt(),aI=2e3,Lx=Date.now(),oI=()=>{const t=Date.now()-Lx;if(t>aI){const e=(Math.floor(t/100)/10).toFixed(1);Z.log(`**** ${e}s since last log message ****`)}Lx=Date.now()},Xt={create(...t){return Object.assign((...i)=>{Xt.check(...t)&&(typeof i[0]=="function"&&(i=ax(i[0]())),oI(),Z.log(...i))},{check:()=>Xt.check(...t)})},check(...t){return t.length===0&&t.push(!0),ax(Un("agChartsDebug")).some(i=>t.includes(i))}}}}),pe,Io=L({"packages/ag-charts-community/src/scene/selection.ts"(){"use strict";Ee(),ae(),pe=class Ql{constructor(e,i,s=!0){this.parentNode=e,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Xt.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Mr,i)?()=>new i:i}static select(e,i,s=!0){return new Ql(e,i,s)}static selectAll(e,i){const s=[],n=a=>{i(a)&&s.push(a),a.children.forEach(n)};return n(e),s}static selectByClass(e,i,...s){return Ql.selectAll(e,n=>n instanceof i||s.some(a=>n instanceof a))}static selectByTag(e,i){return Ql.selectAll(e,s=>s.tag===i)}createNode(e,i,s){const n=this.nodeFactory(e);return n.datum=e,i?.(n),s==null?this._nodes.push(n):this._nodes.splice(s,0,n),this.parentNode.appendChild(n),n}update(e,i,s){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),s){const n=new Map(e.map((a,o)=>[s(a),[a,o]]));for(const[a,o]of this._nodesMap.entries())if(n.has(o)){const[r]=n.get(o);a.datum=r,this.garbageBin.delete(a),n.delete(o)}else this.garbageBin.add(a);for(const[a,[o,r]]of n.entries())this._nodesMap.set(this.createNode(o,i,r),a)}else{const n=Math.max(e.length,this.data.length);for(let a=0;a<n;a++)a>=e.length?this.garbageBin.add(this._nodes[a]):a>=this._nodes.length?this.createNode(e[a],i):(this._nodes[a].datum=e[a],this.garbageBin.delete(this._nodes[a]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(e=>this.garbageBin.has(e)?(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(const i of this._nodes.entries())e(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const i=this._nodes[e],s=this._nodes[e].datum;yield{node:i,datum:s,index:e}}}select(e){return Ql.selectAll(this.parentNode,e)}selectByClass(e){return Ql.selectByClass(this.parentNode,e)}selectByTag(e){return Ql.selectByTag(this.parentNode,e)}nodes(){return this._nodes}}}});function Au(t,e,i,s){const n=t-i,a=e-s;return n*n+a*a}function gg(t,e,i,s,n,a,o){if(i===n&&s===a)return Math.min(o,Au(t,e,i,s));const r=n-i,l=a-s,c=Math.max(0,Math.min(1,((t-i)*r+(e-s)*l)/(r*r+l*l))),h=i+c*r,u=s+c*l;return Math.min(o,Au(t,e,h,u))}function IF(t,e,i,s,n,a,o,r,l){r&&([o,a]=[a,o]);const c=Math.atan2(e-s,t-i);if(!_o(c,a,o)){const u=i+Math.cos(a)*n,d=s+Math.sin(a)*n,p=i+Math.cos(a)*n,g=s+Math.sin(a)*n;return Math.min(l,Au(t,e,u,d),Au(t,e,p,g))}const h=n-Math.sqrt(Au(t,e,i,s));return Math.min(l,h*h)}var rI=L({"packages/ag-charts-community/src/util/distance.ts"(){"use strict";zi()}}),He,xc=L({"packages/ag-charts-community/src/scene/shape/line.ts"(){"use strict";rI(),Mt(),ae(),ko(),He=class extends xs{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new ot(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:s}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}distanceSquared(t,e){const{x1:i,y1:s,x2:n,y2:a}=this;return gg(t,e,i,s,n,a,1/0)}render(t){var e;const{ctx:i,forceRender:s,stats:n,devicePixelRatio:a}=t;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:r,x2:l,y2:c}=this;if(o===l){const{strokeWidth:h}=this,u=Math.round(o*a)/a+Math.trunc(h*a)%2/(a*2);o=u,l=u}else if(r===c){const{strokeWidth:h}=this,u=Math.round(r*a)/a+Math.trunc(h*a)%2/(a*2);r=u,c=u}i.beginPath(),i.moveTo(o,r),i.lineTo(l,c),this.fillStroke(i),(e=this.fillShadow)==null||e.markClean(),super.render(t)}},He.className="Line",He.defaultStyles=Object.assign({},xs.defaultStyles,{fill:void 0,strokeWidth:1}),_([at({redraw:3})],He.prototype,"x1",2),_([at({redraw:3})],He.prototype,"y1",2),_([at({redraw:3})],He.prototype,"x2",2),_([at({redraw:3})],He.prototype,"y2",2)}});function AF(t,e,i,s,n,a){if(t.size===0)return!1;let o=t.x,r=t.y;e!=null&&(o-=(e.x-.5)*t.size,r-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+n&&(l=i+n);let c=r;r<s?c=s:r>s+a&&(c=s+a);const h=o-l,u=r-c;return Math.sqrt(h*h+u*u)<=t.size*.5}function lI(t,e,i,s,n){const a=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+n;return a&&o}function LF(t,e,i,s,n){return e+s<t.x+t.width&&e>t.x&&i>t.y&&i+n<t.y+t.height}function TF(t){return t!=null&&typeof t.point=="object"&&typeof t.label=="object"}function NF(t,e,i=5){var s,n;const a=[];t=t.map(o=>o.slice().sort((r,l)=>l.point.size-r.point.size));for(let o=0;o<t.length;o++){const r=a[o]=[],l=t[o];if(l?.length&&l[0].label)for(let c=0,h=l.length;c<h;c++){const u=l[c],{point:d,label:p,marker:g}=u,{text:f,width:m,height:v}=p,y=d.size*.5;let x=0,b=0;if(y>0&&u.placement!=null){const N=cI[u.placement];x=(m*.5+y+i)*N.x,b=(v*.5+y+i)*N.y}const S=d.x-m*.5+x-(((s=g?.center.x)!=null?s:.5)-.5)*d.size,k=d.y-v*.5+b-(((n=g?.center.y)!=null?n:.5)-.5)*d.size;!(!e||LF(e,S,k,m,v))||t.some(N=>N.some(C=>{var E;return AF(C.point,(E=C.marker)==null?void 0:E.center,S,k,m,v)}))||a.some(N=>N.some(C=>lI(C,S,k,m,v)))||r.push({index:c,text:f,x:S,y:k,width:m,height:v,datum:u})}}return a}function OF(t,e){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:a,y:o},label:{text:r}}=n;let{label:{width:l,height:c}}=n;if(l+=e??0,c+=e??0,i.some(u=>lI(u,a,o,l,c)))return!0;i.push({index:s,text:r,x:a,y:o,width:l,height:c,datum:n})}return!1}var cI,hI=L({"packages/ag-charts-community/src/scene/util/labelPlacement.ts"(){"use strict";cI={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}}}});function uI(t,e){return t.length===e.length&&t.every((i,s)=>{const n=e[s];return Array.isArray(i)&&Array.isArray(n)?uI(i,n):i===n})}function dI(t,e){return t.length===e.length&&t.every((i,s)=>Number(i)===Number(e[s]))}var pI=L({"packages/ag-charts-community/src/util/equal.ts"(){"use strict"}});function We(t,e){const i=ke(t)?t:t.split(".");if(i.length===1){const[s]=i;return xa((n,a,o)=>n[s]=o,n=>n[s],e)}return xa((s,n,a)=>Bv(s,i,a),s=>Pv(s,i),e)}function CF(t){return xa((e,i,s)=>e[t]=s)}function _i(t,e){return xa((i,s,n)=>i[t][e??s]=n)}function Vi(t){const{newValue:e,oldValue:i,changeValue:s}=t;return xa((n,a,o,r)=>(o!==r&&(r!==void 0&&i?.call(n,r),o!==void 0&&e?.call(n,o),s?.call(n,o,r)),o))}function Ui(t){return UB(t)}var Ye=L({"packages/ag-charts-community/src/util/proxy.ts"(){"use strict";kr(),ue(),Ct()}}),fg,bc,Lu=L({"packages/ag-charts-community/src/util/stateMachine.ts"(){"use strict";Ee(),fg="color: green",bc=class $y{constructor(e,i,s){this.defaultState=e,this.states=i,this.enterEach=s,this.debug=Xt.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,fg)}is(e){return this.state==="__child"&&this.childState?this.childState.is(e):this.state===e}transition(e,i){var s,n,a,o;if(!this.transitionChild(e,i)||this.state==="__child"||this.state==="__parent")return;const l=this.states[this.state],c=l?.[e];if(!c){this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey");return}const h=this.getDestinationState(c),u=h===this.state?void 0:l.onExit;this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${h}`,fg),(s=this.enterEach)==null||s.call(this,this.state,h),h!=="__child"&&h!=="__parent"&&((a=(n=this.states[h]).onEnter)==null||a.call(n)),this.state=h,typeof c=="function"?c(i):typeof c=="object"&&!(c instanceof $y)&&((o=c.action)==null||o.call(c,i)),u?.()}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,i){var s,n;return this.state!=="__child"||!this.childState||(this.childState.transition(e,i),!this.childState.is("__parent"))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,fg),this.state=this.defaultState,(n=(s=this.states[this.state]).onEnter)==null||n.call(s),this.childState.resetHierarchy(),!1)}getDestinationState(e){let i=this.state;return typeof e=="string"?i=e:e instanceof $y?(this.childState=e,i="__child"):typeof e=="object"&&(e.target instanceof $y?(this.childState=e.target,i="__child"):i=e.target),i}}}});function Br(t,e,i){i===void 0||i===""?t?.removeAttribute(e):t?.setAttribute(e,i.toString())}var Tu=L({"packages/ag-charts-community/src/util/attributeUtil.ts"(){"use strict"}});function gI(t,e,i,s,n){let{top:a,right:o,bottom:r,left:l,width:c,height:h}=n;return l!=null?c!=null?o=i-l+c:o!=null&&(c=i-l-o):o!=null&&c!=null&&(l=i-o-c),a!=null?h!=null?r=s-a-h:r!=null&&(h=s-r-a):r!=null&&h!=null&&(a=s-r-h),c==null?h==null?(c=t,h=e):c=Math.ceil(t*h/e):h==null&&(h=Math.ceil(e*c/t)),l==null&&(o==null?l=Math.floor((i-c)/2):l=i-o-c),a==null&&(r==null?a=Math.floor((s-h)/2):a=s-h-r),{x:l,y:a,width:c,height:h}}var fI=L({"packages/ag-charts-community/src/util/placement.ts"(){"use strict"}});function EF(t){const e=(i,s,n)=>s===0||n[s-1]!=="."?". ":" ";return t.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*>/g,e).replace(/<[^<>]+>/g,"").replace(/\n+/g," ").replace(/\s+/g," ")}function Sc(t,e){var i,s,n;if(typeof t=="string")return{html:t,ariaLabel:t};const{content:a=(i=e?.content)!=null?i:"",title:o=e?.title,color:r=(s=e?.color)!=null?s:"white",backgroundColor:l=(n=e?.backgroundColor)!=null?n:"#888"}=t,c=o?`<div class="${ln}-title"
        style="color: ${r}; background-color: ${l}">${o}</div>`:"",h=o?`${o}: `:"",u=a?`<div class="${ln}-content">${a}</div>`:"";return{html:`${c}${u}`,ariaLabel:EF(`${h}${a}`)}}var ln,Tx,Hn,Fr,Ms,Hi=L({"packages/ag-charts-community/src/chart/tooltip/tooltip.ts"(){"use strict";Tu(),Ue(),_t(),fI(),ne(),Ye(),gt(),ln="ag-chart-tooltip",Tx="ag-chart-dark-tooltip",Hn={html:"",ariaLabel:""},Fr=class extends xt{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}},_([A(Jt(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],Fr.prototype,"type",2),_([A(jt)],Fr.prototype,"xOffset",2),_([A(jt)],Fr.prototype,"yOffset",2),Ms=class extends xt{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Fr,this.darkTheme=!1,this.nestedDOM=!0,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0}get interactive(){return this.enableInteraction}setup(t){this.element=t.addChild("canvas-overlay",ln),this.element.classList.add(ln),Br(this.element,"aria-hidden",!0)}destroy(t){t.removeChild("canvas-overlay",ln)}isVisible(){var t;return!((t=this.element)!=null&&t.classList.contains(ln+"-hidden"))}show(t,e,i,s=!1){var n,a,o,r,l,c,h,u,d;const{element:p}=this;if(i!=null&&p!=null)p.innerHTML=i.html;else if(!p?.innerHTML){this.toggle(!1);return}const g=(a=(n=e.position)==null?void 0:n.type)!=null?a:this.position.type,f=(r=(o=e.position)==null?void 0:o.xOffset)!=null?r:0,m=(c=(l=e.position)==null?void 0:l.yOffset)!=null?c:0,v=this.getTooltipBounds({positionType:g,meta:e,yOffset:m,xOffset:f,canvasRect:t}),y=gI(p.clientWidth,p.clientHeight,t.width,t.height,v),x=this.nestedDOM?t:this.getWindowSize(),b=this.nestedDOM?0:-t.left,S=this.nestedDOM?0:-t.top,k=x.width-p.clientWidth-1+b,D=x.height-p.clientHeight+S,T=St(b,y.x,k),I=St(S,y.y,D),N=T!==y.x||I!==y.y,C=(g==="node"||g==="pointer")&&!N&&!f&&!m,E=(u=(h=e.showArrow)!=null?h:this.showArrow)!=null?u:C;this.updateShowArrow(E),p.style.transform=`translate(${Math.round(T)}px, ${Math.round(I)}px)`,this.enableInteraction=(d=e.enableInteraction)!=null?d:!1,this.delay>0&&!s?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}getWindowSize(){const{innerWidth:t,innerHeight:e}=Un();return{width:t,height:e}}toggle(t){if(!this.element)return;const{classList:e}=this.element,i=(l,c)=>e.toggle(`${ln}-${l}`,c),s=this.isVisible();let n=1/0;if(t||clearTimeout(this.showTimeout),s!==t){const l=Date.now();n=l-this.lastVisibilityChange,this.lastVisibilityChange=l}const a=100,o=5,r=!s&&t&&n>a;n>o&&i("no-animation",r),i("no-interaction",!this.enableInteraction),i("hidden",!t),i("arrow",this._showArrow),e.toggle(Tx,this.darkTheme);for(const l of this.wrapTypes)e.toggle(`${ln}-wrap-${l}`,l===this.wrapping)}updateShowArrow(t){this._showArrow=t}getTooltipBounds(t){if(!this.element)return{};const{positionType:e,meta:i,yOffset:s,xOffset:n,canvasRect:a}=t,{clientWidth:o,clientHeight:r}=this.element,l={width:o,height:r};switch(e){case"node":case"pointer":return l.top=i.offsetY+s-r-8,l.left=i.offsetX+n-o/2,l;case"top":return l.top=s,l.left=a.width/2-o/2+n,l;case"right":return l.top=a.height/2-r/2+s,l.left=a.width-o/2+n,l;case"left":return l.top=a.height/2-r/2+s,l.left=n,l;case"bottom":return l.top=a.height-r+s,l.left=a.width/2-o/2+n,l;case"top-left":return l.top=s,l.left=n,l;case"top-right":return l.top=s,l.left=a.width-o+n,l;case"bottom-right":return l.top=a.height-r+s,l.left=a.width-o+n,l;case"bottom-left":return l.top=a.height-r+s,l.left=n,l}}},_([A(pt)],Ms.prototype,"enabled",2),_([A(pt,{optional:!0})],Ms.prototype,"showArrow",2),_([Ui((t,e,i)=>{var s,n;e&&((s=t.element)==null||s.classList.add(e)),i&&((n=t.element)==null||n.classList.remove(i))}),A(et,{optional:!0})],Ms.prototype,"class",2),_([A(q)],Ms.prototype,"delay",2),_([A(vu,{optional:!0})],Ms.prototype,"range",2),_([A(yu)],Ms.prototype,"wrapping",2),_([A(rt)],Ms.prototype,"position",2),_([A(pt)],Ms.prototype,"darkTheme",2),_([A(pt)],Ms.prototype,"nestedDOM",2)}}),qt,zr=L({"packages/ag-charts-community/src/chart/caption.ts"(){"use strict";ae(),hi(),Zh(),en(),ne(),Ye(),ux(),gt(),Hi(),qt=class extends xt{constructor(){super(...arguments),this.id=wn(this),this.node=new wt({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1,this.layoutStyle="block"}registerInteraction(t){const e=t.regionManager.getRegion("root"),i=[e.addListener("hover",s=>this.handleMouseMove(t,s)),e.addListener("leave",s=>this.handleMouseLeave(t,s))];return eB(...i)}computeTextWrap(t,e){var i,s;const{text:n,wrapping:a}=this,o=Math.min((i=this.maxWidth)!=null?i:1/0,t),r=(s=this.maxHeight)!=null?s:e;if(!isFinite(o)&&!isFinite(r)){this.node.text=n;return}const l=wt.wrap(n??"",o,r,this,a);this.node.text=l,this.truncated=l.includes(bs.EllipsisChar)}handleMouseMove(t,e){if(e!==void 0&&this.enabled&&this.node.visible&&this.truncated){const{offsetX:i,offsetY:s}=e;t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:e,showArrow:!1},Sc({content:this.text}))}}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}},qt.SMALL_PADDING=10,qt.LARGE_PADDING=20,_([A(pt)],qt.prototype,"enabled",2),_([A(et,{optional:!0}),_i("node")],qt.prototype,"text",2),_([A(Jv,{optional:!0}),_i("node")],qt.prototype,"textAlign",2),_([A(_a,{optional:!0}),_i("node")],qt.prototype,"fontStyle",2),_([A(ka,{optional:!0}),_i("node")],qt.prototype,"fontWeight",2),_([A(q),_i("node")],qt.prototype,"fontSize",2),_([A(et),_i("node")],qt.prototype,"fontFamily",2),_([A(Et,{optional:!0}),_i("node","fill")],qt.prototype,"color",2),_([A(q,{optional:!0})],qt.prototype,"spacing",2),_([A(q,{optional:!0})],qt.prototype,"lineHeight",2),_([A(q,{optional:!0})],qt.prototype,"maxWidth",2),_([A(q,{optional:!0})],qt.prototype,"maxHeight",2),_([A(yu)],qt.prototype,"wrapping",2),_([A(et)],qt.prototype,"layoutStyle",2)}}),Aa,Ao=L({"packages/ag-charts-community/src/util/listeners.ts"(){"use strict";yt(),Aa=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex(n=>n.symbol===t);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(const i of this.getListenersByType(t))try{i.handler(...e)}catch(s){Z.errorOnce(s)}}dispatchWrapHandlers(t,e,...i){for(const s of this.getListenersByType(t))try{e(s.handler,...i)}catch(n){Z.errorOnce(n)}}getListenersByType(t){var e;return(e=this.registeredListeners.get(t))!=null?e:[]}destroy(){this.registeredListeners.clear()}}}}),Rs,cn=L({"packages/ag-charts-community/src/chart/baseManager.ts"(){"use strict";Ao(),Rs=class{constructor(){this.listeners=new Aa,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t())}}}});function Nu(t){const e=K(B({},t),{preventDefault(){var i;(i=e.sourceEvent)==null||i.preventDefault()}});return e}function mg(t,e){t.dispatchWrapHandlers(e.type,(i,s)=>i(s),Nu(e))}var Ou=L({"packages/ag-charts-community/src/chart/interaction/preventableEvent.ts"(){"use strict"}}),yg,mI,yI,vg,Nx,Ox,Gr,Cx,Ex,hn=L({"packages/ag-charts-community/src/chart/interaction/interactionManager.ts"(){"use strict";Ve(),Ee(),Ue(),yt(),ue(),Ct(),cn(),Ou(),yg=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],mI=["blur","focus"],yI=["keydown","keyup"],vg=["mousemove","mouseup"],Nx=["pagehide","mousemove","mouseup"],Ox=["click","dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],Gr=(t=>(t[t.Default=16]="Default",t[t.ZoomDrag=8]="ZoomDrag",t[t.Annotations=4]="Annotations",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=31]="All",t))(Gr||{}),Cx=class vk extends Rs{constructor(e,i){super(),this.keyboardOptions=e,this.domManager=i,this.debug=Xt.create(!0,"interaction"),this.eventHandler=s=>this.processEvent(s),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=17,this.rootElement=this.domManager.getDocumentRoot();for(const s of Ox)s.startsWith("touch")||s==="wheel"?this.domManager.addEventListener(s,this.eventHandler,{passive:!1}):this.domManager.addEventListener(s,this.eventHandler);for(const s of Nx)Un().addEventListener(s,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",()=>this.containerChanged())}containerChanged(e=!1){var i,s;const n=this.domManager.getDocumentRoot();if(!(!e&&n===this.rootElement)){for(const a of vg)(i=this.rootElement)==null||i.removeEventListener(a,this.eventHandler);this.rootElement=n,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(const a of vg)(s=this.rootElement)==null||s.addEventListener(a,this.eventHandler)}}destroy(){var e;super.destroy();for(const i of Nx)Un().removeEventListener(i,this.eventHandler);for(const i of vg)(e=this.rootElement)==null||e.removeEventListener(i,this.eventHandler);for(const i of Ox)this.domManager.removeEventListener(i,this.eventHandler);this.domManager.removeStyles("interactionManager")}addListener(e,i,s=16){return super.addListener(e,n=>{this.getState()&s&&i(n)})}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){const i=this.decideInteractionEventTypes(e),s=e.target;if(e.type==="click"&&s?.ariaDisabled==="true"){e.preventDefault();return}i.length>0&&this.dispatchEvent(e,i).catch(n=>Z.errorOnce(n))}dispatchEvent(e,i){return F(this,null,function*(){if(eg(yg,i)){this.dispatchPointerEvent(e,i);return}const{relatedElement:s,targetElement:n}=this.extractElements(e);if(eg(mI,i))for(const a of i){const o=e;mg(this.listeners,{type:a,sourceEvent:o,relatedElement:s,targetElement:n})}else if(eg(yI,i))for(const a of i){const o=e;mg(this.listeners,{type:a,sourceEvent:o,relatedElement:s,targetElement:n})}})}extractElements(e){let i,s;return"relatedTarget"in e&&e.relatedTarget instanceof HTMLElement&&(i=e.relatedTarget),"target"in e&&e.target instanceof HTMLElement&&(s=e.target),{relatedElement:i,targetElement:s}}dispatchPointerEvent(e,i){const s=this.calculateCoordinates(e);if(s!=null)for(const n of i)mg(this.listeners,this.buildPointerEvent(B({type:n,event:e},s)))}getEventHTMLTarget(e){if(e.target instanceof HTMLElement)return e.target;if(e.currentTarget instanceof HTMLElement)return e.currentTarget}recordDown(e){e instanceof MouseEvent&&(Ir(["offsetX","offsetY"],this.clickHistory[0],e),Ir(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),Ir(["offsetX","offsetY"],this.dblclickHistory[0],e)),this.dragStartElement=this.getEventHTMLTarget(e)}recordUp(e){e instanceof MouseEvent&&Ir(["offsetX","offsetY"],this.dblclickHistory[1],e),this.dragStartElement=void 0}decideInteractionEventTypes(e){const i="drag-start";switch(e.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?[e.type]:[];case"click":case"dblclick":case"contextmenu":case"wheel":return[e.type];case"mousedown":return!this.isEventOverElement(e)||!("button"in e)||e.button!==0?[]:(this.mouseDown=!0,this.recordDown(e),[i]);case"touchstart":return this.isEventOverElement(e)?(this.touchDown=!0,this.recordDown(e),[i]):[];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(e)?[]:(this.mouseDown=!1,this.recordUp(e),["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(e)?[]:(this.touchDown=!1,this.recordUp(e),["drag-end"]);case"mouseleave":case"touchcancel":return["leave"];case"mouseenter":const s=e instanceof MouseEvent&&(e.buttons&1)===1;return this.mouseDown!==s?(this.mouseDown=s,[s?i:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(e){return this.domManager.isEventOverElement(e)}calculateCoordinates(e){var i;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const s=(i=e.touches[0])!=null?i:e.changedTouches[0],{clientX:n,clientY:a,pageX:o,pageY:r}=s;return K(B({},vk.NULL_COORDS),{clientX:n,clientY:a,pageX:o,pageY:r})}else if(e instanceof PageTransitionEvent)return e.persisted?void 0:vk.NULL_COORDS}getMouseEventCoords(e){const{clientX:i,clientY:s,pageX:n,pageY:a}=e;let{offsetX:o,offsetY:r}=e;const l=this.getEventHTMLTarget(e),{x:c=0,y:h=0}=l?this.domManager.calculateCanvasPosition(l):{};if(this.dragStartElement!=null&&e.target!==this.dragStartElement){const u=this.domManager.calculateCanvasPosition(this.dragStartElement);o-=u.x-c,r-=u.y-h}else o+=c,r+=h;return{clientX:i,clientY:s,pageX:n,pageY:a,offsetX:o,offsetY:r}}isWheelEvent(e){return e.type==="wheel"}buildPointerEvent(e){var i,s,n;const{type:a,event:o,clientX:r,clientY:l}=e;let{offsetX:c,offsetY:h,pageX:u,pageY:d}=e;if(!Ot(c)||!Ot(h)){const x=this.domManager.getBoundingClientRect();c=r-x.left,h=l-x.top}if(!Ot(u)||!Ot(d)){const x=(i=this.rootElement)==null?void 0:i.getBoundingClientRect();u=r-((s=x?.left)!=null?s:0),d=l-((n=x?.top)!=null?n:0)}let[p,g]=[NaN,NaN];if(this.isWheelEvent(o)){const x=o.deltaMode===0?.01:1;p=o.deltaX*x,g=o.deltaY*x}let f=[];o.type==="click"?f=this.clickHistory:o.type==="dblclick"&&(f=this.dblclickHistory);const{relatedElement:m,targetElement:v}=this.extractElements(o),y={type:a,offsetX:c,offsetY:h,pageX:u,pageY:d,deltaX:p,deltaY:g,pointerHistory:f,sourceEvent:o,relatedElement:m,targetElement:v};return this.debug("InteractionManager - builtEvent: ",y),y}},Cx.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},Ex=Cx}}),Rx,wx=L({"packages/ag-charts-community/src/chart/interaction/regions.ts"(){"use strict";Rx=(t=>(t.TITLE="title",t.SUBTITLE="subtitle",t.FOOTNOTE="footnote",t.LEGEND="legend",t.NAVIGATOR="navigator",t.PAGINATION="pagination",t.ROOT="root",t.SERIES="series",t.HORIZONTAL_AXES="horizontal-axes",t.VERTICAL_AXES="vertical-axes",t.TOOLBAR="toolbar",t))(Rx||{})}}),vI,xI,Cu,RF=L({"packages/ag-charts-community/src/chart/axis/axisGridLine.ts"(){"use strict";Ct(),gt(),vI=["stroke","lineDash"],xI=zn(t=>Ts(t)&&Object.keys(t).every(e=>vI.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),Cu=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}},_([A(pt)],Cu.prototype,"enabled",2),_([A(q)],Cu.prototype,"width",2),_([A(xI)],Cu.prototype,"style",2)}});function Lo(t,e=[void 0]){return xa((i,s,n)=>e.includes(n)?Dr(t)?t(n):t:n)}var Eu=L({"packages/ag-charts-community/src/util/default.ts"(){"use strict";kr(),Ct()}}),Px,Vr,bI=L({"packages/ag-charts-community/src/chart/axis/axisInterval.ts"(){"use strict";Eu(),ne(),Np(),Ct(),gt(),Px=Kt(t=>Ot(t)&&t>0||t instanceof So,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Vr=class extends xt{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}},_([A(Px,{optional:!0})],Vr.prototype,"step",2),_([A(Or,{optional:!0})],Vr.prototype,"values",2),_([A(ix),Lo(NaN)],Vr.prototype,"minSpacing",2),_([A(sx),Lo(NaN)],Vr.prototype,"maxSpacing",2)}}),Se,xg=L({"packages/ag-charts-community/src/chart/axis/axisLabel.ts"(){"use strict";Eu(),ne(),gt(),Se=class extends xt{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}},_([A(pt)],Se.prototype,"enabled",2),_([A(pt,{optional:!0})],Se.prototype,"autoWrap",2),_([A(q,{optional:!0})],Se.prototype,"maxWidth",2),_([A(q,{optional:!0})],Se.prototype,"maxHeight",2),_([A(_a,{optional:!0})],Se.prototype,"fontStyle",2),_([A(ka,{optional:!0})],Se.prototype,"fontWeight",2),_([A(jt.restrict({min:1}))],Se.prototype,"fontSize",2),_([A(et)],Se.prototype,"fontFamily",2),_([A(q)],Se.prototype,"padding",2),_([A(Nr),Lo(NaN)],Se.prototype,"minSpacing",2),_([A(Et,{optional:!0})],Se.prototype,"color",2),_([A(Ma,{optional:!0})],Se.prototype,"rotation",2),_([A(pt)],Se.prototype,"avoidCollisions",2),_([A(pt)],Se.prototype,"mirrored",2),_([A(pt)],Se.prototype,"parallel",2),_([A(Bi,{optional:!0})],Se.prototype,"formatter",2),_([A(et,{optional:!0})],Se.prototype,"format",2)}}),Mc,SI=L({"packages/ag-charts-community/src/chart/axis/axisLine.ts"(){"use strict";gt(),Mc=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}},_([A(pt)],Mc.prototype,"enabled",2),_([A(q)],Mc.prototype,"width",2),_([A(Et,{optional:!0})],Mc.prototype,"stroke",2)}}),Ur,MI=L({"packages/ag-charts-community/src/chart/axis/axisTick.ts"(){"use strict";ne(),Np(),gt(),Ur=class extends xt{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}},_([A(pt)],Ur.prototype,"enabled",2),_([A(q)],Ur.prototype,"width",2),_([A(q)],Ur.prototype,"size",2),_([A(Et,{optional:!0})],Ur.prototype,"stroke",2)}}),ws,wF=L({"packages/ag-charts-community/src/chart/axis/axisTitle.ts"(){"use strict";ne(),gt(),zr(),ws=class extends xt{constructor(){super(...arguments),this.enabled=!1,this.spacing=qt.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}},_([A(pt)],ws.prototype,"enabled",2),_([A(et,{optional:!0})],ws.prototype,"text",2),_([A(q,{optional:!0})],ws.prototype,"spacing",2),_([A(_a,{optional:!0})],ws.prototype,"fontStyle",2),_([A(ka,{optional:!0})],ws.prototype,"fontWeight",2),_([A(q)],ws.prototype,"fontSize",2),_([A(et)],ws.prototype,"fontFamily",2),_([A(Et,{optional:!0})],ws.prototype,"color",2),_([A(yu)],ws.prototype,"wrapping",2),_([A(Bi,{optional:!0})],ws.prototype,"formatter",2)}});function Bx(t){const[e,i]=Ls(t.range),s=Math.floor(e),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}function PF(t,e){return Math.abs(e-t)<LI?e:t>e?e+bg:e-bg}function _I(t){const e=(o,r)=>{const[l=t.min,c=t.max]=Ls(r??[]);return o<l||o>c};return{tick:{fromFn(o,r,l){let c=o.y1+o.translationY,h=o.opacity;return(l==="added"||e(o.datum.translationY,o.datum.range))&&(c=r.translationY,h=0),{y:0,translationY:c,opacity:h,phase:Si[l]}},toFn(o,r,l){const c=r.translationY;let h=1;return l==="removed"&&(h=0),{y:0,translationY:c,opacity:h,finish:{y:c,translationY:0}}},intermediateFn(o,r,l){return{visible:!e(o.y)}}},line:{fromFn(o,r){var l;return K(B({},(l=o.previousDatum)!=null?l:r),{phase:Si.updated})},toFn(o,r){return B({},r)}},label:{fromFn(o,r,l){var c;const h=(c=o.previousDatum)!=null?c:r,u=h.x,d=h.y,p=h.rotationCenterX;let g=Math.round(o.translationY),f=h.rotation,m=o.opacity;return l==="removed"||e(h.y,h.range)?f=r.rotation:(l==="added"||e(o.datum.y,o.datum.range))&&(g=Math.round(h.translationY),m=0,f=r.rotation),{x:u,y:d,rotationCenterX:p,translationY:g,rotation:f,opacity:m,phase:Si[l]}},toFn(o,r,l){var c,h;const u=r.x,d=r.y,p=r.rotationCenterX,g=Math.round(r.translationY);let f=0,m=1;return l==="added"?(m=1,f=r.rotation):l==="removed"?(m=0,f=r.rotation):f=PF((h=(c=o.previousDatum)==null?void 0:c.rotation)!=null?h:r.rotation,r.rotation),{x:u,y:d,rotationCenterX:p,translationY:g,rotation:f,opacity:m,finish:{rotation:r.rotation}}}},group:{fromFn(o,r){const{rotation:l,translationX:c,translationY:h}=o;return{rotation:l,translationX:c,translationY:h,phase:Si.updated}},toFn(o,r){const{rotation:l,translationX:c,translationY:h}=r;return{rotation:l,translationX:c,translationY:h}}}}}function kI(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function DI(t){const{visible:e,min:i,max:s}=t;return(n,a)=>{const o=a.translationY,r=e&&o>=i&&o<=s;return{y:o,translationY:0,opacity:1,visible:r}}}function II(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function AI(){return(t,e)=>B({},e)}var bg,LI,TI=L({"packages/ag-charts-community/src/chart/axis/axisUtil.ts"(){"use strict";li(),_t(),bg=Math.PI*2,LI=bg/2}}),Wn,Sg,Fx=L({"packages/ag-charts-community/src/chart/axis/axis.ts"(){"use strict";Dx(),li(),Do(),Ji(),Ax(),_u(),ng(),Mt(),be(),Nv(),Io(),xc(),hi(),hI(),zi(),pI(),en(),bi(),yt(),_t(),Ye(),Lu(),ux(),gt(),zr(),de(),tI(),hn(),wx(),Es(),ts(),RF(),bI(),xg(),SI(),MI(),wF(),TI(),Wn=class Pw{constructor(e,i,s){this.moduleCtx=e,this.scale=i,this.id=wn(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new Vr,this.disableZoom=!1,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new ut({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new He),this.tickLineGroup=this.axisGroup.appendChild(new ut({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new ut({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new ut({name:`${this.id}-CrossLines`}),this.labelGroup=new ut({name:`${this.id}-Labels`,zIndex:10}),this.gridGroup=new ut({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ut({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=pe.select(this.tickLineGroup,He,!1),this.tickLabelGroupSelection=pe.select(this.tickLabelGroup,wt,!1),this.gridLineGroupSelection=pe.select(this.gridLineGroup,He,!1),this.line=new Mc,this.tick=new Ur,this.gridLine=new Cu,this.label=this.createLabel(),this.defaultTickMinSpacing=Pw.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.minRect=void 0,this.range=[0,1],this.visibleRange=[0,1],this.title=new ws,this._titleCaption=new qt,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new dg;var n;this.range=this.scale.range.slice(),(n=this.crossLines)==null||n.forEach(o=>this.initCrossLine(o)),this.destroyFns.push(this._titleCaption.registerInteraction(this.moduleCtx)),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.regionManager.getRegion("series").addListener("hover",o=>this.checkAxisHover(o)),e.regionManager.getRegion("horizontal-axes").addListener("hover",o=>this.checkAxisHover(o)),e.regionManager.getRegion("vertical-axes").addListener("hover",o=>this.checkAxisHover(o))),this.animationManager=e.animationManager,this.animationState=new bc("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:o=>this.animateReadyUpdate(o),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let a;this.destroyFns.push(e.layoutService.addListener("layout-complete",o=>{a!=null&&gs(o.chart,a)!=null&&this.animationState.transition("resize"),a=B({},o.chart)})),s?.respondsToZoom!==!1&&this.destroyFns.push(e.updateService.addListener("update-complete",o=>{this.minRect=o.minRect}))}get type(){var e;return(e=this.constructor.type)!=null?e:""}set crossLines(e){var i,s;(i=this._crossLines)==null||i.forEach(n=>this.detachCrossLine(n)),e&&this.assignCrossLineArrayConstructor(e),this._crossLines=e,(s=this._crossLines)==null||s.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}resetAnimation(e){e==="initial"&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineGroup.appendChild(e.group),this.crossLineGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group),this.crossLineGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}updateRange(){var e,i;const{range:s,visibleRange:n,scale:a}=this,o=(s[1]-s[0])/(n[1]-n[0]),r=o*n[0],l=s[0]-r;(e=a.setVisibleRange)==null||e.call(a,n),a.range=[l,l+o],(i=this.crossLines)==null||i.forEach(c=>{c.clippedRange=[s[0],s[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,i){i.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup),e.appendChild(this.labelGroup)}attachLabel(e){this.labelGroup.append(e)}detachAxis(e,i){i.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup),e.removeChild(this.labelGroup)}getAxisGroup(){return this.axisGroup}inRange(e,i=0){const[s,n]=Ls(this.range);return e>=s-i&&e<=n+i}onFormatChange(e,i,s,n){const{scale:a}=this,o=a instanceof pg,r=l=>o?String:c=>typeof c=="number"?c.toFixed(i+l):String(c);if(n&&a&&a.tickFormat)try{const l=a.tickFormat({ticks:e,specifier:n});this.labelFormatter=l,this.datumFormatter=l}catch{this.labelFormatter=r(0),this.datumFormatter=r(1),Z.warnOnce(`the axis label format string ${n} is invalid. No formatting will be applied`)}else this.labelFormatter=r(0),this.datumFormatter=r(1)}setTickInterval(e){var i,s;this.scale.interval=(s=(i=this.interval)==null?void 0:i.step)!=null?s:e}onGridLengthChange(e,i){var s;(i&&!e||!i&&e)&&this.onGridVisibilityChange(),(s=this.crossLines)==null||s.forEach(n=>this.initCrossLine(n))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new Se}checkAxisHover(e){!this.interactionEnabled||!this.computeBBox().containsPoint(e.offsetX,e.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(e=0,i=!0){if(!this.tickGenerationResult)return;const{rotation:s,parallelFlipRotation:n,regularFlipRotation:a}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),{tickData:l,combinedRotation:c,textBaseline:h,textAlign:u,primaryTickCount:d}=this.tickGenerationResult,p=this.tickLabelGroupSelection.nodes().map(g=>g.datum.tickId);if(this.updateSelections(r,l.ticks,{combinedRotation:c,textAlign:u,textBaseline:h,range:this.scale.range}),!i||this.animationManager.isSkipped())this.resetSelectionNodes();else{const g=this.calculateUpdateDiff(p,l);this.animationState.transition("update",g)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:s,parallelFlipRotation:n,regularFlipRotation:a}),this.updateLayoutState(l.fractionDigits),d}getAxisLineCoordinates(){const[e,i]=Ls(this.range);return{x:0,y1:e,y2:i}}getTickLineCoordinates(e){const s=this.label.getSideFlag()*this.getTickSize(),n=Math.min(0,s),a=n+Math.abs(s),o=e.translationY;return{x1:n,x2:a,y:o}}getTickLabelProps(e,i){const{label:s}=this,{combinedRotation:n,textBaseline:a,textAlign:o,range:r}=i,l=e.tickLabel,h=s.getSideFlag()*(this.getTickSize()+s.padding+this.seriesAreaPadding),u=l!==""&&l!=null;return{tickId:e.tickId,translationY:e.translationY,fill:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:n,rotationCenterX:h,text:l,textAlign:o,textBaseline:a,visible:u,x:h,y:0,range:r}}getTickSize(){return this.tick.enabled?this.tick.size:6}setTitleProps(e,i){var s;const{title:n}=this;if(!n.enabled){e.enabled=!1,e.node.visible=!1;return}e.color=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.fontWeight=n.fontWeight,e.enabled=n.enabled,e.wrapping=n.wrapping;const a=e.node,o=((s=n.spacing)!=null?s:0)+i.spacing,r=this.label.getSideFlag(),l=oe(this.rotation),c=r===-1&&l>Math.PI&&l<Math.PI*2?-1:1,h=c*r*Math.PI/2,u=c===1?"bottom":"top",{range:d}=this,p=Math.floor(c*r*(d[0]+d[1])/2),g=Math.floor(r===-1?c*-o:-o),{callbackCache:f}=this.moduleCtx,{formatter:m=y=>y.defaultValue}=n,v=f.call(m,this.getTitleFormatterParams());a.setProperties({rotation:h,text:v,textBaseline:u,visible:!0,x:p,y:g})}calculateLayout(e){var i,s;const{rotation:n,parallelFlipRotation:a,regularFlipRotation:o}=this.calculateRotations(),r=this.label.getSideFlag(),l=r*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:a,regularFlipRotation:o,labelX:l,sideFlag:r});const c=this.tickGenerationResult,{tickData:h,combinedRotation:u,textBaseline:d,textAlign:p}=c,g=se(c,["tickData","combinedRotation","textBaseline","textAlign"]);this.updateLayoutState(h.fractionDigits);const f=[],{x:m,y1:v,y2:y}=this.getAxisLineCoordinates(),x=new ot(m+Math.min(r*this.seriesAreaPadding,0),v,this.seriesAreaPadding,y-v);if(f.push(x),this.tick.enabled&&h.ticks.forEach(T=>{const{x1:I,x2:N,y:C}=this.getTickLineCoordinates(T),E=new ot(I,C,N-I,0);f.push(E)}),this.label.enabled){const T=new wt;h.ticks.forEach(I=>{const N=this.getTickLabelProps(I,{combinedRotation:u,textAlign:p,textBaseline:d,range:this.scale.range});if(!N.visible)return;T.setProperties(K(B({},N),{translationY:Math.round(I.translationY)}));const C=T.computeTransformedBBox();C&&f.push(C)})}const b=T=>{const I=new sn,{rotation:N,translationX:C,translationY:E,rotationCenterX:O,rotationCenterY:P}=this.getAxisTransform();return sn.updateTransformMatrix(I,1,1,N,C,E,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:O,rotationCenterY:P}),I.transformBBox(T)};if((i=this.title)!=null&&i.enabled){const T=new qt,I=ot.merge(f).width;this.setTitleProps(T,{spacing:I});const C=T.node.computeTransformedBBox();C&&f.push(C)}const S=ot.merge(f),k=b(S),D=this.isAnySeriesActive();return(s=this.crossLines)==null||s.forEach(T=>{var I,N;T.sideFlag=-r,T.direction=n===-Math.PI/2?"x":"y",T instanceof ug&&((N=(I=T.label).parallel)!=null||(I.parallel=this.label.parallel)),T.parallelFlipRotation=a,T.regularFlipRotation=o,T.calculateLayout(D,this.reverse)}),e=g.primaryTickCount,{primaryTickCount:e,bbox:k}}updateLayoutState(e){this.layout.label={fractionDigits:e,padding:this.label.padding,format:this.label.format}}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.interval.step);const{scale:e,nice:i}=this;zt.is(e)&&(e.nice=i,e.update())}calculateRotations(){const e=Fi(this.rotation),i=oe(e),s=oe(e-Math.PI/2);return{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}}generateTicks({primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:a}){const{scale:o,interval:{minSpacing:r,maxSpacing:l},label:{parallel:c,rotation:h,fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g}}=this,f=e!==void 0,{defaultRotation:m,configuredRotation:v,parallelFlipFlag:y,regularFlipFlag:x}=lg({rotation:h,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),b=v+m,S=new sn,{maxTickCount:k}=this.estimateTickCount({minSpacing:r,maxSpacing:l}),T=!(zt.is(o)||Cs.is(o))||isNaN(k)?10:k;let I=dx(c,v,0,a,x);const N=kF(c,v,a,y),C=Pr({fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g}),E={fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g,textBaseline:N,textAlign:I};let O={rawTicks:[],fractionDigits:0,ticks:[],labelCount:0},P=0,w=0,R=!0,G=!1;for(;R&&P<=T&&!G;){w=0,I=dx(c,v,0,a,x);const U=this.getTickStrategies({secondaryAxis:f,index:P});for(const V of U){({tickData:O,index:P,autoRotation:w,terminate:G}=V({index:P,tickData:O,textProps:E,labelOverlap:R,terminate:G,primaryTickCount:e}));const X=v!==0||w!==0,j=b+w;I=dx(c,v,w,a,x),R=this.label.avoidCollisions?this.checkLabelOverlap(j,X,S,O.ticks,n,{font:C}):!1}}const z=m+v+w;return!f&&O.rawTicks.length>0&&(e=O.rawTicks.length),{tickData:O,primaryTickCount:e,combinedRotation:z,textBaseline:N,textAlign:I}}getTickStrategies({index:e,secondaryAxis:i}){const{scale:s,label:n}=this,{minSpacing:a}=this.interval,o=zt.is(s)||Cs.is(s),r=n.enabled&&n.avoidCollisions,l=!o&&e!==0&&r,c=n.autoRotate===!0&&n.rotation===void 0,h=[];let u;this.interval.values?u=3:i?u=1:l?u=2:u=0;const d=({index:p,tickData:g,primaryTickCount:f,terminate:m})=>this.createTickData(u,p,g,m,f);if(h.push(d),!o&&!isNaN(a)){const p=({index:g,tickData:f,primaryTickCount:m,terminate:v})=>this.createTickData(2,g,f,v,m);h.push(p)}if(!r)return h;if(n.autoWrap){const p=({index:g,tickData:f,textProps:m})=>this.wrapLabels(f,g,m);h.push(p)}else if(c){const p=({index:g,tickData:f,labelOverlap:m,terminate:v})=>({index:g,tickData:f,autoRotation:this.getAutoRotation(m),terminate:v});h.push(p)}return h}createTickData(e,i,s,n,a){const{scale:o}=this,{step:r,values:l,minSpacing:c,maxSpacing:h}=this.interval,{maxTickCount:u,minTickCount:d,defaultTickCount:p}=this.estimateTickCount({minSpacing:c,maxSpacing:h}),g=zt.is(o)||Cs.is(o),f=!g||isNaN(u)?10:u;let m=g?Math.max(p-i,d):u;const v=r===void 0&&l===void 0&&m>d&&(g||e===2);let y=!0;for(;y&&i<=f;){const b=s.rawTicks;m=g?Math.max(p-i,d):u;const{rawTicks:S,fractionDigits:k,ticks:D,labelCount:T}=this.getTicks({tickGenerationType:e,previousTicks:b,tickCount:m,minTickCount:d,maxTickCount:u,primaryTickCount:a});s.rawTicks=S,s.fractionDigits=k,s.ticks=D,s.labelCount=T,y=v?dI(S,b):!1,i++}return n||(n=r!==void 0||l!==void 0),{tickData:s,index:i,autoRotation:0,terminate:n}}checkLabelOverlap(e,i,s,n,a,o){sn.updateTransformMatrix(s,1,1,e,0,0);const r=this.createLabelData(n,a,o,s),l=_F(this.label.minSpacing,i);return OF(r,l)}createLabelData(e,i,s,n){const a=[];for(const{tickLabel:o,translationY:r}of e){if(!o)continue;const{width:l,height:c}=bs.measureLines(o,s),h=new ot(i,r,l,c),u=DF(o,h,i,r,n);a.push(u)}return a}getAutoRotation(e){var i;return e?oe(Fi((i=this.label.autoRotateAngle)!=null?i:0)):0}getTicks({tickGenerationType:e,previousTicks:i,tickCount:s,minTickCount:n,maxTickCount:a,primaryTickCount:o}){var r;const{range:l,scale:c,visibleRange:h}=this;let u;switch(e){case 3:if(u=this.interval.values,zt.is(c)){const[b,S]=Ls(c.getDomain().map(Number));u=u.filter(k=>k>=b&&k<=S).sort((k,D)=>k-D)}break;case 1:zt.is(c)?u=this.updateSecondaryAxisTicks(o):u=this.createTicks(s,n,a);break;case 2:u=this.filterTicks(i,s);break;default:u=this.createTicks(s,n,a);break}const d=u.reduce((b,S)=>Math.max(b,Bp(S)),0),p=((r=c.bandwidth)!=null?r:0)/2,g=[];let f=0;const m=new Map,v=Math.max(0,Math.floor(h[0]*u.length)),y=Math.min(u.length,Math.ceil(h[1]*u.length)),x=u.slice(v,y);this.onFormatChange(x,d,u,this.label.format);for(let b=0;b<x.length;b++){const S=x[b],k=c.convert(S)+p;if(l.length>0&&!this.inRange(k,.001))continue;const D=this.formatTick(S,d,v+b);let T=D;if(m.has(T)){const I=m.get(T);m.set(T,I+1),T=`${T}_${I}`}else m.set(T,1);g.push({tick:S,tickId:T,tickLabel:D,translationY:Math.floor(k)}),!(D===""||D==null)&&f++}return{rawTicks:u,fractionDigits:d,ticks:g,labelCount:f}}filterTicks(e,i){const{minSpacing:s,maxSpacing:n}=this.interval,o=!isNaN(s)||!isNaN(n)?Math.ceil(e.length/i):2;return e.filter((r,l)=>l%o===0)}createTicks(e,i,s){var n,a;const{scale:o}=this;return e&&(zt.is(o)||Cs.is(o))&&(typeof e=="number"?(o.tickCount=e,o.minTickCount=i??0,o.maxTickCount=s??1/0):o instanceof Mu&&this.setTickInterval(e)),(a=(n=o.ticks)==null?void 0:n.call(o))!=null?a:[]}estimateTickCount({minSpacing:e,maxSpacing:i}){const{minRect:s,label:{avoidCollisions:n}}=this;if(!n)return{minTickCount:zt.defaultMaxTickCount,maxTickCount:zt.defaultMaxTickCount,defaultTickCount:zt.defaultMaxTickCount};const a=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,a/zt.defaultMaxTickCount);let r=!isNaN(i);isNaN(e)&&(e=o),isNaN(i)&&(i=a),e>i&&(e===o?e=i:i=e);let l=1;s&&(l=this.direction==="x"?s.width:s.height),r&&(r=l<o);const c=St(1,Math.floor(a/e),r?Math.min(Math.floor(a/l),100):100),h=Math.min(c,Math.ceil(a/i)),u=St(h,zt.defaultTickCount,c);return{minTickCount:h,maxTickCount:c,defaultTickCount:u}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:s}){var n;const a=this.label.getSideFlag(),o=this.isAnySeriesActive();(n=this.crossLines)==null||n.forEach(r=>{var l;r.sideFlag=-a,r.direction=e===-Math.PI/2?"x":"y",r instanceof ug&&(r.label.parallel=(l=r.label.parallel)!=null?l:this.label.parallel),r.parallelFlipRotation=i,r.regularFlipRotation=s,r.update(o)})}updateTickLines(){const{tick:e,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=e.width,n.stroke=e.stroke,n.x1=s*this.getTickSize(),n.x2=0})}calculateAvailableRange(){return Jh(this.range)}calculateRangeWithBleed(){const e=1/Jh(this.visibleRange);return Av(this.calculateAvailableRange()*e,2)}calculateDomain(){const i=this.boundSeries.filter(s=>this.includeInvisibleDomains||s.isEnabled()).flatMap(s=>s.getDomain(this.direction));this.setDomain(i)}getAxisTransform(){return{rotation:Fi(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:e,axisGroup:i,gridGroup:s,translation:n,gridLineGroupSelection:a,gridPadding:o,gridLength:r}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),h=Math.floor(n.x),u=Math.floor(n.y);e.setProperties({rotation:l,translationX:h,translationY:u}),s.setProperties({rotation:l,translationX:h,translationY:u}),i.datum=this.getAxisTransform(),a.each(d=>{d.x1=o,d.x2=-c*r+o})}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,i,s){this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?i:[],n=>n.append(new He),n=>n.tickId),this.tickLineGroupSelection.update(i,n=>n.appendChild(new He),n=>n.tickId),this.tickLabelGroupSelection.update(i.map(n=>this.getTickLabelProps(n,s)),n=>n.appendChild(new wt),n=>n.tickId)}updateAxisLine(){const{line:e}=this,i=e.enabled?e.width:0;this.lineNode.setProperties({stroke:e.stroke,strokeWidth:i})}updateGridLines(e){const{gridLine:{style:i,width:s},gridPadding:n,gridLength:a}=this;a===0||i.length===0||this.gridLineGroupSelection.each((o,r,l)=>{const{stroke:c,lineDash:h}=i[l%i.length];o.setProperties({x1:n,x2:-e*a+n,fill:void 0,stroke:c,strokeWidth:s,lineDash:h})})}updateLabels(){const{label:e}=this;e.enabled&&this.tickLabelGroupSelection.each((i,s)=>{i.setProperties(s,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(e,i,s){const{parallel:n,maxWidth:a,maxHeight:o}=this.label;let r=this.maxThickness,l=Math.round(this.calculateAvailableRange()/e.labelCount);return n&&([r,l]=[l,r]),e.ticks.forEach(c=>{c.tickLabel=wt.wrap(c.tickLabel,a??r,o??l,s,"hyphenate")}),{tickData:e,index:i,autoRotation:0,terminate:!0}}updateTitle(e){const{rotation:i,title:s,_titleCaption:n,lineNode:a,tickLineGroup:o,tickLabelGroup:r}=this;let l=0;if(s.enabled&&e.anyTickVisible){const c=ut.computeBBox([o,r,a]),h=i===0?c.width:c.height;l+=h+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(n,{spacing:l})}formatTick(e,i,s){return String(this.getFormatter(s,!0)(e,i))}formatDatum(e){return String(this.getFormatter()(e))}getFormatter(e=0,i){const{label:s,labelFormatter:n,datumFormatter:a,moduleCtx:{callbackCache:o}}=this;return s.formatter?(r,l)=>{var c;return(c=o.call(s.formatter,{value:r,index:e,fractionDigits:l}))!=null?c:r}:!i&&a?r=>{var l;return(l=o.call(a,r))!=null?l:String(r)}:n?r=>{var l;return(l=o.call(n,r))!=null?l:String(r)}:r=>String(r)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,i,s,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new ot(e,i,s,n))}clipGrid(e,i,s,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new ot(e,i,s,n))}calculatePadding(e,i){const s=Math.abs(this.reverse?i:e)*.01;return[s,s]}getTitleFormatterParams(){var e;const i=this.boundSeries.reduce((s,n)=>{const a=n.getKeys(this.direction),o=n.getNames(this.direction);for(let r=0;r<a.length;r++)s.push({key:a[r],name:o[r]});return s},[]);return{direction:this.direction,boundSeries:i,defaultValue:(e=this.title)==null?void 0:e.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return B({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return(e=this.axisContext)!=null||(this.axisContext=this.createAxisContext()),K(B({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){const{scale:e}=this;return{axisId:this.id,direction:this.direction,continuous:zt.is(e)||Cs.is(e),keys:()=>this.boundSeries.flatMap(i=>i.getKeys(this.direction)),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(a=>{i.indexOf(a)<0&&i.push(a)}),i),[]),scaleValueFormatter:i=>{var s;return i?(s=e.tickFormat)==null?void 0:s.call(e,{specifier:i}):this.getFormatter()},scaleBandwidth:()=>{var i;return(i=e.bandwidth)!=null?i:0},scaleDomain:()=>{var i;return(i=e.getDomain)==null?void 0:i.call(e)},scaleConvert:i=>e.convert(i),scaleInvert:Cs.is(e)?i=>{var s;return(s=e.invertNearest)==null?void 0:s.call(e,i)}:i=>{var s;return(s=e.invert)==null?void 0:s.call(e,i)},scaleInvertNearest:i=>{var s;return(s=e.invertNearest)==null?void 0:s.call(e,i)},attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s)}}animateReadyUpdate(e){const{animationManager:i}=this.moduleCtx,s=Bx(this),n=_I(s);xe(this.id,"axis-group",i,[this.axisGroup],n.group),xe(this.id,"line",i,[this.lineNode],n.line),xe(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(a,o)=>o.tickId,e),xe(this.id,"tick-labels",i,[this.tickLabelGroupSelection],n.label,(a,o)=>o.tickId,e)}resetSelectionNodes(){const{gridLineGroupSelection:e,tickLineGroupSelection:i,tickLabelGroupSelection:s,lineNode:n}=this,a=Bx(this);Ce([this.axisGroup],kI()),Ce([e,i],DI(a)),Ce([s],II()),Ce([n],AI())}calculateUpdateDiff(e,i){const s=new Set,n=new Set,a={},o=Math.max(e.length,i.ticks.length);for(let r=0;r<o;r++){const l=i.ticks[r],c=e[r],h=l?.tickId;a[h??c]=l,c!==h&&(n.has(h)?n.delete(h):h&&s.add(h),s.has(c)?s.delete(c):c&&n.add(c))}return{changed:s.size>0||n.size>0,added:s,removed:n}}isReversed(){return this.reverse}},Wn.defaultTickMinSpacing=50,_([A(pt)],Wn.prototype,"nice",2),_([A(pt)],Wn.prototype,"reverse",2),_([A(Zv)],Wn.prototype,"keys",2),_([A(rt)],Wn.prototype,"interval",2),_([A(pt)],Wn.prototype,"disableZoom",2),_([A(rt,{optional:!0})],Wn.prototype,"title",2),_([Ui((t,e,i)=>t.onGridLengthChange(e,i))],Wn.prototype,"gridLength",2),Sg=Wn}}),Mg,BF=L({"packages/ag-charts-community/src/chart/axis/cartesianAxisLabel.ts"(){"use strict";gt(),xg(),Mg=class extends Se{constructor(){super(...arguments),this.autoRotateAngle=335}},_([A(pt,{optional:!0})],Mg.prototype,"autoRotate",2),_([A(Ma)],Mg.prototype,"autoRotateAngle",2)}}),_g,Hr,_c=L({"packages/ag-charts-community/src/chart/axis/cartesianAxis.ts"(){"use strict";gt(),de(),nx(),tI(),Fx(),BF(),_g=class Bw extends Sg{constructor(){super(...arguments),this.thickness=0}static is(e){return e instanceof Bw}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e,i){return this.updateDirection(),super.update(e,i)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return K(B({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){xD(e,ug)}createLabel(){return new Mg}},_([A(q)],_g.prototype,"thickness",2),_([A(Zp)],_g.prototype,"position",2),Hr=_g}}),La,Ru=L({"packages/ag-charts-community/src/chart/axis/categoryAxis.ts"(){"use strict";Tr(),gt(),_c(),La=class extends Hr{constructor(t,e=new Sa){super(t,e),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const s of t){const n=s instanceof Date?s.getTime():s;i.has(n)||(i.add(n),e.push(s))}return{domain:e,clipped:!1}}calculateDomain(){var t;if(!this._paddingOverrideEnabled){let e=1/0,i=-1/0;for(const s of this.boundSeries){const n=(t=s.getBandScalePadding)==null?void 0:t.call(s);n!=null&&(e=Math.min(e,n.inner),i=Math.max(i,n.outer))}this.scale.paddingInner=Number.isFinite(e)?e:0,this.scale.paddingOuter=Number.isFinite(i)?i:0}return super.calculateDomain()}},La.className="CategoryAxis",La.type="category",_([A(Rt)],La.prototype,"groupPaddingInner",2)}});function FF(t,e=!0){const i=new zx;let s=0;return e&&t.forEach(n=>s=Math.max(s,n.labels.length)),t.forEach(n=>{if(e)for(;n.labels.length<s;)n.labels.unshift("");zF(i,n)}),i}function zF(t,e){const i=e.labels.slice().reverse(),s=i.length-1;i.forEach((n,a)=>{const o=t.children,r=o.find(c=>c.label===n),l=a!==s;if(r&&l)t=r;else{const c=new zx(n,t);c.number=o.length,o.push(c),l&&(t=c)}})}function GF(t,e,i){const s=e.number-t.number,n=i/s;e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function VF(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function UF(t){const e=t.children;if(e){let i=0,s=0;for(let n=e.length-1;n>=0;n--){const a=e[n];a.prelim+=i,a.mod+=i,s+=a.change,i+=a.shift+s}}}function HF(t,e,i){const s=t.getLeftSibling();if(s){let n=t,a=t,o=s,r=a.getLeftmostSibling(),l=a.mod,c=n.mod,h=o.mod,u=r.mod;for(;o.nextRight()&&a.nextLeft();){o=o.nextRight(),a=a.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=t;const d=o.prelim+h-(a.prelim+l)+i;d>0&&(GF(VF(o,t,e),t,d),l+=d,c+=d),h+=o.mod,l+=a.mod,u+=r.mod,c+=n.mod}o.nextRight()&&!n.nextRight()?(n.thread=o.nextRight(),n.mod+=h-c):(a.nextLeft()&&!r.nextLeft()&&(r.thread=a.nextLeft(),r.mod+=l-u),e=t)}return e}function NI(t,e){const i=t.children;if(i.length){let s=i[0];i.forEach(o=>{NI(o,e),s=HF(o,s,e)}),UF(t);const n=(i[0].prelim+i.at(-1).prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const s=t.getLeftSibling();t.prelim=s?s.prelim+e:0}}function OI(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach(s=>OI(s,e+t.mod,i))}function CI(t){const e=t.children;let i=0;e.forEach(s=>{CI(s),s.children.length?i+=s.leafCount:i++}),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function WF(t){const e=new EI;return NI(t,1),OI(t,-t.prelim,e),CI(t),e}var zx,Gx,EI,YF=L({"packages/ag-charts-community/src/chart/axis/tree.ts"(){"use strict";zx=class{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}},Gx=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:s}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}},EI=class{constructor(){this.dimensions=new Gx,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,e=>({x:e.x,y:e.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,s=0,n=!1){const a=this.leafCount-1,o=this.depth,r=this.dimensions;let l=1,c=1;if(t>0&&a){const p=(r.right-r.left)/a;l=t/a/p,n&&(l=-l)}if(e>0&&o){const p=(r.bottom-r.top)/o;c=e/o/p}const h=new Gx;this.nodes.forEach(p=>{p.screenX=p.x*l,p.screenY=p.y*c,h.update(p,g=>({x:g.screenX,y:g.screenY}))});const u=-h.left,d=-h.top;this.nodes.forEach(p=>{p.screenX+=u+i,p.screenY+=d+s})}}}}),Vx,Ta,kg=L({"packages/ag-charts-community/src/chart/axis/groupedCategoryAxis.ts"(){"use strict";Tr(),Mt(),Nv(),Io(),xc(),hi(),zi(),Ve(),Ct(),gt(),de(),Es(),xg(),SI(),_c(),YF(),Vx=class extends Se{constructor(){super(...arguments),this.grid=!1}},_([A(pt)],Vx.prototype,"grid",2),Ta=class extends Hr{constructor(t){const e=new Sa;e.paddingOuter=.1,e.paddingInner=e.paddingOuter*2,super(t,e),this.tickScale=new Sa,this.line=new Mc,this.label=new Vx,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:i,tickLabelGroup:s,gridLineGroup:n,tickScale:a}=this;a.paddingInner=1,a.paddingOuter=0,this.gridLineSelection=pe.select(n,He),this.axisLineSelection=pe.select(i,He),this.separatorSelection=pe.select(i,He),this.labelSelection=pe.select(s,wt)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],a=t[0]-n;this.tickScale.range=i.range=[a,a+s],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+((t=e.bandwidth)!=null?t:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return this.label.fontSize*1.5}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){var t;const{direction:e}=this;let i=null;const s=this.boundSeries.filter(a=>a.visible).flatMap(a=>{if(e==="y"||i)return a.getDomain(e);if(i===null){const o=a.getDomain(e);return i=ps(o[0]),o}return[]});this.setDomain((t=Vn(s))!=null?t:tg(s));const{domain:n}=this.dataDomain;this.tickTreeLayout=WF(FF(n)),this.tickScale.domain=n.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((i,s)=>{i.setProperties(s)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this,i=1e-7;this.separatorSelection.update(t).each((n,a)=>{n.x1=a.x1,n.x2=a.x2,n.y1=a.y,n.y2=a.y,n.visible=a.y>=e[0]-i&&a.y<=e[1]+i,n.stroke=this.tick.stroke,n.fill=void 0,n.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((i,s)=>{i.setProperties(K(B({},s),{stroke:this.line.stroke,strokeWidth:this.line.width})),i.x1=s.x,i.x2=s.x,i.y1=s.y1,i.y2=s.y2,i.strokeWidth=this.line.width,i.stroke=this.line.stroke})}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:s,tickScale:n}=this,a=n.ticks(),o=i.getSideFlag(),r=this.gridLineSelection.update(t?a:[]);if(t){const{width:l,style:c}=e,h=c.length;r.each((u,d,p)=>{const g=Math.round(n.convert(d));u.x1=0,u.x2=-o*t,u.y1=g,u.y2=g,u.visible=g>=s[0]&&g<=s[1];const{stroke:f,lineDash:m}=c[p%h];u.stroke=f,u.strokeWidth=l,u.lineDash=m,u.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:a,title:{formatter:o=$=>$.defaultValue}={}}=this,r=t.range[0],l=t.range[1],h=Math.abs(l-r)/t.domain.length||0,u=Math.ceil(e.fontSize/h),d=Fi(this.rotation),p=Math.abs(Math.cos(d))<1e-8,g=e.getSideFlag(),f=this.lineHeight,m=this.tickTreeLayout,v=t.ticks(),y=m?m.nodes:[],x=m?m.depth>1:!1,{defaultRotation:b,configuredRotation:S,parallelFlipFlag:k}=lg({rotation:e.rotation,parallel:i,regularFlipRotation:oe(d-Math.PI/2),parallelFlipRotation:oe(d)}),D=[],T=$=>({fill:$.fill,fontFamily:$.fontFamily,fontSize:$.fontSize,fontStyle:$.fontStyle,fontWeight:$.fontWeight,rotation:$.rotation,rotationCenterX:$.rotationCenterX,rotationCenterY:$.rotationCenterY,text:$.text,textAlign:$.textAlign,textBaseline:$.textBaseline,translationX:$.translationX,translationY:$.translationY,visible:$.visible,x:$.x,y:$.y}),I=new Map;let N=0;const C=new wt,E=($,Q)=>{var J;if(C.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:k===-1?"bottom":"hanging",translationX:$.screenY-e.fontSize*.25,translationY:$.screenX}),Q===0){if(!(a?.enabled&&v.length>0))return!1;const ht=s.call(o,this.getTitleFormatterParams());C.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:ht,textBaseline:"hanging",translationX:$.screenY-e.fontSize*.25,translationY:$.screenX})}else if(Q%u===0){if(!($.screenX>=n[0]&&$.screenX<=n[1]))return!1;e.formatter?C.text=(J=s.call(e.formatter,{value:String($.label),index:Q}))!=null?J:String($.label):C.text=String($.label)}else return!1;return!0};y.forEach(($,Q)=>{if(!E($,Q))return;const it=C.computeTransformedBBox();if(!it)return;I.set(Q,it),!$.children.length&&it.width>N&&(N=it.width)});const O=g*e.padding,P=this.label.grid,w=[];y.forEach(($,Q)=>{let J=E($,Q);const it=Q;C.x=O,C.rotationCenterX=O;const ht=!$.children.length;if(ht)C.rotation=S,C.textAlign="end",C.textBaseline="middle";else{C.translationX-=N-f+this.label.padding;const dt=$.leafCount*h,lt=I.get(it);lt&&lt.width>dt?(J=!1,I.delete(it)):p?C.rotation=b:C.rotation=-Math.PI/2}if($.parent&&x){const dt=ht?$.screenX-h/2:$.screenX-$.leafCount*h/2;if(ht)($.number!==$.children.length-1||P)&&w.push({y:dt,x1:0,x2:-N-this.label.padding*2});else{const lt=-N-this.label.padding*2+$.screenY;w.push({y:dt,x1:lt+f,x2:lt})}}let vt;if(J){const dt=C.computeTransformedBBox();dt&&I.set(Q,dt),vt=K(B({},T(C)),{visible:J})}else I.delete(Q),vt={visible:J};D.push(vt)});let R=0;w.forEach($=>R=Math.min(R,$.x2)),w.push({y:Math.max(r,l),x1:0,x2:R});const G=[],z=[],U=1e-7;w.forEach($=>{if($.y>=n[0]-U&&$.y<=n[1]+U){const{x1:Q,x2:J,y:it}=$,ht=new ot(Math.min(Q,J),it,Math.abs(Q-J),0);z.push(ht),G.push({x1:Q,x2:J,y:it})}});const V=[],X=[],j=m?m.depth+1:1;for(let $=0;$<j;$++){const Q=v.length>0&&($===0||P&&x),J=$>0?-N-this.label.padding*2-($-1)*f:0,it=new ot(J,Math.min(...n),0,Math.abs(n[1]-n[0]));X.push(it),V.push({x:J,y1:n[0],y2:n[1],visible:Q})}const tt=$=>{const Q=new sn,{rotation:J,translationX:it,translationY:ht,rotationCenterX:vt,rotationCenterY:dt}=this.getAxisTransform();return sn.updateTransformMatrix(Q,1,1,J,it,ht,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:vt,rotationCenterY:dt}),Q.transformBBox($)},ct=ot.merge([...I.values(),...z,...X]);return{bbox:tt(ct),tickLabelLayout:D,separatorLayout:G,axisLineLayout:V}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}},Ta.className="GroupedCategoryAxis",Ta.type="grouped-category",_([A(Et,{optional:!0})],Ta.prototype,"labelColor",2)}}),kc,Ux,Na,Oa=L({"packages/ag-charts-community/src/module/module.ts"(){"use strict";kc=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},Ux=class{constructor(){this.modules=[],this.dependencies=new Map,this.dependents=new Map}register(...t){for(const e of t){this.registerDependencies(e);const i=this.modules.find(s=>e.type===s.type&&e.optionsKey===s.optionsKey&&e.identifier===s.identifier);if(i){if(e.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,e)}}else this.modules.push(e)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){const{dependents:e}=this,i=new Set;let s=0;const n=3,a=this.modules.filter(o=>t.includes(o.type));do{for(const o of a)if(!(i.has(o.optionsKey)||e.has(o.optionsKey))){yield o,i.add(o.optionsKey);for(const[r,l]of e.entries())l.delete(o.optionsKey),l.size===0&&e.delete(r)}s++}while(i.size<a.length&&s<n);if(e.size>0)throw new Error(`Could not resolve module dependencies: [${[...e.keys()]}]`)}registerDependencies(t){var e;if(!(t.dependencies==null||t.dependencies.length===0)){for(const i of t.dependencies){const s=(e=this.dependencies.get(i))!=null?e:new Set;s.add(t.optionsKey),this.dependencies.set(i,s)}this.dependents.set(t.optionsKey,new Set(t.dependencies))}}},Na=new Ux}});function KF(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}var jF=L({"packages/ag-charts-community/src/util/async.ts"(){"use strict"}}),RI,XF=L({"packages/ag-charts-community/src/util/mutex.ts"(){"use strict";yt(),RI=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(i=>Z.errorOnce(i))})}acquireImmediately(t){return F(this,null,function*(){return this.available?(yield this.acquire(t),!0):!1})}waitForClearAcquireQueue(){return F(this,null,function*(){return this.acquire(()=>F(this,null,function*(){}))})}dispatchNext(){return F(this,null,function*(){var t,e;this.available=!1;let[i,s]=(t=this.acquireQueue.shift())!=null?t:[];for(;i;){try{yield i(),s?.()}catch(n){Z.error("mutex callback error",n),s?.()}[i,s]=(e=this.acquireQueue.shift())!=null?e:[]}this.available=!0})}}}}),Hx,wI=L({"packages/ag-charts-community/src/util/observable.ts"(){"use strict";Hx=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if(typeof e!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;(i=this.eventListeners.get(t))==null||i.delete(e),this.eventListeners.size===0&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;(e=this.eventListeners.get(t.type))==null||e.forEach(i=>i(t))}}}}),Ca,Wx=L({"packages/ag-charts-community/src/util/padding.ts"(){"use strict";ne(),gt(),Ca=class extends xt{constructor(t=0,e=t,i=t,s=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}},_([A(q)],Ca.prototype,"top",2),_([A(q)],Ca.prototype,"right",2),_([A(q)],Ca.prototype,"bottom",2),_([A(q)],Ca.prototype,"left",2)}});function $F(t){return PI((e,i)=>requestAnimationFrame(e),t)}function ZF(t){return PI((e,i=0)=>setTimeout(e,i),t)}function PI(t,e){let i=0,s=!1,n,a;const o=()=>s,r=()=>{s=!1,a?.(),a=void 0,n=void 0,i>0&&t(l)},l=()=>{const c=i;i=0,s=!0;const h=e({count:c});if(!h){r();return}h.then(r,r)};return{schedule(c){i===0&&!o()&&t(l,c),i++},await(){return F(this,null,function*(){if(o())for(n==null&&(n=new Promise(c=>{a=c}));o();)yield n})}}}var qF=L({"packages/ag-charts-community/src/util/render.ts"(){"use strict"}}),Dg,Yx=L({"packages/ag-charts-community/src/version.ts"(){"use strict";Dg="10.0.2"}}),Kx,BI=L({"packages/ag-charts-community/src/api/state/memento.ts"(){"use strict";yt(),Ct(),Kx=class{constructor(t){this.version=t.split("-")[0]}save(...t){const e={version:this.version};for(const i of Object.values(t))e[i.mementoOriginatorKey]=this.encode(i,i.createMemento());return e}restore(t,...e){if(typeof t!="object"){Z.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){Z.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){Z.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const i of e){if(!(i.mementoOriginatorKey in t))continue;const s=this.decode(i,t[i.mementoOriginatorKey]);if(!i.guardMemento(s)){Z.warnOnce(`Could not restore [${i.mementoOriginatorKey}] data, value was invalid, ignoring.`,s);return}i.restoreMemento(this.version,t.version,s)}}encode(t,e){try{return JSON.parse(JSON.stringify(e,this.encodeTypes))}catch(i){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${i}].`,{cause:i})}}decode(t,e){try{return JSON.parse(JSON.stringify(e),this.decodeTypes)}catch(i){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${i}].`,{cause:i})}}encodeTypes(t,e){return nu(this[t])?{__type:"date",value:String(this[t])}:e}decodeTypes(t,e){return Ts(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):e}}}}),FI,QF=L({"packages/ag-charts-community/src/api/state/stateManager.ts"(){"use strict";bi(),Yx(),BI(),FI=class{constructor(){this.caretaker=new Kx(Dg),this.state=new Map}setState(t,e){gs(this.state.get(t.mementoOriginatorKey),e)!=null&&(this.state.set(t.mementoOriginatorKey,e),this.restoreState(t))}restoreState(t){const{caretaker:e,state:i}=this;if(!i.has(t.mementoOriginatorKey))return;const s=i.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:s},t)}}}});function JF(){if(typeof navigator>"u")return!1;const t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(t==null)return!1;const[e,i]=t[1].split("_").map(Number);return e<16||e===16&&i<6}var tz=L({"packages/ag-charts-community/src/util/userAgent.ts"(){"use strict"}}),jx,Ig,Xx=L({"packages/ag-charts-community/src/scene/canvas/hdpiCanvas.ts"(){"use strict";Ee(),Ue(),Ye(),tz(),jx=class xk{constructor(e){this.enabled=!0,this.width=600,this.height=300;var i;const{width:s,height:n,pixelRatio:a,canvasConstructor:o}=e;this.pixelRatio=JF()?1:a??Un("devicePixelRatio"),this.element=(i=o?.())!=null?i:ui("canvas"),this.element.style.display="block",this.element.style.width=(s??this.width)+"px",this.element.style.height=(n??this.height)+"px",this.element.width=Math.round((s??this.width)*this.pixelRatio),this.element.height=Math.round((n??this.height)*this.pixelRatio),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(s??0,n??0),xk.debugContext(this.context)}static is(e){return e instanceof xk}drawImage(e,i=0,s=0){return e.drawImage(this.context.canvas,i,s)}toDataURL(e){return this.element.toDataURL(e)}resize(e,i){if(!(e>0&&i>0))return;const{element:s,context:n,pixelRatio:a}=this;s.width=Math.round(e*a),s.height=Math.round(i*a),n.setTransform(a,0,0,a,0,0),s.style.width=e+"px",s.style.height=i+"px",this.width=e,this.height=i}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}static debugContext(e){if(Xt.check("canvas")){const i=e.save.bind(e),s=e.restore.bind(e);let n=0;Object.assign(e,{save(){i(),n++},restore(){if(n===0)throw new Error("AG Charts - Unable to restore() past depth 0");s(),n--},verifyDepthZero(){if(n!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${n}`)}})}}},_([Ui(t=>t.onEnabledChange())],jx.prototype,"enabled",2),Ig=jx}}),zI,ez=L({"packages/ag-charts-community/src/scene/layersManager.ts"(){"use strict";BD(),Ee(),Xx(),zI=class Fw{constructor(e,i){this.canvas=e,this.markDirty=i,this.debug=Xt.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(e,i){var s,n;return PD([e.zIndex,...(s=e.zIndexSubOrder)!=null?s:[void 0,void 0],e.id],[i.zIndex,...(n=i.zIndexSubOrder)!=null?n:[void 0,void 0],i.id],RD)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(Fw.sortLayers).forEach(e)}resize(e,i){this.canvas.resize(e,i),this.layersMap.forEach(({canvas:s})=>s.resize(e,i))}addLayer(e){const{width:i,height:s,pixelRatio:n}=this.canvas,{zIndex:a=this.nextZIndex++,name:o,zIndexSubOrder:r,getComputedOpacity:l,getVisibility:c}=e,h=new Ig({width:i,height:s,pixelRatio:n}),u={id:this.nextLayerId++,name:o,canvas:h,zIndex:a,zIndexSubOrder:r,getComputedOpacity:l,getVisibility:c};return a>=this.nextZIndex&&(this.nextZIndex=a+1),this.layersMap.set(h,u),this.debug("Scene.addLayer() - layers",this.layersMap),u.canvas}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(e,i,s){const n=this.layersMap.get(e);n&&(n.zIndex=i,n.zIndexSubOrder=s,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}}}});function GI(t,e,i,s,n={}){if(!Xt.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:a=0,layersSkipped:o=0,nodesRendered:r=0,nodesSkipped:l=0}=s??{},c=performance.now(),h=e,{start:u}=h,d=se(h,["start"]),p=Object.entries(d).map(([S,k])=>HI(S,k)).filter(S=>S!=null).join(" + "),g=Object.entries(n).map(([S,k])=>`${S}: ${k}`).join(" ; "),f=Xt.check("scene:stats:verbose"),m=[`${HI("\u23F1\uFE0F",u,c)} (${p})`,`${g}`,`Layers: ${f?UI(a,o):t.size}`,f?`Nodes: ${UI(r,l)}`:null].filter(Os),v=new Map(m.map(S=>[S,wt.getTextSize(S,i.font)])),y=Math.max(...Array.from(v.values(),S=>S.width)),x=sz(v.values(),S=>S.height);i.save(),i.fillStyle="white",i.fillRect(0,0,y,x),i.fillStyle="black";let b=0;for(const[S,k]of v.entries())b+=k.height,i.fillText(S,2,b);i.restore()}function iz(t,e){t.save();for(const[i,s]of Object.entries(e)){const n=s.computeTransformedBBox();if(!n){Z.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(n.x,n.y,n.width,n.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,n.x,n.y,n.width),t.fillText(i,n.x,n.y,n.width)}t.restore()}function Ag(t){var e,i;return Xt.check(!0,"scene")?B(B({node:t,name:(e=t instanceof ut?t.name:null)!=null?e:t.id,dirty:va[t.dirty]},(i=t.parent)!=null&&i.isVirtual?{virtualParentDirty:va[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map(s=>Ag(s)).reduce((s,n)=>{let{name:a}=n;const{node:{visible:o,opacity:r,zIndex:l,zIndexSubOrder:c},node:h,virtualParent:u}=n;(!o||r<=0)&&(a=`(${a})`),h instanceof ut&&h.isLayer()&&(a=`*${a}*`);const d=[`${a??"<unknown>"}`,`z: ${l}`,c&&`zo: ${c.map(f=>typeof f=="function"?`${f()} (fn)`:f).join(" / ")}`,u&&"(virtual parent)"].filter(f=>!!f).join(" ");let p=d,g=1;for(;s[p]!=null&&g<100;)p=`${d} (${g++})`;return s[p]=n,s},{})):{}}function VI(t){var e;if(t.dirty===0)return{dirtyTree:{},paths:[]};const i=t.children.map(a=>VI(a)).filter(a=>a.paths.length>0),s=ut.is(t)&&(e=t.name)!=null?e:t.id,n=i.length?i.flatMap(a=>a.paths).map(a=>`${s}.${a}`):[s];return{dirtyTree:B({name:s,node:t,dirty:va[t.dirty]},i.map(a=>a.dirtyTree).filter(a=>a.dirty!=null).reduce((a,o)=>{var r;return a[(r=o.name)!=null?r:"<unknown>"]=o,a},{})),paths:n}}function UI(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function HI(t,e,i){const s=i!=null?i-e:e;return`${t}: ${Math.round(s*100)/100}ms`}function sz(t,e){let i=0;for(const s of t)i+=e(s);return i}var nz=L({"packages/ag-charts-community/src/scene/sceneDebug.ts"(){"use strict";Ee(),yt(),Ct(),be(),ae(),hi()}}),Lg,WI=L({"packages/ag-charts-community/src/scene/scene.ts"(){"use strict";Ee(),Ue(),en(),Xx(),be(),ez(),ae(),nz(),Lg=class{constructor({width:t,height:e,pixelRatio:i,domManager:s}){this.debug=Xt.create(!0,"scene"),this.id=wn(this),this.root=null,this.isDirty=!1,this.domManager=s;const n={width:t,height:e,pixelRatio:i};s&&(n.canvasConstructor=()=>s.addChild("canvas","scene-canvas")),this.canvas=new Ig(n),this.layersManager=new zI(this.canvas,()=>{this.isDirty=!0})}get width(){var t,e;return(e=(t=this.pendingSize)==null?void 0:t[0])!=null?e:this.canvas.width}get height(){var t,e;return(e=(t=this.pendingSize)==null?void 0:t[1])!=null?e:this.canvas.height}setContainer(t){var e;if((s=>typeof s.tagName<"u")(t)){const{element:s}=this.canvas;(e=s.parentElement)==null||e.removeChild(s),t.appendChild(s)}else this.domManager=t,this.domManager.addChild("canvas","scene-canvas",this.canvas.element);return this}setRoot(t){var e;return this.root===t?this:(this.isDirty=!0,(e=this.root)==null||e._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager)),this)}attachNode(t,e){var i,s;if(!e)return(i=this.root)==null||i.appendChild(t),()=>this.removeChild(t);const n=(s=this.root)==null?void 0:s.children.find(a=>a instanceof ut&&a.name===e);if(!n)throw new Error("AG Charts - Unrecognized root group name: "+e);return n.appendChild(t),()=>n.removeChild(t)}appendChild(t){var e;return(e=this.root)==null||e.appendChild(t),this}removeChild(t){var e;return(e=this.root)==null||e.removeChild(t),this}download(t,e){var i;iI(this.canvas.toDataURL(e),(i=t?.trim())!=null?i:"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)?(this.pendingSize=[t,e],this.isDirty=!0,!0):!1}render(t){return F(this,null,function*(){var e,i;const{debugSplitTimes:s={start:performance.now()},extraDebugStats:n}=t??{},{canvas:a,canvas:{context:o}={},root:r,pendingSize:l}=this;if(!o)return;const c=performance.now();if(l&&(this.layersManager.resize(...l),this.pendingSize=void 0),r&&!r.visible){this.isDirty=!1;return}if(r&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:va[r.dirty],tree:Ag(r)}),GI(this.layersManager,s,o,void 0,n);return}const h={ctx:o,devicePixelRatio:(e=this.canvas.pixelRatio)!=null?e:1,forceRender:!0,resized:!!l,debugNodes:{}};Xt.check("scene:stats:verbose")&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let u=!1;if((!r||r.dirty>=1)&&(u=!0,a.clear()),r&&Xt.check("scene:dirtyTree")){const{dirtyTree:d,paths:p}=VI(r);Xt.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:d,paths:p})}if(r&&u&&(this.debug("Scene.render() - before",{redrawType:va[r.dirty],canvasCleared:u,tree:Ag(r)}),r.visible&&(r.preRender(),o.save(),r.render(h),o.restore())),s["\u270D\uFE0F"]=performance.now()-c,this.layersManager.size&&u){const d=performance.now();o.save(),o.resetTransform(),this.layersManager.forEach(p=>{p.canvas.enabled&&p.getVisibility()&&(o.globalAlpha=p.getComputedOpacity(),p.canvas.drawImage(o))}),o.restore(),s["\u26D9"]=performance.now()-d}(i=o.verifyDepthZero)==null||i.call(o),this.isDirty=!1,GI(this.layersManager,s,o,h.stats,n),iz(o,h.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:va[r.dirty],tree:Ag(r),canvasCleared:u})})}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}},Lg.className="Scene"}}),YI,az=L({"packages/ag-charts-community/src/util/callbackCache.ts"(){"use strict";yt(),YI=class{constructor(){this.cache=new WeakMap}call(t,...e){let i,s=this.cache.get(t);const n=()=>{try{const a=t(...e);return s&&i!=null&&s.set(i,a),a}catch(a){Z.warnOnce("User callback errored, ignoring",a);return}};try{i=JSON.stringify(e)}catch{return n()}return s==null&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):n()}invalidateCache(){this.cache=new WeakMap}}}}),KI,oz=L({"packages/ag-charts-community/src/chart/annotation/annotationManager.ts"(){"use strict";Ct(),cn(),KI=class extends Rs{constructor(t){super(),this.annotationRoot=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return ke(t)}restoreMemento(t,e,i){this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:i})}updateData(t){this.annotations=t??[]}attachNode(t){return this.annotationRoot.append(t),()=>{var e;return(e=this.annotationRoot)==null||e.removeChild(t),this}}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){var e;return(e=this.styles)==null?void 0:e[t]}}}}),jI,rz=L({"packages/ag-charts-community/src/chart/axis/axisManager.ts"(){"use strict";be(),ts(),jI=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new ut({name:"Axes-Grids",layer:!0,zIndex:1}),this.axisGroup=new ut({name:"Axes",layer:!0,zIndex:2}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup)}updateAxes(t,e){var i;for(const s of t)e.includes(s)||(s.detachAxis(this.axisGroup,this.axisGridGroup),s.destroy());for(const s of e)t?.includes(s)||s.attachAxis(this.axisGroup,this.axisGridGroup);this.axes.clear();for(const s of e){const n=s.createAxisContext();this.axes.has(n.direction)?(i=this.axes.get(n.direction))==null||i.push(n):this.axes.set(n.direction,[n])}}getAxisContext(t){var e;return[...(e=this.axes.get(t))!=null?e:[]]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}}}}),wu,XI=L({"packages/ag-charts-community/src/chart/data/dataService.ts"(){"use strict";Ee(),Zh(),Ao(),yt(),Ye(),wu=class extends Aa{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Xt.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){typeof t=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return zk(e=>this.fetch(e),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return zk((e,i)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:i})},t,{leading:!0,trailing:!0})}fetch(t){return F(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=yield this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(a){this.debug(`DataService - request failed | ${i}`),Z.errorOnce(`DataService - request failed | [${a}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(a=>a===i);if(n===-1||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(n+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")})}},_([Vi({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],wu.prototype,"dispatchThrottle",2),_([Vi({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],wu.prototype,"requestThrottle",2)}}),$I,lz=L({"packages/ag-charts-community/src/util/guardedElement.ts"(){"use strict";$I=class{constructor(t,e,i){this.element=t,this.topTabGuard=e,this.bottomTabGuard=i,this.destroyFns=[],this.guardTabIndex=0,this.element.tabIndex=-1,this.initEventListener(this.element,"blur",()=>this.onBlur()),this.initEventListener(this.element,"focus",()=>this.onFocus()),this.initEventListener(this.topTabGuard,"focus",s=>this.onTabStart(s,this.topTabGuard)),this.initEventListener(this.bottomTabGuard,"focus",s=>this.onTabStart(s,this.bottomTabGuard))}set tabIndex(t){t>=0&&(this.guardTabIndex=t),t>0?(this.topTabGuard.tabIndex=t,this.bottomTabGuard.style.display="none"):(this.topTabGuard.tabIndex=t,this.bottomTabGuard.tabIndex=t)}destroy(){for(const t of this.destroyFns)t();this.destroyFns.length=0}initEventListener(t,e,i){t.addEventListener(e,i),this.destroyFns.push(()=>t.removeEventListener(e,i))}onBlur(){this.element.tabIndex===-1&&(this.tabIndex=this.guardTabIndex,this.guardTarget=void 0,this.guessedDelta=void 0)}onFocus(){this.element.tabIndex===-1&&(this.tabIndex=-1)}onTabStart(t,e){if(e.tabIndex>0&&(this.guessedDelta=0,t.relatedTarget!=null&&"tabIndex"in t.relatedTarget)){const i=Number(t.relatedTarget.tabIndex);!isNaN(i)&&i>0&&(this.guessedDelta=i<e.tabIndex?1:-1)}this.guardTarget=e,this.element.focus()}getBrowserFocusDelta(){const{guessedDelta:t,guardTarget:e,topTabGuard:i,bottomTabGuard:s}=this;return t!==void 0?t:e===i?1:e===s?-1:0}}}}),ZI,cz=L({"packages/ag-charts-community/src/util/sizeMonitor.ts"(){"use strict";Ue(),ZI=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([e,i])=>this.observe(e,i)),this.queuedObserveRequests=[]};var t;typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(e=>{for(const{target:i,contentRect:{width:s,height:n}}of e){const a=this.elements.get(i);this.checkSize(a,i,s,n)}}),this.documentReady=Da("readyState")==="complete",this.documentReady||(t=Un())==null||t.addEventListener("load",this.onLoad))}destroy(){var t,e;(t=Un())==null||t.removeEventListener("load",this.onLoad),(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=null}checkSize(t,e,i,s){var n,a;t&&(i!==((n=t.size)==null?void 0:n.width)||s!==((a=t.size)==null?void 0:a.height))&&(t.size={width:i,height:s},t.cb(t.size,e))}observe(t,e){var i;if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):(i=this.resizeObserver)==null||i.observe(t);const s={cb:e};this.elements.set(t,s),this.checkSize(s,t,t.offsetWidth,t.offsetHeight)}unobserve(t){var e;(e=this.resizeObserver)==null||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}}}}),qI,hz=L({"packages/ag-charts-community/src/chart/dom/domLayout.html"(){qI='<div class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div class="ag-charts-canvas-center"><div class="ag-charts-canvas-container"><div class="ag-charts-tab-guard"></div><div class="ag-charts-canvas"></div><div class="ag-charts-canvas-proxy"></div><div class="ag-charts-tab-guard"></div><div class="ag-charts-canvas-overlay"></div></div></div></div>'}}),QI,uz=L({"packages/ag-charts-community/src/chart/dom/domStyles.css"(){QI=`.ag-charts-wrapper,
.ag-charts-wrapper:focus,
.ag-charts-wrapper:after,
.ag-charts-wrapper:before,
.ag-charts-wrapper *,
.ag-charts-wrapper *:focus,
.ag-charts-wrapper *:after,
.ag-charts-wrapper *:before{box-sizing:border-box;outline:none}.ag-charts-wrapper{position:relative}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,
.ag-charts-canvas{position:relative}.ag-charts-canvas-container > *,
.ag-charts-canvas > *{display:block}.ag-charts-canvas-proxy{opacity:0;position:absolute;top:0;left:0;pointer-events:none}.ag-charts-tab-guard{opacity:0;width:0px;height:0px}.ag-charts-canvas-overlay{pointer-events:none;position:absolute;top:0;left:0;right:0;bottom:0}.ag-charts-canvas-overlay > *{position:absolute;pointer-events:auto}.ag-charts-theme-default,
.ag-charts-theme-default-dark{--ag-charts-active-color:var(--ag-active-color,#2196f3);--ag-charts-background-color:var(--ag-background-color,#fff);--ag-charts-foreground-color:var(--ag-foreground-color,#181d1f);--ag-charts-border-color:var(--ag-border-color,#dddddd);--ag-charts-font-size:var(--ag-font-size,14px);--ag-charts-size:var(--ag-grid-size,8px);--ag-charts-border:var(--ag-charts-border-color) var(--ag-borders,solid 1px);--ag-charts-border-critical:var(--ag-borders-critical,solid 1px);--ag-charts-layer-context-menu:5;--ag-charts-layer-tooltip:4;--ag-charts-layer-toolbar:3;--ag-charts-layer-crosshair:2;--ag-charts-layer-annotations:1;--ag-charts-align:center;--ag-charts-justify:center;--ag-charts-axis-label-background-color:#474747;--ag-charts-axis-label-color:#ffffff;--ag-charts-toolbar-foreground-color:var(--ag-header-foreground-color,var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color:var(
        --ag-header-background-color,color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-foreground-color) 2%)
    );--ag-charts-toolbar-size:34px;--ag-charts-toolbar-size-small:24px;--ag-charts-toolbar-border:var(--ag-charts-border-critical,solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color:color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-active-color) 12%);--ag-charts-toolbar-focus-color:var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color:color-mix(in srgb,var(--ag-charts-background-color),var(--ag-charts-active-color) 24%);--ag-charts-toolbar-active-color:var(--ag-active-color,#5090dc);--ag-charts-toolbar-disabled-foreground-color:var(
        --ag-disabled-foreground-color,color-mix(in srgb,transparent,var(--ag-charts-toolbar-foreground-color) 50%)
    );--ag-charts-toolbar-disabled-background-color:color-mix(in srgb,var(--ag-charts-toolbar-background-color),var(--ag-charts-toolbar-foreground-color) 6%);--ag-charts-toolbar-gap:var(--ag-charts-size);--ag-charts-toolbar-font-size:14px;--ag-charts-toolbar-font-size-small:12px;--ag-charts-toolbar-button-padding:7px;--ag-charts-toolbar-button-padding-small:3px;--ag-charts-button-radius:var(--ag-border-radius,4px);--ag-charts-focus-border-color:var(--ag-input-focus-border-color,var(--ag-charts-active-color));--ag-charts-focus-border:solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow:var(
        --ag-input-focus-box-shadow,0 0 0 3px color-mix(in srgb,transparent,var(--ag-input-focus-border-color,var(--ag-charts-active-color)) 47%)
    );--ag-charts-icon-font-family:'agChartsDefault';--ag-charts-icon-font-weight:normal;--ag-charts-icon-font-color:color-mix(in srgb,transparent,var(--ag-charts-foreground-color),90%)}.ag-charts-theme-default-dark{--ag-charts-background-color:var(--ag-background-color,color-mix(in srgb,#fff,#182230 97%));--ag-charts-foreground-color:var(--ag-foreground-color,#fff);--ag-charts-border-color:var(--ag-border-color,rgba(255,255,255,0.16));--ag-charts-hover-color:var(
        --ag-row-hover-color,color-mix(in srgb,transparent,var(--ag-charts-active-color) 20%)
    );--ag-charts-axis-label-background-color:#9caebb;--ag-charts-axis-label-color:#000000;--ag-charts-toolbar-background-color:var(--ag-header-background-color,color-mix(in srgb,#fff,#182230 93%))}[class^='ag-charts-icon']{display:block;speak:none;speak:never;mask-size:contain;mask-repeat:no-repeat;background-color:currentColor}.ag-charts-icon-zoom-in{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDQuNWEuNzUuNzUgMCAwIDAtMS41IDB2Mi43NUg0LjVhLjc1Ljc1IDAgMCAwIDAgMS41aDIuNzV2Mi43NWEuNzUuNzUgMCAwIDAgMS41IDBWOC43NWgyLjc1YS43NS43NSAwIDAgMCAwLTEuNUg4Ljc1VjQuNVoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjc1IDhhLjc1Ljc1IDAgMCAxIC43NS0uNzVoN2EuNzUuNzUgMCAwIDEgMCAxLjVoLTdBLjc1Ljc1IDAgMCAxIDMuNzUgOFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-icon-reset{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00LjQxMiA0LjA1OCAyLjc1IDIuMzk2VjYuNzVoLjc0NGEuNzYuNzYgMCAwIDAgLjAxMiAwaDMuNTk4TDUuNDc4IDUuMTI1YTQuMTI1IDQuMTI1IDAgMCAxIDIuNTIzLS44NzUgMy43NSAzLjc1IDAgMSAxLTMuMTE5IDUuODMzLjc1Ljc1IDAgMCAwLTEuMjQ3LjgzNEE1LjI1IDUuMjUgMCAxIDAgOCAyLjc1aC0uMDAzYTUuNjI1IDUuNjI1IDAgMCAwLTMuNTg1IDEuMzA4WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-left{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4wMyA0LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZMNy41NiA4bDIuNDcgMi40N2EuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC0zLTNhLjc1Ljc1IDAgMCAxIDAtMS4wNmwzLTNhLjc1Ljc1IDAgMCAxIDEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-right{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljk3IDExLjUzYS43NS43NSAwIDAgMSAwLTEuMDZMOC40NCA4IDUuOTcgNS41M2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDMgM2EuNzUuNzUgMCAwIDEgMCAxLjA2bC0zIDNhLjc1Ljc1IDAgMCAxLTEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-start{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==)}.ag-charts-icon-pan-end{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+)}.ag-charts-icon-trend-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMi41IiBjeT0iOCIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxjaXJjbGUgY3g9IjEzLjUiIGN5PSI4IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTQgOGg4Ii8+PC9zdmc+)}.ag-charts-icon-horizontal-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4zODYgOC43NWEyLjUwMSAyLjUwMSAwIDAgMS00Ljc3MiAwSC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC44NjRhMi41MDEgMi41MDEgMCAwIDEgNC43NzIgMGg0Ljg2NGEuNzUuNzUgMCAwIDEgMCAxLjVoLTQuODY0Wk05IDhhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-vertical-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDUuNjE0YTIuNTAxIDIuNTAxIDAgMCAxIDAgNC43NzJ2NC44NjRhLjc1Ljc1IDAgMCAxLTEuNSAwdi00Ljg2NGEyLjUwMSAyLjUwMSAwIDAgMSAwLTQuNzcyVi43NWEuNzUuNzUgMCAwIDEgMS41IDB2NC44NjRaTTggN2ExIDEgMCAxIDEgMCAyIDEgMSAwIDAgMSAwLTJaIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-parallel-channel{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzc3LTIuMTRsLTYuNjMgMi45YTIuNTAxIDIuNTAxIDAgMSAwIC42MDcgMS4zNzJsNi41ODUtMi44OGEyLjUwMSAyLjUwMSAwIDAgMCAyLjgxNS43NDhabS4wNS0yLjY5M2ExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptLTExIDQuNzVhMSAxIDAgMSAxLTEuODcuNzA4IDEgMSAwIDAgMSAxLjg3LS43MDhabTEuNTUgNi4wNzVhMi41MDEgMi41MDEgMCAxIDEtLjYwNy0xLjM3Mmw2LjYzLTIuOWEyLjUwMSAyLjUwMSAwIDEgMSAuNTYyIDEuMzkxbC02LjU4NSAyLjg4Wm0tMS41NS0uMDc1YTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0xMC40Mi0zLjQ2YTEgMSAwIDEgMC0uNzA5LTEuODcgMSAxIDAgMCAwIC43MDggMS44N1oiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-disjoint-channel{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzgzLTIuNDUzTDQuNjkgNC4wNTVhMi41IDIuNSAwIDEgMCAuMzQ0IDEuNDZsNi4zOTItMS41OThhMi41MDEgMi41MDEgMCAwIDAgMyAxLjAwM1ptLjA1LTIuNjkzYTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0tMTEgMi43NWExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptMS41NiA1LjQyYTIuNSAyLjUgMCAxIDAtLjM0NSAxLjQ2MWw2LjM1MiAxLjU4OGEyLjUgMi41IDAgMSAwIC4zODQtMS40NWwtNi4zOTItMS41OThabS0xLjU2LjUzOGExIDEgMCAxIDAtMS44Ny0uNzA4IDEgMSAwIDAgMCAxLjg3LjcwOFptMTAuNDIgMS40NjFhMSAxIDAgMSAxLS43MDkgMS44NyAxIDEgMCAwIDEgLjcwOC0xLjg3WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjc4OC41ODNhMi42MyAyLjYzIDAgMCAwLTEuODYuNzdMOS41NDQgMi43MzhhLjc1Ny43NTcgMCAwIDAtLjE0LjE0TDIuMDMyIDEwLjI1di4wMDFjLS4yNDIuMjQxLS40Mi41MzgtLjUyLjg2NGwtLjAwMi4wMDItLjg4IDIuOTAyLS4wMDEuMDAzYTEuMDgzIDEuMDgzIDAgMCAwIDEuMzUgMS4zNDdoLjAwMWwyLjkwMi0uODhoLjAwMWMuMzI2LS4xLjYyMy0uMjc3Ljg2NS0uNTE4di0uMDAxbDcuMzc1LTcuMzc2YS43NjMuNzYzIDAgMCAwIC4xMzktLjEzOWwxLjM4NC0xLjM4NEEyLjYzIDIuNjMgMCAwIDAgMTIuNzg4LjU4M1ptLS4xMjYgNC4zNTIuOTI0LS45MjRhMS4xMyAxLjEzIDAgMCAwLTEuNTk3LTEuNTk3bC0uOTI0LjkyNCAxLjU5NyAxLjU5N1ptLTIuNjU3LS41MzYtNi45MTMgNi45MTRIMy4wOWEuNTgzLjU4MyAwIDAgMC0uMTQ2LjI0MmwtLjY1MyAyLjE1MyAyLjE1NS0uNjU0YS41ODMuNTgzIDAgMCAwIC4yNDEtLjE0NGw2LjkxNC02LjkxNC0xLjU5Ny0xLjU5N1oiIGZpbGw9IiMwMDAiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDE2djE2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+)}.ag-charts-icon-delete{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA4MyAyLjY2N2MwLS4wOS4wNTMtLjI0Mi4xOTctLjM4Ny4xNDUtLjE0NC4yOTctLjE5Ny4zODctLjE5N2gyLjY2N2MuMDg5IDAgLjI0MS4wNTMuMzg2LjE5Ny4xNDUuMTQ1LjE5Ny4yOTcuMTk3LjM4N3YuNTgzSDYuMDg0di0uNTgzWk01LjMzIDQuNzVIMTEuOTE3djguNTgzYzAgLjA5LS4wNTIuMjQyLS4xOTcuMzg3LS4xNDUuMTQ0LS4yOTcuMTk3LS4zODYuMTk3SDQuNjY3Yy0uMDkgMC0uMjQyLS4wNTMtLjM4Ny0uMTk3LS4xNDQtLjE0NS0uMTk3LS4yOTctLjE5Ny0uMzg3VjQuNzVINS4zM1ptLS43NDUtMS41di0uNTgzYzAtLjU3OC4yOC0xLjA5Mi42MzYtMS40NDcuMzU1LS4zNTYuODctLjYzNyAxLjQ0Ny0uNjM3aDIuNjY3Yy41NzcgMCAxLjA5MS4yODEgMS40NDcuNjM3LjM1NS4zNTUuNjM2Ljg3LjYzNiAxLjQ0N3YuNTgzSDE0YS43NS43NSAwIDAgMSAwIDEuNWgtLjU4M3Y4LjU4M2MwIC41NzgtLjI4MSAxLjA5Mi0uNjM2IDEuNDQ3LS4zNTYuMzU2LS44Ny42MzctMS40NDcuNjM3SDQuNjY3Yy0uNTc3IDAtMS4wOTItLjI4MS0xLjQ0Ny0uNjM3LS4zNTUtLjM1NS0uNjM3LS44Ny0uNjM3LTEuNDQ3VjQuNzVIMmEuNzUuNzUgMCAwIDEgMC0xLjVoMi41ODNabTIuMDgzIDMuMzMzYS43NS43NSAwIDAgMSAuNzUuNzV2NGEuNzUuNzUgMCAxIDEtMS41IDB2LTRhLjc1Ljc1IDAgMCAxIC43NS0uNzVabTMuNDE3Ljc1YS43NS43NSAwIDAgMC0xLjUgMHY0YS43NS43NSAwIDEgMCAxLjUgMHYtNFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-lock{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjE3MyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDQuNDEgMS44Mjd2MS45MTZINS40MTZWNC42NjdjMC0uNjg1LjI3My0xLjM0My43NTctMS44MjdaTTMuOTE3IDYuNTgzVjQuNjY3YTQuMDgzIDQuMDgzIDAgMCAxIDguMTY2IDB2MS45MTZoLjU4NGMxLjE1IDAgMi4wODMuOTMzIDIuMDgzIDIuMDg0djQuNjY2YzAgMS4xNS0uOTMzIDIuMDg0LTIuMDgzIDIuMDg0SDMuMzMzYTIuMDgzIDIuMDgzIDAgMCAxLTIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEuOTMzLTIuMDg0IDIuMDgzLTIuMDg0aC41ODNabTcuNDE2IDEuNWgtOGEuNTgzLjU4MyAwIDAgMC0uNTgzLjU4NHY0LjY2NmMwIC4zMjIuMjYxLjU4NC41ODMuNTg0aDkuMzM0YS41ODMuNTgzIDAgMCAwIC41ODMtLjU4NFY4LjY2N2EuNTgzLjU4MyAwIDAgMC0uNTgzLS41ODRoLTEuMzM0WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock{mask-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjkyMyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDMuNjUzIDAgMyAzIDAgMCAxIC41Ny43OThjLjEzNC4yNzguMTcuNDc0LjE3LjU0NWEuNzUuNzUgMCAwIDAgMS41IDBjMC0uMzgxLS4xMzItLjgwOS0uMzItMS4xOThhNC41MDEgNC41MDEgMCAwIDAtLjg1OS0xLjIwNiA0LjA4MyA0LjA4MyAwIDAgMC02Ljk3IDIuODg4djEuOTE2aC0uNTg0QzIuOTMzIDYuNTgzIDIgNy41MTYgMiA4LjY2N3Y0LjY2NmMwIDEuMTUuOTMzIDIuMDg0IDIuMDgzIDIuMDg0aDkuMzM0YzEuMTUgMCAyLjA4My0uOTMzIDIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEtLjkzMy0yLjA4NC0yLjA4My0yLjA4NGgtNy4yNVY0LjY2N2MwLS42ODUuMjcyLTEuMzQzLjc1Ni0xLjgyN1pNNS40MTcgOC4wODNINC4wODJhLjU4My41ODMgMCAwIDAtLjU4My41ODR2NC42NjZjMCAuMzIyLjI2MS41ODQuNTgzLjU4NGg5LjMzNGEuNTgzLjU4MyAwIDAgMCAuNTgzLS41ODRWOC42NjdhLjU4My41ODMgMCAwIDAtLjU4My0uNTg0aC04WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-plus{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXBsdXMiPjxwYXRoIGQ9Ik01IDEyaDE0Ii8+PHBhdGggZD0iTTEyIDV2MTQiLz48L3N2Zz4=)}.ag-charts-icon-crossline-add-line{mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43NSA0LjVhLjc1Ljc1IDAgMCAwLTEuNSAwdjIuNzVINC41YS43NS43NSAwIDAgMCAwIDEuNWgyLjc1djIuNzVhLjc1Ljc1IDAgMCAwIDEuNSAwVjguNzVoMi43NWEuNzUuNzUgMCAwIDAgMC0xLjVIOC43NXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}`}});function dz(t,e){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(s=>{for(const n of s)n.target===t&&e(n.intersectionRatio)},{root:t});return i.observe(t),i}var Tg,JI,Ng,$x,t2=L({"packages/ag-charts-community/src/chart/dom/domManager.ts"(){"use strict";Mt(),Ue(),lz(),cz(),cn(),hz(),uz(),Tg="canvas-center",JI=["styles",Tg,"canvas","canvas-proxy","canvas-overlay"],Ng=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas",eventTypes:["focus","blur"]}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],[Tg,{childElementType:"div"}]]),$x=class extends Rs{constructor(t){super(),this.containerSize=void 0,this.sizeMonitor=new ZI;const e=ui("div");e.innerHTML=qI,this.element=e.children.item(0),this.rootElements=JI.reduce((s,n)=>{const a=`ag-charts-${n}`,o=this.element.classList.contains(a)?this.element:this.element.querySelector(`.${a}`);if(!o)throw new Error(`AG Charts - unable to find DOM element ${a}`);return s[n]={element:o,children:new Map,listeners:[]},s},{});let i=!1;this.observer=dz(this.element,s=>{s===0&&!i&&this.listeners.dispatch("hidden",{type:"hidden"}),i=s===0}),this.setSizeOptions(),this.addStyles("dom-manager",QI),t&&this.setContainer(t)}destroy(){var t,e;super.destroy(),(t=this.observer)==null||t.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(i=>{i.children.forEach(s=>s.remove()),i.element.remove()}),(e=this.guardedElement)==null||e.destroy(),this.element.remove()}setSizeOptions(t=300,e=300,i,s){const{style:n}=this.element;n.width=`${i??t}px`,n.height=`${s??e}px`}updateContainerSize(){var t,e,i,s;const{style:n}=this.rootElements[Tg].element;n.width=`${(e=(t=this.containerSize)==null?void 0:t.width)!=null?e:0}px`,n.height=`${(s=(i=this.containerSize)==null?void 0:i.height)!=null?s:0}px`}setContainer(t){t!==this.container&&(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),t.appendChild(this.element),this.sizeMonitor.observe(t,e=>{this.containerSize=e,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.container=t,this.listeners.dispatch("container-changed",{type:"container-changed"}))}setThemeClass(t){const e="ag-charts-theme-";this.element.classList.forEach(i=>{i.startsWith(e)&&i!==t&&this.element.classList.remove(i)}),this.element.classList.add(t)}createTabGuards(){const t=this.rootElements.canvas.element.querySelector("canvas"),e=this.element.querySelectorAll(".ag-charts-tab-guard");if(t==null||e[0]==null||e[1]==null)throw new Error("AG Charts - error initialising canvas tab guards");return new $I(t,e[0],e[1])}setTabIndex(t){var e;(e=this.guardedElement)!=null||(this.guardedElement=this.createTabGuards()),this.guardedElement.tabIndex=t}getBrowserFocusDelta(){var t,e;return(e=(t=this.guardedElement)==null?void 0:t.getBrowserFocusDelta())!=null?e:0}addEventListener(t,e,i){this.element.addEventListener(t,e,i),Ng.forEach((s,n)=>{var a;if(!((a=s.eventTypes)!=null&&a.includes(t)))return;const o=this.rootElements[n];o.listeners.push([t,e,i]),o.children.forEach(r=>{r.addEventListener(t,e)})})}removeEventListener(t,e,i){this.element.removeEventListener(t,e,i),Ng.forEach((s,n)=>{var a;if(!((a=s.eventTypes)!=null&&a.includes(t)))return;const o=this.rootElements[n];o.listeners=o.listeners.filter(([r,l])=>r!==t&&l!==e),o.children.forEach(r=>{r.removeEventListener(t,e,i)})})}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getDocumentRoot(){var t,e,i;const s=(i=(e=(t=this.container)==null?void 0:t.ownerDocument)==null?void 0:e.body)!=null?i:Da("body");let n=this.container;for(;n!=null;){if(n===s)return;if(n.parentNode instanceof DocumentFragment)return n;n=n.parentNode}}getChildBoundingClientRect(t){const{children:e}=this.rootElements[t],i=[];for(const s of e.values())i.push(ot.fromDOMRect(s.getBoundingClientRect()));return ot.merge(i)}calculateCanvasPosition(t){var e;let i=0,s=0;const{x:n=0,y:a=0}=(e=this.getChildBoundingClientRect("canvas"))!=null?e:{},o=t.getBoundingClientRect();return i=o.x-n,s=o.y-a,{x:i,y:s}}isManagedDOMElement(t,e=this.element){for(;t&&t!==e;){if(t.parentElement==null)return!1;t=t.parentElement}return!0}isManagedChildDOMElement(t,e,i){const{children:s}=this.rootElements[e],n=s?.get(i);return n!=null&&this.isManagedDOMElement(t,n)}isEventOverElement(t){let e=t.target;if(e==null)return!1;for(;e!==this.element;)if(e=e.parentElement,e==null)return!1;return!0}addStyles(t,e){const i=this.addChild("styles",t);i.innerHTML=e}removeStyles(t){this.removeChild("styles",t)}updateCursor(t){this.element.style.cursor=t}getCursor(){return this.element.style.cursor}addChild(t,e,i){var s;const{element:n,children:a,listeners:o}=this.rootElements[t];if(!a)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(a.has(e))return a.get(e);const{childElementType:r="div"}=(s=Ng.get(t))!=null?s:{};if(i&&i.tagName.toLowerCase()!==r.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??ui(r);for(const[c,h,u]of o)l.addEventListener(c,h,u);return a.set(e,l),n?.appendChild(l),l}removeChild(t,e){var i;const{children:s}=this.rootElements[t];s&&s.has(e)&&((i=s.get(e))==null||i.remove(),s.delete(e))}incrementDataCounter(t){var e;const{dataset:i}=this.element;(e=i[t])!=null||(i[t]="0"),i[t]=String(Number(i[t])+1)}}}});function pz(t,e){const i=-e/t;return t!==0&&i>=0&&i<=1?[i]:[]}function gz(t,e,i){if(t===0)return pz(e,i);const s=e*e-4*t*i,n=[];if(s===0){const a=-e/(2*t);a>=0&&a<=1&&n.push(a)}else if(s>0){const a=Math.sqrt(s),o=(-e-a)/(2*t),r=(-e+a)/(2*t);o>=0&&o<=1&&n.push(o),r>=0&&r<=1&&n.push(r)}return n}function fz(t,e,i,s){if(t===0)return gz(e,i,s);const n=e/t,a=i/t,o=s/t,r=(3*a-n*n)/9,l=(9*n*a-27*o-2*n*n*n)/54,c=r*r*r+l*l,h=1/3,u=[];if(c>=0){const d=Math.sqrt(c),p=Math.sign(l+d)*Math.pow(Math.abs(l+d),h),g=Math.sign(l-d)*Math.pow(Math.abs(l-d),h),f=Math.abs(Math.sqrt(3)*(p-g)/2),m=-h*n+(p+g);if(m>=0&&m<=1&&u.push(m),f===0){const v=-h*n-(p+g)/2;v>=0&&v<=1&&u.push(v)}}else{const d=Math.acos(l/Math.sqrt(-r*r*r)),p=h*n,g=2*Math.sqrt(-r),f=g*Math.cos(h*d)-p,m=g*Math.cos(h*(d+2*Math.PI))-p,v=g*Math.cos(h*(d+4*Math.PI))-p;f>=0&&f<=1&&u.push(f),m>=0&&m<=1&&u.push(m),v>=0&&v<=1&&u.push(v)}return u}var mz=L({"packages/ag-charts-community/src/scene/polyRoots.ts"(){"use strict"}});function Dc(t,e,i,s,n,a,o,r){const l=(i-t)*(r-a)-(s-e)*(o-n);if(l===0)return 0;const c=((o-n)*(e-a)-(t-n)*(r-a))/l,h=((i-t)*(e-a)-(s-e)*(t-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function yz(t,e,i,s,n,a,o,r,l,c,h,u){let d=0;const p=c-u,g=h-l,f=l*(u-c)-c*(h-l),m=e2(t,i,n,o),v=e2(e,s,a,r),y=p*m[0]+g*v[0],x=p*m[1]+g*v[1],b=p*m[2]+g*v[2],S=p*m[3]+g*v[3]+f,k=fz(y,x,b,S);for(const D of k){const T=D*D,I=D*T,N=m[0]*I+m[1]*T+m[2]*D+m[3],C=v[0]*I+v[1]*T+v[2]*D+v[3];let E;l===h?E=(C-c)/(u-c):E=(N-l)/(h-l),E>=0&&E<=1&&d++}return d}function e2(t,e,i,s){return[-t+3*e-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function i2(t,e,i,s,n,a,o,r,l,c){if(isNaN(t)||isNaN(e))return 0;a&&([n,s]=[s,n]);const h=(c-r)/(l-o),u=r-h*o,d=Math.pow(h,2)+1,p=2*(h*(u-e)-t),g=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*d*g;if(f<0)return 0;const m=(-p+Math.sqrt(f))/2/d,v=(-p-Math.sqrt(f))/2/d;let y=0;return[m,v].forEach(x=>{if(!(x>=Math.min(o,l)&&x<=Math.max(o,l)))return;const S=h*x+u,k=x-t,D=S-e,T=Math.atan2(D,k);_o(T,s,n)&&y++}),y}var s2=L({"packages/ag-charts-community/src/scene/intersection.ts"(){"use strict";zi(),mz()}}),Ic,Zx=L({"packages/ag-charts-community/src/scene/extendedPath2D.ts"(){"use strict";zi(),rI(),yt(),s2(),Ic=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(t,e+n),this.arc(t+n,e+n,n,Math.PI,1.5*Math.PI),this.lineTo(t+n,e),this.lineTo(t+i-n,e),this.arc(t+i-n,e+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+n),this.lineTo(t+i,e+s-n),this.arc(t+i-n,e+s-n,n,0,Math.PI/2),this.lineTo(t+i-n,e+s),this.lineTo(t+n,e+s),this.arc(t+ +n,e+s-n,n,Math.PI/2,Math.PI),this.lineTo(t,e+s-n),this.closePath()}arc(t,e,i,s,n,a){this.openedPath=!0,this.path2d.arc(t,e,i,s,n,a),this.commands.push(2),this.params.push(t,e,i,s,n,a?1:0)}cubicCurveTo(t,e,i,s,n,a){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,s,n,a),this.commands.push(3),this.params.push(t,e,i,s,n,a)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,a=-1e4,o=-1e4;let r=NaN,l=NaN,c=0,h=0,u=0;for(let d=0,p=0;d<n;d++)switch(i[d]){case 0:u+=Dc(r,l,c,h,a,o,t,e),c=s[p++],r=c,h=s[p++],l=h;break;case 1:u+=Dc(c,h,s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 3:u+=yz(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,o,t,e),c=s[p-2],h=s[p-1];break;case 2:const g=s[p++],f=s[p++],m=s[p++],v=s[p++],y=s[p++],x=!!s[p++];if(u+=i2(g,f,m,v,y,x,a,o,t,e),!isNaN(r)){const b=g+Math.cos(v)*m,S=f+Math.sin(v)*m;u+=Dc(c,h,b,S,a,o,t,e)}c=g+Math.cos(y)*m,h=f+Math.sin(y)*m;break;case 4:u+=Dc(r,l,c,h,a,o,t,e);break}return u%2===1}distanceSquared(t,e){let i=1/0;const s=this.commands,n=this.params,a=s.length;let o=NaN,r=NaN,l=0,c=0;for(let h=0,u=0;h<a;h++)switch(s[h]){case 0:l=o=n[u++],c=r=n[u++];break;case 1:{const d=n[u++],p=n[u++];i=gg(t,e,l,c,d,p,i);break}case 3:Z.error("Command.Curve distanceSquare not implemented");break;case 2:{const d=n[u++],p=n[u++],g=n[u++],f=n[u++],m=n[u++],v=d+Math.cos(f)*g,y=p+Math.sin(f)*g,x=!!n[u++];i=gg(t,e,l,c,v,y,i),i=IF(t,e,d,p,g,f,m,x,i),l=d+Math.cos(m)*g,c=p+Math.sin(m)*g;break}case 4:i=gg(t,e,l,c,o,r,i);break}return i}getPoints(){const{commands:t,params:e}=this,i=[];let s=0;for(let n=0;n<t.length;n++)switch(t[n]){case 0:case 1:i.push({x:e[s++],y:e[s++]});break;case 3:s+=4,i.push({x:e[s++],y:e[s++]});break;case 2:i.push({x:e[s++],y:e[s++]}),s+=4;break;case 4:break}return i}computeSVGDataPath(t,e){const i=[],{commands:s,params:n}=this;let a=0;for(let o=0;o<s.length;o++)switch(s[o]){case 0:i.push("M",t+n[a++],e+n[a++]);break;case 1:i.push("L",t+n[a++],e+n[a++]);break;case 3:i.push("C",t+n[a++],e+n[a++],t+n[a++],e+n[a++],t+n[a++],e+n[a++]);break;case 2:const[r,l,c,h,u,d]=[n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]],p=t+r+Math.cos(h)*c,g=e+l+Math.sin(h)*c,f=t+r+Math.cos(u)*c,m=e+l+Math.sin(u)*c,v=FD(h,u,!!d)>Math.PI?1:0,y=(d+1)%2;i.push("L",p,g,"A",c,c,0,v,y,f,m);break;case 4:i.push("Z");break}return i.join(" ")}}}});function mt(t){const{redraw:e=3,changeCb:i,convertor:s}=t??{};return at({redraw:e,type:"path",convertor:s,changeCb:i})}var ki,un=L({"packages/ag-charts-community/src/scene/shape/path.ts"(){"use strict";Zx(),ae(),ko(),ki=class extends xs{constructor(){super(...arguments),this.path=new Ic,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((e=(t=this.fillShadow)==null?void 0:t.isDirty())!=null?e:!1)||((s=(i=this._clipPath)==null?void 0:i.isDirty())!=null?s:!1))}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}distanceSquared(t,e){const i=this.transformPoint(t,e);return this.distanceSquaredTransformedPoint(i.x,i.y)}computeSVGDataPath(){const{x:t,y:e}=this.inverseTransformPoint(0,0);return this.path.computeSVGDataPath(t,e)}distanceSquaredTransformedPoint(t,e){return this.path.closedPath&&this.path.isPointInPath(t,e)?0:this.path.distanceSquared(t,e)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i,s,n,a;const{ctx:o,forceRender:r,stats:l}=t;if(this.dirty===0&&!r){l&&(l.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),!isNaN(this._clipX)&&!isNaN(this._clipY)&&this.clipMode!=null){o.save();const c=this.strokeWidth/2;if((e=this._clipPath)!=null||(this._clipPath=new Ic),this._clipPath.clear(),this._clipPath.rect(-c,-c,this._clipX+c,this._clipY+c+c),this.clipMode==="normal"&&o.clip((i=this._clipPath)==null?void 0:i.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(o),this.clipMode==="punch-out"){o.clip((s=this._clipPath)==null?void 0:s.getPath2D());const{x:h=-1e4,y:u=-1e4,width:d=2e4,height:p=2e4}=(n=this.computeBBox())!=null?n:{};o.clearRect(h,u,d,p)}o.restore()}else this.drawPath(o);(a=this.fillShadow)==null||a.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}},ki.className="Path",_([mt()],ki.prototype,"clipMode",2),_([mt()],ki.prototype,"clipX",1),_([mt()],ki.prototype,"clipY",1)}}),n2,vz=L({"packages/ag-charts-community/src/chart/dom/focusStyles.css"(){n2=".ag-charts-focus.ag-charts-focus__indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus.ag-charts-focus__indicator > div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus.ag-charts-focus__indicator > svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-focus--hidden{visibility:hidden}"}}),a2={};tn(a2,{block:()=>Og,css:()=>n2,elements:()=>o2,modifiers:()=>Cg});var Og,o2,Cg,xz=L({"packages/ag-charts-community/src/chart/dom/focusStyles.ts"(){"use strict";vz(),Og="ag-charts-focus",o2={indicator:"ag-charts-focus__indicator",svg:"ag-charts-focus__svg"},Cg={hidden:"ag-charts-focus--hidden"}}}),r2,bz=L({"packages/ag-charts-community/src/chart/dom/focusIndicator.ts"(){"use strict";un(),Ue(),xz(),r2=class{constructor(t){this.domManager=t;const{css:e,block:i,elements:s,modifiers:n}=a2;this.div=Da().createElement("div"),this.svg=Da().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=Da().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),t.addStyles(i,e),this.element=t.addChild("canvas-overlay",i),this.element.classList.add(i,s.indicator,n.hidden),this.element.append(this.svg)}destroy(){this.domManager.removeStyles(Og),this.domManager.removeChild("canvas-overlay",Og)}updateBounds(t){t===void 0?this.element.classList.add(Cg.hidden):t instanceof ki?(this.path.setAttribute("d",t.computeSVGDataPath()),this.show(this.svg)):(Ia(this.div,t),this.show(this.div))}show(t){this.element.classList.remove(Cg.hidden),this.element.innerHTML="",this.element.append(t)}}}});function l2(t,e){var i;return((i=e.params)==null?void 0:i.type)===t}function c2(t){return{params:t,result:ui({button:"button",slider:"input",toolbar:"div",group:"div"}[t.type])}}var h2,Sz=L({"packages/ag-charts-community/src/chart/dom/proxyInteractionService.ts"(){"use strict";Ee(),Ue(),h2=class{constructor(t,e,i,s){this.localeManager=e,this.domManager=i,this.focusIndicator=s,this.debugShowDOMProxies=Xt.check("showDOMProxies"),this.destroyFns=[],this.destroyFns.push(t.addListener("update-complete",()=>this.update()))}destroy(){this.destroyFns.forEach(t=>t())}update(){this.focusable&&this.focusIndicator.updateBounds(this.focusable.computeTransformedBBox())}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){const e=c2(t),{params:i,result:s}=e;return this.domManager.addChild("canvas-overlay",i.id,s),s.classList.add(...i.classList),s.style.pointerEvents="none",s.role=i.type,s.ariaOrientation=i.ariaOrientation,this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),s}createProxyElement(t){const e=c2(t);if(l2("button",e)){const{params:i,result:s}=e;if(this.initElement(i,s),typeof i.textContent=="string")s.textContent=i.textContent;else{const{textContent:n}=i;this.addLocalisation(()=>{s.textContent=this.localeManager.t(n.id,n.params)})}}if(l2("slider",e)){const{params:i,result:s}=e;this.initElement(i,s),s.type="range",s.role="presentation",s.style.margin="0px",s.ariaOrientation=i.ariaOrientation,this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)})}return e.result}initElement(t,e){const{focusable:i,onclick:s,onchange:n,onfocus:a,onblur:o,tabIndex:r,id:l,parent:c}=t;e.id=l,e.style.pointerEvents="none",e.style.opacity=this.debugShowDOMProxies?"0.25":"0",e.style.position="absolute",e.style.overflow="hidden",r!==void 0&&(e.tabIndex=r),c.appendChild(e),e.addEventListener("focus",h=>{this.focusable=i,e.style.setProperty("pointerEvents",null),this.focusIndicator.updateBounds(i.computeTransformedBBox())}),e.addEventListener("blur",h=>{this.focusable=void 0,e.style.pointerEvents="none",this.focusIndicator.updateBounds(void 0)}),s&&e.addEventListener("click",s),a&&e.addEventListener("focus",a),o&&e.addEventListener("blur",o),n&&e.addEventListener("change",n)}}}}),qx,Mz=L({"packages/ag-charts-community/src/chart/interaction/animationBatch.ts"(){"use strict";Lr(),Ee(),yt(),qx=class{constructor(t){this.maxAnimationTime=t,this.debug=Xt.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Ar.map(e=>[e,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var t;return(t=this.phases.get(Ar[this.currentPhase]))!=null?t:[]}checkOverlappingId(t){t!=null&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){var e;if(t.isComplete)return;if(Ar.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),(e=this.phases.get(t.phase))==null||e.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=e?.indexOf(t);i!=null&&i>=0&&e?.splice(i,1)}progress(t){if(!this.isReady)return;let e=t===0?.01:t;const i=()=>{const c=Ar[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:cc[c]}};let{phase:s,phaseControllers:n,phaseMeta:a}=i();const o=()=>Ar[this.currentPhase]==null,r=()=>{for({phase:s,phaseControllers:n,phaseMeta:a}=i();!o()&&n.length===0;)this.currentPhase++,{phase:s,phaseControllers:n,phaseMeta:a}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${n?.length} of ${l}`);do{const c=e,h=a.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let u=0;for(const d of n)h?d.stop():e=Math.min(d.update(c),e),d.isComplete&&(u++,this.removeAnimation(d));this.animationTimeConsumed+=c-e,this.debug(`AnimationBatch - updated ${n.length} controllers; ${u} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),r()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(Z.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&cc[e.phase].skipIfNoEarlierAnimations!==!0){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(t=!0){if(this.skipAnimations===!1&&t===!0){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){Z.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(t){if(t!=null&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}}}});function u2(t){return t==null?!0:!isNaN(t)&&t>=0&&t<=2}var Qx,d2=L({"packages/ag-charts-community/src/chart/interaction/animationManager.ts"(){"use strict";Lr(),Ee(),yt(),cn(),Mz(),hn(),Qx=class extends Rs{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new qx(this.defaultDuration*1.5),this.debug=Xt.create(!0,"animation"),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1,this.currentAnonymousAnimationId=0}animate(t){var e=se(t,[]);const i=this.batch;try{i.checkOverlappingId(e.id)}catch(l){this.failsafeOnError(l);return}let{id:s}=e;s==null&&(s=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const n=this.isSkipped()||e.phase==="none";n&&this.debug("AnimationManager - skipping animation");const{delay:a,duration:o}=e;if(!u2(a))throw new Error(`Animation delay of ${a} is unsupported (${s})`);if(!u2(o))throw new Error(`Animation duration of ${o} is unsupported (${s})`);const r=new Hv(K(B({},e),{id:s,skip:n,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let t;const e=i=>F(this,null,function*(){const s=()=>F(this,null,function*(){const n=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(1);try{this.batch.progress(n)}catch(a){this.failsafeOnError(a)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.listeners.dispatch("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))});this.listeners.dispatch("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){Z.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new qx(this.defaultDuration*1.5),t===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}}}}),p2,_z=L({"packages/ag-charts-community/src/chart/interaction/ariaAnnouncementServices.ts"(){"use strict";Tu(),Ee(),Ue(),p2=class zw{constructor(e,i,s){this.localeManager=e,this.domManager=i,this.layoutService=s,this.debug=Xt.create(!0,"aria"),this.destroyFns=[],this.liveElem=zw.createAnnouncer(),this.domManager.addChild("canvas-proxy","ag-charts-canvas-proxy",this.liveElem),this.destroyFns.push(this.layoutService.addListener("layout-complete",n=>this.onResize(n)),()=>this.domManager.removeChild("canvas-proxy","ag-charts-canvas-proxy"))}static createAnnouncer(){const e=Da().createElement("div");return e.classList.add("ag-charts-aria-announcer"),Br(e,"role","figure"),Br(e,"aria-live","assertive"),e}destroy(){this.destroyFns.forEach(e=>e())}onResize(e){this.liveElem.style.width=`${e.chart.width}px`,this.liveElem.style.height=`${e.chart.height}px`}announceValue(e,i){const{localeManager:s,liveElem:n}=this,a=s.t(e,i);this.debug(`AriaAnnouncementService - announceValue: ${a}`),n.textContent="\xA0",setTimeout(()=>n.innerText=a,16)}}}}),Jx,g2=L({"packages/ag-charts-community/src/chart/interaction/chartEventManager.ts"(){"use strict";cn(),Jx=class extends Rs{legendItemClick(t,e,i,s){const n={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,s,n){const a={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:n,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",a)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}}}),tb,f2=L({"packages/ag-charts-community/src/chart/interaction/contextMenuRegistry.ts"(){"use strict";Ao(),hn(),Ou(),tb=class Gw{constructor(e){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new Aa;const{Default:i,ContextMenu:s}=Gr;this.destroyFns=[e.listenAll("contextmenu",n=>this.onContextMenu(n),i|s)]}destroy(){this.destroyFns.forEach(e=>e())}onContextMenu(e){Gw.toContextType(e.region)==="all"&&this.dispatchContext("all",e,{})}static toContextType(e){return e==="legend"||e==="series"?e:"all"}static check(e,i){return i.type===e}static checkCallback(e,i,s){return e===i}dispatchContext(e,i,s){const{offsetX:n,offsetY:a,sourceEvent:o}=i;this.listeners.dispatch("",Nu({type:e,x:n,y:a,context:s,sourceEvent:o}))}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter(i=>i.id&&!this.hiddenActions.has(i.id)&&["all",e].includes(i.type))}registerDefaultAction(e){e.id&&this.defaultActions.find(({id:i})=>i===e.id)||this.defaultActions.push(e)}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}setActionVisiblity(e,i){i?this.hiddenActions.delete(e):this.hiddenActions.add(e)}isDisabled(e){return this.disabledActions.has(e)}}}}),Wr,Eg=L({"packages/ag-charts-community/src/util/stateTracker.ts"(){"use strict";Wr=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){var t;return(t=Array.from(this.keys()).pop())!=null?t:this.defaultState}stateValue(){var t;return(t=Array.from(this.values()).pop())!=null?t:this.defaultValue}}}}),eb,ib,m2=L({"packages/ag-charts-community/src/chart/interaction/cursorManager.ts"(){"use strict";Eg(),eb=(t=>(t.Auto="auto",t.Default="default",t.Grab="grab",t.Grabbing="grabbing",t.Move="move",t.NotAllowed="not-allowed",t.Pointer="pointer",t.EWResize="ew-resize",t.NSResize="ns-resize",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t))(eb||{}),ib=class{constructor(t){this.domManager=t,this.stateTracker=new Wr("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}}}});function kz(t,e){const i=t.screenX-e.screenX,s=t.screenY-e.screenY;return i*i+s*s}function y2(t,e){return Math.sqrt(kz(t,e))}var v2,sb,x2=L({"packages/ag-charts-community/src/chart/interaction/gestureDetector.ts"(){"use strict";yt(),ue(),cn(),Ou(),v2=1,sb=class extends Rs{constructor(t){super(),this.domManager=t,this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:s}=this.pinch;if(this.pinch.status!==0&&e.length===2){if(e[0].identifier===i.identifier&&e[1].identifier===s.identifier)return[e[0],e[1]];if(e[0].identifier===s.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];Ir(e,this.pinch.finger1,t.touches[0]),Ir(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=y2(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e,i){const{finger1:s,finger2:n,origin:a}=this.pinch;this.listeners.dispatch(t,Nu({sourceEvent:i,type:t,finger1:s,finger2:n,deltaDistance:e,origin:a}))}onTouchStart(t){this.stopPinchTracking(t);const{pinch:e}=this;t.touches.length===2&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(e!==void 0){const[i,s]=e,{pinch:n}=this,a=y2(i,s),o=a-n.distance;n.status===1?Math.abs(o)>v2&&(n.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0,t)):n.status===2?(n.distance=a,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o,t)):Z.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(t){this.stopPinchTracking(t)}onTouchCancel(t){this.stopPinchTracking(t)}stopPinchTracking(t){const{pinch:e}=this;e.status===2&&this.dispatchPinchEvent("pinch-end",0,t),this.pinch.status=0}}}}),nb,b2=L({"packages/ag-charts-community/src/chart/interaction/highlightManager.ts"(){"use strict";Eg(),cn(),nb=class extends Rs{constructor(){super(...arguments),this.highlightStates=new Wr}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}}}}),ab,S2=L({"packages/ag-charts-community/src/chart/interaction/keyNavManager.ts"(){"use strict";cn(),hn(),Ou(),ab=class extends Rs{constructor(t,e){super(),this.domManager=e,this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.isClicking=!1,this.destroyFns.push(t.addListener("drag-start",i=>this.onClickStart(i),31),t.addListener("click",i=>this.onClickStop(i),31),t.addListener("drag-end",i=>this.onClickStop(i),31),t.addListener("wheel",i=>this.mouseBlur(i)),t.addListener("hover",i=>this.mouseBlur(i)),t.addListener("drag",i=>this.mouseBlur(i)),t.addListener("blur",i=>this.onBlur(i),31),t.addListener("focus",i=>this.onFocus(i),31),t.addListener("keydown",i=>this.onKeyDown(i),31))}destroy(){super.destroy()}onClickStart(t){this.isClicking=!0,this.mouseBlur(t)}onClickStop(t){this.mouseBlur(t),this.isClicking=!1}mouseBlur(t){this.hasBrowserFocus&&(this.isMouseBlurred||(this.dispatch("blur",0,t),this.isMouseBlurred=!0))}onBlur(t){this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.dispatch("blur",0,t)}onFocus(t){const e=this.domManager.getBrowserFocusDelta();if(this.dispatch("browserfocus",e,t),this.hasBrowserFocus=!0,this.isClicking){this.isMouseBlurred=!0;return}this.dispatch("tab",e,t)}onKeyDown(t){if(!this.hasBrowserFocus)return;this.isMouseBlurred=!1;const{code:e,altKey:i,shiftKey:s,metaKey:n,ctrlKey:a}=t.sourceEvent;if(e==="Tab")return s?this.dispatch("tab",-1,t):this.dispatch("tab",1,t);if(!(i||s||n||a)){switch(e){case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,t);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,t);case"Space":case"Enter":return this.dispatch("submit",0,t);case"Escape":return this.dispatch("cancel",0,t);case"Backspace":case"Delete":return this.dispatch("delete",0,t)}switch(t.sourceEvent.key){case"+":return this.dispatch("nav-zoom",1,t);case"-":return this.dispatch("nav-zoom",-1,t)}}}dispatch(t,e,i){mg(this.listeners,{type:t,delta:e,sourceEvent:i})}}}});function M2(t,e,i,s,n=16){var a;return(a=t?.addListener(i,o=>{e.getState()&n&&s(o)}))!=null?a:()=>{}}var Rg,ob,_2,Dz=L({"packages/ag-charts-community/src/chart/interaction/regionManager.ts"(){"use strict";Ao(),hn(),Ou(),Rg=["series"],ob=class extends Aa{},_2=class{constructor(t,e,i){this.interactionManager=t,this.keyNavManager=e,this.focusIndicator=i,this.currentTabIndex=0,this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.allRegionsListeners=new ob,this.destroyFns.push(...yg.map(s=>t.addListener(s,this.processPointerEvent.bind(this),31)),this.keyNavManager.addListener("blur",this.onNav.bind(this)),this.keyNavManager.addListener("browserfocus",this.onBrowserFocus.bind(this)),this.keyNavManager.addListener("tab",this.onTab.bind(this)),this.keyNavManager.addListener("nav-vert",this.onNav.bind(this)),this.keyNavManager.addListener("nav-hori",this.onNav.bind(this)),this.keyNavManager.addListener("nav-zoom",this.onNav.bind(this)),this.keyNavManager.addListener("submit",this.onNav.bind(this)),this.keyNavManager.addListener("cancel",this.onNav.bind(this)),this.keyNavManager.addListener("delete",this.onNav.bind(this)))}destroy(){this.destroyFns.forEach(t=>t()),this.currentRegion=void 0;for(const t of this.regions.values())t.listeners.destroy();this.focusIndicator.destroy(),this.regions.clear()}addRegion(t,...e){if(this.regions.has(t))throw new Error(`AG Charts - Region: ${t} already exists`);const i={properties:{name:t,bboxproviders:[...e]},listeners:new ob};return this.regions.set(t,i),this.makeObserver(i)}updateRegion(t,...e){const i=this.regions.get(t);i&&(i.properties.bboxproviders=[...e])}getRegion(t){return this.makeObserver(this.regions.get(t))}listenAll(t,e,i=16){return M2(this.allRegionsListeners,this.interactionManager,t,e,i)}makeObserver(t){const{interactionManager:e}=this;class i{addListener(n,a,o=16){return M2(t?.listeners,e,n,a,o)}}return new i}checkPointerHistory(t,e){for(const i of e.pointerHistory){const s=this.pickRegion(i.offsetX,i.offsetY);if(t.properties.name!==s?.properties.name)return!1}return!0}dispatch(t,e){if(t==null)return;const i=Nu(K(B({},e),{region:t.properties.name}));this.allRegionsListeners.dispatch(i.type,i),t.listeners.dispatch(i.type,i)}handleDragging(t){const{currentRegion:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,K(B({},t),{type:"leave"})),!0;break}return!1}processPointerEvent(t){if(this.handleDragging(t))return;const{currentRegion:e}=this,i=this.pickRegion(t.offsetX,t.offsetY);e!==void 0&&i?.properties.name!==e.properties.name&&this.dispatch(e,K(B({},t),{type:"leave"})),i!==void 0&&i.properties.name!==e?.properties.name&&this.dispatch(i,K(B({},t),{type:"enter"})),i!==void 0&&this.checkPointerHistory(i,t)&&this.dispatch(i,t),this.currentRegion=i}pickRegion(t,e){var i,s;let n=1/0,a;for(const o of this.regions.values())for(const r of o.properties.bboxproviders){const l=(s=(i=r.computeTransformedRegionBBox)==null?void 0:i.call(r))!=null?s:r.computeTransformedBBox(),c=l.width*l.height;c<n&&l.containsPoint(t,e)&&(n=c,a=o)}return a}getTabRegion(t){if(t!==void 0&&t>=0&&t<Rg.length)return this.regions.get(Rg[t])}getNextInteractableTabIndex(t,e){const i=e<0?-1:1;let s=t;for(;e!==0;){if(this.getTabRegion(s+i)===void 0)return;e=e-i,s=s+i}return s}validateCurrentTabIndex(){var t;this.getTabRegion(this.currentTabIndex)!==void 0&&(this.currentTabIndex=(t=this.getNextInteractableTabIndex(-1,1))!=null?t:0)}onBrowserFocus(t){t.delta>0?this.currentTabIndex=-1:t.delta<0&&(this.currentTabIndex=Rg.length)}onTab(t){this.validateCurrentTabIndex();const e=this.getNextInteractableTabIndex(this.currentTabIndex,t.delta),i=this.getTabRegion(e),s=this.getTabRegion(this.currentTabIndex);if(e!==void 0&&(this.currentTabIndex=e),s!==void 0&&i?.properties.name!==s.properties.name){const{delta:n,sourceEvent:a}=t,o=Nu({type:"blur",delta:n,sourceEvent:a});this.dispatch(s,o)}i===void 0?this.focusIndicator.updateBounds(void 0):this.dispatch(i,t)}onNav(t){const e=this.getTabRegion(this.currentTabIndex);this.dispatch(e,t)}}}});function k2(t){return["floating-top","floating-bottom"].includes(t)}var rb,wg,Ac,Yr,Pg=L({"packages/ag-charts-community/src/chart/toolbar/toolbarTypes.ts"(){"use strict";rb=["start","center","end"],wg=["annotations","annotationOptions","ranges","zoom"],Ac=(t=>(t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left",t.Floating="floating",t.FloatingTop="floating-top",t.FloatingBottom="floating-bottom",t))(Ac||{}),Yr=Object.values(Ac)}}),lb,D2=L({"packages/ag-charts-community/src/chart/interaction/toolbarManager.ts"(){"use strict";cn(),Pg(),lb=class extends Rs{static isGroup(t,e){return e.group===t}static isChildElement(t,e){for(const i of Yr)if(t.isManagedChildDOMElement(e,"canvas-overlay",`toolbar-${i}`))return!0;return!1}pressButton(t,e){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:t,value:e})}cancel(t){this.listeners.dispatch("cancelled",{type:"cancelled",group:t})}toggleButton(t,e,i){const{active:s=!1,enabled:n=!0,visible:a=!0}=i;this.listeners.dispatch("button-toggled",{type:"button-toggled",group:t,value:e,active:s,enabled:n,visible:a})}toggleGroup(t,e,i){this.listeners.dispatch("group-toggled",{type:"group-toggled",caller:t,group:e,visible:i})}changeFloatingAnchor(t,e){this.listeners.dispatch("floating-anchor-changed",{type:"floating-anchor-changed",group:t,anchor:e})}buttonMoved(t,e,i){this.listeners.dispatch("button-moved",{type:"button-moved",group:t,value:e,rect:i})}proxyGroupOptions(t,e,i){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",caller:t,group:e,options:i})}}}}),I2,Iz=L({"packages/ag-charts-community/src/chart/interaction/tooltipManager.css"(){I2=".ag-chart-tooltip{transition:transform 0.1s ease;max-width:100%;z-index:99999;font:12px Verdana,sans-serif;color:rgb(70,70,70);box-shadow:0 4px 8px rgba(0,0,0,0.08)}.ag-chart-tooltip-wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-chart-tooltip-wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-chart-tooltip-wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-chart-tooltip-wrap-never{white-space:pre;text-overflow:ellipsis}.ag-chart-tooltip-no-interaction{pointer-events:none;user-select:none}.ag-chart-tooltip-no-animation{transition:none!important}.ag-chart-tooltip-hidden{visibility:hidden}.ag-chart-tooltip-title{overflow:hidden;position:relative;padding:8px 14px;border-top-left-radius:2px;border-top-right-radius:2px;color:white;background-color:#888888;z-index:1;text-overflow:inherit}.ag-chart-tooltip-title:only-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.ag-chart-tooltip-content{overflow:hidden;padding:6px 14px;line-height:1.7em;background:white;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border:1px solid rgba(0,0,0,0.15);text-overflow:inherit}.ag-chart-tooltip-arrow::before{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:5px solid #d9d9d9;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}.ag-chart-tooltip-arrow::after{content:'';position:absolute;top:calc(100% - 1px);left:50%;transform:translateX(-50%);border:5px solid white;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}"}}),Pu,cb=L({"packages/ag-charts-community/src/chart/interaction/tooltipManager.ts"(){"use strict";Eg(),Hi(),Iz(),Pu=class{constructor(t,e){this.domManager=t,this.tooltip=e,this.stateTracker=new Wr,this.suppressState=new Wr(!1),this.appliedState=null,e.setup(t),t.addListener("hidden",()=>this.tooltip.toggle(!1)),t.addStyles("tooltip",I2)}updateTooltip(t,e,i){var s;this.tooltip.enabled&&(i??(i=(s=this.stateTracker.get(t))==null?void 0:s.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}getTooltipMeta(t){var e;return(e=this.stateTracker.get(t))==null?void 0:e.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){var t;const e=this.stateTracker.stateId(),i=e?this.stateTracker.get(e):null;if(this.suppressState.stateValue()||i?.meta==null||i?.content==null){this.appliedState=null,this.tooltip.toggle(!1);return}const s=this.domManager.getBoundingClientRect();if(((t=this.appliedState)==null?void 0:t.content)===i?.content){const n=this.tooltip.isVisible();this.tooltip.show(s,i?.meta,null,n)}else this.tooltip.show(s,i?.meta,i?.content);this.appliedState=i}static makeTooltipMeta(t,e){var i,s,n,a,o,r,l;const{offsetX:c,offsetY:h}=t,{tooltip:u}=e.series.properties,d={offsetX:c,offsetY:h,enableInteraction:(s=(i=u.interaction)==null?void 0:i.enabled)!=null?s:!1,lastPointerEvent:{type:t.type,offsetX:c,offsetY:h},showArrow:u.showArrow,position:{type:u.position.type,xOffset:u.position.xOffset,yOffset:u.position.yOffset}},p=(l=(a=(n=e.yBar)==null?void 0:n.upperPoint)!=null?a:e.midPoint)!=null?l:(r=(o=e.series).datumMidPoint)==null?void 0:r.call(o,e);if(u.position.type==="node"&&p){const{x:g,y:f}=p,m=e.series.contentGroup.inverseTransformPoint(g,f);return K(B({},d),{offsetX:Math.round(m.x),offsetY:Math.round(m.y)})}return d}}}}),hb,A2=L({"packages/ag-charts-community/src/chart/layout/layoutService.ts"(){"use strict";Ee(),Ao(),yt(),hb=class extends Aa{constructor(){super(...arguments),this.layoutComplete="layout-complete",this.debug=Xt.create(!0,"layout")}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce((i,s)=>{try{const n=s.handler(i);return this.debug("[LayoutService] Context updated to: ",B({},n),s),n}catch(n){return Z.errorOnce(n),i}},e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}}}),L2,Bg,T2,Az=L({"packages/ag-charts-community/src/chart/locale/defaultMessageFormatter.ts"(){"use strict";yt(),L2=/\$\{(\w+)\}(?:\[(\w+)\])?/gi,Bg={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent"}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},T2=({defaultValue:t,variables:e})=>t?.replaceAll(L2,(i,s,n)=>{const a=e[s],o=n!=null?Bg[n]:void 0;return n!=null&&o==null&&Z.warnOnce(`Format style [${n}] is not supported`),o!=null?o.format(a):typeof a=="number"?Bg.number.format(a):a instanceof Date?Bg.datetime.format(a):a})}}),N2,Lz=L({"packages/ag-charts-community/src/chart/locale/localeManager.ts"(){"use strict";Ok(),Ao(),Az(),N2=class extends Aa{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){var i,s;const{localeText:n=iv,getLocaleText:a}=this,o=n[t];return(s=(i=a?.({key:t,defaultValue:o,variables:e}))!=null?i:T2({key:t,defaultValue:o,variables:e}))!=null?s:t}}}}),O2,Tz=L({"packages/ag-charts-community/src/chart/series/seriesStateManager.ts"(){"use strict";O2=class{constructor(){this.groups={}}registerSeries({id:t,seriesGrouping:e,visible:i,type:s}){var n,a;e&&((a=(n=this.groups)[s])!=null||(n[s]={}),this.groups[s][t]={grouping:e,visible:i})}deregisterSeries({id:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&Object.keys(this.groups[e]).length===0&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){var s;if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const n=new Set,a=new Set;for(const r of Object.values((s=this.groups[t])!=null?s:{}))r.visible&&(n.add(r.grouping.groupIndex),r.grouping.groupIndex===e.groupIndex&&a.add(r.grouping.stackIndex));const o=Array.from(n);return o.sort((r,l)=>r-l),{visibleGroupCount:o.length,visibleSameStackCount:a.size,index:o.indexOf(e.groupIndex)}}}}}),Lc,Kr=L({"packages/ag-charts-community/src/chart/chartUpdateType.ts"(){"use strict";Lc=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Lc||{})}}),ub,C2=L({"packages/ag-charts-community/src/chart/updateService.ts"(){"use strict";Ao(),Kr(),ub=class extends Aa{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t?.minRect,minVisibleRect:t?.minVisibleRect})}}}}),E2,Nz=L({"packages/ag-charts-community/src/chart/chartContext.ts"(){"use strict";QF(),WI(),az(),oz(),rz(),XI(),t2(),bz(),Sz(),d2(),_z(),g2(),f2(),m2(),x2(),b2(),hn(),S2(),Dz(),D2(),cb(),A2(),Lz(),Tz(),C2(),E2=class{constructor(t,e){const{scene:i,root:s,syncManager:n,container:a,updateCallback:o,updateMutex:r,overrideDevicePixelRatio:l}=e;this.chartService=t,this.syncManager=n,this.zoomManager=t.zoomManager,this.domManager=new $x(a),i?.setContainer(this.domManager),this.scene=i??new Lg({pixelRatio:l,domManager:this.domManager}),this.scene.setRoot(s),this.axisManager=new jI(s),this.localeManager=new N2,this.annotationManager=new KI(t.annotationRoot),this.chartEventManager=new Jx,this.cursorManager=new ib(this.domManager),this.highlightManager=new nb,this.interactionManager=new Ex(t.keyboard,this.domManager),this.keyNavManager=new ab(this.interactionManager,this.domManager),this.focusIndicator=new r2(this.domManager),this.regionManager=new _2(this.interactionManager,this.keyNavManager,this.focusIndicator),this.contextMenuRegistry=new tb(this.regionManager),this.toolbarManager=new lb,this.gestureDetector=new sb(this.domManager),this.layoutService=new hb,this.ariaAnnouncementService=new p2(this.localeManager,this.domManager,this.layoutService),this.updateService=new ub(o),this.proxyInteractionService=new h2(this.updateService,this.localeManager,this.domManager,this.focusIndicator),this.seriesStateManager=new O2,this.stateManager=new FI,this.callbackCache=new YI,this.animationManager=new Qx(this.interactionManager,r),this.animationManager.skip(),this.animationManager.play(),this.dataService=new wu(this.animationManager),this.tooltipManager=new Pu(this.domManager,t.tooltip)}destroy(){this.tooltipManager.destroy(),this.contextMenuRegistry.destroy(),this.regionManager.destroy(),this.proxyInteractionService.destroy(),this.focusIndicator.destroy(),this.keyNavManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.ariaAnnouncementService.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.callbackCache.invalidateCache(),this.animationManager.reset(),this.syncManager.destroy(),this.domManager.destroy(),this.axisManager.destroy()}}}}),db,Oz=L({"packages/ag-charts-community/src/chart/chartHighlight.ts"(){"use strict";ne(),gt(),db=class extends xt{constructor(){super(...arguments),this.range="tooltip"}},_([A(Jt(["tooltip","node"],"a range"))],db.prototype,"range",2)}}),pb,jr,R2=L({"packages/ag-charts-community/src/chart/data/dataDomain.ts"(){"use strict";pb=class Vw{constructor(){this.domain=new Set}static is(e){return e instanceof Vw}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},jr=class Uw{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof Uw}static extendDomain(e,i=[1/0,-1/0]){for(const s of e)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}}}});function Cz(t){return t.map(e=>Ts(e)?JSON.stringify(e):e).join("-")}function Ez(t){return Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(t*1e4)/1e4}function Rz(t){if(t==null)return[];let[e,i]=t.map(Number);return e===0&&i===0?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0?e=0:i===-1/0&&(i=0),Ot(e)&&Ot(i)?[e,i]:[])}function es(t,e){var i;const s=Rz(t);if(s.length===0)return s;let[n,a]=s;if(n===a){const[o,r]=(i=e?.calculatePadding(n,a))!=null?i:[1,1];n-=o,a+=r}return[n,a]}function gb(t,e){var i;return(i=e?.get(t.id))!=null?i:0}function w2(t){const e=[];let i=0,s;const n=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;s=n.exec(t);){if(s.index!==i)return;i=s.index+s[0].length;const a=s[1].trim();if(a.startsWith("."))e.push(a.slice(1).trim());else if(a.startsWith("[")){const o=a.slice(1,-1).trim();o.startsWith("'")?e.push(o.slice(1,-1).replace(new RegExp("(?<!\\\\)\\\\'","g"),"'")):o.startsWith('"')?e.push(o.slice(1,-1).replace(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):e.push(o)}else e.push(a)}if(i===t.length)return e}function wz(t){return e=>{let i=e;for(const s of t)i=i[s];return i}}function Pz(t){var e,i;const s=(n,a)=>{a.length>0&&(Z.log(`DataModel.processData() - ${n}`),Z.table(a))};if(Z.log("DataModel.processData() - processedData",t),s("Key Domains",t.domain.keys),s("Group Domains",(e=t.domain.groups)!=null?e:[]),s("Value Domains",t.domain.values),s("Aggregate Domains",(i=t.domain.aggValues)!=null?i:[]),t.type==="grouped"){const n=t.data.reduce((a,o)=>{var r,l;const c=(r=o.keys)!=null?r:[],h=(l=o.aggValues)!=null?l:[],u=o.keys.map(()=>{}),d=h?.map(()=>{});return a.push(...o.values.map((p,g)=>[...g===0?c:u,...p??[],...g==0?h:d])),a},[]);s("Values",n)}else{const n=t.data.reduce((a,o)=>{var r;const l=(r=o.aggValues)!=null?r:[];return a.push([...o.keys,...o.values,...l]),a},[]);s("Values",n)}}var To,fb,Yn=L({"packages/ag-charts-community/src/chart/data/dataModel.ts"(){"use strict";Ee(),Zh(),yt(),_t(),Ct(),R2(),To=Symbol("invalid"),fb=class{constructor(t,e="standalone"){this.opts=t,this.mode=e,this.debug=Xt.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let i=!0;for(const n of t.props){if(n.type==="key"&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");n.type==="value"&&i&&(i=!1)}const s=({matchGroupIds:n=[]})=>{for(const a of n)if(this.values.every(o=>o.groupId!==a))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${a}).`)};for(const n of t.props)switch(n.type){case"key":this.keys.push(K(B({},n),{index:this.keys.length,missing:new Map}));break;case"value":if(n.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(n)}`);this.values.push(K(B({},n),{index:this.values.length,missing:new Map}));break;case"aggregate":s(n),this.aggregates.push(K(B({},n),{index:this.aggregates.length}));break;case"group-value-processor":s(n),this.groupProcessors.push(K(B({},n),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(K(B({},n),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(K(B({},n),{index:this.reducers.length}));break;case"processor":this.processors.push(K(B({},n),{index:this.processors.length}));break}}resolveProcessedDataDefById(t,e){var i;const s=(i=this.scopeCache.get(t.id))==null?void 0:i.get(e);if(!s)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:s.index,def:s}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map(i=>[i,this.resolveProcessedDataDefById(t,i)])}resolveProcessedDataDefsValues(t,{keys:e,values:i}){const s={};for(const[n,{index:a,def:o}]of t){const r=o.type==="key"?e:i;s[n]=r[a]}return s}getDomain(t,e,i="value",s){var n;const a=this.getDomainsByType(i,s);return(n=a?.[this.resolveProcessedDataIndexById(t,e)])!=null?n:[]}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){var i;const{opts:{groupByKeys:s,groupByFn:n},aggregates:a,groupProcessors:o,reducers:r,processors:l,propertyProcessors:c}=this,h=performance.now();if(s&&this.keys.length===0)return;let u=this.extractData(t,e);if(s?u=this.groupData(u):n&&(u=this.groupData(u,n(u))),o.length>0&&this.postProcessGroups(u),a.length>0&&this.aggregateData(u),c.length>0&&this.postProcessProperties(u),r.length>0&&this.reduceData(u),l.length>0&&this.postProcessData(u),t.length>0){for(const p of vp(this.keys,this.values))for(const[g,f]of p.missing)if(f>=t.length){const m=g==null?"":` for ${g}`;Z.warnOnce(`the key '${p.property}' was not found in any data element${m}.`)}}const d=performance.now();u.time=d-h,this.debug.check()&&Pz(u),this.scopeCache.clear();for(const p of vp(this.keys,this.values,this.aggregates))if(p.idsMap)for(const[g,f]of p.idsMap)for(const m of f)if(!this.scopeCache.has(g))this.scopeCache.set(g,new Map([[m,p]]));else{if((i=this.scopeCache.get(g))!=null&&i.has(m))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(g).set(m,p)}return u}valueGroupIdxLookup({matchGroupIds:t}){const e=[];for(const[i,s]of this.values.entries())(!t||s.groupId&&t.includes(s.groupId))&&e.push(i);return e}valueIdxLookup(t,e){const i=t==null||t.length===0,s=typeof e=="string"?e:e.id,n=o=>{if(o.idsMap){for(const[r,l]of o.idsMap)if(t?.includes(r)&&l.has(s))return!0}return!1},a=this.values.findIndex(o=>(o.scopes==null||i&&!o.scopes.length||o.scopes.some(l=>t?.includes(l)))&&(o.property===s||o.id===s||n(o)));if(a===-1)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return a}extractData(t,e){var i,s,n,a;const{dataDomain:o,processValue:r,scopes:l,allScopesHaveSameDefs:c}=this.initDataDomainProcessor(),h=new Map(e?.map(v=>[v.id,v])),{keys:u,values:d}=this,p=new Array(t.length);let g=0,f=0;for(const[v,y]of t.entries()){const x={},b=l.size>0?new Set(l):void 0,S=new Array(u.length);let k=0,D;for(const C of u){if(D=r(C,y,D),D===To)break;S&&(S[k++]=D)}if(D===To)continue;const T=d.length>0?new Array(d.length):void 0;let I;for(const[C,E]of d.entries()){for(const O of(i=E.scopes)!=null?i:l){const P=h.get(O),w=(s=P?.data[v])!=null?s:y;if(I=r(E,w,I,O),!(I===To||!T)){if(P!=null&&E.includeProperty!==!1){const R=E.includeProperty&&E.id!=null?E.id:E.property;(n=x[O])!=null||(x[O]={}),x[O][R]=I}T[C]=I}}if(I===To){if(c)break;for(const O of(a=E.scopes)!=null?a:l)b?.delete(O);if(b?.size===0)break}}if(I===To&&c||b?.size===0)continue;const N={datum:B(B({},y),x),keys:S,values:T};!c&&b&&b.size<l.size&&(f++,N.validScopes=new Set(b)),p[g++]=N}p.length=g;const m=v=>{const y=o.get(v),x=y.getDomain();return jr.is(y)&&x[0]>x[1]?[]:x};return{type:"ungrouped",input:{count:t.length},data:p,domain:{keys:u.map(m),values:d.map(m)},defs:{allScopesHaveSameDefs:c,keys:u,values:d},partialValidDataCount:f,time:0}}groupData(t,e){var i;const s=new Map;for(const r of t.data){const{keys:l,values:c,datum:h,validScopes:u}=r,d=(i=e?.(r))!=null?i:l,p=Cz(d);if(s.has(p)){const g=s.get(p);if(g.values.push(c),g.datum.push(h),u!=null&&g.validScopes!=null)for(const f of g.validScopes)u.has(f)||g.validScopes.delete(f)}else s.set(p,{keys:d,values:[c],datum:[h],validScopes:u})}const n=new Array(s.size),a=new Array(s.size);let o=0;for(const{keys:r,values:l,datum:c,validScopes:h}of s.values())h?.size!==0&&(a[o]=r,n[o++]={keys:r,values:l,datum:c,validScopes:h});return K(B({},t),{type:"grouped",data:n,domain:K(B({},t.domain),{groups:a})})}aggregateData(t){var e,i,s,n,a,o,r;const l=t.type==="ungrouped";t.domain.aggValues=[];for(const[c,h]of this.aggregates.entries()){const u=this.valueGroupIdxLookup(h),d=[1/0,-1/0];for(const p of t.data){if((e=p.aggValues)!=null||(p.aggValues=new Array(this.aggregates.length)),p.validScopes)continue;const g=l?[p.values]:p.values;let f=(s=(i=h.groupAggregateFunction)==null?void 0:i.call(h))!=null?s:[1/0,-1/0];for(const v of g){const y=u.map(b=>v[b]),x=h.aggregateFunction(y,p.keys);x&&(f=(a=(n=h.groupAggregateFunction)==null?void 0:n.call(h,x,f))!=null?a:jr.extendDomain(x,f))}const m=((r=(o=h.finalFunction)==null?void 0:o.call(h,f))!=null?r:f).map(v=>Ez(v));p.aggValues[c]=m,jr.extendDomain(m,d)}t.domain.aggValues.push(d)}}postProcessGroups(t){var e,i;const{groupProcessors:s}=this,n=new Set,a=new Map,o=new Map,r=new Map;for(const c of s){const h=this.valueGroupIdxLookup(c);o.set(c,h),r.set(c,c.adjust());for(const u of h){const p=this.values[u].valueType==="category";n.add(u),a.set(u,p?new pb:new jr)}}const l=c=>{var h;for(const u of n)(h=a.get(u))==null||h.extend(c[u])};for(const c of t.data){for(const h of s){if(c.validScopes)continue;const u=(e=o.get(h))!=null?e:[],d=(i=r.get(h))==null?void 0:i();if(d)if(t.type==="grouped")for(const p of c.values)p&&d(p,u);else c.values&&d(c.values,u)}if(t.type==="grouped")for(const h of c.values)l(h);else l(c.values)}for(const[c,h]of a)t.domain.values[c]=h.getDomain()}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)e()(t,this.valueIdxLookup(s,i))}reduceData(t){var e,i;(e=t.reduced)!=null||(t.reduced={});for(const s of this.reducers){const n=s.reducer();let a=s.initialValue;for(const o of t.data)(!o.validScopes||(i=s.scopes)!=null&&i.some(r=>{var l;return(l=o.validScopes)==null?void 0:l.has(r)}))&&(a=n(a,o));t.reduced[s.property]=a}}postProcessData(t){var e;(e=t.reduced)!=null||(t.reduced={});for(const i of this.processors)t.reduced[i.property]=i.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const c of e)if(c.scopes)for(const h of c.scopes)i.add(h);const s=new Map,n=new Map;let a=!0;const o=()=>{var c;for(const h of vp(t,e))h.valueType==="category"?s.set(h,new pb):(s.set(h,new jr),a&&(a=((c=h.scopes)!=null?c:[]).length===i.size))};o();const r=this.buildAccessors(vp(t,e));return{dataDomain:s,processValue:(c,h,u,d)=>{var p,g,f,m,v;let y,x;if(r.has(c.property)){try{x=r.get(c.property)(h)}catch{}y=x!=null}else y=c.property in h,x=y?h[c.property]:c.missingValue;c.forceValue!=null&&(x=y&&nc(x)?-1*c.forceValue:c.forceValue,y=!0);const b="missingValue"in c;if(!y&&!b){const S=(p=c.missing.get(d))!=null?p:0;c.missing.set(d,S+1)}if(s.has(c)||o(),y&&!((f=(g=c.validation)==null?void 0:g.call(c,x,h))==null||f))if("invalidValue"in c)x=c.invalidValue;else return this.mode!=="integrated"&&Z.warnOnce(`invalid value of type [${typeof x}] for [${c.scopes} / ${c.id}] ignored:`,`[${x}]`),To;return c.processor&&(n.has(c)||n.set(c,c.processor()),x=(m=n.get(c))==null?void 0:m(x,u===To?void 0:u)),(v=s.get(c))==null||v.extend(x),x},initDataDomain:o,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(t){const e=new Map;if(this.mode==="integrated")return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;const n=w2(i.property);if(n==null){Z.warnOnce("Invalid property path [%s]",i.property);continue}const a=wz(n);e.set(i.property,a)}return e}}}}),mb,yb,P2=L({"packages/ag-charts-community/src/chart/data/dataController.ts"(){"use strict";Ee(),Ue(),Yn(),mb=class bo{constructor(e){this.mode=e,this.debug=Xt.create(!0,"data-model"),this.requested=[],this.status="setup"}request(e,i,s){return F(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,a)=>{this.requested.push({id:e,opts:s,data:i,resolve:n,reject:a})})})}execute(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const e=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",e);const i=this.mergeRequested(e);this.debug("DataController.execute() - merged",i),this.debug.check()&&(Un().processedData=[]);const s=this.requested.map(({id:a})=>a),n=this.hasMultipleDataSources(e);for(const{opts:a,data:o,resolves:r,rejects:l,ids:c}of i)try{const h=new fb(a,this.mode),u=h.processData(o,e);this.debug.check()&&Un("processedData").push(u),u?.partialValidDataCount===0?r.forEach((d,p)=>d({dataModel:h,processedData:this.processScopedData(c[p],u,s,n)})):u?this.splitResult(h,u,c,r):l.forEach(d=>d(new Error("AG Charts - no processed data generated")))}catch(h){l.forEach(u=>u(h))}}hasMultipleDataSources(e){if(e.length){const[{data:i},...s]=e;return s.some(n=>i!==n.data)}return!1}processScopedData(e,i,s,n){const a=r=>{if(Array.isArray(r))return r.map(a);const l=n?B(B({},r),r[e]):r;for(const c of s)delete l[c];return l},o=r=>{var l;return Array.isArray(r)?r.map(o):(l=r?.[e])!=null?l:r};return K(B({},i),{data:i.data.map(r=>{var l;return K(B({},r),{datum:a(r.datum),values:n?(l=r.values)==null?void 0:l.map(o):r.values})})})}validateRequests(e){const i=[];for(const[s,n]of e.entries())s>0&&n.data.length!==e[0].data.length&&n.opts.groupByData===!1?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(n);return i}mergeRequested(e){const i=[];for(const s of e){const n=i.find(bo.groupMatch(s));n?n.push(s):i.push([s])}return i.map(bo.mergeRequests)}splitResult(e,i,s,n){for(let a=0;a<s.length;a++){const o=s[a],r=n[a];r({dataModel:e,processedData:K(B({},i),{data:i.data.filter(({validScopes:l})=>{var c;return(c=l?.has(o))!=null?c:!0})})})}}static groupMatch({data:e,opts:i}){function s(n){return n.filter(a=>a.type==="key").map(a=>a.property).join(";")}return([n])=>(i.groupByData===!1||n.data===e)&&n.opts.groupByKeys===i.groupByKeys&&n.opts.groupByFn===i.groupByFn&&s(n.opts.props)===s(i.props)}static mergeRequests(e){return e.reduce((i,s)=>{var{id:n,data:a,resolve:o,reject:r,opts:l}=s,c=l,{props:h}=c,u=se(c,["props"]),d,p,g,f,m;i.ids.push(n),i.rejects.push(r),i.resolves.push(o),(d=i.data)!=null||(i.data=a),(p=i.opts)!=null||(i.opts=K(B({},u),{props:[]}));for(const v of h){const y=K(B({},v),{scopes:[n]});bo.createIdsMap(n,y);const x=i.opts.props.find(b=>b.type===y.type&&bo.deepEqual(b,y));if(!x){i.opts.props.push(y);continue}(g=x.scopes)!=null||(x.scopes=[]),x.scopes.push(...(f=y.scopes)!=null?f:[]),(x.type==="key"||x.type==="value")&&((m=y.idsMap)!=null&&m.size)&&bo.mergeIdsMap(y.idsMap,x.idsMap)}return i},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,i){for(const[s,n]of e)if(i.has(s))for(const a of n)i.get(s).add(a);else i.set(s,new Set(n))}static createIdsMap(e,i){var s;i.id!=null&&((s=i.idsMap)!=null||(i.idsMap=new Map),i.idsMap.has(e)?i.idsMap.get(e).add(i.id):i.idsMap.set(e,new Set([i.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(e)){if(n=e.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!bo.deepEqual(e[s],i[s]))return!1;return!0}const a=Object.keys(e);if(n=a.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const o=a[s];if(!bo.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!bo.deepEqual(e[o],i[o])))return!1}return!0}return!1}},mb.skipKeys=new Set(["id","idsMap","type","scopes"]),yb=mb}}),B2,Ea,Tc=L({"packages/ag-charts-community/src/chart/factory/axisRegistry.ts"(){"use strict";B2=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){const i=this.axesMap.get(t);if(i)return new i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(t=>!this.hidden.has(t))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},Ea=new B2}});function Bz(t){return Xr.some(e=>e.type==="series"&&e.identifier===t)}function Bu(t){var e;return(e=Xr.find(i=>i.type==="series"&&i.identifier===t))==null?void 0:e.chartTypes}function Fz(t){var e;return((e=Bu(t))==null?void 0:e.find(s=>s==="cartesian"))==="cartesian"}function zz(t){var e;return((e=Bu(t))==null?void 0:e.find(s=>s==="polar"))==="polar"}function Gz(t){var e;return((e=Bu(t))==null?void 0:e.find(s=>s==="hierarchy"))==="hierarchy"}function Vz(t){var e;return((e=Bu(t))==null?void 0:e.find(s=>s==="topology"))==="topology"}function Uz(t){var e;return((e=Bu(t))==null?void 0:e.find(s=>s==="flow-proportion"))==="flow-proportion"}function Hz(t){return t.packageType==="enterprise"}function Wz(t){var e;if(!Hz(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const i=Xr.find(s=>s.type===t.type&&s.optionsKey===t.optionsKey&&s.identifier===t.identifier&&t.chartTypes.every(n=>s.chartTypes.includes(n)));return i&&((e=i.useCount)!=null||(i.useCount=0),i.useCount++),i!=null}function Yz(){return Xr.filter(({useCount:t})=>t==null||t===0)}var Xr,Fu=L({"packages/ag-charts-community/src/chart/factory/expectedEnterpriseModules.ts"(){"use strict";Xr=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}]}}),F2,Fg,vb=L({"packages/ag-charts-community/src/chart/factory/legendRegistry.ts"(){"use strict";F2=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,instanceConstructor:i,themeTemplate:s}){this.legendMap.set(t,{optionsKey:e,instanceConstructor:i}),this.themeTemplates.set(e,s)}create(t,e){var i;const s=(i=this.legendMap.get(t))==null?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,i])=>(t[e]=i.optionsKey,t),{})}},Fg=new F2}}),$r,zg=L({"packages/ag-charts-community/src/module/enterpriseModule.ts"(){"use strict";$r={isEnterprise:!1}}}),xb,z2,Re,bb,Gg,Nc=L({"packages/ag-charts-community/src/chart/factory/chartTypes.ts"(){"use strict";ue(),xb=class extends Map{get(t){var e;return(e=super.get(t))!=null?e:"unknown"}isCartesian(t){return this.get(t)==="cartesian"}isPolar(t){return this.get(t)==="polar"}isHierarchy(t){return this.get(t)==="hierarchy"}isTopology(t){return this.get(t)==="topology"}isFlowProportion(t){return this.get(t)==="flow-proportion"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}get flowProportionTypes(){return this.seriesTypes.filter(t=>this.isFlowProportion(t))}},z2=class extends Map{set(t,e){return super.set(t,kt(e,this.get(t)))}},Re=new xb,bb=new xb,Gg=new z2}}),G2,Wi,Vg=L({"packages/ag-charts-community/src/chart/factory/seriesRegistry.ts"(){"use strict";zg(),bi(),ue(),Nc(),G2=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],instanceConstructor:i,tooltipDefaults:s,defaultAxes:n,themeTemplate:a,enterpriseThemeTemplate:o,paletteFactory:r,solo:l,stackable:c,groupable:h,stackedByDefault:u,swapDefaultAxesCondition:d,hidden:p}){this.setThemeTemplate(t,a,o),this.seriesMap.set(t,{instanceConstructor:i,tooltipDefaults:s,defaultAxes:n,paletteFactory:r,solo:l,stackable:c,groupable:h,stackedByDefault:u,swapDefaultAxesCondition:d}),Re.set(t,e),p||bb.set(t,e)}create(t,e){var i;const s=(i=this.seriesMap.get(t))==null?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t){var e;const i=(e=this.seriesMap.get(t))==null?void 0:e.defaultAxes;return i?{axes:ri(i)}:null}setThemeTemplate(t,e,i={}){const s=this.themeTemplates.get(t);this.themeTemplates.set(t,{community:kt(e,s?.community),enterprise:kt(i,e,s?.community)})}getThemeTemplate(t){const e=this.themeTemplates.get(t);return $r.isEnterprise?e?.enterprise:e?.community}getPaletteFactory(t){var e;return(e=this.seriesMap.get(t))==null?void 0:e.paletteFactory}getTooltipDefauls(t){var e;return(e=this.seriesMap.get(t))==null?void 0:e.tooltipDefaults}isSolo(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.solo)!=null?i:!1}isGroupable(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.groupable)!=null?i:!1}isStackable(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.stackable)!=null?i:!1}isStackedByDefault(t){var e,i;return(i=(e=this.seriesMap.get(t))==null?void 0:e.stackedByDefault)!=null?i:!1}isDefaultAxisSwapNeeded(t){var e,i,s;let n;for(const a of(e=t.series)!=null?e:[]){const{type:o="line"}=a,r=(s=(i=this.seriesMap.get(o))==null?void 0:i.swapDefaultAxesCondition)==null?void 0:s.call(i,a);if(r!=null){if(n!=null&&n!=r)throw new Error("AG Charts - The provided series have incompatible directions");n=r}}return n}},Wi=new G2}}),Ug,V2,Kz=L({"packages/ag-charts-community/src/chart/interaction/syncManager.ts"(){"use strict";cn(),Ug=class Jl extends Rs{constructor(e){super(),this.chart=e}subscribe(e=Jl.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,Jl.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=Jl.DEFAULT_GROUP){var i;return(i=this.get(e))==null||i.delete(this.chart),this}getChart(){return this.chart}getGroup(e=Jl.DEFAULT_GROUP){const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=Jl.DEFAULT_GROUP){return this.getGroup(e).filter(i=>i!==this.chart)}get(e){return Jl.chartsGroups.get(e)}},Ug.chartsGroups=new Map,Ug.DEFAULT_GROUP=Symbol("sync-group-default"),V2=Ug}}),Sb,U2,H2=L({"packages/ag-charts-community/src/chart/interaction/zoomManager.ts"(){"use strict";bi(),Eg(),cn(),de(),Sb=class extends Rs{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new Wr(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(t){var e;const i=new Map(t.map(s=>[s.id,this.axisZoomManagers.get(s.id)]));this.axisZoomManagers.clear();for(const s of t)this.axisZoomManagers.set(s.id,(e=i.get(s.id))!=null?e:new U2(s));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e,i=!0,s){var n;if(s&&this.rejectCallbacks.set(t,s),this.axisZoomManagers.size===0){const a=this.state.stateId();a==="initial"||a===t||i?(this.state.set(t,e),a!==t&&((n=this.rejectCallbacks.get(a))==null||n(t))):s?.(a);return}this.state.set(t,e),this.axisZoomManagers.forEach(a=>{a.updateZoom(t,e?.[a.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,i){var s;(s=this.axisZoomManagers.get(e))==null||s.updateZoom(t,i),this.applyChanges(t)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?t??(t=i.getZoom()):i.getDirection()==="y"&&(e??(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){var e,i;return(i=(e=this.axisZoomManagers.get(t))==null?void 0:e.getZoom())!=null?i:{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(t){if(!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).some(Boolean))return;const i={};for(const[s,n]of this.axisZoomManagers.entries())i[s]=n.getZoom();this.listeners.dispatch("zoom-change",K(B({type:"zoom-change"},this.getZoom()),{axes:i,callerId:t}))}},U2=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new Wr({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return ri(this.state.stateValue())}applyChanges(){const t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}}}}),Hg,jz=L({"packages/ag-charts-community/src/chart/keyboard.ts"(){"use strict";ne(),gt(),Hg=class extends xt{constructor(){super(...arguments),this.enabled=!1}},_([A(pt)],Hg.prototype,"enabled",2),_([A(jt)],Hg.prototype,"tabIndex",2)}});function Xz(t){var e;return t instanceof ot?t.computeCenter():(e=t?.computeTransformedBBox())==null?void 0:e.computeCenter()}function W2(t,e){var i;const{bounds:s,showFocusBox:n}=e;n&&t?.updateBounds(s);const{x:a,y:o}=(i=Xz(s))!=null?i:{};if(a!==void 0&&o!==void 0)return{type:"keyboard",offsetX:a,offsetY:o}}var Y2=L({"packages/ag-charts-community/src/chart/keyboardUtil.ts"(){"use strict";Mt()}});function $z(t){return typeof t=="string"&&Mb.includes(t)}function Zz(t){const e=[],i=[],s=[...Mb];for(const n of t)n instanceof Hr&&($z(n.position)?i.push(n.position):e.push(n));for(const n of e){let a;do a=s.pop();while(a&&i.includes(a));if(a==null)break;n.position=a}}var Mb,qz=L({"packages/ag-charts-community/src/chart/mapping/prepareAxis.ts"(){"use strict";_c(),Mb=["top","right","bottom","left"]}});function Qz(t,e,i){var s,n,a,o;const r=(g,f)=>{const m=[g];for(const v of K2)v in f&&f[v]!=null&&m.push(`${v}=${f[v]}`);return m.join(";")},l=new Map;let c=0;for(const g of t){const f=r(g.type,g.properties);l.has(f)||l.set(f,[]),(s=l.get(f))==null||s.push([g,c++])}const h=new Map;for(const g of e){const f=r(g.type,g);h.has(f)||h.set(f,[]),(n=h.get(f))==null||n.push(g)}if(![...l.keys()].some(g=>h.has(g)))return{status:"no-overlap",oldKeys:l.keys(),newKeys:h.keys()};const d=[];let p=-1;for(const[g,f]of h.entries())for(const m of f){p++;const v=l.get(g);if(v==null||v.length<1){d.push({opts:m,idx:p,status:"add"}),l.delete(g);continue}const[y,x]=v.shift(),b=(a=i?.[x])!=null?a:{},S=gs(b,m??{}),{groupIndex:k,stackIndex:D}=(o=S?.seriesGrouping)!=null?o:{};k!=null||D!=null?d.push({opts:m,series:y,diff:S,idx:x,status:"series-grouping"}):S?d.push({opts:m,series:y,diff:S,idx:x,status:"update"}):d.push({opts:m,series:y,idx:x,status:"no-op"}),v.length===0&&l.delete(g)}for(const g of l.values())for(const[f,m]of g)d.push({series:f,idx:m,status:"remove"});return{status:"overlap",changes:d}}var K2,Jz=L({"packages/ag-charts-community/src/chart/mapping/prepareSeries.ts"(){"use strict";bi(),K2=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"]}});function Zr(t){var e,i,s;return(s=(i=(e=t.series)==null?void 0:e[0])==null?void 0:i.type)!=null?s:"line"}function Oc(t){const e=Zr(t);return e==null?!0:e==="cartesian"?(Z.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Re.isCartesian(e)||Fz(e)}function Wg(t){const e=Zr(t);return e==null?!1:e==="polar"?(Z.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Re.isPolar(e)||zz(e)}function _b(t){const e=Zr(t);return e==null?!1:e==="hierarchy"?(Z.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Re.isHierarchy(e)||Gz(e)}function kb(t){const e=Zr(t);return e==null?!1:e==="topology"?(Z.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Re.isTopology(e)||Vz(e)}function Db(t){const e=Zr(t);return e==null?!1:e==="flow-proportion"?(Z.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Re.isFlowProportion(e)||Uz(e)}function tG(t){const e=Zr(t);return Wg(t)&&e!=="pie"&&e!=="donut"}function eG(t){return t==null?!1:Re.has(t)}function iG(t){return t==null?!1:Ea.has(t)}var Yg=L({"packages/ag-charts-community/src/chart/mapping/types.ts"(){"use strict";yt(),Tc(),Nc(),Fu()}}),j2,sG=L({"packages/ag-charts-community/src/chart/modulesManager.ts"(){"use strict";Dx(),ne(),j2=class extends dg{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&Pn(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())t.type==="legend"&&(yield{legendType:t.identifier,legend:e})}}}}),Kg,Ib,Cc,Ab=L({"packages/ag-charts-community/src/chart/overlay/overlay.ts"(){"use strict";Ue(),ne(),gt(),Kg="ag-chart-overlay",Ib="ag-chart-dark-overlay",Cc=class extends xt{constructor(t,e){super(),this.className=t,this.defaultMessageId=e}getText(t){var e;return t.t((e=this.text)!=null?e:this.defaultMessageId)}getElement(t,e,i){var s;if((s=this.content)==null||s.remove(),this.focusBox=i,this.renderer){const n=this.renderer();this.content=ui("div"),n instanceof HTMLElement?this.content.replaceChildren(n):this.content.innerHTML=n}else{const n=ui("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});n.innerText=this.getText(e),this.content=n,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(a){n.style.opacity=String(a)},onStop(){n.style.opacity="1"}})}return this.content}removeElement(t=()=>{var i;return(i=this.content)==null?void 0:i.remove()},e){if(this.content){if(e){const{content:i}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){t?.()}})}else t?.();this.content=void 0,this.focusBox=void 0}}},_([A(et,{optional:!0})],Cc.prototype,"text",2),_([A(Bi,{optional:!0})],Cc.prototype,"renderer",2)}}),Ec,nG=L({"packages/ag-charts-community/src/chart/overlay/chartOverlays.ts"(){"use strict";ne(),gt(),Ab(),Ec=class extends xt{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new Cc("ag-chart-loading-overlay","overlayLoadingData"),this.noData=new Cc("ag-chart-no-data-overlay","overlayNoData"),this.noVisibleSeries=new Cc("ag-chart-no-visible-series","overlayNoVisibleSeries")}getFocusInfo(t){for(const e of[this.loading,this.noData,this.noVisibleSeries])if(e.focusBox!==void 0)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}},_([A(pt)],Ec.prototype,"darkTheme",2),_([A(rt)],Ec.prototype,"loading",2),_([A(rt)],Ec.prototype,"noData",2),_([A(rt)],Ec.prototype,"noVisibleSeries",2)}});function aG(t,e){const{animationDuration:i}=cc.add,s=i*e,n=ui("div",`${Kg}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),a=ui("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=ui("p",{marginTop:"1em"});o.innerText=t;const r=ui("div",`${Kg}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=ui("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(l,a,o,r),n}var oG=L({"packages/ag-charts-community/src/chart/overlay/loadingSpinner.ts"(){"use strict";Lr(),Ue(),Ab()}});function jg(t,e=[0,0]){for(const i of t)typeof i=="number"&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function rG(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>jg(s)}}function X2(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:i=>jg(i),groupAggregateFunction:(i,s=[0,0])=>{var n,a;return s[0]+=(n=i?.[0])!=null?n:0,s[1]+=(a=i?.[1])!=null?a:0,s}}}function $2(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:s=>jr.extendDomain(s)}}function Lb(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,i=[0,0])=>{var s,n;return i[0]+=(s=e?.[0])!=null?s:0,i[1]+=(n=e?.[1])!=null?n:0,i}}}function Z2(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:s=>jg(s),groupAggregateFunction:(s,n=[0,0,-1])=>{var a,o;return n[0]+=(a=s?.[0])!=null?a:0,n[1]+=(o=s?.[1])!=null?o:0,n[2]++,n},finalFunction:(s=[0,0,0])=>{const n=s[0]+s[1];return n>=0?[0,n/s[2]]:[n/s[2],0]}}}function Tb(t,e,i){const s={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(n,a=[])=>{const o=a[1]-a[0];return e.aggregateFunction(n).map(r=>r/o)}};return e.groupAggregateFunction&&(s.groupAggregateFunction=e.groupAggregateFunction),s}function q2(t){return()=>{let e=0;return i=>Ot(i)?(e+=t?Math.max(0,i):i,e):i}}function Q2(){return()=>{let t=0;return e=>{if(!Ot(e))return e;const i=t;return t+=e,i}}}var Nb=L({"packages/ag-charts-community/src/chart/data/aggregateFunctions.ts"(){"use strict";Ct(),R2()}});function lG({normaliseTo:t,mode:e}){const i=(s,n)=>{const a=s*t/n;return a>=0?Math.min(t,a):Math.max(-t,a)};return()=>()=>(s,n)=>{const a=[0,0];for(const r of n){const l=s[r],c=l<0?0:1;e==="sum"?a[c]+=l:c===0?a[c]=Math.min(a[c],l):a[c]=Math.max(a[c],l)}const o=Math.max(Math.abs(a[0]),a[1]);for(const r of n)s[r]=i(s[r],o)}}function zu(t,e,i="sum"){return{type:"group-value-processor",matchGroupIds:t,adjust:Du({normaliseTo:e,mode:i},lG)}}function cG({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:s}){const n=t[1]-t[0],a=(o,r,l)=>{const c=t[0]+(o-r)/l*n;return l===0?e:c>=t[1]?t[1]:c<t[0]?t[0]:c};return()=>(o,r)=>{let[l,c]=o.domain.values[r];i!=null&&(l=i),s!=null&&(c=s);const h=c-l;o.domain.values[r]=[t[0],t[1]];for(const u of o.data){let d=u.values;o.type==="ungrouped"&&(d=[d]);for(const p of d)p[r]=a(p[r],l,h)}}}function Gu(t,e,i,s,n){return{type:"property-value-processor",property:t,adjust:Du({normaliseTo:e,rangeMin:s,rangeMax:n,zeroDomain:i},cG)}}function Rc(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:s}=e.defs,{input:n,data:a}=e;let o=!0,r=!0;const l=[];for(let h=0;h<s.length;h++)t?.includes(s[h].id)&&l.push([h,s[h]]);const c=(h,u,d)=>{var p;if(u.valueType==="category"){const f=e.domain[d][h];o&&(o=f.length===n.count);return}let g=(p=a[0])==null?void 0:p[d][h];for(let f=1;(o||r)&&f<a.length;f++){const m=a[f][d][h];r&&(r=g<=m),o&&(o=g!==m),g=m}};for(let h=0;(o||r)&&h<i.length;h++)c(h,i[h],"keys");for(let h=0;(o||r)&&h<l.length;h++){const[u,d]=l[h];c(u,d,"values")}return{uniqueKeys:o,orderedKeys:r}}}}function hG({mode:t,separateNegative:e}){return()=>()=>(i,s)=>{const n=[0,0];for(const a of s){const o=i[a],r=nc(o)&&e?0:1;Ot(o)&&(t==="normal"&&(n[r]+=o),i[a]=n[r],t==="trailing"&&(n[r]+=o))}}}function uG({mode:t,sum:e}){return()=>{const i=[];let s=!0;return()=>(n,a)=>{let o=0;for(const r of a){const l=n[r],c=s&&e==="current"?0:i[r];i[r]=l;const h=e==="current"?l:c;if(!Ot(l)||!Ot(c)){n[r]=o;continue}t==="normal"&&(o+=h),n[r]=o,t==="trailing"&&(o+=h)}s=!1}}}function J2(t,e,i,s=!1){let n;if(e.startsWith("window")){const a=e.endsWith("-trailing")?"trailing":"normal";n=Du({mode:a,sum:i},uG)}else n=Du({mode:e,separateNegative:s},hG);return{type:"group-value-processor",matchGroupIds:[t],adjust:n}}function dG({separateNegative:t}){return()=>()=>(e,i)=>{const s=[!0,!0];for(const n of i){const a=e[n],o=nc(a)&&t?0:1;s[o]&&(s[o]=Ot(a)),e[n]=s[o]}}}function tA(t,e=!1){const i=Du({separateNegative:e},dG);return{type:"group-value-processor",matchGroupIds:[t],adjust:i}}function qr(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{const s=new Map,n=new Map,a=new Map,o=new Map,r=Math.max(t.data.length,i.data.length);for(let c=0;c<r;c++){const h=t.data[c],u=i.data[c],d=h?No(h.keys):"",p=u?No(u.keys):"";if(u&&h&&d===p){Rr(h.values,u.values)||a.set(p,u);continue}o.has(p)?((e||!Rr(o.get(p).values,u.values))&&(a.set(p,u),s.set(p,u)),o.delete(p)):u&&n.set(p,u),n.has(d)?((e||!Rr(n.get(d).values,h.values))&&(a.set(d,h),s.set(d,h)),n.delete(d)):h&&(a.delete(d),o.set(d,h))}return{changed:n.size>0||a.size>0||o.size>0,added:n,updated:a,removed:o,moved:s}}}}function No(t,...e){let i;return ke(t)?i=t.map(n=>yc(n)).join("___"):i=yc(t),(typeof i=="string"||typeof i=="number"||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}var Ob,Cb,Eb,Ra=L({"packages/ag-charts-community/src/chart/data/processors.ts"(){"use strict";Ve(),HD(),_t(),Ct(),vc(),Ob={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{const s=i.keys[0],n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n<e?n:e}}},Cb={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,i)=>{const s=i.keys[0],n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n>e?n:e}}},Eb={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t?.slice().sort((e,i)=>{for(let s=0;s<e.length;s++){const n=e[s]-i[s];if(n!==0)return n}return 0})}}});function Rb(t){return t!=null&&cg(t)}function pG(t){return t!=null}function eA(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return Rb;default:return pG}}function iA(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function di(t,e,i={}){return B({property:t,type:"key",valueType:iA(e),validation:eA(e)},i)}function Vt(t,e,i={}){return B({property:t,type:"value",valueType:iA(e),validation:eA(e)},i)}function wb(t,e={}){const i=e,{min:s=-1/0,max:n=1/0}=i,a=se(i,["min","max"]);return B({type:"value",property:t,valueType:"range",validation:Rb,processor:()=>o=>Ot(o)?St(s,o,n):o},a)}function Pb(t,e,i={}){const s=i,{onlyPositive:n}=s,a=se(s,["onlyPositive"]);return K(B({},Vt(t,e,a)),{processor:q2(n)})}function gG(t,e,i={}){return K(B({},Vt(t,e,i)),{processor:Q2()})}function dn(t,e,i="current",s,n){return[Vt(t,n,s),J2(s.groupId,e,i,s.separateNegative),...s.rangeId!=null?[$2(s.rangeId,s.groupId)]:[]]}function sA(t,e,i){return[Vt(t,i,e),tA(e.groupId,e.separateNegative)]}var Bb,wc,Xg,Qr,Di=L({"packages/ag-charts-community/src/chart/series/series.ts"(){"use strict";Dx(),be(),en(),bi(),Ao(),Ep(),_t(),ue(),wI(),Ye(),Ct(),vc(),de(),Nb(),Ra(),ts(),Bb=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(Bb||{}),wc=class{constructor(t,e,{datum:i},s){this.type=t,this.event=e,this.datum=i,this.seriesId=s.id}},Xg=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},Qr=class extends Hx{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=wc,this.internalId=wn(this),this.rootGroup=new ut({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new dg,this._declarationOrder=-1,this.seriesListeners=new Aa;const{moduleCtx:e,pickModes:i=[1],directionKeys:s={},directionNames:n={},contentGroupVirtual:a=!0,canHaveAxes:o=!1}=t;this.ctx=e,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=o,this.contentGroup=this.rootGroup.appendChild(new ut({name:`${this.internalId}-content`,isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new ut({name:`${this.internalId}-highlight`,isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ut({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ut({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new ut({name:`${this.internalId}-series-labels`,zIndex:8})),this.annotationGroup=new ut({name:`${this.id}-annotation`,isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var t,e;return(e=(t=this.properties)==null?void 0:t.id)!=null?e:this.internalId}get type(){var t;return(t=this.constructor.type)!=null?t:""}get data(){var t;return(t=this._data)!=null?t:this._chartData}set visible(t){this.properties.visible=t,this.visibleMaybeChanged()}get visible(){return this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){var t,e;return(e=(t=this.properties.tooltip)==null?void 0:t.enabled)!=null?e:!1}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:n}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:n,seriesGrouping:e}),this.fireEvent(new Xg(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3;break}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=e?.[i],n=[];if(!s)return n;const a=(...o)=>{for(const r of o)Array.isArray(r)?a(...r):typeof r=="object"?a(...Object.values(r)):n.push(r)};return a(...s.map(o=>this.properties[o])),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){var e;return(e=this.directionKeys[this.resolveKeyDirection(t)])!=null?e:[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules(s=>s.getDomain(t));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0,this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return e}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||e===void 0)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const i=(e=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())==null?void 0:e.series;return i==null?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,e)=>Object.assign(t,e),{})}pickNode(t,e){const{pickModes:i,visible:s,rootGroup:n}=this;if(!(!s||!n.visible))for(const a of i){if(e&&!e.includes(a))continue;let o;switch(a){case 0:o=this.pickNodeExactShape(t);break;case 1:case 2:o=this.pickNodeMainAxisFirst(t,a===2);break;case 3:o=this.pickNodeClosestDatum(t);break}if(o)return{pickMode:a,match:o.datum,distance:o.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e&&e.datum.missing!==!0)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=Cp(t.x,t.y,e);if(i.nearest!==void 0&&i.nearest.datum.missing!==!0)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return K(B({},this.ctx),{series:this})}getLabelText(t,e,i=String){var s;return t.formatter&&(s=this.ctx.callbackCache.call(t.formatter,B({seriesId:this.id},e)))!=null?s:i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){var s,n;const a={size:(n=(s=e.datum.point)==null?void 0:s.size)!=null?n:0},o=kt(a,i);if(t.itemStyler){const r=this.ctx.callbackCache.call(t.itemStyler,K(B(B({seriesId:this.id},o),e),{datum:e.datum.datum}));return kt(r,o)}return o}updateMarkerStyle(t,e,i,s=e.getStyle(),{applyTranslation:n=!0}={}){const{point:a}=i.datum,o=this.getMarkerStyle(e,i,s),r=this.visible&&o.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);n?t.setProperties(K(B({visible:r},o),{translationX:a?.x,translationY:a?.y})):t.setProperties(B({visible:r},o)),typeof e.shape=="function"&&!t.dirtyPath&&(t.path.clear(!0),t.updatePath(),t.checkPathDirty())}getMinRects(t,e){}get nodeDataDependencies(){var t;return(t=this._nodeDataDependencies)!=null?t:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,n=gs(this.nodeDataDependencies,s)!=null;return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(t){}},Qr.highlightedZIndex=1e12,_([Vi({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Qr.prototype,"seriesGrouping",2)}}),Fb,nA,fG=L({"packages/ag-charts-community/src/chart/series/seriesLayerManager.ts"(){"use strict";be(),_t(),ts(),Fb=30,nA=class{constructor(t,e,i){this.seriesRoot=t,this.highlightRoot=e,this.annotationRoot=i,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,s,n;const{internalId:a,type:o,rootGroup:r,highlightGroup:l,annotationGroup:c,seriesGrouping:h}=t,{groupIndex:u=a}=h??{};if(this.series[a]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[a]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=Fb?"aggressive-grouping":"normal"),(i=(e=this.groups)[o])!=null||(e[o]={});const d=this.lookupIdx(u);let p=this.groups[o][d];return p||(p=(n=(s=this.groups[o])[d])!=null?n:s[d]={type:o,id:d,seriesIds:[],group:this.seriesRoot.appendChild(new ut({name:`${o}-content`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new ut({name:`${o}-highlight`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new ut({name:`${o}-annotation`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[a]={layerState:p,seriesConfig:t},p.seriesIds.push(a),p.group.appendChild(r),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{internalId:s,seriesGrouping:n,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l,oldGrouping:c}=t,{groupIndex:h=s}=n??{};(i=(e=this.groups[a])==null?void 0:e[h])!=null&&i.seriesIds.includes(s)||(this.series[s]!=null&&this.releaseGroup({internalId:s,seriesGrouping:c,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,s;const{internalId:n,rootGroup:a,highlightGroup:o,annotationGroup:r,type:l}=t;if(this.series[n]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${n}`);const c=(e=this.series[n])==null?void 0:e.layerState;if(c&&(c.seriesIds=c.seriesIds.filter(h=>h!==n),c.group.removeChild(a),c.highlight.removeChild(o),c.annotation.removeChild(r)),c?.seriesIds.length===0)this.seriesRoot.removeChild(c.group),this.highlightRoot.removeChild(c.highlight),this.annotationRoot.removeChild(c.annotation),delete this.groups[c.type][c.id],delete this.groups[l][n];else if(c?.seriesIds.length>0){const h=(s=this.series[(i=c?.seriesIds)==null?void 0:i[0]])==null?void 0:s.seriesConfig;c.group.zIndexSubOrder=h?.getGroupZIndexSubOrder("data"),c.highlight.zIndexSubOrder=h?.getGroupZIndexSubOrder("highlight"),c.annotation.zIndexSubOrder=h?.getGroupZIndexSubOrder("annotation")}delete this.series[n]}lookupIdx(t){return this.mode==="normal"?t:typeof t=="string"&&(t=Number(t.split("-").at(-1)),!t)?0:Math.floor(St(0,t/this.expectedSeriesCount,1)*Fb)}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}}}}),aA,mG=L({"packages/ag-charts-community/src/chart/update/baseLayoutProcessor.ts"(){"use strict";hi(),yt(),zr(),aA=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("start-layout",i=>this.positionPadding(i)),this.layoutService.addListener("layout-complete",i=>this.alignCaptions(i)),this.layoutService.addListener("start-layout",i=>this.positionCaptions(i)))}destroy(){this.destroyFns.forEach(t=>t())}positionPadding(t){const{shrinkRect:e}=t,{padding:i}=this.chartLike;return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),K(B({},t),{shrinkRect:e})}positionCaptions(t){var e,i;const{shrinkRect:s,positions:n,padding:a}=t,{title:o,subtitle:r,footnote:l,titlePadding:c}=this.chartLike,h=s.clone().shrink(c),u=s.clone(),d=m=>{var v;const y=s.height/10,x=(v=m.lineHeight)!=null?v:m.fontSize*wt.defaultLineHeightRatio,b=s.width,S=Math.max(x,y);m.computeTextWrap(b,S)},p=m=>m==="left"?h.x:m==="right"?h.x+h.width:(m!=="center"&&Z.error(`invalid textAlign value: ${m}`),h.x+h.width/2),g=(m,v)=>{const y=h.y;m.node.x=p(m.textAlign),m.node.y=y,m.node.textBaseline="top",d(m);const x=m.node.computeBBox(),b=Math.ceil(x.y-y+x.height+v);return m.layoutStyle==="block"&&(u.shrink(b+2*c,"top"),h.shrink(b,"top")),x},f=(m,v)=>{const y=h.y+h.height;m.node.x=p(m.textAlign),m.node.y=y,m.node.textBaseline="bottom",d(m);const x=m.node.computeBBox(),b=Math.ceil(y-x.y+v);return m.layoutStyle==="block"&&(u.shrink(b+2*c,"bottom"),h.shrink(b,"bottom")),x};if(o.node.visible=o.enabled,r.node.visible=r.enabled,l.node.visible=l.enabled,o.enabled){const{spacing:m=r.enabled?qt.SMALL_PADDING:qt.LARGE_PADDING}=o;n.title=g(o,m)}return r.enabled&&(n.subtitle=g(r,(e=r.spacing)!=null?e:0)),l.enabled&&(n.footnote=f(l,(i=l.spacing)!=null?i:0)),a.title=c,K(B({},t),{shrinkRect:u,positions:n})}alignCaptions(t){const{title:e,subtitle:i,footnote:s,titlePadding:n}=this.chartLike,a=(o,r)=>{if(o.layoutStyle==="overlay"){if(o.textAlign==="left")o.node.x=r.x+n;else if(o.textAlign==="right"){const l=o.node.computeBBox();o.node.x=r.x+r.width-l.width-n}}};a(e,t.series.rect),a(i,t.series.rect),a(s,t.series.rect)}}}}),oA,yG=L({"packages/ag-charts-community/src/chart/update/dataWindowProcessor.ts"(){"use strict";yt(),Kr(),oA=class{constructor(t,e,i,s){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow().catch(t=>Z.errorOnce(t))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return F(this,null,function*(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:e?.min,windowEnd:e?.max})})}getValidAxis(){return this.chart.axes.find(t=>t.type==="time")}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return i&&e.min===i.min&&e.max===i.max?!1:(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){var i,s;const n=(s=(i=t.scale).getDomain)==null?void 0:s.call(i);if(!e||!n||n.length===0||isNaN(Number(n[0])))return;const a=Number(n[1])-Number(n[0]),o=new Date(Number(n[0])+a*e.min),r=new Date(Number(n[0])+a*e.max);return{min:o,max:r}}}}}),rA,vG=L({"packages/ag-charts-community/src/chart/update/overlaysProcessor.css"(){rA=".ag-chart-overlay{color:#181d1f;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay{color:#ffffff}.ag-chart-overlay--loading{color:rgb(140,140,140)}.ag-chart-overlay__loading-background{background:white;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay .ag-chart-overlay__loading-background{background:#192232}"}}),lA,xG=L({"packages/ag-charts-community/src/chart/update/overlaysProcessor.ts"(){"use strict";Ab(),vG(),lA=class{constructor(t,e,i,s,n,a,o){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutService=s,this.localeManager=n,this.animationManager=a,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(Kg),this.domManager.addStyles("overlays",rA),this.destroyFns.push(this.layoutService.addListener("layout-complete",r=>this.onLayoutComplete(r)))}destroy(){this.destroyFns.forEach(t=>t()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){const e=this.dataService.isLoading(),i=this.chartLike.series.some(n=>n.hasData),s=this.chartLike.series.some(n=>n.visible);this.overlays.darkTheme?this.overlayElem.classList.add(Ib):this.overlayElem.classList.remove(Ib),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`,this.toggleOverlay(this.overlays.loading,t,e),this.toggleOverlay(this.overlays.noData,t,!e&&!i),this.toggleOverlay(this.overlays.noVisibleSeries,t,i&&!s)}toggleOverlay(t,e,i){if(i){const s=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(s)}else t.removeElement(()=>{this.overlayElem.innerText="\xA0"},this.animationManager)}}}}),Ps,$g,we,Jr,Pc=L({"packages/ag-charts-community/src/chart/chart.ts"(){"use strict";Oa(),Mt(),be(),hI(),Ve(),jF(),Tu(),Ee(),en(),bi(),yt(),XF(),_t(),ue(),wI(),Wx(),ne(),Ye(),qF(),Ct(),gt(),zr(),de(),Nz(),Oz(),nx(),Kr(),P2(),Tc(),Fu(),vb(),Vg(),hn(),wx(),Kz(),cb(),H2(),jz(),Y2(),ts(),qz(),Jz(),Yg(),sG(),nG(),oG(),Di(),fG(),Hi(),mG(),yG(),xG(),Ps=Xt.create(!0,"opts"),$g=class extends xt{constructor(){super(...arguments),this.padding=new Ca(0)}},_([A(pt,{optional:!0})],$g.prototype,"clip",2),_([A(rt)],$g.prototype,"padding",2),we=class Zy extends Hx{constructor(e,i){var s,n;super(),this.id=wn(this),this.seriesRoot=new ut({name:`${this.id}-series-root`}),this.highlightRoot=new ut({name:`${this.id}-highlight-root`,layer:!0,zIndex:5,nonEmptyChildDerivedZIndex:!0}),this.annotationRoot=new ut({name:`${this.id}-annotation-root`,layer:!0,zIndex:10}),this.debug=Xt.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new Ca(20),this.titlePadding=0,this.seriesArea=new $g,this.title=new qt,this.subtitle=new qt,this.footnote=new qt,this.keyboard=new Hg,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new j2,this.zoomManager=new Sb,this.processors=[],this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new RI,this.updateRequestors={},this.performUpdateTrigger=ZF(m=>F(this,[m],function*({count:v}){this.destroyed||this.updateMutex.acquire(()=>F(this,null,function*(){try{yield this.performUpdate(v)}catch(y){Z.error("update error",y)}})).catch(y=>Z.errorOnce(y))})),this._performUpdateSplits={},this.axes=[],this.series=[],this.focus={hasFocus:!1,series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.pointerScheduler=$F(()=>{if(this.lastInteractionEvent){if(this.performUpdateType<=4){this.pointerScheduler.schedule();return}this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0}}),this.onSeriesNodeClick=m=>{const v=K(B({},m),{type:"seriesNodeClick"});Object.defineProperty(v,"series",{enumerable:!1,get:()=>m.series}),this.fireEvent(v)},this.onSeriesNodeDoubleClick=m=>{const v=K(B({},m),{type:"seriesNodeDoubleClick"});this.fireEvent(v)},this.seriesGroupingChanged=m=>{if(!(m instanceof Xg))return;const{series:v,seriesGrouping:y,oldGrouping:x}=m;v.rootGroup.parent!=null&&this.seriesLayerManager.changeGroup({internalId:v.internalId,type:v.type,rootGroup:v.rootGroup,highlightGroup:v.highlightGroup,annotationGroup:v.annotationGroup,getGroupZIndexSubOrder:b=>v.getGroupZIndexSubOrder(b),seriesGrouping:y,oldGrouping:x})},this.dataProcessListeners=new Set,this.chartOptions=e;const a=i?.scene,o=i?.container,r=new ut({name:"root"}),l=new ut({name:"titles",layer:!0,zIndex:8});r.visible=!1,r.append(l),r.append(this.seriesRoot),r.append(this.highlightRoot),r.append(this.annotationRoot),l.append(this.title.node),l.append(this.subtitle.node),l.append(this.footnote.node);const{overrideDevicePixelRatio:c}=e.specialOverrides;this.tooltip=new Ms,this.seriesLayerManager=new nA(this.seriesRoot,this.highlightRoot,this.annotationRoot);const h=this.ctx=new E2(this,{scene:a,root:r,syncManager:new V2(this),container:o,updateCallback:(m=0,v)=>this.update(m,v),updateMutex:this.updateMutex,overrideDevicePixelRatio:c});this._destroyFns.push(h.domManager.addListener("resize",()=>this.parentResize(h.domManager.containerSize))),this.overlays=new Ec,(n=(s=this.overlays.loading).renderer)!=null||(s.renderer=()=>aG(this.overlays.loading.getText(h.localeManager),h.animationManager.defaultDuration)),this.processors=[new aA(this,h.layoutService),new oA(this,h.dataService,h.updateService,h.zoomManager),new lA(this,this.overlays,h.dataService,h.layoutService,h.localeManager,h.animationManager,h.domManager)],this.highlight=new db,this.container=o;const{All:u}=Gr,d=this.getModuleContext(),p=h.regionManager.addRegion("series",this.seriesRoot,this.ctx.axisManager.axisGridGroup),g=this.ctx.regionManager.addRegion("horizontal-axes"),f=this.ctx.regionManager.addRegion("vertical-axes");h.regionManager.addRegion("root",r),this._destroyFns.push(h.dataService.addListener("data-load",m=>{this.data=m.data}),this.title.registerInteraction(d),this.subtitle.registerInteraction(d),this.footnote.registerInteraction(d),h.regionManager.listenAll("click",m=>this.onClick(m)),h.regionManager.listenAll("dblclick",m=>this.onDoubleClick(m)),p.addListener("hover",m=>this.onMouseMove(m),20),p.addListener("drag",m=>this.onMouseMove(m),20),g.addListener("hover",m=>this.onMouseMove(m)),f.addListener("hover",m=>this.onMouseMove(m)),p.addListener("leave",m=>this.onLeave(m)),g.addListener("leave",m=>this.onLeave(m)),f.addListener("leave",m=>this.onLeave(m)),p.addListener("blur",()=>this.onBlur()),p.addListener("tab",m=>this.onTab(m)),p.addListener("nav-vert",m=>this.onNavVert(m)),p.addListener("nav-hori",m=>this.onNavHori(m)),p.addListener("submit",m=>this.onSubmit(m)),p.addListener("contextmenu",m=>this.onContextMenu(m),u),h.keyNavManager.addListener("browserfocus",m=>this.onBrowserFocus(m)),h.interactionManager.addListener("page-left",()=>this.destroy()),h.animationManager.addListener("animation-start",()=>this.onAnimationStart()),h.animationManager.addListener("animation-frame",()=>{this.update(6)}),h.highlightManager.addListener("highlight-change",m=>this.changeHighlightDatum(m)),h.zoomManager.addListener("zoom-pan-start",()=>this.resetPointer()),h.zoomManager.addListener("zoom-change",()=>{this.resetPointer(),this.ctx.focusIndicator.updateBounds(void 0),this.series.map(v=>{var y;return(y=v.animationState)==null?void 0:y.transition("updateData")});const m=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:m})})),this.parentResize(h.domManager.containerSize)}static getInstance(e){return Zy.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,i){this.ctx.scene.download(e,i)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}getOptions(){var e;return(e=this.queuedUserOptions.at(-1))!=null?e:this.chartOptions.userOptions}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(e=>e.enabled&&e.text).map(e=>e.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length,caption:this.getCaptionText()})}getDatumAriaText(e,i){var s,n,a;const o=i.ariaLabel;return(a=(n=(s=e.series).getDatumAriaText)==null?void 0:n.call(s,e,o))!=null?a:o}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(e){if(this.destroyed)return;const i=e?.keepTransferableResources;let s;return this.performUpdateType=7,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.zoomManager.destroy(),this.destroyed=!0,Object.freeze(this),s}resetPointer(e=!1){e||this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>F(this,null,function*(){this.destroyed||(yield e(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})).catch(i=>Z.errorOnce(i)))}update(e=0,i){var s,n;const{forceNodeDataRefresh:a=!1,skipAnimations:o,seriesToUpdate:r=this.series,newAnimationBatch:l}=i??{};a&&this.series.forEach(c=>c.markNodeDataDirty());for(const c of r)this.seriesToUpdate.add(c);if(o&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),l&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=(s=i?.skipSync)!=null?s:!1,this.debug.check()){let c=(n=new Error().stack)!=null?n:"<unknown>";c=c.replace(/\([^)]*/g,""),this.updateRequestors[c]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.performUpdateTrigger.schedule(i?.backOffMs))}performUpdate(e){return F(this,null,function*(){var i;const{performUpdateType:s,extraDebugStats:n,_performUpdateSplits:a,ctx:o}=this,r=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&s<6&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",Lc[s]);let l=performance.now();(i=a.start)!=null||(a.start=l);const c=d=>{var p;(p=a[d])!=null||(a[d]=0),a[d]+=performance.now()-l,l=performance.now()};let h=!1;switch(s){case 0:this.updateDOM();case 1:yield this.updateData(),c("\u2B07\uFE0F");case 2:yield this.processData(),this.resetPointer(!0),c("\u{1F3ED}");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(r)){h=!0;break}yield this.processLayout(),c("\u2316");case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:d}=this;yield Promise.all(r.map(g=>g.update({seriesRect:d}))),c("\u{1F914}");case 5:if(this.checkUpdateShortcut(5))break;const p=o.tooltipManager.getTooltipMeta(this.id);s<=4&&p?.lastPointerEvent!=null&&this.handlePointer(p.lastPointerEvent,!0),c("\u2196");case 6:if(this.checkUpdateShortcut(6))break;o.animationManager.endBatch(),n.updateShortcutCount=this.updateShortcutCount,yield o.scene.render({debugSplitTimes:a,extraDebugStats:n}),this.extraDebugStats={};for(const g in a)delete a[g];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}h||o.updateService.dispatchUpdateComplete(this.getMinRects());const u=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((u-a.start)*100)/100,count:e,performUpdateType:Lc[s]})})}updateThemeClassName(){const{theme:e}=this.chartOptions.processedOptions,i="ag-charts-theme-",s=[`${i}default`,`${i}default-dark`];let n=s[0],a=!1;typeof e=="string"?(n=e.replace("ag-",i),a=e.includes("-dark")):typeof e?.baseTheme=="string"&&(n=e.baseTheme.replace("ag-",i),a=e.baseTheme.includes("-dark")),s.includes(n)||(n=a?s[1]:s[0]),this.ctx.domManager.setThemeClass(n)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabIndex(e?i??0:-1),Br(this.ctx.scene.canvas.element,"role","figure"),Br(this.ctx.scene.canvas.element,"aria-label",this.getAriaLabel())}checkUpdateShortcut(e){return this.updateShortcutCount>3?(Z.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(e){if(!(this.width!=null&&this.height!=null)){if(!this._lastAutoSize){const i=this._performUpdateNoRenderCount++,s=nt(i+1,2)*40;if(i<8)return this.update(3,{seriesToUpdate:e,backOffMs:s}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",s),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}return this._performUpdateNoRenderCount=0,!0}onAxisChange(e,i){i==null&&e.length===0||this.ctx.axisManager.updateAxes(i??[],e)}onSeriesChange(e,i){var s,n;const a=(s=i?.filter(o=>!e.includes(o)))!=null?s:[];this.destroySeries(a),(n=this.seriesLayerManager)==null||n.setSeriesCount(e.length);for(const o of e){if(i?.includes(o))continue;o.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(o);const r=this;o.chart={get mode(){return r.mode},get isMiniChart(){return!1},get seriesRect(){return r.seriesRect},placeLabels(){return r.placeLabels()}},o.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(o),o.addChartEventListeners()}}destroySeries(e){e?.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(e)})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(i=>i.axes[e.direction]===e)})}assignAxesToSeries(){const e=ox(this.axes,i=>i.direction);this.series.forEach(i=>{i.directions.forEach(s=>{const n=e[s];if(!n){Z.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const a=i.getKeys(s),o=n.find(r=>!r.keys.length||a.some(l=>r.keys.includes(l)));if(!o){Z.warnOnce(`no matching axis for direction [${s}] and keys [${a}]; check series and axes configuration.`);return}i.axes[s]=o})})}parentResize(e){var i;if(e==null||this.width!=null&&this.height!=null)return;let{width:s,height:n}=e;if(s=Math.floor(s),n=Math.floor(n),s===0&&n===0)return;const[a=0,o=0]=(i=this._lastAutoSize)!=null?i:[];a===s&&o===n||(this._lastAutoSize=[s,n],this.resize("SizeMonitor",{}))}resize(e,i){var s,n,a,o;const{scene:r,animationManager:l}=this.ctx,{inWidth:c,inHeight:h,inMinWidth:u,inMinHeight:d}=i;this.ctx.domManager.setSizeOptions(u??this.minWidth,d??this.minHeight,c??this.width,h??this.height);const p=(n=c??this.width)!=null?n:(s=this._lastAutoSize)==null?void 0:s[0],g=(o=h??this.height)!=null?o:(a=this._lastAutoSize)==null?void 0:a[1];if(this.debug(`Chart.resize() from ${e}`,{width:p,height:g,stack:new Error().stack}),!(p==null||g==null||!Ot(p)||!Ot(g))&&r.resize(p,g)){this.resetPointer(),l.reset();let f=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(f=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:f})}}updateData(){return F(this,null,function*(){this.series.forEach(i=>i.setChartData(this.data));const e=this.modulesManager.mapModules(i=>{var s;return(s=i.updateData)==null?void 0:s.call(i,{data:this.data})});yield Promise.all(e)})}processData(){return F(this,null,function*(){if(this.series.some(n=>n.canHaveAxes)){this.assignAxesToSeries();const n=this.modulesManager.getModule("sync");n?.enabled?n.syncAxes(this._skipSync):this.assignSeriesToAxes()}const e=new yb(this.mode),i=this.series.map(n=>n.processData(e)),s=this.modulesManager.mapModules(n=>{var a;return(a=n.processData)==null?void 0:a.call(n,{dataController:e})});e.execute(),yield Promise.all([...i,...s]);for(const{legendType:n,legend:a}of this.modulesManager.legends())a.data=this.getLegendData(n,this.mode!=="integrated");this.dataProcessListeners.forEach(n=>n()),this.dataProcessListeners.clear()})}placeLabels(){const e=[],i=[];for(const c of this.series){if(!c.visible)continue;const h=c.getLabelData();TF(h?.[0])&&(i.push(h),e.push(c))}const{seriesRect:s}=this,{top:n,right:a,bottom:o,left:r}=this.seriesArea.padding,l=s&&i.length>0?NF(i,{x:-r,y:-n,width:s.width+r+a,height:s.height+n+o}):[];return new Map(l.map((c,h)=>[e[h],c]))}getLegendData(e,i){var s,n,a;const o=this.series.filter(l=>l.properties.showInLegend).flatMap(l=>l.getLegendData(e));if(i&&(l=>l.every(c=>c.legendType==="category"))(o)){const l={},c=new Map(this.series.map(h=>[h.id,h.type]));for(const{seriesId:h,symbols:[{marker:u}],label:d}of o){if(u.fill==null)continue;const p=c.get(h),g=(s=l[p])!=null?s:l[p]={};(a=g[n=d.text])!=null||(g[n]=u.fill),g[d.text]!==u.fill&&Z.warnOnce(`legend item '${d.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return o}processLayout(){return F(this,null,function*(){var e;const i=this.animationRect;yield this.performLayout(),i&&!((e=this.animationRect)!=null&&e.equals(i))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return F(this,null,function*(){const{width:e,height:i}=this.ctx.scene;let s={shrinkRect:new ot(0,0,e,i),positions:{},padding:{}};s=this.ctx.layoutService.dispatchPerformLayout("start-layout",s),s=this.ctx.layoutService.dispatchPerformLayout("before-series",s);for(const n of this.modulesManager.modules())n.performLayout!=null&&(s=yield n.performLayout(s));return s.shrinkRect})}pickNode(e,i){var s,n;const a=performance.now(),o=[...i].reverse();let r;for(const{series:l,pickModes:c,maxDistance:h}of o){if(!l.visible||!l.rootGroup.visible)continue;const{match:u,distance:d}=(s=l.pickNode(e,c))!=null?s:{};if(!(!u||d==null)&&((!r||r.distance>d)&&d<=(h??1/0)&&(r={series:l,distance:d,datum:u}),d===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((n=this.extraDebugStats.pickSeriesNode)!=null?n:0)+(performance.now()-a)),r}pickSeriesNode(e,i,s){const n=i?[0]:void 0;return this.pickNode(e,this.series.map(a=>({series:a,pickModes:n,maxDistance:s})))}pickTooltip(e){return this.pickNode(e,this.series.map(i=>{const s=i.properties.tooltip.range;let n;return s==="exact"?n=[0]:n=void 0,{series:i,pickModes:n,maxDistance:typeof s=="number"?s:void 0}}))}onMouseMove(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(6)}onLeave(e){const i=e.relatedElement;i&&this.ctx.domManager.isManagedDOMElement(i)||(this.resetPointer(),this.update(6),this.ctx.cursorManager.updateCursor("chart"))}onBrowserFocus(e){e.delta>0?(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=0,this.focus.seriesIndex=0):e.delta<0&&(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=1/0,this.focus.seriesIndex=1/0)}onAnimationStart(){this.focus.hasFocus&&this.onBlur()}onBlur(){this.ctx.focusIndicator.updateBounds(void 0),this.resetPointer(),this.focus.hasFocus=!1}onTab(e){this.handleFocus(0,0),e.preventDefault(),this.focus.hasFocus=!0}onNavVert(e){this.focus.seriesIndex+=e.delta,this.handleFocus(e.delta,0),e.preventDefault()}onNavHori(e){this.focus.datumIndex+=e.delta,this.handleFocus(0,e.delta),e.preventDefault()}onSubmit(e){const{series:i,datum:s}=this.focus,n=e.sourceEvent.sourceEvent;i!==void 0&&s!==void 0?i.fireNodeClickEvent(n,s):this.fireEvent({type:"click",event:n}),e.preventDefault()}onContextMenu(e){this.ctx.tooltipManager.removeTooltip(this.id);const{Default:i,ContextMenu:s}=Gr;let n;this.ctx.interactionManager.getState()&(i|s)&&this.checkSeriesNodeRange(e,(a,o)=>{this.ctx.highlightManager.updateHighlight(this.id),n=o}),this.ctx.contextMenuRegistry.dispatchContext("series",e,{pickedNode:n})}handleFocus(e,i){this.focus.hasFocus=!0;const s=this.overlays.getFocusInfo(this.ctx.localeManager);s==null?this.handleSeriesFocus(e,i):(this.ctx.focusIndicator.updateBounds(s.rect),this.ctx.ariaAnnouncementService.announceValue(s.text))}handleSeriesFocus(e,i){const{series:s,seriesRect:n,focus:a}=this,o=s.filter(h=>h.visible);if(o.length===0)return;a.seriesIndex=St(0,a.seriesIndex,o.length-1),a.series=o[a.seriesIndex];const{datumIndex:r,seriesIndex:l}=a,c=a.series.pickFocus({datumIndex:r,datumIndexDelta:i,otherIndex:l,otherIndexDelta:e,seriesRect:n});this.updatePickedFocus(c)}updatePickedFocus(e){const{focus:i}=this;if(e===void 0||i.series===void 0)return;const{datum:s,datumIndex:n}=e;i.datumIndex=n,i.datum=s;const a=W2(this.ctx.focusIndicator,e);if(a!==void 0){this.lastInteractionEvent=a;const o=i.series.getTooltipHtml(s),r=Pu.makeTooltipMeta(this.lastInteractionEvent,s),l=this.getDatumAriaText(s,o);this.ctx.highlightManager.updateHighlight(this.id,s),this.ctx.tooltipManager.updateTooltip(this.id,r,o),this.ctx.ariaAnnouncementService.announceValue("ariaAnnounceHoverDatum",{datum:l})}}static isHoverEvent(e){return e!==void 0&&e.type==="hover"}static isDragEvent(e){return e!==void 0&&e.type==="drag"}handlePointer(e,i){const s=this.ctx.interactionManager.getState();if(s!==16&&s!==4||!Zy.isHoverEvent(e)&&!Zy.isDragEvent(e))return;const{lastPick:n,hoverRect:a}=this,{offsetX:o,offsetY:r}=e,l=(c=!1)=>{n&&this.resetPointer(c)};if(i?this.ctx.animationManager.isActive():!a?.containsPoint(o,r)){l();return}this.handlePointerTooltip(e,l),this.handlePointerNode(e)}handlePointerTooltip(e,i){const{lastPick:s}=this,{offsetX:n,offsetY:a,targetElement:o}=e;if(o&&this.tooltip.interactive&&this.ctx.domManager.isManagedChildDOMElement(o,"canvas-overlay",ln))return;const r=this.pickTooltip({x:n,y:a});if(!r){this.ctx.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&i(!0);return}const l=this.highlight.range==="node"||!s||s!==r.datum;let c;l&&(c=r.series.getTooltipHtml(r.datum),this.highlight.range==="tooltip"&&this.ctx.highlightManager.updateHighlight(this.id,r.datum));const u=this.tooltip.enabled&&r.series.tooltipEnabled&&(!l||c!==void 0),d=Pu.makeTooltipMeta(e,r.datum);u&&this.ctx.tooltipManager.updateTooltip(this.id,d,c)}handlePointerNode(e){this.checkSeriesNodeRange(e,(s,n)=>{(s.hasEventListener("nodeClick")||s.hasEventListener("nodeDoubleClick"))&&this.ctx.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id,n)})||(this.ctx.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.ctx.highlightManager.updateHighlight(this.id))}onClick(e){if(this.checkSeriesNodeClick(e)){this.update(4),e.preventDefault();return}this.fireEvent({type:"click",event:e.sourceEvent})}onDoubleClick(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(4),e.preventDefault();return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})}checkSeriesNodeClick(e){return this.checkSeriesNodeRange(e,(i,s)=>i.fireNodeClickEvent(e.sourceEvent,s))}checkSeriesNodeDoubleClick(e){return this.checkSeriesNodeRange(e,(i,s)=>i.fireNodeDoubleClickEvent(e.sourceEvent,s))}checkSeriesNodeRange(e,i){var s;const n=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),a=n?.datum,o=a?.series.properties.nodeClickRange;let r;Ot(o)&&(r=o);let l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!0);if(l&&(e.preventZoomDblClick=!0),a&&o==="nearest")return i(a.series,a),!0;if(o!=="exact"&&(l=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1,r)),!l)return!1;const c=r!=null,h=o==="exact"&&l.distance===0;return(c||h)&&(e.pointerHistory===void 0||((s=e.pointerHistory)==null?void 0:s.every(d=>{const p={x:d.offsetX,y:d.offsetY},g=this.pickSeriesNode(p,!1,r);return g?.datum===l?.datum})))?(i(l.series,l.datum),!0):!1}changeHighlightDatum(e){var i,s;const n=new Set,{series:a=void 0,datum:o}=(i=e.currentHighlight)!=null?i:{},{series:r=void 0,datum:l}=(s=e.previousHighlight)!=null?s:{};r&&n.add(r),a&&n.add(a),r?.properties.cursor&&l&&this.ctx.cursorManager.updateCursor(r.id),a?.properties.cursor&&o&&this.ctx.cursorManager.updateCursor(a.id,a.properties.cursor),this.lastPick=e.currentHighlight,a==null||r==null?this.update(4):this.update(4,{seriesToUpdate:n})}waitForUpdate(e=1e4,i=!1){return F(this,null,function*(){const s=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this.performUpdateType!==7;){if(performance.now()-s>e){const n=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(i)throw new Error(n);Z.warnOnce(n)}yield KF(50)}yield this.updateMutex.waitForClearAcquireQueue()})}waitForDataProcess(e){return new Promise(i=>{this.dataProcessListeners.add(i),ps(e)&&setTimeout(()=>{this.dataProcessListeners.has(i)&&(this.dataProcessListeners.delete(i),i())},e)})}getMinRects(){const{width:e,height:i}=this.ctx.scene,s=this.series.map(h=>h.getMinRects(e,i)).filter(su);if(s.length===0)return;let n=0,a=0,o=0,r=0;for(const{minRect:h,minVisibleRect:u}of s)n=Math.max(n,h.width),a=Math.max(a,h.height),o=Math.max(o,u.width),r=Math.max(r,u.height);const l=new ot(0,0,n,a);let c=l.clone();return o>0&&r>0&&(c=new ot(0,0,o,r)),{minRect:l,minVisibleRect:c}}filterMiniChartSeries(e){return e?.filter(i=>i.showInMiniChart!==!1)}applyOptions(e){var i,s,n,a,o;const l=e!==this.chartOptions?this.chartOptions.processedOptions:{},c=e.processedOptions,h=e.diffOptions(l);if(h==null)return;Ps("Chart.applyOptions() - applying delta",h);const u=this.applyModules(c),d=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology","nodes","initialState"];h.listeners&&this.registerListeners(this,h.listeners),ba(this,h,{skip:d});let p=!1,g="no-op";(i=h.series)!=null&&i.length&&(g=this.applySeries(this,h.series,l?.series),p=!0),g==="replaced"&&this.resetAnimations(),this.applyAxes(this,c,l,g,[],!0)&&(p=!0),h.data&&(this.data=h.data),(s=h.legend)!=null&&s.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,h.legend.listeners),h.listeners&&this.updateAllSeriesListeners(),this.chartOptions=e;const f=this.modulesManager.getModule("navigator"),m=this.modulesManager.getModule("zoom");!f?.enabled&&!m?.enabled&&this.ctx.zoomManager.updateZoom("chart");const v=f?.miniChart,y=(o=(a=(n=c.navigator)==null?void 0:n.miniChart)==null?void 0:a.series)!=null?o:c.series;v?.enabled===!0&&y!=null?this.applyMiniChartOptions(v,y,c,l):v?.enabled===!1&&(v.series=[],v.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),p||(p=this.shouldForceNodeDataRefresh(h,g));const b=p||u?0:3;this.maybeResetAnimations(g),Ps("Chart.applyOptions() - update type",Lc[b],{seriesStatus:g,forceNodeDataRefresh:p}),this.update(b,{forceNodeDataRefresh:p,newAnimationBatch:!0})}applyInitialState(){var e;const{ctx:{annotationManager:i,stateManager:s}}=this,n=this.getOptions();if(((e=n.initialState)==null?void 0:e.annotations)!=null){const a=n.initialState.annotations.map(o=>{const r=i.getAnnotationTypeStyles(o.type);return kt(o,r)});s.setState(i,a)}}maybeResetAnimations(e){if(this.mode==="standalone")switch(e){case"series-grouping-change":case"replaced":this.resetAnimations();break;default:}}shouldForceNodeDataRefresh(e,i){const s=!!e.data||i==="data-change"||i==="replaced",n=Fg.getKeys(),a=Object.values(n).some(r=>e[r]!=null),o=e.title!=null&&e.subtitle!=null;return s||a||o}applyMiniChartOptions(e,i,s,n){var a,o,r,l,c;const h=(r=(o=(a=n?.navigator)==null?void 0:a.miniChart)==null?void 0:o.series)!=null?r:n?.series,u=this.applySeries(e,this.filterMiniChartSeries(i),this.filterMiniChartSeries(h));this.applyAxes(e,s,n,u,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const d=e.axes,p=d.find(g=>g.direction==="x");for(const g of d)g.gridLine.enabled=!1,g.label.enabled=g===p,g.tick.enabled=!1,g.interactionEnabled=!1;if(p!=null){const g=(l=s.navigator)==null?void 0:l.miniChart,f=g?.label,m=(c=g?.label)==null?void 0:c.interval;p.line.enabled=!1,p.label.set(wv(f,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),p.tick.set(wv(m,["enabled","width","size","color","interval","step"]));const v=m?.step;v!=null&&(p.interval.step=v)}}applyModules(e){var i;const{type:s}=this.constructor;let n=!1;for(const a of Na.byType("root","legend")){const r=e[a.optionsKey]!=null&&a.chartTypes.includes(s);r!==this.modulesManager.isEnabled(a)&&(r?(this.modulesManager.addModule(a,l=>new l.instanceConstructor(this.getModuleContext())),a.type==="legend"&&((i=this.modulesManager.getModule(a))==null||i.attachLegend(this.ctx.scene)),this[a.optionsKey]=this.modulesManager.getModule(a)):(this.modulesManager.removeModule(a),delete this[a.optionsKey]),n=!0)}return n}applySeries(e,i,s){var n;if(!i)return"no-change";const a=Qz(e.series,i,s);if(a.status==="no-overlap")return Ps(`Chart.applySeries() - creating new series instances, status: ${a.status}`,a),e.series=i.map(h=>this.createSeries(h)),"replaced";Ps("Chart.applySeries() - matchResult",a);const o=[];let r=!1,l=!1,c=!1;for(const h of a.changes)switch(l||(l=h.status==="series-grouping"),r||(r=((n=h.diff)==null?void 0:n.data)!=null),c||(c=h.status!=="no-op"),h.status){case"add":const u=this.createSeries(h.opts);o.push(u),Ps("Chart.applySeries() - created new series",u);break;case"remove":Ps(`Chart.applySeries() - removing series at previous idx ${h.idx}`,h.series);break;case"no-op":o.push(h.series),Ps(`Chart.applySeries() - no change to series at previous idx ${h.idx}`,h.series);break;case"series-grouping":case"update":default:const{series:d,diff:p,idx:g}=h;Ps(`Chart.applySeries() - applying series diff previous idx ${g}`,p,d),this.applySeriesValues(d,p),d.markNodeDataDirty(),o.push(d)}for(let h=0;h<o.length;h++)o[h]._declarationOrder=h;return Ps("Chart.applySeries() - final series instances",o),e.series=o,l?"series-grouping-change":r?"data-change":c?"updated":"no-op"}applyAxes(e,i,s,n,a=[],o=!1){if(!("axes"in i)||!i.axes)return!1;a=["axes[].type",...a];const{axes:r}=i;if(!(n==="replaced")&&e.axes.length===r.length&&e.axes.every((u,d)=>u.type===r[d].type)&&Oc(s))return e.axes.forEach((u,d)=>{var p,g;const f=(g=(p=s.axes)==null?void 0:p[d])!=null?g:{},m=gs(f,r[d]);Ps(`Chart.applyAxes() - applying axis diff idx ${d}`,m);const v=`axes[${d}]`;ba(u,m,K(B({},Jp),{path:v,skip:a}))}),!0;Ps(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${n}`),e.axes=this.createAxis(r,a);const h={x:[],y:[]};return e.axes.forEach(u=>h[u.direction].push(u.getAxisGroup())),o&&(this.ctx.regionManager.updateRegion("horizontal-axes",...h.x),this.ctx.regionManager.updateRegion("vertical-axes",...h.y)),!0}createSeries(e){const i=Wi.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(i,e),this.applySeriesValues(i,e),i}applySeriesOptionModules(e,i){const s=e.createModuleContext(),n=e.getModuleMap();for(const a of Na.byType("series-option"))a.optionsKey in i&&a.seriesTypes.includes(e.type)&&n.addModule(a,o=>new o.instanceConstructor(s))}applySeriesValues(e,i){const s=e.getModuleMap(),n=i,{type:a,data:o,listeners:r,seriesGrouping:l,showInMiniChart:c}=n,h=se(n,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(const u of Xr)if(u.type==="series-option"&&u.optionsKey in h){const d=s.getModule(u.optionsKey);if(d){const p=h[u.optionsKey];delete h[u.optionsKey],d.properties.set(p)}}e.properties.set(h),"data"in i&&e.setOptionsData(o),r&&this.registerListeners(e,r),"seriesGrouping"in i&&(l==null?e.seriesGrouping=void 0:e.seriesGrouping=B(B({},e.seriesGrouping),l))}createAxis(e,i){const s=[],n=this.getModuleContext();for(let a=0;a<e.length;a++){const o=e[a],r=Ea.create(o.type,n);this.applyAxisModules(r,o),ba(r,o,K(B({},Jp),{path:`axes[${a}]`,skip:i})),s.push(r)}return Zz(s),s}applyAxisModules(e,i){const s=e.createModuleContext(),n=e.getModuleMap();for(const a of Na.byType("axis-option")){const o=i[a.optionsKey]!=null;o!==n.isEnabled(a)&&(o?(n.addModule(a,r=>new r.instanceConstructor(s)),e[a.optionsKey]=n.getModule(a)):(n.removeModule(a),delete e[a.optionsKey]))}}registerListeners(e,i){e.clearEventListeners();for(const[s,n]of Object.entries(i))Dr(n)&&e.addEventListener(s,n)}},we.chartsInstances=new WeakMap,_([Vi({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),we.chartsInstances.set(t,this))},oldValue(t){we.chartsInstances.delete(t)}})],we.prototype,"container",2),_([Vi({newValue(t){this.resize("width option",{inWidth:t})}})],we.prototype,"width",2),_([Vi({newValue(t){this.resize("height option",{inHeight:t})}})],we.prototype,"height",2),_([Vi({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],we.prototype,"minWidth",2),_([Vi({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],we.prototype,"minHeight",2),_([A(rt)],we.prototype,"padding",2),_([A(jt)],we.prototype,"titlePadding",2),_([A(rt)],we.prototype,"seriesArea",2),_([A(rt)],we.prototype,"title",2),_([A(rt)],we.prototype,"subtitle",2),_([A(rt)],we.prototype,"footnote",2),_([A(rt)],we.prototype,"keyboard",2),_([A(Jt(["standalone","integrated"],"a chart mode"))],we.prototype,"mode",2),_([Vi({changeValue(t,e){this.onAxisChange(t,e)}})],we.prototype,"axes",2),_([Vi({changeValue(t,e){this.onSeriesChange(t,e)}})],we.prototype,"series",2),Jr=we}}),cA,hA,uA,dA,bG=L({"packages/ag-charts-community/src/scene/util/quadtree.ts"(){"use strict";Ep(),Mt(),cA=class{constructor(t,e,i){this.root=new dA(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(s,n)=>t.distanceSquared(s,n)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},hA=class{constructor(t,e,i,s){this.nw=t,this.ne=e,this.sw=i,this.se=s}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},uA=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??ot.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(this.subdivisions===void 0?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:s}=this.boundary,{capacity:n}=this,a=this.maxdepth-1,o=i/2,r=s/2,l=new ot(t,e,o,r),c=new ot(t+o,e,o,r),h=new ot(t,e+r,o,r),u=new ot(t+o,e+r,o,r);return new hA(this.child(n,a,l),this.child(n,a,c),this.child(n,a,h),this.child(n,a,u))}},dA=class Hw extends uA{addCondition(e){const{x:i,y:s}=e.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(e,i,s){const{best:n}=s;return n.distanceSquared!==0&&this.boundary.distanceSquared(e,i)<n.distanceSquared}findAction(e,i,s){const n=Cp(e,i,this.elems,s.best.distanceSquared);n.nearest!==void 0&&n.distanceSquared<s.best.distanceSquared&&(s.best=n)}child(e,i,s){return new Hw(e,i,s)}}}}),Qe,Bs=L({"packages/ag-charts-community/src/chart/marker/marker.ts"(){"use strict";Mt(),un(),Qe=class extends ki{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,{center:s}=this.constructor;return new ot(t-i*s.x,e-i*s.y,i,i)}computeTransformedBBox(){return super.computeTransformedBBox()}applyPath(t,e){const{path:i}=this;let{x:s,y:n}=this;this.repeat!=null&&(s=0,n=0),i.clear();for(const{x:a,y:o,t:r}of e)s+=a*t,n+=o*t,r==="move"?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}executeFill(t,e){if(!e)return;if(this.repeat==null)return super.executeFill(t,e);t.save();let i=this.translationX,s=this.translationY;for(const n of this.repeat)t.translate(n.x-i,n.y-s),t.fill(e),i=n.x,s=n.y;t.restore()}executeStroke(t,e){if(!e)return;if(this.repeat==null)return super.executeStroke(t,e);t.save();let i=this.translationX,s=this.translationY;for(const n of this.repeat)t.translate(n.x-i,n.y-s),t.stroke(e),i=n.x,s=n.y;t.restore()}},Qe.center={x:.5,y:.5},_([mt()],Qe.prototype,"x",2),_([mt()],Qe.prototype,"y",2),_([mt({convertor:Math.abs})],Qe.prototype,"size",2),_([mt()],Qe.prototype,"repeat",2)}}),wa,Vu=L({"packages/ag-charts-community/src/chart/marker/circle.ts"(){"use strict";Bs(),wa=class extends Qe{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=s/2;i.clear(),i.arc(t,e,n,0,Math.PI*2),i.closePath()}},wa.className="Circle"}}),Zg,pA,SG=L({"packages/ag-charts-community/src/chart/marker/cross.ts"(){"use strict";Bs(),Zg=class Ww extends Qe{updatePath(){const e=this.size/4.2;super.applyPath(e,Ww.moves)}},Zg.className="Cross",Zg.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],pA=Zg}}),qg,zb,gA=L({"packages/ag-charts-community/src/chart/marker/diamond.ts"(){"use strict";Bs(),qg=class Yw extends Qe{updatePath(){const e=this.size/2;super.applyPath(e,Yw.moves)}},qg.className="Diamond",qg.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],zb=qg}}),Gb,MG=L({"packages/ag-charts-community/src/chart/marker/heart.ts"(){"use strict";Bs(),Gb=class extends Qe{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:s}=this,n=i/4,a=this.y+n/2;e.clear(),e.arc(t-n,a-n,n,s(130),s(330)),e.arc(t+n,a-n,n,s(220),s(50)),e.lineTo(t,a+n),e.closePath()}},Gb.className="Heart"}}),Qg,_G=L({"packages/ag-charts-community/src/chart/marker/pin.ts"(){"use strict";Bs(),Qg=class extends Qe{updatePath(){const{path:t,x:e,y:i}=this,s=this.size,n=.5,a=1;t.clear(),t.moveTo(e+(.15625-n)*s,i+(.34375-a)*s),t.cubicCurveTo(e+(.15625-n)*s,i+(.151491-a)*s,e+(.307741-n)*s,i+(0-a)*s,e+(.5-n)*s,i+(0-a)*s),t.cubicCurveTo(e+(.692259-n)*s,i+(0-a)*s,e+(.84375-n)*s,i+(.151491-a)*s,e+(.84375-n)*s,i+(.34375-a)*s),t.cubicCurveTo(e+(.84375-n)*s,i+(.493824-a)*s,e+(.784625-n)*s,i+(.600181-a)*s,e+(.716461-n)*s,i+(.695393-a)*s),t.cubicCurveTo(e+(.699009-n)*s,i+(.719769-a)*s,e+(.681271-n)*s,i+(.743104-a)*s,e+(.663785-n)*s,i+(.766105-a)*s),t.cubicCurveTo(e+(.611893-n)*s,i+(.834367-a)*s,e+(.562228-n)*s,i+(.899699-a)*s,e+(.528896-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.524075-n)*s,i+(.992358-a)*s,e+(.512663-n)*s,i+(1-a)*s,e+(.5-n)*s,i+(1-a)*s),t.cubicCurveTo(e+(.487337-n)*s,i+(1-a)*s,e+(.475925-n)*s,i+(.992358-a)*s,e+(.471104-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.487337-n)*s,i+(1-a)*s,e+(.475925-n)*s,i+(.992358-a)*s,e+(.471104-n)*s,i+(.980648-a)*s),t.cubicCurveTo(e+(.437772-n)*s,i+(.899699-a)*s,e+(.388107-n)*s,i+(.834367-a)*s,e+(.336215-n)*s,i+(.766105-a)*s),t.cubicCurveTo(e+(.318729-n)*s,i+(.743104-a)*s,e+(.300991-n)*s,i+(.719769-a)*s,e+(.283539-n)*s,i+(.695393-a)*s),t.cubicCurveTo(e+(.215375-n)*s,i+(.600181-a)*s,e+(.15625-n)*s,i+(.493824-a)*s,e+(.15625-n)*s,i+(.34375-a)*s),t.closePath()}},Qg.className="MapPin",Qg.center={x:.5,y:1}}}),Jg,fA,kG=L({"packages/ag-charts-community/src/chart/marker/plus.ts"(){"use strict";Bs(),Jg=class Kw extends Qe{updatePath(){const e=this.size/3;super.applyPath(e,Kw.moves)}},Jg.className="Plus",Jg.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],fA=Jg}}),Bc,mA=L({"packages/ag-charts-community/src/chart/marker/square.ts"(){"use strict";Bs(),Bc=class extends Qe{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}},Bc.className="Square"}}),Vb,DG=L({"packages/ag-charts-community/src/chart/marker/star.ts"(){"use strict";Bs(),Vb=class extends Qe{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=5,a=s/2,o=Math.PI/2;i.clear();for(let r=0;r<n*2;r++){const l=r%2===0?s:a,c=r*Math.PI/n-o,h=t+Math.cos(c)*l,u=e+Math.sin(c)*l;i.lineTo(h,u)}i.closePath()}},Vb.className="Star"}}),tf,tl,Ub=L({"packages/ag-charts-community/src/chart/marker/triangle.ts"(){"use strict";Bs(),tf=class jw extends Qe{updatePath(){const e=this.size*1.1;super.applyPath(e,jw.moves)}},tf.className="Triangle",tf.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],tl=tf}});function yA(t){return typeof t=="string"&&vA.includes(t)}function Kn(t=Bc){return yA(t)?Hb[t]:typeof t=="function"?t:Bc}var Hb,vA,Pa=L({"packages/ag-charts-community/src/chart/marker/util.ts"(){"use strict";Vu(),SG(),gA(),MG(),_G(),kG(),mA(),DG(),Ub(),Hb={circle:wa,cross:pA,diamond:zb,heart:Gb,pin:Qg,plus:fA,square:Bc,star:Vb,triangle:tl},vA=Object.keys(Hb)}}),ef,Wb=L({"packages/ag-charts-community/src/chart/series/dataModelSeries.ts"(){"use strict";Ji(),_t(),de(),Di(),ef=class extends Qr{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){const i=zt.is(t),s=zt.is(e);return{isContinuousX:i,isContinuousY:s,xScaleType:t?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){var t,e;const i=(t=this.axes.x)==null?void 0:t.scale,s=(e=this.axes.y)==null?void 0:e.scale;return this.moduleMap.mapModules(n=>n.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:s}))).flat()}requestDataModel(t,e,i){return F(this,null,function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=yield t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}})}isProcessedDataAnimatable(){var t,e;const i=(e=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:n}=i;return s&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){const e=this.getNodeData();if(e===void 0||e.length===0)return;const i=this.computeFocusDatumIndex(t,e);if(i===void 0)return;const{showFocusBox:s}=this,n=e[i],a=K(B({},t),{datumIndex:i}),o=this.computeFocusBounds(a);if(o!==void 0)return{bounds:o,showFocusBox:s,datum:n,datumIndex:i}}computeFocusDatumIndex(t,e){const i=r=>{const{missing:l=!1,enabled:c=!0}=e[r];return!l&&c},s=r=>{for(;r>=0&&!i(r);)r--;return r===-1?void 0:r},n=r=>{for(;r<e.length&&!i(r);)r++;return r===e.length?void 0:r};let a;const o=St(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?a=s(o):t.datumIndexDelta>0?a=n(o):(a??(a=n(o)),a??(a=s(o))),a===void 0?t.datumIndexDelta===0?void 0:t.datumIndex-t.datumIndexDelta:a}}}}),jn,Uu,Yb,Fc,Fs,Hu=L({"packages/ag-charts-community/src/chart/series/seriesProperties.ts"(){"use strict";ne(),gt(),jn=class extends xt{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}},_([A(Et,{optional:!0})],jn.prototype,"fill",2),_([A(Rt,{optional:!0})],jn.prototype,"fillOpacity",2),_([A(Et,{optional:!0})],jn.prototype,"stroke",2),_([A(q,{optional:!0})],jn.prototype,"strokeWidth",2),_([A(Rt,{optional:!0})],jn.prototype,"strokeOpacity",2),_([A(Gn,{optional:!0})],jn.prototype,"lineDash",2),_([A(q,{optional:!0})],jn.prototype,"lineDashOffset",2),Uu=class extends xt{},_([A(q,{optional:!0})],Uu.prototype,"strokeWidth",2),_([A(Rt,{optional:!0})],Uu.prototype,"dimOpacity",2),_([A(pt,{optional:!0})],Uu.prototype,"enabled",2),Yb=class extends xt{constructor(){super(...arguments),this.color="black"}},_([A(Et,{optional:!0})],Yb.prototype,"color",2),Fc=class extends xt{constructor(){super(...arguments),this.item=new jn,this.series=new Uu,this.text=new Yb}},_([A(rt)],Fc.prototype,"item",2),_([A(rt)],Fc.prototype,"series",2),_([A(rt)],Fc.prototype,"text",2),Fs=class extends xt{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new Fc}},_([A(et,{optional:!0})],Fs.prototype,"id",2),_([A(pt)],Fs.prototype,"visible",2),_([A(pt)],Fs.prototype,"showInLegend",2),_([A(et)],Fs.prototype,"cursor",2),_([A(vu)],Fs.prototype,"nodeClickRange",2),_([A(rt)],Fs.prototype,"highlightStyle",2)}}),Oo,Co,sf,Ba,Fa,is=L({"packages/ag-charts-community/src/chart/series/cartesian/cartesianSeries.ts"(){"use strict";Do(),Ji(),Ax(),Mt(),be(),Io(),un(),hi(),bG(),Ee(),Lu(),Ct(),gt(),Ru(),de(),ts(),Pa(),Wb(),Di(),Hu(),Oo={x:["xKey"],y:["yKey"]},Co={x:["xName"],y:["yName"]},sf=class extends wc{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Ba=class extends Fs{},_([A(et,{optional:!0})],Ba.prototype,"legendItemName",2),Fa=class extends ef{constructor(t){var e=t,{pathsPerSeries:i=1,hasMarkers:s=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:a=[],datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:l=!1,animationResetFns:c,directionKeys:h,directionNames:u}=e,d=se(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(B({directionKeys:h,directionNames:u,canHaveAxes:!0},d)),this.NodeEvent=sf,this.dataNodeGroup=this.contentGroup.appendChild(new ut({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new ut({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new ut({name:`${this.id}-series-labels`,zIndex:8,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=pe.select(this.labelGroup,wt),this.highlightSelection=pe.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=pe.select(this.highlightLabel,wt),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=Xt.create(),!h||!u)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:a,directionKeys:h,directionNames:u,animationResetFns:c,animationAlwaysUpdateSelections:l,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:r},this.paths=[];for(let p=0;p<i;p++)this.paths[p]=new ki,this.paths[p].zIndex=4,this.paths[p].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",p),this.contentGroup.appendChild(this.paths[p]);this.datumSelection=pe.select(this.dataNodeGroup,()=>this.nodeFactory(),o),this.markerSelection=pe.select(this.markerGroup,()=>this.markerFactory(),r),this.animationState=new bc("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:p=>this.animateWaitingUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:p=>this.resetAllAnimation(p),reset:"empty"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"?this.animationState.transition("skip"):t==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}update(t){return F(this,arguments,function*({seriesRect:e}){var i,s;const{visible:n,_contextNodeData:a}=this,r=((s=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())==null?void 0:s.series)===this,l=this.checkResize(e),c=yield this.updateHighlightSelection(r);yield this.updateSelections(n),yield this.updateNodes(c,r,n);const h=this.getAnimationData(e,a);h&&(l&&this.animationState.transition("resize",h),this.animationState.transition("update",h))})}updateSelections(t){return F(this,null,function*(){var e,i;const s=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!t&&s)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=yield this.createNodeData();const n=this.isProcessedDataAnimatable();this._contextNodeData&&((i=(e=this._contextNodeData).animationValid)!=null||(e.animationValid=n)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:a,processedData:o}=this;a!==void 0&&o!==void 0&&this.dispatch("data-update",{dataModel:a,processedData:o})}yield this.updateSeriesSelections()}})}updateSeriesSelections(t){return F(this,null,function*(){const{datumSelection:e,labelSelection:i,markerSelection:s,paths:n}=this,a=this._contextNodeData;if(!a)return;const{nodeData:o,labelData:r,itemId:l}=a;yield this.updatePaths({seriesHighlighted:t,itemId:l,contextData:a,paths:n}),this.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=yield this.updateLabelSelection({labelData:r,labelSelection:i}),this.opts.hasMarkers&&(this.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:s}))})}markerFactory(){const t=Kn();return new t}getGroupZIndexSubOrder(t,e=0){var i;const s=super.getGroupZIndexSubOrder(t,e);if(t==="paths"){const[n]=s,a=(i=this.opts.pathsZIndexSubOrderOffset[e])!=null?i:0;s[0]=Dr(n)?()=>Number(n())+a:Number(n)+a}return s}updateNodes(t,e,i){return F(this,null,function*(){var s;const{highlightSelection:n,highlightLabelSelection:a,opts:{hasMarkers:o,hasHighlightedLabels:r}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&this._contextNodeData!=null&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&e;const h=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0}),this.animationState.transition("highlight",n)),r&&(yield this.updateLabelNodes({labelSelection:a}));const{dataNodeGroup:u,markerGroup:d,datumSelection:p,labelSelection:g,markerSelection:f,paths:m,labelGroup:v}=this,{itemId:y}=(s=this.contextNodeData)!=null?s:{};u.opacity=h,u.visible=l||c,v.visible=c,o&&(d.opacity=h,d.zIndex=u.zIndex>=4?u.zIndex:u.zIndex+1,d.visible=c),v&&(v.opacity=h),yield this.updatePathNodes({seriesHighlighted:e,itemId:y,paths:m,opacity:h,visible:c,animationEnabled:l}),u.visible&&(yield this.updateDatumNodes({datumSelection:p,highlightedItems:t,isHighlight:!1}),yield this.updateLabelNodes({labelSelection:g}),o&&(yield this.updateMarkerNodes({markerSelection:f,isHighlight:!1})))})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum&&s.itemId===e.itemId);return i.length===0?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return F(this,null,function*(){var e;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this;if(!n)return;const a=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight(),o=t&&a?.datum?a:void 0;let r,l;if(o!=null){const c=this.isLabelEnabled(),{labelData:h,nodeData:u}=n;l=this.getHighlightData(u,o),r=c?this.getHighlightLabelData(h,o):void 0}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:s}),l})}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)t.datum.missing!==!0&&(yield t)}getQuadTree(){if(this.quadtree===void 0){const{width:t,height:e}=this.ctx.scene.canvas,i=new ot(0,0,t,e);this.quadtree=new cA(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:s,y:n}=t,{opts:{hasMarkers:a}}=this;let o;const{dataNodeGroup:r,markerGroup:l}=this;if(o=r.pickNode(s,n),!o&&a&&(o=l?.pickNode(s,n)),o&&o.datum.missing!==!0)return{datum:o.datum,distance:0};for(const c of this.moduleMap.modules()){const{datum:h}=(e=c.pickNodeExact(t))!=null?e:{};if(h!=null&&h?.missing!==!0)return{datum:h,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{axes:a,rootGroup:o,_contextNodeData:r}=this;if(!r)return;const l=a.x,c=a.y,h=o.transformPoint(s,n);let u=1/0,d;for(const p of r.nodeData){const{point:{x:g=NaN,y:f=NaN}={}}=p;if(isNaN(g)||isNaN(f)||!(l?.inRange(g)&&c?.inRange(f)))continue;const v=Math.max(nt(h.x-g,2)+nt(h.y-f,2),0);v<u&&(u=v,d=p)}for(const p of this.moduleMap.modules()){const g=p.pickNodeNearest(t);if(g!==void 0&&g.distanceSquared<u){u=g.distanceSquared,d=g.datum;break}}if(d){const p=Math.max(Math.sqrt(u)-((i=(e=d.point)==null?void 0:e.size)!=null?i:0),0);return{datum:d,distance:p}}}pickNodeMainAxisFirst(t,e){var i,s,n,a;const{x:o,y:r}=t,{axes:l,rootGroup:c,_contextNodeData:h}=this;if(!h)return;const u=l.x,d=l.y,p=[u,d].filter(x=>x instanceof La).map(x=>x.direction);if(e&&p.length===0)return;const[g="x"]=p,f=c.transformPoint(o,r),m=g==="x"?[f.x,f.y]:[f.y,f.x],v=[1/0,1/0];let y;for(const x of h.nodeData){const{x:b=NaN,y:S=NaN}=(s=(i=x.point)!=null?i:x.midPoint)!=null?s:{};if(isNaN(b)||isNaN(S)||x.missing===!0||!(u?.inRange(b)&&d?.inRange(S)))continue;const D=g==="x"?[b,S]:[S,b];let T=!0;for(let I=0;I<D.length;I++){const N=Math.abs(D[I]-m[I]);if(N>v[I]){T=!1;break}N<v[I]&&(v[I]=N,v.fill(1/0,I+1,v.length))}T&&(y=x)}if(y){let x=Math.max(nt(v[0],2)+nt(v[1],2)-((a=(n=y.point)==null?void 0:n.size)!=null?a:0),0);for(const b of this.moduleMap.modules()){const S=b.pickNodeMainAxisFirst(t);if(S!==void 0&&S.distanceSquared<x){y=S.datum,x=S.distanceSquared;break}}return{datum:y,distance:Math.sqrt(x)}}}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=e!=null&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,o=a!=null&&a===t.legendItemName;s.id===this.id||o?this.toggleSeriesItem(i,!0):e&&n===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){const{dirtyNodeData:i,sizeCache:s,minRect:n,minVisibleRect:a}=this.minRectsCache,o=JSON.stringify({width:t,height:e});if(!(o!==s)&&!i&&n&&a)return{minRect:n,minVisibleRect:a};const l=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l?.minRect,minVisibleRect:l?.minVisibleRect},l}computeMinRects(t,e){var i,s;const n=this._contextNodeData;if(!n?.nodeData.length)return;const{nodeData:a}=n,o=Array(a.length),r=Array(a.length);for(const[b,{midPoint:S}]of a.entries())o[b]=(i=S?.x)!=null?i:0,r[b]=(s=S?.y)!=null?s:0;o.sort((b,S)=>b-S),r.sort((b,S)=>b-S);let l,c,h,u,d=0,p=0;for(let b=1;b<a.length;b++)o[b]>=0&&(l??(l=b)),o[b]>t&&(c??(c=b)),r[b]>=0&&(h??(h=b)),r[b]>e&&(u??(u=b)),d=Math.max(d,o[b]-o[b-1]),p=Math.max(p,r[b]-r[b-1]);c??(c=a.length),u??(u=a.length);const g=l!=null&&c!=null?o.slice(l,c):[],f=h!=null&&u!=null?r.slice(h,u):[];let m=0,v=0;for(let b=1;b<Math.max(g.length,f.length);b++){const S=g[b],k=g[b-1],D=f[b],T=f[b-1];S!=null&&k!=null&&(m=Math.max(m,S-k)),D!=null&&T!=null&&(v=Math.max(v,D-T))}const y=new ot(0,0,d,p),x=new ot(0,0,m,v);return{minRect:y,minVisibleRect:x}}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,n=i??[];if(e){const a=s;return this.updateMarkerSelection({nodeData:n,markerSelection:a})}else return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(t){var e;return this.updateLabelSelection({labelData:(e=t.items)!=null?e:[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection})}updateDatumNodes(t){return F(this,null,function*(){})}updateMarkerSelection(t){return F(this,null,function*(){return t.markerSelection})}updateMarkerNodes(t){return F(this,null,function*(){})}updatePaths(t){return F(this,null,function*(){t.paths.forEach(e=>e.visible=!1)})}updatePathNodes(t){return F(this,null,function*(){const{paths:e,opacity:i,visible:s}=t;for(const n of e)n.opacity=i,n.visible=s})}resetAllAnimation(t){var e,i,s;const{path:n,datum:a,label:o,marker:r}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),n&&t.paths.forEach(l=>{Ce([l],n)}),a&&Ce([t.datumSelection],a),o&&Ce([t.labelSelection],o),r&&this.opts.hasMarkers&&Ce([t.markerSelection],r),((s=t.contextData)==null?void 0:s.animationValid)===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:s}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};s&&Ce([t],s)}animateReadyHighlightMarkers(t){var e,i;const{marker:s}=(i=(e=this.opts)==null?void 0:e.animationResetFns)!=null?i:{};s&&Ce([t],s)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){const t=this.getAnimationData();t&&this.animationState.transition("clear",t)}getAnimationData(t,e){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}:void 0}calculateScaling(){const t={};for(const e of Object.values(Qp)){const i=this.axes[e];if(i){if(i.scale instanceof pg){const{range:s,domain:n}=i.scale;t[e]={type:"log",convert:a=>i.scale.convert(a),domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale instanceof zt){const{range:s}=i.scale,n=i.scale.getDomain();t[e]={type:"continuous",domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale){const{domain:s}=i.scale;t[e]={type:"category",domain:s,range:s.map(n=>i.scale.convert(n))}}}}return t}}}}),xA,nf,bA,IG=L({"packages/ag-charts-community/src/chart/cartesianChart.ts"(){"use strict";li(),yt(),Ru(),kg(),Pc(),de(),is(),xA=["top","right","bottom","left"],nf=class Xw extends Jr{constructor(e,i){super(e,i),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisAreaWidths=new Map,this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(e,i){super.onAxisChange(e,i),this.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}performLayout(){return F(this,null,function*(){const e=yield As(Xw.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:s,annotationRoot:n,highlightRoot:a}=this,{animationRect:o,seriesRect:r,visibility:l,clipSeries:c}=this.updateAxes(e);this.seriesRoot.visible=l.series,this.seriesRect=r,this.animationRect=o;const{x:h,y:u}=r;if(i){for(const f of[s,n,a])f.translationX=Math.floor(h),f.translationY=Math.floor(u);this.firstSeriesTranslation=!1}else{const{translationX:f,translationY:m}=s;Fn(this.id,"seriesRect",this.ctx.animationManager,[s,a,n],{translationX:f,translationY:m},{translationX:Math.floor(h),translationY:Math.floor(u)},{phase:"update"})}const d=r.clone().grow(this.seriesArea.padding);this.hoverRect=d;const p=this.seriesArea.clip||c?d:void 0;s.setClipRectInGroupCoordinateSpace(p),a.setClipRectInGroupCoordinateSpace(p),n.setClipRectInGroupCoordinateSpace(p),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:c,series:{rect:r,paddedRect:d,visible:l.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(f=>B({id:f.id},f.getLayoutState()))});const g=this.modulesManager.mapModules(f=>{var m;return(m=f.performCartesianLayout)==null?void 0:m.call(f,{seriesRect:r})});return yield Promise.all(g),e})}updateAxes(e){var i;const s=this.axes.flatMap(y=>{var x;return(x=y.crossLines)!=null?x:[]}).map(y=>y.id),n=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===s.length&&this._lastCrossLineIds.every((y,x)=>s[x]===y);let a,o,r;n?(a=new Map(this._lastAxisAreaWidths.entries()),o=this._lastClipSeries,r=B({},this._lastVisibility)):(a=new Map,o=!1,r={crossLines:!0,series:!0},this._lastCrossLineIds=s);const l=new Set(this.axes.map(y=>y.position));for(const y of a.keys())l.has(y)||a.delete(y);const c=(y,x,b)=>[...y.keys()].some(S=>!a.has(S))||r.crossLines!==b.crossLines||r.series!==b.series||o!==x?!1:[...a.entries()].every(([S,k])=>{const D=y.get(S);return k!=null||D!=null?k===D:!0}),h=y=>{for(const[x,b]of y.entries()){if(b&&Math.abs(b)===1/0){y.set(x,0);continue}y.set(x,b!=null?Math.ceil(b):b)}return y};let u=new Map,d={},p=!1,g=(i=this.seriesRect)==null?void 0:i.clone(),f=0,m={};do{a=new Map(u.entries()),o=p,Object.assign(r,d);const y=this.updateAxesPass(a,e.clone(),g);if(u=h(y.axisAreaWidths),d=y.visibility,p=y.clipSeries,{seriesRect:g,primaryTickCounts:m}=y,f++>10){Z.warn("unable to find stable axis layout.");break}}while(!c(u,p,d));this.axes.forEach(y=>{y.update(m[y.direction])});const v=5;return this.axes.forEach(y=>{if(y.setCrossLinesVisible(r.crossLines),!!g)switch(y.clipGrid(g.x,g.y,g.width+v,g.height+v),y.position){case"left":case"right":y.clipTickLines(e.x,g.y,e.width+v,g.height+v);break;case"top":case"bottom":y.clipTickLines(g.x,e.y,g.width+v,e.height+v);break}}),this._lastAxisAreaWidths=a,this._lastVisibility=r,this._lastClipSeries=o,{seriesRect:g,animationRect:e,visibility:r,clipSeries:o}}updateAxesPass(e,i,s){var n;const a=new Map,o=new Map,r={series:!0,crossLines:!0};let l=!1;const c={},h=this.applySeriesPadding(i),u=s?this.buildCrossLinePadding(e):{},d=this.buildAxisBound(h,e,u,r),p=this.buildSeriesRect(d,e);for(const m of this.axes){const{position:v="left"}=m,{clipSeries:y,axisThickness:x}=this.calculateAxisDimensions({axis:m,seriesRect:p,paddedBounds:h,primaryTickCounts:c,clipSeries:l});a.set(m.id,x),o.has(v)||o.set(v,[]),(n=o.get(v))==null||n.push(m),l=l||y}const g=new Map,f=new Map;for(const[m,v]of o.entries())g.set(m,this.calculateAxisArea(v,a,f));for(const[m,v]of o.entries())this.positionAxes({axes:v,position:m,axisWidths:a,axisOffsets:f,axisAreaWidths:g,axisBound:d,seriesRect:p});return{clipSeries:l,seriesRect:p,axisAreaWidths:g,visibility:r,primaryTickCounts:c}}buildCrossLinePadding(e){var i;const s={};this.axes.forEach(n=>{var a;(a=n.crossLines)==null||a.forEach(o=>{var r;(r=o.calculatePadding)==null||r.call(o,s)})});for(const[n,a=0]of Object.entries(s))s[n]=Math.max(a-((i=e.get(n))!=null?i:0),0);return s}applySeriesPadding(e){const i=e.clone(),s=this.axes.slice().reverse();return xA.forEach(n=>{const a=this.seriesArea.padding[n],o=s.find(r=>r.position===n);o?o.seriesAreaPadding=a:i.shrink(a,n)}),i}buildAxisBound(e,i,s,n){var a,o,r,l;const c=e.clone(),{top:h=0,right:u=0,bottom:d=0,left:p=0}=s,g=p+u,f=h+d,m=((a=i.get("left"))!=null?a:0)+((o=i.get("right"))!=null?o:0)+g,v=((r=i.get("top"))!=null?r:0)+((l=i.get("bottom"))!=null?l:0)+f;return c.width<=m||c.height<=v?(n.crossLines=!1,n.series=!1,c):(c.x+=p,c.y+=h,c.width-=g,c.height-=f,c)}buildSeriesRect(e,i){var s,n,a,o,r,l;const c=e.clone();return c.x+=(s=i.get("left"))!=null?s:0,c.y+=(n=i.get("top"))!=null?n:0,c.width-=((a=i.get("left"))!=null?a:0)+((o=i.get("right"))!=null?o:0),c.height-=((r=i.get("top"))!=null?r:0)+((l=i.get("bottom"))!=null?l:0),c.width=Math.max(0,c.width),c.height=Math.max(0,c.height),c}clampToOutsideSeriesRect(e,i,s,n){const{x:a,y:o,width:r,height:l}=e,h=[a,o,a+r,o+l][(s==="x"?0:1)+(n===1?0:2)];return(n===1?Math.min:Math.max)(i,h)}calculateAxisDimensions(e){var i;const{axis:s,seriesRect:n,paddedBounds:a,primaryTickCounts:o}=e;let{clipSeries:r}=e;const{position:l="left",direction:c}=s;this.sizeAxis(s,n,l);let h=s.nice?o[c]:void 0;const u=c==="y",d=.3;s.thickness?s.maxThickness=s.thickness:s.maxThickness=(u?a.width:a.height)*d;const p=s.calculateLayout(h);h=p.primaryTickCount,(i=o[c])!=null||(o[c]=h),r||(r=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1);let g;return s.thickness!=null&&s.thickness>0?g=s.thickness:g=u?p.bbox.width:p.bbox.height,g=Math.ceil(g),{clipSeries:r,axisThickness:g,primaryTickCount:h}}sizeAxis(e,i,s){const n=e instanceof La||e instanceof Ta,a=s==="left"||s==="right";let{min:o=0,max:r=1}=e.disableZoom?{}:this.ctx.zoomManager.getAxisZoom(e.id);const{width:l,height:c}=i,h=0,u=a?c:l;let d=h,p=u;const{width:g,unit:f,align:m}=e.layoutConstraints;f==="px"?p=d+g:p=p*g/100,m==="end"&&(d=u-(p-d),p=u),n&&a?[o,r]=[1-r,1-o]:a&&([d,p]=[p,d]),e.range=[d,p],e.visibleRange=[o,r],e.gridLength=a?l:c}calculateAxisArea(e,i,s){var n;let a=0,o=0;for(const r of e){s.set(r.id,o);const l=(n=i.get(r.id))!=null?n:0;a=Math.max(a,o+l),r.layoutConstraints.stacked&&(o+=l+15)}return a}positionAxes(e){var i,s,n,a;const{axes:o,axisBound:r,axisWidths:l,axisOffsets:c,axisAreaWidths:h,seriesRect:u,position:d}=e,p=(i=h.get(d))!=null?i:0;let g="x",f="y",m=1,v=0;(d==="top"||d==="bottom")&&(g="y",f="x",v+=1),v+=r[g],(d==="right"||d==="bottom")&&(m=-1,v+=g==="x"?r.width:r.height);for(const y of o){const x=(s=h.get(f==="x"?"left":"top"))!=null?s:0;y.translation[f]=r[f]+x;const b=(n=l.get(y.id))!=null?n:0,S=(a=c.get(y.id))!=null?a:0;y.translation[g]=this.clampToOutsideSeriesRect(u,v+m*(S+b),g,m),y.gridPadding=p-S-b,y.updatePosition()}}shouldFlipXY(){return!this.series.some(e=>!(e instanceof Fa&&e.shouldFlipXY()))}},nf.className="CartesianChart",nf.type="cartesian",bA=nf}}),zc,Kb,AG=L({"packages/ag-charts-community/src/chart/chartProxy.ts"(){"use strict";Oa(),bi(),ue(),Ye(),Kr(),zc=class $w{constructor(e,i){this.factoryApi=i,this.chart=e}static isInstance(e){var i;return e instanceof $w||((i=e.constructor)==null?void 0:i.name)==="AgChartInstanceProxy"&&e.chart!=null?!0:e.chart!=null&&this.validateImplementation(e)}static validateImplementation(e){var i;const s=["getOptions","destroy"],n=Object.keys((i=Object.getPrototypeOf(e))!=null?i:{});return s.every(a=>n.includes(a))}update(e){return F(this,null,function*(){this.factoryApi.createOrUpdate(e,this),yield this.chart.waitForUpdate()})}updateDelta(e){return F(this,null,function*(){this.factoryApi.updateUserDelta(this,e),yield this.chart.waitForUpdate()})}getOptions(){const e=ri(this.chart.getOptions());for(const i in e)i.startsWith("_")&&delete e[i];return e}waitForUpdate(){return this.chart.waitForUpdate()}download(e){return F(this,null,function*(){const i=yield this.prepareResizedChart(this,e);try{i.chart.download(e?.fileName,e?.fileFormat)}finally{i.destroy()}})}getImageDataURL(e){return F(this,null,function*(){const i=yield this.prepareResizedChart(this,e);try{return i.chart.getCanvasDataURL(e?.fileFormat)}finally{i.destroy()}})}getState(){return this.factoryApi.caretaker.save(this.chart.ctx.annotationManager)}setState(e){return F(this,null,function*(){this.factoryApi.caretaker.restore(e,this.chart.ctx.annotationManager),yield this.chart.waitForUpdate()})}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}prepareResizedChart(e){return F(this,arguments,function*({chart:i},s={}){var n,a,o,r;const l=(a=(n=s.width)!=null?n:i.width)!=null?a:i.ctx.scene.canvas.width,c=(r=(o=s.height)!=null?o:i.height)!=null?r:i.ctx.scene.canvas.height,h=kt({container:document.createElement("div"),overrideDevicePixelRatio:1,width:l,height:c},Na.hasEnterpriseModules()&&{animation:{enabled:!1}},i.getOptions()),u=yield this.factoryApi.createOrUpdate(h);return u.chart.ctx.zoomManager.updateZoom("agChartV2",i.ctx.zoomManager.getZoom()),i.series.forEach((d,p)=>{d.visible||(u.chart.series[p].visible=!1)}),i.update(0,{forceNodeDataRefresh:!0}),yield u.waitForUpdate(),u})}},zc.chartInstances=new WeakMap,_([Vi({oldValue(t){zc.chartInstances.delete(t)},newValue(t){zc.chartInstances.set(t,this)}})],zc.prototype,"chart",2),Kb=zc}}),pn,Gc=L({"packages/ag-charts-community/src/scale/linearScale.ts"(){"use strict";pc(),Ji(),pn=class extends zt{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(t){return t}ticks(){var t;const e=(t=this.tickCount)!=null?t:zt.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||!this.domain.every(isFinite))return[];this.refresh();const[i,s]=this.getDomain();if(this.interval){const n=Math.abs(this.interval);if(!Su((s-i)/n,this.getPixelRange()))return bu(i,s,n)}return sg(i,s,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i;return(i=this.interval)!=null?i:uc(t,e,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){const t=this.tickCount;if(t<1){this.niceDomain=[...this.domain];return}let[e,i]=this.domain;if(t===1)[e,i]=pF(e,i);else{const s=e>i?Math.ceil:Math.floor,n=i<e?Math.floor:Math.ceil,a=4;for(let o=0;o<a;o++){const r=e,l=i,c=this.getTickStep(e,i),[h,u]=this.domain;if(c>=1)e=s(h/c)*c,i=n(u/c)*c;else{const d=1/c;e=s(h*d)/d,i=n(u*d)/d}if(e===r&&i===l)break}}this.niceDomain=[e,i]}tickFormat({ticks:t,specifier:e}){return ED(t??this.ticks(),e)}}}});function LG(t,e,i){let[s,n]=Ls(t);s=TG(Math.floor(s),n,e);const a=OG(s,n,e),o=e-1;n=s+o*a;const r=i?[n,s]:[s,n],l=NG(s,a,e);return{domain:r,ticks:l}}function TG(t,e,i){const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(t/a)*a}function NG(t,e,i){const s=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(s):0,a=Math.pow(10,n),o=[];for(let r=0;r<i;r++){const l=t+e*r;o[r]=Math.round(l*a)/a}return o}function OG(t,e,i){const s=i-1,n=(e-t)/s;return CG(n)}function CG(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}var EG=L({"packages/ag-charts-community/src/util/secondaryAxisTicks.ts"(){"use strict";_t()}}),za,jb=L({"packages/ag-charts-community/src/chart/axis/numberAxis.ts"(){"use strict";Gc(),Ve(),Eu(),EG(),gt(),_c(),za=class extends Hr{constructor(t,e=new pn){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=xu(t,e,i);return{domain:s,clipped:n}}updateSecondaryAxisTicks(t){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];const{domain:e,ticks:i}=LG(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}},za.className="NumberAxis",za.type="number",_([A(fs(Nr,Cr("max"))),Lo(NaN)],za.prototype,"min",2),_([A(fs(Nr,Er("min"))),Lo(NaN)],za.prototype,"max",2)}}),Xb,Eo,$b=L({"packages/ag-charts-community/src/chart/axis/logAxis.ts"(){"use strict";Ax(),Ve(),Eu(),yt(),Ct(),gt(),jb(),Xb=Kt(t=>ps(t)&&t!==0,"a non-zero number"),Eo=class extends za{constructor(t){super(t,new pg),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=xu(t,e,i),a=s[0]>s[1],o=s[0]<0&&s[1]>0,r=s[0]===0&&s[1]===0;return(a||o||r)&&(o?Z.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):r&&Z.warn("the data domain has 0 extent, no data is rendered.")),s[0]===0&&(s[0]=1),s[1]===0&&(s[1]=-1),{domain:s,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}},Eo.className="LogAxis",Eo.type="log",_([A(fs(Nr,Xb,Cr("max"))),Lo(NaN)],Eo.prototype,"min",2),_([A(fs(Nr,Xb,Er("min"))),Lo(NaN)],Eo.prototype,"max",2)}}),el,SA=L({"packages/ag-charts-community/src/chart/axis/timeAxis.ts"(){"use strict";ng(),Ve(),gt(),_c(),el=class extends Hr{constructor(t){super(t,new Mu),this.min=void 0,this.max=void 0}normaliseDataDomain(t){var e;let{min:i,max:s}=this,n=!1;return typeof i=="number"&&(i=new Date(i)),typeof s=="number"&&(s=new Date(s)),t.length>2&&(t=((e=Vn(t))!=null?e:[0,1e3]).map(a=>new Date(a))),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),s instanceof Date&&(n||(n=s<t[1]),t=[t[0],s]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}onFormatChange(t,e,i,s){s?super.onFormatChange(t,e,i,s):(this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:t,domain:i,formatOffset:1}))}calculatePadding(){return[0,0]}},el.className="TimeAxis",el.type="time",_([A(fs($p,Cr("max")),{optional:!0})],el.prototype,"min",2),_([A(fs($p,Er("min")),{optional:!0})],el.prototype,"max",2)}}),Zb,Wu,Yu,af,Ii,of=L({"packages/ag-charts-community/src/scene/shape/rect.ts"(){"use strict";Mt(),Zx(),un(),ko(),Zb=1e-6,Wu=(t,e,i,s,n)=>{let a=!1,o=!1,r=s-Math.sqrt(Math.max(nt(n,2)-nt(i,2),0)),l=0,c=0,h=i-Math.sqrt(Math.max(nt(n,2)-nt(s,2),0));return r>t?(a=!0,r=t,l=i-Math.sqrt(Math.max(nt(n,2)-nt(s-t,2)))):r<Zb&&(r=0),h>e?(o=!0,c=s-Math.sqrt(Math.max(nt(n,2)-nt(i-e,2))),h=e):h<Zb&&(h=0),{leading0:r,leading1:l,trailing0:c,trailing1:h,leadingClipped:a,trailingClipped:o}},Yu=(t,{x0:e,y0:i,x1:s,y1:n,cx:a,cy:o},r,l)=>{if(l&&t.moveTo(e,i),e!==s||i!==n){const c=Math.atan2(i-o,e-a),h=Math.atan2(n-o,s-a);t.arc(a,o,r,c,h)}else t.lineTo(e,i)},af=(t,e,i,s,n,a,o)=>{let{topLeft:r,topRight:l,bottomRight:c,bottomLeft:h}=a;const u=Math.max(r+h,l+c),d=Math.max(r+l,h+c);if(u<=0&&d<=0){o==null?t.rect(e,i,s,n):t.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&r===l&&r===c&&r===h){t.roundRect(e,i,s,n,r);return}if(s<0&&(e+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(o==null)o=new ot(e,i,s,n);else{const D=Math.max(e,o.x),T=Math.min(e+s,o.x+o.width),I=Math.max(i,o.y),N=Math.min(i+n,o.y+o.height);o=new ot(D,I,T-D,N-I)}const p=Math.max(u/n,d/s,1);p>1&&(r/=p,l/=p,c/=p,h/=p);let g=!0,f=!0,m=!0,v=!0,y,x,b,S;if(g){const D=Wu(o.height,o.width,Math.max(e+r-o.x,0),Math.max(i+r-o.y,0),r);D.leadingClipped&&(v=!1),D.trailingClipped&&(f=!1);const T=Math.max(o.x+D.leading1,o.x),I=Math.max(o.y+D.leading0,o.y),N=Math.max(o.x+D.trailing1,o.x),C=Math.max(o.y+D.trailing0,o.y),E=e+r,O=i+r;y={x0:T,y0:I,x1:N,y1:C,cx:E,cy:O}}if(f){const D=Wu(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+s-l),0),l);D.leadingClipped&&(g=!1),D.trailingClipped&&(m=!1);const T=Math.min(o.x+o.width-D.leading0,o.x+o.width),I=Math.max(o.y+D.leading1,o.y),N=Math.min(o.x+o.width-D.trailing0,o.x+o.width),C=Math.max(o.y+D.trailing1,o.y),E=e+s-l,O=i+l;x={x0:T,y0:I,x1:N,y1:C,cx:E,cy:O}}if(m){const D=Wu(o.height,o.width,Math.max(o.x+o.width-(e+s-c),0),Math.max(o.y+o.height-(i+n-c),0),c);D.leadingClipped&&(f=!1),D.trailingClipped&&(v=!1);const T=Math.min(o.x+o.width-D.leading1,o.x+o.width),I=Math.min(o.y+o.height-D.leading0,o.y+o.height),N=Math.min(o.x+o.width-D.trailing1,o.x+o.width),C=Math.min(o.y+o.height-D.trailing0,o.y+o.height),E=e+s-c,O=i+n-c;b={x0:T,y0:I,x1:N,y1:C,cx:E,cy:O}}if(v){const D=Wu(o.width,o.height,Math.max(o.y+o.height-(i+n-h),0),Math.max(e+h-o.x,0),h);D.leadingClipped&&(m=!1),D.trailingClipped&&(g=!1);const T=Math.max(o.x+D.leading0,o.x),I=Math.min(o.y+o.height-D.leading1,o.y+o.height),N=Math.max(o.x+D.trailing0,o.x),C=Math.min(o.y+o.height-D.trailing1,o.y+o.height),E=e+h,O=i+n-h;S={x0:T,y0:I,x1:N,y1:C,cx:E,cy:O}}let k=!1;g&&y!=null&&(Yu(t,y,r,!k),k||(k=!0)),f&&x!=null&&(Yu(t,x,l,!k),k||(k=!0)),m&&b!=null&&(Yu(t,b,c,!k),k||(k=!0)),v&&S!=null&&(Yu(t,S,h,!k),k||(k=!0)),t.closePath()},Ii=class extends ki{constructor(){super(...arguments),this.borderPath=new Ic,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=xs.defaultStyles.strokeWidth,this.effectiveStrokeWidth=xs.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var t,e,i;const{path:s,borderPath:n,crisp:a,topLeftCornerRadius:o,topRightCornerRadius:r,bottomRightCornerRadius:l,bottomLeftCornerRadius:c}=this;let{x:h,y:u,width:d,height:p,strokeWidth:g,clipBBox:f}=this;const v=1/((e=(t=this.layerManager)==null?void 0:t.canvas.pixelRatio)!=null?e:1);let y=1;if(s.clear(!0),n.clear(!0),a&&(d<=v&&(y*=d/v),p<=v&&(y*=p/v),d=this.align(h,d),p=this.align(u,p),h=this.align(h),u=this.align(u),f=f!=null?new ot(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),g)if(d<v){const x=h+v/2;n.moveTo(x,u),n.lineTo(x,u+p),g=v,this.borderClipPath=void 0}else if(p<v){const x=u+v/2;n.moveTo(h,x),n.lineTo(h+d,x),g=v,this.borderClipPath=void 0}else if(g<d&&g<p){const x=g/2;h+=x,u+=x,d-=g,p-=g;const b=f?.clone().shrink(x),S={topLeft:o>0?o-g:0,topRight:r>0?r-g:0,bottomRight:l>0?l-g:0,bottomLeft:c>0?c-g:0};this.borderClipPath=void 0,d>0&&p>0&&(b==null||b?.width>0&&b?.height>0)&&(af(s,h,u,d,p,S,b),af(n,h,u,d,p,S,b))}else this.borderClipPath=(i=this.borderClipPath)!=null?i:new Ic,this.borderClipPath.clear(!0),this.borderClipPath.rect(h,u,d,p),n.rect(h,u,d,p);else{const x={topLeft:o,topRight:r,bottomRight:l,bottomLeft:c};this.borderClipPath=void 0,af(s,h,u,d,p,x,f)}[o,r,l,c].every(x=>x===0)?(this.hittester=(x,b)=>{const S=this.transformPoint(x,b);return this.getCachedBBox().containsPoint(S.x,S.y)},this.distanceSquared=(x,b)=>this.getCachedBBox().distanceSquared(x,b)):(this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint),this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=y}computeBBox(){var t;const{x:e,y:i,width:s,height:n,clipBBox:a}=this;return(t=a?.clone())!=null?t:new ot(e,i,s,n)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this;t.globalAlpha*=s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:s}=t,{strokeOpacity:n,lineDash:a,lineDashOffset:o,lineCap:r,lineJoin:l,borderPath:c,borderClipPath:h,opacity:u,microPixelEffectOpacity:d}=this;h&&t.clip(h.getPath2D()),t.strokeStyle=e,t.globalAlpha*=u*n*d,t.lineWidth=i,a&&t.setLineDash(a),o&&(t.lineDashOffset=o),r&&(t.lineCap=r),l&&(t.lineJoin=l),t.stroke(c.getPath2D()),t.globalAlpha=s}}},Ii.className="Rect",_([mt()],Ii.prototype,"x",2),_([mt()],Ii.prototype,"y",2),_([mt()],Ii.prototype,"width",2),_([mt()],Ii.prototype,"height",2),_([mt()],Ii.prototype,"topLeftCornerRadius",2),_([mt()],Ii.prototype,"topRightCornerRadius",2),_([mt()],Ii.prototype,"bottomRightCornerRadius",2),_([mt()],Ii.prototype,"bottomLeftCornerRadius",2),_([mt()],Ii.prototype,"clipBBox",2),_([mt()],Ii.prototype,"crisp",2)}}),Vc,MA=L({"packages/ag-charts-community/src/chart/background/background.ts"(){"use strict";Oa(),be(),of(),Ye(),gt(),ts(),Vc=class extends kc{constructor(t){super(),this.node=new ut({name:"background",zIndex:0}),this.rectNode=new Ii,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(t.scene.attachNode(this.node),t.layoutService.addListener("layout-complete",e=>this.onLayoutComplete(e)))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}},_([A(pt),_i("node","visible")],Vc.prototype,"visible",2),_([A(Et,{optional:!0}),_i("rectNode","fill")],Vc.prototype,"fill",2),_([A(rt,{optional:!0})],Vc.prototype,"image",2)}}),qb,_A=L({"packages/ag-charts-community/src/chart/background/backgroundModule.ts"(){"use strict";MA(),qb={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:Vc}}});function il(t,e,i,s){e.addEventListener(i,s),t.push(()=>e.removeEventListener(i,s))}function Qb(t,e,i){il(t,e,"keydown",s=>{s.key==="Escape"&&i(s)})}function kA(t,e,...i){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)&&(t.key===e||i.some(s=>t.key===s))}function DA(t,e,i,s){i&&il(t,e,"keydown",n=>{kA(n,s)&&i.focus()})}function IA(t,e,i,s,n,a){DA(t,e,n,a),DA(t,e,i,s),il(t,e,"keydown",o=>{kA(o,s,a)&&o.preventDefault()})}function rf(t){const{orientation:e,toolbar:i,buttons:s,onEscape:n,onFocus:a,onBlur:o}=t,{nextKey:r,prevKey:l}=Jb[e],c=s.length===0;i.role="toolbar",i.ariaOrientation=e,i.ariaHidden=c.toString();const h=d=>{d.target&&"tabIndex"in d.target&&(s.forEach(p=>p.tabIndex=-1),d.target.tabIndex=0)},u=[];for(let d=0;d<s.length;d++){const p=s[d-1],g=s[d],f=s[d+1];il(u,g,"focus",h),a&&il(u,g,"focus",a),o&&il(u,g,"blur",o),n&&Qb(u,g,n),IA(u,g,p,l,f,r),g.tabIndex=d===0?0:-1}return u}function RG(t){const{orientation:e,menu:i,buttons:s,onEscape:n}=t,{nextKey:a,prevKey:o}=Jb[e];i.role="menu",i.ariaOrientation=e;const r=[];for(let l=0;l<s.length;l++){const c=s[(s.length+l-1)%s.length],h=s[l],u=s[(s.length+l+1)%s.length];n&&Qb(r,h,n),IA(r,h,c,o,u,a),h.tabIndex=-1}return i.tabIndex=-1,n&&Qb(r,i,n),il(r,i,"keydown",l=>{var c;l.target===i&&(l.key===a||l.key===o)&&(l.preventDefault(),(c=s[0])==null||c.focus())}),r}function AA(t,e){return i=>{if(t.ariaDisabled==="true")return i.preventDefault();e(i)}}var Jb,lf=L({"packages/ag-charts-community/src/util/keynavUtil.ts"(){"use strict";Jb={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}}}});function wG({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:a=0,forceResult:o=!1}){const r=t==="horizontal",l={max:r?s:i,fn:r?d=>d.width:d=>d.height,padding:r?a:n},c={max:r?i:s,fn:r?d=>d.height:d=>d.width,padding:r?n:a};let h=0;const u=[];for(;h<e.length;){const d=e.slice(h),p=PG(d,h,l,c,o);if(!p)return;h+=p.processedBBoxCount,u.push(p.pageIndices)}return FG(u,t,e,n,a)}function PG(t,e,i,s,n){let o=GG(t,i);if(o<1){if(!n)return;o=1}let r=o;for(;r>=1;){const l=BG(t,e,r,i,s,n);if(l==null&&r<=1)return;if(l==null){r--;continue}if(typeof l=="number"){if(l<=1)return;r=l<r&&l>1?l:r,r--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function BG(t,e,i,s,n,a){var o;const r=[];let l=0,c=0,h=[];const u=[];for(let d=0;d<t.length;d++){const p=(d+i)%i;p===0&&(l+=c,c=0,h.length>0&&r.push(h),h=[]);const g=s.fn(t[d])+s.padding;u[p]=Math.max((o=u[p])!=null?o:0,g),c=Math.max(c,n.fn(t[d])+n.padding);const f=l+c,m=!a||r.length>0;if(f>n.max&&m){h=[];break}if(u.reduce((y,x)=>y+x,0)>s.max&&!a)return u.length<i?u.length:void 0;h.push(d+e)}return h.length>0&&r.push(h),r.length>0?r:void 0}function FG(t,e,i,s,n){let a=0,o=0;return{pages:t.map(l=>{e==="horizontal"&&(l=zG(l));let c=0;const h=l.map(p=>{const g=p.map(v=>(c=Math.max(v,c),i[v]));let f=0,m=0;return g.forEach(v=>{f+=v.height+s,m=Math.max(m,v.width+n)}),{indices:p,bboxes:g,columnHeight:Math.ceil(f),columnWidth:Math.ceil(m)}});let u=0,d=0;return h.forEach(p=>{u+=p.columnWidth,d=Math.max(d,p.columnHeight)}),a=Math.max(u,a),o=Math.max(d,o),{columns:h,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:d}}),maxPageWidth:a,maxPageHeight:o}}function zG(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((i,s)=>{i.forEach((n,a)=>{e[a][s]=n})}),e}function GG(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max)return i/n<2?Math.ceil(i/2):n;return i}var VG=L({"packages/ag-charts-community/src/chart/gridLayout.ts"(){"use strict"}}),Xn,UG=L({"packages/ag-charts-community/src/chart/markerLabel.ts"(){"use strict";Mt(),be(),hi(),Ve(),Ye(),Xn=class extends ut{constructor(){super({name:"markerLabelGroup"}),this.label=new wt,this.symbolsGroup=new ut({name:"legend-markerLabel-symbols"}),this.pageIndex=NaN,this._markers=[],this._lines=[];const{markers:t,label:e,lines:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.symbolsGroup.append([...i,...t]),this.append([this.symbolsGroup,e])}destroy(){var t;super.destroy(),(t=this.proxyButton)==null||t.remove()}set markers(t){Rr(this._markers,t)||(this._markers.forEach(e=>{this.removeChild(e)}),this._markers=t,this._markers.forEach(e=>{this.symbolsGroup.appendChild(e)}))}get markers(){return this._markers}set lines(t){Rr(this._lines,t)||(this._lines.forEach(e=>{this.removeChild(e)}),this._lines=t,this._lines.forEach(e=>{this.symbolsGroup.appendChild(e)}))}get lines(){return this._lines}update(t){var e,i,s,n,a,o,r;const{markers:l,lines:c}=this;let h=0;for(let x=0;x<Math.max(l.length,c.length);x++){const{length:b,spacing:S}=(e=t[x])!=null?e:0,k=l[x],D=c[x],T=(i=k?.size)!=null?i:0;if(k){const I=k.constructor.center;k.x=(I.x-.5)*T+b/2+h,k.y=(I.y-.5)*T}D&&(D.x1=h,D.x2=h+b,D.y1=0,D.y2=0,D.markDirtyTransform()),h+=S+Math.max(b,T)}const u=t.at(-1),d=this.lines.at(-1),p=this.markers.at(-1),g=d?.visible?d.x2:-1/0,f=((s=p?.x)!=null?s:0)+((n=p?.size)!=null?n:0)/2;if(this.label.x=Math.max(g,f)+((a=u?.spacing)!=null?a:0),t.length<2)return;const m=this.symbolsGroup.computeBBox(),v=Math.max((o=p?.size)!=null?o:0,(r=u?.length)!=null?r:0),y=new ot(m.x+v/2,m.y,v,m.height);this.symbolsGroup.setClipRectInGroupCoordinateSpace(y)}render(t){this.markers.forEach(e=>{e.opacity=this.opacity}),this.lines.forEach(e=>{e.opacity=this.opacity}),this.label.opacity=this.opacity,super.render(t)}},Xn.className="MarkerLabel",_([_i("label")],Xn.prototype,"text",2),_([_i("label")],Xn.prototype,"fontStyle",2),_([_i("label")],Xn.prototype,"fontWeight",2),_([_i("label")],Xn.prototype,"fontSize",2),_([_i("label")],Xn.prototype,"fontFamily",2),_([_i("label","fill")],Xn.prototype,"color",2)}}),sl,$n,Ku,Ro,HG=L({"packages/ag-charts-community/src/chart/pagination/pagination.ts"(){"use strict";be(),hi(),en(),_t(),ne(),Ye(),gt(),Kr(),Ub(),Pa(),sl=class extends xt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},_([A(Et)],sl.prototype,"color",2),_([A(_a,{optional:!0})],sl.prototype,"fontStyle",2),_([A(ka,{optional:!0})],sl.prototype,"fontWeight",2),_([A(q)],sl.prototype,"fontSize",2),_([A(et)],sl.prototype,"fontFamily",2),$n=class extends xt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}},_([A(q)],$n.prototype,"size",2),_([A(Et,{optional:!0})],$n.prototype,"fill",2),_([A(Rt,{optional:!0})],$n.prototype,"fillOpacity",2),_([A(Et,{optional:!0})],$n.prototype,"stroke",2),_([A(q)],$n.prototype,"strokeWidth",2),_([A(Rt)],$n.prototype,"strokeOpacity",2),Ku=class extends xt{constructor(t){super(),this.parent=t,this.shape=tl,this.size=15,this.padding=8}},_([Vi({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Ku.prototype,"shape",2),_([A(q)],Ku.prototype,"size",2),_([A(q)],Ku.prototype,"padding",2),Ro=class extends xt{constructor(t,e,i,s){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.regionManager=i,this.cursorManager=s,this.id=wn(this),this.marker=new Ku(this),this.activeStyle=new $n,this.inactiveStyle=new $n,this.highlightStyle=new $n,this.label=new sl,this.group=new ut({name:"pagination"}),this.labelNode=new wt,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new tl,this._previousButton=new tl,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const n=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(n.addListener("click",a=>this.onPaginationClick(a)),n.addListener("hover",a=>this.onPaginationMouseMove(a))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(t=>t())}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:o,fontFamily:r}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:o,highlightActive:r}=this,l=(c,h)=>h?a:c===r?o:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){var i;const{size:s}=this.marker;t.size=s,t.fill=e.fill,t.fillOpacity=(i=e.fillOpacity)!=null?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=e===0,s=t===e-1,n=t===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}clickNext(){this.incrementPage(),this.onPaginationChanged()}clickPrevious(){this.decrementPage(),this.onPaginationChanged()}setPage(t){t=St(0,t,this.totalPages-1),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;t.preventDefault(),this.nextButtonContainsPoint(e,i)?this.clickNext():this.previousButtonContainsPoint(e,i)&&this.clickPrevious()}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Kn(this.marker.shape||tl);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}computeCSSBounds(){const t=this.group.computeTransformedBBox(),e=this._previousButton.computeTransformedBBox(),i=this._nextButton.computeTransformedBBox();return e.x-=t.x,e.y-=t.y,i.x-=t.x,i.y-=t.y,{group:t,prev:e,next:i}}},Ro.className="Pagination",_([A(rt)],Ro.prototype,"marker",2),_([A(rt)],Ro.prototype,"activeStyle",2),_([A(rt)],Ro.prototype,"inactiveStyle",2),_([A(rt)],Ro.prototype,"highlightStyle",2),_([A(rt)],Ro.prototype,"label",2)}}),Ga,nl,cf,Va,hf,ju,t0,Yi,WG=L({"packages/ag-charts-community/src/chart/legend.ts"(){"use strict";Mt(),be(),ae(),Io(),xc(),hi(),Ue(),en(),lf(),yt(),_t(),ne(),Ye(),gt(),Kr(),VG(),hn(),Y2(),ts(),Pa(),UG(),HG(),Hi(),Ga=class extends xt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},_([A(q,{optional:!0})],Ga.prototype,"maxLength",2),_([A(Et)],Ga.prototype,"color",2),_([A(_a,{optional:!0})],Ga.prototype,"fontStyle",2),_([A(ka,{optional:!0})],Ga.prototype,"fontWeight",2),_([A(q)],Ga.prototype,"fontSize",2),_([A(et)],Ga.prototype,"fontFamily",2),_([A(Bi,{optional:!0})],Ga.prototype,"formatter",2),nl=class extends xt{constructor(){super(...arguments),this.size=15,this.padding=8}},_([Ui(t=>{var e;return(e=t.parent)==null?void 0:e.onMarkerShapeChange()})],nl.prototype,"shape",2),_([A(q)],nl.prototype,"size",2),_([A(q)],nl.prototype,"padding",2),_([A(q,{optional:!0})],nl.prototype,"strokeWidth",2),_([A(pt)],nl.prototype,"enabled",2),cf=class extends xt{},_([A(q,{optional:!0})],cf.prototype,"strokeWidth",2),_([A(q,{optional:!0})],cf.prototype,"length",2),Va=class extends xt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new nl,this.label=new Ga,this.line=new cf}},_([A(q,{optional:!0})],Va.prototype,"maxWidth",2),_([A(q)],Va.prototype,"paddingX",2),_([A(q)],Va.prototype,"paddingY",2),_([A(pt)],Va.prototype,"showSeriesStroke",2),_([A(rt)],Va.prototype,"marker",2),_([A(rt)],Va.prototype,"label",2),_([A(rt)],Va.prototype,"line",2),hf=class extends xt{},_([A(Bi,{optional:!0})],hf.prototype,"legendItemClick",2),_([A(Bi,{optional:!0})],hf.prototype,"legendItemDoubleClick",2),ju="legend-visibility",t0="legend-other-series",Yi=class extends xt{constructor(t){super(),this.ctx=t,this.id=wn(this),this.group=new ut({name:"legend",layer:!0,zIndex:11}),this.itemSelection=pe.select(this.group,Xn),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new Va,this.listeners=new hf,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Ro(r=>t.updateService.update(r),r=>this.updatePageNumber(r),t.regionManager,t.cursorManager),this.pagination.attachPagination(this.group),t.contextMenuRegistry.registerDefaultAction({id:ju,type:"legend",label:"contextMenuToggleSeriesVisibility",action:r=>this.contextToggleVisibility(r)}),t.contextMenuRegistry.registerDefaultAction({id:t0,type:"legend",label:"contextMenuToggleOtherSeries",action:r=>this.contextToggleOtherSeries(r)});const{Default:e,Animation:i,ContextMenu:s}=Gr,n=e|i,a=e|i|s,o=t.regionManager.addRegion("legend",this.group);this.destroyFns.push(o.addListener("contextmenu",r=>this.checkContextClick(r),a),o.addListener("click",r=>this.checkLegendClick(r),n),o.addListener("dblclick",r=>this.checkLegendDoubleClick(r),n),o.addListener("hover",r=>this.handleLegendMouseMove(r)),o.addListener("leave",r=>this.handleLegendMouseExit(r),n),o.addListener("enter",r=>this.handleLegendMouseEnter(r),n),t.layoutService.addListener("start-layout",r=>this.positionLegend(r)),()=>this.detachLegend(),t.localeManager.addListener("locale-changed",()=>this.onLocaleChanged())),this.proxyLegendToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:`${this.id}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"},ariaOrientation:"horizontal"}),this.proxyLegendPagination=this.ctx.proxyInteractionService.createProxyContainer({type:"group",id:`${this.id}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"})}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(t=>t()),this.pagination.destroy(),this.itemSelection.clear()}initLegendItemToolbar(){this.itemSelection.each((e,i,s)=>{var n;(n=e.proxyButton)!=null||(e.proxyButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`ag-charts-legend-item-${s}`,textContent:this.getItemAriaText(s),parent:this.proxyLegendToolbar,focusable:e,onclick:()=>{this.doClick(e.datum),e.proxyButton.textContent=this.getItemAriaText(s,!e.datum.enabled)},onblur:()=>this.doMouseExit(),onfocus:()=>{const a=e?.computeTransformedBBox(),o=W2(this.ctx.focusIndicator,{bounds:a,showFocusBox:!0});this.doHover(o,e.datum),this.pagination.setPage(e.pageIndex)}}))});const t=this.itemSelection.nodes().map(e=>e.proxyButton).filter(e=>!!e);rf({orientation:this.getOrientation(),buttons:t,toolbar:this.proxyLegendToolbar})}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":wt.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;(t=this.group.parent)==null||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:a,label:{maxLength:o=1/0,fontStyle:r,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse();const d=this.itemSelection.nodes().length===0;this.itemSelection.update(u),d&&this.initLegendItemToolbar();const p=[],g=Pr(n),m=a??t*.8;if(this.itemSelection.each((I,N)=>{var C;I.fontStyle=r,I.fontWeight=l,I.fontSize=c,I.fontFamily=h;const E=this.updateMarkerLabel(I,N,this.calcMarkerWidth()),O=(C=N.itemId)!=null?C:N.id,P=this.getItemLabel(N),w=(P??"<unknown>").replace(/\r?\n/g," ");I.text=this.truncate(w,o,m,E,g,O),p.push(I.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return{};const v=this.size,y=this.oldSize;v[0]=t,v[1]=e,(v[0]!==y[0]||v[1]!==y[1])&&(y[0]=v[0],y[1]=v[1]);const{pages:x,maxPageHeight:b,maxPageWidth:S}=this.updatePagination(p,t,e),k=this.pages;this.pages=x,this.maxPageSize=[S-i,b-s];const D=this.pagination.currentPage,T=this.pages[D];return this.pages.length<1||!T?(this.visible=!1,{oldPages:k}):(this.visible=!0,this.updatePositions(D),this.update(),{oldPages:k})}calcSymbolsLengths(t){var e,i,s;const{showSeriesStroke:n,marker:a,line:o}=this.item,r=(i=a.enabled)!=null?i:n&&((e=t.marker.enabled)!=null?e:!0),l=r?a.size:0,c=!!(t.line&&n),h=c?(s=o.length)!=null?s:25:0;return{markerEnabled:r,markerLength:l,lineEnabled:c,lineLength:h}}calcMarkerWidth(){let t=0;return this.itemSelection.each((e,i)=>{i.symbols.forEach(s=>{const{lineLength:n,markerLength:a}=this.calcSymbolsLengths(s);t=Math.max(t,n,a)})}),t}updateMarkerLabel(t,e,i){const{marker:s,paddingX:n}=this.item,a=[];let o=n;if(t.markers.length!==e.symbols.length&&t.lines.length!==e.symbols.length){const r=[],l=[];e.symbols.forEach(c=>{const{shape:h=c.marker.shape}=s,u=Kn(h);l.push(new He),r.push(new u)}),t.markers=r,t.lines=l}return e.symbols.forEach((r,l)=>{var c;const h=(c=r.marker.padding)!=null?c:s.padding,{markerEnabled:u,lineEnabled:d}=this.calcSymbolsLengths(r);t.markers[l].size=u||!d?s.size:0,a.push({length:i,spacing:h}),(u||d)&&(o+=h+i)}),t.update(a),o}truncate(t,e,i,s,n,a){const o="...",r=t.split("");let l=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,l=!0),Math.floor(s+wt.getTextSize(t,n).width)>i){let h="";const u=this.getCharacterWidths(n);let d=s+u[o];for(const p of r){if(u[p]||(u[p]=wt.getTextSize(p,n).width),d+=u[p],d>i)break;h+=p}t=h,l=!0}return l?(t+=o,this.truncatedItems.add(a)):this.truncatedItems.delete(a),t}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),h=a.findIndex(x=>x.endIndex>=n);this.pagination.currentPage=St(0,h,a.length-1);const{paddingX:u,paddingY:d}=this.item,p=8,g=r-u,f=o-d;let m=0,v=-l.y-this.item.marker.size/2;c?v+=f+p:(m+=-l.x+g+p,v+=(f-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers();let y=0;return this.itemSelection.each((x,b,S)=>{var k,D;S>((D=(k=a[y])==null?void 0:k.endIndex)!=null?D:1/0)&&y++,x.pageIndex=y}),{maxPageHeight:o,maxPageWidth:r,pages:a}}updatePaginationProxyButtons(t){var e,i,s,n;this.proxyLegendPagination.style.display=this.pagination.visible?"absolute":"none";const a=((e=t?.length)!=null?e:this.pages.length)>1,o=this.pages.length>1;if(a!==o)if(o){this.proxyPrevButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.proxyLegendPagination,focusable:this.pagination.previousButton,onclick:()=>this.pagination.clickPrevious()}),(i=this.proxyNextButton)!=null||(this.proxyNextButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.proxyLegendPagination,focusable:this.pagination.nextButton,onclick:()=>this.pagination.clickNext()}));const{group:r,prev:l,next:c}=this.pagination.computeCSSBounds();Ia(this.proxyLegendPagination,r),Ia(this.proxyPrevButton,l),Ia(this.proxyNextButton,c)}else(s=this.proxyNextButton)==null||s.remove(),(n=this.proxyPrevButton)==null||n.remove(),[this.proxyNextButton,this.proxyPrevButton]=[void 0,void 0]}calculatePagination(t,e,i){var s,n,a;const{paddingX:o,paddingY:r}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let h=this.pagination.computeBBox(),u=new ot(0,0,0,0),d=[],p=0,g=0,f=0;const m=y=>y.width===h.width&&y.height===h.height,v=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(f++>10){Z.warn("unable to find stable legend layout.");break}h=u;const y=e-(c?0:h.width),x=i-(c?h.height:0),b=wG({orientation:l,bboxes:t,maxHeight:x,maxWidth:y,itemPaddingY:r,itemPaddingX:o,forceResult:v});d=(s=b?.pages)!=null?s:[],p=(n=b?.maxPageWidth)!=null?n:0,g=(a=b?.maxPageHeight)!=null?a:0;const S=d.length;if(this.pagination.visible=S>1,this.pagination.totalPages=S,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(u));return{maxPageWidth:p,maxPageHeight:g,pages:d,paginationBBox:h,paginationVertical:c}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:a,endIndex:o}=s[t];let r=0,l=0;const c=n.length,h=n[0].indices.length,u=this.getOrientation()==="horizontal",d=n[0].bboxes[0].height+e,p=[];i.each((g,f,m)=>{var v,y;if(m<a||m>o){g.visible=!1;return}const x=m-a;let b=0,S=0;u?(b=x%c,S=Math.floor(x/c)):(b=Math.floor(x/h),S=x%h),g.visible=!0;const k=n[b];if(!k)return;l=Math.floor(d*S),r=Math.floor((v=p[S])!=null?v:0),p[S]=((y=p[S])!=null?y:0)+k.columnWidth,g.translationX=r,g.translationY=l;const{width:D,height:T}=g.computeBBox();Ia(g.proxyButton,{x:r,y:l,width:D,height:T})})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:s}=e[t];i===0?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(6)}update(){const{label:{color:t}}=this.item;this.itemSelection.each((e,i)=>{i.symbols.forEach((s,n)=>{const a=e.markers[n],o=e.lines[n];if(a){const{strokeWidth:r,fill:l,stroke:c,fillOpacity:h,strokeOpacity:u}=this.getMarkerStyles(s);a.fill=l,a.stroke=c,a.strokeWidth=r,a.fillOpacity=h,a.strokeOpacity=u}if(o){const r=this.getLineStyles(s);o.stroke=r.stroke,o.strokeOpacity=r.strokeOpacity,o.strokeWidth=r.strokeWidth,o.lineDash=r.lineDash}}),e.opacity=i.enabled?1:.5,e.color=t}),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:t}=this;this.ctx.contextMenuRegistry.setActionVisiblity(ju,t),this.ctx.contextMenuRegistry.setActionVisiblity(t0,t)}getLineStyles(t){var e,i;const{stroke:s,strokeOpacity:n=1,strokeWidth:a,lineDash:o}=(e=t.line)!=null?e:{},r=Math.min(2,a??1);return{stroke:s,strokeOpacity:n,strokeWidth:(i=this.item.line.strokeWidth)!=null?i:r,lineDash:o}}getMarkerStyles(t){var e;const{fill:i,stroke:s,strokeOpacity:n=1,fillOpacity:a=1,strokeWidth:o}=t.marker,r=Math.min(2,o??1);return{fill:i,stroke:s,strokeOpacity:n,fillOpacity:a,strokeWidth:(e=this.item.marker.strokeWidth)!=null?e:r}}getDatumForPoint(t,e){const i=[],s={dist:1/0,datum:void 0};for(const a of this.group.children){if(!a.visible||!(a instanceof Xn))continue;const o=a.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(t,e))return a.datum;const r=t-o.x-this.item.paddingX/2,l=e-o.y-this.item.paddingY/2,c=nt(r,2)+nt(l,2);r>=0&&l>=0&&c<s.dist&&(s.dist=c,s.datum=a.datum),i.push(o)}if(ot.merge(i).containsPoint(t,e))return s.datum}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}contextToggleVisibility(t){const e=this.data.find(i=>i.itemId===t.itemId);this.doClick(e)}contextToggleOtherSeries(t){const e=this.data.find(i=>i.itemId===t.itemId);this.doDoubleClick(e)}checkContextClick(t){var e;const i=this.getDatumForPoint(t.offsetX,t.offsetY);this.preventHidingAll&&((e=this.contextMenuDatum)!=null&&e.enabled)&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(ju):this.ctx.contextMenuRegistry.enableAction(ju),this.ctx.contextMenuRegistry.dispatchContext("legend",t,{legendItem:i})}checkLegendClick(t){const e=this.getDatumForPoint(t.offsetX,t.offsetY);this.doClick(e)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length}doClick(t){const{listeners:{legendItemClick:e},ctx:{chartService:i,highlightManager:s},preventHidingAll:n,toggleSeries:a}=this;if(!t)return!1;const{id:o,itemId:r,enabled:l}=t,c=i.series.find(u=>u.id===o);if(!c)return!1;let h=l;if(a){h=!l,n&&!h&&this.getVisibleItemCount()<2&&(h=!0);const u=h?"ariaAnnounceVisible":"ariaAnnounceHidden";this.ctx.ariaAnnouncementService.announceValue(u),this.ctx.chartEventManager.legendItemClick(c,r,h,t.legendItemName)}return h?s.updateHighlight(this.id,{series:c,itemId:r,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:h,itemId:r,seriesId:c.id}),!0}checkLegendDoubleClick(t){const e=this.getDatumForPoint(t.offsetX,t.offsetY);this.doDoubleClick(e)&&t.preventDefault()}doDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if(s.mode==="integrated"||!t)return!1;const{id:a,itemId:o,seriesId:r}=t,l=s.series.find(c=>c.id===a);if(!l)return!1;if(n){const c=s.series.flatMap(d=>d.getLegendData("category")),h=c.filter(d=>d.enabled).length,u=c.find(d=>d.itemId===o&&d.seriesId===r);this.ctx.chartEventManager.legendItemDoubleClick(l,o,(e=u?.enabled)!=null?e:!1,h,u?.legendItemName)}return this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),i?.({type:"dblclick",enabled:!0,itemId:o,seriesId:l.id}),!0}handleLegendMouseMove(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t;t.preventDefault();const s=this.getDatumForPoint(e,i);this.doHover(t,s)}doHover(t,e){var i;const{toggleSeries:s,listeners:n}=this;if(t===void 0||e===void 0){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}const a=e?this.ctx.chartService.series.find(o=>o.id===e?.id):void 0;if(e&&this.truncatedItems.has((i=e.itemId)!=null?i:e.id)){const{offsetX:o,offsetY:r}=t;this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:o,offsetY:r,lastPointerEvent:t,showArrow:!1},Sc({content:this.getItemLabel(e)}))}else this.ctx.tooltipManager.removeTooltip(this.id);(s||n.legendItemClick!=null||n.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),e?.enabled&&a?this.ctx.highlightManager.updateHighlight(this.id,{series:a,itemId:e?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(t){this.doMouseExit()}doMouseExit(){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.interactionManager.getState()===16&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(t){const{enabled:e,toggleSeries:i,listeners:{legendItemClick:s,legendItemDoubleClick:n}}=this,a=this.getDatumForPoint(t.offsetX,t.offsetY);e&&a!==void 0&&(i||s!=null||n!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}onLocaleChanged(){this.itemSelection.each(({proxyButton:t},e,i)=>{t!=null&&(t.textContent=this.getItemAriaText(i))})}getItemAriaText(t,e){const i=this.data[t],s=i&&this.getItemLabel(i);e??(e=i.enabled);const n=this.ctx.localeManager;if(t>=0&&s){const a=t+1,o=this.data.length,r=n.t("ariaLabelLegendItem",{label:s,index:a,count:o}),l=n.t(e?"ariaAnnounceVisible":"ariaAnnounceHidden");return[r,l].join("")}return n.t("ariaLabelLegendItemUnknown")}positionLegend(t){const{shrinkRect:e}=t,i=e.clone();if(!this.enabled||!this.data.length)return K(B({},t),{shrinkRect:i});const[s,n]=this.calculateLegendDimensions(e);this.group.translationX=0,this.group.translationY=0;const{oldPages:a}=this.calcLayout(s,n),o=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return e.height-o.height;case"right":default:return e.width-o.width}};if(this.visible){let l,c;switch(this.position){case"top":case"bottom":l=(e.width-o.width)/2,c=r(),i.shrink(o.height,this.position);break;case"left":case"right":default:l=r(),c=(e.height-o.height)/2,i.shrink(o.width,this.position)}this.group.translationX=Math.floor(-o.x+e.x+l),this.group.translationY=Math.floor(-o.y+e.y+c);const h=this.group.computeTransformedBBox();h&&(Ia(this.proxyLegendToolbar,h),this.proxyLegendToolbar.style.removeProperty("display")),this.proxyLegendToolbar.ariaOrientation=this.getOrientation()}else this.proxyLegendToolbar.style.display="none";if(this.updatePaginationProxyButtons(a),this.visible&&this.enabled&&this.data.length){const l=this.spacing;i.shrink(l,this.position);const c=o.clone();c.x+=this.group.translationX,c.y+=this.group.translationY}return K(B({},t),{shrinkRect:i})}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i,n=.5,a=.2,o=.25;let r,l;switch(this.position){case"top":case"bottom":const c=s<1?Math.min(n,a*(1/s)):a;r=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break;case"left":case"right":default:const h=s>1?Math.min(n,o*s):o;r=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*h),l=this.maxHeight?Math.min(this.maxHeight,i):i}return[r,l]}},Yi.className="Legend",_([A(pt)],Yi.prototype,"toggleSeries",2),_([A(rt)],Yi.prototype,"pagination",2),_([A(rt)],Yi.prototype,"item",2),_([A(rt)],Yi.prototype,"listeners",2),_([Ui(t=>t.updateGroupVisibility()),A(pt)],Yi.prototype,"enabled",2),_([A(Zp)],Yi.prototype,"position",2),_([A(q,{optional:!0})],Yi.prototype,"maxWidth",2),_([A(q,{optional:!0})],Yi.prototype,"maxHeight",2),_([A(pt,{optional:!0})],Yi.prototype,"reverseOrder",2),_([A(Jt(["horizontal","vertical"],"an orientation"),{optional:!0})],Yi.prototype,"orientation",2),_([A(pt,{optional:!0})],Yi.prototype,"preventHidingAll",2),_([A(q)],Yi.prototype,"spacing",2)}}),LA,YG=L({"packages/ag-charts-community/src/chart/legendModule.ts"(){"use strict";WG(),LA={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:Yi,packageType:"community"}}}),uf,KG=L({"packages/ag-charts-community/src/chart/locale/locale.ts"(){"use strict";Oa(),Ye(),gt(),uf=class extends kc{constructor(t){super(),this.ctx=t,this.localeText=void 0}},_([Ui(t=>{t.ctx.localeManager.setLocaleText(t.localeText)}),A(Xv,{optional:!0})],uf.prototype,"localeText",2),_([Ui(t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)}),A(Bi,{optional:!0})],uf.prototype,"getLocaleText",2)}}),TA,jG=L({"packages/ag-charts-community/src/chart/locale/localeModule.ts"(){"use strict";KG(),TA={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:uf}}}),_s,XG=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeHandle.ts"(){"use strict";Mt(),un(),gt(),_s=class extends ki{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}layout(t,e){this.centerX=t,this.centerY=e}static align(t,e,i,s,n,a,o,r){const l=t.strokeWidth/2,c=t.align(i+n*o)+l,h=c+t.align(i+n*o,n*(r-o))-2*l,u=t.align(s+a/2)+l;t.layout(c,u),e.layout(h,u)}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this,n=t-i/2,a=e-s/2;return new ot(n,a,i,s)}computeTransformedBBox(){return super.computeTransformedBBox()}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){var t,e,i;const{centerX:s,centerY:n,path:a,strokeWidth:o,gripLineGap:r,gripLineLength:l}=this,c=(i=(e=(t=this.layerManager)==null?void 0:t.canvas)==null?void 0:e.pixelRatio)!=null?i:1;a.clear();const h=Math.floor(this.width/2*c)/c,u=Math.floor(this.height/2*c)/c;a.moveTo(s-h,n-u),a.lineTo(s+h,n-u),a.lineTo(s+h,n+u),a.lineTo(s-h,n+u),a.closePath();const d=Math.floor((r+o)/2*c)/c,p=Math.floor(l/2*c)/c;a.moveTo(s-d,n-p),a.lineTo(s-d,n+p),a.moveTo(s+d,n-p),a.lineTo(s+d,n+p)}},_s.className="RangeHandle",_([A(Et)],_s.prototype,"_fill",2),_([A(Et)],_s.prototype,"_stroke",2),_([A(q)],_s.prototype,"_strokeWidth",2),_([A(Qv)],_s.prototype,"_lineCap",2),_([A(q)],_s.prototype,"_width",2),_([A(q)],_s.prototype,"_gripLineGap",2),_([A(q)],_s.prototype,"_gripLineLength",2),_([A(q)],_s.prototype,"_height",2)}}),e0,$G=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeMask.ts"(){"use strict";Mt(),un(),e0=class extends ki{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s,this.dirtyPath=!0}update(t,e){this.min=isNaN(t)?this.min:t,this.max=isNaN(e)?this.max:e,this.dirtyPath=!0}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new ot(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:n,max:a}=this,o=t+i*n,r=t+i*a;return new ot(o,e,r-o,s)}updatePath(){const{path:t,x:e,y:i,width:s,height:n,min:a,max:o,strokeWidth:r}=this,l=r/2;t.clear();const c=this.align(e)+l,h=this.align(i)+l,u=c+this.align(e,s)-2*l,d=h+this.align(i,n)-2*l;t.moveTo(c,h),t.lineTo(u,h),t.lineTo(u,d),t.lineTo(c,d),t.closePath();const p=this.align(e+s*a)+l,g=p+this.align(e+s*a,s*(o-a))-2*l;t.moveTo(p,h),t.lineTo(p,d),t.lineTo(g,d),t.lineTo(g,h),t.closePath()}},e0.className="RangeMask"}}),NA,ZG=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeSelector.ts"(){"use strict";Mt(),be(),ts(),NA=class extends ut{constructor(t){super({name:"rangeSelectorGroup",layer:!0,zIndex:12}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new ut({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(t)}layout(t,e,i,s,n,a){this.x=t,this.y=e,this.width=i,this.height=s,this.lOffset=n,this.rOffset=a,this.background.translationX=t,this.background.translationY=e}updateBackground(t,e){t!=null&&this.background.removeChild(t),e!=null&&this.background.appendChild(e)}computeBBox(){const{x:t,y:e,width:i,height:s,lOffset:n,rOffset:a}=this;return new ot(t-n,e,i+(n+a),s)}}}}),Ua,OA=L({"packages/ag-charts-community/src/chart/navigator/navigator.ts"(){"use strict";Oa(),Ue(),lf(),yt(),_t(),Ye(),gt(),hn(),XG(),$G(),ZG(),Ua=class extends kc{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new e0,this.minHandle=new _s,this.maxHandle=new _s,this.maskVisibleRange={computeBBox:()=>this.mask.computeVisibleRangeBBox(),computeTransformedBBox:()=>this.mask.computeVisibleRangeBBox()},this.height=30,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new NA([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;const e=t.regionManager.addRegion("navigator",this.rangeSelector),i=25;this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",s=>this.onHover(s),i),e.addListener("drag-start",s=>this.onDragStart(s),i),e.addListener("drag",s=>this.onDrag(s),i),e.addListener("drag-end",()=>this.onDragEnd(),i),e.addListener("leave",s=>this.onLeave(s),i),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),t.zoomManager.addListener("zoom-change",s=>this.onZoomChange(s))),this.proxyNavigatorToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],ariaOrientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.updateGroupVisibility(),this.proxyNavigatorElements=[this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-min",ariaLabel:{id:"ariaLabelNavigatorMinimum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.minHandle,onchange:s=>this.onMinSliderChange(s)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-pan",ariaLabel:{id:"ariaLabelNavigatorRange"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.maskVisibleRange,onchange:s=>this.onPanSliderChange(s)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-max",ariaLabel:{id:"ariaLabelNavigatorMaximum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,focusable:this.maxHandle,onchange:s=>this.onMaxSliderChange(s)})],rf({orientation:"vertical",toolbar:this.proxyNavigatorToolbar,buttons:this.proxyNavigatorElements}),this.destroyFns.push(()=>{this.proxyNavigatorElements.forEach(s=>s.remove()),this.proxyNavigatorToolbar.remove()})}updateBackground(t,e){var i;(i=this.rangeSelector)==null||i.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;this.rangeSelector==null||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(t){return F(this,null,function*(){const{shrinkRect:e}=t;if(this.enabled){const i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0;return K(B({},t),{shrinkRect:e})})}performCartesianLayout(t){return F(this,null,function*(){const{x:e,width:i}=t.seriesRect;if(this.enabled){const{y:s,height:n}=this;this.layoutNodes(e,s,i,n),Ia(this.proxyNavigatorToolbar,{x:e,y:s,width:i,height:n}),this.proxyNavigatorToolbar.style.removeProperty("display")}else this.proxyNavigatorToolbar.style.display="none";this.x=e,this.width=i})}onHover(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s}=this,{offsetX:n,offsetY:a}=t;i.containsPoint(n,a)||s.containsPoint(n,a)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(n,a)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s,x:n,width:a,_min:o}=this,{offsetX:r,offsetY:l}=t;i.zIndex<s.zIndex?s.containsPoint(r,l)?this.dragging="max":i.containsPoint(r,l)&&(this.dragging="min"):i.containsPoint(r,l)?this.dragging="min":s.containsPoint(r,l)&&(this.dragging="max"),this.dragging==null&&e.computeVisibleRangeBBox().containsPoint(r,l)&&(this.dragging="pan",this.panStart=(r-n)/a-o),this.dragging!=null&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(t){if(!this.enabled||this.dragging==null)return;const{dragging:e,minRange:i,panStart:s,x:n,width:a}=this;let{_min:o,_max:r}=this;const{offsetX:l}=t,c=(l-n)/a;if(e==="min")o=St(0,c,r-i);else if(e==="max")r=St(o+i,c,1);else if(e==="pan"&&s!=null){const h=r-o;o=St(0,c-s,1-h),r=o+h}this._min=o,this._max=r,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){const{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}onPanSliderChange(t){const e=this.getSliderRatio(this.proxyNavigatorElements[1]),i=this._max-this._min;this._min=St(0,e,1-i),this._max=this._min+i,this.updateZoom()}onMinSliderChange(t){const e=this.proxyNavigatorElements[0];this._min=this.setSliderRatioClamped(e,0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(t){const e=this.proxyNavigatorElements[2];this._max=this.setSliderRatioClamped(e,this._min+this.minRange,1),this.updateZoom()}setPanSliderValue(t,e){this.proxyNavigatorElements[1].value=`${Math.round(t*100)}`,this.proxyNavigatorElements[1].ariaValueText=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e})}setSliderRatioClamped(t,e,i){const s=this.getSliderRatio(t),n=St(e,s,i);return n!==s&&this.setSliderRatio(t,n),n}setSliderRatio(t,e){const i=Math.round(e*100);t.value=`${i}`,t.ariaValueText=Tv(i)}getSliderRatio(t){return parseFloat(t.value)/100}layoutNodes(t,e,i,s){const{rangeSelector:n,mask:a,minHandle:o,maxHandle:r,_min:l,_max:c}=this;n.layout(t,e,i,s,o.width/2,r.width/2),a.layout(t,e,i,s),_s.align(o,r,t,e,i,s,l,c),l+(c-l)/2<.5?(o.zIndex=3,r.zIndex=4):(o.zIndex=4,r.zIndex=3),[o,this.maskVisibleRange,r].forEach((h,u)=>{const d=h.computeBBox(),p={x:d.x-t,y:d.y-e,height:d.height,width:d.width};Ia(this.proxyNavigatorElements[u],p)})}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;const{_min:t,_max:e}=this,i=this.ctx.zoomManager.getZoom();if(t==null||e==null)return;const s=n=>{this.min==null&&this.max==null||Z.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${n}] has modified the initial zoom state.`)};return this.setPanSliderValue(t,e),this.setSliderRatio(this.proxyNavigatorElements[0],t),this.setSliderRatio(this.proxyNavigatorElements[2],e),this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e},y:i?.y},!1,s)}},_([A(rt,{optional:!0})],Ua.prototype,"miniChart",2),_([A(pt),Ui(t=>t.updateGroupVisibility())],Ua.prototype,"enabled",2),_([A(q)],Ua.prototype,"height",2),_([A(q)],Ua.prototype,"spacing",2),_([Vi({newValue(t){this._min=t,this.updateZoom()}}),A(fs(Rt,Cr("max")),{optional:!0})],Ua.prototype,"min",2),_([Vi({newValue(t){this._max=t,this.updateZoom()}}),A(fs(Rt,Er("min")),{optional:!0})],Ua.prototype,"max",2)}}),i0,CA=L({"packages/ag-charts-community/src/chart/navigator/navigatorModule.ts"(){"use strict";OA(),i0={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Ua,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}}}});function Uc({takeColors:t}){const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}function df(t){return{marker:Uc(t)}}var al=L({"packages/ag-charts-community/src/module/theme.ts"(){"use strict"}}),s0,n0,a0,o0,r0,l0,Zn=L({"packages/ag-charts-community/src/chart/themes/constants.ts"(){"use strict";s0=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(s0||{}),n0=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(n0||{}),a0=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(a0||{}),o0=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(o0||{}),r0=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(r0||{}),l0=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(l0||{})}}),Hc,ge,Ke,c0,wo,Ha,ol,Xu,Wc,$u,Po,EA,Wa,Bo,Fo,Zu,qu,h0,u0,Qu,d0,pf,ss,gf,ff,ns,as,mf,Yc,qn,fe=L({"packages/ag-charts-community/src/chart/themes/symbols.ts"(){"use strict";Hc=Symbol("is-dark-theme"),ge=Symbol("default-font"),Ke=Symbol("default-label-colour"),c0=Symbol("default-inverted-label-colour"),wo=Symbol("default-inside-series-label-colour"),Ha=Symbol("default-muted-label-colour"),ol=Symbol("default-axis-grid-colour"),Xu=Symbol("default-axis-line-colour"),Wc=Symbol("default-cross-lines-colour"),$u=Symbol("default-background-colour"),Po=Symbol("default-shadow-colour"),EA=Symbol("default-colours"),Wa=Symbol("default-padding"),Bo=Symbol("default-caption-layout-style"),Fo=Symbol("default-caption-alignment"),Zu=Symbol("palette-up-stroke"),qu=Symbol("palette-down-stroke"),h0=Symbol("palette-up-fill"),u0=Symbol("palette-down-fill"),Qu=Symbol("palette-neutral-stroke"),d0=Symbol("palette-neutral-fill"),pf=Symbol("default-polar-series-stroke"),ss=Symbol("default-diverging-series-colour-range"),gf=Symbol("default-hierarchy-fills"),ff=Symbol("default-hierarchy-strokes"),ns=Symbol("default-annotation-stroke"),as=Symbol("default-annotation-background-fill"),mf=Symbol("default-annotation-handle-fill"),Yc=Symbol("default-toolbar-position"),qn=Symbol("default-gridline-enabled")}});function RA(t,e,i,s,n){const{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:r}=n,l=(c,h,u)=>{i.animate({id:`${t}_${e}_${h.id}_${c}`,groupId:t,from:0,to:1,ease:rc,collapsable:!1,onUpdate(d,p){p&&c!=="removed"||(h.path.clear(!0),u(d,h),h.checkPathDirty())},onStop(){c==="added"&&(h.path.clear(!0),u(1,h),h.checkPathDirty())},phase:Si[c]})};for(const c of s)i.isSkipped()||(l("removed",c,r),l("updated",c,o)),l("added",c,a)}var wA=L({"packages/ag-charts-community/src/motion/pathMotion.ts"(){"use strict";lc(),li()}});function re(t){if(t!=null)return t===""?"":(Kc??(Kc=ui("div")),Kc.textContent=String(t),Kc.innerHTML)}var Kc,Ya=L({"packages/ag-charts-community/src/util/sanitize.ts"(){"use strict";Ue(),Kc=null}});function Pt({id:t},e,i,...s){Fn(t,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function zo({id:t},e,i,...s){Fn(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Ka(t){return{opacity:1}}var ja=L({"packages/ag-charts-community/src/chart/series/seriesLabelUtil.ts"(){"use strict";li()}}),yf,p0=L({"packages/ag-charts-community/src/scene/util/changeDetectableProperties.ts"(){"use strict";ne(),tu(),yf=class extends xt{constructor(){super(...arguments),this._dirty=3}markDirty(t,e=1){this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}}}}),zs,jc=L({"packages/ag-charts-community/src/scene/dropShadow.ts"(){"use strict";gt(),tu(),ae(),p0(),zs=class extends yf{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}},_([A(pt),at({redraw:3})],zs.prototype,"enabled",2),_([A(Et),at({redraw:3})],zs.prototype,"color",2),_([A(jt),at({redraw:3})],zs.prototype,"xOffset",2),_([A(jt),at({redraw:3})],zs.prototype,"yOffset",2),_([A(q),at({redraw:3})],zs.prototype,"blur",2)}}),g0,Ki,Ju=L({"packages/ag-charts-community/src/chart/series/seriesMarker.ts"(){"use strict";tu(),p0(),gt(),Vu(),Bs(),Pa(),g0=Kt(t=>yA(t)||typeof t=="function"&&Object.create(t.prototype)instanceof Qe,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Ki=class extends yf{constructor(){super(...arguments),this.enabled=!0,this.shape=wa,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o}=this;return{size:t,shape:e,fill:i,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:o}}getDiameter(){return this.size+this.strokeWidth}},_([A(pt),at({redraw:3})],Ki.prototype,"enabled",2),_([A(g0),at({redraw:3})],Ki.prototype,"shape",2),_([A(q),at({redraw:3})],Ki.prototype,"size",2),_([A(Et,{optional:!0}),at({redraw:3})],Ki.prototype,"fill",2),_([A(Rt),at({redraw:3})],Ki.prototype,"fillOpacity",2),_([A(Et,{optional:!0}),at({redraw:3})],Ki.prototype,"stroke",2),_([A(q),at({redraw:3})],Ki.prototype,"strokeWidth",2),_([A(Rt),at({redraw:3})],Ki.prototype,"strokeOpacity",2),_([A(Bi,{optional:!0}),at({redraw:3})],Ki.prototype,"itemStyler",2)}}),f0,Ai,Xa=L({"packages/ag-charts-community/src/chart/series/seriesTooltip.ts"(){"use strict";ne(),gt(),Hi(),f0=class extends xt{constructor(){super(...arguments),this.enabled=!1}},_([A(pt)],f0.prototype,"enabled",2),Ai=class extends xt{constructor(){super(...arguments),this.enabled=!0,this.interaction=new f0,this.position=new Fr,this.range=void 0}toTooltipHtml(t,e){return this.renderer?Sc(this.renderer(e),t):Sc(t)}},_([A(pt)],Ai.prototype,"enabled",2),_([A(pt,{optional:!0})],Ai.prototype,"showArrow",2),_([A(Bi,{optional:!0})],Ai.prototype,"renderer",2),_([A(rt)],Ai.prototype,"interaction",2),_([A(rt)],Ai.prototype,"position",2),_([A(vu,{optional:!0})],Ai.prototype,"range",2)}}),m0,y0,rl,v0=L({"packages/ag-charts-community/src/chart/series/cartesian/interpolationProperties.ts"(){"use strict";ne(),gt(),m0=Jt(["linear","smooth","step"],"a line style"),y0=Jt(["start","middle","end"]),rl=class extends xt{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}},_([A(m0)],rl.prototype,"type",2),_([A(Rt)],rl.prototype,"tension",2),_([A(y0)],rl.prototype,"position",2)}}),Pe,qG=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesProperties.ts"(){"use strict";jc(),gt(),Es(),Ju(),Xa(),is(),v0(),Pe=class extends Ba{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new rl,this.shadow=new zs,this.marker=new Ki,this.label=new Oe,this.tooltip=new Ai,this.connectMissingData=!1}},_([A(et)],Pe.prototype,"xKey",2),_([A(et,{optional:!0})],Pe.prototype,"xName",2),_([A(et)],Pe.prototype,"yKey",2),_([A(et,{optional:!0})],Pe.prototype,"yName",2),_([A(q,{optional:!0})],Pe.prototype,"normalizedTo",2),_([A(Et)],Pe.prototype,"fill",2),_([A(Rt)],Pe.prototype,"fillOpacity",2),_([A(Et)],Pe.prototype,"stroke",2),_([A(q)],Pe.prototype,"strokeWidth",2),_([A(Rt)],Pe.prototype,"strokeOpacity",2),_([A(Gn)],Pe.prototype,"lineDash",2),_([A(q)],Pe.prototype,"lineDashOffset",2),_([A(rt)],Pe.prototype,"interpolation",2),_([A(rt)],Pe.prototype,"shadow",2),_([A(rt)],Pe.prototype,"marker",2),_([A(rt)],Pe.prototype,"label",2),_([A(rt)],Pe.prototype,"tooltip",2),_([A(pt)],Pe.prototype,"connectMissingData",2)}});function td({id:t},e,i,...s){const n={phase:i?Si[i]:"trailing"};Fn(t,"markers",e,s,{opacity:0},{opacity:1},n),s.forEach(a=>a.cleanup())}function x0({id:t},e,...i){Fn(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function b0({id:t,nodeDataDependencies:e},i,...s){const n=e.seriesRectWidth;xe(t,"markers",i,s,{fromFn:(r,l)=>{var c,h;const u=(h=(c=l.midPoint)==null?void 0:c.x)!=null?h:n;let d=St(0,Vv(u/n),1);return isNaN(d)&&(d=0),{scalingX:0,scalingY:0,delay:d,duration:lu,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function ed(t){return{opacity:1,scalingX:1,scalingY:1}}function id(t,e){var i,s,n,a;return{translationX:(s=(i=e.point)==null?void 0:i.x)!=null?s:NaN,translationY:(a=(n=e.point)==null?void 0:n.y)!=null?a:NaN}}function S0(t,e){const i=(o,r)=>{const l=t[r][o];return Array.isArray(l)?l[0]:l},s=o=>{const{xValue:r}=o;return t.moved[r]?{point:i(r,"moved"),status:"updated"}:t.removed[r]?{point:i(r,"removed"),status:"removed"}:t.added[r]?{point:i(r,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,r)=>{var l,c,h,u,d,p;const{status:g,point:f}=s(r);if(g==="unknown")return{opacity:0};const m={translationX:(c=(l=f?.from)==null?void 0:l.x)!=null?c:o.translationX,translationY:(u=(h=f?.from)==null?void 0:h.y)!=null?u:o.translationY,opacity:o.opacity,phase:Si[g]};return e==="added"?K(B({},m),{opacity:0,translationX:(d=f?.to)==null?void 0:d.x,translationY:(p=f?.to)==null?void 0:p.y,phase:Si.added}):(g==="added"&&(m.opacity=0),m)},toFn:(o,r)=>{var l,c;const{status:h,point:u}=s(r);if(h==="unknown")return{opacity:0};const d={translationX:r.point.x,translationY:r.point.y,opacity:1,phase:Si[h]};return h==="removed"||e==="removed"?K(B({},d),{translationX:(l=u?.to)==null?void 0:l.x,translationY:(c=u?.to)==null?void 0:c.y,opacity:0,phase:Si.removed}):d}}}function sd(t,{datumIndex:e}){const i=t.getNodeData();if(i===void 0)return;const s=i[e];if(s===void 0||s.point===void 0)return;const n=t.getFormattedMarkerStyle(s).size,a=n/2,{x:o,y:r}=t.contentGroup.inverseTransformPoint(s.point.x-a,s.point.y-a);return new ot(o,r,n,n)}var ll=L({"packages/ag-charts-community/src/chart/series/cartesian/markerUtil.ts"(){"use strict";Lr(),li(),Mt(),_t(),lc()}});function QG(t,e,i){let s=i;for(const{x:n,y:a}of e)s?t.lineTo(n,a):(t.moveTo(n,a),s=!0)}function JG(t,e,i,s){const n=Array.isArray(e)?e:Array.from(e);if(n.length===0||(s?t.lineTo(n[0].x,n[0].y):t.moveTo(n[0].x,n[0].y),n.length<=1))return;const a=n.map((o,r)=>{const l=r===0?o:n[r-1],c=r===n.length-1?o:n[r+1],h=r===0||r===n.length-1;if(Math.sign(l.y-o.y)===Math.sign(c.y-o.y))return 0;if(!h){const u=Math.abs(l.y-c.y),d=Math.abs(o.y-l.y)/u,p=Math.abs(o.y-c.y)/u;if(d<=nd||1-d<=nd||p<=nd||1-p<=nd)return 0}return(c.y-l.y)/(c.x-l.x)});a[1]===0&&(a[0]*=2),a[a.length-2]===0&&(a[a.length-1]*=2);for(let o=1;o<n.length;o+=1){const r=n[o-1],l=a[o-1],c=n[o],h=a[o],u=c.x-r.x,d=c.y-r.y;let p=u*i/3,g=u*l*i/3,f=u*i/3,m=u*h*i/3;h===0&&Math.abs(g)>Math.abs(d)&&(p*=Math.abs(d/g),g=Math.sign(g)*Math.abs(d)),l===0&&Math.abs(m)>Math.abs(d)&&(f*=Math.abs(d/m),m=Math.sign(m)*Math.abs(d)),t.cubicCurveTo(r.x+p,r.y+g,c.x-f,c.y-m,c.x,c.y)}}function tV(t,e,i,s){var n;let a;for(const o of e){if(a!=null){const r=a.x<o.x?i:1-i,l=(o.x-a.x)*r+a.x;t.lineTo(l,(n=a?.y)!=null?n:o.y),t.lineTo(l,o.y),t.lineTo(o.x,o.y)}else s?t.lineTo(o.x,o.y):t.moveTo(o.x,o.y);a=o}}var nd,eV=L({"packages/ag-charts-community/src/chart/series/cartesian/linePlotter.ts"(){"use strict";nd=.05}});function M0(t){return t.reduce(({min:e,max:i},s)=>((e==null||e.point.x>s.point.x)&&(e=s),(i==null||i.point.x<s.point.x)&&(i=s),{min:e,max:i}),{})}function PA(t,e,i){const s=(e.y-t.y)/(e.x-t.x),n=(i-t.x)*s+t.y;return{x:i,y:n}}function BA(t,e,i,s){let n=-1,a=0;const o=[];for(;a<t.length;){if(t[a].change===e){o.push(t[a]),a++;continue}if(t[a].change===i){a++;continue}o.length>0&&(s(o,n,a),o.length=0),n=a,a++}o.length>0&&s(o,n,a)}function _0(t,e){BA(t,"out","in",(i,s,n)=>{var a,o;s===-1&&t[n]?i.forEach(r=>r.to=t[n].from):n===t.length&&t[s]?i.forEach(r=>r.to=t[s].from):e==="intersect"&&((a=t[s])!=null&&a.from)&&((o=t[n])!=null&&o.from)?i.forEach(r=>r.to=PA(t[s].from,t[n].from,r.from.x)):i.forEach(r=>r.to=r.from)}),BA(t,"in","out",(i,s,n)=>{var a,o;s===-1&&t[n]?i.forEach(r=>r.from=t[n].to):n===t.length&&t[s]?i.forEach(r=>r.from=t[s].to):e==="intersect"&&((a=t[s])!=null&&a.to)&&((o=t[n])!=null&&o.to)?i.forEach(r=>r.from=PA(t[s].to,t[n].to,r.to.x)):i.forEach(r=>r.from=r.to)})}function FA(t,e,i){const s=isNaN(t.x)?e.x:t.x,n=isNaN(t.y)?e.y:t.y,a=e.x-t.x,o=e.y-t.y,r=isNaN(a)?0:a*i,l=isNaN(o)?0:o*i;return{x:s+r,y:n+l}}function Go(t,e,i,s=!1){var n,a;const{path:o}=e;i?.type==="smooth"?JG(o,t,(n=i.tension)!=null?n:1,s):i?.type==="step"?tV(o,t,GA[(a=i.position)!=null?a:"end"],s):QG(o,t,s)}function vf(t,e){let i,s;const n=[],a=()=>{s!=null&&(n.push(s),s=void 0)};for(const o of t){const{from:r,to:l}=o,c=e[o.change];if(c==null||r==null||l==null)continue;const h=FA(r,l,c);if(o.moveTo===!1)s??(s=[]),s.push(h);else if(o.moveTo===!0||!i)a(),s=[h];else if(i){const u=o.moveTo==="in"?c:1-c,{x:d,y:p}=FA(i,h,u);s??(s=[]),s.push({x:d,y:p}),a(),s=[h]}i=h}return a(),n}function zA(t,e,i,s){vf(t,e).forEach(n=>{Go(n,i,s)})}function k0({id:t,visible:e,nodeDataDependencies:i},s,...n){const{seriesRectWidth:a,seriesRectHeight:o}=i;Fn(t,"path_properties",s,n,{clipX:0},{clipX:a},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function ad({id:t},e,i,s="add",...n){Fn(t,e,i,n,{opacity:0},{opacity:1},{phase:s})}function iV({id:t},e,i,...s){Fn(t,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function D0(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function xf({nodeDataDependencies:t},e){const i=s=>isFinite(s)?s:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}var GA,od=L({"packages/ag-charts-community/src/chart/series/cartesian/pathUtil.ts"(){"use strict";li(),eV(),GA={start:0,middle:.5,end:1}}});function VA(t){return t.type==="continuous"||t.type==="log"}function UA(t){return t.type==="category"}function HA(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every((i,s)=>i===e.domain[s])&&t.range.every((i,s)=>i===e.range[s])}function WA(t,e){return t===void 0||e===void 0?t!==void 0||e!==void 0:VA(t)&&VA(e)?t.type===e.type&&HA(t,e):UA(t)&&UA(e)?HA(t,e):!1}var sV=L({"packages/ag-charts-community/src/chart/series/cartesian/scaling.ts"(){"use strict"}});function*bf(t){let e=-1,i=0;for(const{point:s}of t){if(s.moveTo){const n=e>=0?{start:e,end:i}:void 0;e=i,i=e,n!==void 0&&(yield n)}i+=1}e!==-1&&(yield{start:e,end:i})}function*Sf(t,{start:e,end:i}){for(let s=e;s<i;s+=1)yield t[s].point}function*YA(t,{start:e,end:i}){for(let s=i-1;s>=e;s-=1)yield t[s].point}function Mf(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),e.type==="continuous"&&typeof t=="number")return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if(e.type==="log"&&typeof t=="number")return e.convert(t);const i=e.domain.findIndex(s=>s===t);return i>=0?e.range[i]:NaN}function nV(t,e){return!WA(t.scales.x,e.scales.x)||!WA(t.scales.y,e.scales.y)}function aV(t,e){const i=Number(t),s=Number(e);return!isNaN(i)&&!isNaN(s)?Math.abs(s-i)<.25:t===e}function KA(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function rd(t,e,i={}){var s,n,a,o;const{backfillSplitMode:r="intersect"}=i,l=x=>{var b,S;return{x:Mf((b=x.xValue)!=null?b:NaN,t.scales.x),y:Mf((S=x.yValue)!=null?S:NaN,t.scales.y)}},c=x=>{var b,S;return{x:Mf((b=x.xValue)!=null?b:NaN,e.scales.x),y:Mf((S=x.yValue)!=null?S:NaN,e.scales.y)}},h=[],u={added:{},moved:{},removed:{}},d=(x,b,S,k="move")=>{x&&(isNaN(x.point.x)||isNaN(x.point.y))&&(x=b);const D={from:x?.point,to:b?.point,moveTo:KA(x?.point.moveTo,b?.point.moveTo),change:k};k==="move"?(u.moved[S]=D,v++,y++):k==="in"?(u.added[S]=D,y++):k==="out"&&(u.removed[S]=D,v++),h.push(D)},{min:p,max:g}=M0(e.nodeData),{min:f,max:m}=M0(t.nodeData);let v=0,y=0;for(;v<e.nodeData.length||y<t.nodeData.length;){const x=e.nodeData[v],b=t.nodeData[y],S=x?l(x):void 0,k=b?c(b):void 0,D=void 0;if(S&&aV(S.x,b?.point.x))d(x,b,b.xValue,"move");else if(S&&S.x<((s=f?.point.x)!=null?s:-1/0))d(x,D,x.xValue,"out");else if(S&&S.x>((n=m?.point.x)!=null?n:1/0))d(x,D,x.xValue,"out");else if(k&&k.x<((a=p?.point.x)!=null?a:-1/0))d(D,b,b.xValue,"in");else if(k&&k.x>((o=g?.point.x)!=null?o:1/0))d(D,b,b.xValue,"in");else if(S&&S.x<b?.point.x)d(x,D,x.xValue,"out");else if(k&&k.x<x?.point.x)d(D,b,b.xValue,"in");else if(x)d(x,D,x.xValue,"out");else if(b)d(D,b,b.xValue,"in");else throw new Error("Unable to process points")}return _0(h,r),{result:h,resultMap:u}}function ld(t,e,i,s={}){var n,a,o;const{backfillSplitMode:r="intersect",multiDatum:l=!1}=s,c=[],h={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}},d={in:"added",move:"moved",out:"removed"};let p,g;const f=(b,S)=>{var k,D;const T=d[S.change];l?((D=(k=u[T])[b])!=null||(k[b]=[]),u[T][b].push(S)):h[T][b]=S,p=S,g=yc(b)};let m=0,v=0,y=!1;for(;m<e.nodeData.length||v<t.nodeData.length;){const b=e.nodeData[m],S=t.nodeData[v],k=yc(b?.xValue),D=yc(S?.xValue);let T;if(k===D)T={change:"move",moveTo:KA((n=b.point.moveTo)!=null?n:!1,S.point.moveTo),from:b.point,to:S.point},f(b?.xValue,T),m++,v++;else if(i?.removed.has(String(k)))T={change:"out",moveTo:(a=b.point.moveTo)!=null?a:!1,from:b.point},f(b?.xValue,T),m++;else if(i?.added.has(String(D)))T={change:"in",moveTo:(o=S.point.moveTo)!=null?o:!1,to:S.point},f(S?.xValue,T),v++;else if(l&&p&&g===k)T=B({},p),f(b?.xValue,T),m++;else if(l&&p&&g===D)T=B({},p),f(S?.xValue,T),v++;else{y=!0;break}c.push(T)}let x=-1/0;return y||(y=c.some(b=>{const{change:S,to:{x:k=-1/0}={}}=b;if(S==="out")return;const D=k<x;return x=k,D})),y?{result:void 0,resultMap:void 0}:(_0(c,r),{result:c,resultMap:l?u:h})}function I0(t,e,i){var s,n,a,o;let r="updated";const l=c=>c.visible;if(!l(e)&&l(t))r="added";else if(l(e)&&!l(t))r="removed";else for(let c=0;c<i.length&&!(i[c].change!=="move"||((s=i[c].from)==null?void 0:s.x)!==((n=i[c].to)==null?void 0:n.x)||((a=i[c].from)==null?void 0:a.y)!==((o=i[c].to)==null?void 0:o.y));c++)if(c===i.length-1)return"no-op";return r}function A0(t,e){const i=e==="none"?"updated":t,s={fromFn:n=>{let a;return t==="removed"?a={finish:{visible:!1}}:t==="added"?a={start:{visible:!0}}:a={},B({phase:Si[i]},a)},toFn:n=>({phase:Si[i]})};return e==="fade"?{fromFn:n=>{const a=t==="added"?0:n.opacity;return B({opacity:a},s.fromFn(n))},toFn:n=>B({opacity:t==="removed"?0:1},s.toFn(n))}:s}function jA(t,e,i,s,n,a){const o=I0(t,e,i),r=(u,d)=>{a(i,{move:0,out:u},d,n)},l=(u,d)=>{a(i,{move:u},d,n)},c=(u,d)=>{a(i,{move:1,in:u},d,n)},h=A0(o,s);return{status:o,path:{addPhaseFn:c,updatePhaseFn:l,removePhaseFn:r},pathProperties:h}}function XA(t,e,i,s){var n,a,o;const r=((n=t.scales.x)==null?void 0:n.type)==="category",l=((a=e.scales.x)==null?void 0:a.type)==="category";if(r!==l)return;const{result:c,resultMap:h}=r?ld(t,e,i):rd(t,e);let u="updated";if(e.visible&&!t.visible?u="removed":!e.visible&&t.visible&&(u="added"),c===void 0||h===void 0)return;const d=((o=i?.changed)!=null?o:!0)||nV(t,e)||u!=="updated",p=jA(t,e,c,"fade",s,zA),g=S0(h,u);return K(B({},p),{marker:g,hasMotion:d})}var _f=L({"packages/ag-charts-community/src/chart/series/cartesian/lineUtil.ts"(){"use strict";li(),vc(),ll(),od(),sV()}});function kf(t){const{points:e,phantomPoints:i}=t.fillData;return{top:e,bottom:i}}function Vo(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function oV(t,e,i){const s=kf(e),n=kf(t),a={multiDatum:!0};return{top:ld(Vo("top",t,n),Vo("top",e,s),i,a),bottom:ld(Vo("bottom",t,n),Vo("bottom",e,s),i,a)}}function rV(t,e){const i=kf(e),s=kf(t);return{top:rd(Vo("top",t,s),Vo("top",e,i)),bottom:rd(Vo("bottom",t,s),Vo("bottom",e,i))}}function L0(t,e,i,s,n){const a=vf(t,i),o=vf(e,i);if(a.length===o.length)for(let r=0;r<a.length;r+=1){const l=a[r],c=o[r].reverse();Go(l,s,n,!1),Go(c,s,n,!0),s.path.closePath()}}function $A(t,e,i,s,n,a){const o=I0(t,e,i),r=(u,d)=>{L0(i,s,{move:0,out:u},d,a)},l=(u,d)=>{L0(i,s,{move:u},d,a)},c=(u,d)=>{L0(i,s,{move:1,in:u},d,a)},h=A0(o,n);return{status:o,path:{addPhaseFn:c,updatePhaseFn:l,removePhaseFn:r},pathProperties:h}}function ZA(t,e,i,s){var n,a;const o=((n=t.scales.x)==null?void 0:n.type)==="category",r=((a=e.scales.x)==null?void 0:a.type)==="category";if(o!==r)return;let l="updated";e.visible&&!t.visible?l="removed":!e.visible&&t.visible&&(l="added");const c=()=>o?ld(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):rd(t,e,{backfillSplitMode:"static"}),h=()=>o?oV(t,e,i):rV(t,e),{resultMap:u}=c(),{top:d,bottom:p}=h();if(u===void 0||d.result===void 0||p.result===void 0)return;const g=d.result,f=p.result,v=(e.stackVisible?t.stackVisible:!1)?"none":"fade",y=$A(t,e,g,f,v,s),x=S0(u,l);return{status:y.status,fill:y,marker:x}}var T0,qA=L({"packages/ag-charts-community/src/chart/series/cartesian/areaUtil.ts"(){"use strict";_f(),ll(),od(),T0=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(T0||{})}}),Df,lV=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeries.ts"(){"use strict";li(),wA(),Do(),be(),ae(),Ve(),ue(),Ya(),Ct(),vc(),$b(),SA(),de(),Yn(),Ra(),Pa(),Hi(),Di(),ja(),qG(),qA(),is(),_f(),ll(),od(),Df=class extends Fa{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:D0({getOpacity:()=>this.getOpacity()}),label:Ka,marker:(e,i)=>B(B({},ed(e)),id(e,i))}}),this.properties=new Pe}processData(t){return F(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:s,visible:n,seriesGrouping:{groupIndex:a=this.id,stackCount:o=1}={}}=this,{xKey:r,yKey:l,connectMissingData:c,normalizedTo:h}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=(e=this.axes.x)==null?void 0:e.scale,p=(i=this.axes.y)==null?void 0:i.scale,{isContinuousX:g,xScaleType:f,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:p}),v={value:`area-stack-${a}-yValue`,values:`area-stack-${a}-yValues`,valuesTrailing:`area-stack-${a}-yValues-trailing`,marker:`area-stack-${a}-yValues-marker`},y={values:`area-stack-${a}-yValues-prev`,valuesTrailing:`area-stack-${a}-yValues-trailing-prev`},x=[];su(h)&&(x.push(zu(Object.values(v),h,"range")),x.push(zu(Object.values(y),h,"range"))),!g&&u&&this.processedData&&x.push(qr(this.processedData)),u&&x.push(Rc());const b={invalidValue:null};c&&o>1&&(b.invalidValue=0),n||(b.forceValue=0),yield this.requestDataModel(t,s,{props:[di(r,f,{id:"xValue"}),Vt(l,m,B({id:"yValueRaw"},b)),...sA(l,K(B({id:"yValueContinuity"},b),{groupId:`area-stack-${a}-yValues-continuity`})),Vt(l,m,K(B({id:"yValue"},b),{groupId:v.value})),...dn(l,"window-trailing","current",K(B({id:"yValueStart"},b),{groupId:v.valuesTrailing}),m),...dn(l,"window","current",K(B({id:"yValueEnd"},b),{groupId:v.values}),m),...dn(l,"normal","current",K(B({id:"yValueCumulative"},b),{groupId:v.marker}),m),...dn(l,"window","last",K(B({id:"yValuePreviousEnd"},b),{groupId:y.values}),m),...dn(l,"window-trailing","last",K(B({id:"yValuePreviousStart"},b),{groupId:y.valuesTrailing}),m),...x],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i||e.data.length===0)return[];const n=s.x,a=s.y,o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t==="x")return o?.def.type==="key"&&o.def.valueType==="category"?r:es(Vn(r),n);if(a instanceof Eo||a instanceof el)return es(l,a);{const c=[l[0]>0?0:l[0],l[1]<0?0:l[1]];return es(c,a)}}createNodeData(){return F(this,null,function*(){var t;const{axes:e,data:i,processedData:{data:s}={},dataModel:n}=this,a=e.x,o=e.y;if(!a||!o||!i||!n||!this.properties.isValid())return;const{yKey:r,xKey:l,marker:c,label:h,fill:u,stroke:d,connectMissingData:p}=this.properties,{scale:g}=a,{scale:f}=o,{isContinuousY:m}=this.getScaleInformation({xScale:g,yScale:f}),v=((t=g.bandwidth)!=null?t:0)/2,y=n.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative","yValueContinuity","yValue"]),x=(R,G,z)=>{let U;return(su(this.properties.normalizedTo)?m&&cg(z):!isNaN(z))&&(U=G),{x:g.convert(R)+v,y:f.convert(U),size:c.size}},b=r,S=[],k=[],{visibleSameStackCount:D}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),T={itemId:b,fillData:{itemId:b,points:[],phantomPoints:[]},strokeData:{itemId:b,points:[]},labelData:S,nodeData:k,scales:this.calculateScaling(),visible:this.visible,stackVisible:D>0},I=T.fillData.points,N=T.fillData.phantomPoints,C=T.strokeData.points;let E=-1,O,P,w=!0;return s?.forEach(R=>{const{keys:G,keys:[z],datum:U,values:V}=R;V.forEach((X,j)=>{var tt,ct,st;E++;const $=U[j],Q=n.resolveProcessedDataDefsValues(y,{keys:G,values:X}),{yValueRaw:J,yValueCumulative:it,yValueContinuity:ht}=Q,{yValueStart:vt,yValueEnd:dt,yValuePreviousStart:lt,yValuePreviousEnd:bt,yValue:Dt}=Q,$t=J!=null,It=x(z,+it,J);if($t&&c&&k.push({index:E,series:this,itemId:b,datum:$,midPoint:{x:It.x,y:It.y},cumulativeValue:dt,yValue:J,xValue:z,yKey:r,xKey:l,point:It,fill:(tt=c.fill)!=null?tt:u,stroke:(ct=c.stroke)!=null?ct:d,strokeWidth:(st=c.strokeWidth)!=null?st:this.getStrokeWidth(this.properties.strokeWidth)}),$t&&h){const Ne=this.getLabelText(h,{value:J,datum:$,xKey:l,yKey:r,xName:this.properties.xName,yName:this.properties.yName},Zt=>Ot(Zt)?Zt.toFixed(2):String(Zt));S.push({index:E,series:this,itemId:r,datum:$,x:It.x,y:It.y,label:Ne?{text:Ne,fontStyle:h.fontStyle,fontWeight:h.fontWeight,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:"center",textBaseline:"bottom",fill:h.color}:void 0})}if($t||!p){$t||(w=!0);const Ne=!w&&!p;Ne&&P===!1&&ht===!0?(I.push({point:{x:It.x,y:f.convert(dt),moveTo:!1},yValue:J,xValue:z}),N.push({point:{x:It.x,y:f.convert(vt),moveTo:!1},yValue:J,xValue:z}),C.push({point:{x:It.x,y:f.convert(dt),moveTo:!1},yValue:J,xValue:z}),w=!0):Ne&&P===!0&&ht===!1&&(I.push({point:{x:g.convert(O)+v,y:f.convert(bt),moveTo:!0},yValue:J,xValue:z}),N.push({point:{x:g.convert(O)+v,y:f.convert(lt),moveTo:!0},yValue:J,xValue:z}),C.push({point:{x:g.convert(O)+v,y:f.convert(bt),moveTo:!0},yValue:J,xValue:z}),w=!1),I.push({point:{x:It.x,y:f.convert(it),moveTo:w},yValue:J,xValue:z}),N.push({point:{x:It.x,y:f.convert(it-Dt),moveTo:w},yValue:J,xValue:z}),C.push({point:{x:It.x,y:f.convert(it),moveTo:w},yValue:J,xValue:z}),w=!$t}O=z,P=ht})}),T})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=Kn(t);return new e}updatePathNodes(t){return F(this,null,function*(){const{opacity:e,visible:i,animationEnabled:s}=t,[n,a]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:1,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),n.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:e,visible:i||s,strokeWidth:o}),xf(this,a),xf(this,n)})}updatePaths(t){return F(this,null,function*(){this.updateAreaPaths(t.paths,t.contextData)})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{points:i,phantomPoints:s}=e.fillData,[n]=t,{interpolation:a}=this.properties;n.path.clear(!0);for(const o of bf(i))Go(Sf(i,o),n,a,!1),Go(YA(s,o),n,a,!0),n.path.closePath();n.checkPathDirty()}updateStrokePath(t,e){const{points:i}=e.strokeData,[,s]=t,{path:n}=s,{interpolation:a}=this.properties;n.clear(!0);for(const o of bf(i))Go(Sf(i,o),s,a);s.checkPathDirty()}updateMarkerSelection(t){return F(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return F(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,marker:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h,highlightStyle:u}=this.properties,d=kt(i&&u.item,a.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h});e.each((p,g)=>{this.updateMarkerStyle(p,a,{datum:g,highlighted:i,xKey:s,yKey:n},d)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.tag=3})})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o,color:r}=this.properties.label;e.each((l,c)=>{const{x:h,y:u,label:d}=c;d&&i&&this.visible?(l.fontStyle=s,l.fontWeight=n,l.fontSize=a,l.fontFamily=o,l.textAlign=d.textAlign,l.textBaseline=d.textBaseline,l.text=d.text,l.x=h,l.y=u-10,l.fill=r,l.visible=!0):l.visible=!1})})}getTooltipHtml(t){const{id:e,axes:i,dataModel:s}=this,{xKey:n,xName:a,yName:o,tooltip:r,marker:l}=this.properties,{yKey:c,xValue:h,yValue:u,datum:d,itemId:p}=t,g=i.x,f=i.y;if(!this.properties.isValid()||!(g&&f&&Ot(u))||!s)return Hn;const m=g.formatDatum(h),v=f.formatDatum(u),y=re(o),x=re(m+": "+v),b=kt({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:S}=this.getMarkerStyle(l,{datum:t,xKey:n,yKey:c,highlighted:!1},b);return r.toTooltipHtml({title:y,content:x,backgroundColor:S},{datum:d,itemId:p,xKey:n,xName:a,yKey:c,yName:o,color:S,title:y,seriesId:e})}getLegendData(t){var e,i,s,n,a;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!this.properties.showInLegend||t!=="category")return[];const{yKey:o,yName:r,fill:l,stroke:c,fillOpacity:h,strokeOpacity:u,strokeWidth:d,lineDash:p,marker:g,visible:f,legendItemName:m}=this.properties,v=!g.enabled||g.fill===void 0;return[{legendType:t,id:this.id,itemId:o,seriesId:this.id,enabled:f,label:{text:(i=m??r)!=null?i:o},symbols:[{marker:{shape:g.shape,fill:v?l:g.fill,fillOpacity:v?h:g.fillOpacity,stroke:(s=g.stroke)!=null?s:c,strokeOpacity:(n=g.strokeOpacity)!=null?n:u,strokeWidth:(a=g.strokeWidth)!=null?a:0,enabled:g.enabled||d<=0},line:{stroke:c,strokeOpacity:u,strokeWidth:d,lineDash:p}}],legendItemName:m}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),k0(this,a,...n),Ce([e],id),b0(this,a,e),Pt(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelection:n,labelSelection:a,contextData:o,paths:r,previousContextData:l}=t,[c,h]=r;if(c==null&&h==null)return;super.resetAllAnimation(t);const u=()=>{this.updateAreaPaths(r,o),this.updateStrokePath(r,o)},d=()=>{s.skipCurrentBatch(),u()};if(o==null||l==null){u(),td(this,s,"added",n),ad(this,"fill_path_properties",s,"add",c),ad(this,"stroke",s,"trailing",h),Pt(this,"labels",s,a);return}const p=ZA(o,l,(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,this.properties.interpolation);if(p===void 0){d();return}else if(p.status==="no-op")return;td(this,s,void 0,n),xe(this.id,"fill_path_properties",s,[c],p.fill.pathProperties),RA(this.id,"fill_path_update",s,[c],p.fill.path),this.updateStrokePath(r,o),ad(this,"stroke",s,"trailing",h),Pt(this,"labels",s,a)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ut}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return sd(this,t)}},Df.className="AreaSeries",Df.type="area"}}),QA,cV=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesModule.ts"(){"use strict";al(),Zn(),fe(),lV(),QA={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:Df,stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Po,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:ge,color:Ke}}},paletteFactory:t=>{const{marker:e}=df(t);return{fill:e.fill,stroke:e.stroke,marker:e}}}}});function*JA(t){for(const e of t.children)yield e}function N0(t,e){for(const i of e){const s=i.datum;s===void 0?Z.error("undefined datum"):t.addValue(i,s)}}function O0(t,e){const{x:i,y:s}=t.contentGroup.transformPoint(e.x,e.y),{nearest:n,distanceSquared:a}=t.getQuadTree().find(i,s);if(n!==void 0)return{datum:n.value,distance:Math.sqrt(a)}}var C0=L({"packages/ag-charts-community/src/chart/series/cartesian/quadtreeUtil.ts"(){"use strict";yt()}}),If,E0,R0=L({"packages/ag-charts-community/src/chart/series/cartesian/abstractBarSeries.ts"(){"use strict";Tr(),Ji(),gt(),Ru(),kg(),de(),is(),C0(),If=class extends Ba{constructor(){super(...arguments),this.direction="vertical"}},_([A(tx)],If.prototype,"direction",2),E0=class extends Fa{constructor(){super(...arguments),this.groupScale=new Sa,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}updateGroupScale(t){const{groupScale:e,smallestDataInterval:i,ctx:{seriesStateManager:s}}=this,n=t.scale,a=zt.is(n)?n.calcBandwidth(i):n.bandwidth,o=[],{index:r,visibleGroupCount:l}=s.getVisiblePeerGroupIndex(this);for(let h=0;h<l;h++)o.push(String(h));return e.domain=o,e.range=[0,a??0],t instanceof La?e.paddingInner=t.groupPaddingInner:t instanceof Ta?e.padding=.1:e.padding=0,e.round=e.padding!==0,{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:r}}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}initQuadTree(t){N0(t,this.datumNodesIter())}pickNodeClosestDatum(t){return O0(this,t)}}}}),w0,De,hV=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesProperties.ts"(){"use strict";jc(),gt(),Es(),Xa(),R0(),w0=class extends Oe{constructor(){super(...arguments),this.placement="inside"}},_([A(ex)],w0.prototype,"placement",2),De=class extends If{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new zs,this.label=new w0,this.tooltip=new Ai}},_([A(et)],De.prototype,"xKey",2),_([A(et,{optional:!0})],De.prototype,"xName",2),_([A(et)],De.prototype,"yKey",2),_([A(et,{optional:!0})],De.prototype,"yName",2),_([A(et,{optional:!0})],De.prototype,"stackGroup",2),_([A(jt,{optional:!0})],De.prototype,"normalizedTo",2),_([A(Et)],De.prototype,"fill",2),_([A(Rt)],De.prototype,"fillOpacity",2),_([A(Et)],De.prototype,"stroke",2),_([A(q)],De.prototype,"strokeWidth",2),_([A(Rt)],De.prototype,"strokeOpacity",2),_([A(Gn)],De.prototype,"lineDash",2),_([A(q)],De.prototype,"lineDashOffset",2),_([A(q)],De.prototype,"cornerRadius",2),_([A(pt,{optional:!0})],De.prototype,"crisp",2),_([A(Bi,{optional:!0})],De.prototype,"itemStyler",2),_([A(rt,{optional:!0})],De.prototype,"shadow",2),_([A(rt)],De.prototype,"label",2),_([A(rt)],De.prototype,"tooltip",2)}});function tL({rect:t,config:e}){const{crisp:i=!0,fill:s,stroke:n,strokeWidth:a,fillOpacity:o,strokeOpacity:r,lineDash:l,lineDashOffset:c,fillShadow:h,cornerRadius:u=0,topLeftCornerRadius:d=!0,topRightCornerRadius:p=!0,bottomRightCornerRadius:g=!0,bottomLeftCornerRadius:f=!0,visible:m=!0}=e;t.crisp=i,t.fill=s,t.stroke=n,t.strokeWidth=a,t.fillOpacity=o,t.strokeOpacity=r,t.lineDash=l,t.lineDashOffset=c,t.fillShadow=h,t.topLeftCornerRadius=d?u:0,t.topRightCornerRadius=p?u:0,t.bottomRightCornerRadius=g?u:0,t.bottomLeftCornerRadius=f?u:0,t.visible=m}function eL(t){var e=t,{datum:i,isHighlighted:s,style:n,highlightStyle:a,itemStyler:o,seriesId:r,ctx:{callbackCache:l}}=e,c=se(e,["datum","isHighlighted","style","highlightStyle","itemStyler","seriesId","ctx"]),h,u,d,p,g,f,m,v;const{fill:y,fillOpacity:x,stroke:b,strokeWidth:S,strokeOpacity:k,lineDash:D,lineDashOffset:T,cornerRadius:I=0}=kt(s&&a,n),{fillShadow:N,topLeftCornerRadius:C=!0,topRightCornerRadius:E=!0,bottomRightCornerRadius:O=!0,bottomLeftCornerRadius:P=!0}=n;let w;return o&&(w=l.call(o,B({datum:i.datum,xKey:i.xKey,fill:y,fillOpacity:x,stroke:b,strokeWidth:S,strokeOpacity:k,lineDash:D,lineDashOffset:T,cornerRadius:I,highlighted:s,seriesId:r},c))),{fill:(h=w?.fill)!=null?h:y,fillOpacity:(u=w?.fillOpacity)!=null?u:x,stroke:(d=w?.stroke)!=null?d:b,strokeWidth:(p=w?.strokeWidth)!=null?p:S,strokeOpacity:(g=w?.strokeOpacity)!=null?g:k,lineDash:(f=w?.lineDash)!=null?f:D,lineDashOffset:(m=w?.lineDashOffset)!=null?m:T,cornerRadius:(v=w?.cornerRadius)!=null?v:I,topLeftCornerRadius:C,topRightCornerRadius:E,bottomRightCornerRadius:O,bottomLeftCornerRadius:P,fillShadow:N}}function iL(t,e,i,s){if(e!=null){const[n,a]=e;if(n!==0||a!==1)return!1}if(zt.is(t)){const n=t.calcBandwidth(s)-t.calcBandwidth(i);if(n>0&&n<1)return!1}return!0}function cd(t,e,i){const{startingX:s,startingY:n}=dV(t,e);return{isVertical:t,calculate:(o,r)=>{let l=t?o.x:s,c=t?n:o.y,h=t?o.width:0,u=t?0:o.height;const{opacity:d}=o;r&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=r,h=t?r.width:0,u=t?0:r.height,t&&!Af(r)?c+=r.height:!t&&Af(r)&&(l+=r.width));let p;return o.clipBBox==null?p=void 0:Af(o)?p=t?new ot(l,c-u,h,u):new ot(l-h,c,h,u):p=new ot(l,c,h,u),{x:l,y:c,width:h,height:u,clipBBox:p,opacity:d}},mode:i}}function uV(t,e){return{isVertical:t,calculate:i=>({x:t?i.x:i.x+i.width/2,y:t?i.y+i.height/2:i.y,width:t?i.width:0,height:t?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity}),mode:e}}function hd(t){const e=n=>n==null||isNaN(n.x)||isNaN(n.y);return{toFn:(n,a,o)=>{let r;return o==="removed"&&n.datum==null&&t.mode==="fade"?r=K(B({},ud(n,a)),{opacity:0}):o==="removed"||e(a)?r=t.calculate(a,n.previousDatum):r={x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity},r},fromFn:(n,a,o)=>{o==="updated"&&e(a)?o="removed":o==="updated"&&e(n.previousDatum)&&(o="added");let r;o==="added"&&n.previousDatum==null&&t.mode==="fade"?r=K(B({},ud(n,a)),{opacity:0}):o==="unknown"||o==="added"?r=t.calculate(a,n.previousDatum):r={x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity};const l=Si[o];return K(B({},r),{phase:l})}}}function dV(t,e){const i=e[t?"y":"x"];let s=1/0,n=0;return i?(t?n=i.scale.convert(zt.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(zt.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}function ud(t,{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o}){return{x:e,y:i,width:s,height:n,clipBBox:a,opacity:o}}function P0(t,e,i){if(t===void 0)return;const{x:s,y:n,width:a,height:o}=t;return e.inverseTransformBBox(new ot(s,n,a,o)).clip(i)}var Af,Lf=L({"packages/ag-charts-community/src/chart/series/cartesian/barUtil.ts"(){"use strict";li(),Ji(),Mt(),_t(),ue(),de(),Af=t=>{var e;return nc((e=t.yValue)!=null?e:0)}}});function sL(t,e,i){if(e.enabled&&i){const{x:s,y:n,text:a,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d}=e;t.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d,textAlign:o,textBaseline:r})}else t.visible=!1}function nL({isPositive:t,isVertical:e,placement:i,padding:s=0,rect:n}){let a=n.x+n.width/2,o=n.y+n.height/2,r="center",l="middle";switch(i){case"start":{e?(o=t?n.y+n.height+s:n.y-s,l=t?"top":"bottom"):(a=t?n.x-s:n.x+n.width+s,r=t?"start":"end");break}case"outside":case"end":{e?(o=t?n.y-s:n.y+n.height+s,l=t?"bottom":"top"):(a=t?n.x+n.width+s:n.x-s,r=t?"start":"end");break}}return{x:a,y:o,textAlign:r,textBaseline:l}}var aL=L({"packages/ag-charts-community/src/chart/series/cartesian/labelUtil.ts"(){"use strict"}}),Tf,pV=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeries.ts"(){"use strict";li(),Ji(),Mt(),ae(),of(),Ve(),Ya(),Ct(),$b(),de(),Yn(),Ra(),Hi(),Di(),ja(),R0(),hV(),Lf(),Lf(),is(),aL(),Tf=class extends E0{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,pickModes:[3,0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:ud,label:Ka}}),this.properties=new De}processData(t){return F(this,null,function*(){var e,i,s,n;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:a=this.id}={},data:o=[]}=this,{xKey:r,yKey:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=(e=this.getCategoryAxis())==null?void 0:e.scale,d=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:d}),m=`bar-stack-${a}-yValues`,v=`${m}-trailing`,y=[];Ot(c)&&y.push(zu([m,v],Math.abs(c),"range")),h&&this.processedData&&y.push(qr(this.processedData)),h&&y.push(Rc());const x=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,o,{props:[di(r,g,{id:"xValue"}),Vt(l,f,B({id:"yValue-raw",invalidValue:null},x)),...dn(l,"normal","current",B({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},x),f),...dn(l,"trailing","current",B({id:"yValue-start",invalidValue:null,missingValue:0,groupId:v,separateNegative:!0},x),f),...p?[Ob,Cb]:[],...y],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=(s=b.reduced)==null?void 0:s.smallestKeyInterval,this.largestDataInterval=(n=b.reduced)==null?void 0:n.largestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!i||!s||i.data.length===0)return[];const a=this.getCategoryAxis(),o=this.getValueAxis(),r=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),c=s.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if(r?.def.type==="key"&&r.def.valueType==="category")return l;const h=Ot(n)?n*.5:0,u=(e=Vn(l))!=null?e:[NaN,NaN],d=u[0]+-h,p=u[1]+h;return es([d,p],a)}else{if(this.getValueAxis()instanceof Eo)return es(c,o);{const h=[Math.min(0,c[0]),Math.max(0,c[1])];return es(h,o)}}}createNodeData(){return F(this,null,function*(){const{dataModel:t}=this,e=this.getCategoryAxis(),i=this.getValueAxis();if(!t||!e||!i||!this.properties.isValid())return;const s=e.scale,n=i.scale,{xKey:a,yKey:o,xName:r,yName:l,fill:c,stroke:h,strokeWidth:u,cornerRadius:d,legendItemName:p,label:g}=this.properties,f=i.isReversed(),{barWidth:m,groupIndex:v}=this.updateGroupScale(e),y=zt.is(s)?m*-.5:0,x=t.resolveProcessedDataIndexById(this,"xValue"),b=t.resolveProcessedDataIndexById(this,"yValue-raw"),S=t.resolveProcessedDataIndexById(this,"yValue-start"),k=t.resolveProcessedDataIndexById(this,"yValue-end"),D=t.resolveProcessedDataIndexById(this,"yValue-range"),T=!this.ctx.animationManager.isSkipped(),I={itemId:o,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible||T},{groupScale:N,processedData:C}=this;return C?.data.forEach(({keys:E,datum:O,values:P,aggValues:w})=>{P.forEach((R,G)=>{var z;const U=E[x],V=s.convert(U),X=+R[k],j=+R[S],tt=R[b],ct=tt>=0&&!Object.is(tt,-0),st=ct!==f,$=(z=w?.[D][ct?1:0])!=null?z:0,Q=V+N.convert(String(v))+y;if(isNaN(X))return;const J=n.convert(X),it=n.convert(j),ht=this.getBarDirection()==="x",vt=n.convert($),dt=n.convert(0),lt={x:ht?Math.min(J,it):Q,y:ht?Q:Math.min(J,it),width:ht?Math.abs(it-J):m,height:ht?m:Math.abs(it-J)},bt=new ot(lt.x,lt.y,lt.width,lt.height),Dt={x:ht?Math.min(dt,vt):Q,y:ht?Q:Math.min(dt,vt),width:ht?Math.abs(dt-vt):m,height:ht?m:Math.abs(dt-vt),clipBBox:bt},{fontStyle:$t,fontWeight:It,fontSize:Ne,fontFamily:Zt,color:hs,placement:Zi}=g,ga=this.getLabelText(this.properties.label,{datum:O[G],value:tt,xKey:a,yKey:o,xName:r,yName:l,legendItemName:p},fa=>Ot(fa)?fa.toFixed(2):String(fa)),jh=ga?B({text:ga,fill:hs,fontStyle:$t,fontWeight:It,fontSize:Ne,fontFamily:Zt},nL({isPositive:ct,isVertical:!ht,placement:Zi,rect:lt})):void 0,hp=this.shouldFlipXY()?lt.height:lt.width,xo={series:this,itemId:o,datum:O[G],valueIndex:G,cumulativeValue:X,xValue:U,yValue:tt,yKey:o,xKey:a,capDefaults:{lengthRatioMultiplier:hp,lengthMax:hp},x:Dt.x,y:Dt.y,width:Dt.width,height:Dt.height,midPoint:{x:lt.x+lt.width/2,y:lt.y+lt.height/2},fill:c,stroke:h,opacity:1,strokeWidth:u,cornerRadius:d,topLeftCornerRadius:ht!==st,topRightCornerRadius:st,bottomRightCornerRadius:ht===st,bottomLeftCornerRadius:!st,clipBBox:bt,label:jh,missing:tt==null};I.nodeData.push(xo),I.labelData.push(xo)})}),I})}nodeFactory(){return new Ii}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,e=>{e.tag=0},e=>No(e.xValue,e.valueIndex))})}updateDatumNodes(t){return F(this,null,function*(){var e;if(!this.properties.isValid())return;const{yKey:i,stackGroup:s,fill:n,fillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h,itemStyler:u,shadow:d,highlightStyle:{item:p}}=this.properties,g=this.axes.x,f=(e=this.properties.crisp)!=null?e:iL(g?.scale,g?.visibleRange,this.smallestDataInterval,this.largestDataInterval),m=this.getCategoryDirection()==="x";t.datumSelection.each((v,y)=>{var x,b,S,k;const D={fill:n,stroke:o,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(r),cornerRadius:y.cornerRadius,topLeftCornerRadius:y.topLeftCornerRadius,topRightCornerRadius:y.topRightCornerRadius,bottomRightCornerRadius:y.bottomRightCornerRadius,bottomLeftCornerRadius:y.bottomLeftCornerRadius},T=m?((b=(x=y.clipBBox)==null?void 0:x.width)!=null?b:y.width)>0:((k=(S=y.clipBBox)==null?void 0:S.height)!=null?k:y.height)>0,I=eL({datum:y,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:p,yKey:i,style:D,itemStyler:u,stackGroup:s});I.crisp=f,I.visible=T,tL({rect:v,config:I})})})}updateLabelSelection(t){return F(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,i=>{i.tag=1,i.pointerEvents=1})})}updateLabelNodes(t){return F(this,null,function*(){t.labelSelection.each((e,i)=>{sL(e,this.properties.label,i.label)})})}getTooltipHtml(t){var e,i;const{id:s,processedData:n,ctx:{callbackCache:a}}=this,o=this.getCategoryAxis(),r=this.getValueAxis();if(!n||!this.properties.isValid()||!o||!r)return Hn;const{xKey:l,yKey:c,xName:h,yName:u,fill:d,stroke:p,strokeWidth:g,tooltip:f,itemStyler:m,stackGroup:v,legendItemName:y}=this.properties,{xValue:x,yValue:b,datum:S,itemId:k}=t,D=o.formatDatum(x),T=r.formatDatum(b),I=re(u),N=re(D+": "+T);let C;m&&(C=a.call(m,{seriesId:s,datum:S,xKey:l,yKey:c,stackGroup:v,fill:d,stroke:p,strokeWidth:this.getStrokeWidth(g),highlighted:!1,cornerRadius:this.properties.cornerRadius,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,lineDash:(e=this.properties.lineDash)!=null?e:[],lineDashOffset:this.properties.lineDashOffset}));const E=(i=C?.fill)!=null?i:d;return f.toTooltipHtml({title:I,content:N,backgroundColor:E},B({seriesId:s,itemId:k,datum:S,xKey:l,yKey:c,xName:h,yName:u,stackGroup:v,title:I,color:E,legendItemName:y},this.getModuleTooltipParams()))}getLegendData(t){var e,i;const{showInLegend:s}=this.properties;if(t!=="category"||!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!s)return[];const{yKey:n,yName:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:c,strokeOpacity:h,legendItemName:u,visible:d}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:d,label:{text:(i=u??a)!=null?i:n},symbols:[{marker:{fill:o,fillOpacity:c,stroke:r,strokeWidth:l,strokeOpacity:h}}],legendItemName:u}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){const s=hd(cd(this.isVertical(),this.axes,"normal"));xe(this.id,"nodes",this.ctx.animationManager,[t],s),Pt(this,"labels",this.ctx.animationManager,e),Pt(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){var e,i,s;const{datumSelection:n,labelSelection:a,annotationSelections:o,previousContextData:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,c=r==null?"fade":"normal",h=hd(cd(this.isVertical(),this.axes,c));xe(this.id,"nodes",this.ctx.animationManager,[n],h,(d,p)=>No(p.xValue,p.valueIndex),l),((s=l?.changed)!=null?s:!0)&&(Pt(this,"labels",this.ctx.animationManager,a),Pt(this,"annotations",this.ctx.animationManager,...o))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;const s=(i=this.contextNodeData)==null?void 0:i.nodeData[t].clipBBox;return P0(s,this.contentGroup,e)}},Tf.className="BarSeries",Tf.type="bar"}}),oL,gV=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesModule.ts"(){"use strict";al(),Zn(),fe(),pV(),oL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Tf,stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:t=>t?.direction==="horizontal",themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:ge,color:wo,placement:"inside"},shadow:{enabled:!1,color:Po,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Uc}}}),B0,Nf,F0,rL,Uo,dd=L({"packages/ag-charts-community/src/scale/colorScale.ts"(){"use strict";Vp(),yt(),_t(),hc(),B0=t=>{const e=nn.fromString(t),[i,s,n]=nn.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:n,a:e.a}},Nf=1e-6,F0=t=>t.c<Nf||t.l<Nf||t.l>1-Nf,rL=(t,e,i)=>{i=St(0,i,1);let s;if(F0(t))s=e.h;else if(F0(e))s=t.h;else{const r=t.h;let l=e.h;const c=e.h-t.h;c>180?l-=360:c<-180&&(l+=360),s=r*(1-i)+l*i}const n=t.c*(1-i)+e.c*i,a=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return nn.fromOKLCH(a,n,s,o)},Uo=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(B0)}update(){const{domain:t,range:e}=this;t.length<2&&(Z.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let i=1;i<t.length;i++){const s=t[i-1],n=t[i];if(s>=n){Z.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((a,o)=>a-o);break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(B0)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,n=e[0],a=e.at(-1),o=i[0],r=i[i.length-1];if(t<=n)return o;if(t>=a)return r;let l,c;if(e.length===2){const d=(t-n)/(a-n),p=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(d*(i.length-1)),i.length-2),c=(d-l*p)/p}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const d=e[l],p=e[l+1];c=(t-d)/(p-d)}const h=s[l],u=s[l+1];return rL(h,u,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Z.warnOnce("Expected update to not invalidate scale"))}},_([Ge],Uo.prototype,"domain",2),_([Ge],Uo.prototype,"range",2)}}),Of,z0,te,fV=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesProperties.ts"(){"use strict";tu(),Ye(),gt(),Es(),Ju(),Xa(),is(),Of=class extends Ki{constructor(){super(...arguments),this.maxSize=30}},_([A(q),at({redraw:3})],Of.prototype,"maxSize",2),_([A(mu,{optional:!0}),at({redraw:3})],Of.prototype,"domain",2),z0=class extends Oe{constructor(){super(...arguments),this.placement="top"}},_([A(qp)],z0.prototype,"placement",2),te=class extends Ba{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new z0,this.tooltip=new Ai,this.marker=new Of}},_([A(et)],te.prototype,"xKey",2),_([A(et)],te.prototype,"yKey",2),_([A(et)],te.prototype,"sizeKey",2),_([A(et,{optional:!0})],te.prototype,"labelKey",2),_([A(et,{optional:!0})],te.prototype,"colorKey",2),_([A(et,{optional:!0})],te.prototype,"xName",2),_([A(et,{optional:!0})],te.prototype,"yName",2),_([A(et,{optional:!0})],te.prototype,"sizeName",2),_([A(et,{optional:!0})],te.prototype,"labelName",2),_([A(et,{optional:!0})],te.prototype,"colorName",2),_([A(mu,{optional:!0})],te.prototype,"colorDomain",2),_([A(ms)],te.prototype,"colorRange",2),_([A(et,{optional:!0})],te.prototype,"title",2),_([We("marker.shape")],te.prototype,"shape",2),_([We("marker.size")],te.prototype,"size",2),_([We("marker.maxSize")],te.prototype,"maxSize",2),_([We("marker.domain",{optional:!0})],te.prototype,"domain",2),_([We("marker.fill",{optional:!0})],te.prototype,"fill",2),_([We("marker.fillOpacity")],te.prototype,"fillOpacity",2),_([We("marker.stroke",{optional:!0})],te.prototype,"stroke",2),_([We("marker.strokeWidth")],te.prototype,"strokeWidth",2),_([We("marker.strokeOpacity")],te.prototype,"strokeOpacity",2),_([We("marker.itemStyler",{optional:!0})],te.prototype,"itemStyler",2),_([A(rt)],te.prototype,"label",2),_([A(rt)],te.prototype,"tooltip",2)}}),lL,Cf,mV=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeries.ts"(){"use strict";dd(),Gc(),be(),hi(),Ve(),ue(),Ya(),de(),Yn(),Ra(),Pa(),Hi(),Di(),ja(),fV(),is(),ll(),lL=class extends sf{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},Cf=class extends Fa{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Ka,marker:ed}}),this.NodeEvent=lL,this.properties=new te,this.sizeScale=new pn,this.colorScale=new Uo}processData(t){return F(this,null,function*(){var e,i,s,n;if(!this.properties.isValid()||this.data==null||!this.visible)return;const a=(e=this.axes.x)==null?void 0:e.scale,o=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:a,yScale:o}),c=this.colorScale.type,h=this.sizeScale.type,{xKey:u,yKey:d,sizeKey:p,labelKey:g,colorDomain:f,colorRange:m,colorKey:v,marker:y}=this.properties,{dataModel:x,processedData:b}=yield this.requestDataModel(t,this.data,{props:[di(u,r,{id:"xKey-raw"}),di(d,l,{id:"yKey-raw"}),...g?[di(g,"band",{id:"labelKey-raw"})]:[],Vt(u,r,{id:"xValue"}),Vt(d,l,{id:"yValue"}),Vt(p,h,{id:"sizeValue"}),...v?[Vt(v,c,{id:"colorValue"})]:[],...g?[Vt(g,"band",{id:"labelValue"})]:[]]}),S=x.resolveProcessedDataIndexById(this,"sizeValue"),k=(s=b.domain.values[S])!=null?s:[];if(this.sizeScale.domain=y.domain?y.domain:k,v){const D=x.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(n=f??b.domain.values[D])!=null?n:[],this.colorScale.range=m,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if(n?.def.type==="value"&&n?.def.valueType==="category")return a;const o=this.axes[t];return es(Vn(a),o)}createNodeData(){return F(this,null,function*(){var t,e,i;const{axes:s,dataModel:n,processedData:a,colorScale:o,sizeScale:r}=this,{xKey:l,yKey:c,sizeKey:h,labelKey:u,xName:d,yName:p,sizeName:g,labelName:f,label:m,colorKey:v,marker:y,visible:x}=this.properties,b=Kn(y.shape),{placement:S}=m,k=s.x,D=s.y;if(!(n&&a&&x&&k&&D))return;const T=n.resolveProcessedDataIndexById(this,"xValue"),I=n.resolveProcessedDataIndexById(this,"yValue"),N=h?n.resolveProcessedDataIndexById(this,"sizeValue"):-1,C=v?n.resolveProcessedDataIndexById(this,"colorValue"):-1,E=u?n.resolveProcessedDataIndexById(this,"labelValue"):-1,O=k.scale,P=D.scale,w=((t=O.bandwidth)!=null?t:0)/2,R=((e=P.bandwidth)!=null?e:0)/2,G=[];r.range=[y.size,y.maxSize];const z=m.getFont();for(const{values:U,datum:V}of(i=a.data)!=null?i:[]){const X=U[T],j=U[I],tt=O.convert(X)+w,ct=P.convert(j)+R,st=this.getLabelText(m,{value:u?U[E]:j,datum:V,xKey:l,yKey:c,sizeKey:h,labelKey:u,xName:d,yName:p,sizeName:g,labelName:f}),$=wt.getTextSize(String(st),z),Q=h?r.convert(U[N]):y.size,J=v?o.convert(U[C]):void 0;G.push({series:this,itemId:c,yKey:c,xKey:l,datum:V,xValue:X,yValue:j,sizeValue:U[N],point:{x:tt,y:ct,size:Q},midPoint:{x:tt,y:ct},fill:J,label:B({text:st},$),marker:b,placement:S})}return{itemId:c,nodeData:G,labelData:G,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}markerFactory(){const{shape:t}=this.properties.marker,e=Kn(t);return new e}updateMarkerSelection(t){return F(this,null,function*(){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,n=>No([n.xValue,n.yValue,n.label.text]))})}updateMarkerNodes(t){return F(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,sizeKey:a,labelKey:o,marker:r}=this.properties,{size:l,shape:c,fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g}=kt(i&&this.properties.highlightStyle.item,r.getStyle()),f={size:l,shape:c,fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g};this.sizeScale.range=[r.size,r.maxSize],e.each((m,v)=>{this.updateMarkerStyle(m,r,{datum:v,highlighted:i,xKey:s,yKey:n,sizeKey:a,labelKey:o},f)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return F(this,null,function*(){var e,i;const s=this.properties.label.enabled?(i=(e=this.chart)==null?void 0:e.placeLabels().get(this))!=null?i:[]:[];return t.labelSelection.update(s.map(n=>K(B({},n.datum),{point:{x:n.x,y:n.y,size:n.datum.point.size}})))})}updateLabelNodes(t){return F(this,null,function*(){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{var n,a,o,r;i.text=s.label.text,i.fill=e.color,i.x=(a=(n=s.point)==null?void 0:n.x)!=null?a:0,i.y=(r=(o=s.point)==null?void 0:o.y)!=null?r:0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return Hn;const{xKey:n,yKey:a,sizeKey:o,labelKey:r,xName:l,yName:c,sizeName:h,labelName:u,marker:d,tooltip:p}=this.properties,g=(e=this.properties.title)!=null?e:c,f=kt({fill:t.fill,strokeWidth:this.getStrokeWidth(d.strokeWidth)},d.getStyle()),{fill:m="gray"}=this.getMarkerStyle(d,{datum:t,highlighted:!1,xKey:n,yKey:a,sizeKey:o,labelKey:r},f),{datum:v,xValue:y,yValue:x,sizeValue:b,label:{text:S},itemId:k}=t,D=re(i.formatDatum(y)),T=re(s.formatDatum(x));let I=`<b>${re(l??n)}</b>: ${D}<br><b>${re(c??a)}</b>: ${T}`;return o&&(I+=`<br><b>${re(h??o)}</b>: ${re(String(b))}`),r&&(I=`<b>${re(u??r)}</b>: ${re(S)}<br>`+I),p.toTooltipHtml({title:g,content:I,backgroundColor:m},{datum:v,itemId:k,xKey:n,xName:l,yKey:a,yName:c,sizeKey:o,sizeName:h,labelKey:r,labelName:u,title:g,color:m,seriesId:this.id})}getLegendData(){var t,e;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid())return[];const{yKey:i,yName:s,title:n,marker:a,visible:o}=this.properties,{shape:r,fill:l,stroke:c,fillOpacity:h,strokeOpacity:u,strokeWidth:d}=a;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:o,label:{text:(e=n??s)!=null?e:i},symbols:[{marker:{shape:r,fill:l??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:h??1,strokeOpacity:u??1,strokeWidth:d??0}}]}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){x0(this,this.ctx.animationManager,t),Pt(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ut}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:s,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:s,labelKey:n,highlighted:!1})}computeFocusBounds(t){return sd(this,t)}},Cf.className="BubbleSeries",Cf.type="bubble"}}),cL,yV=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesModule.ts"(){"use strict";al(),Zn(),fe(),mV(),cL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:Cf,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:ge,color:Ke}}},paletteFactory:Uc}}}),Ie,vV=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesProperties.ts"(){"use strict";jc(),gt(),Es(),Xa(),is(),Ie=class extends Ba{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new zs,this.label=new Oe,this.tooltip=new Ai}},_([A(et)],Ie.prototype,"xKey",2),_([A(et,{optional:!0})],Ie.prototype,"yKey",2),_([A(et,{optional:!0})],Ie.prototype,"xName",2),_([A(et,{optional:!0})],Ie.prototype,"yName",2),_([A(Et,{optional:!0})],Ie.prototype,"fill",2),_([A(Rt)],Ie.prototype,"fillOpacity",2),_([A(Et,{optional:!0})],Ie.prototype,"stroke",2),_([A(q)],Ie.prototype,"strokeWidth",2),_([A(Rt)],Ie.prototype,"strokeOpacity",2),_([A(Gn)],Ie.prototype,"lineDash",2),_([A(q)],Ie.prototype,"lineDashOffset",2),_([A(q)],Ie.prototype,"cornerRadius",2),_([A(pt)],Ie.prototype,"areaPlot",2),_([A(Or,{optional:!0})],Ie.prototype,"bins",2),_([A(Jt(["count","sum","mean"],"a histogram aggregation"))],Ie.prototype,"aggregation",2),_([A(q,{optional:!0})],Ie.prototype,"binCount",2),_([A(rt)],Ie.prototype,"shadow",2),_([A(rt)],Ie.prototype,"label",2),_([A(rt)],Ie.prototype,"tooltip",2)}}),G0,Ef,xV=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeries.ts"(){"use strict";li(),ae(),of(),Ya(),pc(),Ct(),de(),Nb(),Yn(),Ra(),Hi(),Di(),ja(),Lf(),is(),vV(),C0(),G0=10,Ef=class extends Fa{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,pickModes:[3,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:ud,label:Ka}}),this.properties=new Ie,this.calculatedBins=[]}deriveBins(t){const e=sg(t[0],t[1],G0),i=uc(t[0],t[1],G0),[s]=e,n=a=>[a,a+i];return[[s-i,s],...e.map(n)]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:a,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(a,s,o,n)}getBins(t,e,i,s){const n=[],a=this.calculatePrecision(i);for(let o=0;o<s;o++){const r=Math.round((t+o*i)*a)/a;let l=Math.round((t+(o+1)*i)*a)/a;o===s-1&&(l=Math.max(l,e)),n[o]=[r,l]}return n}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return{start:Math.floor(t/a)*a,binSize:s}}processData(t){return F(this,null,function*(){var e,i;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:s,yKey:n,areaPlot:a,aggregation:o}=this.properties,r=(e=this.axes.x)==null?void 0:e.scale,l=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({yScale:l,xScale:r}),u=[di(s,c),Eb];if(n){let p=Lb("groupAgg");o==="count"||(o==="sum"?p=X2("groupAgg"):o==="mean"&&(p=Z2("groupAgg"))),a&&(p=Tb("groupAgg",p)),u.push(Vt(n,h,{invalidValue:void 0}),p)}else{let p=Lb("groupAgg");a&&(p=Tb("groupAgg",p)),u.push(p)}const d=p=>{var g;const f=es(p.domain.keys[0]);if(f.length===0)return p.domain.groups=[],()=>[];const m=ps(this.properties.binCount)?this.calculateNiceBins(f,this.properties.binCount):(g=this.properties.bins)!=null?g:this.deriveBins(f),v=m.length;return this.calculatedBins=[...m],y=>{const x=y.keys[0];for(let b=0;b<v;b++){const S=m[b];if(x>=S[0]&&x<S[1]||b===v-1&&x<=S[1])return S}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&u.push(qr(this.processedData,!1)),yield this.requestDataModel(t,this.data,{props:u,groupByFn:d}),this.animationState.transition("updateData")})}getSeriesDomain(t){var e,i,s,n;const{processedData:a,dataModel:o}=this;if(!a||!o||!this.calculatedBins.length)return[];const r=o.getDomain(this,"groupAgg","aggregate",a),l=(e=this.calculatedBins)==null?void 0:e[0][0],c=(n=this.calculatedBins)==null?void 0:n[((s=(i=this.calculatedBins)==null?void 0:i.length)!=null?s:0)-1][1];return es(t==="x"?[l,c]:r)}createNodeData(){return F(this,null,function*(){var t;const{id:e,axes:i,processedData:s,ctx:{callbackCache:n}}=this,a=i.x,o=i.y;if(!a||!o)return;const{scale:r}=a,{scale:l}=o,{xKey:c,yKey:h,xName:u,yName:d,fill:p,stroke:g,strokeWidth:f,cornerRadius:m}=this.properties,{formatter:v=I=>String(I.value),fontStyle:y,fontWeight:x,fontSize:b,fontFamily:S,color:k}=this.properties.label,D=[],T={itemId:(t=this.properties.yKey)!=null?t:this.id,nodeData:D,labelData:D,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||!s||s.type!=="grouped"||(s.data.forEach(I=>{var N;const{aggValues:[[C,E]]=[[0,0]],datum:O,datum:{length:P},keys:w,keys:[R,G]}=I,z=r.convert(R),U=r.convert(G),V=C+E,X=l.convert(0),j=l.convert(V),tt=Math.abs(U-z),ct=Math.abs(j-X),st=Math.min(z,U),$=Math.min(X,j);let Q;V!==0&&(Q={text:(N=n.call(v,{value:V,datum:O,seriesId:e,xKey:c,yKey:h,xName:u,yName:d}))!=null?N:String(V),fontStyle:y,fontWeight:x,fontSize:b,fontFamily:S,fill:k,x:st+tt/2,y:$+ct/2});const J={x:st+tt/2,y:$+ct/2},it=o.isReversed();D.push({series:this,datum:O,aggregatedValue:V,frequency:P,domain:w,yKey:h,xKey:c,x:st,y:$,xValue:z,yValue:j,width:tt,height:ct,midPoint:J,fill:p,stroke:g,cornerRadius:m,topLeftCornerRadius:!it,topRightCornerRadius:!it,bottomRightCornerRadius:it,bottomLeftCornerRadius:it,opacity:1,strokeWidth:f,label:Q})}),D.sort((I,N)=>I.x-N.x)),T})}nodeFactory(){return new Ii}updateDatumSelection(t){return F(this,null,function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,s=>{s.tag=0,s.crisp=!0},s=>s.domain.join("_"))})}updateDatumNodes(t){return F(this,null,function*(){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:a,shadow:o,highlightStyle:{item:{fill:r,fillOpacity:l=i,stroke:c,strokeWidth:h}}}=this.properties;t.datumSelection.each((u,d,p)=>{var g,f;const{cornerRadius:m,topLeftCornerRadius:v,topRightCornerRadius:y,bottomRightCornerRadius:x,bottomLeftCornerRadius:b}=d,S=e&&h!==void 0?h:d.strokeWidth,k=e?l:i;u.fill=(g=e?r:void 0)!=null?g:d.fill,u.stroke=(f=e?c:void 0)!=null?f:d.stroke,u.fillOpacity=k,u.strokeOpacity=s,u.strokeWidth=S,u.lineDash=n,u.lineDashOffset=a,u.topLeftCornerRadius=v?m:0,u.topRightCornerRadius=y?m:0,u.bottomRightCornerRadius=x?m:0,u.bottomLeftCornerRadius=b?m:0,u.fillShadow=o,u.zIndex=e?Qr.highlightedZIndex:p,u.visible=d.height>0})})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.tag=1,s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})})}updateLabelNodes(t){return F(this,null,function*(){const e=this.isLabelEnabled();t.labelSelection.each((i,s)=>{const n=s.label;n&&e?(i.text=n.text,i.x=n.x,i.y=n.y,i.fontStyle=n.fontStyle,i.fontWeight=n.fontWeight,i.fontSize=n.fontSize,i.fontFamily=n.fontFamily,i.fill=n.fill,i.visible=!0):i.visible=!1})})}initQuadTree(t){N0(t,JA(this.contentGroup.children[0]))}pickNodeClosestDatum(t){return O0(this,t)}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return Hn;const{xKey:s,yKey:n,xName:a,yName:o,fill:r,aggregation:l,tooltip:c}=this.properties,{aggregatedValue:h,frequency:u,domain:[d,p],itemId:g}=t,f=`${re(a??s)}: ${e.formatDatum(d)} - ${e.formatDatum(p)}`;let m=n?`<b>${re(o??n)} (${l})</b>: ${i.formatDatum(h)}<br>`:"";m+=`<b>Frequency</b>: ${u}`;const v={title:f,backgroundColor:r,content:m};return c.toTooltipHtml(v,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},itemId:g,xKey:s,xName:a,yKey:n,yName:o,color:r,title:f,seriesId:this.id})}getLegendData(t){var e,i;if(!((e=this.data)!=null&&e.length)||t!=="category")return[];const{xKey:s,yName:n,fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:c,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:h,label:{text:(i=n??s)!=null?i:"Frequency"},symbols:[{marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:r??"rgba(0, 0, 0, 0)",fillOpacity:o,strokeOpacity:c,strokeWidth:l}}]}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=hd(cd(!0,this.axes,"normal"));xe(this.id,"datums",this.ctx.animationManager,[t],i),Pt(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e,i;const s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,n=hd(cd(!0,this.axes,"normal"));xe(this.id,"datums",this.ctx.animationManager,[t.datumSelection],n,(a,o)=>No(o.domain),s),Pt(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return P0((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}},Ef.className="HistogramSeries",Ef.type="histogram"}}),hL,bV=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesModule.ts"(){"use strict";Zn(),fe(),xV(),hL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Ef,tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:ge,color:wo},shadow:{enabled:!1,color:Po,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}}}}),je,SV=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesProperties.ts"(){"use strict";gt(),Es(),Ju(),Xa(),is(),v0(),je=class extends Ba{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new rl,this.marker=new Ki,this.label=new Oe,this.tooltip=new Ai,this.connectMissingData=!1}},_([A(et)],je.prototype,"xKey",2),_([A(et)],je.prototype,"yKey",2),_([A(et,{optional:!0})],je.prototype,"xName",2),_([A(et,{optional:!0})],je.prototype,"yName",2),_([A(et,{optional:!0})],je.prototype,"stackGroup",2),_([A(q,{optional:!0})],je.prototype,"normalizedTo",2),_([A(et,{optional:!0})],je.prototype,"title",2),_([A(Et)],je.prototype,"stroke",2),_([A(q)],je.prototype,"strokeWidth",2),_([A(Rt)],je.prototype,"strokeOpacity",2),_([A(Gn)],je.prototype,"lineDash",2),_([A(q)],je.prototype,"lineDashOffset",2),_([A(rt)],je.prototype,"interpolation",2),_([A(rt)],je.prototype,"marker",2),_([A(rt)],je.prototype,"label",2),_([A(rt)],je.prototype,"tooltip",2),_([A(pt)],je.prototype,"connectMissingData",2)}}),Rf,MV=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeries.ts"(){"use strict";li(),wA(),Do(),be(),ae(),Ve(),ue(),Ya(),Ct(),de(),Yn(),Ra(),Pa(),Hi(),Di(),ja(),is(),SV(),_f(),ll(),od(),Rf=class extends Fa{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:D0({getOpacity:()=>this.getOpacity()}),label:Ka,marker:(e,i)=>B(B({},ed(e)),id(e,i))}}),this.properties=new je}processData(t){return F(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:s,visible:n,seriesGrouping:{groupIndex:a=this.id,stackCount:o=1}={}}=this,{xKey:r,yKey:l,connectMissingData:c,normalizedTo:h}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=(e=this.axes.x)==null?void 0:e.scale,p=(i=this.axes.y)==null?void 0:i.scale,{isContinuousX:g,xScaleType:f,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:p}),v={invalidValue:null};c&&o>1&&(v.invalidValue=0),n||(v.forceValue=0);const y=[];if(g||y.push(di(r,f,{id:"xKey"})),y.push(Vt(r,f,{id:"xValue"}),Vt(l,m,K(B({id:"yValueRaw"},v),{invalidValue:void 0}))),o>1){const x=[`line-stack-${a}-yValues`,`line-stack-${a}-yValues-trailing`,`line-stack-${a}-yValues-marker`];y.push(...dn(l,"window","current",K(B({id:"yValueEnd"},v),{groupId:x[0]}),m),...dn(l,"window-trailing","current",K(B({id:"yValueStart"},v),{groupId:x[1]}),m),...dn(l,"normal","current",K(B({id:"yValueCumulative"},v),{groupId:x[2]}),m)),su(h)&&y.push(zu([x[0],x[1],x[2]],h,"range"))}u&&(y.push(Rc(g?["xValue"]:void 0)),this.processedData&&y.push(qr(this.processedData))),yield this.requestDataModel(t,s,{props:y}),this.animationState.transition("updateData")})}getSeriesDomain(t){var e,i;const{processedData:s,dataModel:n,axes:a}=this;if(!s||!n||s.data.length===0)return[];const o=a.x,r=a.y,l=n.resolveProcessedDataDefById(this,"xValue");if(t==="x"){const c=n.getDomain(this,"xValue","value",s);return l?.def.type==="value"&&l.def.valueType==="category"?c:es(Vn(c),o)}else{const h=((i=(e=this.seriesGrouping)==null?void 0:e.stackCount)!=null?i:1)>1?n.getDomain(this,"yValueEnd","value",s):n.getDomain(this,"yValueRaw","value",s);return es(h,r)}}createNodeData(){return F(this,null,function*(){var t,e,i,s,n;const{processedData:a,dataModel:o,axes:r}=this,l=r.x,c=r.y;if(!a||!o||!l||!c)return;const{xKey:h,yKey:u,xName:d,yName:p,marker:g,label:f,connectMissingData:m,legendItemName:v}=this.properties,y=((e=(t=this.seriesGrouping)==null?void 0:t.stackCount)!=null?e:1)>1,x=l.scale,b=c.scale,S=((i=x.bandwidth)!=null?i:0)/2,k=((s=b.bandwidth)!=null?s:0)/2,D=[],T=g.enabled?g.size:0,I=o.resolveProcessedDataIndexById(this,"xValue"),N=o.resolveProcessedDataIndexById(this,"yValueRaw"),C=y?o.resolveProcessedDataIndexById(this,"yValueCumulative"):N,E=y?o.resolveProcessedDataIndexById(this,"yValueEnd"):void 0;let O=!0;return(n=a.data)==null||n.forEach(({datum:P,values:w})=>{const R=w[I],G=w[N],z=w[C],U=E!=null?w[E]:void 0;if(G==null){O||(O=!m);return}const V=x.convert(R)+S;if(isNaN(V)){O||(O=!m);return}const X=b.convert(z)+k,j=this.getLabelText(f,{value:G,datum:P,xKey:h,yKey:u,xName:d,yName:p,legendItemName:v},tt=>Ot(tt)?tt.toFixed(2):String(tt));D.push({series:this,datum:P,yKey:u,xKey:h,point:{x:V,y:X,moveTo:O,size:T},midPoint:{x:V,y:X},cumulativeValue:U,yValue:G,xValue:R,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:j?{text:j,fontStyle:f.fontStyle,fontWeight:f.fontWeight,fontSize:f.fontSize,fontFamily:f.fontFamily,textAlign:"center",textBaseline:"bottom",fill:f.color}:void 0}),O=!1}),{itemId:u,nodeData:D,labelData:D,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=Kn(t);return new e}updatePathNodes(t){return F(this,null,function*(){const{paths:[e],opacity:i,visible:s,animationEnabled:n}=t;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(e.visible=s),xf(this,e)})}updateMarkerSelection(t){return F(this,null,function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:s,enabled:n}=this.properties.marker;return e=s&&n?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,a=>No(a.xValue))})}updateMarkerNodes(t){return F(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,stroke:a,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:c}=this.properties,h=kt(i&&c.item,l.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:r}),u=this.ctx.animationManager.isSkipped();e.each((d,p)=>{this.updateMarkerStyle(d,l,{datum:p,highlighted:i,xKey:s,yKey:n},h,{applyTranslation:u})}),i||l.markClean()})}updateLabelSelection(t){return F(this,null,function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])})}updateLabelNodes(t){return F(this,null,function*(){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,color:o}=this.properties.label;t.labelSelection.each((r,l)=>{const{point:c,label:h}=l;l&&h&&e?(r.fontStyle=i,r.fontWeight=s,r.fontSize=n,r.fontFamily=a,r.textAlign=h.textAlign,r.textBaseline=h.textBaseline,r.text=h.text,r.x=c.x,r.y=c.y-10,r.fill=o,r.visible=!0):r.visible=!1})})}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return Hn;const{xKey:n,yKey:a,xName:o,yName:r,strokeWidth:l,marker:c,tooltip:h}=this.properties,{datum:u,xValue:d,yValue:p,itemId:g}=t,f=i.formatDatum(d),m=s.formatDatum(p),v=re((e=this.properties.title)!=null?e:r),y=re(f+": "+m),x=kt({fill:c.stroke},c.getStyle(),{strokeWidth:l}),{fill:b}=this.getMarkerStyle(c,{datum:t,xKey:n,yKey:a,highlighted:!1},x);return h.toTooltipHtml({title:v,content:y,backgroundColor:b},B({datum:u,itemId:g,xKey:n,xName:o,yKey:a,yName:r,title:v,color:b,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,o,r,l,c,h;if(!((e=this.data)!=null&&e.length&&this.properties.isValid()&&t==="category"))return[];const{yKey:u,yName:d,stroke:p,strokeOpacity:g,strokeWidth:f,lineDash:m,title:v,marker:y,visible:x,legendItemName:b}=this.properties,S="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:u,legendItemName:b,seriesId:this.id,enabled:x,label:{text:(s=(i=b??v)!=null?i:d)!=null?s:u},symbols:[{marker:{shape:y.shape,fill:(n=y.fill)!=null?n:S,stroke:(o=(a=y.stroke)!=null?a:p)!=null?o:S,fillOpacity:(r=y.fillOpacity)!=null?r:1,strokeOpacity:(c=(l=y.strokeOpacity)!=null?l:g)!=null?c:1,strokeWidth:(h=y.strokeWidth)!=null?h:0,enabled:y.enabled},line:{stroke:p??S,strokeOpacity:g,strokeWidth:f,lineDash:m}}]}]}updatePaths(t){return F(this,null,function*(){this.updateLinePaths(t.paths,t.contextData)})}updateLinePaths(t,e){const{interpolation:i}=this.properties,{nodeData:s}=e,[n]=t;n.path.clear(!0);for(const a of bf(s))Go(Sf(s,a),n,i);n.checkPathDirty()}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s,contextData:n,paths:a}=t,{animationManager:o}=this.ctx;this.updateLinePaths(a,n),k0(this,o,...a),Ce([e],id),b0(this,o,e),Pt(this,"labels",o,i),Pt(this,"annotations",o,...s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelection:n,labelSelection:a,annotationSelections:o,contextData:r,paths:l,previousContextData:c}=t,[h]=l;super.resetAllAnimation(t);const u=()=>{this.updateLinePaths(l,r)},d=()=>{s.skipCurrentBatch(),u()};if(r==null||c==null){u(),td(this,s,"added",n),ad(this,"path_properties",s,"add",h),Pt(this,"labels",s,a),Pt(this,"annotations",s,...o);return}const p=XA(r,c,(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,this.properties.interpolation);if(p===void 0){d();return}else if(p.status==="no-op")return;td(this,s,void 0,n),xe(this.id,"path_properties",s,[h],p.pathProperties),RA(this.id,"path_update",s,[h],p.path),p.hasMotion&&(Pt(this,"labels",s,a),Pt(this,"annotations",s,...o))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ut}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return sd(this,t)}},Rf.className="LineSeries",Rf.type="line"}}),uL,_V=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesModule.ts"(){"use strict";al(),Zn(),fe(),MV(),uL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:Rf,stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:ge,color:Ke}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=df(t);return{stroke:e.fill,marker:e}}}}}),V0,me,kV=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesProperties.ts"(){"use strict";Ye(),gt(),Es(),Ju(),Xa(),is(),V0=class extends Oe{constructor(){super(...arguments),this.placement="top"}},_([A(qp)],V0.prototype,"placement",2),me=class extends Ba{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new V0,this.tooltip=new Ai,this.marker=new Ki}},_([A(et)],me.prototype,"xKey",2),_([A(et)],me.prototype,"yKey",2),_([A(et,{optional:!0})],me.prototype,"labelKey",2),_([A(et,{optional:!0})],me.prototype,"colorKey",2),_([A(et,{optional:!0})],me.prototype,"xName",2),_([A(et,{optional:!0})],me.prototype,"yName",2),_([A(et,{optional:!0})],me.prototype,"labelName",2),_([A(et,{optional:!0})],me.prototype,"colorName",2),_([A(mu,{optional:!0})],me.prototype,"colorDomain",2),_([A(ms)],me.prototype,"colorRange",2),_([A(et,{optional:!0})],me.prototype,"title",2),_([We("marker.shape")],me.prototype,"shape",2),_([We("marker.size")],me.prototype,"size",2),_([We("marker.fill")],me.prototype,"fill",2),_([We("marker.fillOpacity")],me.prototype,"fillOpacity",2),_([We("marker.stroke")],me.prototype,"stroke",2),_([We("marker.strokeWidth")],me.prototype,"strokeWidth",2),_([We("marker.strokeOpacity")],me.prototype,"strokeOpacity",2),_([We("marker.itemStyler",{optional:!0})],me.prototype,"itemStyler",2),_([A(rt)],me.prototype,"label",2),_([A(rt)],me.prototype,"tooltip",2)}}),wf,DV=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeries.ts"(){"use strict";dd(),be(),ae(),hi(),Ve(),ue(),Ya(),de(),Yn(),Pa(),Hi(),Di(),ja(),is(),ll(),kV(),wf=class extends Fa{constructor(t){super({moduleCtx:t,directionKeys:Oo,directionNames:Co,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:ed,label:Ka}}),this.properties=new me,this.colorScale=new Uo}processData(t){return F(this,null,function*(){var e,i,s;if(!this.properties.isValid()||this.data==null||!this.visible)return;const n=(e=this.axes.x)==null?void 0:e.scale,a=(i=this.axes.y)==null?void 0:i.scale,{xScaleType:o,yScaleType:r}=this.getScaleInformation({xScale:n,yScale:a}),l=this.colorScale.type,{xKey:c,yKey:h,labelKey:u,colorKey:d,colorDomain:p,colorRange:g}=this.properties,{dataModel:f,processedData:m}=yield this.requestDataModel(t,this.data,{props:[di(c,o,{id:"xKey-raw"}),di(h,r,{id:"yKey-raw"}),...u?[di(u,"band",{id:"labelKey-raw"})]:[],Vt(c,o,{id:"xValue"}),Vt(h,r,{id:"yValue"}),...d?[Vt(d,l,{id:"colorValue"})]:[],...u?[Vt(u,"band",{id:"labelValue"})]:[]]});if(d){const v=f.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=(s=p??m.domain.values[v])!=null?s:[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t==="x"?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if(n?.def.type==="value"&&n?.def.valueType==="category")return a;const o=this.axes[t];return es(Vn(a),o)}createNodeData(){return F(this,null,function*(){var t,e,i;const{axes:s,dataModel:n,processedData:a,colorScale:o}=this,{xKey:r,yKey:l,labelKey:c,colorKey:h,xName:u,yName:d,labelName:p,marker:g,label:f,visible:m}=this.properties,{placement:v}=f,y=Kn(g.shape),x=s.x,b=s.y;if(!(n&&a&&m&&x&&b))return;const S=n.resolveProcessedDataIndexById(this,"xValue"),k=n.resolveProcessedDataIndexById(this,"yValue"),D=h?n.resolveProcessedDataIndexById(this,"colorValue"):-1,T=c?n.resolveProcessedDataIndexById(this,"labelValue"):-1,I=x.scale,N=b.scale,C=((t=I.bandwidth)!=null?t:0)/2,E=((e=N.bandwidth)!=null?e:0)/2,O=[],P=f.getFont();for(const{values:w,datum:R}of(i=a.data)!=null?i:[]){const G=w[S],z=w[k],U=I.convert(G)+C,V=N.convert(z)+E,X=this.getLabelText(f,{value:c?w[T]:z,datum:R,xKey:r,yKey:l,labelKey:c,xName:u,yName:d,labelName:p}),j=wt.getTextSize(X,P),tt=h?o.convert(w[D]):void 0;O.push({series:this,itemId:l,yKey:l,xKey:r,datum:R,xValue:G,yValue:z,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:U,y:V,size:g.size},midPoint:{x:U,y:V},fill:tt,label:B({text:X},j),marker:y,placement:v})}return{itemId:l,nodeData:O,labelData:O,scales:this.calculateScaling(),visible:this.visible}})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}markerFactory(){const{shape:t}=this.properties.marker,e=Kn(t);return new e}updateMarkerSelection(t){return F(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return F(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,labelKey:a,marker:o,highlightStyle:r}=this.properties,l=kt(i&&r.item,o.getStyle());e.each((c,h)=>{this.updateMarkerStyle(c,o,{datum:h,highlighted:i,xKey:s,yKey:n,labelKey:a},l)}),i||o.markClean()})}updateLabelSelection(t){return F(this,null,function*(){var e,i;const s=this.isLabelEnabled()?(i=(e=this.chart)==null?void 0:e.placeLabels().get(this))!=null?i:[]:[];return t.labelSelection.update(s.map(({datum:n,x:a,y:o})=>K(B({},n),{point:{x:a,y:o,size:n.point.size},placement:"top"})),n=>{n.pointerEvents=1})})}updateLabelNodes(t){return F(this,null,function*(){const{label:e}=this.properties;t.labelSelection.each((i,s)=>{var n,a,o,r;i.text=s.label.text,i.fill=e.color,i.x=(a=(n=s.point)==null?void 0:n.x)!=null?a:0,i.y=(r=(o=s.point)==null?void 0:o.y)!=null?r:0,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return Hn;const{xKey:s,yKey:n,labelKey:a,xName:o,yName:r,labelName:l,title:c=r,marker:h,tooltip:u}=this.properties,{datum:d,xValue:p,yValue:g,label:f,itemId:m}=t,v=kt({fill:t.fill,strokeWidth:this.getStrokeWidth(h.strokeWidth)},h.getStyle()),{fill:y="gray"}=this.getMarkerStyle(h,{datum:t,highlighted:!1,xKey:s,yKey:n,labelKey:a},v),x=re(e.formatDatum(p)),b=re(i.formatDatum(g));let S=`<b>${re(o??s)}</b>: ${x}<br><b>${re(r??n)}</b>: ${b}`;return a&&(S=`<b>${re(l??a)}</b>: ${re(f.text)}<br>`+S),u.toTooltipHtml({title:c,content:S,backgroundColor:y},B({datum:d,itemId:m,xKey:s,xName:o,yKey:n,yName:r,labelKey:a,labelName:l,title:c,color:y,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,o;const{yKey:r,yName:l,title:c,marker:h,visible:u}=this.properties,{fill:d,stroke:p,fillOpacity:g,strokeOpacity:f,strokeWidth:m}=h;return!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category"?[]:[{legendType:"category",id:this.id,itemId:r,seriesId:this.id,enabled:u,label:{text:(i=c??l)!=null?i:r},symbols:[{marker:{shape:h.shape,fill:(n=(s=h.fill)!=null?s:d)!=null?n:"rgba(0, 0, 0, 0)",stroke:(o=(a=h.stroke)!=null?a:p)!=null?o:"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:f??1,strokeWidth:m??0}}]}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:s}=t;x0(this,this.ctx.animationManager,e),Pt(this,"labels",this.ctx.animationManager,i),Pt(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ut}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(t){return sd(this,t)}},wf.className="ScatterSeries",wf.type="scatter"}}),dL,IV=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesModule.ts"(){"use strict";al(),Zn(),fe(),DV(),dL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:wf,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:ge,color:Ke}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Uc}}}),U0,pL=L({"packages/ag-charts-community/src/scene/sectorBox.ts"(){"use strict";Iv(),U0=class bk{constructor(e,i,s,n){this.startAngle=e,this.endAngle=i,this.innerRadius=s,this.outerRadius=n}clone(){const{startAngle:e,endAngle:i,innerRadius:s,outerRadius:n}=this;return new bk(e,i,s,n)}[Qh](e,i){return new bk(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}}}});function H0({startAngle:t,endAngle:e,innerRadius:i,outerRadius:s}){let n=1/0,a=1/0,o=-1/0,r=-1/0;const l=(c,h)=>{n=Math.min(c,n),a=Math.min(h,a),o=Math.max(c,o),r=Math.max(h,r)};return l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(s*Math.cos(t),s*Math.sin(t)),l(s*Math.cos(e),s*Math.sin(e)),_o(0,t,e)&&l(s,0),_o(Math.PI*.5,t,e)&&l(0,s),_o(Math.PI,t,e)&&l(-s,0),_o(Math.PI*1.5,t,e)&&l(0,-s),new ot(n,a,o-n,r-a)}function Pf(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const o=ku(i.startAngle),r=ku(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function gL(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=e,o={x:a*Math.cos(i),y:a*Math.sin(i)},r={x:a*Math.cos(s),y:a*Math.sin(s)},l=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=n===0?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Dc(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||Dc(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,c.x,c.y)||i2(0,0,a,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function fL(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return gL({start:i,end:s},e)||gL({start:n,end:a},e)}function mL(t,e,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*s)/(t+1*s))-e<0)return 1;let a=0,o=1;for(let r=0;r<8;r+=1){const l=(a+o)/2;Math.asin(Math.abs(l*i)/(t+l*i))+Math.asin(Math.abs(l*s)/(t+l*s))-e<0?a=l:o=l}return a}function Ho(t,e){return og(t,e)<yL?e:oe(t-e)+e}function Bf(t,e,i=0){const n=Math.abs(e-t)>=2*Math.PI?2*Math.PI:oe(e-t);return t=Ho(t,i),e=t+n,{startAngle:t,endAngle:e}}function Ff(t,e,i,s,n,a){const o=Math.sin(a),r=Math.cos(a),l=nt(t,2)+nt(e,2)-nt(i,2);let c=NaN,h=NaN,u=NaN,d=NaN;if(r>.5){const x=o/r,b=1+nt(x,2),S=-2*(t+e*x),k=nt(S,2)-4*b*l;if(k<0)return;const D=(-S+Math.sqrt(k))/(2*b),T=(-S-Math.sqrt(k))/(2*b);c=D,h=D*x,u=T,d=T*x}else{const x=r/o,b=1+nt(x,2),S=-2*(e+t*x),k=nt(S,2)-4*b*l;if(k<0)return;const D=(-S+Math.sqrt(k))/(2*b),T=(-S-Math.sqrt(k))/(2*b);c=D*x,h=D,u=T*x,d=T}const p=r,g=o,f=c*p+h*g,m=u*p+d*g,v=f>0?Ho(Math.atan2(h-e,c-t),s):NaN,y=m>0?Ho(Math.atan2(d-e,u-t),s):NaN;if(v>=s&&v<=n)return v;if(y>=s&&y<=n)return y}function zf(t,e,i,s,n,a){const o=Math.hypot(t,e),r=(nt(o,2)-nt(i,2)+nt(a,2))/(2*o),l=o-r,c=Math.atan2(e,t),h=Math.acos(-l/i),u=Ho(c+h,s),d=Ho(c-h,s);if(u>=s&&u<=n)return u;if(d>=s&&d<=n)return d}var yL,pd=L({"packages/ag-charts-community/src/scene/util/sector.ts"(){"use strict";zi(),Mt(),s2(),yL=1e-6}}),Gf,Je,W0=L({"packages/ag-charts-community/src/scene/shape/sector.ts"(){"use strict";Mt(),pL(),pd(),un(),Gf=class{constructor(t,e,i,s,n){this.cx=t,this.cy=e,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){t==null||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){t==null||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Je=class extends ki{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return H0(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:t}=this;return{innerRadius:Math.max(Math.min(this.innerRadius,this.outerRadius)+t,0),outerRadius:Math.max(Math.max(this.innerRadius,this.outerRadius)-t,0)}}normalizedClipSector(){const{clipSector:t}=this;if(t==null)return;const{startAngle:e,endAngle:i}=Bf(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),a=Bf(t.startAngle,t.endAngle,e);return new U0(Math.max(e,a.startAngle),Math.min(i,a.endAngle),Math.max(s,t.innerRadius),Math.min(n,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,s,n,a,o,r){if(t<=0)return;const{startAngle:l,endAngle:c}=Bf(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:u}=this.normalizedRadii(),d=this.normalizedClipSector();if(r&&h<=0)return;const p=this.getAngleOffset(h),g=this.getAngleOffset(u),f=r?this.getAngleOffset(h+t):this.getAngleOffset(u-t),m=o?l+f+e:c-f-e,v=r?h+t:u-t,y=v*Math.cos(m),x=v*Math.sin(m);if(d!=null&&(!o&&!(m>=l-1e-6&&m<=d.endAngle-1e-6)||o&&!(m>=d.startAngle+1e-6&&m<=c-1e-6)||r&&!(v>=d.innerRadius-1e-6)||!r&&!(v<=d.outerRadius+1e-6)))return;const b=new Gf(y,x,t,i,s);if(d!=null){r?(b.clipStart(Ff(y,x,t,i,s,d.endAngle-p)),b.clipEnd(Ff(y,x,t,i,s,d.startAngle+p))):(b.clipStart(Ff(y,x,t,i,s,d.startAngle+g)),b.clipEnd(Ff(y,x,t,i,s,d.endAngle-g)));let I,N;if(o?(I=zf(y,x,t,i,s,d.innerRadius),N=zf(y,x,t,i,s,d.outerRadius)):(I=zf(y,x,t,i,s,d.outerRadius),N=zf(y,x,t,i,s,d.innerRadius)),b.clipStart(I),b.clipEnd(N),I!=null){const{x:C,y:E}=b.pointAt(I),O=Ho(Math.atan2(E,C),l);o?a?.clipStart(O):n.clipEnd(O)}if(N!=null){const{x:C,y:E}=b.pointAt(N),O=Ho(Math.atan2(E,C),l);o?n.clipStart(O):a?.clipEnd(O)}}if(d!=null){const{x:I,y:N}=b.pointAt((b.a0+b.a1)/2);if(!Pf(I,N,d))return}const{x:S,y:k}=b.pointAt(o===r?b.a0:b.a1),D=Ho(Math.atan2(k,S),l),T=r?a:n;return o?T?.clipStart(D):T?.clipEnd(D),b}updatePath(){var t,e,i,s,n;const{path:o,centerX:r,centerY:l,concentricEdgeInset:c,radialEdgeInset:h}=this;let{startOuterCornerRadius:u,endOuterCornerRadius:d,startInnerCornerRadius:p,endInnerCornerRadius:g}=this;const{startAngle:f,endAngle:m}=Bf(this.startAngle,this.endAngle),{innerRadius:v,outerRadius:y}=this.normalizedRadii(),x=this.normalizedClipSector(),b=m-f,S=b>=2*Math.PI-1e-6;if(o.clear(),this.innerRadius===0&&this.outerRadius===0||((t=x?.startAngle)!=null?t:f)===((e=x?.endAngle)!=null?e:m))return;if(S&&this.clipSector==null&&u===0&&d===0&&p===0&&g===0){o.moveTo(r+y*Math.cos(f),l+y*Math.sin(f)),o.arc(r,l,y,f,m),v>c&&(o.moveTo(r+v*Math.cos(m),l+v*Math.sin(m)),o.arc(r,l,v,m,f,!0)),o.closePath();return}const k=this.getAngleOffset(v),D=this.getAngleOffset(y);if(b<2*D)return;const I=((i=x?.innerRadius)!=null?i:v)>c,N=v<c||b<2*k,C=y-v,E=Math.max(u,p,d,g),O=E>0?Math.min(C/E,1):1;u*=O,d*=O,p*=O,g*=O;const P=mL(y,b-2*D,-u,-d);if(u*=P,d*=P,!N&&I){const lt=mL(v,b-2*k,p,g);p*=lt,g*=lt}else p=0,g=0;const w=Math.max(u+p,d+g),R=w>0?Math.min(C/w,1):1;u*=R,d*=R,p*=R,g*=R;let G=0,z=0;const U=u/(y-u),V=d/(y-d);if(U>=0&&U<1-1e-6)G=Math.asin(U);else{G=b/2;const lt=y/(1/Math.sin(G)+1);u=Math.min(lt,u)}if(V>=0&&V<1-1e-6)z=Math.asin(V);else{z=b/2;const lt=y/(1/Math.sin(z)+1);d=Math.min(lt,d)}const X=Math.asin(p/(v+p)),j=Math.asin(g/(v+g)),tt=(s=x?.outerRadius)!=null?s:y,ct=this.getAngleOffset(tt),st=new Gf(0,0,tt,f+ct,m-ct),$=(n=x?.innerRadius)!=null?n:v,Q=this.getAngleOffset($),J=I?new Gf(0,0,$,f+Q,m-Q):void 0;x!=null&&(st.clipStart(x.startAngle),st.clipEnd(x.endAngle),J?.clipStart(x.startAngle),J?.clipEnd(x.endAngle));const it=this.arc(u,G,f-Math.PI*.5,f+G,st,J,!0,!1),ht=this.arc(d,z,m-z,m+Math.PI*.5,st,J,!1,!1),vt=this.arc(g,j,m+Math.PI*.5,m+Math.PI-j,st,J,!1,!0),dt=this.arc(p,X,f+Math.PI+X,f+Math.PI*1.5,st,J,!0,!0);if(N){const lt=b<Math.PI*.5?h*(1+Math.cos(b))/Math.sin(b):NaN;let bt;lt>0&&lt<y?bt=Math.max(Math.hypot(h,lt),v):bt=v;const Dt=f+b*.5;o.moveTo(r+bt*Math.cos(Dt),l+bt*Math.sin(Dt))}else if(!(dt?.isValid()===!0||J?.isValid()===!0)){const lt=f+b/2,bt=v*Math.cos(lt),Dt=v*Math.sin(lt);o.moveTo(r+bt,l+Dt)}if(it?.isValid()===!0){const{cx:lt,cy:bt,r:Dt,a0:$t,a1:It}=it;o.arc(r+lt,l+bt,Dt,$t,It)}if(st.isValid()){const{r:lt,a0:bt,a1:Dt}=st;o.arc(r,l,lt,bt,Dt)}if(ht?.isValid()===!0){const{cx:lt,cy:bt,r:Dt,a0:$t,a1:It}=ht;o.arc(r+lt,l+bt,Dt,$t,It)}if(!N){if(vt?.isValid()===!0){const{cx:lt,cy:bt,r:Dt,a0:$t,a1:It}=vt;o.arc(r+lt,l+bt,Dt,$t,It)}if(J?.isValid()===!0){const{r:lt,a0:bt,a1:Dt}=J;o.arc(r,l,lt,Dt,bt,!0)}if(dt?.isValid()===!0){const{cx:lt,cy:bt,r:Dt,a0:$t,a1:It}=dt;o.arc(r+lt,l+bt,Dt,$t,It)}}o.closePath()}isPointInPath(t,e){var i;const s=this.transformPoint(t,e),{startAngle:n,endAngle:a,innerRadius:o,outerRadius:r}=(i=this.clipSector)!=null?i:this;return Pf(s.x-this.centerX,s.y-this.centerY,{startAngle:n,endAngle:a,innerRadius:Math.min(o,r),outerRadius:Math.max(o,r)})}},Je.className="Sector",_([mt()],Je.prototype,"centerX",2),_([mt()],Je.prototype,"centerY",2),_([mt()],Je.prototype,"innerRadius",2),_([mt()],Je.prototype,"outerRadius",2),_([mt()],Je.prototype,"startAngle",2),_([mt()],Je.prototype,"endAngle",2),_([mt()],Je.prototype,"clipSector",2),_([mt()],Je.prototype,"concentricEdgeInset",2),_([mt()],Je.prototype,"radialEdgeInset",2),_([mt()],Je.prototype,"startOuterCornerRadius",2),_([mt()],Je.prototype,"endOuterCornerRadius",2),_([mt()],Je.prototype,"startInnerCornerRadius",2),_([mt()],Je.prototype,"endInnerCornerRadius",2)}}),os,$a,gd=L({"packages/ag-charts-community/src/chart/themes/defaultColors.ts"(){"use strict";os={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},$a={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"}}}),Y0,Vf,Uf,cl,Hf,fd,At,AV=L({"packages/ag-charts-community/src/chart/series/polar/donutSeriesProperties.ts"(){"use strict";jc(),yt(),ne(),gt(),zr(),Es(),gd(),Hu(),Xa(),Y0=class extends qt{constructor(){super(...arguments),this.showInLegend=!1}},_([A(pt)],Y0.prototype,"showInLegend",2),Vf=class extends Oe{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}},_([A(et)],Vf.prototype,"text",2),_([A(jt)],Vf.prototype,"spacing",2),Uf=class extends xt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}},_([A(Et)],Uf.prototype,"fill",2),_([A(Rt)],Uf.prototype,"fillOpacity",2),cl=class extends Oe{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},_([A(q)],cl.prototype,"offset",2),_([A(Ma)],cl.prototype,"minAngle",2),_([A(q)],cl.prototype,"minSpacing",2),_([A(q)],cl.prototype,"maxCollisionOffset",2),_([A(pt)],cl.prototype,"avoidCollisions",2),Hf=class extends Oe{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},_([A(jt)],Hf.prototype,"positionOffset",2),_([A(Rt)],Hf.prototype,"positionRatio",2),fd=class extends xt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},_([A(ms,{optional:!0})],fd.prototype,"colors",2),_([A(q)],fd.prototype,"length",2),_([A(q)],fd.prototype,"strokeWidth",2),At=class extends Fs{constructor(){super(...arguments),this.fills=Object.values(os),this.strokes=Object.values($a),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.innerLabels=new ou(Vf),this.title=new Y0,this.innerCircle=new Uf,this.shadow=new zs,this.calloutLabel=new cl,this.sectorLabel=new Hf,this.calloutLine=new fd,this.tooltip=new Ai}isValid(){const t=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(Z.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}},_([A(et)],At.prototype,"angleKey",2),_([A(et,{optional:!0})],At.prototype,"angleName",2),_([A(et,{optional:!0})],At.prototype,"radiusKey",2),_([A(et,{optional:!0})],At.prototype,"radiusName",2),_([A(q,{optional:!0})],At.prototype,"radiusMin",2),_([A(q,{optional:!0})],At.prototype,"radiusMax",2),_([A(et,{optional:!0})],At.prototype,"calloutLabelKey",2),_([A(et,{optional:!0})],At.prototype,"calloutLabelName",2),_([A(et,{optional:!0})],At.prototype,"sectorLabelKey",2),_([A(et,{optional:!0})],At.prototype,"sectorLabelName",2),_([A(et,{optional:!0})],At.prototype,"legendItemKey",2),_([A(ms)],At.prototype,"fills",2),_([A(ms)],At.prototype,"strokes",2),_([A(Rt)],At.prototype,"fillOpacity",2),_([A(Rt)],At.prototype,"strokeOpacity",2),_([A(Gn)],At.prototype,"lineDash",2),_([A(q)],At.prototype,"lineDashOffset",2),_([A(q)],At.prototype,"cornerRadius",2),_([A(Bi,{optional:!0})],At.prototype,"itemStyler",2),_([A(Ma)],At.prototype,"rotation",2),_([A(jt)],At.prototype,"outerRadiusOffset",2),_([A(Rt)],At.prototype,"outerRadiusRatio",2),_([A(jt,{optional:!0})],At.prototype,"innerRadiusOffset",2),_([A(Rt,{optional:!0})],At.prototype,"innerRadiusRatio",2),_([A(q)],At.prototype,"strokeWidth",2),_([A(jt)],At.prototype,"sectorSpacing",2),_([A(qv)],At.prototype,"innerLabels",2),_([A(rt)],At.prototype,"title",2),_([A(rt)],At.prototype,"innerCircle",2),_([A(rt)],At.prototype,"shadow",2),_([A(rt)],At.prototype,"calloutLabel",2),_([A(rt)],At.prototype,"sectorLabel",2),_([A(rt)],At.prototype,"calloutLine",2),_([A(rt)],At.prototype,"tooltip",2)}});function hl(t,e,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],o=Math.PI/-2+Fi(e),r=t?"initial":"update",l=({radius:g})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*g}),c=({radius:g})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*g});return{nodes:{toFn:(g,f,m,{prevLive:v})=>{var y,x;let{startAngle:b,endAngle:S,innerRadius:k,outerRadius:D}=f;const{stroke:T,fill:I}=f.sectorFormat;if(m==="removed"&&v?(b=(y=v.datum)==null?void 0:y.endAngle,S=(x=v.datum)==null?void 0:x.endAngle):m==="removed"&&!v&&(b=o,S=o),m==="removed"){const N=l(f);k=N.innerRadius,D=N.outerRadius}return{startAngle:b,endAngle:S,outerRadius:D,innerRadius:k,stroke:T,fill:I}},fromFn:(g,f,m,{prevFromProps:v})=>{var y,x,b,S,k,D;let{startAngle:T,endAngle:I,innerRadius:N,outerRadius:C}=g,{fill:E,stroke:O}=f.sectorFormat;if(m==="unknown"||m==="added"&&!v?(T=o,I=o,N=f.innerRadius,C=f.outerRadius):m==="added"&&v&&(T=(y=v.endAngle)!=null?y:o,I=(x=v.endAngle)!=null?x:o,N=(b=v.innerRadius)!=null?b:f.innerRadius,C=(S=v.outerRadius)!=null?S:f.outerRadius),m==="added"&&!t){const P=c(f);N=P.innerRadius,C=P.outerRadius}return m==="updated"&&(E=(k=g.fill)!=null?k:E,O=(D=g.stroke)!=null?D:O),{startAngle:T,endAngle:I,innerRadius:N,outerRadius:C,fill:E,stroke:O,phase:r}}},innerCircle:{fromFn:(g,f)=>{var m,v,y;return{size:(y=(v=(m=g.previousDatum)==null?void 0:m.radius)!=null?v:g.size)!=null?y:0,phase:r}},toFn:(g,f)=>{var m;return{size:(m=f.radius)!=null?m:0}}}}}function K0(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function j0(t,e){const i=e.y-t.centerY,s=e.x-t.centerX,n=Math.atan2(i,s),a=t.getItemNodes();for(const o of a)if(o.datum.missing!==!0&&_o(n,o.startAngle,o.endAngle)){const r=Math.sqrt(s*s+i*i);let l=0;return r<o.innerRadius?l=o.innerRadius-r:r>o.outerRadius&&(l=r-o.outerRadius),{datum:o.datum,distance:l}}}function LV(t,e){const i=t.getNodeData();if(i!==void 0)return vL(i[e.datumIndex],t.centerX,t.centerY)}function vL(t,e,i){return H0(t).translate(e,i)}var X0=L({"packages/ag-charts-community/src/chart/series/polar/pieUtil.ts"(){"use strict";Mt(),pd(),zi()}}),md,Wf=L({"packages/ag-charts-community/src/chart/series/polar/polarSeries.ts"(){"use strict";Do(),be(),ae(),Io(),un(),hi(),Lu(),de(),Wb(),Di(),md=class extends ef{constructor(t){var e=t,{useLabelLayer:i=!1,pickModes:s=[3,0],canHaveAxes:n=!1,animationResetFns:a}=e,o=se(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(K(B({},o),{useLabelLayer:i,pickModes:s,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new ut),this.nodeData=[],this.itemSelection=pe.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=pe.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=pe.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=pe.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new bc("empty",{empty:{update:{target:"ready",action:r=>this.animateEmptyUpdateReady(r)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:r=>this.animateReadyHighlight(r),highlightMarkers:r=>this.animateReadyHighlightMarkers(r),resize:r=>this.animateReadyResize(r),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:r=>this.animateWaitingUpdateReady(r)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:r=>this.animateClearingUpdateEmpty(r)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return this.itemGroup.children}getNodeData(){return this.nodeData}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}labelFactory(){const t=new wt;return t.pointerEvents=1,t}getInnerRadius(){return 0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=(t=this.animationResetFns)!=null?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&Ce([this.itemSelection,this.highlightSelection],e),i&&Ce([this.labelSelection,this.highlightLabelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i,label:s}=(e=this.animationResetFns)!=null?e:{};i&&Ce([this.highlightSelection],i),s&&Ce([this.highlightLabelSelection],s)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}computeFocusBounds(t){var e;const i=(e=this.getNodeData())==null?void 0:e[t.datumIndex];if(i!==void 0)return this.itemSelection.select(s=>s instanceof ki&&s.datum===i)[0]}}}}),xL,Yf,TV=L({"packages/ag-charts-community/src/chart/series/polar/donutSeries.ts"(){"use strict";li(),Gc(),Mt(),be(),ae(),Io(),xc(),W0(),hi(),pd(),zi(),bi(),yt(),_t(),ue(),Ya(),Ct(),de(),Yn(),Ra(),ts(),Vu(),Hi(),Di(),Di(),ja(),AV(),X0(),Wf(),xL=class extends wc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Yf=class extends md{constructor(t){super({moduleCtx:t,pickModes:[3,0],useLabelLayer:!0,animationResetFns:{item:K0,label:Ka}}),this.properties=new At,this.previousRadiusScale=new pn,this.radiusScale=new pn,this.calloutLabelGroup=this.contentGroup.appendChild(new ut({name:"pieCalloutLabels"})),this.calloutLabelSelection=new pe(this.calloutLabelGroup,ut),this.backgroundGroup=this.rootGroup.appendChild(new ut({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ut({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new wa),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new wa),this.innerLabelsGroup=this.contentGroup.appendChild(new ut({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new ut({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=pe.select(this.innerLabelsGroup,wt),this.innerCircleSelection=pe.select(this.innerCircleGroup,wa),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=xL,this.angleScale=new pn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2)}addChartEventListeners(){var t;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(t=>t))}nodeFactory(){return new Je}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}processData(t){return F(this,null,function*(){var e,i,s,n,a;if(this.data==null||!this.properties.isValid())return;let{data:o}=this;const{visible:r,seriesItemEnabled:l}=this,{angleKey:c,radiusKey:h,calloutLabelKey:u,sectorLabelKey:d,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),f=[],m=[];p?f.push(di(p,"band",{id:"legendItemKey"})):u?f.push(di(u,"band",{id:"calloutLabelKey"})):d&&f.push(di(d,"band",{id:"sectorLabelKey"}));const v=this.radiusScale.type,y=this.radiusScale.type;h&&m.push(wb(h,{id:"radiusValue",min:(e=this.properties.radiusMin)!=null?e:0,max:this.properties.radiusMax}),Vt(h,v,{id:"radiusRaw"}),Gu({id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),u&&m.push(Vt(u,"band",{id:"calloutLabelValue"})),d&&m.push(Vt(d,"band",{id:"sectorLabelValue"})),p&&m.push(Vt(p,"band",{id:"legendItemValue"})),g&&this.processedData&&f.length>0&&m.push(qr(this.processedData)),m.push(Rc()),o=o.map((x,b)=>r&&l[b]?x:K(B({},x),{[c]:0})),yield this.requestDataModel(t,o,{props:[...f,Pb(c,y,{id:"angleValue",onlyPositive:!0}),Vt(c,y,{id:"angleRaw"}),Gu({id:"angleValue"},[0,1],0,0),...m]});for(const x of(a=(n=(s=this.processedData)==null?void 0:s.defs)==null?void 0:n.values)!=null?a:[]){const{id:b,missing:S,property:k}=x,D=gb(this,S);b!=="angleRaw"&&D>0&&Z.warnOnce(`no value was found for the key '${String(k)}' on ${D} data element${D>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return F(this,null,function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){const e=t.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,s=this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,n=this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,a=this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:e,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:n,legendItemIdx:a}}createNodeData(){return F(this,null,function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!e||!i||e.type!=="ungrouped")return;const{angleIdx:o,radiusIdx:r,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:h}=this.getProcessedDataIndexes(i);let u=0,d=0;const p=e.data.map((g,f)=>{var m;const{datum:v,values:y}=g,x=y[o],b=s.convert(u)+Fi(n);u=x,d+=x;const S=s.convert(u)+Fi(n),k=Math.abs(S-b),D=b+k/2,T=y[o+1],I=r>=0&&(m=y[r])!=null?m:1,N=r>=0?y[r+1]:void 0,C=h>=0?y[h]:void 0,E=this.getLabels(v,D,k,!0,y[l],y[c],C),O=this.getSectorFormat(v,f,!1);return B({itemId:f,series:this,datum:v,index:f,angleValue:T,midAngle:D,midCos:Math.cos(D),midSin:Math.sin(D),startAngle:b,endAngle:S,sectorFormat:O,radiusValue:N,radius:I,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(I),0),legendItemValue:C,enabled:this.seriesItemEnabled[f]},E)});return this.zerosumOuterRing.visible=d===0,this.zerosumInnerRing.visible=d===0&&a!=null&&a!==1&&a>0,{itemId:t,nodeData:p,labelData:p}})}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>Fi(r.minAngle)&&(p.calloutLabel=K(B({},this.getTextAlignment(e)),{text:this.getLabelText(r,K(B({},d),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,K(B({},d),{value:a}))}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=ku(t),s=-.75*Math.PI,n=i-s,a=Math.floor(n/(Math.PI/2)),o=Pp(a,e.length);return e[o]}getSectorFormat(t,e,i){var s,n,a,o,r,l,c,h;const{callbackCache:u,highlightManager:d}=this.ctx,{angleKey:p,radiusKey:g,calloutLabelKey:f,sectorLabelKey:m,legendItemKey:v,fills:y,strokes:x,itemStyler:b}=this.properties,S=d.getActiveHighlight(),k=i&&S?.series===this&&e===S.itemId,D=x[e%x.length],{fill:T,fillOpacity:I,stroke:N,strokeWidth:C,strokeOpacity:E,lineDash:O,lineDashOffset:P,cornerRadius:w}=kt(k&&this.properties.highlightStyle.item,{fill:y.length>0?y[e%y.length]:void 0,stroke:D,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let R;return b&&(R=u.call(b,{datum:t,angleKey:p,radiusKey:g,calloutLabelKey:f,sectorLabelKey:m,legendItemKey:v,fill:T,fillOpacity:I,stroke:N,strokeWidth:C,strokeOpacity:E,lineDash:O,lineDashOffset:P,cornerRadius:w,highlighted:k,seriesId:this.id})),{fill:(s=R?.fill)!=null?s:T,fillOpacity:(n=R?.fillOpacity)!=null?n:I,stroke:(a=R?.stroke)!=null?a:N,strokeWidth:(o=R?.strokeWidth)!=null?o:C,strokeOpacity:(r=R?.strokeOpacity)!=null?r:E,lineDash:(l=R?.lineDash)!=null?l:O,lineDashOffset:(c=R?.lineDashOffset)!=null?c:P,cornerRadius:(h=R?.cornerRadius)!=null?h:w}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:n}=s,a=se(s,["radius"]);return K(B({},a),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const n=2+((e=(t=this.properties.title)==null?void 0:t.spacing)!=null?e:0),a=Math.max(0,-i);return-i-n-a}update(t){return F(this,arguments,function*({seriesRect:e}){const{title:i}=this.properties,s={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=gs(this.nodeDataDependencies,s)!=null;if(n&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const a=this.getTitleTranslationY(),o=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(o,0,a),i.node.translationY=isFinite(a)?a:0}for(const a of[this.zerosumInnerRing,this.zerosumOuterRing])a.fillOpacity=0,a.stroke=this.properties.calloutLabel.color,a.strokeWidth=1,a.strokeOpacity=1;this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((t=this.labelGroup)==null||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(e=this.labelGroup)==null||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return F(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return F(this,null,function*(){const{itemSelection:t,highlightSelection:e,highlightLabelSelection:i,calloutLabelSelection:s,labelSelection:n,innerLabelsSelection:a}=this,o=this.ctx.highlightManager.getActiveHighlight(),r=o?.series===this?this.nodeData.filter(c=>c.itemId===o?.itemId):[],l=(c,h)=>{let u=this.nodeData;h&&(u=u.map(d=>K(B({},d),{sectorFormat:B({},d.sectorFormat)}))),c.update(u,void 0,d=>this.getDatumId(d)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(t,!1),l(e,!0),s.update(this.nodeData,c=>{const h=new He;h.tag=0,h.pointerEvents=1,c.appendChild(h);const u=new wt;u.tag=1,u.pointerEvents=1,c.appendChild(u)}),n.update(this.nodeData),i.update(r),a.update(this.properties.innerLabels,c=>{c.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius()),a=1;e=Math.ceil(n*2+a)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return F(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:a})=>{var o,r;n.setProperties({fill:(o=this.properties.innerCircle)==null?void 0:o.fill,opacity:(r=this.properties.innerCircle)==null?void 0:r.fillOpacity,size:a})});const s=(n,a,o,r)=>{const l=this.getSectorFormat(a.datum,a.itemId,r);a.sectorFormat.fill=l.fill,a.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(n.startAngle=a.startAngle,n.endAngle=a.endAngle,n.innerRadius=a.innerRadius,n.outerRadius=a.outerRadius),(r||c)&&(n.fill=l.fill,n.stroke=l.stroke),n.strokeWidth=l.strokeWidth,n.fillOpacity=l.fillOpacity,n.strokeOpacity=l.strokeOpacity,n.lineDash=l.lineDash,n.lineDashOffset=l.lineDashOffset,n.cornerRadius=l.cornerRadius,n.fillShadow=this.properties.shadow;const h=Math.max((this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2,0);n.inset=h,n.lineJoin=this.properties.sectorSpacing>=0||h>0?"miter":"round"};this.itemSelection.each((n,a,o)=>s(n,a,o,!1)),this.highlightSelection.each((n,a,o)=>{const r=e?.series===this&&n.datum.itemId===e.itemId;s(n,a,o,!0),n.visible=r}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=(t=e.colors)!=null?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,r)=>{var l;const c=o.datum,{calloutLabel:h,outerRadius:u}=c;if(h?.text&&!h.hidden&&u!==0){o.visible=!0,o.strokeWidth=s,o.stroke=n[r%n.length],o.fill=void 0;const d=c.midCos*u,p=c.midSin*u;let g=c.midCos*(u+i),f=c.midSin*(u+i);if(((l=h.collisionTextAlign)!=null?l:h.collisionOffsetY!==0)&&h.box!=null){const v=h.box;let y=g,x=f;g<v.x?y=v.x:g>v.x+v.width&&(y=v.x+v.width),f<v.y?x=v.y:f>v.y+v.height&&(x=v.y+v.height);const b=y-g,S=x-f,k=Math.sqrt(Math.pow(b,2)+Math.pow(S,2)),D=k-a;D>0&&(g=g+b*D/k,f=f+S*D/k)}o.x1=d,o.y1=p,o.x2=g,o.y2=f}else o.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>n&&(l=(n-e.x)/e.width);const c=e.y+r<a||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=nt(s,2);return n.some(o=>nt(o.x,2)+nt(o.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=y=>!y.calloutLabel||y.outerRadius===0,r=this.nodeData,l=this.nodeData.filter(y=>!o(y));if(l.forEach(y=>{const x=y.calloutLabel;x!=null&&(x.hidden=!1,x.collisionTextAlign=void 0,x.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,x)=>y.midSin-x.midSin),h=l.filter(y=>y.midCos>=0).sort((y,x)=>y.midSin-x.midSin),u=l.filter(y=>{var x;return y.midSin<0&&((x=y.calloutLabel)==null?void 0:x.textAlign)==="center"}).sort((y,x)=>y.midCos-x.midCos),d=l.filter(y=>{var x;return y.midSin>=0&&((x=y.calloutLabel)==null?void 0:x.textAlign)==="center"}).sort((y,x)=>y.midCos-x.midCos),p=new wt,g=y=>{var x;const b=y.calloutLabel;if(b==null)return new ot(0,0,0,0);const S=y.outerRadius+i.length+s,k=y.midCos*S,D=y.midSin*S+b.collisionOffsetY;return p.text=b.text,p.x=k,p.y=D,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(x=b.collisionTextAlign)!=null?x:b.textAlign,textBaseline:b.textBaseline}),p.computeBBox()},f=(y,x,b)=>{const S=g(y).grow(n/2),k=g(x).grow(n/2);if(S.x<k.x+k.width&&S.x+S.width>k.x&&(b==="to-top"?S.y<k.y+k.height:S.y+S.height>k.y)){const T=b==="to-top"?S.y-k.y-k.height:S.y+S.height-k.y;x.calloutLabel.collisionOffsetY=T}},m=y=>{const x=y.slice().sort((S,k)=>Math.abs(S.midSin)-Math.abs(k.midSin))[0],b=y.indexOf(x);for(let S=b-1;S>=0;S--){const k=y[S+1],D=y[S];f(k,D,"to-top")}for(let S=b+1;S<y.length;S++){const k=y[S-1],D=y[S];f(k,D,"to-bottom")}},v=y=>{const x=l.some(I=>I.calloutLabel.collisionOffsetY!==0),b=y.map(I=>g(I)),S=b.map(I=>I.clone().grow(n/2));let k=!1;for(let I=0;I<S.length&&!k;I++){const N=S[I];for(let C=I+1;C<y.length;C++){const E=S[C];if(N.collidesBBox(E)){k=!0;break}}}const D=r.map(I=>{const{startAngle:N,endAngle:C,outerRadius:E}=I;return{startAngle:N,endAngle:C,innerRadius:a,outerRadius:E}}),T=b.some(I=>D.some(N=>fL(I,N)));!k&&!x&&!T||y.filter(I=>I.calloutLabel.textAlign==="center").forEach(I=>{const N=I.calloutLabel;I.midCos<0?N.collisionTextAlign="right":I.midCos>0?N.collisionTextAlign="left":N.collisionTextAlign="center"})};m(c),m(h),v(u),v(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new wt;this.calloutLabelSelection.selectByTag(1).forEach(l=>{var c;const{datum:h}=l,u=h.calloutLabel,d=e.convert(h.radius),p=Math.max(0,d);if(!u?.text||p===0||u.hidden){l.visible=!1;return}const g=p+n+a,f=h.midCos*g,m=h.midSin*g+u.collisionOffsetY,v={textAlign:(c=u.collisionTextAlign)!=null?c:u.textAlign,textBaseline:u.textBaseline};r.text=u.text,r.x=f,r.y=m,r.setFont(this.properties.calloutLabel),r.setAlign(v);const y=r.computeBBox();let x=u.text,b=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:k}=this.getLabelOverflow(u.text,y,t);x=u.text.length===S?u.text:`${u.text.substring(0,S)}\u2026`,b=!k}l.text=x,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v),l.fill=o,l.visible=b})}computeLabelsBBox(t,e){return F(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new wt;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.computeBBox(),l.push(h))}return this.nodeData.forEach(d=>{var p;const g=d.calloutLabel;if(!g||d.outerRadius===0)return null;const f=d.outerRadius+n+a,m=d.midCos*f,v=d.midSin*f+g.collisionOffsetY;c.text=g.text,c.x=m,c.y=v,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=g.collisionTextAlign)!=null?p:g.textAlign,textBaseline:g.textBaseline});const y=c.computeBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>o){g.hidden=!0;return}if(h){const x=e.y-this.centerY,b=new ot(h.x-r,x,h.width+2*r,h.y+h.height+r-x);if(y.collidesBBox(b)){g.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:x,hasVerticalOverflow:b,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(g.text,y,e),k=g.text.length>2&&x<2;if(b||k||S){g.hidden=!0;return}}g.hidden=!1,l.push(y)}),l.length===0?null:ot.merge(l)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=(h,u)=>{const{sectorLabel:d,outerRadius:p}=u;let g=!1;if(d&&p!==0){const f=e*(1-r)+p*r+o;h.fill=l,h.fontStyle=s,h.fontWeight=n,h.fontSize=i,h.fontFamily=a,h.text=d.text,h.x=u.midCos*f,h.y=u.midSin*f,h.textAlign="center",h.textBaseline="middle";const m=h.computeBBox(),v=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:y,endAngle:x}=u,b={startAngle:y,endAngle:x,innerRadius:e,outerRadius:p};v.every(([S,k])=>Pf(S,k,b))&&(g=!0)}h.visible=g};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,color:m}=u;h.fontStyle=d,h.fontWeight=p,h.fontSize=g,h.fontFamily=f,h.text=u.text,h.x=0,h.y=0,h.fill=m,h.textAlign="center",h.textBaseline="alphabetic",t.push(h.computeBBox()),e.push(u.spacing)});const i=h=>h===0?0:e[h],s=h=>h===e.length-1?0:e[h],n=t.reduce((h,u,d)=>h+u.height+i(d)+s(d),0),a=Math.max(...t.map(h=>h.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let h=0,u=-n/2;h<t.length;h++){const p=t[h].height+u+i(h);c.push(p),u=p+s(h)}this.innerLabelsSelection.each((h,u,d)=>{h.y=c[d],h.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;if(n&&r!==void 0)return r.text;if(i&&i!==e&&o?.text!==void 0)return o.text;if(s&&s!==e&&a?.text!==void 0)return a.text}pickNodeClosestDatum(t){return j0(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return Hn;const{datum:i,angleValue:s,sectorFormat:{fill:n},itemId:a}=t,o=re((e=this.properties.title)==null?void 0:e.text),r=Ot(s)?wp(s):String(s),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${r}`:r,backgroundColor:n},{datum:i,itemId:a,title:o,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,s,n,a;const{visible:o,processedData:r,dataModel:l}=this;if(!l||!r?.data.length||!this.properties.isValid()||t!=="category")return[];const{angleKey:c,calloutLabelKey:h,sectorLabelKey:u,legendItemKey:d}=this.properties;if(!d&&(!h||h===c)&&(!u||u===c))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(l),m=((e=this.properties.title)==null?void 0:e.showInLegend)&&this.properties.title.text,v=[];for(let y=0;y<r.data.length;y++){const{datum:x,values:b}=r.data[y],S=[];m&&S.push(m);const k=this.getLabels(x,2*Math.PI,2*Math.PI,!1,b[p],b[g],b[f]);if(d&&k.legendItem!==void 0?S.push(k.legendItem.text):h&&h!==c&&((i=k.calloutLabel)==null?void 0:i.text)!==void 0?S.push((s=k.calloutLabel)==null?void 0:s.text):u&&u!==c&&((n=k.sectorLabel)==null?void 0:n.text)!==void 0&&S.push((a=k.sectorLabel)==null?void 0:a.text),S.length===0)continue;const D=this.getSectorFormat(x,y,!1);v.push({legendType:"category",id:this.id,itemId:y,seriesId:this.id,enabled:o&&this.seriesItemEnabled[y],label:{text:S.join(" - ")},symbols:[{marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:d!=null?x[d]:void 0})}return v}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):n!=null&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeData[t]&&(this.nodeData[t].enabled=e),this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(i=this.processedData)==null||i.data.forEach(({values:n},a)=>{n[s]===t&&this.toggleSeriesItem(a,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=hl(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);xe(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),xe(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Pt(this,"callout",e,this.calloutLabelSelection),Pt(this,"sector",e,this.labelSelection),Pt(this,"highlight",e,this.highlightLabelSelection),Pt(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:c,previousRadiusScale:h}=this,{animationManager:u}=this.ctx,d=(t=l?.reduced)==null?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((e=d?.moved.size)!=null?e:0)===0,g=((i=l?.defs.keys.length)!=null?i:0)>0,f=(a=(n=(s=l?.reduced)==null?void 0:s.animationValidation)==null?void 0:n.uniqueKeys)!=null?a:!0;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=hl(!1,this.properties.rotation,c,h);xe(this.id,"nodes",u,[o,r],m.nodes,(v,y)=>this.getDatumId(y),d),xe(this.id,"innerCircle",u,[this.innerCircleSelection],m.innerCircle),Pt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Pt(this,"sector",this.ctx.animationManager,this.labelSelection),Pt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Pt(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=hl(!1,this.properties.rotation,i,s);xe(this.id,"nodes",n,[t,e],a.nodes),xe(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),zo(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zo(this,"sector",this.ctx.animationManager,this.labelSelection),zo(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),zo(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:o}=this.properties;if((s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(o)return t[o];if(n)return t[n];if(a)return t[a]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return i!=null?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=(t=e?.map((s,n)=>{var a;return(a=i[n])!=null?a:!0}))!=null?t:[]}},Yf.className="DonutSeries",Yf.type="donut"}}),bL,NV=L({"packages/ag-charts-community/src/chart/series/polar/donutTheme.ts"(){"use strict";Zn(),fe(),bL={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:ge,color:Ha,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:ge,color:Ke,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:ge,color:wo,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Po,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:ge,color:Ke,spacing:2}}}}}),SL,$0,ML=L({"packages/ag-charts-community/src/chart/series/polar/pieTheme.ts"(){"use strict";Zn(),fe(),SL={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:ge,color:Ha,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:ge,color:Ke,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:ge,color:wo,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Po,xOffset:3,yOffset:3,blur:5}}},$0=({takeColors:t,colorsCount:e})=>{const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s,calloutLine:{colors:s}}}}}),_L,OV=L({"packages/ag-charts-community/src/chart/series/polar/donutSeriesModule.ts"(){"use strict";TV(),NV(),ML(),_L={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:Yf,tooltipDefaults:{range:"exact"},themeTemplate:bL,paletteFactory:$0}}}),Z0,ul,Kf,yd,Bt,CV=L({"packages/ag-charts-community/src/chart/series/polar/pieSeriesProperties.ts"(){"use strict";jc(),ne(),gt(),zr(),Es(),gd(),Hu(),Xa(),Z0=class extends qt{constructor(){super(...arguments),this.showInLegend=!1}},_([A(pt)],Z0.prototype,"showInLegend",2),ul=class extends Oe{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},_([A(q)],ul.prototype,"offset",2),_([A(Ma)],ul.prototype,"minAngle",2),_([A(q)],ul.prototype,"minSpacing",2),_([A(q)],ul.prototype,"maxCollisionOffset",2),_([A(pt)],ul.prototype,"avoidCollisions",2),Kf=class extends Oe{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},_([A(jt)],Kf.prototype,"positionOffset",2),_([A(Rt)],Kf.prototype,"positionRatio",2),yd=class extends xt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},_([A(ms,{optional:!0})],yd.prototype,"colors",2),_([A(q)],yd.prototype,"length",2),_([A(q)],yd.prototype,"strokeWidth",2),Bt=class extends Fs{constructor(){super(...arguments),this.fills=Object.values(os),this.strokes=Object.values($a),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.title=new Z0,this.shadow=new zs,this.calloutLabel=new ul,this.sectorLabel=new Kf,this.calloutLine=new yd,this.tooltip=new Ai}},_([A(et)],Bt.prototype,"angleKey",2),_([A(et,{optional:!0})],Bt.prototype,"angleName",2),_([A(et,{optional:!0})],Bt.prototype,"radiusKey",2),_([A(et,{optional:!0})],Bt.prototype,"radiusName",2),_([A(q,{optional:!0})],Bt.prototype,"radiusMin",2),_([A(q,{optional:!0})],Bt.prototype,"radiusMax",2),_([A(et,{optional:!0})],Bt.prototype,"calloutLabelKey",2),_([A(et,{optional:!0})],Bt.prototype,"calloutLabelName",2),_([A(et,{optional:!0})],Bt.prototype,"sectorLabelKey",2),_([A(et,{optional:!0})],Bt.prototype,"sectorLabelName",2),_([A(et,{optional:!0})],Bt.prototype,"legendItemKey",2),_([A(ms)],Bt.prototype,"fills",2),_([A(ms)],Bt.prototype,"strokes",2),_([A(Rt)],Bt.prototype,"fillOpacity",2),_([A(Rt)],Bt.prototype,"strokeOpacity",2),_([A(Gn)],Bt.prototype,"lineDash",2),_([A(q)],Bt.prototype,"lineDashOffset",2),_([A(q)],Bt.prototype,"cornerRadius",2),_([A(Bi,{optional:!0})],Bt.prototype,"itemStyler",2),_([A(Ma)],Bt.prototype,"rotation",2),_([A(jt)],Bt.prototype,"outerRadiusOffset",2),_([A(Rt)],Bt.prototype,"outerRadiusRatio",2),_([A(q)],Bt.prototype,"strokeWidth",2),_([A(jt)],Bt.prototype,"sectorSpacing",2),_([A(rt)],Bt.prototype,"title",2),_([A(rt)],Bt.prototype,"shadow",2),_([A(rt)],Bt.prototype,"calloutLabel",2),_([A(rt)],Bt.prototype,"sectorLabel",2),_([A(rt)],Bt.prototype,"calloutLine",2),_([A(rt)],Bt.prototype,"tooltip",2)}}),kL,jf,EV=L({"packages/ag-charts-community/src/chart/series/polar/pieSeries.ts"(){"use strict";li(),Gc(),Mt(),be(),ae(),Io(),xc(),W0(),hi(),pd(),zi(),bi(),yt(),_t(),ue(),Ya(),Ct(),de(),Yn(),Ra(),ts(),Vu(),Hi(),Di(),Di(),ja(),CV(),X0(),Wf(),kL=class extends wc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},jf=class extends md{constructor(t){super({moduleCtx:t,pickModes:[3,0],useLabelLayer:!0,animationResetFns:{item:K0,label:Ka}}),this.properties=new Bt,this.previousRadiusScale=new pn,this.radiusScale=new pn,this.calloutLabelGroup=this.contentGroup.appendChild(new ut({name:"pieCalloutLabels"})),this.calloutLabelSelection=new pe(this.calloutLabelGroup,ut),this.backgroundGroup=this.rootGroup.appendChild(new ut({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ut({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new wa),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=kL,this.angleScale=new pn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2)}addChartEventListeners(){var t;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}get visible(){return super.visible&&(this.seriesItemEnabled.length===0||this.seriesItemEnabled.some(t=>t))}nodeFactory(){const t=new Je;return t.miterLimit=1e9,t}getSeriesDomain(t){return t==="x"?this.angleScale.domain:this.radiusScale.domain}processData(t){return F(this,null,function*(){var e,i,s,n,a;if(this.data==null||!this.properties.isValid())return;let{data:o}=this;const{visible:r,seriesItemEnabled:l}=this,{angleKey:c,radiusKey:h,calloutLabelKey:u,sectorLabelKey:d,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),f=[],m=[];p?f.push(di(p,"band",{id:"legendItemKey"})):u?f.push(di(u,"band",{id:"calloutLabelKey"})):d&&f.push(di(d,"band",{id:"sectorLabelKey"}));const v=this.radiusScale.type,y=this.radiusScale.type;h&&m.push(wb(h,{id:"radiusValue",min:(e=this.properties.radiusMin)!=null?e:0,max:this.properties.radiusMax}),Vt(h,v,{id:"radiusRaw"}),Gu({id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),u&&m.push(Vt(u,"band",{id:"calloutLabelValue"})),d&&m.push(Vt(d,"band",{id:"sectorLabelValue"})),p&&m.push(Vt(p,"band",{id:"legendItemValue"})),g&&this.processedData&&f.length>0&&m.push(qr(this.processedData)),m.push(Rc()),o=o.map((x,b)=>r&&l[b]?x:K(B({},x),{[c]:0})),yield this.requestDataModel(t,o,{props:[...f,Pb(c,y,{id:"angleValue",onlyPositive:!0}),Vt(c,y,{id:"angleRaw"}),Gu({id:"angleValue"},[0,1],0,0),...m]});for(const x of(a=(n=(s=this.processedData)==null?void 0:s.defs)==null?void 0:n.values)!=null?a:[]){const{id:b,missing:S,property:k}=x,D=gb(this,S);b!=="angleRaw"&&D>0&&Z.warnOnce(`no value was found for the key '${String(k)}' on ${D} data element${D>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return F(this,null,function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(t){const e=t.resolveProcessedDataIndexById(this,"angleValue"),i=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,s=this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,n=this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,a=this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1;return{angleIdx:e,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:n,legendItemIdx:a}}createNodeData(){return F(this,null,function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n}=this.properties;if(!e||!i||e.type!=="ungrouped")return;const{angleIdx:a,radiusIdx:o,calloutLabelIdx:r,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let h=0,u=0;const d=e.data.map((p,g)=>{var f;const{datum:m,values:v}=p,y=v[a],x=s.convert(h)+Fi(n);h=y,u+=y;const b=s.convert(h)+Fi(n),S=Math.abs(b-x),k=x+S/2,D=v[a+1],T=o>=0&&(f=v[o])!=null?f:1,I=o>=0?v[o+1]:void 0,N=c>=0?v[c]:void 0,C=this.getLabels(m,k,S,!0,v[r],v[l],N),E=this.getSectorFormat(m,g,!1);return B({itemId:g,series:this,datum:m,index:g,angleValue:D,midAngle:k,midCos:Math.cos(k),midSin:Math.sin(k),startAngle:x,endAngle:b,sectorFormat:E,radiusValue:I,radius:T,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(T),0),legendItemValue:N,enabled:this.seriesItemEnabled[g]},C)});return this.zerosumOuterRing.visible=u===0,{itemId:t,nodeData:d,labelData:d}})}getLabels(t,e,i,s,n,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||r.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>Fi(r.minAngle)&&(p.calloutLabel=K(B({},this.getTextAlignment(e)),{text:this.getLabelText(r,K(B({},d),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,K(B({},d),{value:a}))}),c!=null&&o!=null&&(p.legendItem={key:c,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=ku(t),s=-.75*Math.PI,n=i-s,a=Math.floor(n/(Math.PI/2)),o=Pp(a,e.length);return e[o]}getSectorFormat(t,e,i){var s,n,a,o,r,l,c,h;const{callbackCache:u,highlightManager:d}=this.ctx,{angleKey:p,radiusKey:g,calloutLabelKey:f,sectorLabelKey:m,legendItemKey:v,fills:y,strokes:x,itemStyler:b}=this.properties,S=d.getActiveHighlight(),k=i&&S?.series===this&&e===S.itemId,D=x[e%x.length],{fill:T,fillOpacity:I,stroke:N,strokeWidth:C,strokeOpacity:E,lineDash:O,lineDashOffset:P,cornerRadius:w}=kt(k&&this.properties.highlightStyle.item,{fill:y.length>0?y[e%y.length]:void 0,stroke:D,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let R;return b&&(R=u.call(b,{datum:t,angleKey:p,radiusKey:g,calloutLabelKey:f,sectorLabelKey:m,legendItemKey:v,fill:T,strokeOpacity:E,stroke:N,strokeWidth:C,fillOpacity:I,lineDash:O,lineDashOffset:P,cornerRadius:w,highlighted:k,seriesId:this.id})),{fill:(s=R?.fill)!=null?s:T,fillOpacity:(n=R?.fillOpacity)!=null?n:I,stroke:(a=R?.stroke)!=null?a:N,strokeWidth:(o=R?.strokeWidth)!=null?o:C,strokeOpacity:(r=R?.strokeOpacity)!=null?r:E,lineDash:(l=R?.lineDash)!=null?l:O,lineDashOffset:(c=R?.lineDashOffset)!=null?c:P,cornerRadius:(h=R?.cornerRadius)!=null?h:w}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[0,this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:n}=s,a=se(s,["radius"]);return K(B({},a),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const n=2+((e=(t=this.properties.title)==null?void 0:t.spacing)!=null?e:0),a=Math.max(0,-i);return-i-n-a}update(t){return F(this,arguments,function*({seriesRect:e}){const{title:i}=this.properties,s={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=gs(this.nodeDataDependencies,s)!=null;if(n&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const a=this.getTitleTranslationY(),o=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(o,0,a),i.node.translationY=isFinite(a)?a:0}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((t=this.labelGroup)==null||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(e=this.labelGroup)==null||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}})}updateSelections(){return F(this,null,function*(){yield this.updateGroupSelection()})}updateGroupSelection(){return F(this,null,function*(){const{itemSelection:t,highlightSelection:e,highlightLabelSelection:i,calloutLabelSelection:s,labelSelection:n}=this,a=this.ctx.highlightManager.getActiveHighlight(),o=a?.series===this?this.nodeData.filter(l=>l.itemId===a?.itemId):[],r=(l,c)=>{let h=this.nodeData;c&&(h=h.map(u=>K(B({},u),{sectorFormat:B({},u.sectorFormat)}))),l.update(h,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&l.cleanup()};r(t,!1),r(e,!0),s.update(this.nodeData,l=>{const c=new He;c.tag=0,c.pointerEvents=1,l.appendChild(c);const h=new wt;h.tag=1,h.pointerEvents=1,l.appendChild(h)}),n.update(this.nodeData),i.update(o)})}updateNodes(t){return F(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=(n,a,o,r)=>{const l=this.getSectorFormat(a.datum,a.itemId,r);a.sectorFormat.fill=l.fill,a.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(n.startAngle=a.startAngle,n.endAngle=a.endAngle,n.innerRadius=a.innerRadius,n.outerRadius=a.outerRadius),(r||c)&&(n.fill=l.fill,n.stroke=l.stroke),n.strokeWidth=l.strokeWidth,n.fillOpacity=l.fillOpacity,n.strokeOpacity=l.strokeOpacity,n.lineDash=l.lineDash,n.lineDashOffset=l.lineDashOffset,n.cornerRadius=l.cornerRadius,n.fillShadow=this.properties.shadow;const h=Math.max((this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2,0);n.inset=h,n.lineJoin=this.properties.sectorSpacing>=0||h>0?"miter":"round"};this.itemSelection.each((n,a,o)=>s(n,a,o,!1)),this.highlightSelection.each((n,a,o)=>s(n,a,o,!0)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=(t=e.colors)!=null?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((o,r)=>{var l;const c=o.datum,{calloutLabel:h,outerRadius:u}=c;if(h?.text&&!h.hidden&&u!==0){o.visible=!0,o.strokeWidth=s,o.stroke=n[r%n.length],o.fill=void 0;const d=c.midCos*u,p=c.midSin*u;let g=c.midCos*(u+i),f=c.midSin*(u+i);if(((l=h.collisionTextAlign)!=null?l:h.collisionOffsetY!==0)&&h.box!=null){const v=h.box;let y=g,x=f;g<v.x?y=v.x:g>v.x+v.width&&(y=v.x+v.width),f<v.y?x=v.y:f>v.y+v.height&&(x=v.y+v.height);const b=y-g,S=x-f,k=Math.sqrt(Math.pow(b,2)+Math.pow(S,2)),D=k-a;D>0&&(g=g+b*D/k,f=f+S*D/k)}o.x1=d,o.y1=p,o.x2=g,o.y2=f}else o.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY,r=1;let l=1;e.x+r<s?l=(e.x+e.width-s)/e.width:e.x+e.width-r>n&&(l=(n-e.x)/e.width);const c=e.y+r<a||e.y+e.height-r>o,h=l===1?t.length:Math.floor(t.length*l)-1,u=this.bboxIntersectsSurroundingSeries(e);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=nt(s,2);return n.some(o=>nt(o.x,2)+nt(o.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),o=y=>!y.calloutLabel||y.outerRadius===0,r=this.nodeData,l=this.nodeData.filter(y=>!o(y));if(l.forEach(y=>{const x=y.calloutLabel;x!=null&&(x.hidden=!1,x.collisionTextAlign=void 0,x.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,x)=>y.midSin-x.midSin),h=l.filter(y=>y.midCos>=0).sort((y,x)=>y.midSin-x.midSin),u=l.filter(y=>{var x;return y.midSin<0&&((x=y.calloutLabel)==null?void 0:x.textAlign)==="center"}).sort((y,x)=>y.midCos-x.midCos),d=l.filter(y=>{var x;return y.midSin>=0&&((x=y.calloutLabel)==null?void 0:x.textAlign)==="center"}).sort((y,x)=>y.midCos-x.midCos),p=new wt,g=y=>{var x;const b=y.calloutLabel;if(b==null)return new ot(0,0,0,0);const S=y.outerRadius+i.length+s,k=y.midCos*S,D=y.midSin*S+b.collisionOffsetY;return p.text=b.text,p.x=k,p.y=D,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(x=b.collisionTextAlign)!=null?x:b.textAlign,textBaseline:b.textBaseline}),p.computeBBox()},f=(y,x,b)=>{const S=g(y).grow(n/2),k=g(x).grow(n/2);if(S.x<k.x+k.width&&S.x+S.width>k.x&&(b==="to-top"?S.y<k.y+k.height:S.y+S.height>k.y)){const T=b==="to-top"?S.y-k.y-k.height:S.y+S.height-k.y;x.calloutLabel.collisionOffsetY=T}},m=y=>{const x=y.slice().sort((S,k)=>Math.abs(S.midSin)-Math.abs(k.midSin))[0],b=y.indexOf(x);for(let S=b-1;S>=0;S--){const k=y[S+1],D=y[S];f(k,D,"to-top")}for(let S=b+1;S<y.length;S++){const k=y[S-1],D=y[S];f(k,D,"to-bottom")}},v=y=>{const x=l.some(I=>I.calloutLabel.collisionOffsetY!==0),b=y.map(I=>g(I)),S=b.map(I=>I.clone().grow(n/2));let k=!1;for(let I=0;I<S.length&&!k;I++){const N=S[I];for(let C=I+1;C<y.length;C++){const E=S[C];if(N.collidesBBox(E)){k=!0;break}}}const D=r.map(I=>{const{startAngle:N,endAngle:C,outerRadius:E}=I;return{startAngle:N,endAngle:C,innerRadius:a,outerRadius:E}}),T=b.some(I=>D.some(N=>fL(I,N)));!k&&!x&&!T||y.filter(I=>I.calloutLabel.textAlign==="center").forEach(I=>{const N=I.calloutLabel;I.midCos<0?N.collisionTextAlign="right":I.midCos>0?N.collisionTextAlign="left":N.collisionTextAlign="center"})};m(c),m(h),v(u),v(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:o}=i,r=new wt;this.calloutLabelSelection.selectByTag(1).forEach(l=>{var c;const{datum:h}=l,u=h.calloutLabel,d=e.convert(h.radius),p=Math.max(0,d);if(!u?.text||p===0||u.hidden){l.visible=!1;return}const g=p+n+a,f=h.midCos*g,m=h.midSin*g+u.collisionOffsetY,v={textAlign:(c=u.collisionTextAlign)!=null?c:u.textAlign,textBaseline:u.textBaseline};r.text=u.text,r.x=f,r.y=m,r.setFont(this.properties.calloutLabel),r.setAlign(v);const y=r.computeBBox();let x=u.text,b=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:k}=this.getLabelOverflow(u.text,y,t);x=u.text.length===S?u.text:`${u.text.substring(0,S)}\u2026`,b=!k}l.text=x,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v),l.fill=o,l.visible=b})}computeLabelsBBox(t,e){return F(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new wt;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.computeBBox(),l.push(h))}return this.nodeData.forEach(d=>{var p;const g=d.calloutLabel;if(!g||d.outerRadius===0)return null;const f=d.outerRadius+n+a,m=d.midCos*f,v=d.midSin*f+g.collisionOffsetY;c.text=g.text,c.x=m,c.y=v,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=g.collisionTextAlign)!=null?p:g.textAlign,textBaseline:g.textBaseline});const y=c.computeBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>o){g.hidden=!0;return}if(h){const x=e.y-this.centerY,b=new ot(h.x-r,x,h.width+2*r,h.y+h.height+r-x);if(y.collidesBBox(b)){g.hidden=!0;return}}if(t.hideWhenNecessary){const{textLength:x,hasVerticalOverflow:b,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(g.text,y,e),k=g.text.length>2&&x<2;if(b||k||S){g.hidden=!0;return}}g.hidden=!1,l.push(y)}),l.length===0?null:ot.merge(l)})}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,c=e>0,h=this.seriesItemEnabled.filter(Boolean).length===1,u=(d,p)=>{const{sectorLabel:g,outerRadius:f}=p;let m=!1;if(g&&f!==0){const v=e*(1-r)+f*r+o;d.fill=l,d.fontStyle=s,d.fontWeight=n,d.fontSize=i,d.fontFamily=a,d.text=g.text,!c&&h?(d.x=0,d.y=0):(d.x=p.midCos*v,d.y=p.midSin*v),d.textAlign="center",d.textBaseline="middle";const x=d.computeBBox(),b=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],{startAngle:S,endAngle:k}=p,D={startAngle:S,endAngle:k,innerRadius:e,outerRadius:f};b.every(([T,I])=>Pf(T,I,D))&&(m=!0)}d.visible=m};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;if(n&&r!==void 0)return r.text;if(i&&i!==e&&o?.text!==void 0)return o.text;if(s&&s!==e&&a?.text!==void 0)return a.text}pickNodeClosestDatum(t){return j0(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return Hn;const{datum:i,angleValue:s,sectorFormat:{fill:n},itemId:a}=t,o=re((e=this.properties.title)==null?void 0:e.text),r=Ot(s)?wp(s):String(s),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:o??l,content:o&&l?`${l}: ${r}`:r,backgroundColor:n},{datum:i,itemId:a,title:o,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,s,n,a;const{visible:o,processedData:r,dataModel:l}=this;if(!l||!r?.data.length||t!=="category")return[];const{angleKey:c,calloutLabelKey:h,sectorLabelKey:u,legendItemKey:d}=this.properties;if(!d&&(!h||h===c)&&(!u||u===c))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(l),m=((e=this.properties.title)==null?void 0:e.showInLegend)&&this.properties.title.text,v=[];for(let y=0;y<r.data.length;y++){const{datum:x,values:b}=r.data[y],S=[];m&&S.push(m);const k=this.getLabels(x,2*Math.PI,2*Math.PI,!1,b[p],b[g],b[f]);if(d&&k.legendItem!==void 0?S.push(k.legendItem.text):h&&h!==c&&((i=k.calloutLabel)==null?void 0:i.text)!==void 0?S.push((s=k.calloutLabel)==null?void 0:s.text):u&&u!==c&&((n=k.sectorLabel)==null?void 0:n.text)!==void 0&&S.push((a=k.sectorLabel)==null?void 0:a.text),S.length===0)continue;const D=this.getSectorFormat(x,y,!1);v.push({legendType:"category",id:this.id,itemId:y,seriesId:this.id,enabled:o&&this.seriesItemEnabled[y],label:{text:S.join(" - ")},symbols:[{marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:d!=null?x[d]:void 0})}return v}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):n!=null&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeData[t]&&(this.nodeData[t].enabled=e),this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");(i=this.processedData)==null||i.data.forEach(({values:n},a)=>{n[s]===t&&this.toggleSeriesItem(a,e)})}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=hl(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);xe(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Pt(this,"callout",e,this.calloutLabelSelection),Pt(this,"sector",e,this.labelSelection),Pt(this,"highlight",e,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:c,previousRadiusScale:h}=this,{animationManager:u}=this.ctx,d=(t=l?.reduced)==null?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((e=d?.moved.size)!=null?e:0)===0,g=((i=l?.defs.keys.length)!=null?i:0)>0,f=(a=(n=(s=l?.reduced)==null?void 0:s.animationValidation)==null?void 0:n.uniqueKeys)!=null?a:!0;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=hl(!1,this.properties.rotation,c,h);xe(this.id,"nodes",u,[o,r],m.nodes,(v,y)=>this.getDatumId(y),d),Pt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Pt(this,"sector",this.ctx.animationManager,this.labelSelection),Pt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=hl(!1,this.properties.rotation,i,s);xe(this.id,"nodes",n,[t,e],a.nodes),zo(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zo(this,"sector",this.ctx.animationManager,this.labelSelection),zo(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:o}=this.properties;if((s=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(o)return t[o];if(n)return t[n];if(a)return t[a]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return i!=null?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=(t=e?.map((s,n)=>{var a;return(a=i[n])!=null?a:!0}))!=null?t:[]}},jf.className="PieSeries",jf.type="pie"}}),DL,RV=L({"packages/ag-charts-community/src/chart/series/polar/pieSeriesModule.ts"(){"use strict";EV(),ML(),DL={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:jf,tooltipDefaults:{range:"exact"},themeTemplate:SL,paletteFactory:$0}}}),Qn,wV=L({"packages/ag-charts-community/src/chart/toolbar/toolbarProperties.ts"(){"use strict";ne(),Ye(),gt(),Pg(),Qn=class extends xt{constructor(t,e){super(),this.onChange=t,this.onButtonsChange=e,this.align="start",this.position="top",this.size="normal"}},_([Ui(t=>{t.onChange(t.enabled)}),A(pt)],Qn.prototype,"enabled",2),_([Ui(t=>{t.onChange(t.enabled)}),A(Jt([...rb]),{optional:!0})],Qn.prototype,"align",2),_([Ui(t=>{t.onChange(t.enabled)}),A(Jt(Yr),{optional:!0})],Qn.prototype,"position",2),_([Ui(t=>{t.onChange(t.enabled)}),A(Jt(["small","normal"]),{optional:!0})],Qn.prototype,"size",2),_([Ui(t=>{t.onButtonsChange(t.buttons)}),A(Or,{optional:!0})],Qn.prototype,"buttons",2)}}),Xf,Xc,ti,PV=L({"packages/ag-charts-community/src/chart/toolbar/toolbarStyles.ts"(){"use strict";Pg(),Xf="ag-charts-toolbar",Xc={align:"ag-charts-toolbar__align",section:"ag-charts-toolbar__section",button:"ag-charts-toolbar__button",icon:"ag-charts-toolbar__icon",label:"ag-charts-toolbar__label"},ti={top:"ag-charts-toolbar--top",right:"ag-charts-toolbar--right",bottom:"ag-charts-toolbar--bottom",left:"ag-charts-toolbar--left",floating:"ag-charts-toolbar--floating","floating-top":"ag-charts-toolbar--floating-top","floating-bottom":"ag-charts-toolbar--floating-bottom",small:"ag-charts-toolbar--small",normal:"ag-charts-toolbar--normal",hidden:"ag-charts-toolbar--hidden",preventFlash:"ag-charts-toolbar--prevent-flash",floatingHidden:"ag-charts-toolbar--floating-hidden",align:{start:"ag-charts-toolbar__align--start",center:"ag-charts-toolbar__align--center",end:"ag-charts-toolbar__align--end"},button:{active:"ag-charts-toolbar__button--active",hiddenValue:"ag-charts-toolbar__button--hidden-value",hiddenToggled:"ag-charts-toolbar__button--hidden-toggled"}}}}),IL,BV=L({"packages/ag-charts-community/src/chart/toolbar/toolbarStyles.css"(){IL=`.ag-charts-toolbar{align-items:center;background:none;border:none;display:flex;flex-wrap:nowrap;opacity:1;position:absolute;transform:translateY(0);transition:opacity 0.2s ease-in-out,transform 0.2s ease-in-out}.ag-charts-toolbar--hidden,
.ag-charts-toolbar--prevent-flash{visibility:hidden}.ag-charts-toolbar--floating-hidden{opacity:0;transition:opacity 0.4s ease-in-out}.ag-charts-toolbar--small{--ag-charts-toolbar-size:var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size:var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding:var(--ag-charts-toolbar-button-padding-small)}.ag-charts-toolbar--top,
.ag-charts-toolbar--bottom{flex-direction:row;width:100%}.ag-charts-toolbar--left,
.ag-charts-toolbar--right{flex-direction:column}.ag-charts-toolbar--floating,
.ag-charts-toolbar--floating-top,
.ag-charts-toolbar--floating-bottom{background:none;border:none;flex-direction:row;overflow:hidden;pointer-events:none;width:100%}.ag-charts-toolbar--floating{padding:0;width:auto;z-index:var(--ag-charts-layer-toolbar)}.ag-charts-toolbar--floating-top{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-top:10px}.ag-charts-toolbar--floating-bottom{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-bottom:10px}.ag-charts-toolbar__align{display:flex;flex-direction:inherit;flex-wrap:inherit;gap:var(--ag-charts-toolbar-gap);max-width:100%;width:100%}.ag-charts-toolbar__align--start{justify-content:start}.ag-charts-toolbar__align--center{justify-content:center}.ag-charts-toolbar__align--end{justify-content:end}.ag-charts-toolbar__align--center,
.ag-charts-toolbar__align--end{margin-left:auto}.ag-charts-toolbar--left .ag-charts-toolbar__align--center,
.ag-charts-toolbar--left .ag-charts-toolbar__align--end,
.ag-charts-toolbar--right .ag-charts-toolbar__align--center,
.ag-charts-toolbar--right .ag-charts-toolbar__align--end{margin-left:0;margin-top:auto}.ag-charts-toolbar--floating-top .ag-charts-toolbar__align,
.ag-charts-toolbar--floating-bottom .ag-charts-toolbar__align{transition:transform 0.4s ease-in-out;width:auto}.ag-charts-toolbar__section{display:inherit;flex-direction:inherit;flex-wrap:inherit;justify-content:inherit;max-width:inherit;width:inherit}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);display:flex;font-size:var(--ag-charts-toolbar-font-size);font-weight:500;justify-content:center;margin:0 0 0 -1px;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);pointer-events:all;transition:background-color 0.25s ease-in-out,color 0.25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:first-child{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button:last-child{border-bottom-right-radius:var(--ag-charts-button-radius);border-right:var(--ag-charts-toolbar-border);border-top-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar--left .ag-charts-toolbar__button,
.ag-charts-toolbar--right .ag-charts-toolbar__button{border-left:var(--ag-charts-toolbar-border);border-right:var(--ag-charts-toolbar-border);border-radius:0;margin:-1px 0 0 0;max-width:100%;overflow:hidden}.ag-charts-toolbar--left .ag-charts-toolbar__button:first-child,
.ag-charts-toolbar--right .ag-charts-toolbar__button:first-child{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar--left .ag-charts-toolbar__button:last-child,
.ag-charts-toolbar--right .ag-charts-toolbar__button:last-child{border-bottom:var(--ag-charts-toolbar-border);border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}.ag-charts-toolbar__button--hidden-value,
.ag-charts-toolbar__button--hidden-toggled{display:none}.ag-charts-toolbar__button:hover{background:var(--ag-charts-toolbar-hover-color)}.ag-charts-toolbar .ag-charts-toolbar__button:focus-visible{border-left:var(--ag-charts-toolbar-border);border-color:var(--ag-charts-toolbar-focus-color);box-shadow:var(--ag-charts-focus-border-shadow);z-index:1}.ag-charts-toolbar__button.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);color:var(--ag-charts-toolbar-active-color)}.ag-charts-toolbar__button[aria-disabled='true']{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color)}.ag-charts-toolbar__button:not([aria-disabled='true']){cursor:pointer}.ag-charts-toolbar__icon{height:1.2em;width:1.2em}.ag-charts-toolbar__icon + .ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,
.ag-charts-toolbar__label{pointer-events:none}`}}),q0,FV=L({"packages/ag-charts-community/src/chart/toolbar/toolbar.ts"(){"use strict";Oa(),Mt(),Tu(),Ue(),lf(),_t(),Ye(),gt(),hn(),wV(),PV(),BV(),Pg(),q0=class extends kc{constructor(t){super(),this.ctx=t,this.enabled=!0,this.annotations=new Qn(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.annotationOptions=new Qn(this.onGroupChanged.bind(this,"annotationOptions"),this.onGroupButtonsChanged.bind(this,"annotationOptions")),this.ranges=new Qn(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new Qn(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.horizontalSpacing=10,this.verticalSpacing=10,this.floatingDetectionRange=38,this.positions={top:new Set,right:new Set,bottom:new Set,left:new Set,floating:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},right:{},bottom:{},left:{},floating:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={annotations:new Set,annotationOptions:new Set,ranges:new Set,zoom:new Set},this.groupButtons={annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.groupDestroyFns={annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.pendingButtonToggledEvents=[],this.groupProxied=new Map,this.hasNewLocale=!0,t.domManager.addStyles(Xf,IL),this.elements={};for(const e of Yr)this.elements[e]=t.domManager.addChild("canvas-overlay",`toolbar-${e}`),this.renderToolbar(e);this.toggleVisibilities(),this.destroyFns.push(t.interactionManager.addListener("hover",this.onHover.bind(this),31),t.interactionManager.addListener("leave",this.onLeave.bind(this),31),t.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),t.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),t.toolbarManager.addListener("floating-anchor-changed",this.onFloatingAnchorChanged.bind(this)),t.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),t.localeManager.addListener("locale-changed",()=>{this.hasNewLocale=!0}),()=>this.destroyElements())}destroyElements(){this.ctx.domManager.removeStyles(Xf);for(const t of Object.keys(this.elements))this.ctx.domManager.removeChild("canvas-overlay",`toolbar-${t}`)}onHover(t){const{enabled:e,elements:i,floatingDetectionRange:s,ctx:{scene:n}}=this,{offsetY:a,sourceEvent:{target:o}}=t,{FloatingBottom:r,FloatingTop:l}=Ac;if(!e)return;const c=i[r],h=i[l],u=c.offsetTop-s,d=a>u&&a<n.canvas.element.offsetHeight||o===c,p=h.offsetTop+h.offsetHeight+s,g=a>0&&a<p||o===h;this.translateFloatingElements(r,d),this.translateFloatingElements(l,g)}onLeave(t){const{enabled:e,ctx:{scene:i}}=this,{relatedElement:s,targetElement:n}=t,{FloatingBottom:a,FloatingTop:o}=Ac;!e||n!==i.canvas.element||wg.some(l=>this.groupButtons[l].some(c=>c===s))||(this.translateFloatingElements(a,!1),this.translateFloatingElements(o,!1))}onGroupChanged(t){this[t]==null||this.groupProxied.has(t)||(this.createGroup(t),this.toggleVisibilities())}onGroupButtonsChanged(t,e){!this.enabled||this.groupProxied.has(t)||(this.createGroupButtons(t,e),this.toggleVisibilities())}onLayoutComplete(){for(const t of Yr)this.elements[t].classList.remove(ti.preventFlash)}onButtonToggled(t){const{group:e,value:i,active:s,enabled:n,visible:a}=t;if(this.groupButtons[e].length===0){this.pendingButtonToggledEvents.push(t);return}for(const o of this.groupButtons[e])o.dataset.toolbarValue===`${i}`&&(o.ariaDisabled=`${!n}`,o.classList.toggle(ti.button.hiddenToggled,!a),o.classList.toggle(ti.button.active,s))}onGroupToggled(t){const{caller:e,group:i,visible:s}=t;this.toggleGroup(e,i,s),this.toggleVisibilities()}onFloatingAnchorChanged(t){var e,i;const{elements:s,groupButtons:n,positions:a,horizontalSpacing:o,verticalSpacing:r,ctx:{domManager:l,toolbarManager:c}}=this,{group:h,anchor:u}=t;if(!a.floating.has(h))return;const d=s.floating;if(d.classList.contains(ti.hidden))return;let p=u.y-d.offsetHeight-r,g=u.x-d.offsetWidth/2;u.position==="above"&&(p=u.y-d.offsetHeight/2,g=u.x+o);const f=l.getBoundingClientRect();p=St(0,p,f.height-d.offsetHeight),g=St(0,g,f.width-d.offsetWidth),d.style.top=`${p}px`,d.style.left=`${g}px`;for(const m of n[h]){if(m.classList.contains(ti.button.hiddenToggled))return;const v=m.offsetParent;c.buttonMoved(h,m.dataset.toolbarValue,new ot(m.offsetLeft-m.offsetWidth+((e=v?.offsetLeft)!=null?e:0),m.offsetTop+((i=v?.offsetTop)!=null?i:0),m.offsetWidth,m.offsetWidth))}}onProxyGroupOptions(t){if(!this.enabled)return;const{caller:e,group:i,options:s}=t;this.groupProxied.set(i,s),this[i].set(s),this.toggleGroup(e,i,s.enabled),this.createGroup(i,s.enabled,s.position),s.enabled&&this.createGroupButtons(i,s.buttons)}createGroup(t,e,i){e??(e=this[t].enabled),i??(i=this[t].position);for(const s of Yr)e&&i===s?this.positions[s].add(t):this.positions[s].delete(t)}createGroupButtons(t,e=[]){var i;for(const g of this.groupButtons[t])g.remove();if(this.groupButtons[t]=[],this.groupDestroyFns[t].forEach(g=>g()),this.groupDestroyFns[t]=[],e.length===0)return;const{align:s,position:n}=this[t],a=this.positionAlignments[n][s];if(!a)return;let o=0;const r=()=>{let g=a.children.item(o);return g||(g=ui("div"),a.appendChild(g),this.destroyFns.push(()=>g.remove())),g.classList.add(Xc.section,ti[this[t].size]),o++,g};let l=r(),c=(i=e.at(0))==null?void 0:i.section;for(const g of e){c!==g.section&&(l=r()),c=g.section;const f=this.createButtonElement(t,g);l.appendChild(f),this.groupButtons[t].push(f)}const h=()=>{this.ctx.toolbarManager.cancel(t)};let u,d;k2(n)&&(u=()=>this.translateFloatingElements(n,!0),d=()=>this.translateFloatingElements(n,!1));const p=this.computeAriaOrientation(this[t].position);this.groupDestroyFns[t]=rf({orientation:p,toolbar:a,buttons:this.groupButtons[t],onEscape:h,onFocus:u,onBlur:d}),this.updateToolbarAriaLabel(t,a)}computeAriaOrientation(t){return{top:"horizontal",right:"vertical",bottom:"horizontal",left:"vertical",floating:"horizontal","floating-top":"horizontal","floating-bottom":"horizontal"}[t]}toggleGroup(t,e,i){i?this.groupCallers[e].add(t):this.groupCallers[e].delete(t)}processPendingEvents(){var t;const e=((t=this.pendingButtonToggledEvents)!=null?t:[]).slice();for(const i of e)this.onButtonToggled(i);this.pendingButtonToggledEvents=[]}performLayout(t){return F(this,null,function*(){return this.enabled&&(this.refreshOuterLayout(t.shrinkRect),this.refreshLocale()),t})}performCartesianLayout(t){return F(this,null,function*(){this.enabled&&this.refreshInnerLayout(t.seriesRect)})}refreshOuterLayout(t){const{elements:e,horizontalSpacing:i,verticalSpacing:s}=this;e.top.classList.contains(ti.hidden)||t.shrink(e.top.offsetHeight+s,"top"),e.right.classList.contains(ti.hidden)||t.shrink(e.right.offsetWidth+i,"right"),e.bottom.classList.contains(ti.hidden)||(t.shrink(e.bottom.offsetHeight+s,"bottom"),e.bottom.style.top=`${t.y+t.height+s}px`),e.left.classList.contains(ti.hidden)||t.shrink(e.left.offsetWidth+i,"left")}refreshLocale(){const{groupButtons:t,groupProxied:e,hasNewLocale:i}=this;if(i){for(const s of wg){const n=e.get(s);t[s].forEach(a=>this.refreshButtonLocale(a,this[s],n)),this.updateToolbarAriaLabel(s)}this.hasNewLocale=!1}}refreshInnerLayout(t){const{elements:e,verticalSpacing:i}=this,{FloatingBottom:s,FloatingTop:n}=Ac;e.top.style.top=`${t.y-e.top.offsetHeight-i}px`,e.top.style.left=`${t.x}px`,e.top.style.width=`${t.width}px`,e.bottom.style.left=`${t.x}px`,e.bottom.style.width=`${t.width}px`,e.right.style.top=`${t.y}px`,e.right.style.right="0px",e.right.style.height=`${t.height}px`,e.left.style.top=`${t.y}px`,e.left.style.left="0px",e.left.style.height=`${t.height}px`,e[n].style.top=`${t.y}px`,e[s].style.top=`${t.y+t.height-e[s].offsetHeight}px`}refreshButtonLocale(t,e,i){var s,n,a;const{dataset:{toolbarValue:o}}=t,r=(a=(s=i?.buttons)==null?void 0:s.find(({value:l})=>l===o))!=null?a:(n=e.buttons)==null?void 0:n.find(({value:l})=>l===o);r&&this.updateButtonText(t,r)}toggleVisibilities(){var t;if(this.elements==null)return;const e=s=>this[s].enabled&&this.groupCallers[s].size>0,i=s=>n=>typeof n.value!="string"&&typeof n.value!="number"||`${n.value}`===s.dataset.toolbarValue;for(const s of Yr){const n=this.enabled&&Array.from(this.positions[s].values()).some(e);this.elements[s].classList.toggle(ti.hidden,!n)}for(const s of wg){if(this[s]==null)continue;const n=e(s);for(const a of this.groupButtons[s]){const o=n&&((t=this[s].buttons)==null?void 0:t.some(i(a)));a.classList.toggle(ti.button.hiddenValue,!o)}}}translateFloatingElements(t,e){const{elements:i,verticalSpacing:s,positionAlignments:n}=this,a=i[t],o=Object.values(n[t]);a.classList.toggle(ti.floatingHidden,!e);const r=t==="floating-bottom"?1:-1;for(const l of o)l.style.transform=e&&l.style.transform!==""?"translateY(0)":`translateY(${(a.offsetHeight+s)*r}px)`}renderToolbar(t="top"){const e=this.elements[t];e.classList.add(Xf,ti[t],ti.preventFlash),k2(t)&&e.classList.add(ti.floatingHidden);for(const i of rb){const s=ui("div");s.classList.add(Xc.align,ti.align[i]),e.appendChild(s),this.positionAlignments[t][i]=s}}createButtonElement(t,e){const i=ui("button");return i.classList.add(Xc.button),i.dataset.toolbarGroup=t,i.tabIndex=-1,(typeof e.value=="string"||typeof e.value=="number")&&(i.dataset.toolbarValue=`${e.value}`),i.onclick=AA(i,this.onButtonPress.bind(this,t,e.value)),this.updateButtonText(i,e),this.destroyFns.push(()=>i.remove()),i}updateToolbarAriaLabel(t,e){if(!e){const{align:s,position:n}=this[t];if(e=this.positionAlignments[n][s],!e)return}const i={annotations:"ariaLabelAnnotationsToolbar",annotationOptions:"ariaLabelAnnotationOptionsToolbar",ranges:"ariaLabelRangesToolbar",zoom:"ariaLabelZoomToolbar"};e.ariaLabel=this.ctx.localeManager.t(i[t])}updateButtonText(t,e){if(e.tooltip){const n=this.ctx.localeManager.t(e.tooltip);t.title=n}let i="";if(e.icon!=null&&(i=`<span class="ag-charts-icon-${e.icon} ${Xc.icon}"></span>`),e.label!=null){const n=this.ctx.localeManager.t(e.label);i=`${i}<span class="${Xc.label}">${n}</span>`}t.innerHTML=i;const s=e.ariaLabel?this.ctx.localeManager.t(e.ariaLabel):void 0;Br(t,"aria-label",s)}onButtonPress(t,e){this.ctx.toolbarManager.pressButton(t,e)}},_([Ui(t=>{t.processPendingEvents(),t.toggleVisibilities()}),A(pt)],q0.prototype,"enabled",2)}}),Q0,$f,AL,LL,TL,NL,OL,CL,zV=L({"packages/ag-charts-community/src/chart/toolbar/toolbarModule.ts"(){"use strict";fe(),FV(),Q0=1e3*60*60*24,$f=Q0*30,AL=Q0*365,LL={enabled:!0,position:"left",align:"start",buttons:[{icon:"trend-line",tooltip:"toolbarAnnotationsTrendLine",value:"line",section:"create"},{icon:"parallel-channel",tooltip:"toolbarAnnotationsParallelChannel",value:"parallel-channel",section:"create"},{icon:"disjoint-channel",tooltip:"toolbarAnnotationsDisjointChannel",value:"disjoint-channel",section:"create"},{icon:"horizontal-line",tooltip:"toolbarAnnotationsHorizontalLine",value:"horizontal-line",section:"create"},{icon:"vertical-line",tooltip:"toolbarAnnotationsVerticalLine",value:"vertical-line",section:"create"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear",section:"tools"}]},TL={enabled:!0,position:"floating",align:"start",buttons:[{icon:"line-color",tooltip:"toolbarAnnotationsColor",value:"line-color"},{icon:"lock",tooltip:"toolbarAnnotationsLock",value:"lock"},{icon:"unlock",tooltip:"toolbarAnnotationsUnlock",value:"unlock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},NL={enabled:!1,position:Yc,align:"start",buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:$f},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*$f},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*$f},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:AL},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e]}]},OL={enabled:!0,position:"top",align:"end",buttons:[{icon:"zoom-out-alt",tooltip:"toolbarZoomZoomOut",value:"zoom-out"},{icon:"zoom-in-alt",tooltip:"toolbarZoomZoomIn",value:"zoom-in"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right"},{icon:"pan-start",tooltip:"toolbarZoomPanStart",value:"pan-start"},{icon:"pan-end",tooltip:"toolbarZoomPanEnd",value:"pan-end"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset"}]},CL={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:q0,themeTemplate:{toolbar:{enabled:!0,annotations:LL,annotationOptions:TL,ranges:NL,zoom:OL}}}}});function GV(){Na.register(qb,LA,TA,i0,CL,QA,oL,cL,uL,dL,_L,DL,hL);for(const t of[za,La,el,Ta,Eo])Ea.register(t.type,{instanceConstructor:t,hidden:t===Ta})}var VV=L({"packages/ag-charts-community/src/chart/factory/registerInbuiltModules.ts"(){"use strict";Oa(),Ru(),kg(),$b(),jb(),SA(),_A(),YG(),jG(),CA(),cV(),gV(),yV(),bV(),_V(),IV(),OV(),RV(),zV(),Tc()}});function UV(){for(const t of Na.modules){if(t.packageType==="enterprise"&&!Wz(t)&&Z.errorOnce("Unexpected enterprise module registered: "+t.identifier),t.type==="root"&&t.themeTemplate)for(const e of t.chartTypes)Gg.set(e,t.themeTemplate);if(t.type==="series"){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);Wi.register(t.identifier,t)}if(t.type==="series-option"&&t.themeTemplate)for(const e of t.seriesTypes)Wi.setThemeTemplate(e,t.themeTemplate);if(t.type==="axis-option"&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],s=B(B({},t.themeTemplate),i);for(const n of t.axisTypes)delete s[n];Ea.setThemeTemplate(e,s)}t.type==="axis"&&Ea.register(t.identifier,t),t.type==="legend"&&Fg.register(t.identifier,t)}if(Na.hasEnterpriseModules()){const t=Yz();t.length>0&&Z.errorOnce("Enterprise modules expected but not registered: ",t)}}var HV=L({"packages/ag-charts-community/src/chart/factory/setupModules.ts"(){"use strict";Oa(),yt(),Tc(),Nc(),Fu(),vb(),Vg()}});function WV(t){return t.type==="sankey"||t.type==="chord"}var Zf,EL,YV=L({"packages/ag-charts-community/src/chart/flowProportionChart.ts"(){"use strict";Mt(),Pc(),Zf=class Sk extends Jr{updateData(){return F(this,null,function*(){yield As(Sk.prototype,this,"updateData").call(this);const{nodes:e}=this.getOptions();this.series.forEach(i=>{WV(i)&&i.setChartNodes(e)})})}performLayout(){return F(this,null,function*(){const e=yield As(Sk.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s,annotationRoot:n,highlightRoot:a}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;const r=this.series.some(l=>l.visible);s.visible=r;for(const l of[s,n,a])l.translationX=Math.floor(e.x),l.translationY=Math.floor(e.y),l.setClipRectInGroupCoordinateSpace(new ot(o.x,o.y,o.width,o.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:r},axes:[]}),e})}},Zf.className="FlowProportionChart",Zf.type="flow-proportion",EL=Zf}}),qf,RL,KV=L({"packages/ag-charts-community/src/chart/hierarchyChart.ts"(){"use strict";Mt(),Pc(),qf=class Zw extends Jr{constructor(e,i){super(e,i)}performLayout(){return F(this,null,function*(){const e=yield As(Zw.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s,annotationRoot:n,highlightRoot:a}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;for(const r of[s,n,a])r.translationX=Math.floor(e.x),r.translationY=Math.floor(e.y);return yield Promise.all(this.series.map(r=>F(this,null,function*(){yield r.update({seriesRect:e})}))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new ot(e.x,e.y,e.width,e.height)),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:!0},axes:[]}),e})}getAriaLabel(){return`hierarchical chart, ${this.getCaptionText()}`}handleSeriesFocus(e,i){this.focus.series=this.series[0];const{focus:{series:s,seriesIndex:n,datumIndex:a},seriesRect:o}=this;if(s===void 0)return;const r=s.pickFocus({datumIndex:a,datumIndexDelta:i,otherIndex:n,otherIndexDelta:e,seriesRect:o});this.updatePickedFocus(r)}},qf.className="HierarchyChart",qf.type="hierarchy",RL=qf}}),dl,wL=L({"packages/ag-charts-community/src/chart/axis/polarAxis.ts"(){"use strict";gt(),Fx(),dl=class extends Sg{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}},_([A(Jt(["polygon","circle"],"a polar axis shape"))],dl.prototype,"shape",2),_([A(Rt)],dl.prototype,"innerRadiusRatio",2)}}),Qf,PL,jV=L({"packages/ag-charts-community/src/chart/polarChart.ts"(){"use strict";Mt(),Wx(),wL(),Pc(),de(),ts(),Wf(),Qf=class qw extends Jr{constructor(e,i){super(e,i),this.padding=new Ca(40),this.ctx.axisManager.axisGroup.zIndex=6}performLayout(){return F(this,null,function*(){const e=yield As(qw.prototype,this,"performLayout").call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(s=>s.update()),this.hoverRect=e,this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e})}updateAxes(e,i,s){var n,a;const o=this.axes.find(u=>u.direction==="x"),r=this.axes.find(u=>u.direction==="y");if(!(o instanceof dl)||!(r instanceof dl))return;const l=o.scale,c=(n=l.ticks)==null?void 0:n.call(l).map(u=>l.convert(u)),h=r.innerRadiusRatio;o.innerRadiusRatio=h,(a=o.computeRange)==null||a.call(o),o.gridLength=s,r.gridAngles=c,r.gridRange=o.range,r.range=[s,s*h],[o,r].forEach(u=>{u.translation.x=e,u.translation.y=i,u.calculateLayout()})}computeSeriesRect(e){const{seriesArea:{padding:i}}=this;e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return F(this,null,function*(){const i=this.series.filter(h=>h instanceof md),s=this.axes.filter(h=>h instanceof dl),n=(h,u,d)=>{this.updateAxes(h,u,d),i.forEach(g=>{g.centerX=h,g.centerY=u,g.radius=d});const p=i.filter(g=>g.type==="donut"||g.type==="pie");if(p.length>1){const g=p.map(f=>{const m=f.getInnerRadius();return{series:f,innerRadius:m}}).sort((f,m)=>f.innerRadius-m.innerRadius);g.at(-1).series.surroundingRadius=void 0;for(let f=0;f<g.length-1;f++)g[f].series.surroundingRadius=g[f+1].innerRadius}},a=e.x+e.width/2,o=e.y+e.height/2,r=Math.max(0,Math.min(e.width,e.height)/2);let l=r;n(a,o,l);const c=(...h)=>F(this,[...h],function*({hideWhenNecessary:u=!1}={}){const d=[];for(const f of[...s,...i]){const m=yield f.computeLabelsBBox({hideWhenNecessary:u},e);m&&d.push(m)}if(d.length===0){n(a,o,r);return}const p=ot.merge(d),g=this.refineCircle(p,l,e);n(g.centerX,g.centerY,g.radius),g.radius!==l&&(l=g.radius)});return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:a,centerY:o}})}refineCircle(e,i,s){const a=-i,o=-i,r=i,l=i;let c=Math.max(0,a-e.x),h=Math.max(0,o-e.y),u=Math.max(0,e.x+e.width-r),d=Math.max(0,e.y+e.height-l);c=u=Math.max(c,u),h=d=Math.max(h,d);const p=s.width-c-u,g=s.height-h-d;let f=Math.min(p,g)/2;const m=.5*s.width/2,v=.5*s.height/2,y=Math.min(m,v);if(f<y){f=y;const S=c+u,k=h+d;if(2*f+k>s.height){const D=s.height-2*f;Math.min(h,d)*2>D?(h=D/2,d=D/2):h>d?h=D-d:d=D-h}if(2*f+S>s.width){const D=s.width-2*f;Math.min(c,u)*2>D?(c=D/2,u=D/2):c>u?c=D-u:u=D-c}}const x=c+2*f+u,b=h+2*f+d;return{centerX:s.x+(s.width-x)/2+c+f,centerY:s.y+(s.height-b)/2+h+f,radius:f}}},Qf.className="PolarChart",Qf.type="polar",PL=Qf}}),vd,Jf,tm,em,im,sm,BL=L({"packages/ag-charts-community/src/chart/series/topology/mercatorScale.ts"(){"use strict";Mt(),vd=Math.PI/180,Jf=t=>t*vd,tm=t=>-Math.log(Math.tan(Math.PI*.25+t*vd*.5)),em=t=>t/vd,im=t=>(Math.atan(Math.exp(-t))-Math.PI*.25)/(vd*.5),sm=class Mk{constructor(e,i){this.domain=e,this.range=i,this.type="mercator",this.bounds=Mk.bounds(e)}static bounds(e){const[[i,s],[n,a]]=e,o=Jf(i),r=tm(s),l=Jf(n),c=tm(a);return new ot(Math.min(o,l),Math.min(r,c),Math.abs(l-o),Math.abs(c-r))}static fixedScale(){return new Mk([[em(0),im(0)],[em(1),im(1)]],[[0,0],[1,1]])}convert([e,i]){const[[s,n],[a,o]]=this.range,r=(a-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[(Jf(e)-this.bounds.x)*r+s,(tm(i)-this.bounds.y)*l+n]}invert([e,i]){const[[s,n],[a,o]]=this.range,r=(a-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[em((e-s)/r+this.bounds.x),im((i-n)/l+this.bounds.y)]}}}});function FL(t){return t.type==="map-shape"||t.type==="map-line"||t.type==="map-marker"||t.type==="map-shape-background"||t.type==="map-line-background"}var nm,zL,XV=L({"packages/ag-charts-community/src/chart/topologyChart.ts"(){"use strict";Mt(),jb(),Pc(),BL(),nm=class _k extends Jr{constructor(e,i){super(e,i),this.xAxis=new za(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new za(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}updateData(){return F(this,null,function*(){yield As(_k.prototype,this,"updateData").call(this);const{topology:e}=this.getOptions();this.series.forEach(i=>{FL(i)&&i.setChartTopology(e)})})}performLayout(){return F(this,null,function*(){const e=yield As(_k.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s,annotationRoot:n,highlightRoot:a}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;const r=this.series.filter(FL),l=r.reduce((u,d)=>{if(!d.visible)return u;const p=d.topologyBounds;return p==null?u:u==null?p:(u.merge(p),u)},void 0);let c;if(l!=null){const{lon0:u,lat0:d,lon1:p,lat1:g}=l,f=[[u,d],[p,g]],m=sm.bounds(f),{width:v,height:y}=e,x=Math.min(v/m.width,y/m.height),b=m.width*x,S=m.height*x,k=(v-b)/2,D=(y-S)/2,T=k,I=D,N=k+b,C=D+S,E=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),O=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),P=(N-T)/(E.max-E.min),w=T-P*E.min,R=(C-I)/(1-O.min-(1-O.max)),G=I-R*(1-O.max);c=new sm(f,[[w,G],[w+P,G+R]])}r.forEach(u=>{u.scale=c});const h=this.series.some(u=>u.visible);s.visible=h;for(const u of[s,n,a])u.translationX=Math.floor(e.x),u.translationY=Math.floor(e.y),u.setClipRectInGroupCoordinateSpace(new ot(e.x,e.y,e.width,e.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:h},axes:[]}),e})}},nm.className="TopologyChart",nm.type="topology",zL=nm}});function Gs(t,e){if(Ts(t))return e(t)}function $V(t,e){var i,s;const n=t,{xKey:a="date",highKey:o="high",openKey:r="open",lowKey:l="low",closeKey:c="close",volumeKey:h="volume",chartType:u="candlestick",navigator:d=!1,volume:p=!0,rangeToolbar:g=!0,statusBar:f=!0,annotations:m=!0,zoom:v=!0,theme:y,data:x}=n,b=se(n,["xKey","highKey","openKey","lowKey","closeKey","volumeKey","chartType","navigator","volume","rangeToolbar","statusBar","annotations","zoom","theme","data"]),S=qV(y,u,a,o,l,r,c),k=ZV(y,e,r,c,p,h),T={navigator:B({enabled:d},p?{miniChart:{enabled:d,series:[{type:"line",xKey:"date",yKey:h,marker:{enabled:!1}}]}}:null)},I=f?{statusBar:{enabled:!0,data:x,highKey:o,openKey:r,lowKey:l,closeKey:c,volumeKey:p?h:void 0}}:null,N={zoom:{enabled:v,enableIndependentAxes:!0}},C=m||g?{toolbar:{annotationOptions:{enabled:m},annotations:{enabled:m},ranges:{enabled:g}}}:null,E=p?[{type:"number",position:"left",keys:[h],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"},disableZoom:!0}]:[];return B(B(B(B(B({theme:typeof y=="string"?y:B({baseTheme:"ag-financial"},y??{}),animation:{enabled:!1},legend:{enabled:!1},series:[...k,...S],padding:{top:6,right:8},axes:[{type:"number",position:"right",keys:[r,c,o,l],interval:{maxSpacing:(i=Gs(y,O=>{var P,w,R,G,z;return(z=(G=(R=(w=(P=O.overrides)==null?void 0:P.common)==null?void 0:w.axes)==null?void 0:R.number)==null?void 0:G.interval)==null?void 0:z.maxSpacing}))!=null?i:45},label:{format:(s=Gs(y,O=>{var P,w,R,G,z;return(z=(G=(R=(w=(P=O.overrides)==null?void 0:P.common)==null?void 0:w.axes)==null?void 0:R.number)==null?void 0:G.label)==null?void 0:z.format}))!=null?s:".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...E,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],annotations:{enabled:m},tooltip:{enabled:!1},data:x,titlePadding:4},T),I),N),C),b)}function ZV(t,e,i,s,n,a){var o;if(!n)return[];const r=Gs(t,c=>{var h,u,d;return(d=(u=(h=c.overrides)==null?void 0:h.bar)==null?void 0:u.series)==null?void 0:d.fill}),l=r?{fill:r}:{itemStyler({datum:c}){const{up:h,down:u}=e().palette;return{fill:c[i]<c[s]?h?.fill:u?.fill}}};return[B({type:"bar",xKey:"date",yKey:a,tooltip:{enabled:!1},fillOpacity:(o=Gs(t,c=>{var h,u,d;return(d=(u=(h=c.overrides)==null?void 0:h.bar)==null?void 0:u.series)==null?void 0:d.fillOpacity}))!=null?o:.5},l)]}function qV(t,e,i,s,n,a,o){var r,l,c,h,u,d,p;const g={xKey:i,openKey:a,closeKey:o,highKey:s,lowKey:n},f={xKey:i,yKey:o};switch(e){case"ohlc":return[B({type:"ohlc"},g)];case"line":return[K(B({type:"line"},f),{stroke:(r=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.line)==null?void 0:S.series)==null?void 0:k.stroke}))!=null?r:Qu,marker:(l=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.line)==null?void 0:S.series)==null?void 0:k.marker}))!=null?l:{enabled:!1}})];case"step-line":return[K(B({type:"line"},f),{stroke:(c=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.line)==null?void 0:S.series)==null?void 0:k.stroke}))!=null?c:Qu,interpolation:(h=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.line)==null?void 0:S.series)==null?void 0:k.interpolation}))!=null?h:{type:"step"},marker:(u=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.line)==null?void 0:S.series)==null?void 0:k.marker}))!=null?u:{enabled:!1}})];case am:const m=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b["range-area"])==null?void 0:S.series)==null?void 0:k.fill}),v=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b["range-area"])==null?void 0:S.series)==null?void 0:k.stroke});return[{type:am,xKey:i,yHighKey:s,yLowKey:o,fill:m??Zu,stroke:v??Zu},{type:am,xKey:i,yHighKey:o,yLowKey:n,fill:m??qu,stroke:v??qu}];default:case"candlestick":return[B({type:"candlestick"},g)];case"hollow-candlestick":const y=Gs(t,x=>{var b,S,k;return(k=(S=(b=x.overrides)==null?void 0:b.candlestick)==null?void 0:S.series)==null?void 0:k.item});return[K(B({type:"candlestick"},g),{item:{up:{fill:(p=(d=y?.up)==null?void 0:d.fill)!=null?p:"transparent"}}})]}}var am,QV=L({"packages/ag-charts-community/src/api/preset/priceVolumePreset.ts"(){"use strict";fe(),Ct(),am="range-area"}}),GL,JV=L({"packages/ag-charts-community/src/api/preset/presets.ts"(){"use strict";QV(),GL={"price-volume":$V}}});function t4(t){var e,i,s,n;const a=[],o=Re.get(Zr(t));for(const{type:r,chartTypes:l,optionsKey:c,optionsInnerKey:h,identifier:u}of Xr)if(!(o!=="unknown"&&!l.includes(o))){if(r==="root"||r==="legend"){const d=t[c];if(d==null)continue;h?d[h]&&(a.push(`${c}.${h}`),delete d[h]):(a.push(c),delete t[c])}else if(r==="axis"){if(!("axes"in t)||!((e=t.axes)!=null&&e.some(d=>d.type===u)))continue;a.push(`axis[type=${u}]`),t.axes=t.axes.filter(d=>d.type!==u)}else if(r==="axis-option"){if(!("axes"in t)||!((i=t.axes)!=null&&i.some(d=>d[c])))continue;a.push(`axis.${c}`),t.axes.forEach(d=>{d[c]&&delete d[c]})}else if(r==="series"){if(!((s=t.series)!=null&&s.some(d=>d.type===u)))continue;a.push(`series[type=${u}]`),t.series=t.series.filter(d=>d.type!==u)}else if(r==="series-option"){if(!((n=t.series)!=null&&n.some(d=>d[c])))continue;a.push(`series.${c}`),t.series.forEach(d=>{d[c]&&delete d[c]})}}if(a.length){let r="ag-charts-enterprise",l="https://charts.ag-grid.com/javascript/installation/";t.mode==="integrated"&&(r="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",l="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),Z.warnOnce([`unable to use these enterprise features as '${r}' has not been loaded:`,"",...a,"",`See: ${l}`].join(`
`))}}var e4=L({"packages/ag-charts-community/src/chart/factory/processEnterpriseOptions.ts"(){"use strict";yt(),Yg(),Nc(),Fu()}});function J0(t){return t?.up||t?.down||t?.neutral?"user-full":t?.fills||t?.strokes?"user-indexed":"inbuilt"}var VL=L({"packages/ag-charts-community/src/module/coreModulesTypes.ts"(){"use strict"}}),xd,UL,om,HL,ks,gn,Za=L({"packages/ag-charts-community/src/chart/themes/chartTheme.ts"(){"use strict";VL(),bi(),ue(),Ct(),Tc(),Nc(),vb(),Vg(),Zn(),gd(),fe(),xd="white",UL={fills:Object.values(os),strokes:Object.values($a)},om={get cartesian(){return{seriesTypes:Re.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Re.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Re.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Re.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:Re.flowProportionTypes,commonOptions:[]}}},HL=Object.values(om).reduce((t,{commonOptions:e})=>t.concat(e),[]),ks=class Qw{getPalette(){return UL}static getAxisDefaults(e){return kt(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:ge,color:Ke},label:{fontSize:12,fontFamily:ge,padding:5,color:Ke,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:Xu},tick:{enabled:!1,width:1,stroke:Xu},gridLine:{enabled:!0,style:[{stroke:ol,lineDash:[]}]},crossLines:{enabled:!1,fill:Wc,stroke:Wc,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:ge,padding:5,color:Ke}}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:$u},padding:{top:Wa,right:Wa,bottom:Wa,left:Wa},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:ge,color:Ke,wrapping:"hyphenate",layoutStyle:Bo,textAlign:Fo},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:ge,color:Ha,wrapping:"hyphenate",layoutStyle:Bo,textAlign:Fo},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:ge,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:Bo,textAlign:Fo},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:Ke,fontSize:12,fontFamily:ge}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Ke},inactiveStyle:{fill:Ha},highlightStyle:{fill:Ke},label:{color:Ke}}},tooltip:{enabled:!0,darkTheme:Hc,range:void 0,delay:0},overlays:{darkTheme:Hc},listeners:{}}}constructor(e={}){const{overrides:i,palette:s}=ri(e),n=this.createChartConfigPerChartType(this.getDefaults());i&&this.mergeOverrides(n,i);const a=this.getDefaultColors(),{fills:o,strokes:r}=a,l=se(a,["fills","strokes"]);this.palette=kt(s,this.getPalette(),B({},l)),this.paletteType=J0(s),this.config=Object.freeze(this.templateTheme(n))}mergeOverrides(e,i){for(const{seriesTypes:s,commonOptions:n}of Object.values(om)){const a=B({},i.common);for(const o of HL)n.includes(o)||delete a[o];if(a)for(const o of s){const r=o;e[r]=kt(a,e[r])}}Re.seriesTypes.forEach(s=>{const n=s;i[n]&&(e[n]=kt(i[n],e[n]))})}createChartConfigPerChartType(e){for(const[i,{seriesTypes:s}]of Object.entries(om)){const n=Gg.get(i);for(const a of s)e[a]||(e[a]=ri(n))}return e}getDefaults(){const e=(i,s)=>{var n;const a={},o=B(B(B({axes:{}},Fg.getThemeTemplates()),this.getChartDefaults()),Gg.get(i));for(const r of s){a[r]=kt(Wi.getThemeTemplate(r),(n=a[r])!=null?n:ri(o));const{axes:l}=a[r];for(const c of Ea.keys())l[c]=kt(l[c],Ea.getThemeTemplate(c),Qw.cartesianAxisDefault[c])}return a};return kt(e("cartesian",Re.cartesianTypes),e("polar",Re.polarTypes),e("hierarchy",Re.hierarchyTypes),e("topology",Re.topologyTypes),e("flow-proportion",Re.flowProportionTypes))}templateTheme(e){const i=ri(e),s=this.getTemplateParameters();return Bn(i,n=>{if(ke(n))for(let a=0;a<n.length;a++){const o=n[a];s.has(o)&&(n[a]=s.get(o))}else for(const[a,o]of Object.entries(n))s.has(o)&&(n[a]=s.get(o))}),ri(i)}getDefaultColors(){return{fills:os,strokes:$a,up:{fill:os.BLUE,stroke:$a.BLUE},down:{fill:os.ORANGE,stroke:$a.ORANGE},neutral:{fill:os.GRAY,stroke:$a.GRAY}}}getTemplateParameters(){var e,i,s,n,a,o,r,l,c,h,u,d;const p=new Map;p.set(Hc,!1),p.set(ge,"Verdana, sans-serif"),p.set(Ke,"rgb(70, 70, 70)"),p.set(c0,"white"),p.set(Ha,"rgb(140, 140, 140)"),p.set(ol,"rgb(224,234,241)"),p.set(Xu,"rgb(195, 195, 195)"),p.set(Wc,"rgb(70, 70, 70)"),p.set(wo,xd),p.set($u,xd),p.set(Po,"rgba(0, 0, 0, 0.5)"),p.set(ss,[os.ORANGE,os.YELLOW,os.GREEN]),p.set(Wa,20),p.set(Bo,"block"),p.set(Fo,"center"),p.set(gf,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),p.set(ff,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),p.set(pf,xd),p.set(ns,os.BLUE),p.set(as,os.BLUE),p.set(mf,xd),p.set(Yc,"top"),p.set(qn,!1);const g=this.getDefaultColors();return p.set(Zu,(i=(e=this.palette.up)==null?void 0:e.stroke)!=null?i:g.up.stroke),p.set(h0,(n=(s=this.palette.up)==null?void 0:s.fill)!=null?n:g.up.fill),p.set(qu,(o=(a=this.palette.down)==null?void 0:a.stroke)!=null?o:g.down.stroke),p.set(u0,(l=(r=this.palette.down)==null?void 0:r.fill)!=null?l:g.down.fill),p.set(Qu,(h=(c=this.palette.neutral)==null?void 0:c.stroke)!=null?h:g.neutral.stroke),p.set(d0,(d=(u=this.palette.neutral)==null?void 0:u.fill)!=null?d:g.neutral.fill),p}},ks.cartesianAxisDefault={number:ks.getAxisDefaults({line:{enabled:!1}}),log:ks.getAxisDefaults({base:10,line:{enabled:!1}}),category:ks.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:qn}}),time:ks.getAxisDefaults({gridLine:{enabled:qn}}),"ordinal-time":ks.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:qn},crosshair:{enabled:!0,snap:!0,stroke:Ha,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}),"angle-category":ks.getAxisDefaults({gridLine:{enabled:qn}}),"angle-number":ks.getAxisDefaults({gridLine:{enabled:qn}}),"radius-category":ks.getAxisDefaults({line:{enabled:!1},tick:{enabled:!1}}),"radius-number":ks.getAxisDefaults({line:{enabled:!1},tick:{enabled:!1}}),"grouped-category":ks.getAxisDefaults()},gn=ks}}),bd,fn,$c,WL,pl,Zc=L({"packages/ag-charts-community/src/chart/themes/darkTheme.ts"(){"use strict";Za(),fe(),bd="#192232",fn={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},$c={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},WL={fills:Object.values(fn),strokes:Object.values($c)},pl=class extends gn{getDefaultColors(){return{fills:fn,strokes:$c,up:{fill:fn.BLUE,stroke:$c.BLUE},down:{fill:fn.ORANGE,stroke:$c.ORANGE},neutral:{fill:fn.GRAY,stroke:$c.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(Hc,!0),t.set(pf,bd),t.set(Ke,"white"),t.set(Ha,"#7D91A0"),t.set(ol,"#545A6E"),t.set(Wc,"white"),t.set(ss,[fn.ORANGE,fn.YELLOW,fn.GREEN]),t.set(gf,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.set(ff,["#192834","#3b5164","#496275","#577287","#668399"]),t.set($u,bd),t.set(wo,bd),t.set(ns,fn.BLUE),t.set(as,fn.BLUE),t.set(mf,bd),t}getPalette(){return WL}constructor(t){super(t)}}}}),mn,qc,YL,KL,i4=L({"packages/ag-charts-community/src/chart/themes/financialDark.ts"(){"use strict";Zc(),fe(),mn={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},qc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},YL={fills:Object.values(mn),strokes:Object.values(qc)},KL=class extends pl{getDefaultColors(){return{fills:B({},mn),strokes:B({},qc),up:{fill:mn.GREEN,stroke:qc.GREEN},down:{fill:mn.RED,stroke:qc.RED},neutral:{fill:mn.BLUE,stroke:qc.BLUE}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[mn.GREEN,mn.BLUE,mn.RED]),t.set(ns,mn.BLUE),t.set(as,mn.BLUE),t.set(ol,"#343A4E"),t.set(Wa,0),t.set(Bo,"overlay"),t.set(Fo,"left"),t.set(Yc,"bottom"),t.set(qn,!0),t}getPalette(){return YL}}}}),yn,Qc,jL,XL,s4=L({"packages/ag-charts-community/src/chart/themes/financialLight.ts"(){"use strict";Za(),fe(),yn={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},Qc={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc"},jL={fills:Object.values(yn),strokes:Object.values(Qc)},XL=class extends gn{getDefaultColors(){return{fills:B({},yn),strokes:B({},Qc),up:{fill:yn.GREEN,stroke:Qc.GREEN},down:{fill:yn.RED,stroke:Qc.RED},neutral:{fill:yn.BLUE,stroke:Qc.BLUE}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[yn.GREEN,yn.BLUE,yn.RED]),t.set(ns,yn.BLUE),t.set(as,yn.BLUE),t.set(ol,"#F2F3F3"),t.set(Wa,0),t.set(Bo,"overlay"),t.set(Fo,"left"),t.set(Yc,"bottom"),t.set(qn,!0),t}getPalette(){return jL}}}}),vn,Jc,$L,ZL,n4=L({"packages/ag-charts-community/src/chart/themes/materialDark.ts"(){"use strict";Zc(),fe(),vn={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Jc={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},$L={fills:Object.values(vn),strokes:Object.values(Jc)},ZL=class extends pl{getDefaultColors(){return{fills:vn,strokes:Jc,up:{fill:vn.BLUE,stroke:Jc.BLUE},down:{fill:vn.RED,stroke:Jc.RED},neutral:{fill:vn.GRAY,stroke:Jc.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[vn.ORANGE,vn.YELLOW,vn.GREEN]),t.set(ns,vn.BLUE),t.set(as,vn.BLUE),t}getPalette(){return $L}}}}),xn,th,qL,QL,a4=L({"packages/ag-charts-community/src/chart/themes/materialLight.ts"(){"use strict";Za(),fe(),xn={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},th={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},qL={fills:Object.values(xn),strokes:Object.values(th)},QL=class extends gn{getDefaultColors(){return{fills:xn,strokes:th,up:{fill:xn.BLUE,stroke:th.BLUE},down:{fill:xn.RED,stroke:th.RED},neutral:{fill:xn.GRAY,stroke:th.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[xn.ORANGE,xn.YELLOW,xn.GREEN]),t.set(ns,xn.BLUE),t.set(as,xn.BLUE),t}getPalette(){return qL}}}}),qa,Sd,JL,tT,eT,iT,o4=L({"packages/ag-charts-community/src/chart/themes/polychromaDark.ts"(){"use strict";Zc(),fe(),qa={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Sd={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},JL="#bbbbbb",tT="#eeeeee",eT={fills:Object.values(qa),strokes:Object.values(Sd)},iT=class extends pl{getDefaultColors(){return{fills:qa,strokes:Sd,up:{fill:qa.BLUE,stroke:Sd.BLUE},down:{fill:qa.RED,stroke:Sd.RED},neutral:{fill:JL,stroke:tT}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[qa.BLUE,qa.RED]),t.set(ns,qa.BLUE),t.set(as,qa.BLUE),t}getPalette(){return eT}}}}),Qa,Md,sT,nT,aT,oT,r4=L({"packages/ag-charts-community/src/chart/themes/polychromaLight.ts"(){"use strict";Za(),fe(),Qa={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Md={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},sT="#bbbbbb",nT="#888888",aT={fills:Object.values(Qa),strokes:Object.values(Md)},oT=class extends gn{getDefaultColors(){return{fills:Qa,strokes:Md,up:{fill:Qa.BLUE,stroke:Md.BLUE},down:{fill:Qa.RED,stroke:Md.RED},neutral:{fill:sT,stroke:nT}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[Qa.BLUE,Qa.RED]),t.set(ns,Qa.BLUE),t.set(as,Qa.BLUE),t}getPalette(){return aT}}}}),Vs,gl,rT,lT,l4=L({"packages/ag-charts-community/src/chart/themes/sheetsDark.ts"(){"use strict";Zc(),fe(),Vs={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},gl={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},rT={fills:Object.values(Vs),strokes:Object.values(gl)},lT=class extends pl{getDefaultColors(){return{fills:K(B({},Vs),{RED:Vs.ORANGE}),strokes:K(B({},gl),{RED:gl.ORANGE}),up:{fill:Vs.BLUE,stroke:gl.BLUE},down:{fill:Vs.ORANGE,stroke:gl.ORANGE},neutral:{fill:Vs.GRAY,stroke:gl.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[Vs.ORANGE,Vs.YELLOW,Vs.GREEN]),t.set(ns,Vs.BLUE),t.set(as,Vs.BLUE),t}getPalette(){return rT}}}}),Us,fl,cT,hT,c4=L({"packages/ag-charts-community/src/chart/themes/sheetsLight.ts"(){"use strict";Za(),fe(),Us={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},fl={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},cT={fills:Object.values(Us),strokes:Object.values(fl)},hT=class extends gn{getDefaultColors(){return{fills:K(B({},Us),{RED:Us.ORANGE}),strokes:K(B({},fl),{RED:fl.ORANGE}),up:{fill:fl.BLUE,stroke:Us.BLUE},down:{fill:fl.ORANGE,stroke:Us.ORANGE},neutral:{fill:fl.GRAY,stroke:Us.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[Us.ORANGE,Us.YELLOW,Us.GREEN]),t.set(ns,Us.BLUE),t.set(as,Us.BLUE),t}getPalette(){return cT}}}}),bn,eh,uT,dT,h4=L({"packages/ag-charts-community/src/chart/themes/vividDark.ts"(){"use strict";Zc(),fe(),bn={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},eh={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},uT={fills:Object.values(bn),strokes:Object.values(eh)},dT=class extends pl{getDefaultColors(){return{fills:bn,strokes:eh,up:{fill:bn.BLUE,stroke:eh.BLUE},down:{fill:bn.ORANGE,stroke:eh.ORANGE},neutral:{fill:bn.GRAY,stroke:eh.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[bn.ORANGE,bn.YELLOW,bn.GREEN]),t.set(ns,bn.BLUE),t.set(as,bn.BLUE),t}getPalette(){return uT}}}}),Sn,ih,pT,gT,u4=L({"packages/ag-charts-community/src/chart/themes/vividLight.ts"(){"use strict";Za(),fe(),Sn={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},ih={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},pT={fills:Object.values(Sn),strokes:Object.values(ih)},gT=class extends gn{getDefaultColors(){return{fills:Sn,strokes:ih,up:{fill:Sn.BLUE,stroke:ih.BLUE},down:{fill:Sn.ORANGE,stroke:ih.ORANGE},neutral:{fill:Sn.GRAY,stroke:ih.GRAY}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.set(ss,[Sn.ORANGE,Sn.YELLOW,Sn.GREEN]),t.set(ns,Sn.BLUE),t.set(as,Sn.BLUE),t}getPalette(){return pT}}}});function d4(t){if(t===null)return;let e=!0;const{baseTheme:i,palette:s,overrides:n}=t;if(i!==void 0&&typeof i!="string"&&typeof i!="object"&&(Z.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),n!==void 0&&typeof n!="object"&&(Z.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),typeof s=="object"){if(s!==null){const{fills:a,strokes:o}=s;a!==void 0&&!Array.isArray(a)&&(Z.warn("theme.overrides.fills must be undefined or an array"),e=!1),o!==void 0&&!Array.isArray(o)&&(Z.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else s!==void 0&&(Z.warn(`invalid theme.palette type ${typeof s}, expected object.`),e=!1);if(e)return t}function p4(t){if(t===void 0||typeof t=="string"||t instanceof gn)return t;if(typeof t=="object")return d4(t);Z.warn(`invalid theme value type ${typeof t}, expected object or string.`)}function tS(t){let e=p4(t);if(e instanceof gn)return e;if(e==null||typeof e=="string"){const o=eS[e];return o?o():(Z.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),sh())}const i=[];let s;for(;typeof e=="object";)i.push(e.overrides),s??(s=e.palette),e=e.baseTheme;const n={baseTheme:e,overrides:kt(...i),palette:s},a=n.baseTheme?tS(n.baseTheme):sh();return new a.constructor(n)}var sh,rm,fT,mT,eS,iS=L({"packages/ag-charts-community/src/chart/mapping/themes.ts"(){"use strict";yt(),ue(),Za(),Zc(),i4(),s4(),n4(),a4(),o4(),r4(),l4(),c4(),h4(),u4(),sh=()=>new gn,rm=()=>new pl,fT={undefined:sh,null:sh,"ag-default":sh,"ag-sheets":()=>new hT,"ag-polychroma":()=>new oT,"ag-vivid":()=>new gT,"ag-material":()=>new QL,"ag-financial":()=>new XL},mT={undefined:rm,null:rm,"ag-default-dark":rm,"ag-sheets-dark":()=>new lT,"ag-polychroma-dark":()=>new iT,"ag-vivid-dark":()=>new dT,"ag-material-dark":()=>new ZL,"ag-financial-dark":()=>new KL},eS=B(B({},mT),fT)}}),yT,sS,vT=L({"packages/ag-charts-community/src/module/optionsModule.ts"(){"use strict";Bk(),JV(),Tc(),Nc(),Fu(),e4(),Vg(),iS(),Yg(),Za(),Ve(),Ee(),Ue(),bi(),yt(),ue(),Ct(),VL(),zg(),yT=new Set(["map-shape-background","map-line-background"]),sS=class{constructor(t,e){this.debug=Xt.create(!0,"opts");var i,s,n,a,o,r;const l={shallow:["data"]};this.userOptions=ri(t,l);const c=this.optionsType(this.userOptions);let h=ri(t,l);if(this.type=e?.type,this.type!=null){const b=(n=(s=(i=GL)[this.type])==null?void 0:s.call(i,h,()=>this.activeTheme))!=null?n:h;this.debug(">>> AgCharts.createOrUpdate() - applying preset",h,b),h=b}this.activeTheme=tS(h.theme),this.type&&(h=this.activeTheme.templateTheme(h)),this.sanityCheckAndCleanup(h),this.defaultAxes=this.getDefaultAxes(h),this.specialOverrides=this.specialOverridesDefaults(B({},e));const u=this.getSeriesThemeConfig(c),{axes:d={},annotations:p={}}=u,g=p,{axesButtons:f=void 0}=g,m=se(g,["axesButtons"]),v=u,{series:y}=v,x=se(v,["axes","annotations","series"]);this.processedOptions=ri(kt(h,f!=null?{annotations:{axesButtons:f}}:{},x,this.defaultAxes),l),this.processAxesOptions(this.processedOptions,d),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.annotationThemes=m,(Oc(this.processedOptions)||tG(this.processedOptions))&&((a=this.processedOptions.legend)==null?void 0:a.enabled)==null&&((r=(o=this.processedOptions).legend)!=null||(o.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),$r.isEnterprise||t4(this.processedOptions)}getOptions(){var t;return(t=this.processedOptions)!=null?t:{}}diffOptions(t){return gs(t,this.processedOptions)}getSeriesThemeConfig(t){var e,i;return ri((i=(e=this.activeTheme)==null?void 0:e.config[t])!=null?i:{})}getDefaultAxes(t){const e=this.optionsType(t),i=Wi.cloneDefaultAxes(e);return Wi.isDefaultAxisSwapNeeded(t)&&this.swapAxesPosition(i),i}optionsType(t){var e,i,s;return(s=(i=(e=t.series)==null?void 0:e[0])==null?void 0:i.type)!=null?s:"line"}sanityCheckAndCleanup(t){var e;this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),(e=t.series)!=null&&e.some(i=>i.type==="bullet")&&t.sync!=null&&t.sync.enabled!==!1&&(Z.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){var e;if(Oc(t)){const[i,s]=(e=t.axes)!=null?e:[];t.axes=[K(B({},i),{position:s.position}),K(B({},s),{position:i.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map(i=>{var s,n,a;const o=kt((s=e[i.type])==null?void 0:s[i.position],e[i.type]),{crossLines:r}=o,l=se(o,["crossLines"]);i.crossLines&&(i.crossLines=Ev(i.crossLines,r));const c=(n=l.gridLine)==null?void 0:n.style;(a=i.gridLine)!=null&&a.style&&c?.length&&(i.gridLine.style=i.gridLine.style.map((m,v)=>m.stroke!=null||m.lineDash!=null?kt(m,c.at(v%c.length)):m));const h=kt(i,l),{top:u,right:d,bottom:p,left:g}=h;return se(h,["top","right","bottom","left"])}))}processSeriesOptions(t){var e,i;const s=this.getDefaultSeriesType(t),n=this.getTooltipPositionDefaults(t),a=Ts(t.theme)?J0((e=t.theme)==null?void 0:e.palette):"inbuilt",o={colourIndex:0,userPalette:a},r=(i=t.series)==null?void 0:i.map(l=>{var c,h;(c=l.type)!=null||(l.type=s);const u=(h=this.getSeriesThemeConfig(l.type).series)!=null?h:{},{innerLabels:d}=u,p=se(u,["innerLabels"]),g=yT.has(l.type)?{colourIndex:0,userPalette:a}:o,f=this.getSeriesPalette(l.type,g),m=this.getTooltipRangeDefaults(t,l.type),v=kt(this.getSeriesGroupingOptions(l),l,n,m,p,f,{visible:!0});return v.innerLabels&&(v.innerLabels=Ev(v.innerLabels,d)),this.activeTheme.templateTheme(v)});t.series=this.setSeriesGroupingOptions(r??[])}processMiniChartSeriesOptions(t){var e,i;let s=(i=(e=t.navigator)==null?void 0:e.miniChart)==null?void 0:i.series;if(s==null)return;const n={colourIndex:0,userPalette:Ts(t.theme)?J0(t.theme.palette):"inbuilt"};s=s.map(a=>{var o,r;(o=a.type)!=null||(a.type="line");const l=(r=this.getSeriesThemeConfig(a.type).series)!=null?r:{},{innerLabels:c}=l,h=se(l,["innerLabels"]),u=kt(this.getSeriesGroupingOptions(a),a,h,this.getSeriesPalette(a.type,n));return this.activeTheme.templateTheme(u)}),t.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}getSeriesPalette(t,e){const i=Wi.getPaletteFactory(t),{colourIndex:s,userPalette:n}=e,{fills:a=[],strokes:o=[]}=this.activeTheme.palette;return i?.({userPalette:n,colorsCount:Math.max(a.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),palette:this.activeTheme.palette,takeColors(r){return e.colourIndex+=r,{fills:rx(a,r,s),strokes:rx(o,r,s)}}})}getSeriesGroupingOptions(t){const e=Wi.isGroupable(t.type),i=Wi.isStackable(t.type),s=Wi.isStackedByDefault(t.type);t.grouped&&!e&&Z.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!i&&Z.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:n,stacked:a}=t;return a??(a=(s||t.stackGroup!=null)&&!(e&&n)),n??(n=!0),{stacked:i&&a,grouped:e&&n&&!(i&&a)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);this.debug("setSeriesGroupingOptions() - series grouping: ",e);const i={},s=e.reduce((n,a)=>{var o,r;return a.groupType==="default"||((r=n[o=a.seriesType])!=null||(n[o]=0),n[a.seriesType]+=a.groupType==="stack"?1:a.series.length),n},{});return e.flatMap(n=>{var a,o;switch((o=i[a=n.seriesType])!=null||(i[a]=0),n.groupType){case"stack":const r=i[n.seriesType]++;return n.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupIndex:r,groupCount:s[n.seriesType],stackIndex:c,stackCount:n.series.length}}));case"group":return n.series.map(l=>Object.assign(l,{seriesGrouping:{groupIndex:i[n.seriesType]++,groupCount:s[n.seriesType],stackIndex:0,stackCount:0}}))}return n.series}).map(n=>{var a=n,{stacked:o,grouped:r}=a,l=se(a,["stacked","grouped"]);return l})}getSeriesGroupId(t){var e;return[t.type,t.xKey,t.stacked?(e=t.stackGroup)!=null?e:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const e=new Map;return t.reduce((i,s)=>{const n=s.type;if(!s.stacked&&!s.grouped)i.push({groupType:"default",seriesType:n,series:[s]});else{const a=this.getSeriesGroupId(s);if(!e.has(a)){const r={groupType:s.stacked?"stack":"group",seriesType:n,series:[]};e.set(a,r),i.push(r)}e.get(a).series.push(s)}return i},[])}getDefaultSeriesType(t){if(Oc(t))return"line";if(Wg(t))return"pie";if(_b(t))return"treemap";if(kb(t))return"map-shape";if(Db(t))return"sankey";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var e;const i=(e=t.tooltip)==null?void 0:e.position;if(!Ns(i))return;const{type:s,xOffset:n,yOffset:a}=i,o={};return Os(s)&&Qk(yp,s)&&(o.type=s),Ot(n)&&(o.xOffset=n),Ot(a)&&(o.yOffset=a),{tooltip:{position:o}}}getTooltipRangeDefaults(t,e){var i,s,n;return{tooltip:{range:(n=(i=t.tooltip)==null?void 0:i.range)!=null?n:(s=Wi.getTooltipDefauls(e))==null?void 0:s.range}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([i,s])=>{var n;(n=t.series)!=null&&n.some(a=>a[i]!=null)&&Z.warnOnce(`Property [series.${i}] is deprecated, please use [series.${s}] and multiple series instead.`)})}axesTypeIntegrity(t){var e;if("axes"in t){const i=(e=t.axes)!=null?e:[];for(const{type:s}of i)if(!iG(s)){delete t.axes;const n=Array.from(Ea.publicKeys()).join(", ");Z.warnOnce(`unknown axis type: ${s}; expected one of: ${n}`)}}}seriesTypeIntegrity(t){var e;t.series=(e=t.series)==null?void 0:e.filter(({type:i})=>{if(i==null||eG(i)||Bz(i))return!0;Z.warnOnce(`unknown series type: ${i}; expected one of: ${bb.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some(i=>Wi.isSolo(i.type))){const i=this.optionsType(t);if(Wi.isSolo(i))Z.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{const{solo:s,nonSolo:n}=ox(e,o=>Wi.isSolo(o.type)?"solo":"nonSolo"),a=tg(s.map(o=>o.type)).join(", ");Z.warn(`Unable to mix these series types with the lead series type: ${a}`),t.series=n}}}enableConfiguredOptions(t){Bn(this.userOptions,(e,i)=>{i&&"enabled"in i&&!i._enabledFromTheme&&e.enabled==null&&(i.enabled=!0)},{skip:["data","theme"]},t),Bn(t,e=>{e._enabledFromTheme!=null&&delete e._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(t){Bn(t,e=>{"enabled"in e&&e.enabled===!1&&Object.keys(e).forEach(i=>{i!=="enabled"&&delete e[i]})},{skip:["data","theme"]})}removeLeftoverSymbols(t){Bn(t,e=>{if(!(!e||!Ts(e)))for(const[i,s]of Object.entries(e))Jk(s)&&delete e[i]},{skip:["data"]})}specialOverridesDefaults(t){if(t.window!=null?nI(t.window):typeof window<"u"?t.window=window:typeof global<"u"&&(t.window=global.window),t.document!=null?sI(t.document):typeof document<"u"?t.document=document:typeof global<"u"&&(t.document=global.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}}}});function xT(t){if(Oc(t))return"cartesian";if(Wg(t))return"polar";if(_b(t))return"hierarchy";if(kb(t))return"topology";if(Db(t))return"flow-proportion";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var nh,ah,Wo,nS,g4=L({"packages/ag-charts-community/src/api/agCharts.ts"(){"use strict";IG(),Pc(),AG(),VV(),HV(),YV(),KV(),Yg(),jV(),XV(),zg(),vT(),Ee(),bi(),ue(),Yx(),BI(),nh=Xt.create(!0,"opts"),ah=class{static licenseCheck(t){var e,i,s,n;this.licenseChecked||(this.licenseManager=(i=(e=$r).licenseManager)==null?void 0:i.call(e,t),(s=this.licenseManager)==null||s.setLicenseKey(this.licenseKey,this.gridContext),(n=this.licenseManager)==null||n.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var e,i;return(i=(e=$r).licenseManager)==null?void 0:i.call(e,{}).getLicenseDetails(t)}static getInstance(t){return nS.getInstance(t)}static create(t){var e,i,s;this.licenseCheck(t);const n=nS.createOrUpdate(t);return(e=this.licenseManager)!=null&&e.isDisplayWatermark()&&((s=(i=$r).injectWatermark)==null||s.call(i,n.chart.ctx.domManager,this.licenseManager.getWatermarkMessage())),n}static createFinancialChart(t){return this.create(B({_type:"price-volume"},t))}},ah.licenseChecked=!1,ah.gridContext=!1,Wo=class mr{static getInstance(e){const i=Jr.getInstance(e);return i?Kb.chartInstances.get(i):void 0}static initialiseModules(){mr.initialised||(GV(),UV(),mr.initialised=!0)}static createOrUpdate(e,i){var s;mr.initialiseModules(),nh(">>> AgCharts.createOrUpdate() user options",e);const n=i?.chart.chartOptions.type,a=e,{_type:o=n}=a;let l=se(a,["_type"]);ah.optionsMutationFn&&(l=ah.optionsMutationFn(l,o),nh(">>> AgCharts.createOrUpdate() MUTATED user options",e));const c=l,{overrideDevicePixelRatio:h,document:u,window:d}=c,p=se(c,["overrideDevicePixelRatio","document","window"]),g=new sS(p,{overrideDevicePixelRatio:h,document:u,window:d,type:o});let f=i?.chart;return(f==null||xT(p)!==xT(f?.chartOptions.processedOptions))&&(f=mr.createChartInstance(g,f)),i==null?i=new Kb(f,mr.callbackApi):i.chart=f,nh.check()&&typeof window<"u"&&((s=window.agChartInstances)!=null||(window.agChartInstances={}),window.agChartInstances[f.id]=f),f.queuedUserOptions.push(p),f.requestFactoryUpdate(m=>{m.applyOptions(g);const v=m.queuedUserOptions.indexOf(p)+1;m.queuedUserOptions.splice(0,v),m.applyInitialState()}),i}static updateUserDelta(e,i){i=ri(i,{shallow:["data"]}),Bn(i,o=>{if(typeof o=="object")for(const[r,l]of Object.entries(o))typeof l>"u"&&Object.assign(o,{[r]:Symbol("UNSET")})},{skip:["data"]});const{chart:s}=e,n=s.getOptions(),a=kt(i,n);nh(">>> AgCharts.updateUserDelta() user delta",i),nh("AgCharts.updateUserDelta() - base options",n),mr.createOrUpdate(a,e)}static createChartInstance(e,i){const s=i?.destroy({keepTransferableResources:!0}),n=mr.getChartByOptions(e.processedOptions);return new n(e,s)}static getChartByOptions(e){if(Oc(e))return bA;if(_b(e))return RL;if(Wg(e))return PL;if(kb(e))return zL;if(Db(e))return EL;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}},Wo.caretaker=new Kx(Dg),Wo.initialised=!1,Wo.callbackApi={caretaker:Wo.caretaker,createOrUpdate(t,e){return Wo.createOrUpdate(t,e)},updateUserDelta(t,e){return Wo.updateUserDelta(t,e)}},nS=Wo}}),Mn,f4=L({"packages/ag-charts-community/src/scene/shape/arc.ts"(){"use strict";zi(),_t(),Mt(),un(),ko(),Mn=class extends ki{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return br(oe(this.startAngle),oe(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?t.closePath():this.type===2&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new ot(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return this.type!==0&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}},Mn.className="Arc",Mn.defaultStyles=Object.assign({},xs.defaultStyles,{lineWidth:1,fillStyle:null}),_([mt()],Mn.prototype,"centerX",2),_([mt()],Mn.prototype,"centerY",2),_([mt()],Mn.prototype,"radius",2),_([mt()],Mn.prototype,"startAngle",2),_([mt()],Mn.prototype,"endAngle",2),_([mt()],Mn.prototype,"counterClockwise",2),_([mt()],Mn.prototype,"type",2)}}),_d,m4=L({"packages/ag-charts-community/src/scene/shape/linearGradientFill.ts"(){"use strict";dd(),ae(),ko(),_d=class extends xs{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){this._mask!=null&&this.removeChild(this._mask),t!=null&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,s;return(s=(i=this.mask)==null?void 0:i.isPointInPath(t,e))!=null?s:!1}computeBBox(){var t;return(t=this.mask)==null?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:s,devicePixelRatio:n}=t,a=1/n,o=e?.computeTransformedBBox();if(e==null||i==null||o==null)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),s.save(),s.clip(e.path.getPath2D()),s.setTransform(n,0,0,n,0,0);const r=Math.floor(o.x),l=Math.ceil(o.x+o.width),c=Math.floor(o.y),h=Math.ceil(o.y+o.height),u=this.direction==="to-right"||this.direction==="to-left",d=this.direction==="to-top"||this.direction==="to-left",p=new Uo,[g,f]=u?[r,l]:[c,h];p.domain=i.map((y,x)=>g+(f-g)*x/(i.length-1)),p.range=d?i.slice().reverse():i,p.update();const m=h-c,v=l-r;switch(this.direction){case"to-right":case"to-left":for(let y=r;y<=l;y+=a)s.fillStyle=p.convert(y),s.fillRect(y,c,a,m);break;case"to-bottom":case"to-top":for(let y=c;y<=h;y+=a)s.fillStyle=p.convert(y),s.fillRect(r,y,v,a);break}s.restore()}},_([at({redraw:3})],_d.prototype,"direction",2),_([at({redraw:3})],_d.prototype,"stops",2),_([at({redraw:3})],_d.prototype,"_mask",2)}});function aS(t,e,i){const s=Math.sqrt(nt(t,2)+nt(e,2)),a=Math.atan2(e,t)+i;return{x:Math.cos(a)*s,y:Math.sin(a)*s}}function y4(t,e,i,s,n){const a=og(t,e),o=a*(1-s)/2;if(t+=o,e-=o,a<.001)return 2*i*n;if(a>=2*Math.PI){const p=t+a/2;t=p-Math.PI,e=p+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),c=i*Math.cos(e),h=i*Math.sin(e),u=Math.floor(Math.sqrt(nt(r-c,2)+nt(l-h,2))),d=2*i*n;return Math.max(1,Math.min(d,u))}var Hs,v4=L({"packages/ag-charts-community/src/scene/shape/radialColumnShape.ts"(){"use strict";zi(),_t(),Mt(),un(),Hs=class extends ki{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){const{innerRadius:t,outerRadius:e,columnWidth:i}=this,s=this.getRotation(),n=-i/2,a=i/2,o=-e,r=-t;let l=1/0,c=1/0,h=-1/0,u=-1/0;for(let d=0;d<4;d+=1){const{x:p,y:g}=aS(d%2===0?n:a,d<2?o:r,s);l=Math.min(p,l),c=Math.min(g,c),h=Math.max(p,h),u=Math.max(g,u)}return new ot(l,c,h-l,u-c)}getRotation(){const{startAngle:t,endAngle:e}=this,i=og(t,e);return oe(t+i/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,n=-t/2,a=t/2,o=-i,r=-e,l=this.getRotation(),c=[[n,r],[n,o],[a,o],[a,r]].map(([h,u])=>aS(h,u,l));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:o}=this,r=br(s,n),l=Math.asin(t/2/s),c=this.getRotation(),h=(T,I)=>aS(T,I,c),u=(T,I)=>Math.sqrt(nt(T,2)+nt(I,2)),d=(T,I)=>I>T?0:Math.sqrt(nt(T,2)-nt(I,2)),p=(T,I,N)=>N?T<I:T>I,g=r&&!isNaN(l)&&l<Math.PI/6;let f=-t/2,m=t/2;const v=-i,y=-s*(g?Math.cos(l):1),x=p(a,u(s,t/2),!o);if(x){const T=d(a,s);f=-T,m=T}e.clear(!0);const b=h(f,y);e.moveTo(b.x,b.y);const S=br(s,i),k=p(a,u(i,t/2),!o);if(S&&g)e.arc(0,0,s,oe(-l-Math.PI/2)+c,oe(l-Math.PI/2)+c,!1);else if(k){const T=-d(a,t/2),I=d(a,i);if(!x){const N=h(f,T);e.lineTo(N.x,N.y)}if(e.arc(0,0,a,Math.atan2(T,f)+c,Math.atan2(v,-I)+c,!1),!br(I,0)){const N=h(I,v);e.lineTo(N.x,N.y)}e.arc(0,0,a,Math.atan2(v,I)+c,Math.atan2(T,m)+c,!1)}else{const T=h(f,v),I=h(m,v);e.lineTo(T.x,T.y),e.lineTo(I.x,I.y)}const D=h(m,y);if(e.lineTo(D.x,D.y),g)e.arc(0,0,s,oe(l-Math.PI/2)+c,oe(-l-Math.PI/2)+c,!0);else{const T=h(f,y);e.lineTo(T.x,T.y)}e.closePath()}},Hs.className="RadialColumnShape",_([mt()],Hs.prototype,"isBeveled",2),_([mt()],Hs.prototype,"columnWidth",2),_([mt()],Hs.prototype,"startAngle",2),_([mt()],Hs.prototype,"endAngle",2),_([mt()],Hs.prototype,"outerRadius",2),_([mt()],Hs.prototype,"innerRadius",2),_([mt()],Hs.prototype,"axisInnerRadius",2),_([mt()],Hs.prototype,"axisOuterRadius",2),_([mt()],Hs.prototype,"isRadiusAxisReversed",2)}}),ml,x4=L({"packages/ag-charts-community/src/scene/image.ts"(){"use strict";ae(),ml=class extends Mr{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(this.dirty===0&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}},_([at({redraw:3})],ml.prototype,"x",2),_([at({redraw:3})],ml.prototype,"y",2),_([at({redraw:3})],ml.prototype,"width",2),_([at({redraw:3})],ml.prototype,"height",2),_([at({redraw:3})],ml.prototype,"opacity",2)}}),bT={};tn(bT,{Arc:()=>Mn,BBox:()=>ot,BandScale:()=>Sa,Caption:()=>qt,ChangeDetectableProperties:()=>yf,Circle:()=>wa,ContinuousScale:()=>zt,Diamond:()=>zb,DropShadow:()=>zs,ExtendedPath2D:()=>Ic,Group:()=>ut,HdpiCanvas:()=>Ig,Image:()=>ml,Label:()=>Oe,Line:()=>He,LinearGradientFill:()=>_d,LinearScale:()=>pn,Marker:()=>Qe,Node:()=>Mr,OrdinalTimeScale:()=>Cs,Path:()=>ki,PointerEvents:()=>Ov,RadialColumnShape:()=>Hs,Rect:()=>Ii,RedrawType:()=>va,Scene:()=>Lg,SceneChangeDetection:()=>at,ScenePathChangeDetection:()=>mt,Sector:()=>Je,SectorBox:()=>U0,Selection:()=>pe,Shape:()=>xs,Square:()=>Bc,Text:()=>wt,Tooltip:()=>Ms,Triangle:()=>tl,easing:()=>zv,getFont:()=>Pr,getMarker:()=>Kn,getRadialColumnWidth:()=>y4,motion:()=>ST,sectorBox:()=>H0,toRadians:()=>Fi,toTooltipHtml:()=>Sc});var ST,b4=L({"packages/ag-charts-community/src/integrated-charts-scene.ts"(){"use strict";li(),Do(),zr(),jc(),p0(),be(),WI(),ae(),Io(),f4(),xc(),m4(),un(),of(),W0(),pd(),v4(),ko(),hi(),Ji(),Tr(),_u(),Gc(),zi(),Es(),Bs(),Pa(),Vu(),gA(),mA(),Ub(),Hi(),Mt(),pL(),Xx(),x4(),Zx(),lc(),ST=B(B({},oD),eI)}}),MT={};tn(MT,{CARTESIAN_AXIS_TYPE:()=>o0,ChartTheme:()=>gn,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>as,DEFAULT_ANNOTATION_HANDLE_FILL:()=>mf,DEFAULT_ANNOTATION_STROKE:()=>ns,DEFAULT_AXIS_GRID_COLOUR:()=>ol,DEFAULT_AXIS_LINE_COLOUR:()=>Xu,DEFAULT_BACKGROUND_COLOUR:()=>$u,DEFAULT_CAPTION_ALIGNMENT:()=>Fo,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Bo,DEFAULT_COLOURS:()=>EA,DEFAULT_CROSS_LINES_COLOUR:()=>Wc,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>ss,DEFAULT_FONT_FAMILY:()=>ge,DEFAULT_GRIDLINE_ENABLED:()=>qn,DEFAULT_HIERARCHY_FILLS:()=>gf,DEFAULT_HIERARCHY_STROKES:()=>ff,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>wo,DEFAULT_INVERTED_LABEL_COLOUR:()=>c0,DEFAULT_LABEL_COLOUR:()=>Ke,DEFAULT_MUTED_LABEL_COLOUR:()=>Ha,DEFAULT_PADDING:()=>Wa,DEFAULT_POLAR_SERIES_STROKE:()=>pf,DEFAULT_SHADOW_COLOUR:()=>Po,DEFAULT_TOOLBAR_POSITION:()=>Yc,FONT_SIZE:()=>s0,FONT_WEIGHT:()=>n0,IS_DARK_THEME:()=>Hc,PALETTE_DOWN_FILL:()=>u0,PALETTE_DOWN_STROKE:()=>qu,PALETTE_NEUTRAL_FILL:()=>d0,PALETTE_NEUTRAL_STROKE:()=>Qu,PALETTE_UP_FILL:()=>h0,PALETTE_UP_STROKE:()=>Zu,POLAR_AXIS_SHAPE:()=>l0,POLAR_AXIS_TYPE:()=>r0,POSITION:()=>a0,getChartTheme:()=>tS,markerPaletteFactory:()=>df,singleSeriesPaletteFactory:()=>Uc,themes:()=>_T});var _T,S4=L({"packages/ag-charts-community/src/integrated-charts-theme.ts"(){"use strict";iS(),ue(),iS(),Za(),fe(),Zn(),al(),_T=Rv(eS,t=>t?.())}}),M4=L({"packages/ag-charts-community/src/scale/scale.ts"(){"use strict"}}),kT={};tn(kT,{BandScale:()=>Sa,ColorScale:()=>Uo,ContinuousScale:()=>zt,Invalidating:()=>Ge,LinearScale:()=>pn,OrdinalTimeScale:()=>Cs,TimeScale:()=>Mu});var _4=L({"packages/ag-charts-community/src/sparklines-scale.ts"(){"use strict";ng(),Tr(),Ji(),_u(),dd(),Gc(),M4(),hc()}});function k4(t,e){return{x:t.x+e.x,y:t.y+e.y}}function oS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function D4(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function I4(t){return t.x*t.x+t.y*t.y}function A4(t,e){const i=oS(t,e);return Math.sqrt(i.x*i.x+i.y*i.y)}function L4(t,e){const i=oS(t,e);return i.x*i.x+i.y*i.y}function T4(t,e){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)}function N4(t,e,i=DT()){const s=rS.length(t);return{x:i.x+s*Math.cos(e),y:i.y+s*Math.sin(e)}}function O4(t,e){return t.x===e.x&&t.y===e.y}function C4(t,e){return{x:t,y:e}}function E4(t){return{x:t.offsetX,y:t.offsetY}}function R4(t,e){return t.x=e.x,t.y=e.y,t}function DT(t){var e,i;return{x:(e=t?.x)!=null?e:0,y:(i=t?.y)!=null?i:0}}var rS,w4=L({"packages/ag-charts-community/src/util/vector.ts"(){"use strict";rS={add:k4,angle:T4,apply:R4,equal:O4,distance:A4,distanceSquared:L4,from:C4,fromOffset:E4,length:D4,lengthSquared:I4,required:DT,rotate:N4,sub:oS}}});function P4(t,e){const i={};if(Array.isArray(e))for(let s=0;s<t.length;s++)i[`${t[s]}`]=e[s];else for(let s=0;s<t.length;s++)i[`${t[s]}`]=e;return i}var B4=L({"packages/ag-charts-community/src/util/zip.ts"(){"use strict"}}),IT={};tn(IT,{Color:()=>nn,Debug:()=>Xt,Logger:()=>Z,Padding:()=>Ca,TimeInterval:()=>So,Vec2:()=>rS,angleBetween:()=>og,angleDiff:()=>FD,areArrayItemsStrictlyEqual:()=>uI,areArrayNumbersEqual:()=>dI,bifurcate:()=>MD,checkDatum:()=>gx,clamp:()=>St,clampArray:()=>Rp,countFractionDigits:()=>Bp,createId:()=>wn,day:()=>kp,deepClone:()=>ri,displacePointFromVector:()=>yF,extent:()=>Vn,findMinMax:()=>Ls,findRangeExtent:()=>Jh,formatNormalizedPercentage:()=>Lv,formatPercentage:()=>Tv,friday:()=>fv,hour:()=>_p,interpolateColor:()=>Kk,interpolateNumber:()=>Yk,isBetweenAngles:()=>_o,isContinuous:()=>cg,isDate:()=>au,isDenseInterval:()=>Su,isEqual:()=>br,isNegative:()=>nc,isNumber:()=>Ot,isNumberEqual:()=>br,isNumberObject:()=>KD,isString:()=>Os,isStringObject:()=>YD,jsonApply:()=>ba,jsonDiff:()=>gs,jsonWalk:()=>Bn,millisecond:()=>bp,minute:()=>Mp,mod:()=>Pp,monday:()=>uv,month:()=>Ap,normalisedExtent:()=>SD,normalisedExtentWithMetadata:()=>xu,normalizeAngle180:()=>ku,normalizeAngle360:()=>oe,normalizeAngle360Inclusive:()=>fF,range:()=>bu,resetIds:()=>Hk,round:()=>Av,sanitizeHtml:()=>re,saturday:()=>mv,second:()=>Sp,setAttribute:()=>Br,shallowClone:()=>Wp,sunday:()=>Ip,thursday:()=>gv,tickFormat:()=>ED,tickStep:()=>uc,ticks:()=>sg,toDegrees:()=>mF,toFixed:()=>wp,toRadians:()=>Fi,transformIntegratedCategoryValue:()=>yc,tuesday:()=>dv,utcDay:()=>Mv,utcHour:()=>Sv,utcMinute:()=>bv,utcMonth:()=>_v,utcYear:()=>kv,uuid:()=>CB,wednesday:()=>pv,year:()=>Lp,zipObject:()=>P4});var F4=L({"packages/ag-charts-community/src/sparklines-util.ts"(){"use strict";zi(),Tu(),pI(),en(),jk(),bi(),_t(),Wx(),Ya(),vc(),w4(),B4(),Ct(),Ve(),_t(),pc(),Np(),pc(),Vp(),Ee(),yt()}});function lS(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");Z.warnOnce(i)}}function z4(t,e){const i=lS(),s=e?.default;return xa((n,a,o)=>(o!==s&&i(a.toString(),t),o))}function G4(t,e){const i=lS();return xa((s,n,a)=>(a!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),Bv(s,t,e?e(a):a)),iu),(s,n)=>(i(n.toString(),`Use [${t}] instead.`),Pv(s,t)))}var V4=L({"packages/ag-charts-community/src/util/deprecation.ts"(){"use strict";kr(),yt(),ue()}}),U4=L({"packages/ag-charts-community/src/util/types.ts"(){"use strict"}}),H4=L({"packages/ag-charts-community/src/module/axisModule.ts"(){"use strict"}}),W4=L({"packages/ag-charts-community/src/module/baseModule.ts"(){"use strict"}}),Y4=L({"packages/ag-charts-community/src/module/coreModules.ts"(){"use strict"}}),K4=L({"packages/ag-charts-community/src/module/optionsModuleTypes.ts"(){"use strict"}}),j4=L({"packages/ag-charts-community/src/module/axisContext.ts"(){"use strict"}}),X4=L({"packages/ag-charts-community/src/module/moduleContext.ts"(){"use strict"}}),$4=L({"packages/ag-charts-community/src/chart/chartAnimationPhase.ts"(){"use strict"}}),Z4=L({"packages/ag-charts-community/src/chart/series/seriesEvents.ts"(){"use strict"}}),q4=L({"packages/ag-charts-community/src/chart/series/seriesTypes.ts"(){"use strict"}});function Q4({defs:t,values:e,xAxis:i,yAxis:s}){if(!(i&&s))throw new Error("Axes must be defined");const n={};for(const[a,{def:o}]of t)if(Object.hasOwn(e,a)){const{scale:r}=o.type==="key"?i:s;n[a]=Math.round(r.convert(e[a]))}return n}var J4=L({"packages/ag-charts-community/src/chart/series/util.ts"(){"use strict"}}),cS,oh,AT,tU=L({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeries.ts"(){"use strict";Do(),dd(),yt(),_t(),Lu(),Di(),cS=class qy{constructor(e,i,s,n,a,o,r,l,c,h,u){this.series=e,this.index=i,this.datum=s,this.size=n,this.colorValue=a,this.fill=o,this.stroke=r,this.sumSize=l,this.depth=c,this.parent=h,this.children=u,this.midPoint={x:0,y:0}}contains(e){let i=e;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(e,i=qy.Walk.PreOrder){i===qy.Walk.PreOrder&&e(this),this.children.forEach(s=>{s.walk(e,i)}),i===qy.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*ev(e)}},cS.Walk={PreOrder:0,PostOrder:1},oh=cS,AT=class extends Qr{constructor(t){super({moduleCtx:t,pickModes:[3,0],contentGroupVirtual:!1}),this.rootNode=new oh(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.focusPath=[],this.animationState=new bc("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}processData(){return F(this,null,function*(){var t,e;const{childrenKey:i,sizeKey:s,colorKey:n,fills:a,strokes:o,colorRange:r}=this.properties;let l=0;const c=()=>(l+=1,l);let h=0,u=1/0,d=-1/0;const p=new Array(((e=(t=this.data)==null?void 0:t.length)!=null?e:0)+1).fill(void 0),g=(x,b)=>{const S=c(),k=b.depth!=null?b.depth+1:0,D=i!=null?x[i]:void 0,T=D==null||D.length===0;let I=s!=null?x[s]:void 0;Number.isFinite(I)?I=Math.max(I,0):I=T?1:0;const N=I;h=Math.max(h,k);const C=n!=null?x[n]:void 0;return typeof C=="number"&&(p[S]=C,u=Math.min(u,C),d=Math.max(d,C)),f(new oh(this,S,x,I,C,void 0,void 0,N,k,b,[]),D)},f=(x,b)=>(b?.forEach(S=>{const k=g(S,x);x.children.push(k),x.sumSize+=k.sumSize}),x),m=f(new oh(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),v=[u,d];let y;r!=null&&Number.isFinite(u)&&Number.isFinite(d)&&(y=new Uo,y.domain=v,y.range=r,y.update()),m.children.forEach((x,b)=>{x.walk(S=>{let k;const D=p[S.index];D!=null&&(k=y?.convert(D)),k??(k=a?.[b%a.length]),S.fill=k,S.stroke=y==null?o?.[b%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=m,this.maxDepth=h,this.colorDomain=v,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]})}update(t){return F(this,arguments,function*({seriesRect:e}){yield this.updateSelections(),yield this.updateNodes();const i=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)})}resetAllAnimation(t){var e;const i=(e=this.animationResetFns)==null?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),i!=null&&Ce(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=(e=this.animationResetFns)==null?void 0:e.datum;i!=null&&Ce([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s,visible:n}=this.properties;return t==="gradient"&&e!=null&&s!=null?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}pickFocus(t){var e,i;if(this.rootNode.children.length===0)return;this.focusPath.length===0&&Z.error("this.focusPath should not be empty");const{datumIndexDelta:s,otherIndexDelta:n}=t,{focusPath:a}=this,o=a.length-2;if(n!==0||a.length===1){const r=Math.max(0,o+n);if(a[r+1]!==void 0)return a.length=r+2,this.computeFocusOutputs(a[r+1]);{let l=a[a.length-1];for(;l.nodeDatum.children.length>0&&((e=l.nodeDatum.depth)!=null?e:-1)<r;){const c={nodeDatum:l.nodeDatum.children[0],childIndex:0};a.push(c),l=c}return this.computeFocusOutputs(l)}}else if(s!==0){const r=a[o+1].childIndex+s,l=a[o].nodeDatum,c=(i=l?.children)==null?void 0:i.length;if(c!==void 0){const h=St(0,r,c-1),u={nodeDatum:l.children[h],childIndex:h};return a[o+1]=u,a.length=o+2,this.computeFocusOutputs(u)}}else return this.computeFocusOutputs(a[a.length-1])}getDatumAriaText(t,e){var i;if(!(t instanceof oh)){Z.error(`datum is not HierarchyNode: ${t}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:((i=t.depth)!=null?i:-1)+1,count:t.children.length,description:e})}computeFocusOutputs({nodeDatum:t,childIndex:e}){const i=this.computeFocusBounds(t);if(i)return{datum:t,datumIndex:e,otherIndex:t.depth,bounds:i,showFocusBox:!0}}}}}),Ja,eU=L({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeriesProperties.ts"(){"use strict";gt(),gd(),Hu(),Ja=class extends Fs{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(os),this.strokes=Object.values($a)}},_([A(et)],Ja.prototype,"childrenKey",2),_([A(et,{optional:!0})],Ja.prototype,"sizeKey",2),_([A(et,{optional:!0})],Ja.prototype,"colorKey",2),_([A(et,{optional:!0})],Ja.prototype,"colorName",2),_([A(ms)],Ja.prototype,"fills",2),_([A(ms)],Ja.prototype,"strokes",2),_([A(ms,{optional:!0})],Ja.prototype,"colorRange",2)}}),iU=L({"packages/ag-charts-community/src/chart/series/topologySeries.ts"(){"use strict"}}),sU=L({"packages/ag-charts-community/src/chart/series/flowProportionSeries.ts"(){"use strict"}}),nU=L({"packages/ag-charts-community/src/chart/series/topology/geojson.ts"(){"use strict"}}),LT,aU=L({"packages/ag-charts-community/src/chart/series/topology/lonLatBbox.ts"(){"use strict";LT=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}}}}),oU=L({"packages/ag-charts-community/src/chart/chartAxis.ts"(){"use strict"}}),TT,rU=L({"packages/ag-charts-community/src/chart/legendDatum.ts"(){"use strict";TT=0}}),NT={};tn(NT,{AND:()=>fs,ARRAY:()=>Or,ARRAY_OF:()=>zn,AbstractBarSeries:()=>E0,AbstractBarSeriesProperties:()=>If,ActionOnSet:()=>Vi,Animation:()=>Hv,AnimationManager:()=>Qx,AreaSeriesTag:()=>T0,Axis:()=>Sg,AxisInterval:()=>Vr,AxisLabel:()=>Se,AxisTick:()=>Ur,BOOLEAN:()=>pt,BOOLEAN_ARRAY:()=>gD,Background:()=>Vc,BackgroundModule:()=>qb,BaseModuleInstance:()=>kc,BaseProperties:()=>xt,COLOR_STRING:()=>Et,COLOR_STRING_ARRAY:()=>ms,CartesianAxis:()=>Hr,CartesianSeries:()=>Fa,CartesianSeriesNodeEvent:()=>sf,CartesianSeriesProperties:()=>Ba,CategoryAxis:()=>La,ChartAxisDirection:()=>Qp,ChartEventManager:()=>Jx,ChartOptions:()=>sS,ChartUpdateType:()=>Lc,ContextMenuRegistry:()=>tb,Cursor:()=>eb,CursorManager:()=>ib,DATE:()=>Xp,DATE_ARRAY:()=>fD,DATE_OR_DATETIME_MS:()=>$p,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Oo,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Co,DEFAULT_TOOLTIP_CLASS:()=>ln,DEFAULT_TOOLTIP_DARK_CLASS:()=>Tx,DEGREE:()=>Ma,DIRECTION:()=>tx,DOMManager:()=>$x,DataController:()=>yb,DataModel:()=>fb,DataModelSeries:()=>ef,DataService:()=>wu,Default:()=>Lo,Deprecated:()=>z4,DeprecatedAndRenamedTo:()=>G4,EMPTY_TOOLTIP_CONTENT:()=>Hn,FONT_STYLE:()=>_a,FONT_WEIGHT:()=>ka,FUNCTION:()=>Bi,GREATER_THAN:()=>Er,GestureDetector:()=>sb,GroupedCategoryAxis:()=>Ta,HierarchyNode:()=>oh,HierarchySeries:()=>AT,HierarchySeriesProperties:()=>Ja,HighlightManager:()=>nb,HighlightStyle:()=>Fc,INTERACTION_RANGE:()=>vu,INTERPOLATION_STEP_POSITION:()=>y0,INTERPOLATION_TYPE:()=>m0,InteractionManager:()=>Ex,InteractionState:()=>Gr,InterpolationProperties:()=>rl,KeyNavManager:()=>ab,LABEL_PLACEMENT:()=>qp,LARGEST_KEY_INTERVAL:()=>Cb,LESS_THAN:()=>Cr,LINE_CAP:()=>Qv,LINE_DASH:()=>Gn,LINE_JOIN:()=>mD,Layers:()=>px,LayoutService:()=>hb,LonLatBBox:()=>LT,MARKER_SHAPE:()=>g0,MATCHING_CROSSLINE_TYPE:()=>hg,MAX_SPACING:()=>sx,MIN_SPACING:()=>ix,MercatorScale:()=>sm,ModuleRegistry:()=>Ux,Motion:()=>zv,NAN:()=>gu,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Si,NUMBER:()=>jt,NUMBER_ARRAY:()=>mu,NUMBER_OR_NAN:()=>Nr,Navigator:()=>Ua,NavigatorModule:()=>i0,OBJECT:()=>rt,OBJECT_ARRAY:()=>qv,OR:()=>Mo,OVERFLOW_STRATEGY:()=>vD,ObserveChanges:()=>Ui,PHASE_METADATA:()=>cc,PHASE_ORDER:()=>Ar,PLACEMENT:()=>ex,PLAIN_OBJECT:()=>Xv,POINTER_INTERACTION_TYPES:()=>yg,POSITION:()=>Zp,POSITION_TOP_COORDINATES:()=>Iu,POSITIVE_NUMBER:()=>q,PolarAxis:()=>dl,PolarSeries:()=>md,PropertiesArray:()=>ou,ProxyOnWrite:()=>CF,ProxyProperty:()=>We,ProxyPropertyOnWrite:()=>_i,QUICK_TRANSITION:()=>lu,RATIO:()=>Rt,REGIONS:()=>Rx,RepeatType:()=>Uv,SKIP_JS_BUILTINS:()=>Hp,SMALLEST_KEY_INTERVAL:()=>Ob,SORT_DOMAIN_GROUPS:()=>Eb,STRING:()=>et,STRING_ARRAY:()=>Zv,Series:()=>Qr,SeriesGroupingChangedEvent:()=>Xg,SeriesItemHighlightStyle:()=>jn,SeriesMarker:()=>Ki,SeriesNodeEvent:()=>wc,SeriesNodePickMode:()=>Bb,SeriesProperties:()=>Fs,SeriesTooltip:()=>Ai,StateMachine:()=>bc,TEXT_ALIGN:()=>Jv,TEXT_WRAP:()=>yu,TICK_INTERVAL:()=>Px,ToolbarManager:()=>lb,Tooltip:()=>Ms,TooltipManager:()=>Pu,TooltipPosition:()=>Fr,UNION:()=>Jt,UpdateService:()=>ub,VERTICAL_ALIGN:()=>yD,Validate:()=>A,ZoomManager:()=>Sb,__FORCE_MODULE_DETECTION:()=>TT,accumulateContinuity:()=>tA,accumulateGroup:()=>J2,accumulatedValue:()=>q2,accumulativeValueProperty:()=>Pb,addHitTestersToQuadtree:()=>N0,adjustLabelPlacement:()=>nL,allInStringUnion:()=>eg,animationValidation:()=>Rc,area:()=>Tb,arraysEqual:()=>Rr,assignJsonApplyConstructedArray:()=>xD,backfillPathPointData:()=>_0,basicContinuousCheckDatumValidation:()=>Rb,bifurcate:()=>MD,buildFormatter:()=>cu,buildResetPathFn:()=>D0,calculateDefaultTimeTickFormat:()=>dD,calculateLabelChartPadding:()=>XD,calculateLabelTranslation:()=>mx,calculatePlacement:()=>gI,checkCrisp:()=>iL,childrenIter:()=>JA,circularSliceArray:()=>rx,clamp:()=>St,clampArray:()=>Rp,collapsedStartingBarPosition:()=>cd,computeBarFocusBounds:()=>P0,computeMarkerFocusBounds:()=>sd,computeSectorFocusBounds:()=>vL,computeSectorSeriesFocusBounds:()=>LV,convertValuesToScaleByDefs:()=>Q4,countFractionDigits:()=>Bp,createDatumId:()=>No,createDeprecationWarning:()=>lS,createElement:()=>ui,dateToNumber:()=>Qi,deconstructSelectionsOrNodes:()=>Yp,deepClone:()=>ri,deepMerge:()=>jB,defaultTimeTickFormat:()=>jv,determinePathStatus:()=>I0,diff:()=>qr,downloadUrl:()=>iI,enterpriseModule:()=>$r,extent:()=>Vn,extractDecoratedProperties:()=>HB,findMinMax:()=>Ls,findQuadtreeMatch:()=>O0,findRangeExtent:()=>Jh,fixNumericExtent:()=>es,formatNormalizedPercentage:()=>Lv,formatPercentage:()=>Tv,fromToMotion:()=>xe,getDocument:()=>Da,getMissCount:()=>gb,getPath:()=>Pv,getPathComponents:()=>w2,getRectConfig:()=>eL,getWindow:()=>Un,groupAccumulativeContinuityProperty:()=>sA,groupAccumulativeValueProperty:()=>dn,groupAverage:()=>Z2,groupBy:()=>ox,groupCount:()=>Lb,groupSum:()=>X2,initMenuKeyNav:()=>RG,initToolbarKeyNav:()=>rf,isArray:()=>ke,isBoolean:()=>$k,isDate:()=>nu,isDecoratedObject:()=>Up,isDefined:()=>su,isEnumKey:()=>KB,isEnumValue:()=>Qk,isEqual:()=>br,isFiniteNumber:()=>Ot,isFunction:()=>Dr,isHtmlElement:()=>qk,isNegative:()=>nc,isNumber:()=>ps,isObject:()=>Ts,isObjectLike:()=>YB,isPlainObject:()=>Ns,isProperties:()=>Pn,isRegExp:()=>Zk,isString:()=>Os,isSymbol:()=>Jk,isValidDate:()=>au,jsonApply:()=>ba,jsonDiff:()=>gs,jsonWalk:()=>Bn,keyProperty:()=>di,labelDirectionHandling:()=>kx,listDecoratedProperties:()=>oc,makeAccessibleClickListener:()=>AA,mapIterable:()=>aF,mapValues:()=>Rv,markerFadeInAnimation:()=>td,markerPaletteFactory:()=>df,markerScaleInAnimation:()=>x0,markerSwipeScaleInAnimation:()=>b0,mergeArrayDefaults:()=>Ev,mergeDefaults:()=>kt,midpointStartingBarPosition:()=>uV,minMax:()=>M0,mod:()=>Pp,moduleRegistry:()=>Na,nearestSquared:()=>Cp,nearestSquaredInContainer:()=>EB,normaliseGroupTo:()=>zu,normalisePropertyTo:()=>Gu,normalisedExtent:()=>SD,normalisedExtentWithMetadata:()=>xu,pairCategoryData:()=>ld,pairContinuousData:()=>rd,partialAssign:()=>Ir,pathFadeInAnimation:()=>ad,pathFadeOutAnimation:()=>iV,pathRangePoints:()=>Sf,pathRangePointsReverse:()=>YA,pathRanges:()=>bf,pathSwipeInAnimation:()=>k0,pickByMatchingAngle:()=>j0,plotPath:()=>Go,predicateWithMessage:()=>Kt,prepareAreaPathAnimation:()=>ZA,prepareAreaPathAnimationFns:()=>$A,prepareAxisAnimationContext:()=>Bx,prepareAxisAnimationFunctions:()=>_I,prepareBarAnimationFunctions:()=>hd,prepareLinePathAnimation:()=>XA,prepareLinePathAnimationFns:()=>jA,prepareLinePathPropertyAnimation:()=>A0,prepareMarkerAnimation:()=>S0,preparePieSeriesAnimationFunctions:()=>hl,range:()=>$2,rangedValueProperty:()=>wb,renderPartialPath:()=>zA,resetAxisGroupFn:()=>kI,resetAxisLabelSelectionFn:()=>II,resetAxisLineSelectionFn:()=>AI,resetAxisSelectionFn:()=>DI,resetBarSelectionsFn:()=>ud,resetIds:()=>Hk,resetLabelFn:()=>Ka,resetMarkerFn:()=>ed,resetMarkerPositionFn:()=>id,resetMotion:()=>Ce,resetPieSelectionsFn:()=>K0,round:()=>Av,seriesLabelFadeInAnimation:()=>Pt,seriesLabelFadeOutAnimation:()=>zo,setDocument:()=>sI,setElementBBox:()=>Ia,setPath:()=>Bv,setWindow:()=>nI,shallowClone:()=>Wp,singleSeriesPaletteFactory:()=>Uc,splitPairData:()=>vf,staticFromToMotion:()=>Fn,stringify:()=>pu,sum:()=>rG,sumValues:()=>jg,times:()=>bD,toArray:()=>ax,toFixed:()=>wp,toTooltipHtml:()=>Sc,trailingAccumulatedValue:()=>Q2,trailingAccumulatedValueProperty:()=>gG,unique:()=>tg,updateClipPath:()=>xf,updateLabelNode:()=>sL,updateRect:()=>tL,validateCrossLineValues:()=>fx,valueProperty:()=>Vt,without:()=>wv});var lU=L({"packages/ag-charts-community/src/module-support.ts"(){"use strict";Ve(),fI(),gt(),Eu(),kr(),Ue(),V4(),bi(),lf(),Ep(),_t(),ue(),ne(),Ye(),jp(),Kp(),U4(),Ct(),al(),H4(),W4(),Y4(),vT(),K4(),Oa(),j4(),X4(),zg(),MA(),_A(),OA(),CA(),$4(),de(),nx(),TI(),Yn(),P2(),XI(),Ra(),Nb(),C2(),A2(),wx(),d2(),g2(),f2(),m2(),x2(),b2(),hn(),S2(),D2(),cb(),H2(),ts(),Di(),Z4(),ja(),Hu(),Ju(),Xa(),q4(),J4(),R0(),is(),_f(),Lf(),qA(),ll(),aL(),od(),C0(),v0(),Wb(),Wf(),X0(),tU(),eU(),iU(),sU(),nU(),aU(),BL(),Fx(),bI(),xg(),MI(),wL(),Ru(),kg(),_c(),oU(),jD(),QD(),rU(),Hi(),Lr(),lc(),Lu(),Do(),li(),t2(),en(),gd(),Kr()}}),H={};tn(H,{AG_CHARTS_LOCALE_EN_US:()=>iv,AgCharts:()=>ah,AgErrorBarSupportedSeriesTypes:()=>Ck,AgTooltipPositionType:()=>yp,Marker:()=>Qe,VERSION:()=>Dg,_ModuleSupport:()=>NT,_Scale:()=>kT,_Scene:()=>bT,_Theme:()=>MT,_Util:()=>IT,time:()=>Uk});var Y=L({"packages/ag-charts-community/src/main.ts"(){"use strict";Ok(),Bk(),Np(),g4(),Yx(),Bs(),b4(),S4(),_4(),F4(),lU()}}),lm=Object.defineProperty,OT=Object.getOwnPropertyDescriptor,cU=Object.getOwnPropertyNames,hU=Object.prototype.hasOwnProperty,uU=(t,e)=>{for(var i in e)lm(t,i,{get:e[i],enumerable:!0})},hS=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of cU(e))!hU.call(t,n)&&n!==i&&lm(t,n,{get:()=>e[n],enumerable:!(s=OT(e,n))||s.enumerable});return t},dU=(t,e,i)=>(hS(t,e,"default"),i&&hS(i,e,"default")),pU=t=>hS(lm({},"__esModule",{value:!0}),t),M=(t,e,i,s)=>{for(var n=s>1?void 0:s?OT(e,i):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&lm(e,i,n),n},uS={};uU(uS,{AgCharts:()=>CT.AgCharts,time:()=>CT.time}),Js.exports=pU(uS);var CT=(Y(),W(H)),cm=(Y(),W(H)),dS=(Y(),W(H));function pS(t,e,i){const s=(a,o,r,l)=>{let c=t[0];for(let h=a;r>0?h<=o:h>o;h+=r){const u=t[h];if(l(c,u))return!0;c=u}return!1},n=Math.floor(t.length/2);return s(e,n,e,i)?!0:s(t.length-e,n,-e,i)}var gU=(Y(),W(H)),{OR:fU,POSITIVE_NUMBER:mU,NAN:yU,AxisInterval:vU,Validate:xU}=gU._ModuleSupport,gS=class extends vU{constructor(){super(...arguments),this.minSpacing=NaN}};M([xU(fU(mU,yU))],gS.prototype,"minSpacing",2);var rh=(Y(),W(H)),kd=(Y(),W(H)),fS=(Y(),W(H)),{ChartAxisDirection:bU,Layers:mS,ARRAY:SU,BOOLEAN:yS,COLOR_STRING:vS,FONT_STYLE:MU,FONT_WEIGHT:_U,LINE_DASH:kU,NUMBER:ET,POSITIVE_NUMBER:DU,RATIO:RT,STRING:wT,UNION:IU,AND:AU,Validate:Xe,MATCHING_CROSSLINE_TYPE:PT}=fS._ModuleSupport,{Group:BT}=fS._Scene,{createId:LU}=fS._Util,_n=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};M([Xe(yS,{optional:!0})],_n.prototype,"enabled",2),M([Xe(wT,{optional:!0})],_n.prototype,"text",2),M([Xe(MU,{optional:!0})],_n.prototype,"fontStyle",2),M([Xe(_U,{optional:!0})],_n.prototype,"fontWeight",2),M([Xe(DU)],_n.prototype,"fontSize",2),M([Xe(wT)],_n.prototype,"fontFamily",2),M([Xe(ET)],_n.prototype,"padding",2),M([Xe(vS,{optional:!0})],_n.prototype,"color",2),M([Xe(yS,{optional:!0})],_n.prototype,"parallel",2);var rs=class kk{constructor(){this.id=LU(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new _n,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=bU.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new BT({name:`${this.id}`,layer:!0,zIndex:kk.LINE_LAYER_ZINDEX}),this.labelGroup=new BT({name:`${this.id}`,layer:!0,zIndex:kk.LABEL_LAYER_ZINDEX})}setSectorNodeProps(e){var i,s,n;e.fill=this.fill,e.fillOpacity=(i=this.fillOpacity)!=null?i:1,e.stroke=this.stroke,e.strokeOpacity=(s=this.strokeOpacity)!=null?s:1,e.strokeWidth=(n=this.strokeWidth)!=null?n:1,e.lineDash=this.lineDash}setLabelNodeProps(e,i,s,n,a){const{label:o}=this;e.x=i,e.y=s,e.text=o.text,e.textAlign="center",e.textBaseline=n,e.rotation=a,e.rotationCenterX=i,e.rotationCenterY=s,e.fill=o.color,e.fontFamily=o.fontFamily,e.fontSize=o.fontSize,e.fontStyle=o.fontStyle,e.visible=!0}calculateLayout(e){}};rs.LINE_LAYER_ZINDEX=mS.SERIES_CROSSLINE_LINE_ZINDEX,rs.RANGE_LAYER_ZINDEX=mS.SERIES_CROSSLINE_RANGE_ZINDEX,rs.LABEL_LAYER_ZINDEX=mS.SERIES_LABEL_ZINDEX,M([Xe(yS,{optional:!0})],rs.prototype,"enabled",2),M([Xe(IU(["range","line"],"a crossLine type"),{optional:!0})],rs.prototype,"type",2),M([Xe(AU(PT("range"),SU.restrict({length:2})),{optional:!0})],rs.prototype,"range",2),M([Xe(PT("value"),{optional:!0})],rs.prototype,"value",2),M([Xe(vS,{optional:!0})],rs.prototype,"fill",2),M([Xe(RT,{optional:!0})],rs.prototype,"fillOpacity",2),M([Xe(vS,{optional:!0})],rs.prototype,"stroke",2),M([Xe(ET,{optional:!0})],rs.prototype,"strokeWidth",2),M([Xe(RT,{optional:!0})],rs.prototype,"strokeOpacity",2),M([Xe(kU,{optional:!0})],rs.prototype,"lineDash",2);var FT=rs,{ChartAxisDirection:TU,validateCrossLineValues:NU}=kd._ModuleSupport,{Path:zT,Sector:OU,Text:CU}=kd._Scene,{normalizeAngle360:xS,isNumberEqual:GT}=kd._Util,VT=class Qy extends FT{constructor(){super(),this.direction=TU.X,this.polygonNode=new zT,this.sectorNode=new OU,this.lineNode=new zT,this.labelNode=new CU,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,shape:s,type:n,value:a,range:o}=this;if(!i||!n||!NU(n,a,o,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,n==="line"&&s==="circle"&&i instanceof kd._Scale.BandScale&&(this.type="range",this.range=[a,a]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){var i,s;const{scale:n,type:a,value:o,lineNode:r}=this;let l;if(!e||a!=="line"||!n||isNaN(l=n.convert(o))){r.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:h}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=(i=this.strokeOpacity)!=null?i:1,r.strokeWidth=(s=this.strokeWidth)!=null?s:1,r.fill=void 0,r.lineDash=this.lineDash;const u=h*Math.cos(l),d=h*Math.sin(l),p=c*Math.cos(l),g=c*Math.sin(l);r.path.clear(!0),r.path.moveTo(p,g),r.path.lineTo(u,d),this.group.zIndex=Qy.LINE_LAYER_ZINDEX}updatePolygonNode(e){var i;const{polygonNode:s,range:n,scale:a,shape:o,type:r}=this;let l;if(!e||r!=="range"||o!=="polygon"||!a||!n||!(l=(i=a.ticks)==null?void 0:i.call(a))){s.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:h}=this,u=l.indexOf(n[0]),d=l.indexOf(n[1]),g=(u<=d?l.slice(u,d+1):l.slice(u).concat(l.slice(0,d+1))).map(m=>a.convert(m));s.visible=!0,this.setSectorNodeProps(s);const{path:f}=s;f.clear(!0),g.forEach((m,v)=>{const y=h*Math.cos(m),x=h*Math.sin(m);v===0?f.moveTo(y,x):f.lineTo(y,x)}),c===0?f.lineTo(0,0):g.slice().reverse().forEach(m=>{const v=c*Math.cos(m),y=c*Math.sin(m);f.lineTo(v,y)}),s.path.closePath(),this.group.zIndex=Qy.RANGE_LAYER_ZINDEX}updateSectorNode(e){var i;const{sectorNode:s,range:n,scale:a,shape:o,type:r}=this;if(!e||r!=="range"||o!=="circle"||!a||!n){s.visible=!1;return}const{axisInnerRadius:l,axisOuterRadius:c}=this,h=n.map(p=>a.convert(p)),u=(i=a.step)!=null?i:0,d=a instanceof kd._Scale.BandScale?u/2:0;s.visible=!0,this.setSectorNodeProps(s),s.centerX=0,s.centerY=0,s.innerRadius=l,s.outerRadius=c,s.startAngle=h[0]-d,s.endAngle=h[1]+d,this.group.zIndex=Qy.RANGE_LAYER_ZINDEX}updateLabelNode(e){var i,s;const{label:n,labelNode:a,range:o,scale:r,type:l}=this;if(!e||n.enabled===!1||!n.text||!r||l==="range"&&!o){a.visible=!0;return}const{axisInnerRadius:c,axisOuterRadius:h}=this;let u,d,p,g;if(l==="line"){const f=xS(r.convert(this.value)),m=1.5*Math.PI,v=GT(f,m)||f>m||f<Math.PI/2,y=(c+h)/2*Math.cos(f),x=(c+h)/2*Math.sin(f);u=y+n.padding*Math.cos(f+Math.PI/2),d=x+n.padding*Math.sin(f+Math.PI/2),g=v?"top":"bottom",p=v?f:f-Math.PI}else{const[f,m]=o.map(S=>xS(r.convert(S)));let v=(f+m)/2;f>m&&(v-=Math.PI),v=xS(v);const y=(GT(v,0)||v>0)&&v<Math.PI;let x;const b=(s=(i=r.ticks)==null?void 0:i.call(r))!=null?s:[];this.shape==="circle"||b.length<3?x=h-n.padding:x=h*Math.cos(Math.PI/b.length)-n.padding,u=x*Math.cos(v),d=x*Math.sin(v),g=y?"bottom":"top",p=y?v-Math.PI/2:v+Math.PI/2}this.setLabelNodeProps(a,u,d,g,p)}};VT.className="AngleCrossLine";var UT=VT,{AND:EU,assignJsonApplyConstructedArray:RU,ChartAxisDirection:wU,GREATER_THAN:PU,NUMBER:HT,UNION:BU,ProxyOnWrite:FU,Validate:bS}=rh._ModuleSupport,{Path:zU,Text:WT}=rh._Scene,{angleBetween:GU,isNumberEqual:lh,toRadians:SS,normalizeAngle360:ch}=rh._Util,MS=class extends rh._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};M([bS(BU(["fixed","parallel","perpendicular"],"a label orientation"))],MS.prototype,"orientation",2);var hm=class extends rh._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new zU),this.computeRange=()=>{const i=ch(-Math.PI/2+SS(this.startAngle));let s=this.endAngle==null?i+Math.PI*2:-Math.PI/2+SS(this.endAngle);s<i&&(s+=2*Math.PI),this.range=[i,s]},this.includeInvisibleDomains=!0}get direction(){return wU.X}assignCrossLineArrayConstructor(t){RU(t,UT)}createLabel(){return new MS}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:t,gridLength:e}=this;return GU(t[0],t[1])*e}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineGroup:s}=this,n=Math.floor(t.x),a=Math.floor(t.y);e.translationX=n,e.translationY=a,i.translationX=n,i.translationY=a,s.translationX=n,s.translationY=a}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:n,y:a,moveTo:o,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?e.arc(n,a,l,c,h):o?e.moveTo(n,a):e.lineTo(n,a)}),s&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.stroke,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){var t,e;const{scale:i,shape:s,gridLength:n}=this,[a,o]=this.range,r=lh(o-a,2*Math.PI),l=[];if(s==="circle")r?(l.push({x:n,y:0,moveTo:!0}),l.push({x:0,y:0,radius:n,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(l.push({x:n*Math.cos(a),y:n*Math.sin(a),moveTo:!0}),l.push({x:0,y:0,radius:n,startAngle:ch(a),endAngle:ch(o),arc:!0,moveTo:!1}));else if(s==="polygon"){const c=((e=(t=i.ticks)==null?void 0:t.call(i))!=null?e:[]).map(h=>i.convert(h));c.length>2&&c.forEach((h,u)=>{const d=n*Math.cos(h),p=n*Math.sin(h),g=u===0;l.push({x:d,y:p,moveTo:g})})}return{points:l,closePath:r}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{enabled:i,style:s,width:n},innerRadiusRatio:a}=this;if(!(s&&e>0))return;const o=this.tickData,r=e*a,l=s.length,c=h=>h.value;this.gridLineGroupSelection.update(i?o:[],void 0,c).each((h,u,d)=>{const{value:p}=u,{stroke:g,lineDash:f}=s[d%l],m=t.convert(p);h.x1=r*Math.cos(m),h.y1=r*Math.sin(m),h.x2=e*Math.cos(m),h.y2=e*Math.sin(m),h.stroke=g,h.strokeWidth=n,h.lineDash=f,h.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this,i=this.tickData;e.update(t.enabled?i:[]).each((s,n,a)=>{const o=this.labelData[a];if(!o||o.hidden){s.visible=!1;return}s.text=o.text,s.setFont(t),s.fill=t.color,s.x=o.x,s.y=o.y,s.textAlign=o.textAlign,s.textBaseline=o.textBaseline,s.visible=!0,o.rotation?(s.rotation=o.rotation,s.rotationCenterX=o.x,s.rotationCenterY=o.y):s.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:s}=this,n=this.tickData;s.update(i.enabled?n:[]).each((a,o)=>{const{value:r}=o,l=t.convert(r),c=Math.cos(l),h=Math.sin(l);a.x1=e*c,a.y1=e*h,a.x2=(e+i.size)*c,a.y2=(e+i.size)*h,a.stroke=i.stroke,a.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:s,gridLength:n,scale:a,tick:o}=this;if(!s.enabled)return[];const r=new WT,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=t.map((u,d)=>{var p;const{value:g}=u,f=n+s.padding+o.size,m=a.convert(g),v=Math.cos(m),y=Math.sin(m),x=f*v,b=f*y,{textAlign:S,textBaseline:k}=this.getLabelAlign(m),D=d===t.length-1&&g!==t[0]&&lh(ch(m),ch(a.convert(t[0]))),T=this.getLabelRotation(m);let I=String(g);if(s.formatter){const{callbackCache:C}=this.moduleCtx;I=(p=C.call(s.formatter,{value:g,index:d}))!=null?p:""}r.text=I,r.x=x,r.y=b,r.setFont(s),r.textAlign=S,r.textBaseline=k,r.rotation=T,T&&(r.rotationCenterX=x,r.rotationCenterY=b);let N=T?r.computeTransformedBBox():r.computeBBox();if(N&&e.hideWhenNecessary&&!T){const C=l-N.x,E=N.x+N.width-c,O=1;if(C>O||E>O){const P=N.width-Math.max(C,E);I=WT.wrap(I,P,1/0,s,"never"),I==="\u2026"&&(I=""),r.text=I,N=r.computeBBox()}}return{text:I,x,y:b,textAlign:S,textBaseline:k,hidden:I===""||u.hidden||D,rotation:T,box:N}});return s.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(t,e){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:rh._Scene.BBox.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof MS?t.orientation:"fixed"}getLabelRotation(t){var e;let i=SS((e=this.label.rotation)!=null?e:0);t=ch(t);const s=this.getLabelOrientation();return s==="parallel"?(i+=t,t>=0&&t<Math.PI?i-=Math.PI/2:i+=Math.PI/2):s==="perpendicular"&&(i+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(i+=Math.PI)),i}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let s,n;const a=this.getLabelOrientation(),o=lh(e,0),r=lh(i,0),l=lh(e,1),c=lh(i,-1),h=e>0&&!o,u=i>0&&!r;return a==="parallel"?(s="center",n=l&&r||u?"top":"bottom"):a==="perpendicular"?(s=c||h?"left":"right",n="middle"):(s="right",o?s="center":h&&(s="left"),n="bottom",r?n="middle":u&&(n="top")),{textAlign:s,textBaseline:n}}updateCrossLines(){var t;(t=this.crossLines)==null||t.forEach(e=>{if(e instanceof UT){const{shape:i,gridLength:s,innerRadiusRatio:n}=this;e.shape=i,e.axisOuterRadius=s,e.axisInnerRadius=s*n}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};M([FU("rotation"),bS(HT.restrict({min:0,max:360}))],hm.prototype,"startAngle",2),M([bS(EU(HT.restrict({min:0,max:720}),PU("startAngle")),{optional:!0})],hm.prototype,"endAngle",2);var{RATIO:YT,OBJECT:VU,Validate:_S}=dS._ModuleSupport,{BandScale:UU}=dS._Scale,{isNumberEqual:KT}=dS._Util,yl=class extends hm{constructor(t){super(t,new UU),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new gS}generateAngleTicks(){var t;const{scale:e,gridLength:i}=this,{values:s,minSpacing:n}=this.interval,a=(t=s??e.ticks())!=null?t:[];if(a.length<2||isNaN(n))return a.map(h=>({value:h,visible:!0}));const o=a[0],r=e.convert(o),l=i*Math.cos(r),c=i*Math.sin(r);for(let h=1;h<a.length-1;h++){const u=a[h],d=e.convert(u);if(d-r>Math.PI)break;const p=i*Math.cos(d),g=i*Math.sin(d);if(Math.sqrt(nt(p-l,2)+nt(g-c,2))>n){const m=new Set([o]);return pS(a,h,(v,y)=>{m.add(y)}),a.map(v=>{const y=m.has(v);return{value:v,visible:y}})}}return[{value:o,visible:!0}]}avoidLabelCollisions(t){let{minSpacing:e}=this.label;if(Number.isFinite(e)||(e=0),t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;const h=l.box.clone().grow(e/2),u=c.box.clone().grow(e/2);return h.collidesBBox(u)},s=t[0],n=t.at(-1),a=new Set([s]),o=KT(s.x,n.x)&&KT(s.y,n.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=o?t.slice(0,-1):t;if(!pS(c,l,i)){pS(c,l,(u,d)=>{a.add(d)});break}}t.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};yl.className="AngleCategoryAxis",yl.type="angle-category",M([_S(YT)],yl.prototype,"groupPaddingInner",2),M([_S(YT)],yl.prototype,"paddingInner",2),M([_S(VU)],yl.prototype,"interval",2);var HU={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:yl},jT=(Y(),W(H)),XT=(Y(),W(H)),{LinearScale:WU,Invalidating:YU}=XT._Scale,{isNumberEqual:KU,range:$T,isDenseInterval:jU}=XT._Util,ZT=class extends WU{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(n=>!isFinite(n))||this.arcLength<=0)return[];this.refresh();const{interval:t}=this,[e,i]=this.getDomain();if(t){const n=Math.abs(t),a=this.getPixelRange();if(!jU((i-e)/n,a))return $T(e,i,n)}const s=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,i);return $T(e,i,s)}hasNiceRange(){const t=this.range.slice().sort((i,s)=>i-s);return[Math.PI,2*Math.PI].some(i=>KU(i,t[1]-t[0]))}getNiceStepAndTickCount(){const[t,e]=this.niceDomain;let i=this.getTickStep(t,e);const s=isNaN(this.maxTickCount)?1/0:this.maxTickCount,n=Math.abs(e-t)/i;let a=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return a>s&&(a/=2,i*=2),{count:a,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const t=this.niceDomain[0]>this.niceDomain[1],e=t?this.niceDomain[1]:this.niceDomain[0],{step:i,count:s}=this.getNiceStepAndTickCount(),n=1/i,a=i>=1?Math.ceil(e/i+s)*i:Math.ceil((e+s*i)*n)/n;this.niceDomain=t?[a,e]:[e,a],this.niceTickStep=i}getPixelRange(){return this.arcLength}};M([YU],ZT.prototype,"arcLength",2);var{AND:qT,Default:QT,GREATER_THAN:XU,LESS_THAN:$U,NUMBER_OR_NAN:JT,OBJECT:ZU,Validate:kS}=jT._ModuleSupport,{angleBetween:qU,isNumberEqual:tN,normalisedExtentWithMetadata:QU}=jT._Util,hh=class extends hm{constructor(t){super(t,new ZT),this.shape="circle",this.min=NaN,this.max=NaN,this.interval=new gS}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=QU(t,e,i);return{domain:s,clipped:n}}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),s=qU(e,i)||2*Math.PI,n=this.gridLength;return s*n}generateAngleTicks(){const t=this.getRangeArcLength(),{scale:e,range:i}=this,{values:s,minSpacing:n,maxSpacing:a}=this.interval,o=a?Math.floor(t/a):1,r=n?Math.floor(t/n):1/0,l=Math.floor(4/Math.PI*Math.abs(i[0]-i[1]));return e.tickCount=Math.max(o,Math.min(r,l)),e.minTickCount=o,e.maxTickCount=r,e.arcLength=t,(s??e.ticks()).map(h=>({value:h,visible:!0}))}avoidLabelCollisions(t){let{minSpacing:e}=this.label;Number.isFinite(e)||(e=0);const i=(a,o)=>{if(a.hidden||o.hidden)return!1;const r=a.box.clone().grow(e/2),l=o.box.clone().grow(e/2);return r.collidesBBox(l)},s=t[0],n=t.at(-1);s!==n&&tN(s.x,n.x)&&tN(s.y,n.y)&&(n.hidden=!0);for(let a=1;a<t.length;a*=2){let o=!1;for(let r=a;r<t.length;r+=a){const l=t[r],c=t[r-a];if(i(c,l)){o=!0;break}}if(!o){t.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((a,o)=>{o>0&&(a.hidden=!0,a.box=void 0)})}};hh.className="AngleNumberAxis",hh.type="angle-number",M([kS(qT(JT,$U("max"))),QT(NaN)],hh.prototype,"min",2),M([kS(qT(JT,XU("min"))),QT(NaN)],hh.prototype,"max",2),M([kS(ZU)],hh.prototype,"interval",2);var JU={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:hh},DS=(Y(),W(H)),{OrdinalTimeScale:tH}=DS._Scale,{dateToNumber:IS}=DS._ModuleSupport,AS=class extends DS._ModuleSupport.CategoryAxis{constructor(t){super(t,new tH)}normaliseDataDomain(t){const e=[],i=new Set;for(let s of t){typeof s=="number"&&(s=new Date(s));const n=IS(s);i.has(n)||(i.add(n),e.push(s))}return e.sort((s,n)=>IS(s)-IS(n)),{domain:e,clipped:!1}}onFormatChange(t,e,i,s){s?super.onFormatChange(t,e,i,s):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i})}};AS.className="OrdinalTimeAxis",AS.type="ordinal-time";var eH={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",instanceConstructor:AS},eN=(Y(),W(H)),Dd=(Y(),W(H)),vl=(Y(),W(H)),{ChartAxisDirection:iH,Validate:sH,DEGREE:nH,validateCrossLineValues:aH}=vl._ModuleSupport,{Path:oH,Sector:rH,Text:lH}=vl._Scene,{normalizeAngle360:cH,toRadians:hH,isNumberEqual:uH}=vl._Util,iN=class extends _n{constructor(){super(...arguments),this.positionAngle=void 0}};M([sH(nH,{optional:!0})],iN.prototype,"positionAngle",2);var sN=class Dk extends FT{constructor(){super(),this.direction=iH.Y,this.label=new iN,this.polygonNode=new oH,this.sectorNode=new rH,this.labelNode=new lH,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,type:s,value:n,range:a}=this;if(!i||!s||!aH(s,n,a,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}s==="line"&&i instanceof vl._Scale.BandScale&&(this.type="range",this.range=[n,n]),this.updateRadii();const{innerRadius:o,outerRadius:r}=this;e&&(e=o>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.group.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.group.zIndex=this.type==="line"?Dk.LINE_LAYER_ZINDEX:Dk.RANGE_LAYER_ZINDEX}updateRadii(){var e;const{range:i,scale:s,type:n,axisInnerRadius:a,axisOuterRadius:o}=this;if(!s)return{innerRadius:0,outerRadius:0};const r=h=>o+a-h;let l=0,c=0;if(n==="line")l=r(s.convert(this.value)),c=l;else{const h=Math.abs((e=s?.bandwidth)!=null?e:0),u=i.map(d=>s.convert(d));l=r(Math.max(...u)),c=r(Math.min(...u))+h}this.outerRadius=l,this.innerRadius=c}drawPolygon(e,i,s){i.forEach((n,a)=>{const o=e*Math.cos(n),r=e*Math.sin(n);a===0?s.path.moveTo(o,r):s.path.lineTo(o,r)}),s.path.closePath()}updatePolygonNode(e){const{gridAngles:i,polygonNode:s,scale:n,shape:a,type:o,innerRadius:r,outerRadius:l}=this;if(!e||a!=="polygon"||!n||!i){s.visible=!1;return}s.visible=!0;const c=this.getPadding();s.path.clear(!0),this.drawPolygon(l-c,i,s);const h=i.slice().reverse(),u=o==="line"?l-c:r+c;this.drawPolygon(u,h,s),this.setSectorNodeProps(s)}updateSectorNode(e){const{axisInnerRadius:i,axisOuterRadius:s,scale:n,sectorNode:a,shape:o,innerRadius:r,outerRadius:l}=this;if(!e||o!=="circle"||!n){a.visible=!1;return}a.visible=!0,a.startAngle=0,a.endAngle=2*Math.PI;const c=this.getPadding();a.innerRadius=vl._Util.clamp(i,r+c,s),a.outerRadius=vl._Util.clamp(i,l-c,s),this.setSectorNodeProps(a)}updateLabelNode(e){var i,s;const{innerRadius:n,label:a,labelNode:o,scale:r,shape:l,type:c}=this;if(!e||a.enabled===!1||!a.text||!r){o.visible=!1;return}const h=cH(hH(((i=a.positionAngle)!=null?i:0)-90)),u=(uH(h,0)||h>0)&&h<Math.PI,d=u?h-Math.PI/2:h+Math.PI/2;let p=0;const g=(s=this.gridAngles)!=null?s:[];c==="line"?p=n+a.padding:l==="circle"||g.length<3?p=n-a.padding:p=n*Math.cos(Math.PI/g.length)-a.padding;const f=p*Math.cos(h),m=p*Math.sin(h);let v;c==="line"?v=u?"top":"bottom":v=u?"bottom":"top",this.setLabelNodeProps(o,f,m,v,d)}getPadding(){var e,i;const{scale:s}=this;if(!s)return 0;const n=Math.abs((e=s.bandwidth)!=null?e:0),a=Math.abs((i=s.step)!=null?i:0);return s instanceof vl._Scale.BandScale?(a-n)/2:0}};sN.className="RadiusCrossLine";var nN=sN,{assignJsonApplyConstructedArray:dH,ChartAxisDirection:pH,Default:gH,Layers:fH,DEGREE:aN,BOOLEAN:mH,Validate:LS}=Dd._ModuleSupport,{Caption:yH,Group:vH,Path:xH,Selection:bH}=Dd._Scene,{isNumberEqual:SH,normalizeAngle360:oN,toRadians:MH}=Dd._Util,TS=class extends Dd._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};M([LS(mH,{optional:!0})],TS.prototype,"autoRotate",2),M([LS(aN)],TS.prototype,"autoRotateAngle",2);var NS=class extends Dd._ModuleSupport.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new vH({name:`${this.id}-gridPaths`,zIndex:fH.AXIS_GRID_ZINDEX})),this.gridPathSelection=bH.select(this.gridPathGroup,xH)}get direction(){return pH.Y}assignCrossLineArrayConstructor(t){dH(t,nN)}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:s}=this,n=t*s,a=MH(i);return{translationX:e.x,translationY:e.y-t-n,rotation:a,rotationCenterX:0,rotationCenterY:t+n}}updateSelections(t,e,i){var s;super.updateSelections(t,e,i);const{gridLine:{enabled:n,style:a,width:o},shape:r}=this;if(!a)return;const l=this.prepareTickData(e),c=a.length,h=(m,v)=>{const{stroke:y,lineDash:x}=a[v%c];m.stroke=y,m.strokeWidth=o,m.lineDash=x,m.fill=void 0},[u,d]=(s=this.gridRange)!=null?s:[0,2*Math.PI],p=SH(d-u,2*Math.PI),g=(m,v)=>{const{path:y}=m;y.clear(!0);const x=this.getTickRadius(v);p?(y.moveTo(x,0),y.arc(0,0,x,0,2*Math.PI)):(y.moveTo(x*Math.cos(u),x*Math.sin(u)),y.arc(0,0,x,oN(u),oN(d))),p&&y.closePath()},f=(m,v)=>{const{path:y}=m,x=this.gridAngles;if(y.clear(!0),!x||x.length<3)return;const b=this.getTickRadius(v);x.forEach((S,k)=>{const D=b*Math.cos(S),T=b*Math.sin(S);k===0?y.moveTo(D,T):y.lineTo(D,T),x.forEach((I,N)=>{const C=b*Math.cos(I),E=b*Math.sin(I);N===0?y.moveTo(C,E):y.lineTo(C,E)}),y.closePath()}),y.closePath()};this.gridPathSelection.update(n?l:[]).each((m,v,y)=>{h(m,y),r==="circle"?g(m,v):f(m,v)})}updateTitle(){var t;const e=c=>c.defaultValue,{title:i,_titleCaption:s,range:n,moduleCtx:{callbackCache:a}}=this,{formatter:o=e}=(t=this.title)!=null?t:{};if(!i){s.enabled=!1;return}s.enabled=i.enabled,s.fontFamily=i.fontFamily,s.fontSize=i.fontSize,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.color=i.color,s.wrapping=i.wrapping;let r=!1;const l=s.node;i.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((n[0]+n[1])/2),l.y=-yH.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=a.call(o,this.getTitleFormatterParams())),l.visible=r}updateCrossLines(){var t;(t=this.crossLines)==null||t.forEach(e=>{if(e instanceof nN){const{shape:i,gridAngles:s,range:n,innerRadiusRatio:a}=this,o=n[0];e.shape=i,e.gridAngles=s,e.axisOuterRadius=o,e.axisInnerRadius=o*a}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new TS}};M([LS(aN),gH(0)],NS.prototype,"positionAngle",2);var{RATIO:OS,ProxyPropertyOnWrite:rN,Validate:CS}=eN._ModuleSupport,{BandScale:lN}=eN._Scale,xl=class extends NS{constructor(t){super(t,new lN),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e,innerRadiusRatio:i}=this,s=e.range[0],n=s*i;if(e instanceof lN){const a=e.ticks(),o=a.length-1-a.indexOf(t.tickId);return o===0?n:e.inset+e.step*(o-.5)+e.bandwidth/2}else{const a=(s-n)/e.domain.length;return s-t.translationY+n-a/2}}};xl.className="RadiusCategoryAxis",xl.type="radius-category",M([CS(OS)],xl.prototype,"groupPaddingInner",2),M([rN("scale","paddingInner"),CS(OS)],xl.prototype,"paddingInner",2),M([rN("scale","paddingOuter"),CS(OS)],xl.prototype,"paddingOuter",2);var _H={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:xl},ES=(Y(),W(H)),{AND:cN,Default:hN,GREATER_THAN:kH,LESS_THAN:DH,NUMBER_OR_NAN:uN,Validate:dN}=ES._ModuleSupport,{LinearScale:IH}=ES._Scale,{normalisedExtentWithMetadata:AH}=ES._Util,Id=class extends NS{constructor(t){super(t,new IH),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(t){var e;const{scale:i}=this,s=(e=i.getDomain)==null?void 0:e.call(i)[1];return t.filter(({tick:n})=>n!==s).sort((n,a)=>a.tick-n.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],s=i*this.innerRadiusRatio;return i-t.translationY+s}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=AH(t,e,i);return{domain:s,clipped:n}}};Id.className="RadiusNumberAxis",Id.type="radius-number",M([dN(cN(uN,DH("max"))),hN(NaN)],Id.prototype,"min",2),M([dN(cN(uN,kH("min"))),hN(NaN)],Id.prototype,"max",2);var LH={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:Id},pN=(Y(),W(H)),{BOOLEAN:TH,POSITIVE_NUMBER:NH,ObserveChanges:gN,Validate:fN}=pN._ModuleSupport,RS=class extends pN._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1)}};M([gN((t,e)=>{t.ctx.animationManager.skip(!e)}),fN(TH)],RS.prototype,"enabled",2),M([gN((t,e)=>{t.ctx.animationManager.defaultDuration=e}),fN(NH,{optional:!0})],RS.prototype,"duration",2);var OH={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:RS,themeTemplate:{animation:{enabled:!0}}},Li=(Y(),W(H)),Jn=(Y(),W(H)),CH=(Y(),W(H)),{ChartAxisDirection:EH}=CH._ModuleSupport;function RH({x:t,y:e,labelBBox:i,bounds:s,axisPosition:n,axisDirection:a,padding:o}){let r;if(a===EH.X){const c=-i.width/2,h=n==="bottom"?-4:-i.height+4,u=n==="bottom"?s.y+s.height+o:s.y-o;r={x:t+c,y:u+h}}else{const c=-i.height/2,h=n==="right"?-8:-i.width+8;r={x:(n==="right"?s.x+s.width+o:s.x-o)+h,y:e+c}}return r}function mN(t,e,i){const s=t.clone();return s.x+=e==="left"?-i:0,s.y+=e==="top"?-i:0,s.width+=e==="left"||e==="right"?i:0,s.height+=e==="top"||e==="bottom"?i:0,s}var wS=(Y(),W(H)),wH=`.ag-charts-color-picker{position:absolute;display:flex;flex-direction:column;width:190px;padding:8px;border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);background:var(--ag-charts-toolbar-background-color);border-radius:4px;z-index:99999;--h:0;--s:0;--v:0;--a:0;--color:#000;--color-a:#000;--thumb-size:18px;--inner-width:172px;--track-height:12px;--palette-height:136px;--checker:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>')}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:6px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette::after{content:'';position:absolute;display:block;top:calc(var(--thumb-size) * -0.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -0.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow:inset 0 0 0 3px white,inset 0 0 1px 3px #0006,0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible::after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input,
.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset:calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,
.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:99px;box-shadow:var(--box-shadow);--box-shadow:inset 0 0 0 3px white,inset 0 0 1px 3px #0006,0 0 5px #00000038;transform:translate3d(0,0,0)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,
.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input::before,
.ag-charts-color-picker__alpha-input::before{position:absolute;content:'';display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:99px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__hue-input{margin-bottom:4px}.ag-charts-color-picker__hue-input::before{background:linear-gradient(to right,#f00,#f00 calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),#f00 calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input::before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left /4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:4px;overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-active-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0px 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left /4px 4px;border-radius:2px;box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}`,PH='<div class="ag-charts-color-picker"><div class="ag-charts-color-picker__palette" tabindex="0"></div><input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"> <input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field"><span class="ag-charts-color-picker__color-label">Color</span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label></div>',{clamp:um,createElement:BH}=wS._ModuleSupport,{Color:yN}=wS._Util,dm="color-picker",PS="canvas-overlay",vN=t=>{try{const e=yN.fromString(t),[i,s,n]=e.toHSB();return[i,s,n,e.a]}catch{return}},FH=class extends wS._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,t.domManager.addStyles(dm,wH),this.element=t.domManager.addChild(PS,dm),this.destroyFns.push(()=>t.domManager.removeChild(PS,dm))}show(t){var e,i;let[s,n,a,o]=(i=vN((e=t.color)!=null?e:"#f00"))!=null?i:[0,1,.5,1];const r=BH("div");r.innerHTML=PH,this.element.replaceChildren(r);const l=r.firstElementChild,c=l.querySelector(".ag-charts-color-picker__palette"),h=l.querySelector(".ag-charts-color-picker__hue-input"),u=l.querySelector(".ag-charts-color-picker__alpha-input"),d=l.querySelector(".ag-charts-color-picker__color-input");this.anchor&&this.setAnchor(this.anchor,this.fallbackAnchor);const p=()=>{var f;const v=yN.fromHSB(s,n,a,o).toHexString();l.style.setProperty("--h",`${s}`),l.style.setProperty("--s",`${n}`),l.style.setProperty("--v",`${a}`),l.style.setProperty("--a",`${o}`),l.style.setProperty("--color",v.slice(0,7)),l.style.setProperty("--color-a",v),h.value=`${s}`,u.value=`${o}`,u.classList.toggle("ag-charts-color-picker__alpha-input--opaque",o===1),document.activeElement!==d&&(d.value=v.toUpperCase()),(f=t.onChange)==null||f.call(t,v)};p();const g=f=>{f.preventDefault();const m=f.currentTarget;m.focus();const v=m.getBoundingClientRect(),y=({pageX:x,pageY:b})=>{n=Math.min(Math.max((x-v.left)/v.width,0),1),a=1-Math.min(Math.max((b-v.top)/v.height,0),1),p()};y(f),window.addEventListener("mousemove",y),window.addEventListener("mouseup",()=>window.removeEventListener("mousemove",y),{once:!0})};l.addEventListener("mousedown",f=>{f.stopPropagation()}),l.addEventListener("keydown",f=>{var m;switch(f.stopPropagation(),f.key){case"Enter":case"Escape":(m=t.onClose)==null||m.call(t);break;default:return}f.preventDefault()}),c.addEventListener("mousedown",g),c.addEventListener("keydown",f=>{if(f.key==="ArrowLeft")n=Math.min(Math.max(n-.01),1);else if(f.key==="ArrowRight")n=Math.min(Math.max(n+.01),1);else if(f.key==="ArrowUp")a=Math.min(Math.max(a+.01),1);else if(f.key==="ArrowDown")a=Math.min(Math.max(a-.01),1);else return;f.preventDefault(),p()}),h.addEventListener("input",f=>{var m;s=(m=f.currentTarget.valueAsNumber)!=null?m:0,p()}),u.addEventListener("input",f=>{var m;o=(m=f.currentTarget.valueAsNumber)!=null?m:0,p()}),d.addEventListener("input",f=>{const m=vN(f.currentTarget.value);m!=null&&([s,n,a,o]=m,p())}),d.addEventListener("blur",()=>p()),d.addEventListener("keydown",f=>{f.key==="Enter"&&(f.currentTarget.blur(),p())})}setAnchor(t,e){var i;this.anchor=t,this.fallbackAnchor=e;const s=(i=this.element.firstElementChild)==null?void 0:i.firstElementChild;s&&(this.updatePosition(s,t.x,t.y),this.repositionWithinBounds(s,t,e))}hide(){this.element.replaceChildren()}isChildElement(t){return this.ctx.domManager.isManagedChildDOMElement(t,PS,dm)}updatePosition(t,e,i){t.style.setProperty("top","unset"),t.style.setProperty("bottom","unset"),t.style.setProperty("left",`${e}px`),t.style.setProperty("top",`${i}px`)}repositionWithinBounds(t,e,i){const s=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:a}=t;let o=um(0,e.x,s.width-n),r=um(0,e.y,s.height-a);o!==e.x&&i?.x!=null&&(o=um(0,i.x-n,s.width-n)),r!==e.y&&i?.y!=null&&(r=um(0,i.y-a,s.height-a)),this.updatePosition(t,o,r)}},eq=(Y(),W(H)),xN=(t=>(t.Line="line",t.DisjointChannel="disjoint-channel",t.ParallelChannel="parallel-channel",t.HorizontalLine="horizontal-line",t.VerticalLine="vertical-line",t))(xN||{}),iq=Object.values(xN),BS=["line","disjoint-channel","parallel-channel","horizontal-line","vertical-line"];function zH(t){switch(t){case"line":return"line";case"horizontal-line":return"horizontal-line";case"vertical-line":return"vertical-line";case"disjoint-channel":return"disjoint-channel";case"parallel-channel":return"parallel-channel"}}var GH=(Y(),W(H)),{Logger:FS}=GH._Util;function Ad(t,e,i){let s=!0;return s&&(s=ta(t,e.start,i&&`${i}[start] `)),s&&(s=ta(t,e.end,i&&`${i}[end] `)),s}function bN(t,e,i){const s=e.direction==="horizontal"?t.yAxis:t.xAxis,n=zS(e.value,s);return!n&&i&&FS.warnOnce(`${i}is outside the axis domain, ignoring. - value: [${e.value}]]`),n}function ta(t,e,i){if(e.x==null||e.y==null)return i&&FS.warnOnce(`${i}requires both an [x] and [y] property, ignoring.`),!1;const s=zS(e.x,t.xAxis),n=zS(e.y,t.yAxis);if(!s||!n){let a="x & y domains";return s&&(a="y domain"),n&&(a="x domain"),i&&FS.warnOnce(`${i}is outside the ${a}, ignoring. - x: [${e.x}], y: ${e.y}]`),!1}return!0}function zS(t,e){const i=e.scaleDomain();return i&&e.continuous?t>=i[0]&&t<=i.at(-1):!0}function GS(t,e){if(t.start==null||t.end==null)return;const i=ea(t.start,e),s=ea(t.end,e);if(!(i==null||s==null))return{x1:i.x,y1:i.y,x2:s.x,y2:s.y}}function ea(t,e){const i=uh(t.x,e.xAxis),s=uh(t.y,e.yAxis);return{x:i,y:s}}function uh(t,e){var i;if(t==null)return 0;const s=((i=e.scaleBandwidth())!=null?i:0)/2;return e.scaleConvert(t)+s}function kn(t,e){const i=pm(t.x,e.xAxis),s=pm(t.y,e.yAxis);return{x:i,y:s}}function pm(t,e){var i;const s=((i=e.scaleBandwidth())!=null?i:0)/2;return e.continuous?e.scaleInvert(t-s):e.scaleInvertNearest(t-s)}function VS(t){return t.gridPadding+t.seriesAreaPadding+t.tickSize+t.label.padding}var SN=(Y(),W(H)),{BaseModuleInstance:VH,InteractionState:MN,Validate:UH,BOOLEAN:HH,createElement:WH,REGIONS:YH,ChartAxisDirection:KH}=SN._ModuleSupport,Yo="ag-charts-annotations__axis-button",_N=class extends VH{constructor(t,e,i,s){super(),this.ctx=t,this.axisCtx=e,this.onButtonClick=i,this.seriesRect=s,this.enabled=!0,this.snap=!1,this.padding=0;const{button:n,wrapper:a}=this.setup();this.wrapper=a,this.button=n,this.toggleVisibility(!1),this.updateButtonElement(),this.snap=e.scaleBandwidth()>0;const o=this.ctx.regionManager.getRegion(YH.SERIES),r=MN.Default|MN.Annotations;this.destroyFns.push(o.addListener("hover",l=>this.onMouseMove(l),r),o.addListener("drag",l=>this.onMouseMove(l),r),o.addListener("leave",()=>this.onLeave()),()=>this.destroyElements(),()=>this.wrapper.remove(),()=>this.button.remove())}update(t,e){this.seriesRect=t,this.padding=e}setup(){const t=this.ctx.domManager.addChild("canvas-overlay",`${Yo}-${this.axisCtx.axisId}`);t.classList.add(`${Yo}-wrapper`);const e=WH("button");return e.classList.add(Yo),t.appendChild(e),{wrapper:t,button:e}}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",Yo)}onMouseMove(t){if(!this.enabled)return;this.toggleVisibility(!0);const e=this.getButtonCoordinates({x:t.offsetX,y:t.offsetY});this.coords=this.getAxisCoordinates(e),this.updatePosition(e)}onLeave(){this.toggleVisibility(!1)}getButtonCoordinates({x:t,y:e}){const{axisCtx:{direction:i,position:s},seriesRect:n,snap:a,axisCtx:o,padding:r}=this,{clientWidth:l,clientHeight:c}=this.button,[h,u]=[n.y,n.y+n.height],[d,p]=[n.x,n.x+n.width];if(a&&(t=uh(pm(t-n.x,o),o)+n.x,e=uh(pm(e-n.y,o),o)+n.y),i===KH.X){const f=c-Math.max(0,r-5);t=t-l/2,e=s==="top"?h-c+f:u-f}else{const f=l-Math.max(0,r-9);t=s==="left"?d-l+f:p-f,e=e-c/2}return{x:t,y:e}}getAxisCoordinates(t){const{seriesRect:e}=this,{clientWidth:i,clientHeight:s}=this.button,n=t.x-e.x+i/2,a=t.y-e.y+s/2;return{x:n,y:a}}toggleVisibility(t){const{button:e}=this;if(e==null)return;const i=this.enabled&&t;this.toggleClass("-hidden",!i)}toggleClass(t,e){this.wrapper.classList.toggle(`${Yo}-wrapper-${t}`,e)}updatePosition({x:t,y:e}){this.wrapper.style.transform=`translate(${Math.round(t)}px, ${Math.round(e)}px)`}updateButtonElement(){const{button:t}=this;t.onclick=SN._ModuleSupport.makeAccessibleClickListener(t,()=>this.onButtonClick(this.coords)),t.innerHTML=`<span class="ag-charts-icon-crossline-add-line ${Yo}-icon"></span>`}};M([UH(HH)],_N.prototype,"enabled",2);var jH=".ag-charts-annotations__axis-button-wrapper{position:absolute;left:0px;top:0px;user-select:none;font:16px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-annotations);box-sizing:border-box}.ag-charts-annotations__axis-button-wrapper--hidden{display:none}.ag-charts-annotations__axis-button{cursor:pointer;padding:2px;border:none;border-radius:2px;line-height:16px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-charts-annotations__axis-button-icon{height:1.2em;width:1.2em}.ag-charts-annotations__axis-button:hover{opacity:0.8;color:var(--ag-charts-axis-label-color)}",XH=(Y(),W(H)),kN=(Y(),W(H)),{BOOLEAN:Ld,COLOR_STRING:US,DATE:DN,LINE_DASH:$H,NUMBER:Td,RATIO:IN,STRING:HS,OBJECT:Nd,FUNCTION:ZH,TEXT_ALIGN:qH,FONT_STYLE:QH,FONT_WEIGHT:JH,POSITIVE_NUMBER:WS,OR:AN,UNION:LN,BaseProperties:Od,Validate:Gt}=kN._ModuleSupport,gm=class extends Od{};M([Gt(AN(HS,Td,DN))],gm.prototype,"x",2),M([Gt(Td)],gm.prototype,"y",2);var tW=class extends XS(Od){},eW=class extends Ko(jo(EN(Od))){},iW=class extends Ko(jo(XS(Od))){},YS=class extends Ko(jo(XS(nW(Od)))){constructor(){super(...arguments),this.cornerRadius=2}};M([Gt(Ld)],YS.prototype,"enabled",2),M([Gt(WS)],YS.prototype,"cornerRadius",2);function Cd(t,e){class i extends sW(EN(e)){constructor(){super(...arguments),this.id=kN._Util.uuid()}isValidWithContext(n,a){return super.isValid(a)}}return i}function KS(t){class e extends t{constructor(){super(...arguments),this.start=new gm,this.end=new gm}}return M([Gt(Nd)],e.prototype,"start",2),M([Gt(Nd)],e.prototype,"end",2),e}function TN(t){class e extends t{}return M([Gt(AN(HS,Td,DN))],e.prototype,"value",2),e}function NN(t){class e extends t{constructor(){super(...arguments),this.background=new tW}}return M([Gt(Nd,{optional:!0})],e.prototype,"background",2),e}function Ed(t){class e extends t{constructor(){super(...arguments),this.handle=new iW}}return M([Gt(Nd,{optional:!0})],e.prototype,"handle",2),e}function ON(t){class e extends t{constructor(){super(...arguments),this.axisLabel=new YS}}return M([Gt(Nd,{optional:!0})],e.prototype,"axisLabel",2),e}function jS(t){class e extends t{}return M([Gt(LN(["arrow","circle"]),{optional:!0})],e.prototype,"startCap",2),M([Gt(LN(["arrow","circle"]),{optional:!0})],e.prototype,"endCap",2),e}function CN(t){class e extends t{}return M([Gt(Ld,{optional:!0})],e.prototype,"extendLeft",2),M([Gt(Ld,{optional:!0})],e.prototype,"extendRight",2),e}function sW(t){class e extends t{}return M([Gt(Ld,{optional:!0})],e.prototype,"locked",2),e}function EN(t){class e extends t{}return M([Gt(Ld,{optional:!0})],e.prototype,"visible",2),e}function XS(t){class e extends t{}return M([Gt(US,{optional:!0})],e.prototype,"fill",2),M([Gt(IN,{optional:!0})],e.prototype,"fillOpacity",2),e}function Ko(t){class e extends t{}return M([Gt(US,{optional:!0})],e.prototype,"stroke",2),M([Gt(IN,{optional:!0})],e.prototype,"strokeOpacity",2),M([Gt(Td,{optional:!0})],e.prototype,"strokeWidth",2),e}function nW(t){class e extends t{constructor(){super(...arguments),this.textAlign="center",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}return M([Gt(WS,{optional:!0})],e.prototype,"padding",2),M([Gt(qH,{optional:!0})],e.prototype,"textAlign",2),M([Gt(QH,{optional:!0})],e.prototype,"fontStyle",2),M([Gt(JH,{optional:!0})],e.prototype,"fontWeight",2),M([Gt(WS)],e.prototype,"fontSize",2),M([Gt(HS)],e.prototype,"fontFamily",2),M([Gt(US,{optional:!0})],e.prototype,"color",2),M([Gt(ZH,{optional:!0})],e.prototype,"formatter",2),e}function jo(t){class e extends t{}return M([Gt($H,{optional:!0})],e.prototype,"lineDash",2),M([Gt(Td,{optional:!0})],e.prototype,"lineDashOffset",2),e}var{STRING:RN,BaseProperties:wN,Validate:PN,isObject:BN}=XH._ModuleSupport,ia=class extends Cd("horizontal-line",TN(Ed(ON(jS(Ko(jo(wN))))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line"}static is(t){return BN(t)&&t.type==="horizontal-line"}isValidWithContext(t,e){return super.isValid(e)&&bN(t,this,e)}};M([PN(RN)],ia.prototype,"type",2);var dh=class extends Cd("vertical-line",TN(Ed(ON(jS(Ko(jo(wN))))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line"}static is(t){return BN(t)&&t.type==="vertical-line"}isValidWithContext(t,e){return super.isValid(e)&&bN(t,this,e)}};M([PN(RN)],dh.prototype,"type",2);var FN=(Y(),W(H)),fm=(Y(),W(H)),bl=(Y(),W(H)),zN=class Jw extends bl._Scene.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1}drag(e){const{handle:i,locked:s}=this;return s?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:e,offset:{x:e.x-i.x,y:e.y-i.y}}}toggleActive(e){this.active=e,e||(this.handle.strokeWidth=Jw.INACTIVE_STROKE_WIDTH)}toggleHovered(e){this.glow.visible=!this.locked&&e,this.glow.dirtyPath=!0}toggleDragging(e){this.locked||(this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(e){this.locked=e}getCursor(){return"default"}containsPoint(e,i){return this.handle.containsPoint(e,i)}};zN.INACTIVE_STROKE_WIDTH=1;var Xo=zN,$S=class t1 extends Xo{constructor(){super(),this.handle=new bl._Scene.Circle,this.glow=new bl._Scene.Circle,this.append([this.handle]),this.handle.size=t1.HANDLE_SIZE,this.handle.strokeWidth=Xo.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(e){this.handle.setProperties(K(B({},e),{strokeWidth:Xo.INACTIVE_STROKE_WIDTH}))}drag(e){return{point:e,offset:{x:0,y:0}}}};$S.HANDLE_SIZE=7,$S.GLOW_SIZE=9;var $o=$S,mm=class us extends Xo{constructor(){super(),this.handle=new bl._Scene.Rect,this.glow=new bl._Scene.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=us.CORNER_RADIUS,this.handle.width=us.HANDLE_SIZE,this.handle.height=us.HANDLE_SIZE,this.handle.strokeWidth=Xo.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=us.CORNER_RADIUS,this.glow.width=us.GLOW_SIZE,this.glow.height=us.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){if(super.toggleLocked(e),e){const i=(us.HANDLE_SIZE-$o.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=$o.HANDLE_SIZE,this.handle.height=$o.HANDLE_SIZE,this.glow.width=$o.GLOW_SIZE,this.glow.height=$o.GLOW_SIZE}else this.handle.cornerRadius=us.CORNER_RADIUS,this.handle.width=us.HANDLE_SIZE,this.handle.height=us.HANDLE_SIZE,this.glow.width=us.GLOW_SIZE,this.glow.height=us.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(e){var i,s;if(this.cachedStyles=B({},e),this.active||delete e.strokeWidth,this.locked){delete e.fill,delete e.strokeWidth;const n=(us.HANDLE_SIZE-$o.HANDLE_SIZE)/2;e.x-=n,e.y-=n,this.cachedStyles.x-=n,this.cachedStyles.y-=n}this.handle.setProperties(e),this.glow.setProperties(K(B({},e),{x:((i=e.x)!=null?i:this.glow.x)-2,y:((s=e.y)!=null?s:this.glow.y)-2,strokeWidth:0,fill:e.stroke}))}drag(e){return this.locked?{point:e,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){return this.locked?"default":this.gradient==="vertical"?"col-resize":"row-resize"}};mm.HANDLE_SIZE=12,mm.GLOW_SIZE=16,mm.CORNER_RADIUS=4;var ph=mm,ZS=class gp extends Xo{constructor(){super(),this.handle=new bl._Scene.Circle,this.glow=new bl._Scene.Circle,this.append([this.glow,this.handle]),this.handle.size=gp.HANDLE_SIZE,this.handle.strokeWidth=Xo.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=gp.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(e){super.toggleLocked(e),e?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=$o.HANDLE_SIZE,this.glow.size=$o.GLOW_SIZE):(this.handle.size=gp.HANDLE_SIZE,this.glow.size=gp.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(e){this.cachedStyles=B({},e),this.active||delete e.strokeWidth,this.locked&&(delete e.fill,delete e.strokeWidth),this.handle.setProperties(e),this.glow.setProperties(K(B({},e),{strokeWidth:0,fill:e.stroke}))}};ZS.HANDLE_SIZE=11,ZS.GLOW_SIZE=17;var to=ZS,{isObject:aW}=fm._ModuleSupport,gh=class extends fm._Scene.Group{constructor(){super(...arguments),this.locked=!1}static isCheck(t,e){return aW(t)&&Object.hasOwn(t,"type")&&t.type===e}getCachedBBoxWithoutHandles(){var t;return(t=this.cachedBBoxWithoutHandles)!=null?t:fm._Scene.BBox.zero}computeBBoxWithoutHandles(){return this.computeTransformMatrix(),fm._Scene.Group.computeBBox(this.children.filter(t=>!(t instanceof Xo)))}render(t){super.render(t),this.cachedBBoxWithoutHandles=this.computeBBoxWithoutHandles()}},ym=(Y(),W(H)),{calculateLabelTranslation:oW,ChartAxisDirection:rW}=ym._ModuleSupport,GN=class extends ym._Scene.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new ym._Scene.Text({zIndex:1}),this.rect=new ym._Scene.Rect;const{label:t}=this;t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.textBaseline="middle",t.textAlign="center",this.append([this.rect,this.label])}update(t){this.updateLabel(t),this.updateRect(t),this.updatePosition(t)}updateLabel({value:t,styles:e,context:i}){const{label:s}=this,{fontWeight:n,fontSize:a,fontStyle:o,fontFamily:r,textAlign:l,color:c="white",formatter:h}=e;s.setProperties({fontWeight:n,fontSize:a,fontStyle:o,fontFamily:r,textAlign:l,fill:c}),s.text=this.getFormattedValue(t,h??i.scaleValueFormatter())}updateRect({styles:t}){const{rect:e}=this,{cornerRadius:i,fill:s,fillOpacity:n,stroke:a,strokeOpacity:o}=t;e.setProperties({cornerRadius:i,fill:s,fillOpacity:n,stroke:a,strokeOpacity:o})}updatePosition({x:t,y:e,context:i,styles:{padding:s}}){var n;const{label:a,rect:o}=this,r=a.computeBBox(),l=8,c=5;r.grow(s??l,"horizontal"),r.grow(s??c,"vertical");const h=i.direction===rW.X?c/2:l,{xTranslation:u,yTranslation:d}=oW({yDirection:!0,padding:i.labelPadding-h,position:(n=i.position)!=null?n:"left",bbox:r}),p=t+u,g=e+d;a.translationX=p,a.translationY=g,o.x=p-r.width/2,o.y=g-r.height/2,o.height=r.height,o.width=r.width}getFormattedValue(t,e){var i;return(i=e?.(t))!=null?i:String(t)}};GN.className="AxisLabel";var qS=(Y(),W(H)),{Vec2:sa}=qS._Util,vm=class extends qS._Scene.Line{constructor(){super(...arguments),this.growCollisionBox=9}updateCollisionBBox(){const{growCollisionBox:t,strokeWidth:e,x1:i,y1:s,x2:n,y2:a}=this;let o=e+t;o%2===0&&(o+=1);const r=sa.from(i,s-Math.floor(o/2)),l=sa.from(n,a),c=sa.distance(r,l);this.collisionBBox=new qS._Scene.BBox(r.x,r.y,c,o)}isPointInPath(t,e){var i;const{collisionBBox:s,x1:n,y1:a,x2:o,y2:r}=this;if(!s)return!1;const l=sa.from(n,a),c=sa.from(o,r),h=sa.sub(sa.from(t,e),l),u=sa.sub(c,l),d=sa.rotate(h,sa.angle(h,u),l);return(i=s.containsPoint(d.x,d.y))!=null?i:!1}},{Vec2:VN}=FN._Util,{ChartAxisDirection:lW}=FN._ModuleSupport,Rd=class extends gh{constructor(){super(),this.type="cross-line",this.line=new vm,this.middle=new ph,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(t){return gh.isCheck(t,"cross-line")}update(t,e){var i,s,n;const{line:a,middle:o}=this,{locked:r,visible:l,lineDash:c,lineDashOffset:h,stroke:u,strokeWidth:d,strokeOpacity:p}=t,{seriesRect:g}=e;this.locked=r??!1,this.seriesRect=g,this.isHorizontal=ia.is(t);const f=this.isHorizontal?e.yAxis:e.xAxis,m=this.convertCrossLine(t,f);if(m==null){this.visible=!1;return}else this.visible=l??!0;const{x1:v,y1:y,x2:x,y2:b}=m;a.setProperties({x1:v,y1:y,x2:x,y2:b,lineDash:c,lineDashOffset:h,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:0}),a.updateCollisionBBox();const S={fill:t.handle.fill,stroke:(i=t.handle.stroke)!=null?i:u,strokeOpacity:(s=t.handle.strokeOpacity)!=null?s:p,strokeWidth:(n=t.handle.strokeWidth)!=null?n:d},k=v+(x-v)/2,D=y+(b-y)/2,{width:T,height:I}=o.handle;o.gradient=this.isHorizontal?"horizontal":"vertical",o.update(K(B({},S),{x:k-T/2,y:D-I/2})),o.toggleLocked(this.locked),this.updateAxisLabel(t,f,m)}createAxisLabel(t){const e=new GN;return t.attachLabel(e),e}updateAxisLabel(t,e,{x1:i,y1:s,x2:n,y2:a}){var o,r;this.axisLabel||(this.axisLabel=this.createAxisLabel(e));const{axisLabel:l,seriesRect:c}=this;if(t.axisLabel.enabled){l.visible=this.visible;const[h,u]=e.position==="left"||e.position==="top"?[i,s]:[n,a],d=e.direction===lW.X?h:u;if(!e.inRange(d)){l.visible=!1;return}l.update({x:h+((o=c?.x)!=null?o:0),y:u+((r=c?.y)!=null?r:0),value:t.value,styles:t.axisLabel,context:e})}else l.visible=!1}toggleHandles(t){this.middle.visible=t,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){var t;super.destroy(),(t=this.axisLabel)==null||t.destroy()}toggleActive(t){this.toggleHandles(t),this.middle.toggleActive(t)}dragStart(t,e,i){const s=ia.is(t)?{x:e.x,y:uh(t.value,i.yAxis)}:{x:uh(t.value,i.xAxis),y:e.y};this.dragState={offset:e,middle:s}}drag(t,e,i,s){const{activeHandle:n,dragState:a,locked:o}=this;if(o)return;let r;if(n)this[n].toggleDragging(!0),r=this[n].drag(e).point;else if(a)r=VN.add(a.middle,VN.sub(e,a.offset));else return;const l=kn(r,i);if(!ta(i,l)){s();return}const c=ia.is(t);t.set({value:c?l.y:l.x})}stopDragging(){this.middle.toggleDragging(!1)}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(t,e){var i,s;const{middle:n,seriesRect:a,line:o}=this;return this.activeHandle=void 0,n.containsPoint(t,e)?(this.activeHandle="middle",!0):(t-=(i=a?.x)!=null?i:0,e-=(s=a?.y)!=null?s:0,o.isPointInPath(t,e))}getAnchor(){let t=this.getCachedBBoxWithoutHandles();return t.width===0&&t.height===0&&(t=this.computeBBoxWithoutHandles()),this.isHorizontal?{x:t.x+t.width/2,y:t.y}:{x:t.x+t.width,y:t.y+t.height/2,position:"above"}}convertCrossLine(t,e){var i;if(t.value==null)return;let s=0,n=0,a=0,o=0;const{bounds:r,scaleConvert:l,scaleBandwidth:c}=e,h=((i=c())!=null?i:0)/2;if(ia.is(t)){const u=l(t.value)+h;n=r.width,a=u,o=u}else{const u=l(t.value)+h;s=u,n=u,o=r.height}return{x1:s,y1:a,x2:n,y2:o}}},UN=(Y(),W(H)),HN=class extends UN._ModuleSupport.StateMachine{constructor(t,e,i){const s=({point:n})=>{const a=t==="horizontal",o=a?new ia:new dh;o.set({value:a?n.y:n.x}),e(o)};super("start",{start:{click:{target:"__parent",action:s},cancel:"__parent",onExit:i}}),this.debug=UN._Util.Debug.create(!0,"annotations")}},WN=(Y(),W(H)),{NUMBER:YN,STRING:cW,BaseProperties:hW,Validate:QS,isObject:uW}=WN._ModuleSupport,Zo=class extends Cd("disjoint-channel",NN(KS(Ed(Ko(jo(hW)))))){constructor(){super(...arguments),this.type="disjoint-channel"}static is(t){return uW(t)&&t.type==="disjoint-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.startHeight,t.end.y-=this.endHeight):WN._Util.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Ad(t,this,e)&&Ad(t,this.bottom,e)}};M([QS(cW)],Zo.prototype,"type",2),M([QS(YN)],Zo.prototype,"startHeight",2),M([QS(YN)],Zo.prototype,"endHeight",2);var dW=(Y(),W(H)),pW=(Y(),W(H)),gW=(Y(),W(H)),{Vec2:xm}=gW._Util,KN=class extends gh{dragStart(t,e,i){this.dragState={offset:e,start:ea(t.start,i),end:ea(t.end,i)}}drag(t,e,i,s){t.locked||(this.activeHandle?this.dragHandle(t,e,i,s):this.dragAll(t,e,i))}dragAll(t,e,i){const{dragState:s}=this;if(!s)return;const{xAxis:n,yAxis:a}=i,o=xm.add(s.start,xm.sub(e,s.offset)),r=xm.add(s.end,xm.sub(e,s.offset)),l=kn(o,i),c=kn(r,i),h=(d,p,g)=>p>=d&&p<=g,u=[o,r].concat(...this.getOtherCoords(t,o,r,i));u.every(d=>h(n.bounds.x,d.x,n.bounds.x+n.bounds.width))&&(t.start.x=l.x,t.end.x=c.x),u.every(d=>h(a.bounds.y,d.y,a.bounds.y+a.bounds.height))&&(t.start.y=l.y,t.end.y=c.y)}getOtherCoords(t,e,i,s){return[]}},jN=class extends KN{constructor(){super(...arguments),this.handles={},this.topLine=new vm,this.bottomLine=new vm,this.background=new pW._Scene.Path({zIndex:-1})}update(t,e){const{locked:i,visible:s}=t;this.locked=i??!1,this.seriesRect=e.seriesRect;const n=GS(t,e),a=GS(t.bottom,e);if(n==null||a==null){this.visible=!1;return}else this.visible=s??!0;this.updateLines(t,n,a),this.updateHandles(t,n,a),this.updateBackground(t,n,a);for(const o of Object.values(this.handles))o.toggleLocked(this.locked)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getAnchor(){const t=this.getCachedBBoxWithoutHandles();return{x:t.x+t.width/2,y:t.y}}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){var i,s;const{handles:n,seriesRect:a,topLine:o,bottomLine:r}=this;this.activeHandle=void 0;for(const[l,c]of Object.entries(n))if(c.containsPoint(t,e))return this.activeHandle=l,!0;return t-=(i=a?.x)!=null?i:0,e-=(s=a?.y)!=null?s:0,o.containsPoint(t,e)||r.containsPoint(t,e)}updateBackground(t,e,i){const{background:s}=this;s.path.clear(),s.path.moveTo(e.x1,e.y1),s.path.lineTo(e.x2,e.y2),s.path.lineTo(i.x2,i.y2),s.path.lineTo(i.x1,i.y1),s.path.closePath(),s.checkPathDirty(),s.setProperties({fill:t.background.fill,fillOpacity:t.background.fillOpacity})}},{Vec2:bm}=dW._Util,Sm=class extends jN{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new to,topRight:new to,bottomLeft:new to,bottomRight:new ph},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return gh.isCheck(t,"disjoint-channel")}toggleHandles(t){var e;typeof t=="boolean"&&(t={topLeft:t,topRight:t,bottomLeft:t,bottomRight:t});for(const[i,s]of Object.entries(this.handles))s.visible=(e=t[i])!=null?e:!0,s.toggleHovered(this.activeHandle===i)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}dragHandle(t,e,i,s){const{activeHandle:n,handles:a}=this;if(n==null)return;const{offset:o}=a[n].drag(e);a[n].toggleDragging(!0);const r=c=>kn(c,i),l=t.toJson();switch(n){case"topLeft":case"bottomLeft":{const c=n==="topLeft"?1:-1,h=r({x:a.topLeft.handle.x+o.x,y:a.topLeft.handle.y+o.y*c}),u=r({x:a.bottomLeft.handle.x+o.x,y:a.bottomLeft.handle.y+o.y*-c});if(!h||!u||t.start.y==null)return;const d=t.startHeight+(h.y-t.start.y)*2;t.start.x=h.x,t.start.y=h.y,t.startHeight=d;break}case"topRight":{const c=r({x:a.topRight.handle.x+o.x,y:a.topRight.handle.y+o.y});if(!c||t.end.y==null)return;const h=t.endHeight+(c.y-t.end.y)*2;t.end.x=c.x,t.end.y=c.y,t.endHeight=h;break}case"bottomRight":{const c=r({x:a.bottomLeft.handle.x+o.x,y:a.bottomLeft.handle.y+o.y}),h=r({x:a.bottomRight.handle.x+o.x,y:a.bottomRight.handle.y+o.y});if(!c||!h||t.start.y==null||t.end.y==null)return;const u=t.end.y-h.y,d=t.startHeight-(t.endHeight-u);t.startHeight=d,t.endHeight=u}}t.isValidWithContext(i)||(t.set(l),s())}getOtherCoords(t,e,i,s){const{dragState:n}=this;if(!n)return[];const a=ea(t.bottom.start,s).y-ea(t.start,s).y,o=ea(t.bottom.end,s).y-ea(t.end,s).y,r=bm.add(e,bm.from(0,a)),l=bm.add(i,bm.from(0,o));return[r,l]}updateLines(t,e,i){const{topLine:s,bottomLine:n}=this,{lineDash:a,lineDashOffset:o,stroke:r,strokeOpacity:l,strokeWidth:c}=t,h={lineDash:a,lineDashOffset:o,stroke:r,strokeOpacity:l,strokeWidth:c};s.setProperties(B({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},h)),n.setProperties(B({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},h)),s.updateCollisionBBox(),n.updateCollisionBBox()}updateHandles(t,e,i){var s,n,a;const{handles:{topLeft:o,topRight:r,bottomLeft:l,bottomRight:c}}=this,h={fill:t.handle.fill,stroke:(s=t.handle.stroke)!=null?s:t.stroke,strokeOpacity:(n=t.handle.strokeOpacity)!=null?n:t.strokeOpacity,strokeWidth:(a=t.handle.strokeWidth)!=null?a:t.strokeWidth};o.update(K(B({},h),{x:e.x1,y:e.y1})),r.update(K(B({},h),{x:e.x2,y:e.y2})),l.update(K(B({},h),{x:i.x1,y:i.y1})),c.update(K(B({},h),{x:i.x2-c.handle.width/2,y:i.y2-c.handle.height/2}))}},XN=(Y(),W(H)),fW=class extends XN._ModuleSupport.StateMachine{constructor(t,e){const i=({point:r})=>{const l=new Zo;l.set({start:r,end:r,startHeight:0,endHeight:0}),t(l)},s=({datum:r,node:l,point:c})=>{r?.set({end:c}),l?.toggleHandles({topRight:!1,bottomLeft:!1,bottomRight:!1})},n=({datum:r,point:l})=>{r?.set({end:l})},a=({datum:r,node:l,point:c})=>{if(r.start.y==null||r.end.y==null)return;const h=r.end.y-c.y,u=(r.start.y-r.end.y)*2+h,d={x:r.start.x,y:r.start.y-u},p={x:r.end.x,y:c.y};l.toggleHandles({bottomLeft:!1}),!(!e(d)||!e(p))&&r.set({startHeight:u,endHeight:h})},o=({datum:r,node:l,point:c})=>{if(!r||!l||r.start.y==null||r.end.y==null)return;const h=r.end.y-c.y,u=(r.start.y-r.end.y)*2+h,d={x:r.start.x,y:r.start.y-h},p={x:r.end.x,y:c.y};l.toggleHandles(!0),e(d)&&e(p)&&r.set({startHeight:u,endHeight:h})};super("start",{start:{click:{target:"end",action:i},drag:{target:"end",action:i},cancel:"__parent"},end:{hover:s,click:{target:"height",action:n},drag:s,cancel:"__parent"},height:{hover:a,click:{target:"__parent",action:o},cancel:"__parent"}}),this.debug=XN._Util.Debug.create(!0,"annotations")}},mW=(Y(),W(H)),{STRING:yW,BaseProperties:vW,Validate:xW,isObject:bW}=mW._ModuleSupport,fh=class extends Cd("line",KS(Ed(jS(CN(Ko(jo(vW))))))){constructor(){super(...arguments),this.type="line"}static is(t){return bW(t)&&t.type==="line"}isValidWithContext(t,e){return super.isValid(e)&&Ad(t,this,e)}};M([xW(yW)],fh.prototype,"type",2);var sq=(Y(),W(H)),Mm=class extends KN{constructor(){super(),this.type="line",this.line=new vm,this.start=new to,this.end=new to,this.append([this.line,this.start,this.end])}static is(t){return gh.isCheck(t,"line")}update(t,e){var i,s,n;const{line:a,start:o,end:r}=this,{locked:l,visible:c,lineDash:h,lineDashOffset:u,stroke:d,strokeWidth:p,strokeOpacity:g}=t;this.locked=l??!1,this.seriesRect=e.seriesRect;const f=GS(t,e);if(f==null){this.visible=!1;return}else this.visible=c??!0;const{x1:m,y1:v,x2:y,y2:x}=f;a.setProperties({x1:m,y1:v,x2:y,y2:x,lineDash:h,lineDashOffset:u,stroke:d,strokeWidth:p,strokeOpacity:g,fillOpacity:0}),a.updateCollisionBBox();const b={fill:t.handle.fill,stroke:(i=t.handle.stroke)!=null?i:d,strokeOpacity:(s=t.handle.strokeOpacity)!=null?s:g,strokeWidth:(n=t.handle.strokeWidth)!=null?n:p};o.update(K(B({},b),{x:m,y:v})),r.update(K(B({},b),{x:y,y:x})),o.toggleLocked(this.locked),r.toggleLocked(this.locked)}toggleHandles(t){var e,i;typeof t=="boolean"&&(t={start:t,end:t}),this.start.visible=(e=t.start)!=null?e:!0,this.end.visible=(i=t.end)!=null?i:!0,this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i,s){const{activeHandle:n}=this;if(!n)return;this[n].toggleDragging(!0);const a=kn(this[n].drag(e).point,i);if(!ta(i,a)){s();return}t[n].x=a.x,t[n].y=a.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){const t=this.getCachedBBoxWithoutHandles();return{x:t.x+t.width/2,y:t.y}}getCursor(){return this.activeHandle==null?"pointer":"default"}containsPoint(t,e){var i,s;const{start:n,end:a,seriesRect:o,line:r}=this;return this.activeHandle=void 0,n.containsPoint(t,e)?(this.activeHandle="start",!0):a.containsPoint(t,e)?(this.activeHandle="end",!0):(t-=(i=o?.x)!=null?i:0,e-=(s=o?.y)!=null?s:0,r.isPointInPath(t,e))}},$N=(Y(),W(H)),SW=class extends $N._ModuleSupport.StateMachine{constructor(t){const e=({point:n})=>{const a=new fh;a.set({start:n,end:n}),t(a)},i=({datum:n,node:a,point:o})=>{n?.set({end:o}),a?.toggleHandles({end:!1})},s=({datum:n,node:a,point:o})=>{n?.set({end:o}),a?.toggleHandles(!0)};super("start",{start:{click:{target:"end",action:e},drag:{target:"end",action:e},cancel:"__parent"},end:{hover:i,click:{target:"__parent",action:s},drag:i,cancel:"__parent"}}),this.debug=$N._Util.Debug.create(!0,"annotations")}},ZN=(Y(),W(H)),{NUMBER:MW,STRING:_W,OBJECT:kW,BaseProperties:DW,Validate:JS,isObject:IW}=ZN._ModuleSupport,qo=class extends Cd("parallel-channel",NN(KS(Ed(CN(Ko(jo(DW))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new eW}static is(t){return IW(t)&&t.type==="parallel-channel"}get bottom(){const t={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof t.start.y=="number"&&typeof t.end.y=="number"?(t.start.y-=this.height,t.end.y-=this.height):ZN._Util.Logger.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),t}isValidWithContext(t,e){return super.isValid(e)&&Ad(t,this,e)&&Ad(t,this.bottom,e)}};M([JS(_W)],qo.prototype,"type",2),M([JS(MW)],qo.prototype,"height",2),M([JS(kW,{optional:!0})],qo.prototype,"middle",2);var qN=(Y(),W(H)),{Vec2:mh}=qN._Util,_m=class extends jN{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new to,topMiddle:new ph,topRight:new to,bottomLeft:new to,bottomMiddle:new ph,bottomRight:new to},this.middleLine=new qN._Scene.Line,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(t){return gh.isCheck(t,"parallel-channel")}toggleHandles(t){var e;typeof t=="boolean"&&(t={topLeft:t,topMiddle:t,topRight:t,bottomLeft:t,bottomMiddle:t,bottomRight:t});for(const[i,s]of Object.entries(this.handles))s.visible=(e=t[i])!=null?e:!0,s.toggleHovered(this.activeHandle===i)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}dragHandle(t,e,i,s){const{activeHandle:n,handles:a}=this;if(n==null)return;const{offset:o}=a[n].drag(e);a[n].toggleDragging(!0);const r=t.toJson();let l=[];switch(n){case"topLeft":case"bottomLeft":l=["topLeft","bottomLeft"];break;case"topMiddle":l=["topLeft","topRight"],o.y-=ph.HANDLE_SIZE/2;break;case"topRight":case"bottomRight":l=["topRight","bottomRight"];break;case"bottomMiddle":l=["bottomLeft","bottomRight"],o.y-=ph.HANDLE_SIZE/2;break}const c=l.map(h=>kn(mh.add(a[h].handle,o),i));if(c.some(h=>!ta(i,h))){s();return}if((n==="topMiddle"||n==="bottomMiddle")&&t.start.y!=null){const h=kn(mh.add(a.topLeft.handle,o),i);ta(i,h)&&(n==="topMiddle"?t.height+=h.y-t.start.y:t.height-=h.y-t.start.y)}for(const[h,u]of c.entries())switch(l[h]){case"topLeft":t.start.x=u.x,t.start.y=u.y;break;case"topRight":t.end.x=u.x,t.end.y=u.y;break}t.isValidWithContext(i)||(t.set(r),s())}getOtherCoords(t,e,i,s){const{dragState:n}=this;if(!n)return[];const a=ea(t.bottom.start,s).y-ea(t.start,s).y,o=mh.add(e,mh.from(0,a)),r=mh.add(i,mh.from(0,a));return[o,r]}updateLines(t,e,i){var s,n,a,o,r,l;const{topLine:c,middleLine:h,bottomLine:u}=this,{lineDash:d,lineDashOffset:p,stroke:g,strokeOpacity:f,strokeWidth:m}=t,v={lineDash:d,lineDashOffset:p,stroke:g,strokeOpacity:f,strokeWidth:m};c.setProperties(B({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},v)),u.setProperties(B({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},v)),c.updateCollisionBBox(),u.updateCollisionBBox(),h.setProperties({x1:e.x1,y1:i.y1+(e.y1-i.y1)/2,x2:e.x2,y2:i.y2+(e.y2-i.y2)/2,lineDash:(s=t.middle.lineDash)!=null?s:d,lineDashOffset:(n=t.middle.lineDashOffset)!=null?n:p,stroke:(a=t.middle.stroke)!=null?a:g,strokeOpacity:(o=t.middle.strokeOpacity)!=null?o:f,strokeWidth:(r=t.middle.strokeWidth)!=null?r:m,visible:(l=t.middle.visible)!=null?l:!0})}updateHandles(t,e,i){var s,n,a;const{handles:{topLeft:o,topMiddle:r,topRight:l,bottomLeft:c,bottomMiddle:h,bottomRight:u}}=this,d={fill:t.handle.fill,stroke:(s=t.handle.stroke)!=null?s:t.stroke,strokeOpacity:(n=t.handle.strokeOpacity)!=null?n:t.strokeOpacity,strokeWidth:(a=t.handle.strokeWidth)!=null?a:t.strokeWidth};o.update(K(B({},d),{x:e.x1,y:e.y1})),l.update(K(B({},d),{x:e.x2,y:e.y2})),c.update(K(B({},d),{x:i.x1,y:i.y1})),u.update(K(B({},d),{x:i.x2,y:i.y2})),r.update(K(B({},d),{x:e.x1+(e.x2-e.x1)/2-r.handle.width/2,y:e.y1+(e.y2-e.y1)/2-r.handle.height/2})),h.update(K(B({},d),{x:i.x1+(i.x2-i.x1)/2-h.handle.width/2,y:i.y1+(i.y2-i.y1)/2-h.handle.height/2}))}},QN=(Y(),W(H)),AW=class extends QN._ModuleSupport.StateMachine{constructor(t,e){const i=({point:r})=>{const l=new qo;l.set({start:r,end:r,height:0}),t(l)},s=({datum:r,node:l,point:c})=>{r?.set({end:c,height:0}),l?.toggleHandles({topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},n=({datum:r,node:l,point:c})=>{r?.set({end:c}),l?.toggleHandles({topMiddle:!1,bottomMiddle:!1})},a=({datum:r,node:l,point:c})=>{if(r.start.y==null||r.end.y==null)return;const h=r.end.y-c.y,u=r.start.y-h;l.toggleHandles({topMiddle:!1,bottomMiddle:!1}),!(!e({x:r.start.x,y:u})||!e({x:r.end.x,y:c.y}))&&r.set({height:h})},o=({datum:r,node:l,point:c})=>{if(!r||!l||r.start.y==null||r.end.y==null)return;const h=r.end.y-c.y,u=r.start.y-h;l.toggleHandles(!0),e({x:r.start.x,y:u})&&e({x:r.end.x,y:c.y})&&r.set({height:h})};super("start",{start:{click:{target:"end",action:i},drag:{target:"end",action:i},cancel:"__parent"},end:{hover:s,click:{target:"height",action:n},drag:s,cancel:"__parent"},height:{hover:a,click:{target:"__parent",action:o},cancel:"__parent"}}),this.debug=QN._Util.Debug.create(!0,"annotations")}},{BOOLEAN:JN,ChartUpdateType:LW,Cursor:tM,InteractionState:Sl,PropertiesArray:TW,StateMachine:NW,ToolbarManager:km,Validate:eM,REGIONS:Dm,UNION:OW,ChartAxisDirection:CW}=Jn._ModuleSupport,{Vec2:ei}=Jn._Util,iM={line:fh,"horizontal-line":ia,"vertical-line":dh,"parallel-channel":qo,"disjoint-channel":Zo},EW={line:Mm,"horizontal-line":Rd,"vertical-line":Rd,"disjoint-channel":Sm,"parallel-channel":_m},RW=class extends NW{constructor(t,e,i,s){super("idle",{idle:{onEnter:()=>t(),line:new SW(n=>e("line",n)),"horizontal-line":new HN("horizontal",n=>e("horizontal-line",n),i),"vertical-line":new HN("vertical",n=>e("vertical-line",n),i),"disjoint-channel":new fW(n=>e("disjoint-channel",n),s),"parallel-channel":new AW(n=>e("parallel-channel",n),s)}}),this.debug=Jn._Util.Debug.create(!0,"annotations")}},wW=OW(["x","y","xy"],"an axis type"),sM=class{constructor(){this.enabled=!0,this.axes="y"}};M([eM(JN)],sM.prototype,"enabled",2),M([eM(wW,{optional:!0})],sM.prototype,"axes",2);var tO=class extends Jn._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.__hackWasDisabled=!1,this.enabled=!0,this.axesButtons=new sM,this.annotationData=new TW(this.createAnnotationDatum),this.container=new Jn._Scene.Group({name:"static-annotations"}),this.annotations=new Jn._Scene.Selection(this.container,this.createAnnotationScene.bind(this)),this.colorPicker=new FH(this.ctx),this.state=new RW(()=>{t.cursorManager.updateCursor("annotations"),t.interactionManager.popState(Sl.Annotations),t.toolbarManager.toggleGroup("annotations","annotationOptions",this.active!=null),t.tooltipManager.unsuppressTooltip("annotations");for(const r of BS)t.toolbarManager.toggleButton("annotations",r,{active:!1});this.toggleAnnotationOptionsButtons()},this.appendDatum.bind(this),()=>{this.active=this.annotationData.length-1},this.validateChildStateDatumPoint.bind(this));const{All:e,Default:i,Annotations:s,ZoomDrag:n}=Sl,a=t.regionManager.getRegion(Dm.SERIES),o=Object.values(Dm).filter(r=>![Dm.SERIES,Dm.NAVIGATOR].includes(r)).map(r=>t.regionManager.getRegion(r));t.domManager.addStyles(Yo,jH),this.destroyFns.push(t.annotationManager.attachNode(this.container),()=>this.colorPicker.destroy(),a.addListener("hover",r=>this.onHover(r),e),a.addListener("click",r=>this.onClick(r),e),a.addListener("drag-start",this.onDragStart.bind(this),i|n|s),a.addListener("drag",this.onDrag.bind(this),i|n|s),a.addListener("drag-end",this.onDragEnd.bind(this),e),a.addListener("cancel",this.onCancel.bind(this),e),a.addListener("delete",this.onDelete.bind(this),e),...o.map(r=>r.addListener("click",this.onCancel.bind(this),e)),t.annotationManager.addListener("restore-annotations",this.onRestoreAnnotations.bind(this)),t.toolbarManager.addListener("button-pressed",this.onToolbarButtonPress.bind(this)),t.toolbarManager.addListener("button-moved",this.onToolbarButtonMoved.bind(this)),t.toolbarManager.addListener("cancelled",this.onToolbarCancelled.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),()=>t.domManager.removeStyles(Yo))}createAnnotationScene(t){return new EW[t.type]}createAnnotationDatum(t){if(t.type in iM)return new iM[t.type]().set(t);throw new Error(`AG Charts - Cannot set property of unknown type [${t.type}], expected one of [${Object.keys(iM)}], ignoring.`)}appendDatum(t,e){this.annotationData.push(e);const i=this.ctx.annotationManager.getAnnotationTypeStyles(t);i&&e.set(i),this.defaultColor&&this.colorDatum(e,this.defaultColor)}onRestoreAnnotations(t){this.enabled&&(this.clear(),this.annotationData.set(t.annotations),this.update())}onToolbarButtonPress(t){const{state:e,ctx:{interactionManager:i,toolbarManager:s,tooltipManager:n}}=this;if(km.isGroup("annotationOptions",t)){this.onToolbarAnnotationOptionButtonPress(t);return}if(!km.isGroup("annotations",t)){this.reset(),this.update();return}if(t.value==="clear"){this.clear(),this.update();return}n.suppressTooltip("annotations");const a=zH(t.value);if(!a){Jn._Util.Logger.errorOnce(`Can not create unknown annotation type [${t.value}], ignoring.`),this.update();return}e.is("idle")||this.cancel(),i.pushState(Sl.Annotations);for(const o of BS)s.toggleButton("annotations",o,{active:o===t.value});e.transition(a),this.reset(),this.update()}onToolbarAnnotationOptionButtonPress(t){var e;if(!km.isGroup("annotationOptions",t))return;const{active:i,annotationData:s}=this;if(i!=null){switch(t.value){case"line-color":this.colorPicker.show({color:(e=this.getTypedDatum(s[i]))==null?void 0:e.stroke,onChange:this.onColorPickerChange.bind(this),onClose:this.onColorPickerClose.bind(this)});break;case"delete":s.splice(i,1),this.reset();break;case"lock":s[i].locked=!0,this.toggleAnnotationOptionsButtons(),this.colorPicker.hide();break;case"unlock":s[i].locked=!1,this.toggleAnnotationOptionsButtons();break}this.update()}}onToolbarButtonMoved(t){const{rect:e}=t,i=ei.add(e,ei.from(0,e.height+4)),s={y:e.y-4};this.colorPicker.setAnchor(i,s)}onColorPickerChange(t){const{active:e,annotationData:i}=this;e!=null&&(this.colorDatum(i[e],t),this.defaultColor=t,this.update())}onColorPickerClose(){this.colorPicker.hide()}onToolbarCancelled(t){if(t.group==="annotations"){this.onCancel();for(const e of BS)this.ctx.toolbarManager.toggleButton("annotations",e,{active:!1})}}onLayoutComplete(t){var e,i,s;const n=t.series.paddedRect;this.seriesRect=n;for(const a of(e=t.axes)!=null?e:[])a.direction===Jn._ModuleSupport.ChartAxisDirection.X?this.xAxis=this.getAxis(a,n,(i=this.xAxis)==null?void 0:i.button):this.yAxis=this.getAxis(a,n,(s=this.yAxis)==null?void 0:s.button);this.updateAnnotations()}getAxis(t,e,i){const s=this.ctx.axisManager.getAxisContext(t.direction)[0],{position:n="bottom",direction:a}=s,o=t.gridPadding+t.seriesAreaPadding,r=mN(new Jn._Scene.BBox(0,0,e.width,e.height),n,o),l=s.direction===CW.X?"vertical":"horizontal",{axesButtons:c}=this;if(this.enabled&&c.enabled&&(c.axes==="xy"||c.axes===a)){i??(i=new _N(this.ctx,s,d=>this.onAxisButtonClick(d,l),e));const u=VS(t);i.update(e,u)}else i?.destroy(),i=void 0;return{layout:t,context:s,bounds:r,button:i}}updateAnnotations(){const{active:t,seriesRect:e,annotationData:i,annotations:s,ctx:{annotationManager:n,toolbarManager:a}}=this,o=this.getAnnotationContext();!e||!o||(n.updateData(i.toJson()),s.update(i??[],void 0,r=>r.id).each((r,l,c)=>{if(!this.validateDatum(l)){r.visible=!1;return}fh.is(l)&&Mm.is(r)&&r.update(l,o),Zo.is(l)&&Sm.is(r)&&r.update(l,o),(ia.is(l)||dh.is(l))&&Rd.is(r)&&r.update(l,o),qo.is(l)&&_m.is(r)&&r.update(l,o),t===c&&a.changeFloatingAnchor("annotationOptions",r.getAnchor())}))}validateDatum(t){const e=this.getAnnotationContext();return e?t.isValidWithContext(e,`Annotation [${t.type}] `):!0}validateChildStateDatumPoint(t){const e=this.getAnnotationContext(),i=e?ta(e,t):!0;return i||this.ctx.cursorManager.updateCursor("annotations",tM.NotAllowed),i}getAnnotationContext(){const{seriesRect:t,xAxis:e,yAxis:i}=this;if(t&&e&&i)return{seriesRect:t,xAxis:K(B({},e.context),{bounds:e.bounds,labelPadding:VS(e.layout)}),yAxis:K(B({},i.context),{bounds:i.bounds,labelPadding:VS(e.layout)})}}onHover(t){this.state.is("idle")?this.onHoverSelecting(t):this.onHoverAdding(t)}onHoverSelecting(t){const{active:e,annotations:i,ctx:{cursorManager:s}}=this;this.hovered=void 0,i.each((n,a,o)=>{var r;const l=n.containsPoint(t.offsetX,t.offsetY);l&&((r=this.hovered)!=null||(this.hovered=o)),n.toggleHandles(l||e===o)}),s.updateCursor("annotations",this.hovered==null?void 0:i.nodes()[this.hovered].getCursor())}onHoverAdding(t){const{annotationData:e,annotations:i,seriesRect:s,state:n,ctx:{cursorManager:a}}=this,o=this.getAnnotationContext();if(!o)return;const r=ei.sub(ei.fromOffset(t),ei.required(s)),l=kn(r,o),c=ta(o,l);if(a.updateCursor("annotations",c?void 0:tM.NotAllowed),!c||n.is("start"))return;const h=e.at(-1);this.active=e.length-1;const u=i.nodes()[this.active];if(!h||!u)return;u.toggleActive(!0);const d={datum:h,node:u,point:l};this.state.transition("hover",d),this.update()}onClick(t){const{dragOffset:e,state:i}=this;if(i.is("end")&&e&&e.x===t.offsetX&&e.y===t.offsetY){this.dragOffset=void 0;return}i.is("idle")?this.onClickSelecting():this.onClickAdding(t)}onAxisButtonClick(t,e){this.onCancel();const i=this.getAnnotationContext();if(!this.annotationData||!i)return;const{state:s,ctx:{toolbarManager:n,interactionManager:a}}=this;a.pushState(Sl.Annotations);const o=e==="horizontal";if(s.transition(o?"horizontal-line":"vertical-line"),n.toggleGroup("annotations","annotationOptions",!1),!t)return;const r=kn(t,i);if(!ta(i,r))return;const l={point:r};s.transition("click",l),this.update()}onClickSelecting(){const{annotations:t,colorPicker:e,hovered:i,ctx:{toolbarManager:s,tooltipManager:n}}=this;e.hide(),this.active!=null&&t.nodes()[this.active].toggleActive(!1),this.active=i,s.toggleGroup("annotations","annotationOptions",this.active!=null),this.active==null?n.unsuppressTooltip("annotations"):(t.nodes()[this.active].toggleActive(!0),n.suppressTooltip("annotations"),this.toggleAnnotationOptionsButtons()),this.update()}onClickAdding(t){const{active:e,annotationData:i,annotations:s,seriesRect:n,state:a,ctx:{toolbarManager:o}}=this;o.toggleGroup("annotations","annotationOptions",!1);const r=this.getAnnotationContext();if(!r)return;const l=i.at(-1),c=ei.sub(ei.fromOffset(t),ei.required(n)),h=kn(c,r),u=e!=null?s.nodes()[e]:void 0;if(!ta(r,h))return;const d={datum:l,node:u,point:h};a.transition("click",d),this.update()}onDragStart(t){const{annotationData:e,annotations:i,hovered:s,seriesRect:n}=this;if(this.isOtherElement(t))return;const a=this.getAnnotationContext();if(s==null||e==null||!this.state.is("idle")||a==null)return;const o=e[s],r=i.nodes()[s],l=ei.sub(ei.fromOffset(t),ei.required(n));Mm.is(r)&&r.dragStart(o,l,a),Rd.is(r)&&r.dragStart(o,l,a),Sm.is(r)&&r.dragStart(o,l,a),_m.is(r)&&r.dragStart(o,l,a)}onDrag(t){const{state:e}=this;this.isOtherElement(t)||(e.is("start")&&(this.dragOffset=ei.fromOffset(t)),e.is("idle")?(this.onClickSelecting(),this.onDragAnnotation(t)):this.onDragAdding(t))}onDragAnnotation(t){const{annotationData:e,annotations:i,hovered:s,seriesRect:n,ctx:{cursorManager:a,interactionManager:o}}=this,r=this.getAnnotationContext();if(s==null||e==null||!this.state.is("idle")||r==null)return;o.pushState(Sl.Annotations);const l=e[s],c=i.nodes()[s],h=ei.sub(ei.fromOffset(t),ei.required(n));a.updateCursor("annotations");const u=()=>a.updateCursor("annotations",tM.NotAllowed);fh.is(l)&&Mm.is(c)&&c.drag(l,h,r,u),(ia.is(l)||dh.is(l))&&Rd.is(c)&&c.drag(l,h,r,u),Zo.is(l)&&Sm.is(c)&&c.drag(l,h,r,u),qo.is(l)&&_m.is(c)&&c.drag(l,h,r,u),this.update()}onDragAdding(t){const{active:e,annotationData:i,annotations:s,seriesRect:n,state:a,ctx:{interactionManager:o}}=this,r=this.getAnnotationContext();if(i==null||r==null)return;const l=e!=null?i[e]:void 0,c=e!=null?s.nodes()[e]:void 0,h=ei.sub(ei.fromOffset(t),ei.required(n));o.pushState(Sl.Annotations);const u=kn(h,r),d={datum:l,node:c,point:u};a.transition("drag",d),this.active=i.length-1,this.update()}onDragEnd(t){const{active:e,annotations:i,ctx:{cursorManager:s,interactionManager:n}}=this;this.state.is("idle")&&(n.popState(Sl.Annotations),s.updateCursor("annotations"),e!=null&&(i.nodes()[e].stopDragging(),this.update()))}onCancel(){this.state.is("idle")||this.cancel(),this.reset(),this.update()}onDelete(){const{active:t,annotationData:e,state:i}=this;t!=null&&(i.is("idle")||i.transition("cancel"),e.splice(t,1),this.reset(),this.update())}toggleAnnotationOptionsButtons(){var t,e;const{active:i,annotationData:s,ctx:{toolbarManager:n}}=this;if(i==null)return;const a=(e=(t=s.at(i))==null?void 0:t.locked)!=null?e:!1;n.toggleButton("annotationOptions","line-color",{enabled:!a}),n.toggleButton("annotationOptions","delete",{enabled:!a}),n.toggleButton("annotationOptions","lock",{visible:!a}),n.toggleButton("annotationOptions","unlock",{visible:a})}getTypedDatum(t){if(fh.is(t)||ia.is(t)||dh.is(t)||Zo.is(t)||qo.is(t))return t}colorDatum(t,e){t.stroke=e,"axisLabel"in t&&(t.axisLabel.fill=e,t.axisLabel.stroke=e),"background"in t&&(t.background.fill=e)}isOtherElement({targetElement:t}){const{colorPicker:e,ctx:{domManager:i}}=this;return t?km.isChildElement(i,t)||e.isChildElement(t):!1}clear(){this.annotationData.splice(0,this.annotationData.length),this.reset()}reset(){var t;this.active!=null&&((t=this.annotations.nodes().at(this.active))==null||t.toggleActive(!1)),this.hovered=void 0,this.active=void 0,this.ctx.toolbarManager.toggleGroup("annotations","annotationOptions",!1),this.colorPicker.hide()}cancel(){const{active:t,annotationData:e,state:i}=this;i.transition("cancel"),t!=null&&e&&e.splice(t,1)}update(){this.ctx.updateService.update(LW.PERFORM_LAYOUT,{skipAnimations:!0})}};M([Jn._ModuleSupport.ObserveChanges((t,e)=>{const{ctx:{annotationManager:i,stateManager:s,toolbarManager:n}}=t;n.toggleGroup("annotations","annotations",!!e),t.__hackWasDisabled&&e?(s.restoreState(i),t.__hackWasDisabled=!1):e===!1&&(t.__hackWasDisabled=!0,t.clear())}),eM(JN)],tO.prototype,"enabled",2);var PW={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],instanceConstructor:tO,themeTemplate:{annotations:{line:{stroke:Li._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,handle:{fill:Li._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},"horizontal-line":{stroke:Li._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,handle:{fill:Li._Theme.DEFAULT_ANNOTATION_HANDLE_FILL},axisLabel:{enabled:!0,color:"white",fill:Li._Theme.DEFAULT_ANNOTATION_STROKE,fontSize:12,fontFamily:Li._Theme.DEFAULT_FONT_FAMILY}},"vertical-line":{stroke:Li._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,handle:{fill:Li._Theme.DEFAULT_ANNOTATION_HANDLE_FILL},axisLabel:{enabled:!0,color:"white",fill:Li._Theme.DEFAULT_ANNOTATION_STROKE,fontSize:12,fontFamily:Li._Theme.DEFAULT_FONT_FAMILY}},"disjoint-channel":{stroke:Li._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,background:{fill:Li._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:Li._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},"parallel-channel":{stroke:Li._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:Li._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:Li._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}}}}},nM=(Y(),W(H)),eO=(Y(),W(H)),{Image:BW}=eO._Scene,{BaseProperties:FW,ObserveChanges:zW,ProxyProperty:GW,Validate:Ml,NUMBER:Im,POSITIVE_NUMBER:iO,RATIO:VW,createElement:UW,calculatePlacement:HW}=eO._ModuleSupport,eo=class extends FW{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var t;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),(t=this.onLoad)==null||t.call(this))},this.imageElement=UW("img"),this.imageElement.onload=this.onImageLoad,this.node=new BW(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e,this.node.setProperties(this.complete?B({visible:!0,opacity:this.opacity},HW(this.imageElement.width,this.imageElement.height,this.containerWidth,this.containerHeight,this)):{visible:!1})}};M([Ml(Im,{optional:!0})],eo.prototype,"top",2),M([Ml(Im,{optional:!0})],eo.prototype,"right",2),M([Ml(Im,{optional:!0})],eo.prototype,"bottom",2),M([Ml(Im,{optional:!0})],eo.prototype,"left",2),M([Ml(iO,{optional:!0})],eo.prototype,"width",2),M([Ml(iO,{optional:!0})],eo.prototype,"height",2),M([Ml(VW)],eo.prototype,"opacity",2),M([GW("imageElement.src"),zW(t=>t.loadedSynchronously=t.complete)],eo.prototype,"url",2);var{ActionOnSet:WW,OBJECT:YW,Validate:KW}=nM._ModuleSupport,sO=class extends nM._ModuleSupport.Background{constructor(t){super(t),this.ctx=t,this.image=new eo}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(nM._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};M([KW(YW,{optional:!0}),WW({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],sO.prototype,"image",2);var jW={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],instanceConstructor:sO},XW=(Y(),W(H)),Qo=(Y(),W(H)),$W=".ag-chart-context-menu{background:rgb(248,248,248);border:1px solid #babfc7;border-radius:5px;box-shadow:0 1px 4px 1px rgba(186,191,199,0.4);color:rgb(24,29,31);font:13px Verdana,sans-serif;transition:transform 0.1s ease;white-space:nowrap;z-index:var(--ag-charts-layer-context-menu)}.ag-chart-context-menu.ag-charts-dark-context-menu{color:white;background:#15181c}.ag-chart-context-menu__cover{position:fixed;left:0px;top:0px}.ag-chart-context-menu__menu{display:flex;flex-direction:column;padding:0.5em 0}.ag-chart-context-menu__menu:focus{outline:none}.ag-chart-context-menu__item{background:none;border:none;box-sizing:border-box;font:inherit;padding:0.5em 1em;text-align:left;-webkit-appearance:none;-moz-appearance:none}.ag-chart-context-menu__item.ag-charts-dark-context-menu{color:white}.ag-chart-context-menu__item:hover{background:rgb(33,150,243,0.1)}.ag-chart-context-menu__item:hover.ag-charts-dark-context-menu{background:rgb(33,150,243,0.1)}.ag-chart-context-menu__item:active{background:rgb(33,150,243,0.2)}.ag-chart-context-menu__item:active.ag-charts-dark-context-menu{background:rgb(33,150,243,0.1)}.ag-chart-context-menu__item[aria-disabled='true']{border:none;opacity:0.5;text-align:left}.ag-chart-context-menu__item[aria-disabled='true']:hover{background:inherit;cursor:inherit}.ag-chart-context-menu__divider{margin:5px 0;background:#babfc7;height:1px}.ag-chart-context-menu__divider.ag-charts-dark-context-menu{background:rgb(33,150,243,0.1)}",Am="ag-chart-context-menu",Lm="ag-charts-dark-context-menu",{BOOLEAN:nO,Validate:aO,createElement:aM,initMenuKeyNav:ZW,makeAccessibleClickListener:qW,ContextMenuRegistry:Tm}=Qo._ModuleSupport,Nm="context-menu";function QW(t,e){const{children:i}=t??{};if(!i)return[];const s=[];for(let n=0;n<i.length;n++){const a=i[n];a instanceof e&&s.push(a)}return s}var oM=class extends Qo._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.extraLegendItemActions=[],this.x=0,this.y=0,this.menuElementDestroyFns=[],this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.scene=t.scene;const{All:e}=Qo._ModuleSupport.InteractionState;if(this.destroyFns.push(t.regionManager.listenAll("click",i=>this.onClick(),e)),this.groups={default:[],extra:[],extraSeries:[],extraNode:[],extraLegendItem:[]},this.element=t.domManager.addChild("canvas-overlay",Nm),this.element.classList.add(Am),this.element.addEventListener("contextmenu",i=>i.preventDefault()),this.destroyFns.push(()=>{var i;return(i=this.element.parentNode)==null?void 0:i.removeChild(this.element)}),this.hide(),this.destroyFns.push(t.domManager.addListener("hidden",()=>this.hide())),typeof MutationObserver<"u"){const i=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});i.observe(this.element,{childList:!0}),this.mutationObserver=i,this.destroyFns.push(()=>i.disconnect())}t.domManager.addStyles(Nm,$W),this.registry.registerDefaultAction({id:"download",type:"all",label:"contextMenuDownload",action:()=>{const i=t.chartService.title;let s="image";i?.enabled&&i?.text!==void 0&&(s=i.text),this.scene.download(s)}}),this.destroyFns.push(this.registry.addListener(i=>this.onContext(i)))}isShown(){return this.menuElement!==void 0}onClick(){this.isShown()&&this.hide()}onContext(t){if(!this.enabled)return;t.preventDefault(),this.showEvent=t.sourceEvent,this.x=t.x,this.y=t.y,this.groups.default=this.registry.filterActions(t.type),this.pickedNode=void 0,this.pickedLegendItem=void 0,this.groups.extra=this.extraActions.map(({label:o,action:r})=>({type:"all",label:o,action:r})),Tm.check("series",t)&&(this.pickedNode=t.context.pickedNode,this.pickedNode&&(this.groups.extraNode=this.extraNodeActions.map(({label:o,action:r})=>({type:"node",label:o,action:r})))),Tm.check("legend",t)&&(this.pickedLegendItem=t.context.legendItem,this.pickedLegendItem&&(this.groups.extraLegendItem=this.extraLegendItemActions.map(({label:o,action:r})=>({type:"legend",label:o,action:r}))));const{default:e,extra:i,extraNode:s,extraLegendItem:n}=this.groups;[e,i,s,n].reduce((o,r)=>r.length+o,0)!==0&&(this.lastFocus=this.getLastFocus(t),this.show())}getLastFocus(t){if(t.sourceEvent.target instanceof HTMLElement&&"tabindex"in t.sourceEvent.target.attributes)return t.sourceEvent.target}show(){this.interactionManager.pushState(Qo._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(Lm,this.darkTheme);const t=this.renderMenu();this.menuElement?(this.element.replaceChild(t,this.menuElement),this.menuElementDestroyFns.forEach(i=>i())):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block";const e=QW(t,HTMLButtonElement);this.menuElementDestroyFns=ZW({menu:t,buttons:e,orientation:"vertical",onEscape:()=>this.hide()}),t.focus()}hide(){var t;this.interactionManager.popState(Qo._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0,this.menuElementDestroyFns.forEach(e=>e()),this.menuElementDestroyFns.length=0),this.element.style.display="none",(t=this.lastFocus)==null||t.focus(),this.lastFocus=void 0}renderMenu(){const t=aM("div");return t.classList.add(`${Am}__menu`),t.classList.toggle(Lm,this.darkTheme),t.role="menu",this.appendMenuGroup(t,this.groups.default,!1),this.appendMenuGroup(t,this.groups.extra),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),this.pickedLegendItem&&this.appendMenuGroup(t,this.groups.extraLegendItem),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(s=>{const n=this.renderItem(s);n&&t.appendChild(n)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=aM("div");return t.classList.add(`${Am}__divider`),t.classList.toggle(Lm,this.darkTheme),t.role="separator",t}createActionElement({id:t,label:e,type:i,action:s}){const n=!!(t&&this.registry.isDisabled(t));return this.createButtonElement(i,e,s,n)}createButtonOnClick(t,e){return Tm.checkCallback("legend",t,e)?()=>{if(this.pickedLegendItem){const{seriesId:i,itemId:s,enabled:n}=this.pickedLegendItem;e({type:"contextmenu",seriesId:i,itemId:s,enabled:n}),this.hide()}}:Tm.checkCallback("node",t,e)?()=>{const{pickedNode:i,showEvent:s}=this,n=i?.series.createNodeContextMenuActionEvent(s,i);n?e(n):Qo._Util.Logger.error("series node not found"),this.hide()}:()=>{e({type:"contextMenuEvent",event:this.showEvent}),this.hide()}}createButtonElement(t,e,i,s){const n=aM("button");return n.classList.add(`${Am}__item`),n.classList.toggle(Lm,this.darkTheme),n.ariaDisabled=s.toString(),n.textContent=this.ctx.localeManager.t(e),n.role="menuitem",n.onclick=qW(n,this.createButtonOnClick(t,i)),n}reposition(){let{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:s,offsetHeight:n}=this.element;t=Qo._ModuleSupport.clamp(0,t,i.width-s),e=Qo._ModuleSupport.clamp(0,e,i.height-n),this.element.style.left=`${t}px`,this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){var t;super.destroy(),(t=this.mutationObserver)==null||t.disconnect(),this.ctx.domManager.removeStyles(Nm),this.ctx.domManager.removeChild("canvas-overlay",Nm)}};M([aO(nO)],oM.prototype,"enabled",2),M([aO(nO)],oM.prototype,"darkTheme",2);var JW={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],optionsKey:"contextMenu",instanceConstructor:oM,themeTemplate:{contextMenu:{enabled:!0,darkTheme:XW._Theme.IS_DARK_THEME}}},wd=(Y(),W(H)),Pd=(Y(),W(H)),tY=".ag-crosshair-label{position:absolute;left:0px;top:0px;user-select:none;pointer-events:none;font:12px Verdana,sans-serif;overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-crosshair-label-content{padding:0 8px;border-radius:2px;line-height:20px;background-color:var(--ag-charts-axis-label-background-color);color:var(--ag-charts-axis-label-color)}.ag-crosshair-label-hidden{top:-10000px!important}",{ActionOnSet:eY,BaseProperties:iY,BOOLEAN:oO,FUNCTION:rO,NUMBER:Om,STRING:Cm,Validate:Ws}=Pd._ModuleSupport,{setAttribute:sY}=Pd._Util,nY="ag-crosshair-label",_l=class extends Pd._Scene.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};M([Ws(oO)],_l.prototype,"enabled",2),M([Ws(Cm,{optional:!0})],_l.prototype,"className",2),M([Ws(Om)],_l.prototype,"xOffset",2),M([Ws(Om)],_l.prototype,"yOffset",2),M([Ws(Cm,{optional:!0})],_l.prototype,"format",2),M([Ws(rO,{optional:!0})],_l.prototype,"renderer",2);var kl=class extends iY{constructor(t){super(),this.domManager=t,this.id=Pd._Util.createId(this),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=t.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(nY),sY(this.element,"aria-hidden",!0),this.domManager.addStyles("crosshair-labels",tY)}show(t){const{element:e}=this,i=t.x+this.xOffset,s=t.y+this.yOffset;e.style.top=`${Math.round(s)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}computeBBox(){const{element:t}=this;return new Pd._Scene.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}toggle(t){this.element.classList.toggle("ag-crosshair-label-hidden",!t)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(t,e){var i,s;if(typeof t=="string")return t;e=e??{};const{text:n=(i=e.text)!=null?i:"",color:a=e.color,backgroundColor:o=e.backgroundColor,opacity:r=(s=e.opacity)!=null?s:1}=t;return`<div class="ag-crosshair-label-content" style="${`opacity: ${r}; background-color: ${o?.toLowerCase()}; color: ${a}`}">
                    <span>${n}</span>
                </div>`}};M([Ws(oO)],kl.prototype,"enabled",2),M([Ws(Cm,{optional:!0}),eY({changeValue(t,e){t!==e&&(e&&this.element.classList.remove(e),t&&this.element.classList.add(t))}})],kl.prototype,"className",2),M([Ws(Om)],kl.prototype,"xOffset",2),M([Ws(Om)],kl.prototype,"yOffset",2),M([Ws(Cm,{optional:!0})],kl.prototype,"format",2),M([Ws(rO,{optional:!0})],kl.prototype,"renderer",2);var{Group:lO,Line:cO,BBox:rM}=wd._Scene,{createId:aY}=wd._Util,{POSITIVE_NUMBER:hO,RATIO:oY,BOOLEAN:uO,COLOR_STRING:rY,LINE_DASH:lY,OBJECT:cY,InteractionState:dO,Validate:Jo,Layers:pO}=wd._ModuleSupport,io=class extends wd._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=aY(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new _l,this.seriesRect=new rM(0,0,0,0),this.hoverRect=new rM(0,0,0,0),this.bounds=new rM(0,0,0,0),this.visible=!1,this.crosshairGroup=new lO({layer:!0,zIndex:pO.SERIES_CROSSHAIR_ZINDEX}),this.lineGroup=this.crosshairGroup.appendChild(new lO({name:`${this.id}-crosshair-lines`,zIndex:pO.SERIES_CROSSHAIR_ZINDEX})),this.lineGroupSelection=wd._Scene.Selection.select(this.lineGroup,cO,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.crosshairGroup.visible=!1,this.labels={};const e=t.regionManager.getRegion("series"),i=dO.Default|dO.Annotations;this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),e.addListener("hover",s=>this.onMouseMove(s),i),e.addListener("drag",s=>this.onMouseMove(s),i),e.addListener("leave",()=>this.onMouseOut(),i),t.highlightManager.addListener("highlight-change",s=>this.onHighlightChange(s)),t.layoutService.addListener("layout-complete",s=>this.layout(s)),()=>Object.entries(this.labels).forEach(([s,n])=>n.destroy()))}layout({series:{rect:t,paddedRect:e,visible:i},axes:s}){if(!(i&&s&&this.enabled)){this.visible=!1;return}this.visible=!0,this.seriesRect=t,this.hoverRect=e;const{position:n="left",axisId:a}=this.axisCtx,o=s.find(u=>u.id===a);if(!o)return;this.axisLayout=o;const r=o.gridPadding+o.seriesAreaPadding;this.bounds=mN(t,n,r);const{crosshairGroup:l,bounds:c}=this;l.translationX=Math.round(c.x),l.translationY=Math.round(c.y);const h=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(h),this.updateLines(),this.updateLabels(h)}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new cO),e=>e)}updateLabels(t){const{labels:e,ctx:i}=this;t.forEach(s=>{var n;(n=e[s])!=null||(e[s]=new kl(i.domManager)),this.updateLabel(e[s])}),this.labelFormatter=this.axisCtx.scaleValueFormatter(this.label.format)}updateLabel(t){const{enabled:e,className:i,xOffset:s,yOffset:n,format:a,renderer:o}=this.label;t.enabled=e,t.className=i,t.xOffset=s,t.yOffset=n,t.format=a,t.renderer=o}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:o,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=s,c.strokeOpacity=n,c.lineDash=a,c.lineDashOffset=o,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction==="x"}formatValue(t){var e;const{labelFormatter:i,axisLayout:s,ctx:{callbackCache:n}}=this;if(i){const r=n.call(i,t);if(r!==void 0)return r}const a=t%1===0,o=((e=s?.label.fractionDigits)!=null?e:0)+(a?0:1);return typeof t=="number"?t.toFixed(o):String(t)}onMouseMove(t){if(!this.enabled||this.snap)return;const{crosshairGroup:e,hoverRect:i}=this,{offsetX:s,offsetY:n}=t;if(this.visible&&i.containsPoint(s,n)){e.visible=!0;const a=this.getData(t);this.updatePositions(a)}else this.hideCrosshairs()}onMouseOut(){this.hideCrosshairs()}onHighlightChange(t){var e,i,s;if(!this.enabled)return;const{crosshairGroup:n,axisCtx:a}=this,{datum:o,series:r}=(e=t.currentHighlight)!=null?e:{},l=o&&(((i=r?.axes.x)==null?void 0:i.id)===a.axisId||((s=r?.axes.y)==null?void 0:s.id)===a.axisId);if(this.activeHighlight=l?t.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight){this.hideCrosshairs();return}const c=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(c),n.visible=!0}}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((s,n)=>{const a=t[n];if(!a){s.visible=!1;return}s.visible=!0;const{value:o,position:r}=a;let l=0,c=0;this.isVertical()?(l=r,s.translationX=Math.round(l)):(c=r,s.translationY=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,o,n):this.hideLabel(n)})}getData(t){var e,i;const{seriesRect:s,axisCtx:n}=this,a="pointer",{datum:o,xKey:r="",yKey:l=""}=(e=this.activeHighlight)!=null?e:{},{offsetX:c,offsetY:h}=t,u=c-s.x,d=h-s.y,p=this.isVertical(),g=p?u:d;return{[a]:{position:g,value:n.continuous?n.scaleInvert(g):(i=o?.[p?r:l])!=null?i:""}}}getActiveHighlightData(t){var e,i;const{axisCtx:s}=this,{datum:n,series:a,xKey:o="",aggregatedValue:r,cumulativeValue:l,midPoint:c}=t,h=a.getKeyProperties(s.direction),u=s.scaleBandwidth()/2,d=((e=a.axes[s.direction])==null?void 0:e.id)===s.axisId,p=h.indexOf("yKey")>-1&&d,g=h.indexOf("xKey")>-1&&d;if(p&&r!==void 0)return{yKey:{value:r,position:s.scaleConvert(r)+u}};if(p&&l!==void 0)return{yKey:{value:l,position:s.scaleConvert(l)+u}};if(g){const m=(i=this.isVertical()?c?.x:c?.y)!=null?i:0;return{xKey:{value:s.continuous?s.scaleInvert(m):n[o],position:m}}}const f={};return h.forEach(m=>{const v=a.properties[m],y=n[v],x=s.scaleConvert(y)+u;f[m]={value:y,position:x}}),f}getLabelHtml(t,e){const{label:{renderer:i},axisLayout:{label:{fractionDigits:s=0}={}}={}}=this,n={text:this.formatValue(t)};if(i){const a={value:t,fractionDigits:s};return e.toLabelHtml(i(a),n)}return e.toLabelHtml(n)}showLabel(t,e,i,s){const{axisCtx:{position:n,direction:a},bounds:o,axisLayout:r}=this;if(!r)return;const{label:{padding:l},tickSize:c}=r,h=l+c,u=this.labels[s],d=this.getLabelHtml(i,u);u.setLabelHtml(d);const p=u.computeBBox(),g=RH({x:t,y:e,labelBBox:p,bounds:o,axisPosition:n,axisDirection:a,padding:h});u.show(g)}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t in this.labels)this.hideLabel(t)}hideLabel(t){this.labels[t].toggle(!1)}};M([Jo(uO)],io.prototype,"enabled",2),M([Jo(rY,{optional:!0})],io.prototype,"stroke",2),M([Jo(lY,{optional:!0})],io.prototype,"lineDash",2),M([Jo(hO)],io.prototype,"lineDashOffset",2),M([Jo(hO)],io.prototype,"strokeWidth",2),M([Jo(oY)],io.prototype,"strokeOpacity",2),M([Jo(uO)],io.prototype,"snap",2),M([Jo(cY)],io.prototype,"label",2);var gO=(Y(),W(H)),hY={crosshair:{enabled:!0,snap:!0,stroke:gO._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:gO._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},uY={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],instanceConstructor:io,themeTemplate:hY},fO=(Y(),W(H)),{BOOLEAN:dY,FUNCTION:pY,ActionOnSet:Bd,Validate:mO}=fO._ModuleSupport,yh=class extends fO._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};M([Bd({newValue(t){this.updateCallback(t,this.getData)}}),mO(dY)],yh.prototype,"enabled",2),M([Bd({newValue(t){this.updateCallback(this.enabled,t)}}),mO(pY)],yh.prototype,"getData",2),M([Bd({newValue(t){this.dataService.requestThrottle=t}})],yh.prototype,"requestThrottle",2),M([Bd({newValue(t){this.dataService.dispatchThrottle=t}})],yh.prototype,"updateThrottle",2),M([Bd({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],yh.prototype,"updateDuringInteraction",2);var gY={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology","flow-proportion"],instanceConstructor:yh,themeTemplate:{dataSource:{enabled:!1}}},fY=(Y(),W(H)),Dl=(Y(),W(H)),vh=(Y(),W(H)),{nearestSquaredInContainer:mY,partialAssign:yY,mergeDefaults:yO}=vh._ModuleSupport,{BBox:so}=vh._Scene,vY=class{constructor(t){this.components=t,this.union=so.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},xY=class extends vh._Scene.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new vh._Scene.Path,this.capsPath=new vh._Scene.Path,this.bboxes=new vY([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:s}=t,{lengthRatioMultiplier:n,lengthMax:a}=e,o=s??i*n;return Math.min(o,a)}getItemStylerParams(t,e,i){const{datum:s}=this;if(s==null||t.itemStyler==null)return;const{xLowerKey:n,xUpperKey:a,yLowerKey:o,yUpperKey:r}=t;return K(B({},e),{datum:s.datum,seriesId:s.datum.seriesId,xKey:s.xKey,yKey:s.yKey,xLowerKey:n,xUpperKey:a,yLowerKey:o,yUpperKey:r,highlighted:i})}formatStyles(t,e,i){let s=t,{cap:n}=s,a=se(s,["cap"]);const o=this.getItemStylerParams(e,t,i);if(o!=null&&e.itemStyler!=null){const r=e.itemStyler(o);a=yO(r,a),n=yO(r?.cap,r,n)}return{whiskerStyle:a,capsStyle:n}}applyStyling(t,e){yY(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i){if(this.datum===void 0)return;const{whiskerStyle:s,capsStyle:n}=this.formatStyles(t,e,i),{xBar:a,yBar:o,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,s),l.path.clear(),o!==void 0&&(l.path.moveTo(o.lowerPoint.x,o.lowerPoint.y),l.path.lineTo(o.upperPoint.x,o.upperPoint.y)),a!==void 0&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(n??{},r);const c=this.capLength/2,h=this.capsPath;this.applyStyling(h,n),h.path.clear(),o!==void 0&&(h.path.moveTo(o.lowerPoint.x-c,o.lowerPoint.y),h.path.lineTo(o.lowerPoint.x+c,o.lowerPoint.y),h.path.moveTo(o.upperPoint.x-c,o.upperPoint.y),h.path.lineTo(o.upperPoint.x+c,o.upperPoint.y)),a!==void 0&&(h.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-c),h.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+c),h.path.moveTo(a.upperPoint.x,a.upperPoint.y-c),h.path.lineTo(a.upperPoint.x,a.upperPoint.y+c)),h.path.closePath(),h.markDirtyTransform()}updateBBoxes(){var t;const{capLength:e,whiskerPath:i,capsPath:s}=this,{yBar:n,xBar:a}=(t=this.datum)!=null?t:{},o=e/2,r=[];if(n!==void 0){const l=n.lowerPoint.y-n.upperPoint.y;r.push(new so(n.lowerPoint.x,n.upperPoint.y,i.strokeWidth,l),new so(n.lowerPoint.x-o,n.lowerPoint.y,e,s.strokeWidth),new so(n.upperPoint.x-o,n.upperPoint.y,e,s.strokeWidth))}if(a!==void 0){const l=a.upperPoint.x-a.lowerPoint.x;r.push(new so(a.lowerPoint.x,a.upperPoint.y,l,i.strokeWidth),new so(a.lowerPoint.x,a.lowerPoint.y-o,s.strokeWidth,e),new so(a.upperPoint.x,a.upperPoint.y-o,s.strokeWidth,e))}this.bboxes.components=r,this.bboxes.union=so.merge(r)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:s}=this;if(s.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:n}=so.nearestBox(t,e,s.components);return{nearest:this,distanceSquared:n}}},bY=class extends vh._Scene.Group{get children(){return super.children}nearestSquared(t,e){const{nearest:i,distanceSquared:s}=mY(t,e,this);if(i!==void 0&&!isNaN(s))return{datum:i.datum,distanceSquared:s}}},SY=(Y(),W(H)),{BaseProperties:vO,Validate:ce,BOOLEAN:xO,COLOR_STRING:bO,FUNCTION:MY,LINE_DASH:SO,NUMBER:_Y,OBJECT:kY,POSITIVE_NUMBER:Em,RATIO:lM,STRING:tr}=SY._ModuleSupport,no=class extends vO{};M([ce(xO,{optional:!0})],no.prototype,"visible",2),M([ce(bO,{optional:!0})],no.prototype,"stroke",2),M([ce(Em,{optional:!0})],no.prototype,"strokeWidth",2),M([ce(lM,{optional:!0})],no.prototype,"strokeOpacity",2),M([ce(SO,{optional:!0})],no.prototype,"lineDash",2),M([ce(Em,{optional:!0})],no.prototype,"lineDashOffset",2),M([ce(_Y,{optional:!0})],no.prototype,"length",2),M([ce(lM,{optional:!0})],no.prototype,"lengthRatio",2);var pi=class extends vO{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new no}};M([ce(tr,{optional:!0})],pi.prototype,"yLowerKey",2),M([ce(tr,{optional:!0})],pi.prototype,"yLowerName",2),M([ce(tr,{optional:!0})],pi.prototype,"yUpperKey",2),M([ce(tr,{optional:!0})],pi.prototype,"yUpperName",2),M([ce(tr,{optional:!0})],pi.prototype,"xLowerKey",2),M([ce(tr,{optional:!0})],pi.prototype,"xLowerName",2),M([ce(tr,{optional:!0})],pi.prototype,"xUpperKey",2),M([ce(tr,{optional:!0})],pi.prototype,"xUpperName",2),M([ce(xO,{optional:!0})],pi.prototype,"visible",2),M([ce(bO,{optional:!0})],pi.prototype,"stroke",2),M([ce(Em,{optional:!0})],pi.prototype,"strokeWidth",2),M([ce(lM,{optional:!0})],pi.prototype,"strokeOpacity",2),M([ce(SO,{optional:!0})],pi.prototype,"lineDash",2),M([ce(Em,{optional:!0})],pi.prototype,"lineDashOffset",2),M([ce(MY,{optional:!0})],pi.prototype,"itemStyler",2),M([ce(kY)],pi.prototype,"cap",2);var{fixNumericExtent:DY,groupAccumulativeValueProperty:IY,isDefined:ls,mergeDefaults:AY,valueProperty:Rm,ChartAxisDirection:cM}=Dl._ModuleSupport;function LY(t){for(const e of Dl.AgErrorBarSupportedSeriesTypes)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${Dl.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var TY=class fp extends Dl._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new pi;const i=LY(e),{annotationGroup:s,annotationSelections:n}=i;this.cartesianSeries=i,this.groupNode=new bY({name:`${s.id}-errorBars`,zIndex:Dl._ModuleSupport.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:i.getGroupZIndexSubOrder("annotation")}),s.appendChild(this.groupNode),this.selection=Dl._Scene.Selection.select(this.groupNode,()=>this.errorBarFactory()),n.add(this.selection),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),i.addListener("visibility-changed",a=>this.onToggleSeriesItem(a)),e.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>s.removeChild(this.groupNode),()=>n.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties;return ls(e)&&ls(i)||ls(s)&&ls(n)}isStacked(){var e;const i=(e=this.cartesianSeries.seriesGrouping)==null?void 0:e.stackCount;return i==null?!1:i>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:h}=e;return a!=null&&o!=null&&i.push(Rm(a,h,{id:`${l}-lower`}),Rm(o,h,{id:`${l}-upper`})),s!=null&&n!=null&&i.push(Rm(s,c,{id:`${r}-lower`}),Rm(n,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){var i,s;const n=[],{cartesianSeries:a}=this,{xLowerKey:o,xUpperKey:r,yLowerKey:l,yUpperKey:c,xErrorsID:h,yErrorsID:u}=this.getMaybeFlippedKeys(),{xScaleType:d,yScaleType:p}=e,g=(s=(i=a.seriesGrouping)==null?void 0:i.groupIndex)!=null?s:a.id,f=B({invalidValue:null,missingValue:0,separateNegative:!0},a.visible?{}:{forceValue:0}),m=(y,x,b,S)=>IY(y,"normal","current",B({id:`${x}-${b}`,groupId:`errorGroup-${g}-${b}`},f),S),v=(y,x,b,S)=>{n.push(...m(y,b,"lower",S),...m(x,b,"upper",S))};return l!=null&&c!=null&&v(l,c,u,p),o!=null&&r!=null&&v(o,r,h,d),n}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:s,xErrorsID:n,yLowerKey:a,yUpperKey:o,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===cM.X?ls(i)&&ls(s):ls(a)&&ls(o)){const{dataModel:c,processedData:h,cartesianSeries:u}=this;if(c!=null&&h!=null){const d=u.axes[e],p={x:n,y:r}[e],g=c.getDomain(u,`${p}-lower`,"value",h),f=c.getDomain(u,`${p}-upper`,"value",h),m=[Math.min(...g,...f),Math.max(...g,...f)];return DY(m,d)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,ls(e.dataModel)&&ls(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){var e;return(e=this.cartesianSeries.contextNodeData)==null?void 0:e.nodeData}createNodeData(){var e,i;const s=this.getNodeData(),n=(e=this.cartesianSeries.axes[cM.X])==null?void 0:e.scale,a=(i=this.cartesianSeries.axes[cM.Y])==null?void 0:i.scale;if(!(!this.hasErrorBars()||!n||!a||!s))for(let o=0;o<s.length;o++){const{midPoint:r,xLower:l,xUpper:c,yLower:h,yUpper:u}=this.getDatum(s,o);if(r!=null){let d,p;ls(l)&&ls(c)&&(d={lowerPoint:{x:this.convert(n,l),y:r.y},upperPoint:{x:this.convert(n,c),y:r.y}}),ls(h)&&ls(u)&&(p={lowerPoint:{x:r.x,y:this.convert(a,h)},upperPoint:{x:r.x,y:this.convert(a,u)}}),s[o].xBar=d,s[o].yBar=p}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties,[a,o]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,s]=[s,e],[i,n]=[n,i],[a,o]=[o,a]),{xLowerKey:e,xUpperKey:i,xErrorsID:a,yLowerKey:s,yUpperKey:n,yErrorsID:o}}static getDatumKey(e,i,s){if(i==null)return;const n=e.datum[i];if(n!=null){if(typeof n!="number"){Dl._Util.Logger.warnOnce(`Found [${i}] error value of type ${typeof n}. Expected number type`);return}return n+s}}getDatum(e,i){const{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:o}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:fp.getDatumKey(r,s,c),xUpper:fp.getDatumKey(r,n,c),yLower:fp.getDatumKey(r,a,h),yUpper:fp.getDatumKey(r,o,h)}}convert(e,i){var s;const n=((s=e.bandwidth)!=null?s:0)/2;return e.convert(i)+n}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,s,n)=>this.updateNode(i,s,n)))}updateNode(e,i,s){e.datum=i,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:s}=this.groupNode.transformPoint(e.x,e.y),n=this.groupNode.pickNode(i,s);if(n!=null)return{datum:n.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:s,yUpperKey:n,xLowerName:a=e,xUpperName:o=i,yLowerName:r=s,yUpperName:l=n}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:i,xUpperName:o,yLowerKey:s,yLowerName:r,yUpperKey:n,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.enabled}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:AY(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,s){const n=this.getNodeData();if(n!=null){for(let a=0;a<n.length;a++)if(e===n[a]){this.selection.nodes()[a].update(i,this.properties,s);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:s}=e;s?.series===this.cartesianSeries&&this.restyleHighlightChange(s,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new xY}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=this.properties;return{stroke:e,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}}},NY=(Y(),W(H)),OY={series:{errorBar:{visible:!0,stroke:NY._Theme.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},CY={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:fY.AgErrorBarSupportedSeriesTypes,instanceConstructor:TY,themeTemplate:OY},wm=(Y(),W(H)),MO=(Y(),W(H)),Pm=(Y(),W(H)),{Validate:hM,BOOLEAN:EY,POSITIVE_NUMBER:_O,Layers:uM,ActionOnSet:kO,CategoryAxis:RY,GroupedCategoryAxis:wY}=Pm._ModuleSupport,{Padding:PY,Logger:DO}=Pm._Util,{Text:BY,Group:Bm,BBox:IO}=Pm._Scene,dM=class{constructor(){this.top=0,this.bottom=0}};M([hM(_O)],dM.prototype,"top",2),M([hM(_O)],dM.prototype,"bottom",2);var Fm=class extends Pm._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new dM,this.root=new Bm({name:"root"}),this.seriesRoot=this.root.appendChild(new Bm({name:"Series-root",layer:!0,zIndex:uM.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Bm({name:"Axes-Grids",layer:!0,zIndex:uM.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Bm({name:"Axes-Grids",layer:!0,zIndex:uM.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){var i;const s=(i=e?.filter(n=>!t.includes(n)))!=null?i:[];this.destroySeries(s);for(const n of t){if(e?.includes(n))continue;n.rootGroup.parent==null&&this.seriesRoot.appendChild(n.rootGroup);const a=this;n.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return a.seriesRect},placeLabels(){return new Map}},n.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.rootGroup!=null&&this.seriesRoot.removeChild(e.rootGroup),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const s=e.direction;((i=t[s])!=null?i:t[s]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const s=t[i];if(!s){DO.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const n=e.getKeys(i),a=this.findMatchingAxis(s,n);if(!a){DO.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`);return}e.axes[i]=a})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const s of e)if(i.keys.includes(s))return i}}}updateData(t){return F(this,null,function*(){this.series.forEach(e=>e.setChartData(t.data)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})})}processData(t){return F(this,null,function*(){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=this.series.map(i=>i.processData(t.dataController));yield Promise.all(e)})}computeAxisPadding(){const t=new PY;return this.enabled&&this.axes.forEach(e=>{var i;const{position:s,thickness:n=0,line:a,label:o}=e;if(s==null)return;let r;n>0?r=n:r=(a.enabled?a.width:0)+(o.enabled?((i=o.fontSize)!=null?i:0)*BY.defaultLineHeightRatio+o.padding:0),t[s]=Math.ceil(r)}),t}layout(t,e){return F(this,null,function*(){const{padding:i}=this,s=this.seriesRect!=null,n=new IO(0,0,t,e-(i.top+i.bottom));this.seriesRect=n,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new IO(0,-i.top,t,e)));const a=o=>o instanceof RY||o instanceof wY?[0,n.height]:[n.height,0];this.axes.forEach(o=>{const{position:r="left"}=o;switch(r){case"top":case"bottom":o.range=[0,n.width],o.gridLength=n.height;break;case"right":case"left":o.range=a(o),o.gridLength=n.width;break}switch(r){case"top":case"left":o.translation.x=0,o.translation.y=0;break;case"bottom":o.translation.x=0,o.translation.y=e;break;case"right":o.translation.x=t,o.translation.y=0;break}o.gridPadding=0,o.calculateLayout(),o.updatePosition(),o.update(void 0,s)}),yield Promise.all(this.series.map(o=>o.update({seriesRect:n})))})}};M([hM(EY)],Fm.prototype,"enabled",2),M([kO({changeValue(t,e=[]){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)e?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],Fm.prototype,"axes",2),M([kO({changeValue(t,e){this.onSeriesChange(t,e)}})],Fm.prototype,"series",2);var{ObserveChanges:FY}=MO._ModuleSupport,AO=class Ik extends MO._ModuleSupport.Navigator{constructor(e){super(e),this.miniChart=new Fm(e)}updateData(e){return F(this,null,function*(){yield this.miniChart.updateData(e)})}processData(e){return F(this,null,function*(){yield this.miniChart.processData(e)})}performLayout(e){return F(this,null,function*(){const{shrinkRect:i}=yield As(Ik.prototype,this,"performLayout").call(this,e);if(this.enabled){const{top:s,bottom:n}=this.miniChart.computeAxisPadding();i.shrink(s+n,"bottom"),this.y-=n}return K(B({},e),{shrinkRect:i})})}performCartesianLayout(e){return F(this,null,function*(){yield As(Ik.prototype,this,"performCartesianLayout").call(this,e),yield this.miniChart.layout(this.width,this.height)})}};M([FY((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],AO.prototype,"miniChart",2);var LO,zY={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:AO,themeTemplate:K(B({},wm._ModuleSupport.NavigatorModule.themeTemplate),{navigator:K(B({},(LO=wm._ModuleSupport.NavigatorModule.themeTemplate)==null?void 0:LO.navigator),{miniChart:{enabled:!1,label:{color:wm._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:wm._Theme.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})},zm=(Y(),W(H)),pM=(Y(),W(H)),{Validate:na,OBJECT:gM,BOOLEAN:GY,STRING:xh,valueProperty:VY}=pM._ModuleSupport,{Label:UY,Text:Ti,Group:HY}=pM._Scene,fM=class extends UY{},Dn=class extends pM._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new fM,this.positive=new fM,this.negative=new fM,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.labelGroup=new HY({name:"StatusBar"}),this.labels=[{label:"O",title:this.labelGroup.appendChild(new Ti),value:this.labelGroup.appendChild(new Ti),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",title:this.labelGroup.appendChild(new Ti),value:this.labelGroup.appendChild(new Ti),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",title:this.labelGroup.appendChild(new Ti),value:this.labelGroup.appendChild(new Ti),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",title:this.labelGroup.appendChild(new Ti),value:this.labelGroup.appendChild(new Ti),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",title:this.labelGroup.appendChild(new Ti),value:this.labelGroup.appendChild(new Ti),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=t.highlightManager,this.labelGroup.visible=!1,this.destroyFns.push(t.scene.attachNode(this.labelGroup,"titles"),t.layoutService.addListener("before-series",e=>this.startPerformLayout(e)),t.highlightManager.addListener("highlight-change",()=>this.updateHighlight()))}processData(t){return F(this,null,function*(){if(!this.enabled)return;const e=[];for(const a of this.labels){const{id:o,key:r}=a,l=this[r];l==null?a.domain=void 0:e.push(VY(l,"number",{id:o}))}if(e.length===0||this.data==null)return;const{dataController:i}=t,{processedData:s,dataModel:n}=yield i.request(this.id,this.data,{props:e});for(const a of this.labels){const{id:o,key:r}=a;this[r]!=null&&(a.domain=n.getDomain(this,o,"value",s))}})}startPerformLayout(t){var e,i;const{shrinkRect:s}=t,n=4,a=12,o=0,r=8;if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return K(B({},t),{shrinkRect:s});this.labelGroup.translationY=s.y+o;const l=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),c=l*Ti.defaultLineHeightRatio;let h=0,u=0,d="alphabetic";if(this.layoutStyle==="block")s.shrink(o+c+r,"top"),u=l+(c-l)/2;else{const{title:p}=t.positions,{title:g=0}=t.padding;h=((e=p?.x)!=null?e:0)+((i=p?.width)!=null?i:0)+(p?a:g),d="top",u=o+g}for(const{label:p,title:g,value:f,domain:m,formatter:v}of this.labels){if(m==null){g.visible=!1,f.visible=!1;continue}const y=Math.max(Ti.measureText(v.format(m[0]),this.positive.getFont(),d,"left").width,Ti.measureText(v.format(m[1]),this.positive.getFont(),d,"left").width,Ti.measureText(v.format(m[0]),this.negative.getFont(),d,"left").width,Ti.measureText(v.format(m[1]),this.negative.getFont(),d,"left").width);g.visible=!0,f.visible=!0;const x=Ti.measureText(p,this.title.getFont(),d,"left");g.setFont(this.title),g.fill=this.title.color,g.text=p,g.textBaseline=d,g.translationY=u,g.translationX=h,h+=x.width+n,f.textBaseline=d,f.translationY=u,f.translationX=h,h+=y+a}return K(B({},t),{shrinkRect:s})}performCartesianLayout(t){return F(this,null,function*(){this.labelGroup.translationX=t.seriesRect.x})}updateHighlight(){if(!this.enabled)return;const t=this.highlightManager.getActiveHighlight();if(t==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const e=t.datum,i=t.itemId==="up"?this.positive:this.negative;for(const{domain:s,value:n,key:a,formatter:o}of this.labels){if(s==null)continue;const r=this[a],l=r!=null?e?.[r]:void 0;n.setFont(i),n.fill=i.color,n.text=typeof l=="number"?o.format(l):""}}};M([na(GY)],Dn.prototype,"enabled",2),M([na(xh,{optional:!0})],Dn.prototype,"openKey",2),M([na(xh,{optional:!0})],Dn.prototype,"highKey",2),M([na(xh,{optional:!0})],Dn.prototype,"lowKey",2),M([na(xh,{optional:!0})],Dn.prototype,"closeKey",2),M([na(xh,{optional:!0})],Dn.prototype,"volumeKey",2),M([na(gM)],Dn.prototype,"title",2),M([na(gM)],Dn.prototype,"positive",2),M([na(gM)],Dn.prototype,"negative",2),M([na(xh)],Dn.prototype,"layoutStyle",2);var WY={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Dn,themeTemplate:{statusBar:{enabled:!1,openKey:void 0,highKey:void 0,lowKey:void 0,closeKey:void 0,volumeKey:void 0,layoutStyle:zm._Theme.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:zm._Theme.DEFAULT_LABEL_COLOUR},positive:{color:zm._Theme.PALETTE_UP_STROKE},negative:{color:zm._Theme.PALETTE_DOWN_STROKE}}}},TO=(Y(),W(H)),{BOOLEAN:mM,STRING:YY,UNION:KY,BaseProperties:jY,CartesianAxis:NO,ChartUpdateType:OO,arraysEqual:XY,isDate:$Y,isDefined:ZY,isFiniteNumber:Gm,ObserveChanges:Fd,TooltipManager:qY,Validate:zd}=TO._ModuleSupport,{Logger:CO}=TO._Util,Il=class extends jY{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(t,e=OO.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}updateSiblings(t){const{syncManager:e}=this.moduleContext;F(this,null,function*(){for(const s of e.getGroupSiblings(t))yield s.waitForDataProcess(120),this.updateChart(s)}).catch(s=>{CO.warnOnce("Error updating sibling chart",s)})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{var i;for(const s of t.getGroupSiblings(this.groupId))(i=s.modulesManager.getModule("sync"))!=null&&i.zoom&&s.ctx.zoomManager.updateZoom("sync",this.mergeZoom(s))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{var s,n,a,o,r,l,c,h,u,d,p,g;for(const f of e.getGroupSiblings(this.groupId))if((s=f.modulesManager.getModule("sync"))!=null&&s.nodeInteraction){if(!((n=i.currentHighlight)!=null&&n.datum)){f.ctx.highlightManager.updateHighlight(f.id),f.ctx.tooltipManager.removeTooltip(f.id);continue}for(const m of f.axes){const v=this.axes==="xy"?"x":this.axes;if(!NO.is(m)||m.direction!==v)continue;const y=f.series.map(x=>{const b=x.getKeys(m.direction);if(m.keys.length&&!m.keys.some(N=>b.includes(N)))return;const{nodeData:S}=x.contextNodeData;if(!S?.length)return;const k=S[0][`${m.direction}Key`];let D=i.currentHighlight.datum[k];const T=$Y(D);T&&(D=D.getTime());const I=S.find(N=>{const C=N.datum[k];return T?C.getTime()===D:C===D});return I?{series:x,nodeDatum:I}:null}).filter(ZY);if(y.length<2&&((a=y[0])==null?void 0:a.nodeDatum)!==f.ctx.highlightManager.getActiveHighlight()){const{series:x,nodeDatum:b}=(o=y[0])!=null?o:{};if(f.ctx.highlightManager.updateHighlight(f.id,b),b){const S=(h=(c=(r=b.midPoint)==null?void 0:r.x)!=null?c:(l=b.point)==null?void 0:l.x)!=null?h:0,k=(g=(p=(u=b.midPoint)==null?void 0:u.y)!=null?p:(d=b.point)==null?void 0:d.y)!=null?g:0,D=qY.makeTooltipMeta({type:"hover",offsetX:S,offsetY:k},b);delete D.lastPointerEvent,f.ctx.tooltipManager.updateTooltip(f.id,D,x.getTooltipHtml(b))}else f.ctx.tooltipManager.removeTooltip(f.id);this.updateChart(f,OO.SERIES_UPDATE)}}}})}syncAxes(t=!1){const{syncManager:e}=this.moduleContext,i=e.getChart(),s=e.getGroup(this.groupId),n=s.flatMap(r=>r.series),a=s[0].axes;let o=!1;i.axes.forEach(r=>{if(!NO.is(r)||this.axes!=="xy"&&this.axes!==r.direction){r.boundSeries=i.series.filter(g=>g.axes[r.direction]===r);return}const{direction:l,min:c,max:h,nice:u,reverse:d}=r;for(const g of a)if(l===g.direction&&(u!==g.nice||d!==g.reverse||c!==g.min&&(Gm(c)||Gm(g.min))||h!==g.max&&(Gm(h)||Gm(g.max)))){CO.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),r.boundSeries=i.series.filter(f=>f.axes[r.direction]===r),this.enabled=!1;return}const p=n.filter(g=>{if(g.visible){const f=g.getKeys(r.direction);return r.keys.length?r.keys.some(m=>f.includes(m)):!0}});XY(r.boundSeries,p)||(r.boundSeries=p,o=!0)}),o&&!t&&this.updateSiblings(this.groupId)}mergeZoom(t){var e,i;const{zoomManager:s}=this.moduleContext;if(this.axes==="xy")return s.getZoom();const n=(e=t.zoomManager.getZoom())!=null?e:{};return n[this.axes]=(i=s.getZoom())==null?void 0:i[this.axes],n}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){var t;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():(t=this.disableNodeInteractionSync)==null||t.call(this)}onZoomChange(){var t;this.enabled&&this.zoom?this.enabledZoomSync():(t=this.disableZoomSync)==null||t.call(this)}destroy(){var t;const{syncManager:e}=this.moduleContext;e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),(t=this.disableZoomSync)==null||t.call(this)}};Il.className="Sync",M([zd(mM),Fd(t=>t.onEnabledChange())],Il.prototype,"enabled",2),M([zd(YY,{optional:!0}),Fd((t,e,i)=>t.onGroupIdChange(e,i))],Il.prototype,"groupId",2),M([zd(KY(["x","y","xy"],"an axis")),Fd(t=>t.onAxesChange())],Il.prototype,"axes",2),M([zd(mM),Fd(t=>t.onNodeInteractionChange())],Il.prototype,"nodeInteraction",2),M([zd(mM),Fd(t=>t.onZoomChange())],Il.prototype,"zoom",2);var QY={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Il,themeTemplate:{sync:{enabled:!1}}},In=(Y(),W(H)),EO=(Y(),W(H)),{COLOR_STRING:JY,RATIO:tK,Validate:RO}=EO._ModuleSupport,Vm=class extends EO._Scene.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};Vm.className="ZoomRect",M([RO(JY)],Vm.prototype,"fill",2),M([RO(tK)],Vm.prototype,"fillOpacity",2);var yM=(Y(),W(H)),eK=(Y(),W(H)),{clamp:iK,isEqual:Um,round:wO}=eK._ModuleSupport,Ut={min:0,max:1},vM="end",xM="middle",Hm=(t,e=Ut.min,i=Ut.max)=>iK(e,t,i);function bM(){return{x:B({},Ut),y:B({},Ut)}}function ii(t){return t.x.max-t.x.min}function Ys(t){return t.y.max-t.y.min}function SM(t,e,i=1e-10){return Um(t.x.min,e.x.min,i)&&Um(t.x.max,e.x.max,i)&&Um(t.y.min,e.y.min,i)&&Um(t.y.max,e.y.max,i)}function MM(t,e,i){const s=wO(ii(t),10)<=e,n=wO(Ys(t),10)<=i;return s||n}function gi(t){var e,i,s,n,a,o,r,l;return{x:{min:(i=(e=t?.x)==null?void 0:e.min)!=null?i:Ut.min,max:(n=(s=t?.x)==null?void 0:s.max)!=null?n:Ut.max},y:{min:(o=(a=t?.y)==null?void 0:a.min)!=null?o:Ut.min,max:(l=(r=t?.y)==null?void 0:r.max)!=null?l:Ut.max}}}function aa(t,e,i){if(!t)return{x:0,y:0};const s=Hm(e-t.x,0,t.x+t.width),n=Hm(i-t.y,0,t.y+t.height),a=1/t.width*s,o=1-1/t.height*n;return{x:Hm(a),y:Hm(o)}}function Al(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function PO(t,e,i){return{x:{min:t.x.min,max:t.x.min+ii(t)*e},y:{min:t.y.min,max:t.y.min+Ys(t)*i}}}function BO(t,e,i){const s=ii(t),n=Ys(t),a=t.x.min+s/2,o=t.y.min+n/2;return{x:{min:a-s*e/2,max:a+s*e/2},y:{min:o-n*i/2,max:o+n*i/2}}}function An(t,e,i,s){const{min:n,max:a}=e,o=n+(a-n)/2,r=t.max-t.min;switch(i){case"start":return{min:n,max:e.min+r};case"end":return{min:e.max-r,max:a};case"middle":return{min:o-r/2,max:o+r/2};case"pointer":return _M(t,e,s??o);default:return{min:n,max:a}}}function _M(t,e,i){const s=t.max-t.min,n=e.max-e.min,a=i*(1-(n-s)),o=i-a,r=t.min+o,l=t.max+o;return{min:r,max:l}}function sK(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function ji(t){const e=bM();return e.x=Wm(t.x),e.y=Wm(t.y),e}function Wm(t){const e=t.max-t.min;let i=t.max>Ut.max?Ut.max-e:t.min,s=t.min<Ut.min?e:t.max;return i=Math.max(Ut.min,i),s=Math.min(Ut.max,s),{min:i,max:s}}function FO({min:t,max:e},i,s){if(e===i.max)t=e-s;else if(t===i.min)e=t+s;else{const n=i.min+(i.max-i.min)/2;t=n-s/2,e=n+s/2}return{min:t,max:e}}var nK=class{update(t,e,i,s,n,a){var o;return(o=this.oldZoom)!=null||(this.oldZoom=gi(e===yM._ModuleSupport.ChartAxisDirection.X?K(B({},n),{x:a}):K(B({},n),{y:a}))),this.updateCoords(t.offsetX,t.offsetY),this.updateZoom(e,i,s)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:s,oldZoom:n}=this;let a=gi(n);if(!s||!n)return t===yM._ModuleSupport.ChartAxisDirection.X?a.x:a.y;const o=aa(i,s.x1,s.y1),r=aa(i,s.x2,s.y2);if(t===yM._ModuleSupport.ChartAxisDirection.X){const c=(r.x-o.x)*ii(n);return a.x.max+=c,a.x=An(a.x,n.x,e,o.x),a=ji(a),a.x}const l=(r.y-o.y)*Ys(n);return a.y.max-=l,a.y=An(a.y,n.y,e,o.y),a=ji(a),a.y}},kM="zoom-action",DM="pan-action",aK=class{constructor(t,e,i){this.contextMenuRegistry=t,this.zoomManager=e,this.updateZoom=i}registerActions(t,e,i){if(!t)return;const{contextMenuRegistry:s}=this;s.registerDefaultAction({id:kM,type:"series",label:"contextMenuZoomToCursor",action:n=>this.onZoomToHere(n,i)}),s.registerDefaultAction({id:DM,type:"series",label:"contextMenuPanToCursor",action:n=>this.onPanToHere(n,i)}),this.toggleActions(e,i)}toggleActions(t,e){const{contextMenuRegistry:i}=this;MM(t,e.minRatioX,e.minRatioY)?i.disableAction(kM):i.enableAction(kM),SM(t,bM())?i.disableAction(DM):i.enableAction(DM)}onZoomToHere({event:t},e){const{rect:i}=this,{enabled:s,isScalingX:n,isScalingY:a,minRatioX:o,minRatioY:r}=e;if(!s||!i||!t||!t.target||!(t instanceof MouseEvent))return;const l=gi(this.zoomManager.getZoom()),c=aa(i,t.clientX,t.clientY),h=c.x*ii(l),u=c.y*Ys(l),d=Ut.max-Ut.min,p=d/2;let g={x:{min:c.x-p,max:c.x+p},y:{min:c.y-p,max:c.y+p}};g=BO(g,n?o:d,a?r:d),g=Al(g,l.x.min-c.x+h,l.y.min-c.y+u),this.updateZoom(ji(g))}onPanToHere({event:t},e){const{rect:i}=this,{enabled:s}=e;if(!s||!i||!t||!t.target||!(t instanceof MouseEvent))return;const n=gi(this.zoomManager.getZoom()),a=aa(i,t.clientX,t.clientY),o=ii(n),r=Ys(n),l=a.x*o,c=a.y*r,h=(Ut.max-Ut.min)/2;let u={x:{min:a.x-h,max:a.x+h},y:{min:a.y-h,max:a.y+h}};u=BO(u,o,r),u=Al(u,n.x.min-a.x+l,n.y.min-a.y+c),this.updateZoom(ji(u))}},zO=(Y(),W(H)),GO=16,oK={off:1,short:.01,long:.002},rK=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){var t;const{deceleration:e}=this;return Math.max(typeof e=="number"?e:(t=oK[e])!=null?t:1,1e-4)}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){var e,i;this.updateCoords(t.offsetX,t.offsetY);const{x1:s=0,y1:n=0,x2:a=0,y2:o=0}=(e=this.coords)!=null?e:{};(i=this.onUpdate)==null||i.call(this,{type:"update",deltaX:s-a,deltaY:n-o})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,s=0;if(t.length>0){const n=this.zoomCoordsHistoryIndex%GO;let a=n-1;a<0&&(a=t.length-1);let o=n;o>=t.length&&(o=0);const r=t[a],l=t[o];e=r.x-l.x,i=r.y-l.y,s=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,s>0&&this.decelerationValue<1){const n=e/s,a=i/s,o=Math.hypot(n,a),r=Math.atan2(a,n),l=performance.now();this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,c,l,o,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:s,y2:n}=t,a=Date.now();e[i%GO]={x:s,y:n,t:a},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,s,n){var a;const o=1-this.decelerationValue,r=-s/Math.log(o),l=s*(nt(o,e-i)-1)/Math.log(o),c=s*(nt(o,t-i)-1)/Math.log(o);(a=this.onUpdate)==null||a.call(this,{type:"update",deltaX:-Math.cos(n)*(c-l),deltaY:-Math.sin(n)*(c-l)}),!(c>=r-1)&&(this.inertiaHandle=requestAnimationFrame(h=>{this.animateInertia(h,t,i,s,n)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,s){const n=aa(t,t.x+Math.abs(i),t.y+t.height-Math.abs(s)),a=Math.sign(i)*n.x,o=-Math.sign(s)*n.y,r={};for(const[l,{direction:c,zoom:h}]of Object.entries(e)){let u;c===zO._ModuleSupport.ChartAxisDirection.X?u=gi({x:h}):u=gi({y:h}),u=ji(Al(u,a*ii(u),o*Ys(u))),c===zO._ModuleSupport.ChartAxisDirection.X?r[l]={direction:c,zoom:u.x}:r[l]={direction:c,zoom:u.y}}return r}},VO=(Y(),W(H)),{AND:UO,DATE:HO,NUMBER:WO,OR:YO,ActionOnSet:KO,isFiniteNumber:jO,isValidDate:XO,Validate:$O}=VO._ModuleSupport,Ym=class{constructor(t){this.onChange=t}getRange(){return this.getRangeWithValues(this.start,this.end)}getInitialRange(){return this.getRangeWithValues(this.initialStart,this.initialEnd)}extendToEnd(t){return this.extendWith(e=>Number(e)-t)}extendWith(t){var e;if(!this.domain)return;const[,i]=this.domain;if(i==null)return;const s=t(i),n=this.start!==s||this.end!==i;this.end=i,this.start=s,n||(e=this.onChange)==null||e.call(this,this.getRange())}updateWith(t){var e;if(!this.domain)return;let[i,s]=this.domain;[i,s]=t(i,s);const n=this.start!==i||this.end!==s;this.end=s,this.start=i,n||(e=this.onChange)==null||e.call(this,this.getRange())}extendAll(){var t;if(!this.domain)return;const[e,i]=this.domain,s=this.start!==e||this.end!==i;this.start=e,this.end=i,s||(t=this.onChange)==null||t.call(this,this.getRange())}updateAxis(t){const e=t.find(({domain:n})=>{const a=!jO(n[0])||!jO(n.at(-1)),o=!XO(n[0])||!XO(n.at(-1));return a||o});if(!e)return this.domain!=null;let i=e.domain;i!=null&&(i=[i[0],i.at(-1)],i[0]instanceof Date&&i[1]instanceof Date&&(i=[i[0].getTime(),i[1].getTime()]));const s=this.domain==null||!VO._Util.areArrayItemsStrictlyEqual(this.domain,i);return s&&(this.domain=i),s}getRangeWithValues(t,e){var i;let[s,n]=(i=this.domain)!=null?i:[];if(t==null&&e==null||s==null||n==null)return;s=Number(s),n=Number(n);let a=0,o=1;return t!=null&&(a=(Number(t)-s)/(n-s)),e!=null&&(o=(Number(e)-s)/(n-s)),{min:a,max:o}}};M([KO({changeValue(t){var e,i;(e=this.initialStart)!=null||(this.initialStart=t),(i=this.onChange)==null||i.call(this,this.getRangeWithValues(t,this.end))}}),$O(UO(YO(HO,WO)),{optional:!0})],Ym.prototype,"start",2),M([KO({changeValue(t){var e,i;(e=this.initialEnd)!=null||(this.initialEnd=t),(i=this.onChange)==null||i.call(this,this.getRangeWithValues(this.start,t))}}),$O(UO(YO(HO,WO)),{optional:!0})],Ym.prototype,"end",2);var lK=(Y(),W(H)),{AND:ZO,GREATER_THAN:cK,LESS_THAN:hK,RATIO:qO,ActionOnSet:QO,Validate:JO}=lK._ModuleSupport,Km=class{constructor(t){this.onChange=t}getRatio(){return this.getRatioWithValues(this.start,this.end)}getInitialRatio(){return this.getRatioWithValues(this.initialStart,this.initialEnd)}getRatioWithValues(t,e){if(!(t==null&&e==null))return{min:t??Ut.min,max:e??Ut.max}}};M([QO({changeValue(t){var e,i;(e=this.initialStart)!=null||(this.initialStart=t),(i=this.onChange)==null||i.call(this,this.getRatioWithValues(t,this.end))}}),JO(ZO(qO,hK("end")),{optional:!0})],Km.prototype,"start",2),M([QO({changeValue(t){var e,i;(e=this.initialEnd)!=null||(this.initialEnd=t),(i=this.onChange)==null||i.call(this,this.getRatioWithValues(this.start,t))}}),JO(ZO(qO,cK("start")),{optional:!0})],Km.prototype,"end",2);var uK=(Y(),W(H)),dK=200,pK=class{update(t,e,i,s){const n=t.deltaX*e*dK;return this.translateZooms(i,s,n)}translateZooms(t,e,i){const s={},n=aa(t,t.x+Math.abs(i),0),a=i<0?-n.x:n.x;for(const[o,{direction:r,zoom:l}]of Object.entries(e)){if(r!==uK._ModuleSupport.ChartAxisDirection.X)continue;let c=gi({x:l});c=ji(Al(c,a*ii(c),0)),s[o]={direction:r,zoom:c.x}}return s}},tC=(Y(),W(H)),gK=class{updateAxes(t,e,i,s){var n,a;const o=t.sourceEvent,r={},{anchorPointX:l,anchorPointY:c,isScalingX:h,isScalingY:u,scrollingStep:d}=e,p=aa(i,(n=o.offsetX)!=null?n:o.clientX,(a=o.offsetY)!=null?a:o.clientY);for(const[g,{direction:f,zoom:m}]of Object.entries(s)){if(m==null)continue;let v=B({},m);const y=d*t.deltaY*(m.max-m.min);if(f===tC._ModuleSupport.ChartAxisDirection.X&&h)v.max+=y,v=An(v,m,l,p.x);else if(f===tC._ModuleSupport.ChartAxisDirection.Y&&u)v.max+=y,v=An(v,m,c,p.y);else continue;r[g]={direction:f,zoom:Wm(v)}}return r}update(t,e,i,s){var n,a;const o=t.sourceEvent,{anchorPointX:r,anchorPointY:l,isScalingX:c,isScalingY:h,scrollingStep:u}=e,d=aa(i,(n=o.offsetX)!=null?n:o.clientX,(a=o.offsetY)!=null?a:o.clientY),p=t.deltaY;let g=gi(s);return g.x.max+=c?u*p*ii(s):0,g.y.max+=h?u*p*Ys(s):0,c&&(g.x=An(g.x,s.x,r,d.x)),h&&(g.y=An(g.y,s.y,l,d.y)),g=ji(g),g}updateDelta(t,e,i){const{anchorPointX:s,anchorPointY:n,isScalingX:a,isScalingY:o,scrollingStep:r}=e;let l=gi(i);return l.x.max+=a?r*-t*ii(i):0,l.y.max+=o?r*-t*Ys(i):0,a&&(l.x=An(l.x,i.x,s)),o&&(l.y=An(l.y,i.y,n)),l=ji(l),l}},fK=class{constructor(t){this.rect=t,this.rect.visible=!1}update(t,e,i,s){this.rect.visible=!0,this.updateCoords(t.offsetX,t.offsetY,e,i,s),this.updateRect(i)}stop(t,e,i){let s=gi();if(!t||!e)return s;this.coords&&(s=this.createZoomFromCoords(e,i));const n=e.width/t.width,a=e.height/t.height;return s=ji(sK(s,n,a)),this.reset(),s}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible}updateCoords(t,e,i,s,n){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}if(this.coords.x2=t,this.coords.y2=e,!s)return;const{isScalingX:a,isScalingY:o,minRatioX:r,minRatioY:l}=i,c=gi(n),h=this.getNormalisedDimensions(),u=s.width/s.height,d=c.x.max-c.x.min,p=c.y.max-c.y.min,g=r/d,f=l/p;h.width/s.width<g&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-s.width*g:this.coords.x2=this.coords.x1+s.width*g),o&&!a?h.height/s.height<f&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-s.width*g:this.coords.y2=this.coords.y1+s.height*f):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-h.width/u,this.coords.y1-s.height*f):this.coords.y2=Math.max(this.coords.y1+h.width/u,this.coords.y1+s.height*f),a||(this.coords.x1=s.x,this.coords.x2=s.x+s.width),o||(this.coords.y1=s.y,this.coords.y2=s.y+s.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:s,height:n}=i;let{x:a,y:o}=i;a=Math.max(a,t.x),a-=Math.max(0,a+s-(t.x+t.width)),o=Math.max(o,t.y),o-=Math.max(0,o+n-(t.y+t.height)),e.x=a,e.y=o,e.width=s,e.height=n}createZoomFromCoords(t,e){const i=gi(e),s=this.getNormalisedDimensions(),n=aa(t,s.x,s.y+s.height),a=s.width/t.width,o=s.height/t.height;let r=PO(i,a,o);const l=n.x*(i.x.max-i.x.min),c=n.y*(i.y.max-i.y.min);return r=Al(r,l,c),r=ji(r),r}getNormalisedDimensions(){var t;const{x1:e=0,y1:i=0,x2:s=0,y2:n=0}=(t=this.coords)!=null?t:{},a=e<=s?e:s,o=i<=n?i:n,r=e<=s?s-e:e-s,l=i<=n?n-i:i-n;return{x:a,y:o,width:r,height:l}}},mK=(Y(),W(H)),{ChartAxisDirection:yK,ToolbarManager:jm}=mK._ModuleSupport,vK=class{constructor(t,e,i,s,n){this.toolbarManager=t,this.zoomManager=e,this.getResetZoom=i,this.updateZoom=s,this.updateAxisZoom=n}toggle(t,e,i){this.toggleGroups(t),t&&this.toggleButtons(e,i)}toggleButtons(t,e){const{toolbarManager:i}=this,s=SM(t,bM()),n=MM(t,e.minRatioX,e.minRatioY),a=SM(t,this.getResetZoom());i.toggleButton("zoom","pan-start",{enabled:t.x.min>Ut.min}),i.toggleButton("zoom","pan-end",{enabled:t.x.max<Ut.max}),i.toggleButton("zoom","pan-left",{enabled:t.x.min>Ut.min}),i.toggleButton("zoom","pan-right",{enabled:t.x.max<Ut.max}),i.toggleButton("zoom","zoom-out",{enabled:!s}),i.toggleButton("zoom","zoom-in",{enabled:!n}),i.toggleButton("zoom","reset",{enabled:!a})}onButtonPress(t,e){this.onButtonPressRanges(t,e),this.onButtonPressZoom(t,e)}toggleGroups(t){var e,i;(e=this.toolbarManager)==null||e.toggleGroup("zoom","ranges",!!t),(i=this.toolbarManager)==null||i.toggleGroup("zoom","zoom",!!t)}onButtonPressRanges(t,e){if(!jm.isGroup("ranges",t))return;const{rangeX:i}=e,s=t.value;typeof s=="number"?i.extendToEnd(s):Array.isArray(s)?i.updateWith(()=>s):typeof s=="function"&&i.updateWith(s)}onButtonPressZoom(t,e){if(jm.isGroup("zoom",t))if(e.independentAxes&&t.value!=="reset"){const i=this.zoomManager.getAxisZooms();for(const[s,{direction:n,zoom:a}]of Object.entries(i))a!=null&&this.onButtonPressZoomAxis(t,e,s,n,a)}else this.onButtonPressZoomUnified(t,e)}onButtonPressZoomAxis(t,e,i,s,n){if(!jm.isGroup("zoom",t))return;const{anchorPointX:a,anchorPointY:o,isScalingX:r,isScalingY:l,scrollingStep:c}=e;let h=B({},n);const u=n.max-n.min;switch(t.value){case"pan-start":h.max=u,h.min=0;break;case"pan-end":h.min=h.max-u,h.max=Ut.max;break;case"pan-left":h.min-=u*c,h.max-=u*c;break;case"pan-right":h.min+=u*c,h.max+=u*c;break;case"zoom-in":case"zoom-out":{const d=s===yK.X,p=d&&r||!d&&l;let g=t.value==="zoom-in"?1-c:1+c;p||(g=1);const v=d?a==="pointer"?vM:a:o==="pointer"?xM:o;h.max=h.min+(h.max-h.min)*g,h=An(h,n,v);break}}this.updateAxisZoom(i,s,Wm(h))}onButtonPressZoomUnified(t,e){if(!jm.isGroup("zoom",t))return;const{anchorPointX:i,anchorPointY:s,isScalingX:n,isScalingY:a,scrollingStep:o}=e,r=gi(this.zoomManager.getZoom());let l=gi(r);switch(t.value){case"reset":l=this.getResetZoom();break;case"pan-start":l.x.max=ii(l),l.x.min=0;break;case"pan-end":l.x.min=Ut.max-ii(l),l.x.max=Ut.max;break;case"pan-left":l=Al(l,-ii(l)*o,0);break;case"pan-right":l=Al(l,ii(l)*o,0);break;case"zoom-in":case"zoom-out":{const c=t.value==="zoom-in"?1-o:1+o,h=i==="pointer"?vM:i,u=s==="pointer"?xM:s;l=PO(l,n?c:1,a?c:1),l.x=An(l.x,r.x,h),l.y=An(l.y,r.y,u);break}}this.updateZoom(ji(l))}},{ARRAY:xK,BOOLEAN:er,NUMBER:eC,RATIO:iC,STRING:IM,UNION:Xm,OR:bK,ActionOnSet:SK,ChartAxisDirection:ao,ChartUpdateType:sC,Validate:Be,ProxyProperty:MK,round:_K,REGIONS:AM}=In._ModuleSupport,nC=t=>_K(t,10),aC=Xm(["pointer","start","middle","end"],"an anchor cord"),$m="zoom-cursor",LM="zoom-tooltip",bh=class extends In._ModuleSupport.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.position="floating-bottom",this.size="small",this.align="center"}};M([In._ModuleSupport.ObserveChanges(t=>{t.onChange()}),Be(er)],bh.prototype,"enabled",2),M([In._ModuleSupport.ObserveChanges(t=>{t.onChange()}),Be(xK,{optional:!0})],bh.prototype,"buttons",2),M([Be(IM)],bh.prototype,"position",2),M([Be(IM)],bh.prototype,"size",2),M([Be(IM)],bh.prototype,"align",2);var Ni=class extends In._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new bh(()=>this.onZoomButtonsChange(this.enabled)),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(Ut.max-Ut.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX=vM,this.anchorPointY=xM,this.rangeX=new Ym(this.onRangeChange.bind(this,ao.X)),this.rangeY=new Ym(this.onRangeChange.bind(this,ao.Y)),this.ratioX=new Km(this.onRatioChange.bind(this,ao.X)),this.ratioY=new Km(this.onRatioChange.bind(this,ao.Y)),this.axisDragger=new nK,this.panner=new rK,this.scroller=new gK,this.scrollPanner=new pK,this.deceleration="short",this.dragState=0,this.minRatioX=0,this.minRatioY=0;const e=new Vm;this.selector=new fK(e),this.contextMenu=new aK(t.contextMenuRegistry,t.zoomManager,this.updateZoom.bind(this)),this.toolbar=new vK(t.toolbarManager,t.zoomManager,this.getResetZoom.bind(this),this.updateZoom.bind(this),this.updateAxisZoom.bind(this));const{Default:i,ZoomDrag:s,Animation:n}=In._ModuleSupport.InteractionState,a=i|n|s,o=i|n,r=t.regionManager.getRegion(AM.SERIES),l=t.regionManager.getRegion(AM.HORIZONTAL_AXES),c=t.regionManager.getRegion(AM.VERTICAL_AXES),h="drag-start";this.destroyFns.push(t.scene.attachNode(e),t.regionManager.listenAll("dblclick",u=>this.onDoubleClick(u),o),t.regionManager.listenAll("nav-zoom",u=>this.onNavZoom(u)),r.addListener("drag",u=>this.onDrag(u),a),r.addListener(h,u=>this.onDragStart(u),a),r.addListener("drag-end",u=>this.onDragEnd(u),a),c.addListener("drag",u=>this.onDrag(u),a),c.addListener(h,u=>this.onDragStart(u),a),c.addListener("drag-end",u=>this.onDragEnd(u),a),c.addListener("leave",()=>this.onAxisLeave(),o),l.addListener("drag",u=>this.onDrag(u),a),l.addListener(h,u=>this.onDragStart(u),a),l.addListener("drag-end",u=>this.onDragEnd(u),a),l.addListener("leave",()=>this.onAxisLeave(),o),r.addListener("wheel",u=>this.onWheel(u),o),t.chartEventManager.addListener("axis-hover",u=>this.onAxisHover(u)),t.gestureDetector.addListener("pinch-move",u=>this.onPinchMove(u)),t.toolbarManager.addListener("button-pressed",u=>this.toolbar.onButtonPress(u,this.getModuleProperties())),t.layoutService.addListener("layout-complete",u=>this.onLayoutComplete(u)),t.updateService.addListener("update-complete",u=>this.onUpdateComplete(u)),t.zoomManager.addListener("zoom-change",u=>this.onZoomChange(u)),t.zoomManager.addListener("zoom-pan-start",u=>this.onZoomPanStart(u)),this.panner.addListener("update",u=>this.onPanUpdate(u)))}onEnabledChange(t){if(!this.contextMenu||!this.toolbar)return;const e=this.getZoom(),i=this.getModuleProperties({enabled:t});this.contextMenu.registerActions(t,e,i),this.onZoomButtonsChange(t),this.toolbar.toggle(t,e,i)}onZoomButtonsChange(t){if(!this.buttons)return;const e=this.buttons.toJson();e.enabled&&(e.enabled=t),this.ctx.toolbarManager.proxyGroupOptions("zoom","zoom",e)}onRangeChange(t,e){if(!e)return;const i=this.getZoom();i[t]=e,this.updateZoom(ji(i))}onRatioChange(t,e){if(!e)return;let i=this.ratioX.getRatio(),s=this.ratioY.getRatio();t===ao.X?i=e:s=e;const n=ji(gi({x:i,y:s}));this.updateZoom(n)}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:s,paddedRect:n}=this;if(!e||!i)return;const{x:a,y:o}=this.getResetZoom();if(s){const{id:r,direction:l}=s,c=l===ao.X?a:o;this.updateAxisZoom(r,l,c)}else n?.containsPoint(t.offsetX,t.offsetY)&&!t.preventZoomDblClick&&this.updateZoom({x:a,y:o})}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:s,enableSelecting:n,hoveredAxis:a,paddedRect:o,ctx:{cursorManager:r,zoomManager:l}}=this;if(!e||!o)return;this.panner.stopInteractions();let c=0;if(i&&a)c=1;else if(o.containsPoint(t.offsetX,t.offsetY)){const h=this.isPanningKeyPressed(t.sourceEvent);s&&(!n||h)?(r.updateCursor($m,"grabbing"),c=2,this.panner.start()):n&&!this.isMinZoom(this.getZoom())&&!h&&(c=3)}(this.dragState=c)!==0&&l.fireZoomPanStartEvent("zoom")}onDrag(t){const{anchorPointX:e,anchorPointY:i,axisDragger:s,dragState:n,enabled:a,paddedRect:o,panner:r,selector:l,seriesRect:c,hoveredAxis:h,ctx:{interactionManager:u,tooltipManager:d,updateService:p,zoomManager:g}}=this;if(!a||!o||!c)return;u.pushState(In._ModuleSupport.InteractionState.ZoomDrag);const f=this.getZoom();switch(n){case 1:if(!h)break;const{id:m,direction:v}=h,y=v===In._ModuleSupport.ChartAxisDirection.X?e:i,x=g.getAxisZoom(m),b=s.update(t,v,y,c,f,x);this.updateAxisZoom(m,v,b);break;case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),o,f);break;case 0:return}d.updateTooltip(LM),p.update(sC.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(t){const{axisDragger:e,dragState:i,enabled:s,panner:n,selector:a,ctx:{cursorManager:o,interactionManager:r,tooltipManager:l}}=this;if(r.popState(In._ModuleSupport.InteractionState.ZoomDrag),!(!s||i===0)){switch(i){case 1:e.stop();break;case 2:n.stop();break;case 3:if(!a.didUpdate())break;const c=this.getZoom();if(this.isMinZoom(c))break;const h=a.stop(this.seriesRect,this.paddedRect,c);this.updateZoom(h);break}this.dragState=0,o.updateCursor($m),l.removeTooltip(LM)}}onNavZoom(t){const{enabled:e,enableScrolling:i,scroller:s}=this;!e||!i||(t.preventDefault(),this.updateZoom(s.updateDelta(t.delta,this.getModuleProperties(),this.getZoom())))}onWheel(t){const{enabled:e,enableAxisDragging:i,enablePanning:s,enableScrolling:n,hoveredAxis:a,paddedRect:o}=this;if(!e||!n||!o)return;const r=o.containsPoint(t.offsetX,t.offsetY),l=i&&a!=null,c=t.sourceEvent,{deltaX:h,deltaY:u}=c,d=h!=null&&u!=null&&Math.abs(h)>Math.abs(u);s&&d?this.onWheelPanning(t):(r||l)&&this.onWheelScrolling(t)}onWheelPanning(t){const{scrollingStep:e,scrollPanner:i,seriesRect:s,ctx:{zoomManager:n}}=this;if(!s)return;t.preventDefault();const a=i.update(t,e,s,n.getAxisZooms());for(const[o,{direction:r,zoom:l}]of Object.entries(a))this.updateAxisZoom(o,r,l)}onWheelScrolling(t){const{enableAxisDragging:e,enableIndependentAxes:i,hoveredAxis:s,scroller:n,seriesRect:a,ctx:{zoomManager:o}}=this;if(!a)return;t.preventDefault();const r=e&&s!=null;let l=this.isScalingX(),c=this.isScalingY();r&&(l=s.direction===In._ModuleSupport.ChartAxisDirection.X,c=!l);const h=this.getModuleProperties({isScalingX:l,isScalingY:c});if(i===!0){const u=n.updateAxes(t,h,a,o.getAxisZooms());for(const[d,{direction:p,zoom:g}]of Object.entries(u))r&&s.id!==d||this.updateAxisZoom(d,p,g)}else{const u=n.update(t,h,a,this.getZoom());this.updateZoom(u)}}onAxisLeave(){const{enabled:t,ctx:{cursorManager:e}}=this;t&&(this.hoveredAxis=void 0,e.updateCursor($m))}onAxisHover(t){const{enabled:e,enableAxisDragging:i,ctx:{cursorManager:s}}=this;e&&(this.hoveredAxis={id:t.axisId,direction:t.direction},i&&s.updateCursor($m,t.direction===ao.X?"ew-resize":"ns-resize"))}onPinchMove(t){const{enabled:e,enableScrolling:i,paddedRect:s,seriesRect:n}=this;if(!e||!i||!s||!n)return;const a=this.getZoom(),o=this.getZoom(),r=t.deltaDistance*-.01,l=aa(n,t.origin.x,t.origin.y);this.isScalingX()&&(o.x.max+=r*ii(a),o.x=_M(o.x,a.x,l.x)),this.isScalingY()&&(o.y.max+=r*(a.y.max-a.y.min),o.y=_M(o.y,a.y,l.y)),this.updateZoom(ji(o)),t.preventDefault()}onLayoutComplete(t){const{enabled:e,rangeX:i,rangeY:s}=this;if(!e)return;const{series:{rect:n,paddedRect:a,shouldFlipXY:o},axes:r}=t;if(this.seriesRect=n,this.paddedRect=a,this.contextMenu.rect=a,this.shouldFlipXY=o,!r)return;const[l,c]=In._Util.bifurcate(p=>p.direction===ao.X,r),h=i.updateAxis(l),u=s.updateAxis(c);if(!h&&!u)return;const d={};d.x=i.getRange(),d.y=s.getRange(),(d.x!=null||d.y!=null)&&this.updateZoom(ji(gi(d)))}onUpdateComplete({minRect:t,minVisibleRect:e}){const{enabled:i,minVisibleItemsX:s,minVisibleItemsY:n,paddedRect:a,shouldFlipXY:o}=this;if(!i||!a||!t||!e)return;const r=this.getZoom(),l=o?n:s,c=o?s:n,h=e.width*l/a.width,u=e.height*c/a.height,d=nC(h*ii(r)),p=nC(u*Ys(r));this.isScalingX()&&(this.minRatioX=Math.min(1,d)),this.isScalingY()&&(this.minRatioY=Math.min(1,p)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom(),i=this.getModuleProperties();this.contextMenu.toggleActions(e,i),this.toolbar.toggleButtons(e,i)}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:s,updateService:n,zoomManager:a}}=this;if(!i)return;const o=e.translateZooms(i,a.getAxisZooms(),t.deltaX,t.deltaY);for(const[r,{direction:l,zoom:c}]of Object.entries(o))this.updateAxisZoom(r,l,c);s.updateTooltip(LM),n.update(sC.PERFORM_LAYOUT,{skipAnimations:!0})}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(t){return MM(t,this.minRatioX,this.minRatioY)}updateZoom(t){const{minRatioX:e,minRatioY:i,ctx:{zoomManager:s}}=this,n=ii(t),a=Ys(t),o=this.getZoom(),r=n<=ii(o)&&n<e,l=a<=Ys(o)&&a<i;r&&(t.x=FO(t.x,o.x,e)),l&&(t.y=FO(t.y,o.y,i)),s.updateZoom("zoom",t)}updateAxisZoom(t,e,i){const{enableIndependentAxes:s,minRatioX:n,minRatioY:a,ctx:{zoomManager:o}}=this;if(!i)return;const r=this.getZoom();if(s!==!0){r[e]=i,this.updateZoom(r);return}const l=i.max-i.min,c=r[e].max-r[e].min,h=e===ao.X?n:a;l<=c&&l<h||o.updateAxisZoom("zoom",t,i)}getZoom(){return gi(this.ctx.zoomManager.getZoom())}getResetZoom(){var t,e,i,s;const n=(e=(t=this.rangeX.getInitialRange())!=null?t:this.ratioX.getInitialRatio())!=null?e:Ut,a=(s=(i=this.rangeY.getInitialRange())!=null?i:this.ratioY.getInitialRatio())!=null?s:Ut;return{x:n,y:a}}getModuleProperties(t){var e,i,s,n,a,o,r,l,c,h;return{anchorPointX:(e=t?.anchorPointX)!=null?e:this.getAnchorPointX(),anchorPointY:(i=t?.anchorPointY)!=null?i:this.getAnchorPointY(),enabled:(s=t?.enabled)!=null?s:this.enabled,independentAxes:(n=t?.independentAxes)!=null?n:this.enableIndependentAxes===!0,isScalingX:(a=t?.isScalingX)!=null?a:this.isScalingX(),isScalingY:(o=t?.isScalingY)!=null?o:this.isScalingY(),minRatioX:(r=t?.minRatioX)!=null?r:this.minRatioX,minRatioY:(l=t?.minRatioY)!=null?l:this.minRatioY,rangeX:(c=t?.rangeX)!=null?c:this.rangeX,scrollingStep:(h=t?.scrollingStep)!=null?h:this.scrollingStep}}};M([SK({newValue(t){this.onEnabledChange(t)}}),Be(er)],Ni.prototype,"enabled",2),M([Be(er)],Ni.prototype,"enableAxisDragging",2),M([Be(er)],Ni.prototype,"enableDoubleClickToReset",2),M([Be(er,{optional:!0})],Ni.prototype,"enableIndependentAxes",2),M([Be(er)],Ni.prototype,"enablePanning",2),M([Be(er)],Ni.prototype,"enableScrolling",2),M([Be(er)],Ni.prototype,"enableSelecting",2),M([Be(Xm(["alt","ctrl","meta","shift"],"a pan key"))],Ni.prototype,"panKey",2),M([Be(Xm(["x","y","xy"],"an axis"))],Ni.prototype,"axes",2),M([Be(iC)],Ni.prototype,"scrollingStep",2),M([Be(eC.restrict({min:1}))],Ni.prototype,"minVisibleItemsX",2),M([Be(eC.restrict({min:1}))],Ni.prototype,"minVisibleItemsY",2),M([Be(aC)],Ni.prototype,"anchorPointX",2),M([Be(aC)],Ni.prototype,"anchorPointY",2),M([MK("panner.deceleration"),Be(bK(iC,Xm(["off","short","long"],"a deceleration")))],Ni.prototype,"deceleration",2);var kK={enabled:!0,buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out",section:"scale"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in",section:"scale"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left",section:"pan"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right",section:"pan"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset",section:"reset"}]},DK={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],dependencies:["toolbar"],instanceConstructor:Ni,themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:kK,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,deceleration:"short",minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1}}},oC=(Y(),W(H)),Gd=(Y(),W(H)),{BOOLEAN:rC,OBJECT:lC,Layers:IK,POSITION:AK,Validate:ir,POSITIVE_NUMBER:TM,ProxyProperty:NM}=Gd._ModuleSupport,{BBox:LK,Group:OM,Rect:TK,LinearGradientFill:NK,Triangle:OK}=Gd._Scene,{createId:CK}=Gd._Util,CM=class{constructor(){this.thickness=16,this.preferredLength=100}};M([ir(TM)],CM.prototype,"thickness",2),M([ir(TM)],CM.prototype,"preferredLength",2);var EK=class extends Gd._ModuleSupport.CartesianAxis{constructor(t){super(t,new Gd._Scale.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}getTickSize(){return 0}},Zm=class{constructor(t){this.axis=t}};M([ir(lC),NM("axis.label")],Zm.prototype,"label",2),M([ir(lC),NM("axis.interval")],Zm.prototype,"interval",2),M([NM("axis.seriesAreaPadding")],Zm.prototype,"padding",2);var Sh=class{constructor(t){this.ctx=t,this.id=CK(this),this.group=new OM({name:"legend",layer:!0,zIndex:IK.LEGEND_ZINDEX}),this.gradient=new CM,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=t.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",e=>this.update(e))),this.highlightManager=t.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange())),this.gradientRect=new TK,this.gradientFill=new NK,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new OK,this.group.append(this.arrow),this.axisGridGroup=new OM({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new OM({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new EK(t),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new Zm(this.axis),this.destroyFns.push(()=>this.detachLegend())}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;(t=this.group.parent)==null||t.removeChild(this.group)}update(t){const{shrinkRect:e}=t,i=this.data[0];if(!this.enabled||!i||!i.enabled)return this.group.visible=!1,K(B({},t),{shrinkRect:e.clone()});const{colorRange:s}=this.normalizeColorArrays(i),n=this.updateGradientRect(e,s),a=this.updateAxis(i,n),{newShrinkRect:o,translateX:r,translateY:l}=this.getMeasurements(e,n,a);return this.updateArrow(n),this.group.visible=!0,this.group.translationX=r,this.group.translationY=l,this.latestGradientBox=n,K(B({},t),{shrinkRect:o})}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const s=i.length;return e=i.map((n,a)=>{const[o,r]=e;return a===0?o:a===s-1?r:o+(r-o)*a/(s-1)}),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{reverseOrder:i,gradientFill:s,gradientRect:n}=this,{preferredLength:a,thickness:o}=this.gradient,r=new LK(0,0,0,0),l=this.getOrientation()==="vertical";if(l){const c=t.height,h=a;r.x=0,r.y=0,r.width=o,r.height=Math.min(c,h)}else{const c=t.width,h=a;r.x=0,r.y=0,r.width=Math.min(c,h),r.height=o}return s.stops=e,l?s.direction=i?"to-bottom":"to-top":s.direction=i?"to-left":"to-right",n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height,r}updateAxis(t,e){const{reverseOrder:i,axis:s}=this,n=this.getOrientation()==="vertical",a=i!==n;s.position=n?"right":"bottom",s.colorDomain=a?t.colorDomain.slice().reverse():t.colorDomain,s.calculateDomain(),s.range=n?[0,e.height]:[0,e.width],s.gridLength=0,s.translation.x=e.x+(n?e.width:0),s.translation.y=e.y+(n?0:e.height);const o=s.calculateLayout().bbox;return s.update(),o}updateArrow(t){var e;const{arrow:i,axis:{label:s,scale:n}}=this,a=this.highlightManager.getActiveHighlight(),o=a?.colorValue;if(a==null||o==null){i.visible=!1;return}const r=this.getOrientation()==="vertical",l=(e=s.fontSize)!=null?e:0,c=n.convert(o);let h,u,d;r?(h=t.x-l/2,u=t.y+c,d=Math.PI/2):(h=t.x+c,u=t.y-l/2,d=Math.PI),i.fill=s.color,i.size=l,i.translationX=h,i.translationY=u,i.rotation=d,i.visible=!0}getMeasurements(t,e,i){let s,n;this.getOrientation()==="vertical"?(s=e.width+i.width,n=e.height):(s=e.width,n=e.height+i.height);const{spacing:o}=this,r=t.clone();let l,c;return this.position==="left"?(l=t.x,c=t.y+t.height/2-n/2,r.shrink(s+o,"left")):this.position==="right"?(l=t.x+t.width-s,c=t.y+t.height/2-n/2,r.shrink(s+o,"right")):this.position==="top"?(l=t.x+t.width/2-s/2,c=t.y,r.shrink(n+o,"top")):(l=t.x+t.width/2-s/2,c=t.y+t.height-n,r.shrink(n+o,"bottom")),{translateX:l,translateY:c,gradientBox:e,newShrinkRect:r}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&this.latestGradientBox!=null&&this.updateArrow(this.latestGradientBox)}};Sh.className="GradientLegend",M([ir(rC)],Sh.prototype,"enabled",2),M([ir(AK)],Sh.prototype,"position",2),M([ir(rC,{optional:!0})],Sh.prototype,"reverseOrder",2),M([ir(TM)],Sh.prototype,"spacing",2);var RK={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion"],identifier:"gradient",instanceConstructor:Sh,themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:8,label:{color:oC._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:oC._Theme.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}},wK=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],s=t[1],n=t[2],a=t[3];i=this.ff(i,s,n,a,e[0],7,-680876936),a=this.ff(a,i,s,n,e[1],12,-389564586),n=this.ff(n,a,i,s,e[2],17,606105819),s=this.ff(s,n,a,i,e[3],22,-1044525330),i=this.ff(i,s,n,a,e[4],7,-176418897),a=this.ff(a,i,s,n,e[5],12,1200080426),n=this.ff(n,a,i,s,e[6],17,-1473231341),s=this.ff(s,n,a,i,e[7],22,-45705983),i=this.ff(i,s,n,a,e[8],7,1770035416),a=this.ff(a,i,s,n,e[9],12,-1958414417),n=this.ff(n,a,i,s,e[10],17,-42063),s=this.ff(s,n,a,i,e[11],22,-1990404162),i=this.ff(i,s,n,a,e[12],7,1804603682),a=this.ff(a,i,s,n,e[13],12,-40341101),n=this.ff(n,a,i,s,e[14],17,-1502002290),s=this.ff(s,n,a,i,e[15],22,1236535329),i=this.gg(i,s,n,a,e[1],5,-165796510),a=this.gg(a,i,s,n,e[6],9,-1069501632),n=this.gg(n,a,i,s,e[11],14,643717713),s=this.gg(s,n,a,i,e[0],20,-373897302),i=this.gg(i,s,n,a,e[5],5,-701558691),a=this.gg(a,i,s,n,e[10],9,38016083),n=this.gg(n,a,i,s,e[15],14,-660478335),s=this.gg(s,n,a,i,e[4],20,-405537848),i=this.gg(i,s,n,a,e[9],5,568446438),a=this.gg(a,i,s,n,e[14],9,-1019803690),n=this.gg(n,a,i,s,e[3],14,-187363961),s=this.gg(s,n,a,i,e[8],20,1163531501),i=this.gg(i,s,n,a,e[13],5,-1444681467),a=this.gg(a,i,s,n,e[2],9,-51403784),n=this.gg(n,a,i,s,e[7],14,1735328473),s=this.gg(s,n,a,i,e[12],20,-1926607734),i=this.hh(i,s,n,a,e[5],4,-378558),a=this.hh(a,i,s,n,e[8],11,-2022574463),n=this.hh(n,a,i,s,e[11],16,1839030562),s=this.hh(s,n,a,i,e[14],23,-35309556),i=this.hh(i,s,n,a,e[1],4,-1530992060),a=this.hh(a,i,s,n,e[4],11,1272893353),n=this.hh(n,a,i,s,e[7],16,-155497632),s=this.hh(s,n,a,i,e[10],23,-1094730640),i=this.hh(i,s,n,a,e[13],4,681279174),a=this.hh(a,i,s,n,e[0],11,-358537222),n=this.hh(n,a,i,s,e[3],16,-722521979),s=this.hh(s,n,a,i,e[6],23,76029189),i=this.hh(i,s,n,a,e[9],4,-640364487),a=this.hh(a,i,s,n,e[12],11,-421815835),n=this.hh(n,a,i,s,e[15],16,530742520),s=this.hh(s,n,a,i,e[2],23,-995338651),i=this.ii(i,s,n,a,e[0],6,-198630844),a=this.ii(a,i,s,n,e[7],10,1126891415),n=this.ii(n,a,i,s,e[14],15,-1416354905),s=this.ii(s,n,a,i,e[5],21,-57434055),i=this.ii(i,s,n,a,e[12],6,1700485571),a=this.ii(a,i,s,n,e[3],10,-1894986606),n=this.ii(n,a,i,s,e[10],15,-1051523),s=this.ii(s,n,a,i,e[1],21,-2054922799),i=this.ii(i,s,n,a,e[8],6,1873313359),a=this.ii(a,i,s,n,e[15],10,-30611744),n=this.ii(n,a,i,s,e[6],15,-1560198380),s=this.ii(s,n,a,i,e[13],21,1309151649),i=this.ii(i,s,n,a,e[4],6,-145523070),a=this.ii(a,i,s,n,e[11],10,-1120210379),n=this.ii(n,a,i,s,e[2],15,718787259),s=this.ii(s,n,a,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(s,t[1]),t[2]=this.add32(n,t[2]),t[3]=this.add32(a,t[3])}cmn(t,e,i,s,n,a){return e=this.add32(this.add32(e,t),this.add32(s,a)),this.add32(e<<n|e>>>32-n,i)}ff(t,e,i,s,n,a,o){return this.cmn(e&i|~e&s,t,e,n,a,o)}gg(t,e,i,s,n,a,o){return this.cmn(e&s|i&~s,t,e,n,a,o)}hh(t,e,i,s,n,a,o){return this.cmn(e^i^s,t,e,n,a,o)}ii(t,e,i,s,n,a,o){return this.cmn(i^(e|~s),t,e,n,a,o)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=t.length;s+=64)this.md5cycle(i,this.md5blk(t.substring(s-64,s)));t=t.substring(s-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)n[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,n),s=0;s<16;s++)n[s]=0;return n[14]=e*8,this.md5cycle(i,n),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=e[t>>s*8+4&15]+e[t>>s*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function EM(t){return t==null||t.length===0}var qm={"01":"GRID","02":"CHARTS","0102":"BOTH"},cC=class Qs{constructor(e){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new wK,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(this.licenseKey,this.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`,s=e.suppliedLicenseType===void 0?"":`AG ${e.suppliedLicenseType==="BOTH"?"Grid and AG Charts":e.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const n=Qs.getChartsReleaseDate(),a=Qs.formatDate(n);this.outputExpiredKey(e.expiry,a,s)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,s):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,s)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(Qs.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const s=i.length-32,n=i.substring(s),a=i.substring(0,s),[o,r,l]=Qs.extractBracketedInformation(i);return{md5:n,license:a,version:o,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const s="CHARTS";if(EM(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:s};const n=Qs.getChartsReleaseDate(),{md5:a,license:o,version:r,isTrial:l,type:c}=Qs.extractLicenseComponents(e);let h=a===this.md5.md5(o)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,u,d,p=null,g=!1,f;function m(){u=p<new Date,d=void 0}if(h&&(p=Qs.extractExpiry(o),h=!isNaN(p.getTime()),h))switch(d=n>p,r){case"legacy":case"2":{h=!1;break}case"3":EM(c)?h=!1:(f=c,c!==qm["02"]&&c!==qm["0102"]?(h=!1,g=!0):l&&m())}return h?{licenseKey:e,valid:h,expiry:Qs.formatDate(p),expired:d,version:r,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:i?f!=="BOTH":void 0,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}:{licenseKey:e,valid:h,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!EM(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView||window;if(!e)return"localhost";const i=e.location,{hostname:s=""}=i;return s}isForceWatermark(){var e,i;if(!this.document)return!1;const s=((i=(e=this.document)==null?void 0:e.defaultView)!=null?i:typeof window<"u")?window:void 0;if(!s)return!1;const{pathname:n}=s.location;return n?n.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=e.getDate(),n=e.getMonth(),a=e.getFullYear();return s+" "+i[n]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(Qs.decode(Qs.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,o,r,l,c,h,u=0;const d=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<d.length;)r=i.indexOf(d.charAt(u++)),l=i.indexOf(d.charAt(u++)),c=i.indexOf(d.charAt(u++)),h=i.indexOf(d.charAt(u++)),n=r<<2|l>>4,a=(l&15)<<4|c>>2,o=(c&3)<<6|h,s=s+String.fromCharCode(n),c!=64&&(s=s+String.fromCharCode(a)),h!=64&&(s=s+String.fromCharCode(o));return s=Qs.utf8_decode(s),s}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);n<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(n&63|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(n&63|128))}return i}setLicenseKey(e,i=!1){this.gridContext=i,this.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const s=i.filter(r=>r==="TRIAL").length===1,n=i.filter(r=>r.indexOf("v")===0)[0],a=n?n.replace("v",""):"legacy",o=qm[i.filter(r=>qm[r])[0]];return[a,s,o]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",s=""){console.error(e.padEnd(this.totalMessageLength-s.length,i)+s)}outputInvalidLicenseKey(e,i,s){this.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,s){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,s){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};cC.RELEASE_INFORMATION="MTcyMDAyMjAyNTIyOQ==";var PK=cC,BK=(Y(),W(H)),FK=".ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:bold;font-family:Impact,sans-serif;font-size:19px;opacity:0.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&::before{content:'';display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}> span{padding-left:0.7rem}}@keyframes ag-watermark-fadeout{from{opacity:0.5}to{opacity:0}}",{createElement:zK}=BK._ModuleSupport;function GK(t,e){t.addStyles("watermark",FK);const i=t.addChild("canvas-overlay","watermark"),s=zK("span");s.innerText=e,i.addEventListener("animationend",()=>{t.removeChild("canvas-overlay","watermark"),t.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(s)}var Mh=(Y(),W(H)),oo=(Y(),W(H));function VK(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function UK(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var RM=(Y(),W(H)),{Group:HK,Rect:_h,Line:Vd,BBox:WK,Selection:hC}=RM._Scene,{Logger:YK}=RM._Util,KK=class extends HK{constructor(){super(),this.append([new _h({tag:0}),new _h({tag:0}),new _h({tag:2}),new _h({tag:1}),new Vd({tag:3}),new Vd({tag:3}),new Vd({tag:4}),new Vd({tag:4})])}updateDatumStyles(t,e,i,s){const{bandwidth:n,scaledValues:{xValue:a,medianValue:o}}=t;let{minValue:r,q1Value:l,q3Value:c,maxValue:h}=t.scaledValues;(i&&!s||!i&&s)&&([h,c,l,r]=[r,l,c,h]);const u=(V,X,j,tt)=>i?{y:V,x:X,width:tt,height:j}:{x:V,y:X,width:j,height:tt},d=(V,X,j)=>i?{y1:V,y2:X,x:j}:{x1:V,x2:X,y:j},p=(V,X,j)=>i?{x1:X,x2:j,y:V}:{x:V,y1:X,y2:j},g=(V,X,j,tt)=>({x:V,y:X,width:j,height:tt}=u(V,X,j,tt),new WK(V,X,j,tt)),{fill:f,fillOpacity:m,stroke:v,strokeWidth:y,strokeOpacity:x,lineDash:b,lineDashOffset:S,cornerRadius:k,cap:D,whisker:T}=e,I=hC.select(this,_h),N=I.selectByTag(0),[C]=I.selectByTag(2),[E]=I.selectByTag(1),O=I.selectByTag(3),P=I.selectByTag(4);T.strokeWidth>n&&(T.strokeWidth=n);const w=u(l,a,c-l,n);C.setProperties(w),N[0].setProperties(w),N[0].setProperties({cornerRadius:k,clipBBox:g(l,a,Math.round(o-l+y/2),n)}),N[1].setProperties(w),N[1].setProperties({cornerRadius:k,clipBBox:g(Math.round(o-y/2),a,Math.floor(c-o+y/2),n)});const R=Math.max(Math.round(o-y/2),l+y),G=Math.min(Math.round(o+y/2),c-y);E.setProperties(w),E.setProperties({visible:R<G,cornerRadius:k,clipBBox:g(R,a+y,G-R,Math.max(0,n-y*2))});const z=Math.floor(a+n*(1-D.lengthRatio)/2),U=Math.ceil(a+n*(1+D.lengthRatio)/2);P[0].setProperties(p(r,z,U)),P[1].setProperties(p(h,z,U)),O[0].setProperties(d(Math.round(r+T.strokeWidth/2),l,Math.floor(a+n/2))),O[1].setProperties(d(c,Math.round(h-T.strokeWidth/2),Math.floor(a+n/2)));for(const V of N)V.setProperties({fill:f,fillOpacity:m,strokeWidth:y*2,strokeOpacity:0});E.setProperties({fill:v,fillOpacity:x,strokeWidth:0});for(const V of[...O,...P])V.setProperties(T);C.setProperties({stroke:v,strokeWidth:y,strokeOpacity:x,lineDash:b,lineDashOffset:S,cornerRadius:k,fillOpacity:0})}distanceSquared(t,e){const i=hC.selectByClass(this,_h,Vd);return RM._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(YK.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}},jK=(Y(),W(H)),{BaseProperties:uC,AbstractBarSeriesProperties:XK,SeriesTooltip:$K,Validate:Ft,COLOR_STRING:Qm,FUNCTION:ZK,LINE_DASH:dC,OBJECT:wM,POSITIVE_NUMBER:Ud,RATIO:Jm,STRING:Ds,mergeDefaults:qK}=jK._ModuleSupport,pC=class extends uC{constructor(){super(...arguments),this.lengthRatio=.5}};M([Ft(Jm)],pC.prototype,"lengthRatio",2);var kh=class extends uC{};M([Ft(Qm,{optional:!0})],kh.prototype,"stroke",2),M([Ft(Ud)],kh.prototype,"strokeWidth",2),M([Ft(Jm)],kh.prototype,"strokeOpacity",2),M([Ft(dC,{optional:!0})],kh.prototype,"lineDash",2),M([Ft(Ud)],kh.prototype,"lineDashOffset",2);var ee=class extends XK{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new pC,this.whisker=new kh,this.tooltip=new $K,this.backgroundFill="white"}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}=this,a=super.toJson();return a.whisker=qK(a.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:s,lineDashOffset:n}),a}};M([Ft(Ds)],ee.prototype,"xKey",2),M([Ft(Ds)],ee.prototype,"minKey",2),M([Ft(Ds)],ee.prototype,"q1Key",2),M([Ft(Ds)],ee.prototype,"medianKey",2),M([Ft(Ds)],ee.prototype,"q3Key",2),M([Ft(Ds)],ee.prototype,"maxKey",2),M([Ft(Ds,{optional:!0})],ee.prototype,"xName",2),M([Ft(Ds,{optional:!0})],ee.prototype,"yName",2),M([Ft(Ds,{optional:!0})],ee.prototype,"minName",2),M([Ft(Ds,{optional:!0})],ee.prototype,"q1Name",2),M([Ft(Ds,{optional:!0})],ee.prototype,"medianName",2),M([Ft(Ds,{optional:!0})],ee.prototype,"q3Name",2),M([Ft(Ds,{optional:!0})],ee.prototype,"maxName",2),M([Ft(Qm,{optional:!0})],ee.prototype,"fill",2),M([Ft(Jm)],ee.prototype,"fillOpacity",2),M([Ft(Qm)],ee.prototype,"stroke",2),M([Ft(Ud)],ee.prototype,"strokeWidth",2),M([Ft(Jm)],ee.prototype,"strokeOpacity",2),M([Ft(dC)],ee.prototype,"lineDash",2),M([Ft(Ud)],ee.prototype,"lineDashOffset",2),M([Ft(Ud)],ee.prototype,"cornerRadius",2),M([Ft(ZK,{optional:!0})],ee.prototype,"itemStyler",2),M([Ft(wM)],ee.prototype,"cap",2),M([Ft(wM)],ee.prototype,"whisker",2),M([Ft(wM)],ee.prototype,"tooltip",2),M([Ft(Qm)],ee.prototype,"backgroundFill",2);var{extent:QK,extractDecoratedProperties:gC,fixNumericExtent:fC,keyProperty:JK,mergeDefaults:PM,SeriesNodePickMode:mC,SMALLEST_KEY_INTERVAL:t3,valueProperty:Hd,diff:e3,animationValidation:i3,convertValuesToScaleByDefs:s3,isFiniteNumber:n3,computeBarFocusBounds:a3}=oo._ModuleSupport,{motion:yC}=oo._Scene,{ContinuousScale:o3}=oo._Scale,{Color:BM}=oo._Util,r3=class extends oo._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},FM=class extends oo._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[mC.NEAREST_NODE,mC.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new ee,this.NodeEvent=r3}processData(t){return F(this,null,function*(){var e,i,s;if(!this.properties.isValid()||!this.visible)return;const{xKey:n,minKey:a,q1Key:o,medianKey:r,q3Key:l,maxKey:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),u=(e=this.getCategoryAxis())==null?void 0:e.scale,d=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:f}=this.getScaleInformation({xScale:u,yScale:d}),m=[];h&&this.processedData&&m.push(e3(this.processedData)),h&&m.push(i3());const{processedData:v}=yield this.requestDataModel(t,this.data,{props:[JK(n,g,{id:"xValue"}),Hd(a,f,{id:"minValue"}),Hd(o,f,{id:"q1Value"}),Hd(r,f,{id:"medianValue"}),Hd(l,f,{id:"q3Value"}),Hd(c,f,{id:"maxValue"}),...p?[t3]:[],...m]});this.smallestDataInterval=(s=v.reduced)==null?void 0:s.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!(i&&s))return[];if(t===this.getBarDirection()){const p=s.getDomain(this,"minValue","value",i),g=s.getDomain(this,"maxValue","value",i);return fC([Math.min(...p),Math.max(...g)],this.getValueAxis())}const{index:a,def:o}=s.resolveProcessedDataDefById(this,"xValue"),r=i.domain.keys[a];if(o.type==="key"&&o.valueType==="category")return r;const l=this.getCategoryAxis(),c=(e=QK(r))!=null?e:[NaN,NaN],h=n3(n)?n*.5:0,u=c[0]+-h,d=c[1]+h;return fC([u,d],l)}createNodeData(){return F(this,null,function*(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&s))return;const{xKey:n,fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u,cap:d,whisker:p}=this.properties,g=[],f=e.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]),{barWidth:m,groupIndex:v}=this.updateGroupScale(i),y=o3.is(i.scale)?m*-.5:0,{groupScale:x,processedData:b}=this,S=this.isVertical(),k={itemId:n,nodeData:g,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&b?.data.forEach(({datum:D,keys:T,values:I})=>{const{xValue:N,minValue:C,q1Value:E,medianValue:O,q3Value:P,maxValue:w}=e.resolveProcessedDataDefsValues(f,{keys:T,values:I});if([C,E,O,P,w].some(tt=>typeof tt!="number")||C>E||E>O||O>P||P>w)return;const R=s3({defs:f,values:{xValue:N,minValue:C,q1Value:E,medianValue:O,q3Value:P,maxValue:w},xAxis:i,yAxis:s});R.xValue+=Math.round(x.convert(String(v)))+y;const G=Math.round(m),z=Math.abs(R.q3Value-R.q1Value),U=R.xValue+G/2,V=Math.min(R.q3Value,R.q1Value)+z/2,X={x:S?U:V,y:S?V:U};let j;S?j={x:X.x-G/2,y:R.minValue,width:G,height:R.maxValue-R.minValue}:j={x:R.minValue,y:X.y-G/2,width:R.maxValue-R.minValue,height:G},g.push({series:this,itemId:N,datum:D,xKey:n,bandwidth:G,scaledValues:R,cap:d,whisker:p,fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u,midPoint:X,focusRect:j})}),k})}getLegendData(t){var e;const{id:i,data:s}=this,{xKey:n,yName:a,fill:o,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:h,showInLegend:u,legendItemName:d,visible:p}=this.properties;return!u||!s?.length||!n||t!=="category"?[]:[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:p,label:{text:(e=d??a)!=null?e:i},symbols:[{marker:{fill:o,fillOpacity:r,stroke:l,strokeOpacity:h,strokeWidth:c}}],legendItemName:d}]}getTooltipHtml(t){const{xKey:e,minKey:i,q1Key:s,medianKey:n,q3Key:a,maxKey:o,xName:r,yName:l,minName:c,q1Name:h,medianName:u,q3Name:d,maxName:p,tooltip:g,fill:f}=this.properties,{datum:m,itemId:v}=t,y=this.getCategoryAxis(),x=this.getValueAxis();if(!y||!x||!this.properties.isValid())return oo._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const b=oo._Util.sanitizeHtml(l),k=[[e,r,y],[i,c,x],[s,h,x],[n,u,x],[a,d,x],[o,p,x]].map(([T,I,N])=>oo._Util.sanitizeHtml(`${I??T}: ${N.formatDatum(m[T])}`)).join(b?"<br/>":", "),{fill:D}=this.getFormattedStyles(t);return g.toTooltipHtml({title:b,content:k,backgroundColor:f},{seriesId:this.id,itemId:v,datum:m,fill:f,xKey:e,minKey:i,q1Key:s,medianKey:n,q3Key:a,maxKey:o,xName:r,minName:c,q1Name:h,medianName:u,q3Name:d,maxName:p,yName:l,title:b,color:f??D})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:s}=VK(e);yC.resetMotion([t],UK(e)),yC.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){return F(this,null,function*(){var e;const i=(e=t.nodeData)!=null?e:[];return t.datumSelection.update(i)})}updateDatumNodes(t){return F(this,arguments,function*({datumSelection:e,isHighlight:i}){var s;const n=this.isVertical(),a=(s=this.getValueAxis())==null?void 0:s.isReversed();e.each((o,r)=>{let l=this.getFormattedStyles(r,i);i&&(l=PM(this.properties.highlightStyle.item,l));const{stroke:c,strokeWidth:h,strokeOpacity:u,lineDash:d,lineDashOffset:p}=l;l.whisker=PM(l.whisker,{stroke:c,strokeWidth:h,strokeOpacity:u,lineDash:d,lineDashOffset:p}),o.updateDatumStyles(r,l,n,a)})})}updateLabelNodes(t){return F(this,null,function*(){})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)})}nodeFactory(){return new KK}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:s},properties:n}=this,{xKey:a,minKey:o,q1Key:r,medianKey:l,q3Key:c,maxKey:h,itemStyler:u,backgroundFill:d,cornerRadius:p}=n,{datum:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:x,cap:b,whisker:S}=t;let k,D;if(!0)k=t.fill,D=n.fillOpacity;else{try{k=BM.mix(BM.fromString(d),BM.fromString(t.fill),n.fillOpacity).toString()}catch{k=t.fill}D=void 0}const I={fill:k,fillOpacity:D,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:x,cornerRadius:p,cap:gC(b),whisker:gC(S)};if(u){const N=s.call(u,K(B({datum:g,seriesId:i,highlighted:e},I),{xKey:a,minKey:o,q1Key:r,medianKey:l,q3Key:c,maxKey:h}));if(N)return PM(N,I)}return I}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return a3((i=this.contextNodeData)==null?void 0:i.nodeData[t].focusRect,this.contentGroup,e)}};FM.className="BoxPlotSeries",FM.type="box-plot";var vC=(Y(),W(H)),l3={series:{direction:"vertical",strokeWidth:2},axes:{[vC._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[vC._Theme.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},{Color:zM}=Mh._Util,c3={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:FM,tooltipDefaults:{range:"exact"},defaultAxes:[{type:Mh._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:Mh._Theme.POSITION.LEFT},{type:Mh._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:Mh._Theme.POSITION.BOTTOM}],themeTemplate:l3,groupable:!0,paletteFactory:({takeColors:t,themeTemplateParameters:e})=>{var i;const s=e.get(Mh._Theme.DEFAULT_BACKGROUND_COLOUR),n=(i=Array.isArray(s)?s[0]:s)!=null?i:"white",{fills:[a],strokes:[o]}=t(1);let r;try{r=zM.mix(zM.fromString(n),zM.fromString(a),.3).toString()}catch{r=a}return{fill:r,stroke:o,backgroundFill:n}},swapDefaultAxesCondition:({direction:t})=>t==="horizontal"},Dh=(Y(),W(H)),fi=(Y(),W(H)),h3=(Y(),W(H)),{AbstractBarSeriesProperties:u3,BaseProperties:GM,PropertiesArray:d3,SeriesTooltip:p3,Validate:Qt,ARRAY:g3,COLOR_STRING:Ih,LINE_DASH:xC,OBJECT:VM,POSITIVE_NUMBER:Ah,RATIO:Lh,STRING:ty}=h3._ModuleSupport,ro=class extends GM{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};M([Qt(Ih)],ro.prototype,"fill",2),M([Qt(Lh)],ro.prototype,"fillOpacity",2),M([Qt(Ih)],ro.prototype,"stroke",2),M([Qt(Ah)],ro.prototype,"strokeWidth",2),M([Qt(Lh)],ro.prototype,"strokeOpacity",2),M([Qt(xC)],ro.prototype,"lineDash",2),M([Qt(Ah)],ro.prototype,"lineDashOffset",2),M([Qt(Lh)],ro.prototype,"lengthRatio",2);var bC=class extends GM{};M([Qt(Ah,{optional:!0})],bC.prototype,"max",2);var ey=class extends GM{constructor(){super(...arguments),this.color="lightgrey"}};M([Qt(Ih)],ey.prototype,"color",2),M([Qt(Ah,{optional:!0})],ey.prototype,"stop",2);var si=class extends u3{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new d3(ey),this.target=new ro,this.scale=new bC,this.tooltip=new p3,this.backgroundFill="white"}};M([Qt(ty)],si.prototype,"valueKey",2),M([Qt(ty,{optional:!0})],si.prototype,"valueName",2),M([Qt(ty,{optional:!0})],si.prototype,"targetKey",2),M([Qt(ty,{optional:!0})],si.prototype,"targetName",2),M([Qt(Ih)],si.prototype,"fill",2),M([Qt(Lh)],si.prototype,"fillOpacity",2),M([Qt(Ih)],si.prototype,"stroke",2),M([Qt(Ah)],si.prototype,"strokeWidth",2),M([Qt(Lh)],si.prototype,"strokeOpacity",2),M([Qt(xC)],si.prototype,"lineDash",2),M([Qt(Ah)],si.prototype,"lineDashOffset",2),M([Qt(Lh)],si.prototype,"widthRatio",2),M([Qt(g3.restrict({minLength:0}))],si.prototype,"colorRanges",2),M([Qt(VM)],si.prototype,"target",2),M([Qt(VM)],si.prototype,"scale",2),M([Qt(VM)],si.prototype,"tooltip",2),M([Qt(Ih)],si.prototype,"backgroundFill",2);var{animationValidation:f3,collapsedStartingBarPosition:SC,diff:m3,keyProperty:y3,partialAssign:UM,prepareBarAnimationFunctions:MC,resetBarSelectionsFn:v3,seriesLabelFadeInAnimation:_C,valueProperty:kC,createDatumId:x3,computeBarFocusBounds:b3}=fi._ModuleSupport,{fromToMotion:DC}=fi._Scene.motion,{sanitizeHtml:IC,Color:HM}=fi._Util,AC=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],S3=class e1 extends fi._ModuleSupport.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:{y:["targetKey","valueKey"]},directionNames:{y:["targetName","valueName"]},pickModes:[fi._ModuleSupport.SeriesNodePickMode.NEAREST_NODE,fi._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:v3}}),this.properties=new si,this.normalizedColorRanges=[],this.colorRangesGroup=new fi._Scene.Group({name:`${this.id}-colorRanges`}),this.colorRangesSelection=fi._Scene.Selection.select(this.colorRangesGroup,fi._Scene.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=fi._Scene.Selection.select(this.annotationGroup,fi._Scene.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(e){return F(this,null,function*(){var i,s;if(!this.properties.isValid()||!this.data||!this.visible)return;const{valueKey:n,targetKey:a}=this.properties,o=(i=this.getCategoryAxis())==null?void 0:i.scale,r=(s=this.getValueAxis())==null?void 0:s.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({xScale:o,yScale:r}),h=[];a!==void 0&&h.push(kC(a,c,{id:"target"})),this.ctx.animationManager.isSkipped()||(this.processedData!==void 0&&h.push(m3(this.processedData)),h.push(f3())),yield this.requestDataModel(e,this.data.slice(0,1),{props:[y3(n,l,{id:"xValue"}),kC(n,c,{id:"value"}),...h],groupByKeys:!0}),this.animationState.transition("updateData")})}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var e,i;return Math.max(...(i=(e=this.getValueAxis())==null?void 0:e.dataDomain.domain)!=null?i:[0])}getSeriesDomain(e){var i,s;const{dataModel:n,processedData:a}=this;if(!n||!a)return[];const{valueKey:o,targetKey:r,valueName:l,scale:c}=this.properties;if(e===this.getCategoryDirection())return[l??o];if(e==((i=this.getValueAxis())==null?void 0:i.direction)){const h=n.getDomain(this,"value","value",a),u=r===void 0?[]:n.getDomain(this,"target","value",a);return[0,(s=c.max)!=null?s:Math.max(...h,...u)]}throw new Error(`unknown direction ${e}`)}getKeys(e){return e===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(e)}createNodeData(){return F(this,null,function*(){var e,i,s,n;const{dataModel:a,processedData:o}=this,{valueKey:r,targetKey:l,widthRatio:c,target:{lengthRatio:h}}=this.properties,u=(e=this.getCategoryAxis())==null?void 0:e.scale,d=(i=this.getValueAxis())==null?void 0:i.scale;if(!r||!a||!o||!u||!d||c===void 0||h===void 0)return;const p=(s=u.bandwidth)!=null?s:NaN,g=this.getMaxValue(),f=a.resolveProcessedDataIndexById(this,"value"),m=l===void 0?NaN:a.resolveProcessedDataIndexById(this,"target"),v={itemId:r,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return v;for(const{datum:b,values:S}of o.data){if(!Array.isArray(b)||b.length<1)continue;S[0][f]<0&&fi._Util.Logger.warnOnce("negative values are not supported, clipping to 0.");const k=(n=this.properties.valueName)!=null?n:this.properties.valueKey,D=Math.min(g,Math.max(0,S[0][f])),T=d.convert(D),I=c*p,N=d.convert(0),C=this.getBarDirection()===fi._ModuleSupport.ChartAxisDirection.X,E={x:p*(1-c)/2,y:Math.min(T,N),width:I,height:Math.abs(N-T)};C&&([E.x,E.y,E.width,E.height]=[E.y,E.x,E.height,E.width]);let O;if(S[0][m]<0&&fi._Util.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&S[0][m]>=0){const w=h*p,R=Math.min(g,S[0][m]);if(!isNaN(R)&&R!==void 0){const G=d.convert(R);let z=p*(1-h)/2,U=z+w,[V,X]=[G,G];C&&([z,U,V,X]=[V,X,z,U]),O={value:R,x1:z,x2:U,y1:V,y2:X}}}const P=K(B({series:this,datum:b[0],xKey:r,xValue:k,yKey:r,yValue:D,cumulativeValue:D,target:O},E),{midPoint:{x:E.x+E.width/2,y:E.y+E.height/2},opacity:1});v.nodeData.push(P)}const y=[...this.getColorRanges()].sort((b,S)=>{var k,D;return((k=b.stop)!=null?k:g)-((D=S.stop)!=null?D:g)});let x=0;return this.normalizedColorRanges=y.map(b=>{var S;const k=Math.min(g,(S=b.stop)!=null?S:1/0),D={color:b.color,start:x,stop:k};return x=k,D}),v})}getColorRanges(){const{colorRanges:e,fill:i,backgroundFill:s}=this.properties;if(e!==void 0&&e.length>0)return e;const n=new ey;try{n.color=HM.mix(HM.fromString(i),HM.fromString(s),.7).toString()}catch{n.color=i}return[n]}getLegendData(e){return[]}getTooltipHtml(e){const{valueKey:i,valueName:s,targetKey:n,targetName:a}=this.properties,o=this.getValueAxis(),{yValue:r,target:{value:l}={value:void 0},datum:c,itemId:h}=e;if(i===void 0||r===void 0||o===void 0)return fi._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const u=(g,f,m)=>{const v=IC(f??g),y=IC(o.formatDatum(m));return`<b>${v}</b>: ${y}`},d=void 0,p=n===void 0||l===void 0?u(i,s,r):`${u(i,s,r)}<br/>${u(n,a,l)}`;return this.properties.tooltip.toTooltipHtml({title:d,content:p,backgroundColor:this.properties.fill},{datum:c,itemId:h,title:d,seriesId:this.id,valueKey:i,valueName:s,targetKey:n,targetName:a,color:void 0})}isLabelEnabled(){return!1}nodeFactory(){return new fi._Scene.Rect}updateDatumSelection(e){return F(this,null,function*(){return this.targetLinesSelection.update(e.nodeData,void 0,void 0),e.datumSelection.update(e.nodeData,void 0,void 0)})}updateDatumNodes(e){return F(this,null,function*(){for(const{node:i}of e.datumSelection){const s=this.properties;UM(AC,i,s)}for(const{node:i,datum:s}of this.targetLinesSelection)if(s.target===void 0)i.visible=!1;else{const n=this.properties.target;UM(["x1","x2","y1","y2"],i,s.target),UM(AC,i,n)}})}updateColorRanges(){return F(this,null,function*(){const e=this.getValueAxis(),i=this.getCategoryAxis();if(!e||!i)return;const[s,n]=[0,Math.max(...i.scale.range)],a=this.getBarDirection()===fi._ModuleSupport.ChartAxisDirection.Y?(o,r)=>{o.x=s,o.y=e.scale.convert(r.stop),o.height=e.scale.convert(r.start)-o.y,o.width=n}:(o,r)=>{o.x=e.scale.convert(r.start),o.y=s,o.height=n,o.width=e.scale.convert(r.stop)-o.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:o,datum:r}of this.colorRangesSelection)a(o,r),o.fill=r.color})}updateNodes(e,i,s){return F(this,null,function*(){yield As(e1.prototype,this,"updateNodes").call(this,e,i,s),yield this.updateColorRanges()})}updateLabelSelection(e){return F(this,null,function*(){return e.labelSelection})}updateLabelNodes(e){return F(this,null,function*(){})}animateEmptyUpdateReady(e){const{datumSelection:i,annotationSelections:s}=e,n=MC(SC(this.isVertical(),this.axes,"normal"));DC(this.id,"nodes",this.ctx.animationManager,[i],n),_C(this,"annotations",this.ctx.animationManager,...s)}animateWaitingUpdateReady(e){var i,s,n;const{datumSelection:a,annotationSelections:o}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff,l=MC(SC(this.isVertical(),this.axes,"normal"));DC(this.id,"nodes",this.ctx.animationManager,[a],l,(h,u)=>x3(u.xValue),r),((n=r?.changed)!=null?n:!0)&&_C(this,"annotations",this.ctx.animationManager,...o)}computeFocusBounds({datumIndex:e,seriesRect:i}){var s;return b3((s=this.contextNodeData)==null?void 0:s.nodeData[e],this.contentGroup,i)}},M3=(Y(),W(H)),_3={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[M3._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},k3={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:S3,tooltipDefaults:{range:"exact"},defaultAxes:[{type:Dh._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:Dh._Theme.POSITION.LEFT},{type:Dh._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:Dh._Theme.POSITION.BOTTOM}],themeTemplate:_3,swapDefaultAxesCondition:t=>t?.direction==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{var s;const{fills:[n],strokes:[a]}=t(e),o=i.get(Dh._Theme.DEFAULT_BACKGROUND_COLOUR),r=(s=Array.isArray(o)?o[0]:o)!=null?s:"white",l=i.get(Dh._Theme.DEFAULT_CROSS_LINES_COLOUR);return{fill:n,stroke:a,target:{stroke:l},backgroundFill:r}}},iy=(Y(),W(H)),D3=(Y(),W(H)),Ll=(Y(),W(H)),I3=(Y(),W(H)),{computeBarFocusBounds:A3,NODE_UPDATE_STATE_TO_PHASE_MAPPING:L3}=I3._ModuleSupport;function LC(t,e){return sy(e)}function TC(t){return{toFn:(s,n,a)=>{if(a==="removed"){const{x:o,yLow:r,yHigh:l,width:c}=sy(n),h=n.itemId==="up"?r:l;return{x:o,y:h,yBottom:h,yHigh:h,yLow:h,width:c,height:0}}return sy(n)},fromFn:(s,n,a)=>{const o=t?"initial":L3[a];if(a==="unknown"||a==="added"&&n!=null){const{x:r,y:l,yLow:c,yHigh:h,width:u,height:d}=sy(n);let p=n.itemId==="up"?c:h;return a==="unknown"&&(p=l+d/2),{x:r,y:p,yBottom:p,yHigh:p,yLow:p,width:u,height:0,phase:o}}return{x:s.x,y:s.y,yBottom:s.yBottom,yHigh:s.yHigh,yLow:s.yLow,width:s.width,height:s.height,phase:o}}}}function sy(t){const{bandwidth:e,scaledValues:{xValue:i,openValue:s,closeValue:n,highValue:a,lowValue:o}}=t,r=Math.min(s,n),l=isNaN(s)?n:Math.max(s,n),c=Math.min(a,o),h=Math.max(a,o);return{x:i,y:r,yBottom:l,yHigh:c,yLow:h,width:e,height:Math.max(l-r,.001)}}function NC(t,e){var i;const s=(i=t.getNodeData())==null?void 0:i.at(e.datumIndex),n=s?{x:s.scaledValues.xValue,y:s.scaledValues.highValue,width:s.bandwidth,height:s.scaledValues.lowValue-s.scaledValues.highValue}:void 0;return A3(n,t.contentGroup,e.seriesRect)}var{motion:OC}=Ll._Scene,{extent:T3,fixNumericExtent:CC,keyProperty:N3,SeriesNodePickMode:EC,SMALLEST_KEY_INTERVAL:O3,valueProperty:ny,diff:C3,animationValidation:E3,convertValuesToScaleByDefs:R3,isFiniteNumber:w3}=Ll._ModuleSupport,{sanitizeHtml:RC,Logger:wC}=Ll._Util,{ContinuousScale:P3}=Ll._Scale,B3=class extends Ll._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},PC=class extends Ll._ModuleSupport.AbstractBarSeries{constructor(t,e){super({moduleCtx:t,pickModes:[EC.NEAREST_BY_MAIN_AXIS_FIRST,EC.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:1,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:e}}),this.NodeEvent=B3}animateEmptyUpdateReady({datumSelection:t}){const e=TC(!0);OC.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],e)}animateWaitingUpdateReady({datumSelection:t}){var e;const{processedData:i}=this,s=(e=i?.reduced)==null?void 0:e.diff,n=TC(!1);OC.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,(a,o)=>String(o.xValue),s)}processData(t){return F(this,null,function*(){var e,i,s;if(!this.properties.isValid()||!this.visible)return;const{xKey:n,openKey:a,closeKey:o,highKey:r,lowKey:l}=this.properties,c=!this.ctx.animationManager.isSkipped(),h=(e=this.getCategoryAxis())==null?void 0:e.scale,u=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:d,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:h,yScale:u}),f=[];c&&(this.processedData&&f.push(C3(this.processedData)),f.push(E3())),a&&f.push(ny(a,g,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{processedData:m}=yield this.requestDataModel(t,this.data,{props:[N3(n,p,{id:"xValue"}),ny(o,g,{id:"closeValue"}),ny(r,g,{id:"highValue"}),ny(l,g,{id:"lowValue"}),...d?[O3]:[],...f]});this.smallestDataInterval=(s=m.reduced)==null?void 0:s.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!(i&&s))return[];const{openKey:a}=this.properties;if(t===this.getBarDirection()){const g=s.getDomain(this,"lowValue","value",i),f=s.getDomain(this,"highValue","value",i),m=a?s.getDomain(this,"openValue","value",i):[],v=s.getDomain(this,"closeValue","value",i);return CC([Math.min(...g,...f,...m,...v),Math.max(...f,...g,...m,...v)],this.getValueAxis())}const{index:o,def:r}=s.resolveProcessedDataDefById(this,"xValue"),l=i.domain.keys[o];if(r.type==="key"&&r.valueType==="category")return l;const c=this.getCategoryAxis(),h=(e=T3(l))!=null?e:[NaN,NaN],u=w3(n)?n:0,d=h[0]+-u,p=h[1]+u;return CC([d,p],c)}createBaseNodeData(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&s))return;const n=[],{xKey:a,highKey:o,lowKey:r}=this.properties,l=e.resolveProcessedDataDefsByIds(this,["xValue","openValue","closeValue","highValue","lowValue"]),{barWidth:c,groupIndex:h}=this.updateGroupScale(i),u=P3.is(i.scale)?c*-.5:0,{groupScale:d,processedData:p}=this,g={itemId:a,nodeData:n,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&p?.data.forEach(({datum:f,keys:m,values:v})=>{const{xValue:y,openValue:x,closeValue:b,highValue:S,lowValue:k}=e.resolveProcessedDataDefsValues(l,{keys:m,values:v}),D=k!=null&&k<=x&&k<=b,T=S!=null&&S>=x&&S>=b;if(!D){wC.warnOnce(`invalid low value for key [${r}] in data element, low value cannot be higher than datum open or close values`);return}if(!T){wC.warnOnce(`invalid high value for key [${o}] in data element, high value cannot be lower than datum open or close values.`);return}const I=R3({defs:l,values:{xValue:y,openValue:x,closeValue:b,highValue:S,lowValue:k},xAxis:i,yAxis:s});I.xValue+=Math.round(d.convert(String(h)))+u;const N=b>x,C=this.getSeriesItemType(N),[E,O]=N?[I.openValue,I.closeValue]:[I.closeValue,I.openValue],P=O-E,w={x:I.xValue+Math.round(c)/2,y:E+P/2};n.push({series:this,itemId:C,datum:f,xKey:a,xValue:y,openValue:x,closeValue:b,highValue:S,lowValue:k,bandwidth:c>=1?c:d.rawBandwidth,scaledValues:I,midPoint:w,aggregatedValue:b})}),g}getSeriesItemType(t){return t?"up":"down"}getItemConfig(t){return this.properties.item[t]}getLegendData(t){var e,i,s,n,a,o,r,l,c;const{id:h,data:u}=this,{xKey:d,yName:p,item:{up:g,down:f},showInLegend:m,legendItemName:v,visible:y}=this.properties;return!m||!u?.length||!d||t!=="category"?[]:[{legendType:"category",id:h,itemId:h,seriesId:h,enabled:y,label:{text:(e=v??p)!=null?e:h},symbols:[{marker:{fill:(i=g.fill)!=null?i:g.stroke,fillOpacity:(s=g.fillOpacity)!=null?s:1,stroke:g.stroke,strokeWidth:(n=g.strokeWidth)!=null?n:1,strokeOpacity:(a=g.strokeOpacity)!=null?a:1,padding:0}},{marker:{fill:(o=f.fill)!=null?o:f.stroke,fillOpacity:(r=f.fillOpacity)!=null?r:1,stroke:f.stroke,strokeWidth:(l=f.strokeWidth)!=null?l:1,strokeOpacity:(c=f.strokeOpacity)!=null?c:1}}],legendItemName:v}]}getTooltipHtml(t){const{xKey:e,openKey:i,closeKey:s,highKey:n,lowKey:a,xName:o,yName:r,openName:l,closeName:c,highName:h,lowName:u,tooltip:d}=this.properties,{datum:p,itemId:g}=t,f=this.getCategoryAxis(),m=this.getValueAxis();if(!f||!m||!this.properties.isValid())return Ll._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const v=k=>k.charAt(0).toUpperCase()+k.substring(1),y=RC(r),b=[[e,o,f],[i,l,m],[n,h,m],[a,u,m],[s,c,m]].map(([k,D,T])=>RC(`${D??v(k)}: ${T.formatDatum(p[k])}`)).join("<br/>"),S=this.getFormattedStyles(t);return d.toTooltipHtml({title:y,content:b,backgroundColor:S.stroke},K(B({seriesId:this.id,highlighted:!1,datum:p},S),{xKey:e,openKey:i,closeKey:s,highKey:n,lowKey:a,xName:o,yName:r,openName:l,closeName:c,highName:h,lowName:u,title:y,color:S.fill,fill:S.fill,itemId:g}))}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){return F(this,null,function*(){var e;const i=(e=t.nodeData)!=null?e:[];return t.datumSelection.update(i)})}updateDatumNodes(t){return F(this,arguments,function*({datumSelection:e,isHighlight:i}){e.each((s,n)=>{const a=this.getActiveStyles(n,i);s.updateDatumStyles(n,a)})})}updateLabelNodes(t){return F(this,null,function*(){})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)})}},cs=(Y(),W(H)),{SceneChangeDetection:Tl,BBox:F3,RedrawType:Nl}=cs._Scene,lo=class extends cs._Scene.Group{constructor(){super(...arguments),this.x=0,this.y=0,this.yBottom=0,this.yHigh=0,this.yLow=0,this.width=0,this.height=0}distanceSquared(t,e){const i=cs._Scene.Selection.selectByClass(this,cs._Scene.Rect,cs._Scene.Line);return cs._ModuleSupport.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(cs._Util.Logger.error("CandlestickBaseGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}render(t){this.updateCoordinates(),super.render(t)}};M([Tl({redraw:Nl.MAJOR})],lo.prototype,"x",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"y",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"yBottom",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"yHigh",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"yLow",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"width",2),M([Tl({redraw:Nl.MAJOR})],lo.prototype,"height",2);var z3=class extends lo{constructor(){super(),this.append([new cs._Scene.Rect({tag:0}),new cs._Scene.Line({tag:1}),new cs._Scene.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:s,yLow:n,width:a,height:o}=this,r=cs._Scene.Selection.select(this,cs._Scene.Rect),[l]=r.selectByTag(0),[c]=r.selectByTag(1),[h]=r.selectByTag(2);if(a===0||o===0){l.visible=!1,c.visible=!1,h.visible=!1;return}l.visible=!0,c.visible=!0,h.visible=!0,l.setProperties({x:t,y:e,width:a,height:o,crisp:!0,clipBBox:new F3(t,e,a,o)});const u=a/2;c.setProperties({y1:Math.round(n+c.strokeWidth/2),y2:i,x:t+u}),h.setProperties({y1:Math.round(s+h.strokeWidth/2),y2:e,x:t+u})}updateDatumStyles(t,e){var i;const{bandwidth:s}=t,{fill:n,fillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h,wick:u={},cornerRadius:d}=e;(i=u.strokeWidth)!=null||(u.strokeWidth=1);const p=cs._Scene.Selection.select(this,cs._Scene.Rect),[g]=p.selectByTag(0),[f]=p.selectByTag(1),[m]=p.selectByTag(2);u.strokeWidth>s&&(u.strokeWidth=s),g.setProperties({fill:n,fillOpacity:a,strokeWidth:r,strokeOpacity:l,stroke:o,lineDash:c,lineDashOffset:h,cornerRadius:d}),f.setProperties(u),m.setProperties(u)}},G3=(Y(),W(H)),{BaseProperties:WM,AbstractBarSeriesProperties:V3,SeriesTooltip:U3,Validate:Ht,COLOR_STRING:YM,FUNCTION:H3,LINE_DASH:BC,OBJECT:Wd,POSITIVE_NUMBER:Yd,RATIO:KM,STRING:Ln}=G3._ModuleSupport,Th=class extends WM{};M([Ht(YM,{optional:!0})],Th.prototype,"stroke",2),M([Ht(Yd)],Th.prototype,"strokeWidth",2),M([Ht(KM)],Th.prototype,"strokeOpacity",2),M([Ht(BC,{optional:!0})],Th.prototype,"lineDash",2),M([Ht(Yd)],Th.prototype,"lineDashOffset",2);var Tn=class extends WM{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Th}};M([Ht(YM,{optional:!0})],Tn.prototype,"fill",2),M([Ht(KM)],Tn.prototype,"fillOpacity",2),M([Ht(YM)],Tn.prototype,"stroke",2),M([Ht(Yd)],Tn.prototype,"strokeWidth",2),M([Ht(KM)],Tn.prototype,"strokeOpacity",2),M([Ht(BC)],Tn.prototype,"lineDash",2),M([Ht(Yd)],Tn.prototype,"lineDashOffset",2),M([Ht(Yd)],Tn.prototype,"cornerRadius",2),M([Ht(Wd)],Tn.prototype,"wick",2);var jM=class extends WM{constructor(){super(...arguments),this.up=new Tn,this.down=new Tn}};M([Ht(Wd)],jM.prototype,"up",2),M([Ht(Wd)],jM.prototype,"down",2);var Oi=class extends V3{constructor(){super(...arguments),this.tooltip=new U3,this.item=new jM}};M([Ht(Ln)],Oi.prototype,"xKey",2),M([Ht(Ln)],Oi.prototype,"openKey",2),M([Ht(Ln)],Oi.prototype,"closeKey",2),M([Ht(Ln)],Oi.prototype,"highKey",2),M([Ht(Ln)],Oi.prototype,"lowKey",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"xName",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"yName",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"openName",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"closeName",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"highName",2),M([Ht(Ln,{optional:!0})],Oi.prototype,"lowName",2),M([Ht(Wd)],Oi.prototype,"tooltip",2),M([Ht(Wd)],Oi.prototype,"item",2),M([Ht(H3,{optional:!0})],Oi.prototype,"itemStyler",2);var{extractDecoratedProperties:W3,mergeDefaults:XM}=D3._ModuleSupport,$M=class extends PC{constructor(t){super(t,LC),this.properties=new Oi}createNodeData(){return F(this,null,function*(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{fill:s,fillOpacity:n,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:h,cornerRadius:u}=this.getItemConfig(i.itemId);return K(B({},i),{fill:s,fillOpacity:n,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:h,cornerRadius:u})});return K(B({},t),{nodeData:e})})}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:s}}=this,{xKey:n,openKey:a,closeKey:o,highKey:r,lowKey:l,itemStyler:c}=this.properties,{fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g,lineDash:f,lineDashOffset:m}=this.getItemConfig(t.itemId);if(c){const v=s.call(c,{datum:t.datum,itemId:t.itemId,seriesId:i,highlighted:e,xKey:n,openKey:a,closeKey:o,highKey:r,lowKey:l,fill:h,fillOpacity:u,stroke:d,strokeWidth:p,strokeOpacity:g,lineDash:f,lineDashOffset:m});if(v)return XM(v,this.getSeriesStyles(t))}return this.getSeriesStyles(t)}nodeFactory(){return new z3}getSeriesStyles(t){const{fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r,wick:l,cornerRadius:c}=t;return{fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r,wick:W3(l),cornerRadius:c}}getActiveStyles(t,e){let i=this.getFormattedStyles(t,e);e&&(i=XM(this.properties.highlightStyle.item,i));const{stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=i;return i.wick=XM(i.wick,{stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}),i}computeFocusBounds(t){return NC(this,t)}};$M.className="CandleStickSeries",$M.type="candlestick";var FC=(Y(),W(H)),Y3={series:{highlightStyle:{item:{strokeWidth:3}}},animation:{enabled:!1},axes:{[FC._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[FC._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},K3={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",instanceConstructor:$M,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:iy._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:iy._Theme.POSITION.LEFT},{type:iy._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:iy._Theme.POSITION.BOTTOM}],themeTemplate:Y3,groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const{fills:n,strokes:a}=t(e);return{item:{up:{fill:"transparent",stroke:a[0]},down:{fill:n[0],stroke:a[0]}}}}return{item:{up:s.up,down:s.down}}}},j3=(Y(),W(H)),ZM=(Y(),W(H)),zC=(Y(),W(H)),X3=(Y(),W(H)),{Logger:$3}=X3._Util;function GC(t,e,i){i||(e=Z3(e));const s=new Map;for(const a of t)s.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let n=0;return s.forEach((a,o)=>{n=Math.max(n,qM(s,e,a,o,-1,[])+qM(s,e,a,o,1,[])+1)}),{links:e,nodeGraph:s,maxPathLength:n}}function VC(t,e,i,s){const n=s.indexOf(e);if(n!==-1){for(let o=n;o<s.length;o+=1)i.add(s[o]);return}s.push(e);const{toNode:a}=e;for(const o of t)o.fromNode===a&&VC(t,o,i,s);s.pop()}function Z3(t){const e=new Set;for(const i of t)VC(t,i,e,[]);return e.size!==0&&$3.warnOnce("Some links formed circular references. These will be removed from the output."),e.size===0?t:t.filter(i=>!e.has(i))}function qM(t,e,i,s,n,a){if(a.includes(s))return 1/0;let o=n===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(o===-1){o=0;const r=n===-1?i.linksBefore:i.linksAfter;for(const l of e){const{fromNode:c,toNode:h}=l,u=n===-1?h.id:c.id,d=n===-1?c.id:h.id,p=s===u?t.get(d):void 0;p!=null&&(r.push({node:p,link:l}),a?.push(s),o=Math.max(o,qM(t,e,p,d,n,a)+1),a?.pop())}n===-1?i.maxPathLengthBefore=o:i.maxPathLengthAfter=o}return o}var{DataModelSeries:q3,DataController:Q3,Validate:J3,ARRAY:tj,keyProperty:ej,valueProperty:ay}=zC._ModuleSupport,{Selection:Ol,Group:Nh,Text:ij}=zC._Scene,QM=class extends q3{constructor(){super(...arguments),this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.nodesDataController=new Q3("standalone"),this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Nh({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Nh({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Nh({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Nh({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Nh({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Nh({name:"nodeGroup"})),this.labelSelection=Ol.select(this.labelGroup,ij),this.linkSelection=Ol.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Ol.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Ol.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Ol.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Ol.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Ol.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){var t;return(t=this.properties.nodes)!=null?t:this._chartNodes}setChartNodes(t){this._chartNodes=t,this.nodes===t&&(this.nodeDataRefresh=!0)}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}processData(t){return F(this,null,function*(){const{nodesDataController:e,data:i,nodes:s}=this;if(i==null||!this.properties.isValid())return;const{fromKey:n,toKey:a,sizeKey:o,idKey:r,labelKey:l}=this.properties,c=s!=null?e.request(this.id,s,{props:[ej(r,void 0,{id:"idValue",includeProperty:!1}),...l!=null?[ay(l,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=this.requestDataModel(t,i,{props:[ay(n,void 0,{id:"fromValue",includeProperty:!1}),ay(a,void 0,{id:"toValue",includeProperty:!1}),...o!=null?[ay(o,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});s!=null&&e.execute();const[u,d]=yield Promise.all([c,h]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData;const{fills:p,strokes:g}=this.properties,f=new Map;if(u==null){const m=d.dataModel.resolveProcessedDataIndexById(this,"fromValue"),v=d.dataModel.resolveProcessedDataIndexById(this,"toValue"),y=x=>{const b=f.size,S=x,k=p[b%p.length],D=g[b%g.length];return{series:this,itemId:void 0,datum:{},type:1,index:b,id:x,label:S,fill:k,stroke:D}};d.processedData.data.forEach(({values:x})=>{const b=x[m],S=x[v];b==null||S==null||(f.has(b)||f.set(b,y(b)),f.has(S)||f.set(S,y(S)))})}else{const m=u.dataModel.resolveProcessedDataIndexById(this,"idValue"),v=l!=null?u.dataModel.resolveProcessedDataIndexById(this,"labelValue"):void 0;u.processedData.data.forEach(({datum:y,keys:x,values:b},S)=>{const k=b[0],D=x[m],T=v!=null?k[v]:void 0,I=p[S%p.length],N=g[S%g.length];f.set(D,{series:this,itemId:void 0,datum:y,type:1,index:S,id:D,label:T,fill:I,stroke:N})})}this.processedNodes=f})}getNodeGraph(t,e,{includeCircularReferences:i}){const{dataModel:s,processedData:n}=this;if(s==null||n==null){const{links:g,nodeGraph:f,maxPathLength:m}=GC(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:f,links:g,maxPathLength:m}}const{sizeKey:a}=this.properties,o=s.resolveProcessedDataIndexById(this,"fromValue"),r=s.resolveProcessedDataIndexById(this,"toValue"),l=a!=null?s.resolveProcessedDataIndexById(this,"sizeValue"):void 0,c=new Map;this.processedNodes.forEach(g=>{const f=t(g);c.set(g.id,f)});const h=[];n.data.forEach(({datum:g,values:f},m)=>{const v=f[o],y=f[r],x=l!=null?f[l]:1,b=c.get(v),S=c.get(y);if(x<=0||b==null||S==null)return;const k=e({series:this,itemId:void 0,datum:g,type:0,index:m,fromNode:b,toNode:S,size:x});h.push(k)});const{links:u,nodeGraph:d,maxPathLength:p}=GC(c.values(),h,i);return this.nodeCount=d.size,this.linkCount=u.length,{nodeGraph:d,links:u,maxPathLength:p}}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(t){return F(this,null,function*(){var e,i,s,n,a,o,r,l;const{seriesRect:c}=t,h={seriesRectWidth:(e=c?.width)!=null?e:0,seriesRectHeight:(i=c?.height)!=null?i:0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==h.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==h.seriesRectHeight)&&(this._nodeDataDependencies=h),yield this.updateSelections();const u=(n=(s=this.contextNodeData)==null?void 0:s.nodeData)!=null?n:[],d=(o=(a=this.contextNodeData)==null?void 0:a.labelData)!=null?o:[];let p=(r=this.ctx.highlightManager)==null?void 0:r.getActiveHighlight();if(p?.series===this&&p.type==null){const{itemId:y}=p;p=y!=null?u.find(x=>x.type===1&&x.id===y):void 0}else p?.series!==this&&(p=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=p!=null&&(l=this.properties.highlightStyle.series.dimOpacity)!=null?l:1,this.labelSelection=yield this.updateLabelSelection({labelData:d,labelSelection:this.labelSelection}),yield this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=yield this.updateLinkSelection({nodeData:u.filter(y=>y.type===0),datumSelection:this.linkSelection}),yield this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=yield this.updateNodeSelection({nodeData:u.filter(y=>y.type===1),datumSelection:this.nodeSelection}),yield this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let g,f,m,v;p?.type===1?(g=u.filter(y=>y.type===0&&(y.toNode===p||y.fromNode===p)),f=g.map(y=>y.fromNode===p?y.toNode:y.fromNode),f.push(p),m=[],v=[p]):p?.type===0?(g=[p],f=[p.fromNode,p.toNode],m=[p],v=[]):(g=[],f=[],m=[],v=[]),this.focusLinkSelection=yield this.updateLinkSelection({nodeData:g,datumSelection:this.focusLinkSelection}),yield this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=yield this.updateNodeSelection({nodeData:f,datumSelection:this.focusNodeSelection}),yield this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=yield this.updateLinkSelection({nodeData:m,datumSelection:this.highlightLinkSelection}),yield this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=yield this.updateNodeSelection({nodeData:v,datumSelection:this.highlightNodeSelection}),yield this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})})}resetAnimation(t){}getSeriesDomain(t){return[]}getLegendData(t){return t!=="category"?[]:Array.from(this.processedNodes.values(),({id:e,label:i,fill:s,stroke:n})=>({legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:!0,label:{text:i??e},symbols:[{marker:{fill:s,fillOpacity:1,stroke:n,strokeWidth:0,strokeOpacity:1}}]}))}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.linkSelection.each((n,a)=>{const o=n.containsPoint(t,e)?0:1/0;o<i&&(i=o,s=a)}),this.nodeSelection.each((n,a)=>{const o=n.distanceSquared(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(t,e){var i;if(t.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:t.index+1,count:this.linkCount,from:t.fromNode.id,to:t.toNode.id,size:t.size,sizeName:(i=this.properties.sizeName)!=null?i:this.properties.sizeKey});if(t.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:t.index+1,count:this.nodeCount,description:e})}};M([J3(tj,{optional:!0,property:"nodes"})],QM.prototype,"_chartNodes",2);var sj=(Y(),W(H)),{Path:nj,ScenePathChangeDetection:sr}=sj._Scene,co=class extends nj{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(t,e,i,s,n,a,o,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-t)*h+t,(s-e)*h+e,(n-o)*h+o,(a-r)*h+r,o,r)}updatePath(){const{path:t,centerX:e,centerY:i,radius:s}=this;let{startAngle1:n,endAngle1:a,startAngle2:o,endAngle2:r}=this;n>o&&([n,o]=[o,n],[a,r]=[r,a]),t.clear();const l=e+s*Math.cos(n),c=i+s*Math.sin(n);t.moveTo(l,c),this.tensionedCurveTo(l,c,e,i,e,i,e+s*Math.cos(r),i+s*Math.sin(r)),t.arc(e,i,s,r,o,!0),this.tensionedCurveTo(e+s*Math.cos(o),i+s*Math.sin(o),e,i,e,i,e+s*Math.cos(a),i+s*Math.sin(a)),t.arc(e,i,s,a,n,!0),t.closePath()}};M([sr()],co.prototype,"centerX",2),M([sr()],co.prototype,"centerY",2),M([sr()],co.prototype,"radius",2),M([sr()],co.prototype,"startAngle1",2),M([sr()],co.prototype,"endAngle1",2),M([sr()],co.prototype,"startAngle2",2),M([sr()],co.prototype,"endAngle2",2),M([sr()],co.prototype,"tension",2);var UC=(Y(),W(H)),{BaseProperties:HC,SeriesTooltip:aj,SeriesProperties:oj,ARRAY:rj,COLOR_STRING:oy,COLOR_STRING_ARRAY:WC,FUNCTION:YC,LINE_DASH:KC,OBJECT:ry,POSITIVE_NUMBER:nr,RATIO:Kd,STRING:ar,Validate:Lt}=UC._ModuleSupport,{Label:lj}=UC._Scene,JM=class extends lj{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};M([Lt(nr)],JM.prototype,"spacing",2),M([Lt(nr)],JM.prototype,"maxWidth",2);var oa=class extends HC{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};M([Lt(oy,{optional:!0})],oa.prototype,"fill",2),M([Lt(Kd)],oa.prototype,"fillOpacity",2),M([Lt(oy,{optional:!0})],oa.prototype,"stroke",2),M([Lt(Kd)],oa.prototype,"strokeOpacity",2),M([Lt(nr)],oa.prototype,"strokeWidth",2),M([Lt(KC)],oa.prototype,"lineDash",2),M([Lt(nr)],oa.prototype,"lineDashOffset",2),M([Lt(Kd)],oa.prototype,"tension",2),M([Lt(YC,{optional:!0})],oa.prototype,"itemStyler",2);var Nn=class extends HC{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};M([Lt(nr)],Nn.prototype,"spacing",2),M([Lt(nr)],Nn.prototype,"width",2),M([Lt(oy,{optional:!0})],Nn.prototype,"fill",2),M([Lt(Kd)],Nn.prototype,"fillOpacity",2),M([Lt(oy,{optional:!0})],Nn.prototype,"stroke",2),M([Lt(Kd)],Nn.prototype,"strokeOpacity",2),M([Lt(nr)],Nn.prototype,"strokeWidth",2),M([Lt(KC)],Nn.prototype,"lineDash",2),M([Lt(nr)],Nn.prototype,"lineDashOffset",2),M([Lt(YC,{optional:!0})],Nn.prototype,"itemStyler",2);var Ci=class extends oj{constructor(){super(...arguments),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fills=[],this.strokes=[],this.label=new JM,this.link=new oa,this.node=new Nn,this.tooltip=new aj}};M([Lt(ar)],Ci.prototype,"fromKey",2),M([Lt(ar)],Ci.prototype,"toKey",2),M([Lt(ar)],Ci.prototype,"idKey",2),M([Lt(ar,{optional:!0})],Ci.prototype,"idName",2),M([Lt(ar,{optional:!0})],Ci.prototype,"labelKey",2),M([Lt(ar,{optional:!0})],Ci.prototype,"labelName",2),M([Lt(ar,{optional:!0})],Ci.prototype,"sizeKey",2),M([Lt(ar,{optional:!0})],Ci.prototype,"sizeName",2),M([Lt(rj,{optional:!0})],Ci.prototype,"nodes",2),M([Lt(WC)],Ci.prototype,"fills",2),M([Lt(WC)],Ci.prototype,"strokes",2),M([Lt(ry)],Ci.prototype,"label",2),M([Lt(ry)],Ci.prototype,"link",2),M([Lt(ry)],Ci.prototype,"node",2),M([Lt(ry)],Ci.prototype,"tooltip",2);var{SeriesNodePickMode:jC,createDatumId:XC,EMPTY_TOOLTIP_CONTENT:cj}=ZM._ModuleSupport,{angleBetween:Oh,normalizeAngle360:hj,isBetweenAngles:$C,sanitizeHtml:ZC,Logger:uj}=ZM._Util,{Sector:dj,Text:t_}=ZM._Scene,ly=t=>t.startAngle+Oh(t.startAngle,t.endAngle)/2,e_=class extends QM{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,pickModes:[jC.NEAREST_NODE,jC.EXACT_SHAPE_MATCH]}),this.properties=new Ci}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new co}nodeFactory(){return new dj}createNodeData(){return F(this,null,function*(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:n,sizeKey:a,label:{spacing:o,maxWidth:r,fontSize:l},node:{width:c,spacing:h}}=this.properties,u=e/2,d=i/2;let p=[];const g=O=>String(O),{nodeGraph:f,links:m}=this.getNodeGraph(O=>{const P=this.getLabelText(this.properties.label,{datum:O.datum,value:O.label,fromKey:s,toKey:n,sizeKey:a},g);return K(B({},O),{label:P,size:0,centerX:u,centerY:d,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN})},O=>K(B({},O),{centerX:u,centerY:d,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let v=0;f.forEach(({datum:O,linksBefore:P,linksAfter:w},R)=>{const G=P.reduce((z,{link:U})=>z+U.size,0)+w.reduce((z,{link:U})=>z+U.size,0);G===0?f.delete(R):(O.size=G,v+=O.size)});let y=0;if(this.isLabelEnabled()){const O=this.properties.label.getFont();let P=0;f.forEach(({datum:w})=>{const{id:R,label:G}=w;if(G==null)return;const z=t_.wrap(G,r,1/0,this.properties.label,"never","ellipsis"),{width:U}=t_.measureText(z,O,"middle","left");P=Math.max(U,P),p.push({id:R,text:z,centerX:u,centerY:d,angle:NaN,radius:NaN})}),y=P+o}const x=f.size;let b=Math.min(e,i)/2-c-y,S=h/b;if(y!==0&&(x*S>=1.5*Math.PI||b<=0)&&(p=[],b=Math.min(e,i)/2-c,S=h/b),x*S>=2*Math.PI||b<=0)return uj.warnOnce("There was insufficient space to display the Chord Series."),{itemId:this.id,nodeData:[],labelData:[]};const k=b,D=b+c,T=Math.max((2*Math.PI-x*S)/v,0);let I=0;f.forEach(({datum:O})=>{O.innerRadius=k,O.outerRadius=D,O.startAngle=I,O.endAngle=I+O.size*T,I=O.endAngle+S;const P=(O.innerRadius+O.outerRadius)/2,w=ly(O);O.midPoint={x:O.centerX+P*Math.cos(w),y:O.centerY+P*Math.sin(w)}});const N=[];f.forEach(({datum:O,linksBefore:P,linksAfter:w})=>{const R=ly(O),G=[...P.map(U=>({link:U.link,distance:Oh(ly(U.node.datum),R),after:!1})),...w.map(U=>({link:U.link,distance:Oh(ly(U.node.datum),R),after:!0}))];let z=O.startAngle;G.sort((U,V)=>U.distance-V.distance).forEach(({link:U,after:V})=>{const X=U.size*T;V?(U.startAngle1=z,U.endAngle1=z+X):(U.startAngle2=z,U.endAngle2=z+X),z+=U.size*T}),N.push(O)}),m.forEach(O=>{O.radius=b;const P=O.startAngle1+Oh(O.startAngle1,O.endAngle1)/2,w=O.startAngle2+Oh(O.startAngle2,O.endAngle2)/2,R=b*Math.cos(P),G=b*Math.sin(P),z=b*Math.cos(w),U=b*Math.sin(w);O.midPoint={x:O.centerX+(R+z)*.125,y:O.centerY+(G+U)*.125},N.push(O)}),p.forEach(O=>{var P;const w=(P=f.get(O.id))==null?void 0:P.datum;w!=null&&(O.radius=D+o,O.angle=hj(w.startAngle+Oh(w.startAngle,w.endAngle)/2))}),p.sort((O,P)=>O.angle-P.angle);let C=1/0,E=-1/0;return p=p.filter(O=>{const P=l*t_.defaultLineHeightRatio,w=Math.atan2(P/2,O.radius),R=O.angle-w,G=O.angle+w;return $C(C,R,G)||$C(E,R,G)?!1:(C=Math.min(R,C),E=Math.max(G,E),!0)}),{itemId:t,nodeData:N,labelData:p}})}updateLabelSelection(t){return F(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{text:l,centerX:c,centerY:h,radius:u,angle:d})=>{r.visible=!0,r.translationX=c+u*Math.cos(d),r.translationY=h+u*Math.sin(d),r.text=l,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textBaseline="middle",Math.cos(d)>=0?(r.textAlign="left",r.rotation=d):(r.textAlign="right",r.rotation=d-Math.PI)})})}updateNodeSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>XC([e.type,e.id]))})}updateNodeNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,properties:n,ctx:{callbackCache:a}}=this,{fromKey:o,toKey:r,sizeKey:l}=this.properties,{fill:c,fillOpacity:h,stroke:u,strokeOpacity:d,lineDash:p,lineDashOffset:g,itemStyler:f}=n.node,m=i?n.highlightStyle.item:void 0,v=this.getStrokeWidth(n.node.strokeWidth);e.each((y,x)=>{var b,S,k,D,T,I,N,C,E,O,P,w,R,G;const z=c??x.fill,U=u??x.stroke;let V;if(f!=null){const{label:X,size:j}=x;V=a.call(f,{seriesId:s,datum:x.datum,label:X,size:j,fromKey:o,toKey:r,sizeKey:l,fill:z,fillOpacity:h,strokeOpacity:d,stroke:U,strokeWidth:v,lineDash:p,lineDashOffset:g,highlighted:i})}y.centerX=x.centerX,y.centerY=x.centerY,y.innerRadius=x.innerRadius,y.outerRadius=x.outerRadius,y.startAngle=x.startAngle,y.endAngle=x.endAngle,y.fill=(S=(b=m?.fill)!=null?b:V?.fill)!=null?S:z,y.fillOpacity=(D=(k=m?.fillOpacity)!=null?k:V?.fillOpacity)!=null?D:h,y.stroke=(I=(T=m?.stroke)!=null?T:V?.stroke)!=null?I:U,y.strokeOpacity=(C=(N=m?.strokeOpacity)!=null?N:V?.strokeOpacity)!=null?C:d,y.strokeWidth=(O=(E=m?.strokeWidth)!=null?E:V?.strokeWidth)!=null?O:v,y.lineDash=(w=(P=m?.lineDash)!=null?P:V?.lineDash)!=null?w:p,y.lineDashOffset=(G=(R=m?.lineDashOffset)!=null?R:V?.lineDashOffset)!=null?G:g,y.inset=y.strokeWidth/2})})}updateLinkSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>XC([e.type,e.index,e.fromNode.id,e.toNode.id]))})}updateLinkNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,properties:n,ctx:{callbackCache:a}}=this,{fromKey:o,toKey:r,sizeKey:l}=n,{fill:c,fillOpacity:h,stroke:u,strokeOpacity:d,lineDash:p,lineDashOffset:g,tension:f,itemStyler:m}=n.link,v=i?n.highlightStyle.item:void 0,y=this.getStrokeWidth(n.link.strokeWidth);e.each((x,b)=>{var S,k,D,T,I,N,C,E,O,P,w,R,G,z,U;const V=c??b.fromNode.fill,X=u??b.fromNode.stroke;let j;m!=null&&(j=a.call(m,{seriesId:s,datum:b.datum,fromKey:o,toKey:r,sizeKey:l,fill:V,fillOpacity:h,strokeOpacity:d,stroke:X,strokeWidth:y,lineDash:p,lineDashOffset:g,tension:f,highlighted:i})),x.centerX=b.centerX,x.centerY=b.centerY,x.radius=b.radius,x.startAngle1=b.startAngle1,x.endAngle1=b.endAngle1,x.startAngle2=b.startAngle2,x.endAngle2=b.endAngle2,x.fill=(k=(S=v?.fill)!=null?S:j?.fill)!=null?k:V,x.fillOpacity=(T=(D=v?.fillOpacity)!=null?D:j?.fillOpacity)!=null?T:h,x.stroke=(N=(I=v?.stroke)!=null?I:j?.stroke)!=null?N:X,x.strokeOpacity=(E=(C=v?.strokeOpacity)!=null?C:j?.strokeOpacity)!=null?E:d,x.strokeWidth=(P=(O=v?.strokeWidth)!=null?O:j?.strokeWidth)!=null?P:y,x.lineDash=(R=(w=v?.lineDash)!=null?w:j?.lineDash)!=null?R:p,x.lineDashOffset=(z=(G=v?.lineDashOffset)!=null?G:j?.lineDashOffset)!=null?z:g,x.tension=(U=j?.tension)!=null?U:f})})}resetAnimation(t){}getTooltipHtml(t){var e,i,s,n,a,o,r,l;const{id:c,processedData:h,ctx:{callbackCache:u},properties:d}=this;if(!h||!d.isValid())return cj;const{fromKey:p,toKey:g,sizeKey:f,sizeName:m,tooltip:v}=d,{datum:y,itemId:x}=t;let b;const S=[];let k;if(t.type===0){const{fillOpacity:I,strokeOpacity:N,strokeWidth:C,lineDash:E,lineDashOffset:O,tension:P,itemStyler:w}=d.link,{fromNode:R,toNode:G,size:z}=t;b=`${(e=R.label)!=null?e:R.id} - ${(i=G.label)!=null?i:G.id}`,f!=null&&S.push(ZC(`${m??f}: `+z)),k=(s=d.link.fill)!=null?s:R.fill;const U=(n=d.link.stroke)!=null?n:R.stroke;let V;w!=null&&(V=u.call(w,{seriesId:c,datum:y.datum,fromKey:p,toKey:g,sizeKey:f,fill:k,fillOpacity:I,strokeOpacity:N,stroke:U,strokeWidth:C,lineDash:E,lineDashOffset:O,tension:P,highlighted:!0})),k=(a=V?.fill)!=null?a:k}else{const{fillOpacity:I,strokeOpacity:N,strokeWidth:C,lineDash:E,lineDashOffset:O,itemStyler:P}=d.node,{id:w,label:R,size:G}=t;b=R??w,f!=null&&S.push(ZC(`${m??f}: `+G)),k=(o=d.link.fill)!=null?o:t.fill;const z=(r=d.link.stroke)!=null?r:t.stroke;let U;P!=null&&(U=u.call(P,{seriesId:c,datum:y.datum,label:R,size:G,fromKey:p,toKey:g,sizeKey:f,fill:k,fillOpacity:I,strokeOpacity:N,stroke:z,strokeWidth:C,lineDash:E,lineDashOffset:O,highlighted:!0})),k=(l=U?.fill)!=null?l:t.fill}const D=S.join("<br>"),T=k;return v.toTooltipHtml({title:b,content:D,backgroundColor:T},B({seriesId:c,datum:y,title:b,color:T,itemId:x,fromKey:p,toKey:g,sizeKey:f,sizeName:m},this.getModuleTooltipParams()))}getLabelData(){return[]}computeFocusBounds({datumIndex:t}){var e;const i=(e=this.contextNodeData)==null?void 0:e.nodeData[t];if(i?.type===1){for(const s of this.nodeSelection)if(s.datum===i)return s.node;return}else if(i?.type===0){for(const s of this.linkSelection)if(s.datum===i)return s.node;return}}};e_.className="ChordSeries",e_.type="chord";var{DEFAULT_FONT_FAMILY:pj,DEFAULT_LABEL_COLOUR:gj}=j3._Theme,fj={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",tooltipDefaults:{range:"exact"},instanceConstructor:e_,themeTemplate:{series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:pj,color:gj,spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0,tension:.4}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){const{fills:i,strokes:s}=t(e);return{fills:i,strokes:s}}},Ch=(Y(),W(H)),Cl=(Y(),W(H)),i_=(Y(),W(H)),{Validate:cy,NUMBER:qC,TEXT_WRAP:mj,OVERFLOW_STRATEGY:yj}=i_._ModuleSupport,{Logger:vj}=i_._Util,{Text:El,Label:xj}=i_._Scene,jd=class extends xj{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(t){return Math.ceil(t*El.defaultLineHeightRatio)}};M([cy(mj)],jd.prototype,"wrapping",2),M([cy(yj)],jd.prototype,"overflowStrategy",2),M([cy(qC,{optional:!0})],jd.prototype,"minimumFontSize",2);var Ks=class extends jd{constructor(){super(...arguments),this.spacing=0}};M([cy(qC)],Ks.prototype,"spacing",2);var Xd=class extends jd{};function bj(t,e){const{fontSize:i,minimumFontSize:s=i}=t,{fontSize:n,minimumFontSize:a=n}=e,o=i-s,r=n-a;let l=t.fontSize,c=e.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:n}];for(;l>s||c>a;){const u=o>0?(l-s)/o:-1,d=r>0?(c-a)/r:-1;u>d?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function QC(t,e,i){if(t>e)return;let s=t,n=e,a;for(;n>=s;){const o=(n+s)/2|0,r=i(o);r==null?n=o-1:(a=r,s=o+1)}return a}function Sj(t,e,i,s,{padding:n},a){var o,r;const{spacing:l}=e,c=2*n,h=2*n+l,u=((o=e.minimumFontSize)!=null?o:e.fontSize)+((r=s.minimumFontSize)!=null?r:s.fontSize);if(u>a(u+h,!1).height-h)return;const d=bj(e,s),p=new El;p.setFont(e);const g={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},f=new El;f.setFont(s);const m={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let v,y;return QC(0,d.length-1,x=>{const{labelFontSize:b,secondaryLabelFontSize:S}=d[x],k=x===0,D=Ks.lineHeight(b),T=Xd.lineHeight(S),I=a(D+T+h,k),N=I.width-c,C=I.height-h;if(D+T>C)return;if(v==null||v.fontSize!==b){g.fontSize=b;const O=El.wrapLines(t,N,C,g,e.wrapping,k?e.overflowStrategy:"hide");if(O==null)v=void 0;else{const P=O.join(`
`);p.text=P,p.fontSize=b,p.lineHeight=b;const w=p.computeBBox().width,R=O.length*D;v={text:P,fontSize:b,lineHeight:D,width:w,height:R}}}if(v==null||v.width>N||v.height>C)return;if(y==null||y.fontSize!==S){m.fontSize=S;const O=El.wrapLines(i,N,C,m,s.wrapping,k?s.overflowStrategy:"hide");if(O==null)y=void 0;else{const P=O.join(`
`);f.text=P,f.fontSize=S,f.lineHeight=T;const w=f.computeBBox().width,R=O.length*T;y={text:P,fontSize:S,lineHeight:T,width:w,height:R}}}if(y==null)return;const E=v.height+y.height;if(!(y.width>N||E>C))return{width:Math.max(v.width,y.width),height:E+l,meta:I.meta,label:v,secondaryLabel:y}})}function s_(t,e,{padding:i},s){var n;const a=2*i,o=Math.min((n=e.minimumFontSize)!=null?n:e.fontSize,e.fontSize),r=new El;r.setFont(e);const l={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return QC(o,e.fontSize,c=>{const h=Ks.lineHeight(c),u=c===o,d=s(h+a,u),p=d.width-a,g=d.height-a;if(h>g)return;l.fontSize=c;const f=El.wrapLines(t,p,g,l,e.wrapping,u?e.overflowStrategy:"hide");if(f==null)return;const m=f.join(`
`);r.text=m,r.fontSize=c,r.lineHeight=h;const v=r.computeBBox(),y=r.computeBBox().width,x=h*f.length;if(!(v.width>p||x>g))return[{text:m,fontSize:c,lineHeight:h,width:y,height:x},d.meta]})}function JC(t){return t?.minimumFontSize!=null&&t?.fontSize&&t?.minimumFontSize>t?.fontSize}function n_(t,e,i,s,n,a){const o=e.enabled?t:void 0,r=s.enabled?i:void 0;(JC(e)||JC(s))&&vj.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;o!=null&&r!=null&&(l=Sj(o,e,r,s,n,a));let c;if(l==null&&o!=null&&(c=s_(o,e,n,a)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let h;if(l==null&&o==null&&r!=null&&(h=s_(r,s,n,a)),h!=null){const[u,d]=h;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}var Mj=(Y(),W(H)),{CartesianSeriesProperties:_j,SeriesTooltip:kj,Validate:mi,AND:Dj,ARRAY:Ij,COLOR_STRING:Aj,COLOR_STRING_ARRAY:Lj,FUNCTION:Tj,OBJECT:tE,POSITIVE_NUMBER:eE,RATIO:Nj,STRING:Rl,TEXT_ALIGN:Oj,VERTICAL_ALIGN:Cj}=Mj._ModuleSupport,ni=class extends _j{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Ks,this.tooltip=new kj}};M([mi(Rl,{optional:!0})],ni.prototype,"title",2),M([mi(Rl)],ni.prototype,"xKey",2),M([mi(Rl)],ni.prototype,"yKey",2),M([mi(Rl,{optional:!0})],ni.prototype,"colorKey",2),M([mi(Rl,{optional:!0})],ni.prototype,"xName",2),M([mi(Rl,{optional:!0})],ni.prototype,"yName",2),M([mi(Rl,{optional:!0})],ni.prototype,"colorName",2),M([mi(Dj(Lj,Ij.restrict({minLength:1})))],ni.prototype,"colorRange",2),M([mi(Aj,{optional:!0})],ni.prototype,"stroke",2),M([mi(Nj,{optional:!0})],ni.prototype,"strokeOpacity",2),M([mi(eE,{optional:!0})],ni.prototype,"strokeWidth",2),M([mi(Oj)],ni.prototype,"textAlign",2),M([mi(Cj)],ni.prototype,"verticalAlign",2),M([mi(eE)],ni.prototype,"itemPadding",2),M([mi(Tj,{optional:!0})],ni.prototype,"itemStyler",2),M([mi(tE)],ni.prototype,"label",2),M([mi(tE)],ni.prototype,"tooltip",2);var{SeriesNodePickMode:iE,computeBarFocusBounds:Ej,getMissCount:Rj,valueProperty:a_,ChartAxisDirection:ra,DEFAULT_CARTESIAN_DIRECTION_KEYS:wj,DEFAULT_CARTESIAN_DIRECTION_NAMES:Pj}=Cl._ModuleSupport,{Rect:Bj,PointerEvents:Fj}=Cl._Scene,{ColorScale:zj}=Cl._Scale,{sanitizeHtml:Eh,Logger:Gj}=Cl._Util,Vj=class extends Cl._ModuleSupport.CartesianSeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.colorKey=s.properties.colorKey}},Uj={left:-.5,center:0,right:-.5},Hj={top:-.5,middle:0,bottom:-.5},o_=class extends Cl._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:wj,directionNames:Pj,pickModes:[iE.NEAREST_NODE,iE.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new ni,this.NodeEvent=Vj,this.colorScale=new zj}processData(t){return F(this,null,function*(){var e,i,s;const n=this.axes[ra.X],a=this.axes[ra.Y];if(!n||!a||!this.properties.isValid()||!((e=this.data)!=null&&e.length))return;const{xKey:o,yKey:r,colorRange:l,colorKey:c}=this.properties,h=(i=this.axes[ra.X])==null?void 0:i.scale,u=(s=this.axes[ra.Y])==null?void 0:s.scale,{xScaleType:d,yScaleType:p}=this.getScaleInformation({xScale:h,yScale:u}),g=this.colorScale.type,{dataModel:f,processedData:m}=yield this.requestDataModel(t,this.data,{props:[a_(o,d,{id:"xValue"}),a_(r,p,{id:"yValue"}),...c?[a_(c,g,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const v=f.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=m.domain.values[v],this.colorScale.range=l,this.colorScale.update()}})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.data.length,a=Rj(this,i.defs.values[s].missing);return!(n===0||n===a)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===ra.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}createNodeData(){return F(this,null,function*(){var t,e,i,s,n,a,o;const{data:r,visible:l,axes:c,dataModel:h}=this,u=c[ra.X],d=c[ra.Y];if(!(r&&h&&l&&u&&d))return;if(u.type!=="category"||d.type!=="category"){Gj.warnOnce(`Heatmap series expected axes to have "category" type, but received "${u.type}" and "${d.type}" instead.`);return}const{xKey:p,xName:g,yKey:f,yName:m,colorKey:v,colorName:y,textAlign:x,verticalAlign:b,itemPadding:S,colorRange:k,label:D}=this.properties,T=h.resolveProcessedDataIndexById(this,"xValue"),I=h.resolveProcessedDataIndexById(this,"yValue"),N=v?h.resolveProcessedDataIndexById(this,"colorValue"):void 0,C=u.scale,E=d.scale,O=((t=C.bandwidth)!=null?t:0)/2,P=((e=E.bandwidth)!=null?e:0)/2,w=this.isColorScaleValid(),R=[],G=[],z=(i=C.bandwidth)!=null?i:10,U=(s=E.bandwidth)!=null?s:10,V=(z-2*S)*Uj[x],X=(U-2*S)*Hj[b],j=()=>({width:z,height:U,meta:null});for(const{values:tt,datum:ct}of(a=(n=this.processedData)==null?void 0:n.data)!=null?a:[]){const st=tt[T],$=tt[I],Q=C.convert(st)+O,J=E.convert($)+P,it=tt[N??-1],ht=w&&it!=null?this.colorScale.convert(it):k[0],vt=it==null?void 0:this.getLabelText(D,{value:it,datum:ct,colorKey:v,colorName:y,xKey:p,yKey:f,xName:g,yName:m}),dt=n_(vt,this.properties.label,void 0,this.properties.label,{padding:S},j),lt={x:Q,y:J,size:0};if(R.push({series:this,itemId:f,yKey:f,xKey:p,xValue:st,yValue:$,colorValue:it,datum:ct,point:lt,width:z,height:U,fill:ht,midPoint:{x:Q,y:J},missing:it==null}),dt?.label!=null){const{text:bt,fontSize:Dt,lineHeight:$t,height:It}=dt.label,{fontStyle:Ne,fontFamily:Zt,fontWeight:hs,color:Zi}=this.properties.label,ga=lt.x+V*(z-2*S),jh=lt.y+X*(U-2*S)-(dt.height-It)*.5;G.push({series:this,itemId:f,datum:ct,text:bt,fontSize:Dt,lineHeight:$t,fontStyle:Ne,fontFamily:Zt,fontWeight:hs,color:Zi,textAlign:x,verticalAlign:b,x:ga,y:jh})}}return{itemId:(o=this.properties.yKey)!=null?o:this.id,nodeData:R,labelData:G,scales:this.calculateScaling(),visible:this.visible}})}nodeFactory(){return new Bj}updateDatumSelection(t){return F(this,null,function*(){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)})}updateDatumNodes(t){return F(this,null,function*(){var e,i,s,n,a,o;const{isHighlight:r}=t,{id:l,ctx:{callbackCache:c},properties:h}=this,{xKey:u,yKey:d,colorKey:p,itemStyler:g}=h,f=r?h.highlightStyle.item:void 0,m=(e=f?.fillOpacity)!=null?e:1,v=(i=f?.stroke)!=null?i:h.stroke,y=(s=f?.strokeWidth)!=null?s:this.getStrokeWidth(h.strokeWidth),x=(a=(n=f?.strokeOpacity)!=null?n:h.strokeOpacity)!=null?a:1,b=this.axes[ra.X],[S,k]=(o=b?.visibleRange)!=null?o:[],T=!(S!==0||k!==1);t.datumSelection.each((I,N)=>{var C,E,O,P,w,R;const{datum:G,point:z,width:U,height:V}=N,X=(C=f?.fill)!=null?C:N.fill;let j;g&&(j=c.call(g,{datum:G,fill:X,fillOpacity:m,stroke:v,strokeOpacity:x,strokeWidth:y,highlighted:r,xKey:u,yKey:d,colorKey:p,seriesId:l})),I.crisp=T,I.x=Math.floor(z.x-U/2),I.y=Math.floor(z.y-V/2),I.width=Math.ceil(U),I.height=Math.ceil(V),I.fill=(E=j?.fill)!=null?E:X,I.fillOpacity=(O=j?.fillOpacity)!=null?O:m,I.stroke=(P=j?.stroke)!=null?P:v,I.strokeWidth=(w=j?.strokeWidth)!=null?w:y,I.strokeOpacity=(R=j?.strokeOpacity)!=null?R:x})})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t,{enabled:s}=this.properties.label,n=s?e:[];return i.update(n)})}updateLabelNodes(t){return F(this,null,function*(){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=Fj.None})})}getTooltipHtml(t){var e,i,s;const n=this.axes[ra.X],a=this.axes[ra.Y];if(!this.properties.isValid()||!n||!a)return Cl._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:o,yKey:r,colorKey:l,xName:c,yName:h,colorName:u,stroke:d,strokeWidth:p,strokeOpacity:g=1,colorRange:f,itemStyler:m,tooltip:v}=this.properties,{colorScale:y,id:x,ctx:{callbackCache:b}}=this,{datum:S,xValue:k,yValue:D,colorValue:T,itemId:I}=t,N=this.isColorScaleValid()?y.convert(T):f[0];let C;m&&(C=b.call(m,{datum:S,xKey:o,yKey:r,colorKey:l,fill:N,fillOpacity:1,stroke:d,strokeWidth:p,strokeOpacity:g,highlighted:!1,seriesId:x}));const E=(i=(e=C?.fill)!=null?e:N)!=null?i:"gray",O=(s=this.properties.title)!=null?s:h,P=Eh(n.formatDatum(k)),w=Eh(a.formatDatum(D));let R=`<b>${Eh(c??o)}</b>: ${P}<br><b>${Eh(h??r)}</b>: ${w}`;return l&&(R=`<b>${Eh(u??l)}</b>: ${Eh(T)}<br>`+R),v.toTooltipHtml({title:O,content:R,backgroundColor:E},{seriesId:x,datum:S,xKey:o,yKey:r,xName:c,yName:h,title:O,color:E,colorKey:l,colorName:u,itemId:I})}getLegendData(t){var e;return t!=="gradient"||!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;const s=(i=this.contextNodeData)==null?void 0:i.nodeData[t];if(s===void 0)return;const{width:n,height:a,midPoint:o}=s,r={x:o.x-n/2,y:o.y-a/2,width:n,height:a};return Ej(r,this.contentGroup,e)}};o_.className="HeatmapSeries",o_.type="heatmap";var r_=(Y(),W(H)),Wj={series:{label:{enabled:!1,color:r_._Theme.DEFAULT_LABEL_COLOUR,fontSize:r_._Theme.FONT_SIZE.SMALL,fontFamily:r_._Theme.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},Yj={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:o_,tooltipDefaults:{range:"exact"},defaultAxes:[{type:Ch._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ch._Theme.POSITION.LEFT},{type:Ch._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ch._Theme.POSITION.BOTTOM}],themeTemplate:Wj,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:s})=>{var n;const a=s.get(Ch._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),o=s.get(Ch._Theme.DEFAULT_BACKGROUND_COLOUR),r=(n=Array.isArray(o)?o[0]:o)!=null?n:"white",{fills:l,strokes:c}=t(e);return{stroke:i==="inbuilt"?r:c[0],colorRange:i==="inbuilt"?a:[l[0],l[1]]}}},Kj=(Y(),W(H)),$d={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer"},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},hy=(Y(),W(H)),jj=(Y(),W(H)),Xj=1e-9;function sE(t,e,i,s){const[n,a]=t,[o,r]=e,l=o-n,c=r-a,h=l*l+c*c;let u,d;if(Math.abs(h)<Xj)u=n,d=a;else{let f=((i-n)*l+(s-a)*c)/h;f=Math.max(0,Math.min(1,f)),u=n+f*(o-n),d=a+f*(r-a)}const p=i-u,g=s-d;return p*p+g*g}function nE(t,e,i){let s=1/0,n=t[t.length-1];for(const a of t)s=Math.min(s,sE(n,a,e,i)),n=a;return Math.sqrt(s)}function l_(t){let[e,i]=t[0],s=0;for(let n=1;n<t.length;n+=1){const[a,o]=t[n],r=Math.hypot(a-e,o-i);s+=r,e=a,i=o}return s}function uy(t){if(t.length===0)return;const e=l_(t)/2;let[i,s]=t[0],n=0;for(let a=1;a<t.length;a+=1){const[o,r]=t[a],l=Math.hypot(o-i,r-s),c=n+l;if(c>e){const h=(e-n)/l,u=[i+(o-i)*h,s+(r-s)*h],d=Math.atan2(r-s,o-i);return{point:u,angle:d}}n=c,i=o,s=r}}var $j=(Y(),W(H)),{LonLatBBox:Zj}=$j._ModuleSupport;function Zd(t,e,i,s,n){return t==null?t=new Zj(e,i,s,n):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,s),t.lat1=Math.max(t.lat1,n)),t}var qj=(t,e,i)=>{let s=t,n=s;for(const a of e)if(s==null||i(s.value,a)>0)s={value:a,next:s},n=s;else{for(n=n;n.next!=null&&i(n.next.value,a)<=0;)n=n.next;n.next={value:a,next:n.next}}return s};function wl(t,e){return t.forEach(i=>{const[s,n]=i;e=Zd(e,s,n,s,n)}),e}function Qj(t){if(t.length===0)return;let e=0,i=0,s=0,[n,a]=t[t.length-1];for(const[o,r]of t){const l=n*r-o*a;s+=l,e+=(n+o)*l,i+=(a+r)*l,n=o,a=r}return s*=3,[e/s,i/s]}function dy(t,e,i){let s=!1,n=1/0;for(const a of t){let o=a[a.length-1],[r,l]=o;for(const c of a){const[h,u]=c;u>i!=l>i&&e<(r-h)*(i-u)/(l-u)+h&&(s=!s),n=Math.min(n,sE(o,c,e,i)),o=c,r=h,l=u}}return(s?-1:1)*Math.sqrt(n)}var{Path:Jj,ExtendedPath2D:t5,BBox:e5,ScenePathChangeDetection:aE}=jj._Scene,Rh=class extends Jj{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new t5}computeBBox(){var t;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),(t=this.bbox)==null?void 0:t.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||({x:t,y:e}=this.transformPoint(t,e),!this.getCachedBBox().containsPoint(t,e))?!1:this.geometryDistance(i,t,e)<=0}distanceToPoint(t,e){const{projectedGeometry:i}=this;return{x:t,y:e}=this.transformPoint(t,e),i!=null?this.geometryDistance(i,t,e):1/0}geometryDistance(t,e,i){const{renderMode:s,strokeWidth:n}=this,a=(s&1)!==0,o=(s&2)!==0,r=Math.max(n/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(dy(c,e,i),0)),1/0):1/0;case"Polygon":return a?Math.max(dy(t.coordinates,e,i),0):1/0;case"MultiLineString":return o?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(nE(c,e,i)-r,0)),1/0):1/0;case"LineString":return o?Math.max(nE(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:s,strokePath:n}=this,a=(i&1)!==0,o=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":a&&t.coordinates.forEach(r=>{e=this.drawPolygon(s,r,e)});break;case"Polygon":a&&(e=this.drawPolygon(s,t.coordinates,e));break;case"LineString":o&&(e=this.drawLineString(n,t.coordinates,e,!1));break;case"MultiLineString":o&&t.coordinates.forEach(r=>{e=this.drawLineString(n,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let s=1;s<e.length;s+=1){const n=e[s];this.drawLineString(t,n,void 0,!0)}return i}drawLineString(t,e,i,s){if(e.length<2)return i;const n=s?e.length-1:e.length;for(let a=0;a<n;a+=1){const[o,r]=e[a];if(a===0?t.moveTo(o,r):t.lineTo(o,r),i==null)i=new e5(o,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,u=c+i.height;i.x=Math.min(l,o),i.y=Math.min(c,r),i.width=Math.max(h,o)-i.x,i.height=Math.max(u,r)-i.y}}return s&&t.closePath(),i}};M([aE()],Rh.prototype,"projectedGeometry",2),M([aE()],Rh.prototype,"renderMode",2);function wh(t,e){if(t.bbox!=null){const[i,s,n,a]=t.bbox;return e=Zd(e,i,s,n,a),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=wh(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=wl(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=wl(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=wl(i,e)});break;case"LineString":e=wl(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[s,n]=i;e=Zd(e,s,n,s,n)});break;case"Point":{const[i,s]=t.coordinates;e=Zd(e,i,s,i,s);break}}return e}function py(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(s=>{const n=py(s);if(n==null)return;const a=wl(n[0],void 0);if(a==null)return;const o=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(e==null||o>e)&&(e=o,i=n)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(s=>{const n=wl(s[0],void 0);if(n==null)return;const a=Math.abs(n.lat1-n.lat0)*Math.abs(n.lon1-n.lon0);(e==null||a>e)&&(e=a,i=s)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function gy(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(s=>{const n=gy(s);if(n==null)return;const a=l_(n);a!=null&&(e==null||a>e)&&(e=a,i=n)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(s=>{const n=l_(s);n>e&&(e=n,i=s)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function c_(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>c_(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function or(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>or(i,e))};case"Polygon":return{type:"Polygon",coordinates:h_(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:i5(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:h_(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:u_(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:u_(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function i5(t,e){return t.map(i=>h_(i,e))}function h_(t,e){return t.map(i=>u_(i,e))}function u_(t,e){return t.map(i=>e.convert(i))}var oE=(Y(),W(H));function rE(t){return Array.isArray(t)&&t.length>=2&&t.every(oE._ModuleSupport.isFiniteNumber)}function fy(t){return Array.isArray(t)&&t.length>=2&&t.every(rE)}var lE=.001;function s5(t){return Math.abs(t[0][0]-t[t.length-1][0])<lE&&Math.abs(t[0][1]-t[t.length-1][1])<lE}function cE(t){return Array.isArray(t)&&t.every(fy)&&t.every(s5)}function hE(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(hE);case"MultiPolygon":return Array.isArray(i)&&i.every(cE);case"Polygon":return cE(i);case"MultiLineString":return Array.isArray(i)&&i.every(fy);case"LineString":return fy(i);case"MultiPoint":return fy(i);case"Point":return rE(i)}}function n5(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&hE(t.geometry)}function a5(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(n5)}var la=oE._ModuleSupport.predicateWithMessage(a5,"a GeoJSON object"),o5=(Y(),W(H)),{COLOR_STRING:r5,LINE_DASH:l5,OBJECT:c5,POSITIVE_NUMBER:uE,RATIO:h5,Validate:Pl,SeriesProperties:u5,SeriesTooltip:d5}=o5._ModuleSupport,rr=class extends u5{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new d5}};M([Pl(la,{optional:!0})],rr.prototype,"topology",2),M([Pl(r5)],rr.prototype,"stroke",2),M([Pl(h5)],rr.prototype,"strokeOpacity",2),M([Pl(uE)],rr.prototype,"strokeWidth",2),M([Pl(l5)],rr.prototype,"lineDash",2),M([Pl(uE)],rr.prototype,"lineDashOffset",2),M([Pl(c5)],rr.prototype,"tooltip",2);var{createDatumId:p5,DataModelSeries:g5,SeriesNodePickMode:f5,Validate:m5}=hy._ModuleSupport,{Group:y5,Selection:v5,PointerEvents:x5}=hy._Scene,{Logger:b5}=hy._Util,my=class extends g5{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[f5.EXACT_SHAPE_MATCH]}),this.properties=new rr,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new y5({name:"itemGroup"})),this.datumSelection=v5.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new Rh;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=x5.None,t}processData(){return F(this,null,function*(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:wh(s,e)},void 0),t==null&&b5.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")})}createNodeData(){return F(this,null,function*(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],n=[];return e.features.forEach((a,o)=>{const{geometry:r}=a,l=r!=null&&i!=null?or(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:a,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:n}})}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return F(this,null,function*(){var t;const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=(t=this.contextNodeData)!=null?t:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})})}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>p5(e.index))})}updateDatumNodes(t){return F(this,null,function*(){const{properties:e}=this,{datumSelection:i}=t,{stroke:s,strokeOpacity:n,lineDash:a,lineDashOffset:o}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=s,l.strokeWidth=r,l.strokeOpacity=n,l.lineDash=a,l.lineDashOffset=o})})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return hy._ModuleSupport.EMPTY_TOOLTIP_CONTENT}computeFocusBounds(t){}};my.className="MapLineBackgroundSeries",my.type="map-line-background",M([m5(la,{optional:!0,property:"topology"})],my.prototype,"_chartTopology",2);var{DEFAULT_HIERARCHY_STROKES:S5}=Kj._Theme,M5={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",instanceConstructor:my,tooltipDefaults:{range:"exact"},themeTemplate:K(B({},$d),{series:{strokeWidth:1,lineDash:[0],lineDashOffset:0}}),paletteFactory:({themeTemplateParameters:t})=>{var e;return{stroke:(e=t.get(S5))==null?void 0:e[1]}}},_5=(Y(),W(H)),qd=(Y(),W(H));function k5(){return{fromFn:(i,s,n)=>n==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,n)=>n==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function dE(t,e){var i;const s=(i=t.contextNodeData)==null?void 0:i.nodeData[e.datumIndex];if(s!==void 0){for(const n of t.datumSelection.nodes())if(n.datum===s)return n}}var pE=(Y(),W(H)),{AND:D5,ARRAY:I5,COLOR_STRING:A5,COLOR_STRING_ARRAY:L5,FUNCTION:T5,LINE_DASH:N5,NUMBER_ARRAY:O5,OBJECT:gE,POSITIVE_NUMBER:d_,RATIO:C5,STRING:On,Validate:ye,SeriesProperties:E5,SeriesTooltip:R5}=pE._ModuleSupport,{Label:w5}=pE._Scene,he=class extends E5{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new w5,this.tooltip=new R5}};M([ye(la,{optional:!0})],he.prototype,"topology",2),M([ye(On,{optional:!0})],he.prototype,"title",2),M([ye(On,{optional:!0})],he.prototype,"legendItemName",2),M([ye(On)],he.prototype,"idKey",2),M([ye(On)],he.prototype,"topologyIdKey",2),M([ye(On,{optional:!0})],he.prototype,"idName",2),M([ye(On,{optional:!0})],he.prototype,"labelKey",2),M([ye(On,{optional:!0})],he.prototype,"labelName",2),M([ye(On,{optional:!0})],he.prototype,"sizeKey",2),M([ye(On,{optional:!0})],he.prototype,"sizeName",2),M([ye(On,{optional:!0})],he.prototype,"colorKey",2),M([ye(On,{optional:!0})],he.prototype,"colorName",2),M([ye(O5,{optional:!0})],he.prototype,"sizeDomain",2),M([ye(D5(L5,I5.restrict({minLength:1})),{optional:!0})],he.prototype,"colorRange",2),M([ye(d_,{optional:!0})],he.prototype,"maxStrokeWidth",2),M([ye(A5)],he.prototype,"stroke",2),M([ye(C5)],he.prototype,"strokeOpacity",2),M([ye(d_)],he.prototype,"strokeWidth",2),M([ye(N5)],he.prototype,"lineDash",2),M([ye(d_)],he.prototype,"lineDashOffset",2),M([ye(T5,{optional:!0})],he.prototype,"itemStyler",2),M([ye(gE)],he.prototype,"label",2),M([ye(gE)],he.prototype,"tooltip",2);var{getMissCount:P5,createDatumId:B5,DataModelSeries:F5,SeriesNodePickMode:fE,valueProperty:Qd,Validate:z5}=qd._ModuleSupport,{ColorScale:G5,LinearScale:V5}=qd._Scale,{Selection:p_,Text:mE}=qd._Scene,{sanitizeHtml:Jd,Logger:yE}=qd._Util,yy=class extends F5{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[fE.EXACT_SHAPE_MATCH,fE.NEAREST_NODE]}),this.properties=new he,this._chartTopology=void 0,this.colorScale=new G5,this.sizeScale=new V5,this.datumSelection=p_.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=p_.select(this.labelGroup,mE),this.highlightDatumSelection=p_.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new Rh;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}processData(t){return F(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:s,topology:n,sizeScale:a,colorScale:o}=this,{topologyIdKey:r,idKey:l,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:d,colorRange:p}=this.properties,g=new Map;n?.features.forEach(S=>{var k;const D=(k=S.properties)==null?void 0:k[r];D==null||!c_(S.geometry,2)||g.set(D,S)});const f=this.sizeScale.type,m=this.colorScale.type,v=(e=this.scale)==null?void 0:e.type,{dataModel:y,processedData:x}=yield this.requestDataModel(t,s,{props:[Qd(l,v,{id:"idValue",includeProperty:!1}),Qd(l,v,{id:"featureValue",includeProperty:!1,processor:()=>S=>g.get(S)}),...u!=null?[Qd(u,"band",{id:"labelValue"})]:[],...c!=null?[Qd(c,f,{id:"sizeValue"})]:[],...h!=null?[Qd(h,m,{id:"colorValue"})]:[]]}),b=y.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=x.data.reduce((S,{values:k})=>{const D=k[b],T=D?.geometry;return T==null?S:wh(T,S)},void 0),c!=null){const S=y.resolveProcessedDataIndexById(this,"sizeValue"),k=(i=x.domain.values[S])!=null?i:[];a.domain=d??k}if(p!=null&&this.isColorScaleValid()){const S=y.resolveProcessedDataIndexById(this,"colorValue");o.domain=x.domain.values[S],o.range=p,o.update()}n==null&&yE.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.data.length,a=P5(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelDatum(t,e,i,s){if(e==null||i==null)return;const n=gy(i);if(n==null)return;const{idKey:a,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d,label:p}=this.properties,g=this.getLabelText(p,{value:e,datum:t,idKey:a,idName:o,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d});if(g==null)return;const f=mE.getTextSize(String(g),s),m=uy(n);if(m==null)return;const[v,y]=m.point,{width:x,height:b}=f;return{point:{x:v,y,size:0},label:{width:x,height:b,text:g},marker:void 0,placement:void 0}}createNodeData(){return F(this,null,function*(){var t;const{id:e,dataModel:i,processedData:s,sizeScale:n,colorScale:a,properties:o,scale:r}=this,{idKey:l,sizeKey:c,colorKey:h,labelKey:u,label:d}=o;if(i==null||s==null)return;const p=this.isColorScaleValid(),g=i.resolveProcessedDataIndexById(this,"idValue"),f=i.resolveProcessedDataIndexById(this,"featureValue"),m=u!=null?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,v=c!=null?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,y=h!=null?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,x=(t=o.maxStrokeWidth)!=null?t:o.strokeWidth;n.range=[Math.min(o.strokeWidth,x),x];const b=d.getFont(),S=new Map;s.data.forEach(({values:N})=>{var C;const E=N[g],O=(C=N[f])==null?void 0:C.geometry,P=O!=null&&r!=null?or(O,r):void 0;E!=null&&P!=null&&S.set(E,P)});const k=[],D=[],T=[];s.data.forEach(({datum:N,values:C})=>{const E=C[g],O=y!=null?C[y]:void 0,P=v!=null?C[v]:void 0,w=m!=null?C[m]:void 0,R=p&&O!=null?a.convert(O):void 0,G=P!=null?n.convert(P,{clampMode:"clamped"}):void 0,z=S.get(E);z==null&&T.push(E);const U=this.getLabelDatum(N,w,z,b);U!=null&&D.push(U),k.push({series:this,itemId:l,datum:N,stroke:R,strokeWidth:G,idValue:E,labelValue:w,colorValue:O,sizeValue:P,projectedGeometry:z})});const I=10;if(T.length>I){const N=T.length-I;T.length=I,T.push(`(+${N} more)`)}return T.length>0&&yE.warnOnce("some data items do not have matches in the provided topology",T),{itemId:e,nodeData:k,labelData:D}})}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return F(this,null,function*(){var t,e,i;const{datumSelection:s,labelSelection:n,highlightDatumSelection:a}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const r=(i=(e=this.contextNodeData)==null?void 0:e.nodeData)!=null?i:[];this.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:s}),yield this.updateDatumNodes({datumSelection:s,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelSelection:n}),yield this.updateLabelNodes({labelSelection:n}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:o!=null?[o]:[],datumSelection:a}),yield this.updateDatumNodes({datumSelection:a,isHighlight:!0})})}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>B5(e.idValue))})}updateDatumNodes(t){return F(this,null,function*(){const{id:e,properties:i,ctx:{callbackCache:s}}=this,{datumSelection:n,isHighlight:a}=t,{idKey:o,labelKey:r,sizeKey:l,colorKey:c,stroke:h,strokeOpacity:u,lineDash:d,lineDashOffset:p,itemStyler:g}=i,f=a?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);n.each((v,y)=>{var x,b,S,k,D,T,I,N,C,E,O,P;const{projectedGeometry:w}=y;if(w==null){v.visible=!1,v.projectedGeometry=void 0;return}let R;g!=null&&(R=s.call(g,{seriesId:e,datum:y.datum,idKey:o,labelKey:r,sizeKey:l,colorKey:c,strokeOpacity:u,stroke:h,strokeWidth:m,lineDash:d,lineDashOffset:p,highlighted:a})),v.visible=!0,v.projectedGeometry=w,v.stroke=(S=(b=(x=f?.stroke)!=null?x:R?.stroke)!=null?b:y.stroke)!=null?S:h,v.strokeWidth=Math.max((k=f?.strokeWidth)!=null?k:0,(T=(D=R?.strokeWidth)!=null?D:y.strokeWidth)!=null?T:m),v.strokeOpacity=(N=(I=f?.strokeOpacity)!=null?I:R?.strokeOpacity)!=null?N:u,v.lineDash=(E=(C=f?.lineDash)!=null?C:R?.lineDash)!=null?E:d,v.lineDashOffset=(P=(O=f?.lineDashOffset)!=null?O:R?.lineDashOffset)!=null?P:p})})}updateLabelSelection(t){return F(this,null,function*(){var e,i;const s=(i=this.isLabelEnabled()?(e=this.chart)==null?void 0:e.placeLabels().get(this):void 0)!=null?i:[];return t.labelSelection.update(s)})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=e!=null&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,o=a!=null&&a===t.legendItemName;s.id===this.id||o?this.toggleSeriesItem(i,!0):e&&n===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((n,a)=>{const o=n.distanceToPoint(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:i}:void 0}datumMidPoint(t){var e;const{_previousDatumMidPoint:i}=this;if(i?.datum===t)return i.point;const s=t.projectedGeometry,n=s!=null?gy(s):void 0,a=n!=null?(e=uy(n))==null?void 0:e.point:void 0,o=a!=null?{x:a[0],y:a[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:o},o}getLegendData(t){var e,i,s,n;const{processedData:a,dataModel:o}=this;if(a==null||o==null)return[];const{title:r,legendItemName:l,idKey:c,idName:h,colorKey:u,colorName:d,colorRange:p,stroke:g,strokeWidth:f,strokeOpacity:m,lineDash:v,visible:y}=this.properties;if(t==="gradient"&&u!=null&&p!=null){const x=a.domain.values[o.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:y,seriesId:this.id,colorName:d,colorRange:p,colorDomain:x}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(i=(e=l??r)!=null?e:h)!=null?i:c,seriesId:this.id,enabled:y,label:{text:(n=(s=l??r)!=null?s:h)!=null?n:c},symbols:[{marker:{fill:g,fillOpacity:m,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:g,strokeOpacity:m,strokeWidth:f,lineDash:v}}],legendItemName:l}]:[]}getTooltipHtml(t){var e,i,s,n,a;const{id:o,processedData:r,properties:l,ctx:{callbackCache:c}}=this;if(!r||!l.isValid())return qd._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:h,idKey:u,idName:d,colorKey:p,colorName:g,sizeKey:f,sizeName:m,labelKey:v,labelName:y,itemStyler:x,tooltip:b,strokeOpacity:S,lineDash:k,lineDashOffset:D}=l,{datum:T,stroke:I,idValue:N,colorValue:C,sizeValue:E,labelValue:O,itemId:P}=t,w=(i=Jd((e=l.title)!=null?e:h))!=null?i:"",R=[];R.push(Jd((d!=null?`${d}: `:"")+N)),C!=null&&R.push(Jd((g??p)+": "+C)),E!=null&&R.push(Jd((m??f)+": "+E)),O!=null&&v!==u&&R.push(Jd((y??v)+": "+O));const G=R.join("<br>");let z;x&&(z=c.call(x,{highlighted:!1,seriesId:o,datum:T,idKey:u,sizeKey:f,colorKey:p,labelKey:v,stroke:I,strokeWidth:this.getStrokeWidth((s=t.strokeWidth)!=null?s:l.strokeWidth),strokeOpacity:S,lineDash:k,lineDashOffset:D}));const U=(a=(n=z?.stroke)!=null?n:I)!=null?a:l.stroke;return b.toTooltipHtml({title:w,content:G,backgroundColor:U},B({seriesId:o,datum:T,idKey:u,title:w,color:U,itemId:P,sizeKey:f,colorKey:p,colorName:g,idName:d,labelKey:v,labelName:y,sizeName:m},this.getModuleTooltipParams()))}computeFocusBounds(t){var e;return(e=dE(this,t))==null?void 0:e.computeTransformedBBox()}};yy.className="MapLineSeries",yy.type="map-line",M([z5(la,{optional:!0,property:"topology"})],yy.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:U5,DEFAULT_FONT_FAMILY:H5,DEFAULT_LABEL_COLOUR:W5,singleSeriesPaletteFactory:Y5}=_5._Theme,K5={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",instanceConstructor:yy,tooltipDefaults:{range:"exact"},themeTemplate:K(B({},$d),{series:{strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:H5,color:W5}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:n}=t,{fill:a}=Y5(t),o=n.get(U5),{fills:r}=e(i);return{colorRange:s==="inbuilt"?o:[r[0],r[1]],stroke:a}}},j5=(Y(),W(H)),tp=(Y(),W(H));function vE(t,e,i){const s=wl(t[0],void 0);if(s==null)return;const n=(s.lon0+s.lon1)/2,a=(s.lat0+s.lat1)/2,o=Math.abs(s.lon1-s.lon0),r=Math.abs(s.lat1-s.lat0),l=Qj(t[0]),[c,h]=l,u=-dy(t,c,h);let d;const p=(S,k)=>{const T=Math.max(k-u,0);return S-.5*T},g=(S,k,D)=>{const{distance:T,maxDistance:I}=i(t,S,k,D),N=Math.hypot(c-S,h-k),C=Math.min(Math.max(c,S-D/2),S+D/2),E=Math.min(Math.max(h,k-D/2),k+D/2),O=Math.hypot(c-C,h-E),P=p(T,N),w=p(I,O);return{distance:T,maxDistance:I,value:P,maxValue:w,x:S,y:k,stride:D}},f=(S,k,D,T)=>{const I=g(k,D,T);I.maxDistance>=0&&S.push(I)},m=Math.min(o,r)/2;let v={value:g(n,a,m),next:null};for(;v!=null;){const S=v.value,{distance:k,value:D,maxValue:T,x:I,y:N,stride:C}=S;if(v=v.next,k>0&&(d==null||D>d.value)&&(d=S),d!=null&&T-d.value<=e)continue;const E=C/2,O=[];f(O,I-E,N-E,E),f(O,I+E,N-E,E),f(O,I-E,N+E,E),f(O,I+E,N+E,E),O.sort(xE),v=qj(v,O,xE)}if(d==null)return;const{distance:y,x,y:b}=d;return{x,y:b,distance:y}}var xE=(t,e)=>e.maxValue-t.maxValue;function g_(t,e){const i=vE(t,e,(a,o,r,l)=>{const c=-dy(a,o,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:s,y:n}=i;return[s,n]}function bE(t,e){var i,s;let n;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(a=>bE(a,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const a=py(t);n=a!=null?g_(a,e):void 0;break}case"Polygon":{const a=t.coordinates;n=a!=null?g_(a,e):void 0;break}case"MultiLineString":{const a=gy(t);n=a!=null?(i=uy(a))==null?void 0:i.point:void 0;break}case"LineString":{const a=t.coordinates;n=(s=uy(a))==null?void 0:s.point;break}}return n!=null?[n]:[]}var f_=(Y(),W(H)),{AND:X5,ARRAY:$5,COLOR_STRING:SE,COLOR_STRING_ARRAY:Z5,FUNCTION:q5,NUMBER_ARRAY:Q5,OBJECT:ME,POSITIVE_NUMBER:m_,RATIO:_E,STRING:Ei,MARKER_SHAPE:J5,Validate:Wt,SeriesProperties:tX,SeriesTooltip:eX}=f_._ModuleSupport,{Label:iX,Circle:sX}=f_._Scene,{Logger:nX}=f_._Util,kE=class extends iX{constructor(){super(...arguments),this.placement="bottom"}};M([Wt(Ei)],kE.prototype,"placement",2);var Yt=class extends tX{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape=sX,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.label=new kE,this.tooltip=new eX}isValid(){const t=super.isValid(),e=this.idKey!=null,i=this.latitudeKey!=null&&this.longitudeKey!=null;return!e&&!i?(nX.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1):t}};M([Wt(la,{optional:!0})],Yt.prototype,"topology",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"title",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"legendItemName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"idKey",2),M([Wt(Ei)],Yt.prototype,"topologyIdKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"idName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"latitudeKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"latitudeName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"longitudeKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"longitudeName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"labelKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"labelName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"sizeKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"sizeName",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"colorKey",2),M([Wt(Ei,{optional:!0})],Yt.prototype,"colorName",2),M([Wt(X5(Z5,$5.restrict({minLength:1})),{optional:!0})],Yt.prototype,"colorRange",2),M([Wt(J5)],Yt.prototype,"shape",2),M([Wt(m_)],Yt.prototype,"size",2),M([Wt(m_,{optional:!0})],Yt.prototype,"maxSize",2),M([Wt(Q5,{optional:!0})],Yt.prototype,"sizeDomain",2),M([Wt(SE,{optional:!0})],Yt.prototype,"fill",2),M([Wt(_E)],Yt.prototype,"fillOpacity",2),M([Wt(SE,{optional:!0})],Yt.prototype,"stroke",2),M([Wt(m_)],Yt.prototype,"strokeWidth",2),M([Wt(_E)],Yt.prototype,"strokeOpacity",2),M([Wt(q5,{optional:!0})],Yt.prototype,"itemStyler",2),M([Wt(ME)],Yt.prototype,"label",2),M([Wt(ME)],Yt.prototype,"tooltip",2);var{Validate:aX,fromToMotion:oX,StateMachine:rX,getMissCount:lX,createDatumId:cX,DataModelSeries:hX,SeriesNodePickMode:DE,Layers:uX,valueProperty:Bl,computeMarkerFocusBounds:dX}=tp._ModuleSupport,{ColorScale:pX,LinearScale:gX}=tp._Scale,{Group:fX,Selection:y_,Text:IE,getMarker:AE}=tp._Scene,{sanitizeHtml:Ph,Logger:mX}=tp._Util,vy=class extends hX{constructor(t){super({moduleCtx:t,contentGroupVirtual:!0,useLabelLayer:!0,pickModes:[DE.EXACT_SHAPE_MATCH,DE.NEAREST_NODE]}),this.properties=new Yt,this._chartTopology=void 0,this.colorScale=new pX,this.sizeScale=new gX,this.markerGroup=this.contentGroup.appendChild(new fX({name:"markerGroup",layer:!0,isVirtual:!1,zIndex:uX.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelSelection=y_.select(this.labelGroup,IE,!1),this.markerSelection=y_.select(this.markerGroup,()=>this.markerFactory(),!1),this.highlightMarkerSelection=y_.select(this.highlightNode,()=>this.markerFactory()),this.animationState=new rX("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}markerFactory(){const{shape:t}=this.properties,e=AE(t);return new e}processData(t){return F(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:s,topology:n,sizeScale:a,colorScale:o}=this,{topologyIdKey:r,idKey:l,latitudeKey:c,longitudeKey:h,sizeKey:u,colorKey:d,labelKey:p,sizeDomain:g,colorRange:f}=this.properties,m=new Map;n?.features.forEach(N=>{var C;const E=(C=N.properties)==null?void 0:C[r];E!=null&&m.set(E,N)});const v=this.sizeScale.type,y=this.colorScale.type,x=(e=this.scale)==null?void 0:e.type,b=c!=null&&h!=null,{dataModel:S,processedData:k}=yield this.requestDataModel(t,s,{props:[...l!=null?[Bl(l,x,{id:"idValue",includeProperty:!1}),Bl(l,x,{id:"featureValue",includeProperty:!1,processor:()=>N=>m.get(N)})]:[],...b?[Bl(c,x,{id:"latValue"}),Bl(h,x,{id:"lonValue"})]:[],...p?[Bl(p,"band",{id:"labelValue"})]:[],...u?[Bl(u,v,{id:"sizeValue"})]:[],...d?[Bl(d,y,{id:"colorValue"})]:[]]}),D=l!=null?S.resolveProcessedDataIndexById(this,"featureValue"):void 0,T=b?S.resolveProcessedDataIndexById(this,"latValue"):void 0,I=b?S.resolveProcessedDataIndexById(this,"lonValue"):void 0;if(this.topologyBounds=k.data.reduce((N,{values:C})=>{const E=D!=null?C[D]:void 0,O=E?.geometry;if(O!=null&&(N=wh(O,N)),T!=null&&I!=null){const P=C[I],w=C[T];N=Zd(N,P,w,P,w)}return N},void 0),u!=null){const N=S.resolveProcessedDataIndexById(this,"sizeValue"),C=(i=k.domain.values[N])!=null?i:[];a.domain=g??C}if(f!=null&&this.isColorScaleValid()){const N=S.resolveProcessedDataIndexById(this,"colorValue");o.domain=k.domain.values[N],o.range=f,o.update()}this.animationState.transition("updateData")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.data.length,a=lX(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelDatum(t,e,i,s,n,a){if(e==null)return;const{idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:m,labelName:v,label:y}=this.properties,{placement:x}=y,b=this.getLabelText(y,{value:e,datum:t,idKey:o,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:p,colorKey:g,colorName:f,labelKey:m,labelName:v});if(b==null)return;const{width:S,height:k}=IE.getTextSize(String(b),a);return{point:{x:i,y:s,size:n},label:{width:S,height:k,text:b},marker:AE(this.properties.shape),placement:x}}createNodeData(){return F(this,null,function*(){var t;const{id:e,dataModel:i,processedData:s,colorScale:n,sizeScale:a,properties:o,scale:r}=this,{idKey:l,latitudeKey:c,longitudeKey:h,sizeKey:u,colorKey:d,labelKey:p,label:g}=o;if(i==null||s==null||r==null)return;const f=this.isColorScaleValid(),m=c!=null&&h!=null,v=l!=null?i.resolveProcessedDataIndexById(this,"idValue"):void 0,y=l!=null?i.resolveProcessedDataIndexById(this,"featureValue"):void 0,x=m?i.resolveProcessedDataIndexById(this,"latValue"):void 0,b=m?i.resolveProcessedDataIndexById(this,"lonValue"):void 0,S=p!=null?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,k=u!=null?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,D=d!=null?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,T=(t=o.maxSize)!=null?t:o.size;a.range=[Math.min(o.size,T),T];const I=g.getFont();let N;v!=null&&y!=null&&(N=new Map,s.data.forEach(({values:w})=>{var R;const G=w[v],z=(R=w[y])==null?void 0:R.geometry,U=z!=null&&r!=null?or(z,r):void 0;G!=null&&U!=null&&N.set(G,U)}));const C=[],E=[],O=[];s.data.forEach(({datum:w,values:R})=>{const G=v!=null?R[v]:void 0,z=b!=null?R[b]:void 0,U=x!=null?R[x]:void 0,V=D!=null?R[D]:void 0,X=k!=null?R[k]:void 0,j=S!=null?R[S]:void 0,tt=f&&V!=null?n.convert(V):void 0,ct=X!=null?a.convert(X,{clampMode:"clamped"}):o.size,st=G!=null?N?.get(G):void 0;if(G!=null&&or==null&&O.push(G),z!=null&&U!=null){const[$,Q]=r.convert([z,U]),J=this.getLabelDatum(w,j,$,Q,ct,I);J&&E.push(J),C.push({series:this,itemId:c,datum:w,index:-1,fill:tt,idValue:G,lonValue:z,latValue:U,labelValue:j,sizeValue:X,colorValue:V,point:{x:$,y:Q,size:ct},midPoint:{x:$,y:Q}})}else st!=null&&bE(st,1).forEach(([$,Q],J)=>{const it=this.getLabelDatum(w,j,$,Q,ct,I);it&&E.push(it),C.push({series:this,itemId:c,datum:w,index:J,fill:tt,idValue:G,lonValue:z,latValue:U,labelValue:j,sizeValue:X,colorValue:V,point:{x:$,y:Q,size:ct},midPoint:{x:$,y:Q}})})});const P=10;if(O.length>P){const w=O.length-P;O.length=P,O.push(`(+${w} more)`)}return O.length>0&&mX.warnOnce("some data items do not have matches in the provided topology",O),{itemId:e,nodeData:C,labelData:E}})}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update(t){return F(this,arguments,function*({seriesRect:e}){var i,s,n;const a=this.checkResize(e),o=this.checkScaleChange(),{labelSelection:r,markerSelection:l,highlightMarkerSelection:c}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let h=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();h!=null&&(h.series!==this||h.datum==null)&&(h=void 0);const u=(n=(s=this.contextNodeData)==null?void 0:s.nodeData)!=null?n:[];this.labelSelection=yield this.updateLabelSelection({labelSelection:r}),yield this.updateLabelNodes({labelSelection:r}),this.markerSelection=yield this.updateMarkerSelection({markerData:u,markerSelection:l}),yield this.updateMarkerNodes({markerSelection:l,isHighlight:!1,highlightedDatum:h}),this.highlightMarkerSelection=yield this.updateMarkerSelection({markerData:h!=null?[h]:[],markerSelection:c}),yield this.updateMarkerNodes({markerSelection:c,isHighlight:!0,highlightedDatum:h}),(o||a)&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateLabelSelection(t){return F(this,null,function*(){var e,i;const s=(i=this.isLabelEnabled()?(e=this.chart)==null?void 0:e.placeLabels().get(this):void 0)!=null?i:[];return t.labelSelection.update(s)})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,width:h,height:u,text:d})=>{r.visible=!0,r.x=l+h/2,r.y=c+u/2,r.text=d,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign="center",r.textBaseline="middle"})})}updateMarkerSelection(t){return F(this,null,function*(){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,s=>cX([s.index,s.idValue,s.lonValue,s.latValue]))})}updateMarkerNodes(t){return F(this,null,function*(){const{properties:e}=this,{markerSelection:i,isHighlight:s,highlightedDatum:n}=t,{fill:a,fillOpacity:o,stroke:r,strokeOpacity:l}=e,c=s?e.highlightStyle.item:void 0,h=this.getStrokeWidth(e.strokeWidth);i.each((u,d)=>{var p,g,f,m,v,y,x,b,S,k,D,T;const{datum:I,point:N}=d,C=this.getMapMarkerStyle(d,s);u.size=(p=C?.size)!=null?p:N.size,u.fill=(m=(f=(g=c?.fill)!=null?g:C?.fill)!=null?f:d.fill)!=null?m:a,u.fillOpacity=(y=(v=c?.fillOpacity)!=null?v:C?.fillOpacity)!=null?y:o,u.stroke=(b=(x=c?.stroke)!=null?x:C?.stroke)!=null?b:r,u.strokeWidth=(k=(S=c?.strokeWidth)!=null?S:C?.strokeWidth)!=null?k:h,u.strokeOpacity=(T=(D=c?.strokeOpacity)!=null?D:C?.strokeOpacity)!=null?T:l,u.translationX=N.x,u.translationY=N.y,u.zIndex=!s&&n!=null&&I===n.datum?1:0})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=e!=null&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,o=a!=null&&a===t.legendItemName;s.id===this.id||o?this.toggleSeriesItem(i,!0):e&&n===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=k5();oX(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(t){var e;const{x:i,y:s}=this.rootGroup.transformPoint(t.x,t.y);let n=1/0,a;return(e=this.contextNodeData)==null||e.nodeData.forEach(o=>{const{x:r,y:l,size:c}=o.point,h=Math.max(Math.abs(r-i)-c,0),u=Math.max(Math.abs(l-s)-c,0),d=h*h+u*u;d<n&&(n=d,a=o)}),a!=null?{datum:a,distance:Math.sqrt(n)}:void 0}getLegendData(t){var e,i,s,n,a,o;const{processedData:r,dataModel:l}=this;if(r==null||l==null)return[];const{title:c,legendItemName:h,idName:u,idKey:d,colorKey:p,colorName:g,colorRange:f,visible:m,shape:v,fill:y,stroke:x,fillOpacity:b,strokeOpacity:S,strokeWidth:k}=this.properties;if(t==="gradient"&&p!=null&&f!=null){const D=r.domain.values[l.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:m,seriesId:this.id,colorName:g,colorRange:f,colorDomain:D}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(s=(i=(e=h??c)!=null?e:u)!=null?i:d)!=null?s:this.id,seriesId:this.id,enabled:m,label:{text:(o=(a=(n=h??c)!=null?n:u)!=null?a:d)!=null?o:this.id},symbols:[{marker:{shape:v,fill:y,fillOpacity:b,stroke:x,strokeWidth:k,strokeOpacity:S}}],legendItemName:h}]:[]}getTooltipHtml(t){var e,i,s,n;const{id:a,processedData:o,ctx:{callbackCache:r},properties:l}=this;if(!o||!this.properties.isValid())return tp._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:c,idKey:h,idName:u,latitudeKey:d,longitudeKey:p,sizeKey:g,sizeName:f,colorKey:m,colorName:v,labelKey:y,labelName:x,itemStyler:b,tooltip:S,latitudeName:k,longitudeName:D,shape:T,size:I,fillOpacity:N,stroke:C,strokeWidth:E,strokeOpacity:O}=l,{datum:P,fill:w,idValue:R,latValue:G,lonValue:z,sizeValue:U,colorValue:V,labelValue:X,itemId:j}=t,tt=(i=Ph((e=l.title)!=null?e:c))!=null?i:"",ct=[];R!=null&&ct.push(Ph((u!=null?`${u}: `:"")+R)),V!=null&&ct.push(Ph((v??m)+": "+V)),U!=null&&ct.push(Ph((f??g)+": "+U)),X!=null&&(h==null||h!==y)&&ct.push(Ph((x??y)+": "+X)),G!=null&&z!=null&&ct.push(Ph(`${Math.abs(G).toFixed(4)}\xB0 ${G>=0?"N":"S"}, ${Math.abs(z).toFixed(4)}\xB0 ${G>=0?"W":"E"}`));const st=ct.join("<br>");let $;b&&($=r.call(b,{highlighted:!1,seriesId:a,datum:P,idKey:h,sizeKey:g,colorKey:m,labelKey:y,latitudeKey:d,longitudeKey:p,shape:T,size:I,fill:w,fillOpacity:N,stroke:C,strokeWidth:E,strokeOpacity:O}));const Q=(n=(s=$?.fill)!=null?s:w)!=null?n:l.fill;return S.toTooltipHtml({title:tt,content:st,backgroundColor:Q},B({seriesId:a,datum:P,idKey:h,latitudeKey:d,longitudeKey:p,title:tt,color:Q,colorKey:m,colorName:v,idName:u,itemId:j,labelKey:y,labelName:x,latitudeName:k,longitudeName:D,sizeKey:g,sizeName:f},this.getModuleTooltipParams()))}getMapMarkerStyle(t,e){const{id:i,properties:s,ctx:{callbackCache:n}}=this,{datum:a,point:o}=t,{idKey:r,latitudeKey:l,longitudeKey:c,labelKey:h,sizeKey:u,colorKey:d,fill:p,fillOpacity:g,stroke:f,strokeOpacity:m,shape:v,itemStyler:y}=s,x=this.getStrokeWidth(s.strokeWidth);if(y!==void 0)return n.call(y,{seriesId:i,datum:a,size:o.size,idKey:r,latitudeKey:l,longitudeKey:c,labelKey:h,sizeKey:u,colorKey:d,fill:p,fillOpacity:g,stroke:f,strokeWidth:x,strokeOpacity:m,shape:v,highlighted:e})}getFormattedMarkerStyle(t){var e;const i=this.getMapMarkerStyle(t,!0);return{size:(e=i?.size)!=null?e:t.point.size}}computeFocusBounds(t){return dX(this,t)}};vy.className="MapMarkerSeries",vy.type="map-marker",M([aX(la,{optional:!0,property:"topology"})],vy.prototype,"_chartTopology",2);var{DEFAULT_LABEL_COLOUR:yX,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:vX,singleSeriesPaletteFactory:xX}=j5._Theme,bX={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",instanceConstructor:vy,tooltipDefaults:{range:"exact"},themeTemplate:K(B({},$d),{series:{shape:"circle",maxSize:30,fillOpacity:.5,label:{color:yX}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:n}=t,{fill:a,stroke:o}=xX(t),r=n.get(vX),{fills:l}=e(i);return{fill:a,stroke:o,colorRange:s==="inbuilt"?r:[l[0],l[1]]}}},SX=(Y(),W(H)),xy=(Y(),W(H)),MX=(Y(),W(H)),{COLOR_STRING:LE,LINE_DASH:_X,OBJECT:kX,POSITIVE_NUMBER:TE,RATIO:NE,Validate:ho,SeriesProperties:DX,SeriesTooltip:IX}=MX._ModuleSupport,ca=class extends DX{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new IX}};M([ho(la,{optional:!0})],ca.prototype,"topology",2),M([ho(LE)],ca.prototype,"fill",2),M([ho(NE)],ca.prototype,"fillOpacity",2),M([ho(LE)],ca.prototype,"stroke",2),M([ho(NE)],ca.prototype,"strokeOpacity",2),M([ho(TE)],ca.prototype,"strokeWidth",2),M([ho(_X)],ca.prototype,"lineDash",2),M([ho(TE)],ca.prototype,"lineDashOffset",2),M([ho(kX)],ca.prototype,"tooltip",2);var{createDatumId:AX,Series:LX,SeriesNodePickMode:TX,Validate:NX}=xy._ModuleSupport,{Selection:OX,Group:CX,PointerEvents:EX}=xy._Scene,{Logger:RX}=xy._Util,by=class extends LX{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[TX.EXACT_SHAPE_MATCH]}),this.properties=new ca,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new CX({name:"itemGroup"})),this.datumSelection=OX.select(this.itemGroup,()=>this.nodeFactory())}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new Rh;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=EX.None,t}processData(){return F(this,null,function*(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const s=i.geometry;return s==null?e:wh(s,e)},void 0),t==null&&RX.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")})}createNodeData(){return F(this,null,function*(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const s=[],n=[];return e.features.forEach((a,o)=>{const{geometry:r}=a,l=r!=null&&i!=null?or(r,i):void 0;l!=null&&s.push({series:this,itemId:o,datum:a,index:o,projectedGeometry:l})}),{itemId:t,nodeData:s,labelData:n}})}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return F(this,null,function*(){var t;const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=(t=this.contextNodeData)!=null?t:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})})}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>AX(e.index))})}updateDatumNodes(t){return F(this,null,function*(){const{properties:e}=this,{datumSelection:i}=t,{fill:s,fillOpacity:n,stroke:a,strokeOpacity:o,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((h,u)=>{const{projectedGeometry:d}=u;if(d==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=d,h.fill=s,h.fillOpacity=n,h.stroke=a,h.strokeWidth=c,h.strokeOpacity=o,h.lineDash=r,h.lineDashOffset=l})})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return xy._ModuleSupport.EMPTY_TOOLTIP_CONTENT}pickFocus(t){}};by.className="MapShapeBackgroundSeries",by.type="map-shape-background",M([NX(la,{optional:!0,property:"topology"})],by.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:wX,DEFAULT_HIERARCHY_FILLS:PX}=SX._Theme,BX={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",instanceConstructor:by,tooltipDefaults:{range:"exact"},themeTemplate:K(B({},$d),{series:{stroke:wX,strokeWidth:1}}),paletteFactory:({themeTemplateParameters:t})=>{var e;return{fill:(e=t.get(PX))==null?void 0:e[1]}}},FX=(Y(),W(H)),Bh=(Y(),W(H));function zX(t,{aspectRatio:e,precision:i}){const s=vE(t,i,(l,c,h,u)=>{const d=VX(l,c,h,e),p=d+2*u*e,g=d*Math.SQRT2,f=p*Math.SQRT2;return{distance:g,maxDistance:f}});if(s==null)return;const{x:n,y:a,distance:o}=s,r=o/Math.SQRT2;return{x:n,y:a,maxWidth:r}}function GX(t,e,i,s,n){const[a,o]=t,[r,l]=e,c=1/n,h=r-a,u=l-o,[d,p]=o<=l?t:e,[g,f]=a<=r?t:e,[m,v]=o<=l?e:t,[y,x]=a<=r?e:t;let b=1/0;if(h!==0){const N=u/h;for(let C=0;C<=1;C+=1){const E=C===0?c:-c,O=(N*a-o-E*i+s)/(N-E);if(O>=g&&O<=y){const P=Math.abs(i-O)*2;b=Math.min(b,P)}}}else for(let N=0;N<=1;N+=1){const E=(N===0?c:-c)*(a-i)+s;if(E>=p&&E<=v){const P=Math.abs(s-E)*2*n;b=Math.min(b,P)}}const S=n,k=Math.abs((d-i)/(p-s)),D=Math.abs((m-i)/(v-s));if(v<s&&D<S){const C=Math.abs(s-v)*2*n;b=Math.min(b,C)}else if(p>s&&k<S){const C=Math.abs(s-p)*2*n;b=Math.min(b,C)}const T=Math.abs((f-s)/(g-i)),I=Math.abs((x-s)/(y-i));if(y<i&&I<c){const N=Math.abs(i-y)*2;b=Math.min(b,N)}else if(g>i&&T<c){const N=Math.abs(i-g)*2;b=Math.min(b,N)}return b}function VX(t,e,i,s){let n=!1,a=1/0;for(const o of t){let r=o[o.length-1],[l,c]=r;for(const h of o){const[u,d]=h;d>i!=c>i&&e<(l-u)*(i-d)/(c-d)+u&&(n=!n);const p=GX(r,h,e,i,s);a=Math.min(a,p),r=h,l=u,c=d}}return(n?1:-1)*a}function Sy(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function UX(t,e,i,s,n,a){const o=n-a/2,r=n+a/2,[l,c]=e,[h,u]=i,d=h-l,p=u-c,[g,f]=l<=h?e:i,[m,v]=l<=h?i:e;if(d!==0){const y=p/d;for(let x=0;x<=1;x+=1){const S=((x===0?o:r)-c)/y+l;S>=g&&S<=m&&Sy(t,s,S)}}else Math.max(o,Math.min(c,u))<=Math.min(r,Math.max(c,u))&&Sy(t,s,l);return m<s&&v>=o&&v<=r?Sy(t,s,m):g>s&&f>=o&&f<=r&&Sy(t,s,g),t}function HX(t,e,i,s){const n={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)UX(n,l,c,e,i,s),l=c}const{minX:a,maxX:o}=n;return Number.isFinite(a)&&Number.isFinite(o)?{x:e+(a+o)/2,width:o-a}:{x:e,width:0}}var WX=(Y(),W(H)),{AND:YX,ARRAY:KX,COLOR_STRING:OE,COLOR_STRING_ARRAY:jX,FUNCTION:XX,LINE_DASH:$X,OBJECT:CE,POSITIVE_NUMBER:v_,RATIO:EE,STRING:uo,Validate:Me,SeriesProperties:ZX,SeriesTooltip:qX}=WX._ModuleSupport,ve=class extends ZX{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Xd,this.tooltip=new qX}};M([Me(la,{optional:!0})],ve.prototype,"topology",2),M([Me(uo,{optional:!0})],ve.prototype,"title",2),M([Me(uo,{optional:!0})],ve.prototype,"legendItemName",2),M([Me(uo)],ve.prototype,"idKey",2),M([Me(uo,{optional:!0})],ve.prototype,"idName",2),M([Me(uo)],ve.prototype,"topologyIdKey",2),M([Me(uo,{optional:!0})],ve.prototype,"labelKey",2),M([Me(uo,{optional:!0})],ve.prototype,"labelName",2),M([Me(uo,{optional:!0})],ve.prototype,"colorKey",2),M([Me(uo,{optional:!0})],ve.prototype,"colorName",2),M([Me(YX(jX,KX.restrict({minLength:1})),{optional:!0})],ve.prototype,"colorRange",2),M([Me(OE)],ve.prototype,"fill",2),M([Me(EE)],ve.prototype,"fillOpacity",2),M([Me(OE)],ve.prototype,"stroke",2),M([Me(EE)],ve.prototype,"strokeOpacity",2),M([Me(v_)],ve.prototype,"strokeWidth",2),M([Me($X)],ve.prototype,"lineDash",2),M([Me(v_)],ve.prototype,"lineDashOffset",2),M([Me(v_)],ve.prototype,"padding",2),M([Me(XX,{optional:!0})],ve.prototype,"itemStyler",2),M([Me(CE)],ve.prototype,"label",2),M([Me(CE)],ve.prototype,"tooltip",2);var{getMissCount:QX,createDatumId:JX,DataModelSeries:t$,SeriesNodePickMode:RE,valueProperty:My,Validate:e$}=Bh._ModuleSupport,{ColorScale:i$}=Bh._Scale,{Group:wE,Selection:x_,Text:b_,PointerEvents:s$}=Bh._Scene,{sanitizeHtml:_y,Logger:PE}=Bh._Util,BE=Bh._ModuleSupport.MercatorScale.fixedScale(),ky=class extends t${constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[RE.EXACT_SHAPE_MATCH,RE.NEAREST_NODE]}),this.properties=new ve,this._chartTopology=void 0,this.colorScale=new i$,this.itemGroup=this.contentGroup.appendChild(new wE({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new wE({name:"itemLabelGroup"})),this.datumSelection=x_.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=x_.select(this.itemLabelGroup,b_),this.highlightDatumSelection=x_.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=s$.None}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new Rh;return t.renderMode=1,t.lineJoin="round",t}processData(t){return F(this,null,function*(){var e;if(this.data==null||!this.properties.isValid())return;const{data:i,topology:s,colorScale:n}=this,{topologyIdKey:a,idKey:o,colorKey:r,labelKey:l,colorRange:c}=this.properties,h=new Map;s?.features.forEach(m=>{var v;const y=(v=m.properties)==null?void 0:v[a];y==null||!c_(m.geometry,1)||h.set(y,m)});const u=this.colorScale.type,d=(e=this.scale)==null?void 0:e.type,{dataModel:p,processedData:g}=yield this.requestDataModel(t,i,{props:[My(o,d,{id:"idValue",includeProperty:!1}),My(o,d,{id:"featureValue",includeProperty:!1,processor:()=>m=>h.get(m)}),...l?[My(l,"band",{id:"labelValue"})]:[],...r?[My(r,u,{id:"colorValue"})]:[]]}),f=p.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=g.data.reduce((m,{values:v})=>{const y=v[f],x=y?.geometry;return x==null?m:wh(x,m)},void 0),c!=null&&this.isColorScaleValid()){const m=p.resolveProcessedDataIndexById(this,"colorValue");n.domain=g.domain.values[m],n.range=c,n.update()}s==null&&PE.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const s=e.resolveProcessedDataIndexById(this,"colorValue"),n=i.data.length,a=QX(this,i.defs.values[s].missing);return!(n===0||n===a)}getLabelLayout(t,e,i,s,n){if(e==null||s==null)return;const{idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:u,label:d}=this.properties,p=this.getLabelText(d,{value:e,datum:t,idKey:a,idName:o,colorKey:r,colorName:l,labelKey:c,labelName:h});if(p==null)return;const g=b_.getTextSize(String(p),i),f=p.split(`
`).length,m=(g.width+2*u)/(f*Ks.lineHeight(d.fontSize)+2*u);if(n?.geometry===s&&n?.labelText===p&&n?.aspectRatio===m)return n;const v=or(s,BE),y=py(v);if(y==null)return;const x=zX(y,{aspectRatio:m,precision:.001});if(x==null)return;const{x:b,y:S,maxWidth:k}=x;return{geometry:s,labelText:p,aspectRatio:m,x:b,y:S,maxWidth:k,fixedPolygon:y}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:s,label:n}=this.properties,{labelText:a,aspectRatio:o,x:r,y:l,maxWidth:c,fixedPolygon:h}=t,u={width:Math.ceil(c*e),height:Math.ceil(c*e/o),meta:r},d=s_(a,n,{padding:s},(b,S)=>{if(!S)return u;const k=HX(h,r,l,b/e);return{width:k.width*e,height:b,meta:k.x}});if(d==null)return;const[{text:p,fontSize:g,lineHeight:f,width:m},v]=d;if(p===b_.ellipsis)return;const y=m<u.width?r:v,x=this.scale.convert(BE.invert([y,l]));return{x:x[0],y:x[1],text:p,fontSize:g,lineHeight:f}}createNodeData(){return F(this,null,function*(){const{id:t,dataModel:e,processedData:i,colorScale:s,properties:n,scale:a,previousLabelLayouts:o}=this,{idKey:r,colorKey:l,labelKey:c,label:h,fill:u}=n;if(e==null||i==null)return;const d=a!=null?(a.range[1][0]-a.range[0][0])/a.bounds.width:NaN,p=this.isColorScaleValid(),g=e.resolveProcessedDataIndexById(this,"idValue"),f=e.resolveProcessedDataIndexById(this,"featureValue"),m=c!=null?e.resolveProcessedDataIndexById(this,"labelValue"):void 0,v=l!=null?e.resolveProcessedDataIndexById(this,"colorValue"):void 0,y=h.getFont(),x=new Map;this.previousLabelLayouts=x;const b=[],S=[],k=[];i.data.forEach(({datum:T,values:I})=>{var N;const C=I[g],E=v!=null?I[v]:void 0,O=m!=null?I[m]:void 0,P=(N=I[f])==null?void 0:N.geometry;P==null&&k.push(C);const w=p&&E!=null?s.convert(E):void 0,R=this.getLabelLayout(T,O,y,P,o?.get(C));R!=null&&x.set(C,R);const G=R!=null&&a!=null?this.getLabelDatum(R,d):void 0;G!=null&&S.push(G);const z=P!=null&&a!=null?or(P,a):void 0;b.push({series:this,itemId:r,datum:T,idValue:C,colorValue:E,labelValue:O,fill:w??u,projectedGeometry:z})});const D=10;if(k.length>D){const T=k.length-D;k.length=D,k.push(`(+${T} more)`)}return k.length>0&&PE.warnOnce("some data items do not have matches in the provided topology",k),{itemId:t,nodeData:b,labelData:S}})}updateSelections(){return F(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return F(this,null,function*(){var t,e,i,s,n;const{datumSelection:a,labelSelection:o,highlightDatumSelection:r}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();l!=null&&(l.series!==this||l.datum==null)&&(l=void 0);const c=(i=(e=this.contextNodeData)==null?void 0:e.nodeData)!=null?i:[],h=(n=(s=this.contextNodeData)==null?void 0:s.labelData)!=null?n:[];this.datumSelection=yield this.updateDatumSelection({nodeData:c,datumSelection:a}),yield this.updateDatumNodes({datumSelection:a,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelData:h,labelSelection:o}),yield this.updateLabelNodes({labelSelection:o}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:l!=null?[l]:[],datumSelection:r}),yield this.updateDatumNodes({datumSelection:r,isHighlight:!0})})}updateDatumSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>JX(e.idValue))})}updateDatumNodes(t){return F(this,null,function*(){const{id:e,properties:i,ctx:{callbackCache:s}}=this,{datumSelection:n,isHighlight:a}=t,{idKey:o,colorKey:r,labelKey:l,fillOpacity:c,stroke:h,strokeOpacity:u,lineDash:d,lineDashOffset:p,itemStyler:g}=i,f=a?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);n.each((v,y)=>{var x,b,S,k,D,T,I,N,C,E,O,P,w,R;const{projectedGeometry:G}=y;if(G==null){v.visible=!1,v.projectedGeometry=void 0;return}let z;g!=null&&(z=s.call(g,{seriesId:e,datum:y.datum,idKey:o,colorKey:r,labelKey:l,fill:y.fill,fillOpacity:c,strokeOpacity:u,stroke:h,strokeWidth:m,lineDash:d,lineDashOffset:p,highlighted:a})),v.visible=!0,v.projectedGeometry=G,v.fill=(b=(x=f?.fill)!=null?x:z?.fill)!=null?b:y.fill,v.fillOpacity=(k=(S=f?.fillOpacity)!=null?S:z?.fillOpacity)!=null?k:c,v.stroke=(T=(D=f?.stroke)!=null?D:z?.stroke)!=null?T:h,v.strokeWidth=(N=(I=f?.strokeWidth)!=null?I:z?.strokeWidth)!=null?N:m,v.strokeOpacity=(E=(C=f?.strokeOpacity)!=null?C:z?.strokeOpacity)!=null?E:u,v.lineDash=(P=(O=f?.lineDash)!=null?O:z?.lineDash)!=null?P:d,v.lineDashOffset=(R=(w=f?.lineDashOffset)!=null?w:z?.lineDashOffset)!=null?R:p})})}updateLabelSelection(t){return F(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontFamily:a}=this.properties.label;e.each((o,{x:r,y:l,text:c,fontSize:h,lineHeight:u})=>{o.visible=!0,o.x=r,o.y=l,o.text=c,o.fill=i,o.fontStyle=s,o.fontWeight=n,o.fontSize=h,o.lineHeight=u,o.fontFamily=a,o.textAlign="center",o.textBaseline="middle"})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=e!=null&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,o=a!=null&&a===t.legendItemName;s.id===this.id||o?this.toggleSeriesItem(i,!0):e&&n===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,s;return this.datumSelection.each((n,a)=>{const o=n.distanceToPoint(t,e);o<i&&(i=o,s=a)}),s!=null?{datum:s,distance:i}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,s=i!=null?py(i):void 0,n=s!=null?g_(s,2):void 0,a=n!=null?{x:n[0],y:n[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}getLegendData(t){var e,i,s,n;const{processedData:a,dataModel:o}=this;if(a==null||o==null)return[];const{title:r,legendItemName:l,idKey:c,idName:h,fill:u,fillOpacity:d,stroke:p,strokeWidth:g,strokeOpacity:f,colorKey:m,colorName:v,colorRange:y,visible:x}=this.properties;if(t==="gradient"&&m!=null&&y!=null){const b=a.domain.values[o.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:x,seriesId:this.id,colorName:v,colorRange:y,colorDomain:b}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(i=(e=l??r)!=null?e:h)!=null?i:c,seriesId:this.id,enabled:x,label:{text:(n=(s=l??r)!=null?s:h)!=null?n:c},symbols:[{marker:{fill:u,fillOpacity:d,stroke:p,strokeWidth:g,strokeOpacity:f}}],legendItemName:l}]:[]}getTooltipHtml(t){var e,i,s;const{id:n,processedData:a,ctx:{callbackCache:o},properties:r}=this;if(!a||!r.isValid())return Bh._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:l,idKey:c,idName:h,colorKey:u,colorName:d,labelKey:p,labelName:g,stroke:f,strokeWidth:m,strokeOpacity:v,fillOpacity:y,lineDash:x,lineDashOffset:b,itemStyler:S,tooltip:k}=r,{datum:D,fill:T,idValue:I,colorValue:N,labelValue:C,itemId:E}=t,O=(i=_y((e=r.title)!=null?e:l))!=null?i:"",P=[];P.push(_y((h!=null?`${h}: `:"")+I)),N!=null&&P.push(_y((d??u)+": "+N)),C!=null&&p!==c&&P.push(_y((g??p)+": "+C));const w=P.join("<br>");let R;S&&(R=o.call(S,{seriesId:n,datum:D,idKey:c,colorKey:u,labelKey:p,fill:T,stroke:f,strokeWidth:this.getStrokeWidth(m),highlighted:!1,fillOpacity:y,strokeOpacity:v,lineDash:x,lineDashOffset:b}));const G=(s=R?.fill)!=null?s:T;return k.toTooltipHtml({title:O,content:w,backgroundColor:G},B({seriesId:n,datum:D,idKey:c,title:O,color:G,colorKey:u,colorName:d,idName:h,itemId:E,labelKey:p,labelName:g},this.getModuleTooltipParams()))}computeFocusBounds(t){return dE(this,t)}};ky.className="MapShapeSeries",ky.type="map-shape",M([e$(la,{optional:!0,property:"topology"})],ky.prototype,"_chartTopology",2);var{DEFAULT_INVERTED_LABEL_COLOUR:n$,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:a$,DEFAULT_BACKGROUND_COLOUR:o$,singleSeriesPaletteFactory:r$}=FX._Theme,l$={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",instanceConstructor:ky,tooltipDefaults:{range:"exact"},themeTemplate:K(B({},$d),{series:{fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:n$,fontWeight:"bold",overflowStrategy:"hide"}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:s,themeTemplateParameters:n}=t,{fill:a}=r$(t),o=n.get(a$),{fills:r}=e(i);return{fill:a,stroke:n.get(o$),colorRange:s==="inbuilt"?o:[r[0],r[1]]}}},S_=(Y(),W(H)),c$=(Y(),W(H)),Fl=(Y(),W(H)),{isDefined:h$,ChartAxisDirection:ha,PolarAxis:u$,diff:d$,fixNumericExtent:p$,groupAccumulativeValueProperty:FE,keyProperty:g$,mergeDefaults:f$,normaliseGroupTo:m$,resetLabelFn:y$,seriesLabelFadeInAnimation:v$,seriesLabelFadeOutAnimation:x$,valueProperty:b$,animationValidation:S$,isFiniteNumber:M$,SeriesNodePickMode:zE}=Fl._ModuleSupport,{BandScale:_$}=Fl._Scale,{motion:GE}=Fl._Scene,{isNumber:k$,normalizeAngle360:VE,sanitizeHtml:UE}=Fl._Util,D$=class extends Fl._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},HE=class extends Fl._ModuleSupport.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,pickModes:[zE.NEAREST_NODE,zE.EXACT_SHAPE_MATCH],animationResetFns:K(B({},e),{label:y$})}),this.NodeEvent=D$,this.groupScale=new _$,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(t===ha.X)return i.getDomain(this,"angleValue","key",s);{const n=e[ha.Y],a=i.getDomain(this,"radiusValue-end","value",s),o=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return p$(o,n)}}processData(t){return F(this,null,function*(){var e,i;const{angleKey:s,radiusKey:n,normalizedTo:a,visible:o}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(o||r))return;const l=this.getStackId(),c=`${l}-trailing`,h=[];h$(a)&&h.push(m$([l,c],Math.abs(a),"range")),r&&this.processedData&&h.push(d$(this.processedData)),r&&h.push(S$());const u=o||!r?{}:{forceValue:0},d=(e=this.axes[ha.Y])==null?void 0:e.scale.type,p=(i=this.axes[ha.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[g$(s,p,{id:"angleValue"}),b$(n,d,B({id:"radiusValue-raw",invalidValue:null},u)),...FE(n,"normal","current",B({id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:l,separateNegative:!0},u),d),...FE(n,"trailing","current",B({id:"radiusValue-start",invalidValue:null,groupId:c,separateNegative:!0},u),d),...h]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}isRadiusAxisReversed(){var t;return(t=this.axes[ha.Y])==null?void 0:t.isReversed()}maybeRefreshNodeData(){return F(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const t=this.axes[ha.Y];return t instanceof u$?this.radius*t.innerRadiusRatio:0}createNodeData(){return F(this,null,function*(){var t;const{processedData:e,dataModel:i,groupScale:s}=this;if(!e||!i||!this.properties.isValid())return;const n=this.axes[ha.X],a=this.axes[ha.Y],o=n?.scale,r=a?.scale;if(!o||!r)return;const l=i.resolveProcessedDataIndexById(this,"radiusValue-start"),c=i.resolveProcessedDataIndexById(this,"radiusValue-end"),h=i.resolveProcessedDataIndexById(this,"radiusValue-range"),u=i.resolveProcessedDataIndexById(this,"radiusValue-raw");let d=0,p=0;n instanceof yl&&(d=n.groupPaddingInner,p=n.paddingInner);const f=((t=o.bandwidth)!=null?t:0)*(1-p),{index:m,visibleGroupCount:v}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);s.domain=Array.from({length:v}).map((P,w)=>String(w)),s.range=[-f/2,f/2],s.paddingInner=v>1?d:0;const y=this.isRadiusAxisReversed(),x=y?this.radius:this.getAxisInnerRadius(),b=y?this.getAxisInnerRadius():this.radius,S=b+x,{angleKey:k,radiusKey:D,angleName:T,radiusName:I,label:N}=this.properties,C=(P,w,R,G)=>{const z=this.getLabelText(N,{value:w,datum:P,angleKey:k,radiusKey:D,angleName:T,radiusName:I},U=>M$(U)?U.toFixed(2):String(U));if(z)return{x:R,y:G,text:z,textAlign:"center",textBaseline:"middle"}},E=[],O={itemId:D,nodeData:E,labelData:E};return this.visible?(e.data.forEach((P,w,R)=>{var G;const{datum:z,keys:U,values:V,aggValues:X}=P,j=U[0],tt=V[u],ct=tt>=0&&!Object.is(tt,-0),st=V[l],$=V[c],Q=(G=X?.[h][ct?1:0])!=null?G:0,J=ct===y;if(st===void 0||$===void 0)return;let it,ht;if(R.length===1)it=-.5*Math.PI,ht=1.5*Math.PI;else{let Zi=o.convert(j);v===1&&(Zi-=s.bandwidth/2),it=VE(Zi+s.convert(String(m))),ht=VE(it+s.bandwidth)}const vt=it+s.bandwidth/2,dt=S-r.convert(st),lt=S-r.convert($),bt=(dt+lt)/2,Dt=S-r.convert(0),$t=S-r.convert(Q),It=Math.cos(vt)*bt,Ne=Math.sin(vt)*bt,Zt=this.properties.label.enabled?C(z,tt,It,Ne):void 0,hs=this.getColumnWidth(it,ht);E.push({series:this,datum:z,point:{x:It,y:Ne,size:0},midPoint:{x:It,y:Ne},label:Zt,angleValue:j,radiusValue:tt,negative:J,innerRadius:dt,outerRadius:lt,stackInnerRadius:Dt,stackOuterRadius:$t,startAngle:it,endAngle:ht,axisInnerRadius:x,axisOuterRadius:b,columnWidth:hs,index:w})}),{itemId:D,nodeData:E,labelData:E}):O})}getColumnWidth(t,e){return NaN}update(t){return F(this,arguments,function*({seriesRect:e}){const i=this.checkResize(e);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(t,e){var i;let s=[];if(e){const f=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();f?.datum&&f.series===this&&(s=[f])}else s=this.nodeData;const{fill:n,fillOpacity:a,stroke:o,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h,cornerRadius:u,angleKey:d,radiusKey:p}=f$(e?this.properties.highlightStyle.item:null,this.properties),g=f=>f.angleValue;t.update(s,void 0,g).each((f,m)=>{var v,y,x,b,S,k,D,T;const I=this.properties.itemStyler?this.ctx.callbackCache.call(this.properties.itemStyler,{datum:m.datum,fill:n,fillOpacity:a,stroke:o,strokeWidth:l,strokeOpacity:r,lineDash:c,lineDashOffset:h,cornerRadius:u,highlighted:e,angleKey:d,radiusKey:p,seriesId:this.id}):void 0;this.updateItemPath(f,m,e,I),f.fill=(v=I?.fill)!=null?v:n,f.fillOpacity=(y=I?.fillOpacity)!=null?y:a,f.stroke=(x=I?.stroke)!=null?x:o,f.strokeWidth=(b=I?.strokeWidth)!=null?b:l,f.strokeOpacity=(S=I?.strokeOpacity)!=null?S:r,f.lineDash=(k=I?.lineDash)!=null?k:c,f.lineDashOffset=(D=I?.lineDashOffset)!=null?D:h,f.cornerRadius=(T=I?.cornerRadius)!=null?T:u,f.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();GE.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),v$(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();GE.fromToMotion(this.id,"datums",e,[t],i),x$(this,"labels",e,this.labelSelection)}getTooltipHtml(t){var e;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,radiusKey:o,angleName:r,radiusName:l,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:m,itemStyler:v,tooltip:y}=this.properties,{angleValue:x,radiusValue:b,datum:S,itemId:k}=t,D=s[ha.X],T=s[ha.Y];if(!this.properties.isValid()||!(D&&T&&k$(b))||!n)return Fl._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const I=D.formatDatum(x),N=T.formatDatum(b),C=UE(l),E=UE(`${I}: ${N}`),{fill:O}=(e=v&&this.ctx.callbackCache.call(v,{highlighted:!1,seriesId:i,datum:S,angleKey:a,radiusKey:o,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:m}))!=null?e:{fill:c};return y.toTooltipHtml({title:C,backgroundColor:c,content:E},{seriesId:i,datum:S,color:O,title:C,angleKey:a,radiusKey:o,angleName:r,radiusName:l,angleValue:x,itemId:k,radiusValue:b})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}getLegendData(t){var e;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{radiusKey:i,radiusName:s,fill:n,stroke:a,fillOpacity:o,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:s??i},symbols:[{marker:{fill:n??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:o??1,strokeOpacity:r??1,strokeWidth:l}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,o=s.id===this.id||e&&n===1;this.toggleSeriesItem(i,o)}computeLabelsBBox(){return null}},WE=(Y(),W(H)),{Label:I$}=WE._Scene,{SeriesProperties:A$,SeriesTooltip:L$,Validate:ai,COLOR_STRING:YE,DEGREE:T$,FUNCTION:N$,LINE_DASH:O$,NUMBER:C$,OBJECT:KE,POSITIVE_NUMBER:M_,RATIO:jE,STRING:ep}=WE._ModuleSupport,Fe=class extends A${constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new I$,this.tooltip=new L$}};M([ai(ep)],Fe.prototype,"angleKey",2),M([ai(ep,{optional:!0})],Fe.prototype,"angleName",2),M([ai(ep)],Fe.prototype,"radiusKey",2),M([ai(ep,{optional:!0})],Fe.prototype,"radiusName",2),M([ai(YE)],Fe.prototype,"fill",2),M([ai(jE)],Fe.prototype,"fillOpacity",2),M([ai(YE)],Fe.prototype,"stroke",2),M([ai(M_)],Fe.prototype,"strokeWidth",2),M([ai(jE)],Fe.prototype,"strokeOpacity",2),M([ai(O$)],Fe.prototype,"lineDash",2),M([ai(M_)],Fe.prototype,"lineDashOffset",2),M([ai(M_)],Fe.prototype,"cornerRadius",2),M([ai(N$,{optional:!0})],Fe.prototype,"itemStyler",2),M([ai(T$)],Fe.prototype,"rotation",2),M([ai(ep,{optional:!0})],Fe.prototype,"stackGroup",2),M([ai(C$,{optional:!0})],Fe.prototype,"normalizedTo",2),M([ai(KE)],Fe.prototype,"label",2),M([ai(KE)],Fe.prototype,"tooltip",2);var E$=(Y(),W(H)),R$=(Y(),W(H)),{motion:w$}=R$._Scene;function XE(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(o,r,l)=>{e.forEach(c=>{var h,u;const d=t[c];let p=(l==="removed"||l==="updated"?o:r)[c],g=(l==="removed"?o:r)[c];isNaN(g)&&(g=(u=(h=o.previousDatum)==null?void 0:h[c])!=null?u:NaN);const f=p-g;Math.abs(f)>Math.PI&&(p-=Math.sign(f)*2*Math.PI),d.set(r,{from:p,to:g})})},s=(o,r)=>({startAngle:t.startAngle.get(o)[r],endAngle:t.endAngle.get(o)[r]});return{calculate:i,from:o=>s(o,"from"),to:o=>s(o,"to")}}function $E(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function P$(t){const e=XE();return{toFn:(n,a,o)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,u,d,p;return o==="removed"?(c=n.innerRadius,h=n.innerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=isNaN(a.innerRadius)?t:a.innerRadius,h=isNaN(a.outerRadius)?t:a.outerRadius,u=isNaN(a.columnWidth)?n.columnWidth:a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l}},fromFn:(n,a,o)=>{o=$E(n,a,o),e.calculate(n,a,o);const{startAngle:r,endAngle:l}=e.from(a);let c,h,u,d,p;o==="removed"||o==="updated"?(c=n.innerRadius,h=n.outerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=t,h=t,u=a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius);const g=w$.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:r,endAngle:l,phase:g}}}}function B$(t,{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:o,endAngle:r}}var{SectorBox:Dy,motion:F$}=E$._Scene;function __(t){const{negative:e,innerRadius:i,outerRadius:s,stackInnerRadius:n,stackOuterRadius:a}=t;return{innerRadius:e?a:n,outerRadius:e?n:a,clipInnerRadius:e?s:i,clipOuterRadius:e?i:s}}function z$(t){const e=XE();return{toFn:(n,a,o)=>{const{startAngle:r,endAngle:l}=e.to(a);let c,h,u;if(o==="removed")c=t,h=t,u=new Dy(r,l,c,h);else{let d,p;({innerRadius:c,outerRadius:h,clipInnerRadius:d,clipOuterRadius:p}=__(a)),isNaN(c)&&(c=t),isNaN(h)&&(h=t),isNaN(d)&&(d=t),isNaN(p)&&(p=t),u=new Dy(r,l,d,p)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u}},fromFn:(n,a,o)=>{o=$E(n,a,o),e.calculate(n,a,o);const{startAngle:r,endAngle:l}=e.from(a);let c,h,u;o==="removed"||o==="updated"?(c=n.innerRadius,h=n.outerRadius,u=n.clipSector):(c=t,h=t),u??(u=new Dy(r,l,c,h));const d=F$.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u,phase:d}}}}function G$(t,e){const{startAngle:i,endAngle:s}=e,{innerRadius:n,outerRadius:a,clipInnerRadius:o,clipOuterRadius:r}=__(e),l=new Dy(i,s,o,r);return{innerRadius:n,outerRadius:a,startAngle:i,endAngle:s,clipSector:l}}var{Sector:V$,SectorBox:U$}=c$._Scene,k_=class extends HE{constructor(t){super(t,{animationResetFns:{item:G$}}),this.properties=new Fe}getStackId(){var t,e;return`nightingale-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-yValues`}nodeFactory(){return new V$}updateItemPath(t,e,i,s){const{negative:n}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=n?0:this.properties.cornerRadius,t.endOuterCornerRadius=n?0:this.properties.cornerRadius,t.startInnerCornerRadius=n?this.properties.cornerRadius:0,t.endInnerCornerRadius=n?this.properties.cornerRadius:0,i){const{startAngle:a,endAngle:o}=e,{innerRadius:r,outerRadius:l,clipInnerRadius:c,clipOuterRadius:h}=__(e);t.innerRadius=r,t.outerRadius=l,t.startAngle=a,t.endAngle=o,t.clipSector=new U$(a,o,c,h)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return z$(t)}};k_.className="NightingaleSeries",k_.type="nightingale";var Fh=(Y(),W(H)),H$={series:{strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Fh._Theme.DEFAULT_FONT_FAMILY,color:Fh._Theme.DEFAULT_LABEL_COLOUR}},axes:{[Fh._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:Fh._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[Fh._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:Fh._Theme.POLAR_AXIS_SHAPE.CIRCLE}}},W$={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:k_,tooltipDefaults:{range:"exact"},defaultAxes:[{type:S_._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:S_._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:H$,paletteFactory({takeColors:t,userPalette:e}){const{fills:[i],strokes:[s]}=t(1);return{fill:i,stroke:e!=="inbuilt"?s:S_._Theme.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},zh=(Y(),W(H)),Y$=(Y(),W(H)),zl=(Y(),W(H)),K$=class extends lo{constructor(){super(),this.append([new zl._Scene.Line({tag:0}),new zl._Scene.Line({tag:1}),new zl._Scene.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:s,yLow:n,width:a,height:o,datum:{itemId:r}}=this,l=zl._Scene.Selection.select(this,zl._Scene.Rect),[c]=l.selectByTag(0),[h]=l.selectByTag(1),[u]=l.selectByTag(2);if(a===0||o===0){c.visible=!1,h.visible=!1,u.visible=!1;return}c.visible=!0,h.visible=!0,u.visible=!0;const d=a/2;c.setProperties({x1:Math.floor(t+d),x2:Math.floor(t+d),y1:s,y2:n});const p=r==="up",g=p?i:e,f=p?e:i;h.setProperties({x1:Math.floor(t),x2:Math.floor(t+d),y:Math.round(g)}),u.setProperties({x1:Math.floor(t+d),x2:Math.floor(t+a),y:Math.round(f)})}updateDatumStyles(t,e){const i=zl._Scene.Selection.select(this,zl._Scene.Rect),[s]=i.selectByTag(0),[n]=i.selectByTag(1),[a]=i.selectByTag(2);s.setProperties(e),n.setProperties(e),a.setProperties(e)}},j$=(Y(),W(H)),{BaseProperties:ZE,Validate:ua,COLOR_STRING:X$,FUNCTION:qE,LINE_DASH:$$,OBJECT:D_,POSITIVE_NUMBER:QE,RATIO:Z$}=j$._ModuleSupport,lr=class extends ZE{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};M([ua(X$)],lr.prototype,"stroke",2),M([ua(QE)],lr.prototype,"strokeWidth",2),M([ua(Z$)],lr.prototype,"strokeOpacity",2),M([ua($$)],lr.prototype,"lineDash",2),M([ua(QE)],lr.prototype,"lineDashOffset",2),M([ua(qE,{optional:!0})],lr.prototype,"itemStyler",2);var I_=class extends ZE{constructor(){super(...arguments),this.up=new lr,this.down=new lr}};M([ua(D_)],I_.prototype,"up",2),M([ua(D_)],I_.prototype,"down",2);var A_=class extends Oi{constructor(){super(...arguments),this.item=new I_}};M([ua(D_)],A_.prototype,"item",2),M([ua(qE,{optional:!0})],A_.prototype,"itemStyler",2);var{mergeDefaults:JE}=Y$._ModuleSupport,L_=class extends PC{constructor(t){super(t,LC),this.properties=new A_}createNodeData(){return F(this,null,function*(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r}=this.getItemConfig(i.itemId);return K(B({},i),{stroke:s,strokeWidth:n,strokeOpacity:a,lineDash:o,lineDashOffset:r})});return K(B({},t),{nodeData:e})})}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:s}}=this,{xKey:n,openKey:a,closeKey:o,highKey:r,lowKey:l,itemStyler:c}=this.properties,{stroke:h,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:g}=this.getItemConfig(t.itemId);if(c){const f=s.call(c,{datum:t.datum,itemId:t.itemId,seriesId:i,highlighted:e,xKey:n,openKey:a,closeKey:o,highKey:r,lowKey:l,stroke:h,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:g});if(f)return JE(f,this.getSeriesStyles(t))}return this.getSeriesStyles(t)}nodeFactory(){return new K$}getSeriesStyles(t){const{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}=t;return{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}}getActiveStyles(t,e){const i=this.getFormattedStyles(t,e);return e?JE(this.properties.highlightStyle.item,i):i}computeFocusBounds(t){return NC(this,t)}};L_.className="ohlc",L_.type="ohlc";var q$={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",instanceConstructor:L_,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:zh._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:zh._Theme.POSITION.LEFT},{type:zh._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:zh._Theme.POSITION.BOTTOM}],themeTemplate:{animation:{enabled:!1},axes:{[zh._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[zh._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const{strokes:[n]}=t(e);return{item:{up:{stroke:n},down:{stroke:n}}}}return{item:{up:{stroke:s.up.stroke},down:{stroke:s.down.stroke}}}}},T_=(Y(),W(H)),ip=(Y(),W(H)),tR={series:{label:{enabled:!1,fontSize:12,fontFamily:ip._Theme.DEFAULT_FONT_FAMILY,color:ip._Theme.DEFAULT_LABEL_COLOUR},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[ip._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},Q$=ip._ModuleSupport.mergeDefaults({series:{strokeWidth:2}},tR),J$=ip._ModuleSupport.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},tR),N_=(Y(),W(H)),cr=(Y(),W(H)),eR=(Y(),W(H)),{Label:tZ}=eR._Scene,{SeriesMarker:eZ,SeriesProperties:iZ,SeriesTooltip:sZ,Validate:Xi,BOOLEAN:nZ,COLOR_STRING:aZ,DEGREE:oZ,FUNCTION:rZ,LINE_DASH:lZ,OBJECT:O_,POSITIVE_NUMBER:iR,RATIO:cZ,STRING:Iy}=eR._ModuleSupport,yi=class extends iZ{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new eZ,this.label=new tZ,this.tooltip=new sZ,this.connectMissingData=!1}};M([Xi(Iy)],yi.prototype,"angleKey",2),M([Xi(Iy)],yi.prototype,"radiusKey",2),M([Xi(Iy,{optional:!0})],yi.prototype,"angleName",2),M([Xi(Iy,{optional:!0})],yi.prototype,"radiusName",2),M([Xi(aZ)],yi.prototype,"stroke",2),M([Xi(iR)],yi.prototype,"strokeWidth",2),M([Xi(cZ)],yi.prototype,"strokeOpacity",2),M([Xi(lZ)],yi.prototype,"lineDash",2),M([Xi(iR)],yi.prototype,"lineDashOffset",2),M([Xi(rZ,{optional:!0})],yi.prototype,"itemStyler",2),M([Xi(oZ)],yi.prototype,"rotation",2),M([Xi(O_)],yi.prototype,"marker",2),M([Xi(O_)],yi.prototype,"label",2),M([Xi(O_)],yi.prototype,"tooltip",2),M([Xi(nZ)],yi.prototype,"connectMissingData",2);var{ChartAxisDirection:po,PolarAxis:hZ,SeriesNodePickMode:sR,valueProperty:nR,fixNumericExtent:uZ,seriesLabelFadeInAnimation:dZ,markerFadeInAnimation:pZ,resetMarkerFn:gZ,animationValidation:fZ,isFiniteNumber:mZ,computeMarkerFocusBounds:yZ}=cr._ModuleSupport,{BBox:vZ,Group:xZ,Path:bZ,PointerEvents:SZ,Selection:aR,Text:MZ,getMarker:_Z}=cr._Scene,{extent:kZ,isNumberEqual:oR,sanitizeHtml:rR,toFixed:lR}=cr._Util,DZ=class extends cr._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},C_=class extends cr._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[sR.NEAREST_NODE,sR.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:gZ}}),this.properties=new yi,this.NodeEvent=DZ,this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const e=new xZ;this.contentGroup.append(e),this.lineSelection=aR.select(e,bZ),e.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:t}=this.properties.marker,e=_Z(t);return new e}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===po.X)return e.getDomain(this,"angleValue","value",i);{const s=e.getDomain(this,"radiusValue","value",i),n=kZ(s.length===0?s:[0].concat(s));return uZ(n)}}processData(t){return F(this,null,function*(){var e,i;if(!this.properties.isValid())return;const{angleKey:s,radiusKey:n}=this.properties,a=[];this.ctx.animationManager.isSkipped()||a.push(fZ());const o=(e=this.axes[po.Y])==null?void 0:e.scale.type,r=(i=this.axes[po.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[nR(s,r,{id:"angleValue"}),nR(n,o,{id:"radiusValue",invalidValue:void 0}),...a]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[po.Y];return t instanceof hZ?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){return F(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}createNodeData(){return F(this,null,function*(){var t,e;const{processedData:i,dataModel:s}=this;if(!i||!s||!this.properties.isValid())return;const{angleKey:n,radiusKey:a,angleName:o,radiusName:r,marker:l,label:c}=this.properties,h=(t=this.axes[po.X])==null?void 0:t.scale,u=(e=this.axes[po.Y])==null?void 0:e.scale;if(!h||!u)return;const d=s.resolveProcessedDataIndexById(this,"angleValue"),p=s.resolveProcessedDataIndexById(this,"radiusValue"),g=this.getAxisInnerRadius(),f=i.data.map(m=>{const{datum:v,values:y}=m,x=y[d],b=y[p],S=h.convert(x),k=this.radius+g-u.convert(b),D=Math.cos(S),T=Math.sin(S),I=D*k,N=T*k;let C;if(c.enabled){const E=this.getLabelText(c,{value:b,datum:v,angleKey:n,radiusKey:a,angleName:o,radiusName:r},O=>mZ(O)?O.toFixed(2):String(O));if(E){let O="right";oR(D,0)?O="center":D>0&&(O="left");let P="bottom";oR(T,0)?P="middle":T>0&&(P="top"),C={x:I+D*l.size,y:N+T*l.size,text:E,textAlign:O,textBaseline:P}}}return{series:this,datum:v,point:{x:I,y:N,size:l.size},midPoint:{x:I,y:N},label:C,angleValue:x,radiusValue:b,missing:!cr._Util.isNumber(S)||!cr._Util.isNumber(k)}});return{itemId:a,nodeData:f,labelData:f}})}update(t){return F(this,arguments,function*({seriesRect:e}){var i,s;const n=this.checkResize(e),a=!this.ctx.animationManager.isSkipped(),{series:o}=(s=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())!=null?s:{};this.highlightGroup.visible=(a||this.visible)&&o===this,yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),n&&this.animationState.transition("resize"),this.animationState.transition("update")})}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=aR.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){var e;return(e=t?.fill)!=null?e:this.properties.marker.fill}updateMarkers(t,e){var i;const{angleKey:s,radiusKey:n,marker:a,visible:o}=this.properties;let r=[];if(o&&a.shape&&a.enabled)if(e){const c=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();c?.datum&&(r=[c])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0;t.update(r).each((c,h)=>{var u,d,p,g,f,m,v,y,x,b,S,k,D,T,I;const N=this.getMarkerFill(l),C=(u=l?.fillOpacity)!=null?u:this.properties.marker.fillOpacity,E=(p=(d=l?.stroke)!=null?d:a.stroke)!=null?p:this.properties.stroke,O=(m=(f=(g=l?.strokeWidth)!=null?g:a.strokeWidth)!=null?f:this.properties.strokeWidth)!=null?m:1,P=(v=l?.strokeOpacity)!=null?v:this.properties.marker.strokeOpacity,w=a.itemStyler?this.ctx.callbackCache.call(a.itemStyler,{datum:h.datum,angleKey:s,radiusKey:n,fill:N,fillOpacity:C,stroke:E,strokeWidth:O,strokeOpacity:P,shape:a.shape,size:a.size,highlighted:e,seriesId:this.id}):void 0;c.fill=(y=w?.fill)!=null?y:N,c.stroke=(x=w?.stroke)!=null?x:E,c.strokeWidth=(b=w?.strokeWidth)!=null?b:O,c.fillOpacity=(k=(S=l?.fillOpacity)!=null?S:a.fillOpacity)!=null?k:1,c.strokeOpacity=(T=(D=a.strokeOpacity)!=null?D:this.properties.strokeOpacity)!=null?T:1,c.size=(I=w?.size)!=null?I:a.size;const{x:R,y:G}=h.point;c.translationX=R,c.translationY=G,c.visible=o&&c.size>0&&!isNaN(R)&&!isNaN(G)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipHtml(t){var e;if(!this.properties.isValid())return cr._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:i}=this,{angleKey:s,radiusKey:n,angleName:a,radiusName:o,marker:r,tooltip:l}=this.properties,{datum:c,angleValue:h,radiusValue:u,itemId:d}=t,p=typeof h=="number"?lR(h):String(h),g=typeof u=="number"?lR(u):String(u),f=rR(o),m=rR(`${p}: ${g}`),{itemStyler:v,fill:y,fillOpacity:x,stroke:b,strokeWidth:S=this.properties.strokeWidth,strokeOpacity:k,shape:D,size:T}=r,{fill:I}=(e=v&&this.ctx.callbackCache.call(v,{datum:c,angleKey:s,radiusKey:n,fill:y,fillOpacity:x,stroke:b,strokeWidth:S,strokeOpacity:k,shape:D,size:T,highlighted:!1,seriesId:i}))!=null?e:{fill:y};return l.toTooltipHtml({title:f,content:m,backgroundColor:I},{datum:c,angleKey:s,angleName:a,radiusKey:n,radiusName:o,title:f,color:I,seriesId:i,itemId:d})}getLegendData(t){var e,i,s,n,a,o,r,l,c,h;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{radiusKey:u,radiusName:d,stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,visible:v,marker:y}=this.properties;return[{legendType:"category",id:this.id,itemId:u,seriesId:this.id,enabled:v,label:{text:d??u},symbols:[{marker:{shape:y.shape,fill:(n=(s=(i=this.getMarkerFill())!=null?i:y.stroke)!=null?s:p)!=null?n:"rgba(0, 0, 0, 0)",stroke:(o=(a=y.stroke)!=null?a:p)!=null?o:"rgba(0, 0, 0, 0)",fillOpacity:(r=y.fillOpacity)!=null?r:1,strokeOpacity:(c=(l=y.strokeOpacity)!=null?l:f)!=null?c:1,strokeWidth:(h=y.strokeWidth)!=null?h:0,enabled:y.enabled||g<=0},line:{stroke:p,strokeOpacity:f,strokeWidth:g,lineDash:m}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,o=s.id===this.id||e&&n===1;this.toggleSeriesItem(i,o)}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{rootGroup:a,nodeData:o,centerX:r,centerY:l}=this,c=a.transformPoint(s,n),h=this.radius;if(Math.sqrt(nt(s-r,2)+nt(n-l,2))>h+this.properties.marker.size)return;let d=1/0,p;for(const g of o){const{point:{x:f=NaN,y:m=NaN}={}}=g;if(isNaN(f)||isNaN(m))continue;const v=Math.sqrt(nt(c.x-f-r,2)+nt(c.y-m-l,2));v<d&&(d=v,p=g)}if(p){const g=Math.max(d-((i=(e=p.point)==null?void 0:e.size)!=null?i:0),0);return{datum:p,distance:g}}}computeLabelsBBox(){return F(this,null,function*(){const{label:t}=this.properties;yield this.maybeRefreshNodeData();const e=[],i=new MZ;return this.nodeData.forEach(s=>{if(!t.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(t),i.setAlign(s.label);const n=i.computeBBox();e.push(n)}),e.length===0?null:vZ.merge(e)})}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const t=this.getLineNode();t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=SZ.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const s=this.axes[po.Y],n=this.axes[po.X],a=n?.isReversed(),r=s?.isReversed()&&!a?[...t].reverse():t,l=[];let c=!1,h;return r.forEach((u,d)=>{let{x:p,y:g}=u.point;const f=isNaN(p)||isNaN(g);f||(h??(h=u)),f&&!i&&(p=0,g=0);const m=d===0||!e&&!i&&(f||c);l.push({x:p,y:g,moveTo:m}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:s}=t;s.clear(!0);const n=this.getAxisInnerRadius(),a=this.axes[po.Y],r=a?.isReversed()?this.radius+n-a?.scale.convert(0):n;e.forEach(l=>{const{x:c,y:h,arc:u,radius:d=0,startAngle:p=0,endAngle:g=0,moveTo:f}=l,m=Math.atan2(h,c),v=r*Math.cos(m),y=r*Math.sin(m),x=i,b=v*(1-x)+c*x,S=y*(1-x)+h*x;u?s.arc(c,h,d,p,g):f?s.moveTo(b,S):s.lineTo(b,S)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints();this.animateSinglePath(this.getLineNode(),e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),pZ(this,i,"added",t),dZ(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0),i.forEach(({x:s,y:n,moveTo:a})=>{a?e.moveTo(s,n):e.lineTo(s,n)}),t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,angleKey:e,radiusKey:i,highlighted:!0})}computeFocusBounds(t){return yZ(this,t)}};C_.className="RadarSeries";var IZ=(Y(),W(H)),{RATIO:AZ,COLOR_STRING:LZ,Validate:cR}=IZ._ModuleSupport,E_=class extends yi{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};M([cR(LZ)],E_.prototype,"fill",2),M([cR(AZ)],E_.prototype,"fillOpacity",2);var{Group:TZ,Path:NZ,PointerEvents:OZ,Selection:CZ}=N_._Scene,{ChartAxisDirection:hR}=N_._ModuleSupport,R_=class extends C_{constructor(t){super(t),this.properties=new E_,this.resetInvalidToZero=!0;const e=new TZ;e.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(e),this.areaSelection=CZ.select(e,NZ)}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(t){var e,i;return(i=(e=t?.fill)!=null?e:this.properties.marker.fill)!=null?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.pointerEvents=OZ.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){var t,e;const i=this.getLinePoints(),s=l=>{const c=this.axes[l];return c instanceof N_._ModuleSupport.PolarAxis?c:void 0},n=s(hR.Y),a=s(hR.X);if(!n?.isReversed())return i;const{points:r=[]}=(e=(t=a?.getAxisLinePoints)==null?void 0:t.call(a))!=null?e:{};return i.concat(...r)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:s,y:n,moveTo:a,arc:o,radius:r=0,startAngle:l=0,endAngle:c=0})=>{o?e.arc(s,n,r,l,c):a?e.moveTo(s,n):e.lineTo(s,n)}),e.closePath(),t.checkPathDirty()}}};R_.className="RadarAreaSeries",R_.type="radar-area";var{markerPaletteFactory:EZ}=T_._ModuleSupport,RZ={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:R_,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:T_._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:T_._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:J$,paletteFactory:t=>{const{marker:e}=EZ(t);return{stroke:e.stroke,fill:e.fill,marker:e}}},uR=(Y(),W(H)),w_=class extends C_{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};w_.className="RadarLineSeries",w_.type="radar-line";var wZ={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:w_,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:uR._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:uR._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:Q$,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{stroke:e,marker:{fill:e,stroke:i}}}},dR=(Y(),W(H)),Gl=(Y(),W(H)),pR=(Y(),W(H)),{Label:PZ}=pR._Scene,{SeriesProperties:BZ,SeriesTooltip:FZ,Validate:oi,COLOR_STRING:gR,DEGREE:zZ,FUNCTION:GZ,LINE_DASH:VZ,NUMBER:UZ,OBJECT:fR,POSITIVE_NUMBER:P_,RATIO:mR,STRING:sp}=pR._ModuleSupport,$e=class extends BZ{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new PZ,this.tooltip=new FZ}};M([oi(sp)],$e.prototype,"angleKey",2),M([oi(sp)],$e.prototype,"radiusKey",2),M([oi(sp,{optional:!0})],$e.prototype,"angleName",2),M([oi(sp,{optional:!0})],$e.prototype,"radiusName",2),M([oi(gR)],$e.prototype,"fill",2),M([oi(mR)],$e.prototype,"fillOpacity",2),M([oi(gR)],$e.prototype,"stroke",2),M([oi(P_)],$e.prototype,"strokeWidth",2),M([oi(mR)],$e.prototype,"strokeOpacity",2),M([oi(VZ)],$e.prototype,"lineDash",2),M([oi(P_)],$e.prototype,"lineDashOffset",2),M([oi(P_)],$e.prototype,"cornerRadius",2),M([oi(GZ,{optional:!0})],$e.prototype,"itemStyler",2),M([oi(zZ)],$e.prototype,"rotation",2),M([oi(sp,{optional:!0})],$e.prototype,"stackGroup",2),M([oi(UZ,{optional:!0})],$e.prototype,"normalizedTo",2),M([oi(fR)],$e.prototype,"label",2),M([oi(fR)],$e.prototype,"tooltip",2);var HZ=(Y(),W(H)),{SectorBox:yR,motion:WZ}=HZ._Scene;function YZ(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function vR(t){return{toFn:(s,n,a)=>{let o,r,l,c,h;return a==="removed"?(o=t,r=t,l=n.innerRadius,c=n.outerRadius,h=new yR(o,r,l,c)):(o=n.startAngle,r=n.endAngle,l=isNaN(n.innerRadius)?s.innerRadius:n.innerRadius,c=isNaN(n.outerRadius)?s.outerRadius:n.outerRadius,h=n.clipSector),{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(s,n,a)=>{a=YZ(s,n,a);let o,r,l,c,h;a==="removed"||a==="updated"?(o=s.startAngle,r=s.endAngle,l=s.innerRadius,c=s.outerRadius,h=s.clipSector):(o=t,r=t,l=n.innerRadius,c=n.outerRadius),h??(h=new yR(o,r,l,c));const u=WZ.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:o,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:u}}}}function KZ(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:da,PolarAxis:jZ,diff:XZ,isDefined:$Z,groupAccumulativeValueProperty:xR,keyProperty:ZZ,mergeDefaults:qZ,normaliseGroupTo:QZ,valueProperty:JZ,fixNumericExtent:t6,resetLabelFn:e6,seriesLabelFadeInAnimation:i6,seriesLabelFadeOutAnimation:s6,animationValidation:n6,isFiniteNumber:a6}=Gl._ModuleSupport,{BandScale:o6}=Gl._Scale,{Sector:r6,SectorBox:l6,motion:bR}=Gl._Scene,{angleBetween:c6,isNumber:h6,sanitizeHtml:SR}=Gl._Util,u6=class extends Gl._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},B_=class extends Gl._ModuleSupport.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:KZ,label:e6}}),this.properties=new $e,this.NodeEvent=u6,this.groupScale=new o6,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new r6}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(t===da.X){const n=e[da.X],a=i.getDomain(this,"angleValue-end","value",s),o=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return t6(o,n)}else return i.getDomain(this,"radiusValue","key",s)}processData(t){return F(this,null,function*(){var e,i;const{angleKey:s,radiusKey:n,normalizedTo:a,visible:o}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(o||r))return;const l=this.getStackId(),c=`${l}-trailing`,h=[];$Z(a)&&h.push(QZ([l,c],Math.abs(a),"range")),r&&(this.processedData&&h.push(XZ(this.processedData)),h.push(n6()));const u=this.visible||!r?{}:{forceValue:0},d=(e=this.axes[da.Y])==null?void 0:e.scale.type,p=(i=this.axes[da.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[ZZ(n,d,{id:"radiusValue"}),JZ(s,p,B({id:"angleValue-raw",invalidValue:null},u)),...xR(s,"normal","current",B({id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:l,separateNegative:!0},u),p),...xR(s,"trailing","current",B({id:"angleValue-start",invalidValue:null,groupId:c,separateNegative:!0},u),p),...h]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,s=this.circleCache;return t===s.r&&e===s.cx&&i===s.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){return F(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const t=this.axes[da.Y];return t instanceof jZ?this.radius*t.innerRadiusRatio:0}createNodeData(){return F(this,null,function*(){var t;const{processedData:e,dataModel:i}=this;if(!e||!i||!this.properties.isValid())return;const s=this.axes[da.X],n=this.axes[da.Y],a=s?.scale,o=n?.scale;if(!a||!o)return;const r=i.resolveProcessedDataIndexById(this,"angleValue-start"),l=i.resolveProcessedDataIndexById(this,"angleValue-end"),c=i.resolveProcessedDataIndexById(this,"angleValue-range"),h=i.resolveProcessedDataIndexById(this,"angleValue-raw");let u=0;n instanceof xl&&(u=n.groupPaddingInner);const{groupScale:d}=this,{index:p,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:g}).map((O,P)=>String(P)),d.range=[0,Math.abs((t=o.bandwidth)!=null?t:0)],d.paddingInner=g>1?u:0;const f=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,m=s.isReversed(),v=n.isReversed(),y=v?this.radius:this.getAxisInnerRadius(),b=(v?this.getAxisInnerRadius():this.radius)+y,{angleKey:S,radiusKey:k,angleName:D,radiusName:T,label:I}=this.properties,N=(O,P,w,R)=>{const G=this.getLabelText(I,{value:P,datum:O,angleKey:S,radiusKey:k,angleName:D,radiusName:T},z=>a6(z)?z.toFixed(2):String(z));if(G)return{x:w,y:R,text:G,textAlign:"center",textBaseline:"middle"}},C=[],E={itemId:k,nodeData:C,labelData:C};return this.visible&&e.data.forEach((O,P)=>{var w;const{datum:R,keys:G,values:z,aggValues:U}=O,V=G[0],X=z[h],j=X>=0&&!Object.is(X,-0),tt=z[r],ct=z[l],st=(w=U?.[c][j?1:0])!=null?w:0,$=j===m;let Q=a.convert(tt,{clampMode:"clamped"}),J=a.convert(ct,{clampMode:"clamped"}),it=a.convert(0,{clampMode:"clamped"}),ht=a.convert(st,{clampMode:"clamped"});$&&([it,ht]=[ht,it],[Q,J]=[J,Q]);const dt=b-o.convert(V)+d.convert(String(p)),lt=dt+f,bt=(dt+lt)/2,Dt=Q+c6(Q,J)/2,$t=Math.cos(Dt)*bt,It=Math.sin(Dt)*bt,Ne=this.properties.label.enabled?N(R,X,$t,It):void 0,Zt=new l6(Q,J,dt,lt);C.push({series:this,datum:R,point:{x:$t,y:It,size:0},midPoint:{x:$t,y:It},label:Ne,angleValue:X,radiusValue:V,innerRadius:dt,outerRadius:lt,startAngle:it,endAngle:ht,clipSector:Zt,reversed:$,index:P})}),E})}update(t){return F(this,arguments,function*({seriesRect:e}){const i=this.checkResize(e);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(t,e){var i;let s=[];if(e){const f=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();f?.datum&&f.series===this&&(s=[f])}else s=this.nodeData;const{fill:n,fillOpacity:a,stroke:o,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h,cornerRadius:u,angleKey:d,radiusKey:p}=qZ(e?this.properties.highlightStyle.item:null,this.properties),g=f=>f.radiusValue;t.update(s,void 0,g).each((f,m)=>{var v,y,x,b,S,k,D,T,I,N,C,E;const O=this.properties.itemStyler?this.ctx.callbackCache.call(this.properties.itemStyler,{seriesId:this.id,datum:m.datum,highlighted:e,angleKey:d,radiusKey:p,fill:n,fillOpacity:a,stroke:o,strokeWidth:l,strokeOpacity:r,lineDash:c,lineDashOffset:h,cornerRadius:u}):void 0;f.fill=(v=O?.fill)!=null?v:n,f.fillOpacity=(y=O?.fillOpacity)!=null?y:a,f.stroke=(x=O?.stroke)!=null?x:o,f.strokeWidth=(b=O?.strokeWidth)!=null?b:l,f.strokeOpacity=(S=O?.strokeOpacity)!=null?S:r,f.lineDash=(k=O?.lineDash)!=null?k:c,f.lineDashOffset=(D=O?.lineDashOffset)!=null?D:h,f.lineJoin="round",f.inset=o!=null?((T=O?.strokeWidth)!=null?T:l)/2:0,f.startInnerCornerRadius=m.reversed?(I=O?.cornerRadius)!=null?I:u:0,f.startOuterCornerRadius=m.reversed?(N=O?.cornerRadius)!=null?N:u:0,f.endInnerCornerRadius=m.reversed?0:(C=O?.cornerRadius)!=null?C:u,f.endOuterCornerRadius=m.reversed?0:(E=O?.cornerRadius)!=null?E:u,e&&(f.startAngle=m.startAngle,f.endAngle=m.endAngle,f.clipSector=m.clipSector,f.innerRadius=m.innerRadius,f.outerRadius=m.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){var t;const e=(t=this.axes[da.X])==null?void 0:t.scale;let i=0;if(!e)return vR(i);const s=Math.min(e.domain[0],e.domain[1]),n=Math.max(e.domain[0],e.domain[1]);return s<=0&&n>=0&&(i=e.convert(0)),vR(i)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();bR.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),i6(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();bR.fromToMotion(this.id,"datums",e,[t],i),s6(this,"labels",e,this.labelSelection)}getTooltipHtml(t){var e;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,angleName:o,radiusKey:r,radiusName:l,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:m,itemStyler:v,tooltip:y}=this.properties,{angleValue:x,radiusValue:b,datum:S,itemId:k}=t,D=s[da.X],T=s[da.Y];if(!this.properties.isValid()||!(D&&T&&h6(x))||!n)return Gl._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const I=D.formatDatum(x),N=T.formatDatum(b),C=SR(o),E=SR(`${N}: ${I}`),{fill:O}=(e=v&&this.ctx.callbackCache.call(v,{highlighted:!1,seriesId:i,datum:S,angleKey:a,radiusKey:r,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,strokeOpacity:p,lineDash:g,lineDashOffset:f,cornerRadius:m}))!=null?e:{fill:c};return y.toTooltipHtml({title:C,backgroundColor:c,content:E},{seriesId:i,datum:S,color:O,title:C,angleKey:a,radiusKey:r,angleName:o,radiusName:l,angleValue:x,itemId:k,radiusValue:b})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}getLegendData(t){var e;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{angleKey:i,angleName:s,fill:n,stroke:a,fillOpacity:o,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:s??i},symbols:[{marker:{fill:n??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:o??1,strokeOpacity:r??1,strokeWidth:l}}]}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,o=s.id===this.id||e&&n===1;this.toggleSeriesItem(i,o)}computeLabelsBBox(){return null}getStackId(){var t,e;return`radialBar-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-xValues`}};B_.className="RadialBarSeries",B_.type="radial-bar";var F_=(Y(),W(H)),d6={series:{strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:F_._Theme.DEFAULT_FONT_FAMILY,color:F_._Theme.DEFAULT_INVERTED_LABEL_COLOUR}},axes:{[F_._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},p6={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:B_,tooltipDefaults:{range:"exact"},defaultAxes:[{type:dR._Theme.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:dR._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY}],themeTemplate:d6,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},MR=(Y(),W(H)),_R=(Y(),W(H)),g6=(Y(),W(H)),{Validate:kR,RATIO:DR}=g6._ModuleSupport,z_=class extends Fe{};M([kR(DR,{optional:!0})],z_.prototype,"columnWidthRatio",2),M([kR(DR,{optional:!0})],z_.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:f6,PolarAxis:m6}=_R._ModuleSupport,{RadialColumnShape:y6,getRadialColumnWidth:v6}=_R._Scene,G_=class extends HE{constructor(t){super(t,{animationResetFns:{item:B$}}),this.properties=new z_}getStackId(){var t,e;return`radarColumn-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-yValues`}nodeFactory(){return new y6}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return P$(t)}isRadiusAxisCircle(){const t=this.axes[f6.Y];return t instanceof m6?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return v6(t,e,this.radius,i,s)}};G_.className="RadialColumnSeries",G_.type="radial-column";var Gh=(Y(),W(H)),x6={series:{columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Gh._Theme.DEFAULT_FONT_FAMILY,color:Gh._Theme.DEFAULT_LABEL_COLOUR}},axes:{[Gh._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:Gh._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[Gh._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:Gh._Theme.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},b6={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:G_,tooltipDefaults:{range:"exact"},defaultAxes:[{type:MR._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:MR._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:x6,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0},np=(Y(),W(H)),hr=(Y(),W(H)),IR=(Y(),W(H)),{DropShadow:S6,Label:M6}=IR._Scene,{CartesianSeriesProperties:_6,InterpolationProperties:k6,SeriesMarker:D6,SeriesTooltip:I6,Validate:_e,BOOLEAN:A6,COLOR_STRING:AR,LINE_DASH:L6,OBJECT:ap,PLACEMENT:T6,POSITIVE_NUMBER:V_,RATIO:LR,STRING:Vl}=IR._ModuleSupport,U_=class extends M6{constructor(){super(...arguments),this.placement="outside",this.padding=6}};M([_e(T6)],U_.prototype,"placement",2),M([_e(V_)],U_.prototype,"padding",2);var Ae=class extends _6{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new k6,this.shadow=new S6().set({enabled:!1}),this.marker=new D6,this.label=new U_,this.tooltip=new I6,this.connectMissingData=!1}};M([_e(Vl)],Ae.prototype,"xKey",2),M([_e(Vl)],Ae.prototype,"yLowKey",2),M([_e(Vl)],Ae.prototype,"yHighKey",2),M([_e(Vl,{optional:!0})],Ae.prototype,"xName",2),M([_e(Vl,{optional:!0})],Ae.prototype,"yName",2),M([_e(Vl,{optional:!0})],Ae.prototype,"yLowName",2),M([_e(Vl,{optional:!0})],Ae.prototype,"yHighName",2),M([_e(AR)],Ae.prototype,"fill",2),M([_e(LR)],Ae.prototype,"fillOpacity",2),M([_e(AR)],Ae.prototype,"stroke",2),M([_e(V_)],Ae.prototype,"strokeWidth",2),M([_e(LR)],Ae.prototype,"strokeOpacity",2),M([_e(L6)],Ae.prototype,"lineDash",2),M([_e(V_)],Ae.prototype,"lineDashOffset",2),M([_e(ap)],Ae.prototype,"interpolation",2),M([_e(ap)],Ae.prototype,"shadow",2),M([_e(ap)],Ae.prototype,"marker",2),M([_e(ap)],Ae.prototype,"label",2),M([_e(ap)],Ae.prototype,"tooltip",2),M([_e(A6)],Ae.prototype,"connectMissingData",2);var{valueProperty:TR,keyProperty:N6,ChartAxisDirection:js,mergeDefaults:O6,updateLabelNode:C6,fixNumericExtent:NR,AreaSeriesTag:H_,buildResetPathFn:E6,resetLabelFn:R6,resetMarkerFn:w6,resetMarkerPositionFn:OR,pathSwipeInAnimation:P6,resetMotion:B6,markerSwipeScaleInAnimation:F6,seriesLabelFadeInAnimation:z6,animationValidation:G6,diff:V6,updateClipPath:CR,isFiniteNumber:U6,computeMarkerFocusBounds:ER,plotPath:Ay,pathRanges:RR,pathRangePoints:W_,pathRangePointsReverse:H6}=hr._ModuleSupport,{getMarker:W6,PointerEvents:Y_}=hr._Scene,{sanitizeHtml:Ul,extent:Y6}=hr._Util,K6=class extends hr._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},K_=class extends hr._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:2,directionKeys:{[js.X]:["xKey"],[js.Y]:["yLowKey","yHighKey"]},directionNames:{[js.X]:["xName"],[js.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:E6({getOpacity:()=>this.getOpacity()}),label:R6,marker:(e,i)=>B(B({},w6(e)),OR(e,i))}}),this.properties=new Ae,this.NodeEvent=K6}processData(t){return F(this,null,function*(){var e,i;if(!this.properties.isValid()||!this.visible)return;const{xKey:s,yLowKey:n,yHighKey:a}=this.properties,o=(e=this.axes[js.X])==null?void 0:e.scale,r=(i=this.axes[js.Y])==null?void 0:i.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({xScale:o,yScale:r}),h=[],u=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&h.push(V6(this.processedData)),u&&h.push(G6()),yield this.requestDataModel(t,this.data,{props:[N6(s,l,{id:"xValue"}),TR(n,c,{id:"yLowValue",invalidValue:void 0}),TR(a,c,{id:"yHighValue",invalidValue:void 0}),...h]}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!(e&&i))return[];const{domain:{keys:[n],values:a}}=e;if(t===js.X){const o=i.resolveProcessedDataDefById(this,"xValue"),r=s[js.X];return o?.def.type==="key"&&o.def.valueType==="category"?n:NR(Y6(n),r)}else{const o=i.resolveProcessedDataIndexById(this,"yLowValue"),r=a[o],l=i.resolveProcessedDataIndexById(this,"yHighValue"),c=a[l],h=[r[0]>c[0]?c[0]:r[0],c[1]<r[1]?r[1]:c[1]];return NR(h)}}createNodeData(){return F(this,null,function*(){var t,e;const{data:i,dataModel:s,axes:n,visible:a}=this,o=n[js.X],r=n[js.Y];if(!(i&&a&&o&&r&&s))return;const l=o.scale,c=r.scale,{xKey:h,yLowKey:u,yHighKey:d,connectMissingData:p,marker:g}=this.properties,f=`${u}-${d}`,m=((t=l.bandwidth)!=null?t:0)/2,v=s.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue"]),y=(O,P,w,R)=>{const G=l.convert(O)+m,z=c.convert(P),U=c.convert(w),{size:V}=g;return[{point:{x:G,y:z,moveTo:R},size:V,itemId:"high",yValue:P,xValue:O,enabled:!0},{point:{x:G,y:U,moveTo:R},size:V,itemId:"low",yValue:w,xValue:O,enabled:!1}]},x=[],b=[],S={itemId:f,highPoints:[],lowPoints:[]},k={itemId:f,highPoints:[],lowPoints:[]},D={itemId:f,labelData:x,nodeData:b,fillData:k,strokeData:S,scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return D;const T=k.highPoints,I=k.lowPoints,N=S.highPoints,C=S.lowPoints;let E=!0;return(e=this.processedData)==null||e.data.forEach(({keys:O,datum:P,values:w},R)=>{const G=s.resolveProcessedDataDefsValues(v,{keys:O,values:w}),{xValue:z,yHighValue:U,yLowValue:V}=G,j=U==null||V==null?[]:y(z,U,V,!1),tt=V>U;j.forEach(({point:{x:J,y:it},enabled:ht,size:vt,itemId:dt="",yValue:lt})=>{b.push({index:R,series:this,itemId:dt,datum:P,midPoint:{x:J,y:it},yHighValue:U,yLowValue:V,xValue:z,xKey:h,yLowKey:u,yHighKey:d,point:{x:J,y:it,size:vt},enabled:ht});const bt=this.createLabelData({point:{x:J,y:it},value:lt,yLowValue:V,yHighValue:U,itemId:dt,inverted:tt,datum:P,series:this});x.push(bt)});const ct=z!=null,st=U!=null&&V!=null,[$,Q]=y(z,U??0,V??0,E);ct&&st?(T.push($),I.push(Q),N.push($),C.push(Q),E=!1):p||(E=!0)}),D})}createLabelData({point:t,value:e,itemId:i,inverted:s,datum:n,series:a}){const{xKey:o,yLowKey:r,yHighKey:l,xName:c,yName:h,yLowName:u,yHighName:d,label:p}=this.properties,{placement:g,padding:f=10}=p;let m=i;s&&(m=i==="low"?"high":"low");const v=g==="outside"&&m==="high"||g==="inside"&&m==="low"?-1:1;return{x:t.x,y:t.y+f*v,series:a,itemId:i,datum:n,text:this.getLabelText(p,{value:e,datum:n,itemId:i,xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:u,yHighName:d,yName:h},y=>U6(y)?y.toFixed(2):String(y)),textAlign:"center",textBaseline:v===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=W6(t);return new e}updatePathNodes(t){return F(this,null,function*(){const{opacity:e,visible:i}=t,[s,n]=t.paths,a=this.getStrokeWidth(this.properties.strokeWidth);n.setProperties({tag:H_.Stroke,fill:void 0,lineJoin:n.lineCap="round",pointerEvents:Y_.None,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),s.setProperties({tag:H_.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Y_.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:a,opacity:e,visible:i}),CR(this,n),CR(this,s)})}updatePaths(t){return F(this,null,function*(){this.updateAreaPaths(t.paths,t.contextData)})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{interpolation:i}=this.properties,{fillData:s}=e,[n]=t;n.path.clear();for(const a of RR(s.highPoints))Ay(W_(s.highPoints,a),n,i),Ay(H6(s.lowPoints,a),n,i,!0),n.path.closePath();n.checkPathDirty()}updateStrokePath(t,e){const{interpolation:i}=this.properties,{strokeData:s}=e,[,n]=t;n.path.clear(!0);for(const a of RR(s.highPoints))Ay(W_(s.highPoints,a),n,i),Ay(W_(s.lowPoints,a),n,i);n.checkPathDirty()}updateMarkerSelection(t){return F(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return F(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yLowKey:n,yHighKey:a,marker:o,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u}=this.properties,d=O6(i&&this.properties.highlightStyle.item,o.getStyle(),{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u});e.each((p,g)=>{this.updateMarkerStyle(p,o,{datum:g,highlighted:i,xKey:s,yHighKey:a,yLowKey:n},d)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,s=>{s.tag=H_.Label,s.pointerEvents=Y_.None})})}updateLabelNodes(t){return F(this,null,function*(){t.labelSelection.each((e,i)=>{C6(e,this.properties.label,i)})})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}getTooltipHtml(t){const e=this.axes[js.X],i=this.axes[js.Y];if(!this.properties.isValid()||!e||!i)return hr._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:s}=this,{xKey:n,yLowKey:a,yHighKey:o,xName:r,yName:l,yLowName:c,yHighName:h,fill:u,tooltip:d}=this.properties,{datum:p,itemId:g,xValue:f,yLowValue:m,yHighValue:v}=t,y=u??"gray",x=Ul(e.formatDatum(f)),b=Ul(i.formatDatum(m)),S=Ul(i.formatDatum(v)),k=r??n,D=c??a,T=h??o,I=Ul(l),N=l?`<b>${Ul(k)}</b>: ${x}<br><b>${Ul(D)}</b>: ${b}<br><b>${Ul(T)}</b>: ${S}<br>`:`${x}: ${b} - ${S}`;return d.toTooltipHtml({title:I,content:N,backgroundColor:y},{seriesId:s,itemId:g,datum:p,xKey:n,yLowKey:a,yHighKey:o,xName:r,yLowName:c,yHighName:h,yName:l,color:y,title:I,yHighValue:v,yLowValue:m})}getLegendData(t){var e,i;if(t!=="category")return[];const{yLowKey:s,yHighKey:n,yName:a,yLowName:o,yHighName:r,fill:l,stroke:c,strokeWidth:h,strokeOpacity:u,lineDash:d,visible:p,marker:g}=this.properties,f=a??`${o??s} - ${r??n}`;return[{legendType:"category",id:this.id,itemId:`${s}-${n}`,seriesId:this.id,enabled:p,label:{text:`${f}`},symbols:[{marker:{shape:g.shape,fill:(e=g.fill)!=null?e:l,stroke:(i=g.stroke)!=null?i:c,fillOpacity:g.fillOpacity,strokeOpacity:g.strokeOpacity,strokeWidth:g.strokeWidth},line:{stroke:c,strokeOpacity:u,strokeWidth:h,lineDash:d}}]}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new hr._Scene.Group}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),P6(this,a,...n),B6([e],OR),F6(this,a,e),z6(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:e,paths:i}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(i,e)}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yLowKey:i,yHighKey:s,highlighted:!0})}computeFocusBounds(t){const e=ER(this,t),i=ER(this,K(B({},t),{datumIndex:t.datumIndex+1}));if(e&&i)return hr._Scene.BBox.merge([e,i])}};K_.className="RangeAreaSeries",K_.type="range-area";var j_=(Y(),W(H)),j6={series:{fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:j_._Theme.DEFAULT_FONT_FAMILY,color:j_._Theme.DEFAULT_LABEL_COLOUR},interpolation:{type:"linear",tension:1,position:"end"}},axes:{[j_._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{markerPaletteFactory:X6}=np._ModuleSupport,$6={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:K_,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:np._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:np._Theme.POSITION.LEFT},{type:np._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:np._Theme.POSITION.BOTTOM}],themeTemplate:j6,paletteFactory:t=>{const{marker:e}=X6(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},Ly=(Y(),W(H)),go=(Y(),W(H)),wR=(Y(),W(H)),{DropShadow:Z6,Label:q6}=wR._Scene,{AbstractBarSeriesProperties:Q6,SeriesTooltip:J6,Validate:Le,COLOR_STRING:PR,FUNCTION:t9,LINE_DASH:e9,OBJECT:X_,PLACEMENT:i9,POSITIVE_NUMBER:Ty,RATIO:BR,STRING:Hl}=wR._ModuleSupport,$_=class extends q6{constructor(){super(...arguments),this.placement="inside",this.padding=6}};M([Le(i9)],$_.prototype,"placement",2),M([Le(Ty)],$_.prototype,"padding",2);var ze=class extends Q6{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Z6().set({enabled:!1}),this.label=new $_,this.tooltip=new J6}};M([Le(Hl)],ze.prototype,"xKey",2),M([Le(Hl)],ze.prototype,"yLowKey",2),M([Le(Hl)],ze.prototype,"yHighKey",2),M([Le(Hl,{optional:!0})],ze.prototype,"xName",2),M([Le(Hl,{optional:!0})],ze.prototype,"yName",2),M([Le(Hl,{optional:!0})],ze.prototype,"yLowName",2),M([Le(Hl,{optional:!0})],ze.prototype,"yHighName",2),M([Le(PR)],ze.prototype,"fill",2),M([Le(BR)],ze.prototype,"fillOpacity",2),M([Le(PR)],ze.prototype,"stroke",2),M([Le(Ty)],ze.prototype,"strokeWidth",2),M([Le(BR)],ze.prototype,"strokeOpacity",2),M([Le(e9)],ze.prototype,"lineDash",2),M([Le(Ty)],ze.prototype,"lineDashOffset",2),M([Le(Ty)],ze.prototype,"cornerRadius",2),M([Le(t9,{optional:!0})],ze.prototype,"itemStyler",2),M([Le(X_)],ze.prototype,"shadow",2),M([Le(X_)],ze.prototype,"label",2),M([Le(X_)],ze.prototype,"tooltip",2);var{SeriesNodePickMode:FR,valueProperty:zR,keyProperty:s9,ChartAxisDirection:Z_,getRectConfig:n9,updateRect:a9,checkCrisp:o9,updateLabelNode:r9,SMALLEST_KEY_INTERVAL:l9,LARGEST_KEY_INTERVAL:c9,diff:h9,prepareBarAnimationFunctions:GR,midpointStartingBarPosition:VR,resetBarSelectionsFn:u9,fixNumericExtent:UR,seriesLabelFadeInAnimation:HR,resetLabelFn:d9,animationValidation:p9,createDatumId:g9,isFiniteNumber:WR,computeBarFocusBounds:f9}=go._ModuleSupport,{Rect:m9,PointerEvents:y9,motion:YR}=go._Scene,{sanitizeHtml:Wl,isNumber:v9,extent:x9}=go._Util,{ContinuousScale:b9}=go._Scale,S9=class extends go._ModuleSupport.SeriesNodeEvent{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},q_=class extends go._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[FR.NEAREST_NODE,FR.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:u9,label:d9}}),this.properties=new ze,this.NodeEvent=S9}processData(t){return F(this,null,function*(){var e,i,s,n;if(!this.properties.isValid())return;const{xKey:a,yLowKey:o,yHighKey:r}=this.properties,l=(e=this.getCategoryAxis())==null?void 0:e.scale,c=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:h,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:l,yScale:c}),p=[];this.ctx.animationManager.isSkipped()||(this.processedData&&p.push(h9(this.processedData)),p.push(p9()));const g=this.visible?{}:{forceValue:0},{processedData:f}=yield this.requestDataModel(t,this.data,{props:[s9(a,u,{id:"xValue"}),zR(o,d,B({id:"yLowValue"},g)),zR(r,d,B({id:"yHighValue"},g)),...h?[l9,c9]:[],...p],groupByKeys:!0});this.smallestDataInterval=(s=f.reduced)==null?void 0:s.smallestKeyInterval,this.largestDataInterval=(n=f.reduced)==null?void 0:n.largestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!(i&&s))return[];const{domain:{keys:[a],values:o}}=i;if(t===this.getCategoryDirection()){const r=s.resolveProcessedDataDefById(this,"xValue");if(r?.def.type==="key"&&r?.def.valueType==="category")return a;const l=WR(n)?n:0,c=(e=x9(a))!=null?e:[NaN,NaN],h=this.getCategoryAxis(),u=c[0]+-l,d=c[1]+l;return UR([u,d],h)}else{const r=s.resolveProcessedDataIndexById(this,"yLowValue"),l=o[r],c=s.resolveProcessedDataIndexById(this,"yHighValue"),h=o[c],u=[l[0]>h[0]?h[0]:l[0],h[1]<l[1]?l[1]:h[1]];return UR(u)}}createNodeData(){return F(this,null,function*(){const{data:t,dataModel:e,groupScale:i,processedData:s,properties:{visible:n}}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&a&&o&&e))return;const r=a.scale,l=o.scale,c=this.getBarDirection()===Z_.X,{xKey:h,yLowKey:u,yHighKey:d,fill:p,stroke:g,strokeWidth:f}=this.properties,m=`${u}-${d}`,v={itemId:m,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!n)return v;const y=e.resolveProcessedDataIndexById(this,"yLowValue"),x=e.resolveProcessedDataIndexById(this,"yHighValue"),b=e.resolveProcessedDataIndexById(this,"xValue"),{barWidth:S,groupIndex:k}=this.updateGroupScale(a),D=b9.is(r)?S*-.5:0;return s?.data.forEach(({keys:T,datum:I,values:N},C)=>{N.forEach((E,O)=>{const P=T[b],w=Math.round(r.convert(P))+i.convert(String(k))+D,R=E[y],G=E[x];if(!go._Util.isNumber(G)||!go._Util.isNumber(R))return;const z=Math.min(R,G),U=Math.max(R,G),V=Math.round(l.convert(z)),j=Math.round(l.convert(U)),tt=V,ct=Math.max(f,Math.abs(tt-j)),st={x:c?Math.min(j,tt):w,y:c?w:Math.min(j,tt),width:c?ct:S,height:c?S:ct},$={x:st.x+st.width/2,y:st.y+st.height/2},Q=this.createLabelData({rect:st,barAlongX:c,yLowValue:z,yHighValue:U,datum:I[O],series:this}),J={index:C,valueIndex:O,series:this,itemId:m,datum:I[O],xValue:P,yLowValue:R,yHighValue:G,yLowKey:u,yHighKey:d,xKey:h,x:st.x,y:st.y,width:st.width,height:st.height,midPoint:$,fill:p,stroke:g,strokeWidth:f,opacity:1,labels:Q};v.nodeData.push(J),v.labelData.push(...Q)})}),v})}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:s,datum:n,series:a}){const{xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:u,yName:d,label:p}=this.properties,g={datum:n,xKey:o,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:u,yName:d},{placement:f,padding:m}=p,y=m*(f==="outside"?1:-1),x={x:t.x+(e?-y:t.width/2),y:t.y+(e?t.height/2:t.height+y),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(p,B({itemId:"low",value:i},g),S=>WR(S)?S.toFixed(2):String(S)),itemId:"low",datum:n,series:a},b={x:t.x+(e?t.width+y:t.width/2),y:t.y+(e?t.height/2:-y),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(p,B({itemId:"high",value:s},g),S=>v9(S)?S.toFixed(2):""),itemId:"high",datum:n,series:a};return f==="outside"&&(x.textAlign=e?"right":"center",x.textBaseline=e?"middle":"top",b.textAlign=e?"left":"center",b.textBaseline=e?"middle":"bottom"),[x,b]}nodeFactory(){return new m9}updateDatumSelection(t){return F(this,null,function*(){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s,void 0,n=>this.getDatumId(n))})}updateDatumNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,ctx:n}=this,{yLowKey:a,yHighKey:o,highlightStyle:{item:r}}=this.properties,l=this.axes[Z_.X],c=o9(l?.scale,l?.visibleRange,this.smallestDataInterval,this.largestDataInterval),h=this.getCategoryDirection()===Z_.X;e.each((u,d)=>{const{fillOpacity:p,strokeOpacity:g,strokeWidth:f,lineDash:m,lineDashOffset:v,itemStyler:y,shadow:x}=this.properties,b={fill:d.fill,stroke:d.stroke,fillOpacity:p,strokeOpacity:g,lineDash:m,lineDashOffset:v,fillShadow:x,strokeWidth:this.getStrokeWidth(f),cornerRadius:this.properties.cornerRadius},S=h?d.width>0:d.height>0,k=n9({datum:d,isHighlighted:i,style:b,highlightStyle:r,itemStyler:y,seriesId:s,ctx:n,yLowKey:a,yHighKey:o});k.crisp=c,k.visible=S,a9({rect:u,config:k})})})}getHighlightLabelData(t,e){const i=t.filter(s=>s.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){return F(this,null,function*(){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=y9.None})})}updateLabelNodes(t){return F(this,null,function*(){t.labelSelection.each((e,i)=>{r9(e,this.properties.label,i)})})}getTooltipHtml(t){var e,i;const{id:s,ctx:{callbackCache:n}}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!this.properties.isValid()||!a||!o)return go._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:p,fill:g,strokeWidth:f,itemStyler:m,tooltip:v,fillOpacity:y,stroke:x,strokeOpacity:b,lineDash:S,lineDashOffset:k,cornerRadius:D}=this.properties,{datum:T,xValue:I,yLowValue:N,yHighValue:C}=t;let E;m&&(E=n.call(m,{highlighted:!1,seriesId:s,datum:T,xKey:r,yLowKey:l,yHighKey:c,fill:g,fillOpacity:y,stroke:x,strokeWidth:f,strokeOpacity:b,lineDash:S,lineDashOffset:k,cornerRadius:D}));const O=(i=(e=E?.fill)!=null?e:g)!=null?i:"gray",P=Wl(a.formatDatum(I)),w=Wl(o.formatDatum(N)),R=Wl(o.formatDatum(C)),G=h??r,z=u??l,U=d??c,V=Wl(p),X=p?`<b>${Wl(G)}</b>: ${P}<br><b>${Wl(z)}</b>: ${w}<br><b>${Wl(U)}</b>: ${R}<br>`:`${P}: ${w} - ${R}`,j={title:V,content:X,backgroundColor:O};return v.toTooltipHtml(j,{itemId:void 0,datum:T,xKey:r,xName:h,yLowKey:l,yLowName:u,yHighKey:c,yHighName:d,yName:p,color:O,seriesId:s,title:V})}getLegendData(t){const{id:e,visible:i}=this;if(t!=="category")return[];const{fill:s,stroke:n,strokeWidth:a,fillOpacity:o,strokeOpacity:r,yName:l,yLowName:c,yHighName:h,yLowKey:u,yHighKey:d}=this.properties,p=l??`${c??u} - ${h??d}`;return[{legendType:"category",id:e,itemId:`${u}-${d}`,seriesId:e,enabled:i,label:{text:`${p}`},symbols:[{marker:{fill:s,stroke:n,fillOpacity:o,strokeOpacity:r,strokeWidth:a}}]}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=GR(VR(this.isVertical(),"normal"));YR.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),HR(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e;const{datumSelection:i,labelSelection:s}=t,{processedData:n}=this,a=(e=n?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=GR(VR(this.isVertical(),"fade"));YR.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],o,(r,l)=>g9(l.xValue,l.valueIndex),a),HR(this,"labels",this.ctx.animationManager,s)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return f9((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}};q_.className="RangeBarSeries",q_.type="range-bar";var Q_=(Y(),W(H)),M9={series:{direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Q_._Theme.DEFAULT_FONT_FAMILY,color:Q_._Theme.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[Q_._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},_9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:q_,tooltipDefaults:{range:"exact"},defaultAxes:[{type:Ly._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ly._Theme.POSITION.BOTTOM},{type:Ly._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:Ly._Theme.POSITION.LEFT}],themeTemplate:M9,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},groupable:!0,swapDefaultAxesCondition:({direction:t})=>t==="horizontal"},k9=(Y(),W(H)),J_=(Y(),W(H));function KR(t){t.nodes.sort((e,i)=>Math.round((e.datum.y-i.datum.y)*100)/100||-(e.datum.size-i.datum.size))}function D9({nodes:t,size:e},{seriesRectHeight:i,nodeSpacing:s,sizeScale:n}){const a=i*e*n;let r=(i-(a+s*(t.length-1)))/2;t.forEach(({datum:l})=>{const c=i*l.size*n;l.y=r,l.height=c,r+=c+s})}function I9(t,e){const{nodes:i}=t,{seriesRectHeight:s,nodeSpacing:n}=e;KR(t);let a=0,o=0;for(let c=0;c<i.length;c+=1){const{datum:h}=i[c],u=Math.max(o-h.y,0);h.y+=u,a+=u,o=h.y+h.height+n}if(o-n<s)return a>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],u=h.y+h.height,d=Math.min(l-u,0);h.y+=d,a+=d,l=h.y-n}return!0}function tk(t,e,i,s,n,a,o,r){const l=(i-t)/(s-e),c=(o-n)/(r-a),h=((a-e)*(l*c)+t*c-n*l)/(c-l);return t<i?h>t&&h<Math.min(i,o):h<t&&h>Math.max(i,o)}function jR(t,e){let i=!1;const s=t.nodes.filter(a=>e(a).length===1);let n=!0;for(let a=0;n&&a<s.length;a+=1){n=!1;for(let o=0;o<s.length-1;o+=1){const{datum:r}=s[o],l=e(s[o])[0].node.datum,{datum:c}=s[o+1],h=e(s[o+1])[0].node.datum;if(!(tk(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||tk(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||tk(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const d=s[o];s[o]=s[o+1],s[o+1]=d;const p=r.y;r.y=c.y+c.height-r.height,c.y=p,i=!0,n=!0}}return i}function A9(t){let e=!1;return KR(t),e=jR(t,i=>i.linksBefore)||e,e=jR(t,i=>i.linksAfter)||e,e}function L9(t){if(t.length===0)return;let e=0,i=0;for(const{node:{datum:s}}of t)e+=s.y*s.size,i+=s.size;return e/i}function XR(t,e,i,s){return t.nodes.forEach(({datum:n,linksBefore:a,linksAfter:o})=>{const r=s===1?a:o,l=s===1?o:a,c=L9(r);if(c!=null){const h=l.length!==0?i:1;n.y=n.y+(c-n.y)*h}}),I9(t,e)}function $R(t,e,i){let s=!1;for(let n=0;n<t.length;n+=1)s=XR(t[n],e,i,1)||s;return s}function T9(t,e,i){let s=!1;for(let n=t.length-1;n>=0;n-=1)s=XR(t[n],e,i,-1)||s;return s}function ZR(t){let e=!1;for(let i=t.length-1;i>=0;i-=1)e=A9(t[i])||e;return e}function N9(t,e){t.forEach(s=>{D9(s,e)});let i=!1;for(let s=0;s<6;s+=1){const n=$R(t,e,1);i=T9(t,e,.5);const a=ZR(t);if(!n&&!i&&!a)break}i&&($R(t,e,1),ZR(t))}var O9=(Y(),W(H)),{BBox:C9,Path:E9,ScenePathChangeDetection:Vh}=O9._Scene;function Ny(t,e,i,s,n,a,o,r,l,c){let h,u;if(n!==i&&l!==o){const k=-(s-e)/(n-i),D=-(r-a)/(l-o);h=(o-i+k*e-D*a)/(k-D),u=k*(h-e)+i}else if(n===i&&l!==o)h=e,u=-(r-a)/(l-o)*(h-r)+l;else if(n!==i&&l===o)h=r,u=-(s-e)/(n-i)*(h-e)+i;else throw new Error("Offsetting flat bezier curve");const d=Math.hypot(i-u,e-h),p=(d+c)/d,g=Math.hypot(l-u,r-h),f=(g+c)/g,m=h+(s-h)*p,v=u+(n-u)*p,y=h+(a-h)*f,x=u+(o-u)*f,b=h+(r-h)*f,S=u+(l-u)*f;t.cubicCurveTo(m,v,y,x,b,S)}var Yl=class extends E9{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const t=Math.min(this.x1,this.x2),e=Math.max(this.x1,this.x2)-t,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new C9(t,i,e,s)}updatePath(){const{path:t,inset:e}=this;t.clear();const i=this.x1+e,s=this.x2-e,n=this.y1+e,a=this.y2+e,o=this.height-2*e;if(o<0||i>s)return;const r=i,l=n+o/2,c=(i+s)/2,h=n+o/2,u=(i+s)/2,d=a+o/2,p=s,g=a+o/2;if(t.moveTo(r,l-o/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)t.cubicCurveTo(c,h-o/2,u,d-o/2,p,g-o/2),t.lineTo(p,g+o/2),t.cubicCurveTo(u,d+o/2,c,h+o/2,r,l+o/2);else{const f=.5*r+.5*c,m=.5*l+.5*h,v=.5*c+.5*u,y=.5*h+.5*d,x=.5*u+.5*p,b=.5*d+.5*g,S=.5*f+.5*v,k=.5*m+.5*y,D=.5*v+.5*x,T=.5*y+.5*b,I=.5*S+.5*D,N=.5*k+.5*T,C=r,E=l,O=f,P=m,w=S,R=k,G=I,z=N,U=I,V=N,X=D,j=T,tt=x,ct=b,st=p,$=g,Q=(a>n?1:-1)*o/2;Ny(t,C,E,O,P,w,R,G,z,Q),Ny(t,U,V,X,j,tt,ct,st,$,-Q),t.lineTo(p,g+o/2),Ny(t,st,$,tt,ct,X,j,U,V,Q),Ny(t,G,z,w,R,O,P,C,E,-Q)}t.closePath()}};M([Vh()],Yl.prototype,"x1",2),M([Vh()],Yl.prototype,"x2",2),M([Vh()],Yl.prototype,"y1",2),M([Vh()],Yl.prototype,"y2",2),M([Vh()],Yl.prototype,"height",2),M([Vh()],Yl.prototype,"inset",2);var qR=(Y(),W(H)),{BaseProperties:QR,SeriesTooltip:R9,SeriesProperties:w9,ARRAY:P9,COLOR_STRING:Oy,COLOR_STRING_ARRAY:JR,FUNCTION:tw,LINE_DASH:ew,OBJECT:Cy,POSITIVE_NUMBER:Kl,RATIO:Ey,STRING:ur,UNION:B9,Validate:Nt}=qR._ModuleSupport,{Label:F9}=qR._Scene,z9=B9(["left","right","center","justify"],"a justification value"),iw=class extends F9{constructor(){super(...arguments),this.spacing=1}};M([Nt(Kl)],iw.prototype,"spacing",2);var fo=class extends QR{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};M([Nt(Oy,{optional:!0})],fo.prototype,"fill",2),M([Nt(Ey)],fo.prototype,"fillOpacity",2),M([Nt(Oy,{optional:!0})],fo.prototype,"stroke",2),M([Nt(Ey)],fo.prototype,"strokeOpacity",2),M([Nt(Kl)],fo.prototype,"strokeWidth",2),M([Nt(ew)],fo.prototype,"lineDash",2),M([Nt(Kl)],fo.prototype,"lineDashOffset",2),M([Nt(tw,{optional:!0})],fo.prototype,"itemStyler",2);var Xs=class extends QR{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};M([Nt(Kl)],Xs.prototype,"spacing",2),M([Nt(Kl)],Xs.prototype,"width",2),M([Nt(z9)],Xs.prototype,"alignment",2),M([Nt(Oy,{optional:!0})],Xs.prototype,"fill",2),M([Nt(Ey)],Xs.prototype,"fillOpacity",2),M([Nt(Oy,{optional:!0})],Xs.prototype,"stroke",2),M([Nt(Ey)],Xs.prototype,"strokeOpacity",2),M([Nt(Kl)],Xs.prototype,"strokeWidth",2),M([Nt(ew)],Xs.prototype,"lineDash",2),M([Nt(Kl)],Xs.prototype,"lineDashOffset",2),M([Nt(tw,{optional:!0})],Xs.prototype,"itemStyler",2);var Ri=class extends w9{constructor(){super(...arguments),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fills=[],this.strokes=[],this.label=new iw,this.link=new fo,this.node=new Xs,this.tooltip=new R9}};M([Nt(P9,{optional:!0})],Ri.prototype,"nodes",2),M([Nt(ur)],Ri.prototype,"fromKey",2),M([Nt(ur)],Ri.prototype,"toKey",2),M([Nt(ur)],Ri.prototype,"idKey",2),M([Nt(ur,{optional:!0})],Ri.prototype,"idName",2),M([Nt(ur,{optional:!0})],Ri.prototype,"labelKey",2),M([Nt(ur,{optional:!0})],Ri.prototype,"labelName",2),M([Nt(ur,{optional:!0})],Ri.prototype,"sizeKey",2),M([Nt(ur,{optional:!0})],Ri.prototype,"sizeName",2),M([Nt(JR)],Ri.prototype,"fills",2),M([Nt(JR)],Ri.prototype,"strokes",2),M([Nt(Cy)],Ri.prototype,"label",2),M([Nt(Cy)],Ri.prototype,"link",2),M([Nt(Cy)],Ri.prototype,"node",2),M([Nt(Cy)],Ri.prototype,"tooltip",2);var{SeriesNodePickMode:sw,createDatumId:nw,EMPTY_TOOLTIP_CONTENT:G9}=J_._ModuleSupport,{sanitizeHtml:aw}=J_._Util,{Rect:V9,Text:op,BBox:U9}=J_._Scene,ek=class extends QM{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,pickModes:[sw.NEAREST_NODE,sw.EXACT_SHAPE_MATCH]}),this.properties=new Ri}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Yl}nodeFactory(){return new V9}createNodeData(){return F(this,null,function*(){const{id:t,_nodeDataDependencies:{seriesRectWidth:e,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:n,sizeKey:a,label:{spacing:o},node:{spacing:r,width:l,alignment:c}}=this.properties,h=D=>String(D),{nodeGraph:u,links:d,maxPathLength:p}=this.getNodeGraph(D=>{const T=this.getLabelText(this.properties.label,{datum:D.datum,value:D.label,fromKey:s,toKey:n,sizeKey:a},h);return K(B({},D),{label:T,size:0,x:NaN,y:NaN,width:l,height:NaN})},D=>K(B({},D),{x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),g=u,f=this.isLabelEnabled()?(e-l)*(1-p/(p+1)):0,m=(e-l-2*f)/(p-1),v=[];for(let D=0;D<p;D+=1){const T=f+D*m;v.push({index:D,size:0,nodes:[],x:T})}g.forEach(D=>{const{datum:T,linksBefore:I,linksAfter:N,maxPathLengthBefore:C,maxPathLengthAfter:E}=D,O=Math.max(I.reduce((w,{link:R})=>w+R.size,0),N.reduce((w,{link:R})=>w+R.size,0));if(I.length===0&&N.length===0||O===0){D.columnIndex=-1;return}let P;switch(c){case"left":P=v[C];break;case"right":P=v[p-1-E];break;case"center":{if(I.length!==0)P=v[C];else if(N.length!==0){const w=N.reduce((R,G)=>Math.min(R,G.node.maxPathLengthBefore),p)-1;P=v[w]}else P=v[0];break}case"justify":{P=N.length===0?v[p-1]:v[C];break}}T.x=P.x,T.size=O,P.nodes.push(D),P.size+=O,D.columnIndex=P.index}),g.forEach(D=>{let T=1/0,I=0;D.linksAfter.forEach(N=>{const C=N.node,{columnIndex:E}=C;E<T?(T=E,I=C.datum.size):E===T&&(I=Math.max(I,C.datum.size))}),D.closestColumnIndex=T,D.maxSizeOfClosestNodesAfter=I});const y=v.reduce((D,{size:T,nodes:I})=>{const N=(1-(I.length-1)*(r/i))/T;return Math.min(D,N)},1/0);for(let D=v.length-1;D>=0;D-=1)v[D].nodes.sort((I,N)=>I.closestColumnIndex-N.closestColumnIndex||I.maxSizeOfClosestNodesAfter-N.maxSizeOfClosestNodesAfter||I.datum.size-N.datum.size);N9(v,{seriesRectHeight:i,nodeSpacing:r,sizeScale:y}),g.forEach(({datum:D,linksBefore:T,linksAfter:I})=>{const N=D.y+D.height,C=P=>P.sort((w,R)=>{const G=w.node.datum,z=R.node.datum,U=G.y+G.height,V=z.y+z.height,X=Math.atan2(G.y-D.y,Math.abs(G.x-D.x))-Math.atan2(z.y-D.y,Math.abs(z.x-D.x)),j=Math.atan2(U-N,Math.abs(G.x-D.x))-Math.atan2(V-N,Math.abs(z.x-D.x));return X+j});let E=D.y;C(T).forEach(({link:P})=>{P.y2=E,E+=P.size*i*y});let O=D.y;C(I).forEach(({link:P})=>{P.y1=O,O+=P.size*i*y})});const x=[],b=[],{fontSize:S}=this.properties.label,k=this.properties.label.getFont();return v.forEach((D,T)=>{const I=T===0,N=T===v.length-1;let C=-1/0;D.nodes.sort((E,O)=>E.datum.y-O.datum.y),D.nodes.forEach(({datum:E})=>{if(E.midPoint={x:E.x+E.width/2,y:E.y+E.height/2},x.push(E),E.label==null)return;const O=I?E.x-o:E.x+E.width+o,P=E.y+E.height/2;let w;if(!I&&!N){const U=P-S*op.defaultLineHeightRatio,V=P+S*op.defaultLineHeightRatio;let X=e;g.forEach(({datum:tt})=>{tt.x>E.x&&Math.max(tt.y,U)<=Math.min(tt.y+tt.height,V)&&(X=Math.min(X,tt.x-o))});const j=X-E.x-2*o;w=op.wrap(E.label,j,E.height,this.properties.label,"never","hide")}if(w==null||w===""){const U=I||N?o:o*2;w=op.wrap(E.label,m-U,E.height,this.properties.label,"never")}if(w==="")return;const{height:R}=op.measureText(w,k,"middle","left"),G=P-R/2,z=P+R/2;G>=C&&(b.push({x:O,y:P,leading:I,text:w}),C=z)})}),d.forEach(D=>{const{fromNode:T,toNode:I,size:N}=D;D.height=i*N*y,D.x1=T.x+l,D.x2=I.x,D.midPoint={x:(D.x1+D.x2)/2,y:(D.y1+D.y2)/2+D.height/2},x.push(D)}),{itemId:t,nodeData:x,labelData:b}})}updateLabelSelection(t){return F(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)})}updateLabelNodes(t){return F(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:o}=this.properties.label;e.each((r,{x:l,y:c,leading:h,text:u})=>{r.visible=!0,r.x=l,r.y=c,r.text=u,r.fill=i,r.fontStyle=s,r.fontWeight=n,r.fontSize=a,r.fontFamily=o,r.textAlign=h?"right":"left",r.textBaseline="middle"})})}updateNodeSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>nw([e.type,e.id]))})}updateNodeNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,properties:n,ctx:{callbackCache:a}}=this,{fromKey:o,toKey:r,sizeKey:l}=this.properties,{fill:c,fillOpacity:h,stroke:u,strokeOpacity:d,lineDash:p,lineDashOffset:g,itemStyler:f}=this.properties.node,m=i?n.highlightStyle.item:void 0,v=this.getStrokeWidth(n.node.strokeWidth);e.each((y,x)=>{var b,S,k,D,T,I,N,C,E,O,P,w,R,G;const z=c??x.fill,U=u??x.stroke;let V;if(f!=null){const{label:X,size:j}=x;V=a.call(f,{seriesId:s,datum:x.datum,label:X,size:j,fromKey:o,toKey:r,sizeKey:l,fill:z,fillOpacity:h,strokeOpacity:d,stroke:U,strokeWidth:v,lineDash:p,lineDashOffset:g,highlighted:i})}y.x=x.x,y.y=x.y,y.width=x.width,y.height=x.height,y.fill=(S=(b=m?.fill)!=null?b:V?.fill)!=null?S:z,y.fillOpacity=(D=(k=m?.fillOpacity)!=null?k:V?.fillOpacity)!=null?D:h,y.stroke=(I=(T=m?.stroke)!=null?T:V?.stroke)!=null?I:U,y.strokeOpacity=(C=(N=m?.strokeOpacity)!=null?N:V?.strokeOpacity)!=null?C:d,y.strokeWidth=(O=(E=m?.strokeWidth)!=null?E:V?.strokeWidth)!=null?O:v,y.lineDash=(w=(P=m?.lineDash)!=null?P:V?.lineDash)!=null?w:p,y.lineDashOffset=(G=(R=m?.lineDashOffset)!=null?R:V?.lineDashOffset)!=null?G:g})})}updateLinkSelection(t){return F(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>nw([e.type,e.index,e.fromNode.id,e.toNode.id]))})}updateLinkNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,properties:n,ctx:{callbackCache:a}}=this,{fromKey:o,toKey:r,sizeKey:l}=n,{fill:c,fillOpacity:h,stroke:u,strokeOpacity:d,lineDash:p,lineDashOffset:g,itemStyler:f}=n.link,m=i?n.highlightStyle.item:void 0,v=this.getStrokeWidth(n.link.strokeWidth);e.each((y,x)=>{var b,S,k,D,T,I,N,C,E,O,P,w,R,G;const z=c??x.fromNode.fill,U=u??x.fromNode.stroke;let V;f!=null&&(V=a.call(f,{seriesId:s,datum:x.datum,fromKey:o,toKey:r,sizeKey:l,fill:z,fillOpacity:h,strokeOpacity:d,stroke:U,strokeWidth:v,lineDash:p,lineDashOffset:g,highlighted:i})),y.x1=x.x1,y.y1=x.y1,y.x2=x.x2,y.y2=x.y2,y.height=x.height,y.fill=(S=(b=m?.fill)!=null?b:V?.fill)!=null?S:z,y.fillOpacity=(D=(k=m?.fillOpacity)!=null?k:V?.fillOpacity)!=null?D:h,y.stroke=(I=(T=m?.stroke)!=null?T:V?.stroke)!=null?I:U,y.strokeOpacity=(C=(N=m?.strokeOpacity)!=null?N:V?.strokeOpacity)!=null?C:d,y.strokeWidth=Math.min((O=(E=m?.strokeWidth)!=null?E:V?.strokeWidth)!=null?O:v,x.height/2),y.lineDash=(w=(P=m?.lineDash)!=null?P:V?.lineDash)!=null?w:p,y.lineDashOffset=(G=(R=m?.lineDashOffset)!=null?R:V?.lineDashOffset)!=null?G:g,y.inset=y.strokeWidth/2})})}getTooltipHtml(t){var e,i,s,n,a,o,r,l;const{id:c,processedData:h,ctx:{callbackCache:u},properties:d}=this;if(!h||!d.isValid())return G9;const{fromKey:p,toKey:g,sizeKey:f,sizeName:m,tooltip:v}=d,{datum:y,itemId:x}=t;let b;const S=[];let k;if(t.type===0){const{fillOpacity:I,strokeOpacity:N,strokeWidth:C,lineDash:E,lineDashOffset:O,itemStyler:P}=d.link,{fromNode:w,toNode:R,size:G}=t;b=`${(e=w.label)!=null?e:w.id} - ${(i=R.label)!=null?i:R.id}`,f!=null&&S.push(aw(`${m??f}: `+G)),k=(s=d.link.fill)!=null?s:w.fill;const z=(n=d.link.stroke)!=null?n:w.stroke;let U;P!=null&&(U=u.call(P,{seriesId:c,datum:y.datum,fromKey:p,toKey:g,sizeKey:f,fill:k,fillOpacity:I,strokeOpacity:N,stroke:z,strokeWidth:C,lineDash:E,lineDashOffset:O,highlighted:!0})),k=(a=U?.fill)!=null?a:k}else{const{fillOpacity:I,strokeOpacity:N,strokeWidth:C,lineDash:E,lineDashOffset:O,itemStyler:P}=d.node,{id:w,label:R,size:G}=t;b=R??w,f!=null&&S.push(aw(`${m??f}: `+G)),k=(o=d.link.fill)!=null?o:y.fill;const z=(r=d.link.stroke)!=null?r:y.stroke;let U;P!=null&&(U=u.call(P,{seriesId:c,datum:y.datum,label:R,size:G,fromKey:p,toKey:g,sizeKey:f,fill:k,fillOpacity:I,strokeOpacity:N,stroke:z,strokeWidth:C,lineDash:E,lineDashOffset:O,highlighted:!0})),k=(l=U?.fill)!=null?l:k}const D=S.join("<br>"),T=k;return v.toTooltipHtml({title:b,content:D,backgroundColor:T},B({seriesId:c,datum:y,title:b,color:T,itemId:x,fromKey:p,toKey:g,sizeKey:f,sizeName:m},this.getModuleTooltipParams()))}getLabelData(){return[]}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;const s=(i=this.contextNodeData)==null?void 0:i.nodeData[t];if(s?.type===1){const{x:n,y:a,width:o,height:r}=s,l=new U9(n,a,o,r);return this.contentGroup.inverseTransformBBox(l).clip(e)}else if(s?.type===0){for(const n of this.linkSelection)if(n.datum===s)return n.node;return}}};ek.className="SankeySeries",ek.type="sankey";var{DEFAULT_FONT_FAMILY:H9,DEFAULT_LABEL_COLOUR:W9}=k9._Theme,Y9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",instanceConstructor:ek,tooltipDefaults:{range:"exact"},themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{highlightStyle:{series:{dimOpacity:.2}},label:{fontFamily:H9,color:W9,fontSize:12,spacing:10},node:{spacing:20,width:10,strokeWidth:0},link:{fillOpacity:.5,strokeWidth:0}},legend:{enabled:!1,toggleSeries:!1}},paletteFactory({takeColors:t,colorsCount:e}){return t(e)}},ow=(Y(),W(H)),mo=(Y(),W(H)),K9=(Y(),W(H)),{HierarchySeriesProperties:j9,HighlightStyle:X9,SeriesTooltip:$9,Validate:Te,COLOR_STRING:Z9,FUNCTION:q9,NUMBER:rw,OBJECT:Uh,POSITIVE_NUMBER:ik,RATIO:Ry,STRING:wy}=K9._ModuleSupport,dr=class extends X9{constructor(){super(...arguments),this.label=new Ks,this.secondaryLabel=new Ks}};M([Te(wy,{optional:!0})],dr.prototype,"fill",2),M([Te(Ry,{optional:!0})],dr.prototype,"fillOpacity",2),M([Te(Z9,{optional:!0})],dr.prototype,"stroke",2),M([Te(ik,{optional:!0})],dr.prototype,"strokeWidth",2),M([Te(Ry,{optional:!0})],dr.prototype,"strokeOpacity",2),M([Te(Uh)],dr.prototype,"label",2),M([Te(Uh)],dr.prototype,"secondaryLabel",2);var $i=class extends j9{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new dr,this.label=new Ks,this.secondaryLabel=new Xd,this.tooltip=new $9}};M([Te(wy,{optional:!0})],$i.prototype,"sizeName",2),M([Te(wy,{optional:!0})],$i.prototype,"labelKey",2),M([Te(wy,{optional:!0})],$i.prototype,"secondaryLabelKey",2),M([Te(Ry)],$i.prototype,"fillOpacity",2),M([Te(ik)],$i.prototype,"strokeWidth",2),M([Te(Ry)],$i.prototype,"strokeOpacity",2),M([Te(ik)],$i.prototype,"cornerRadius",2),M([Te(rw,{optional:!0})],$i.prototype,"sectorSpacing",2),M([Te(rw,{optional:!0})],$i.prototype,"padding",2),M([Te(q9,{optional:!0})],$i.prototype,"itemStyler",2),M([Te(Uh)],$i.prototype,"highlightStyle",2),M([Te(Uh)],$i.prototype,"label",2),M([Te(Uh)],$i.prototype,"secondaryLabel",2),M([Te(Uh)],$i.prototype,"tooltip",2);var{fromToMotion:Q9}=mo._ModuleSupport,{Sector:Py,Group:lw,Selection:cw,Text:rp}=mo._Scene,{sanitizeHtml:sk}=mo._Util,hw=(t,e=0,i=2*Math.PI/t.sumSize,s=Array.from(t,()=>{}))=>{let n=e;for(const a of t.children){const o=n,r=n+a.sumSize*i;s[a.index]={start:o,end:r},hw(a,o,i,s),n=r}return s},nk=class i1 extends mo._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new $i,this.groupSelection=cw.select(this.contentGroup,lw),this.highlightSelection=cw.select(this.highlightGroup,lw),this.angleData=[]}processData(){return F(this,null,function*(){const{childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r}=this.properties;yield As(i1.prototype,this,"processData").call(this),this.angleData=hw(this.rootNode);const l=c=>typeof c=="number"?c.toFixed(2):typeof c=="string"?c:"";this.labelData=Array.from(this.rootNode,({datum:c,depth:h})=>{let u;if(c!=null&&h!=null&&n!=null){const p=c[n];u=this.getLabelText(this.properties.label,{depth:h,datum:c,childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r,value:p},l)}u===""&&(u=void 0);let d;if(c!=null&&h!=null&&a!=null){const p=c[a];d=this.getLabelText(this.properties.secondaryLabel,{depth:h,datum:c,childrenKey:e,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:o,sizeName:r,value:p},l)}return d===""&&(d=void 0),u!=null||d!=null?{label:u,secondaryLabel:d}:void 0})})}updateSelections(){return F(this,null,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(e==null||e.seriesRect==null)return;const s=Array.from(this.rootNode),n=a=>{a.append([new Py,new rp({tag:0}),new rp({tag:1})])};this.groupSelection.update(s,n,a=>this.getDatumId(a)),this.highlightSelection.update(s,n,a=>this.getDatumId(a))})}updateNodes(){return F(this,null,function*(){var e;const{chart:i,data:s,maxDepth:n,labelData:a}=this;if(i==null||s==null||a==null)return;const{width:o,height:r}=i.seriesRect,{sectorSpacing:l=0,padding:c=0,cornerRadius:h,highlightStyle:u}=this.properties;this.contentGroup.translationX=o/2,this.contentGroup.translationY=r/2,this.highlightGroup.translationX=o/2,this.highlightGroup.translationY=r/2;const d=l*.5,g=Math.min(o,r)/2/(n+1),f=-Math.PI/2,m=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();new rp().setFont(this.properties.label),this.rootNode.walk(S=>{const k=this.angleData[S.index];if(S.depth!=null&&k!=null){const D=k.end-k.start,T=(S.depth+.5)*g;S.midPoint.x=Math.cos(D)*T,S.midPoint.y=Math.sin(D)*T}});const y=(S,k,D)=>{var T,I,N,C,E,O,P,w,R,G;const{depth:z}=S,U=this.angleData[S.index];if(z==null||U==null){k.visible=!1;return}k.visible=!0;let V,X,j,tt,ct;D&&(V=u.fill,X=u.fillOpacity,j=u.stroke,tt=u.strokeWidth,ct=u.strokeOpacity);const st=this.getSectorFormat(S,D),$=(I=(T=st?.fill)!=null?T:V)!=null?I:S.fill,Q=(C=(N=st?.fillOpacity)!=null?N:X)!=null?C:this.properties.fillOpacity,J=(O=(E=st?.stroke)!=null?E:j)!=null?O:S.stroke,it=(w=(P=st?.strokeWidth)!=null?P:tt)!=null?w:this.properties.strokeWidth,ht=(G=(R=st?.strokeOpacity)!=null?R:ct)!=null?G:this.properties.strokeOpacity;k.fill=$,k.fillOpacity=Q,k.stroke=J,k.strokeWidth=it,k.strokeOpacity=ht,k.centerX=0,k.centerY=0,k.innerRadius=z*g,k.outerRadius=(z+1)*g,k.startAngle=U.start+f,k.endAngle=U.end+f,k.inset=d+it*.5,k.cornerRadius=h};this.groupSelection.selectByClass(Py).forEach(S=>{y(S.datum,S,!1)}),this.highlightSelection.selectByClass(Py).forEach(S=>{const k=S.datum,D=m===k;S.visible=D,S.visible&&y(S.datum,S,D)});const x=Array.from(this.rootNode,(S,k)=>{const{depth:D}=S,T=a[k],I=this.angleData[k];if(D==null||I==null)return;const N=D*g+d,C=(D+1)*g-d,E=N>d?d/N:d,O=C>d?d/C:d,P=I.start+E,R=I.end+E-P,G=I.start+O,U=I.end+O-G,V=dt=>{var lt;if(D===0&&((lt=S.parent)==null?void 0:lt.sumSize)===S.sumSize)return{width:2*Math.sqrt(nt(C,2)-nt(dt*.5,2)),height:dt,meta:0};const Dt=dt,$t=2*Math.sqrt(nt(C,2)-nt(N+Dt,2)),It=R<Math.PI?2*N*Math.tan(R*.5):1/0,Ne=Math.min($t,It),Zt=Math.PI/4;let hs,Zi;return D===0?(hs=dt,Zi=Math.sqrt(nt(C,2)-nt(hs/2,2))-dt/(2*Math.tan(U*.5))):mo._Util.normalizeAngle360(R)<Zt?(hs=2*N*Math.tan(R*.5),Zi=Math.sqrt(nt(C,2)-nt(hs/2,2))-N):(Zi=0,hs=0),Ne>=Zi?{width:Ne,height:Dt,meta:1}:{width:Zi,height:hs,meta:2}},X=n_(T?.label,this.properties.label,T?.secondaryLabel,this.properties.secondaryLabel,{padding:c},V);if(X==null)return;const{width:j,height:tt,meta:ct,label:st,secondaryLabel:$}=X,Q=f+(I.start+I.end)/2,J=Math.sin(Q)>=0,it=Math.cos(Q)>=0,ht=(J?3:12)&(it?6:9);let vt;switch(ct){case 0:vt=0;break;case 1:{const lt=C-(g-tt)*.58,bt=Math.sqrt(nt(C-c,2)-nt(j/2,2));vt=Math.min(lt,bt);break}case 2:if(D===0){const dt=tt/(2*Math.tan(R*.5))+j*.5,lt=Math.sqrt(nt(C,2)-nt(tt*.5,2))-j*.5;vt=(dt+lt)*.5}else vt=(N+C)*.5;break}return{width:j,height:tt,labelPlacement:ct,circleQuarter:ht,radius:vt,theta:Q,label:st,secondaryLabel:$}}),b=(S,k,D,T)=>{const{index:I,depth:N}=S,C=x?.[I],E=D===0?this.properties.label:this.properties.secondaryLabel,O=D===0?C?.label:C?.secondaryLabel;if(N==null||C==null||O==null){k.visible=!1;return}const{height:P,labelPlacement:w,circleQuarter:R,radius:G,theta:z}=C;let U;switch(T&&(U=(D===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),k.text=O.text,k.fontSize=O.fontSize,k.lineHeight=O.lineHeight,k.fontStyle=E.fontStyle,k.fontFamily=E.fontFamily,k.fontWeight=E.fontWeight,k.fill=U??E.color,w){case 0:k.textAlign="center",k.textBaseline="top",k.translationX=0,k.translationY=(D===0?0:P-O.height)-P*.5,k.rotation=0;break;case 1:{const V=(R&3)!==0,X=D===0==!V?G:G-(P-O.height);k.textAlign="center",k.textBaseline=V?"bottom":"top",k.translationX=Math.cos(z)*X,k.translationY=Math.sin(z)*X,k.rotation=V?z-Math.PI*.5:z+Math.PI*.5;break}case 2:{const V=(R&6)!==0,X=D===0==!V?(P-O.height)*.5:(O.height-P)*.5;k.textAlign="center",k.textBaseline="middle",k.translationX=Math.cos(z)*G+Math.cos(z+Math.PI/2)*X,k.translationY=Math.sin(z)*G+Math.sin(z+Math.PI/2)*X,k.rotation=V?z:z+Math.PI;break}}k.visible=!0};this.groupSelection.selectByClass(rp).forEach(S=>{b(S.datum,S,S.tag,!1)}),this.highlightSelection.selectByClass(rp).forEach(S=>{const k=S.datum,D=m===k;S.visible=D,S.visible&&b(S.datum,S,S.tag,D)})})}getSectorFormat(e,i){const{datum:s,fill:n,stroke:a,depth:o}=e,{ctx:{callbackCache:r},properties:{itemStyler:l}}=this;if(!l||s==null||o==null)return{};const{colorKey:c,childrenKey:h,labelKey:u,secondaryLabelKey:d,sizeKey:p,strokeWidth:g,fillOpacity:f,strokeOpacity:m}=this.properties;return r.call(l,{seriesId:this.id,highlighted:i,datum:s,depth:o,colorKey:c,childrenKey:h,labelKey:u,secondaryLabelKey:d,sizeKey:p,fill:n,fillOpacity:f,stroke:a,strokeWidth:g,strokeOpacity:m})}getTooltipHtml(e){var i;const{id:s}=this,{tooltip:n,colorKey:a,colorName:o=a,labelKey:r,secondaryLabelKey:l,sizeKey:c,sizeName:h=c,childrenKey:u}=this.properties,{datum:d,depth:p}=e;if(d==null||p==null)return mo._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const g=r!=null?d[r]:void 0,f=this.getSectorFormat(e,!1),m=(i=f?.fill)!=null?i:e.fill;if(!n.renderer&&!g)return mo._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const v=[],y=l!=null?d[l]:void 0;y!=null&&l!==a&&l!==c&&v.push(sk(y));const x=c!=null?d[c]:void 0;x!=null&&v.push(`${h}: ${sk(x)}`);const b=a!=null?d[a]:void 0;b!=null&&v.push(`${o}: ${sk(b)}`);const S=v.join("<br>"),k={title:g,color:this.properties.label.color,backgroundColor:m,content:S};return n.toTooltipHtml(k,{depth:p,datum:d,colorKey:a,labelKey:r,secondaryLabelKey:l,sizeKey:c,title:g,color:m,seriesId:s,childrenKey:u,colorName:o,itemId:void 0,sizeName:h})}createNodeData(){return F(this,null,function*(){})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.selectByClass(Py))}animateEmptyUpdateReady({datumSelections:e}){Q9(this.id,"nodes",this.ctx.animationManager,e,{toFn(i,s,n){return{scalingX:1,scalingY:1}},fromFn(i,s,n){return n==="unknown"&&s!=null&&i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}computeFocusBounds(e){let i;for(const{node:s,datum:n}of this.groupSelection)n===e&&(i=mo._Scene.Selection.selectByClass(s,mo._Scene.Sector)[0]);return i}};nk.className="SunburstSeries",nk.type="sunburst";var{DEFAULT_INSIDE_SERIES_LABEL_COLOUR:By}=ow._Theme,J9={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:nk,tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{label:{fontSize:14,minimumFontSize:9,color:By,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:By,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:By},secondaryLabel:{color:By},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:s,strokes:n}=t(e),a=i.get(ow._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE);return{fills:s,strokes:n,colorRange:a}}},t8=(Y(),W(H)),Hh=(Y(),W(H)),uw=(Y(),W(H)),{Label:e8}=uw._Scene,{BaseProperties:Fy,HierarchySeriesProperties:i8,HighlightStyle:s8,SeriesTooltip:n8,Validate:ft,BOOLEAN:a8,COLOR_STRING:zy,FUNCTION:o8,NUMBER:r8,OBJECT:$s,POSITIVE_NUMBER:pa,RATIO:pr,STRING:jl,STRING_ARRAY:dw,TEXT_ALIGN:pw,VERTICAL_ALIGN:l8}=uw._ModuleSupport,gw=class extends e8{constructor(){super(...arguments),this.spacing=0}};M([ft(r8)],gw.prototype,"spacing",2);var Zs=class extends Fy{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new gw}};M([ft(jl,{optional:!0})],Zs.prototype,"fill",2),M([ft(pr)],Zs.prototype,"fillOpacity",2),M([ft(zy,{optional:!0})],Zs.prototype,"stroke",2),M([ft(pa)],Zs.prototype,"strokeWidth",2),M([ft(pr)],Zs.prototype,"strokeOpacity",2),M([ft(pa)],Zs.prototype,"cornerRadius",2),M([ft(pw)],Zs.prototype,"textAlign",2),M([ft(pa)],Zs.prototype,"gap",2),M([ft(pa)],Zs.prototype,"padding",2),M([ft(a8)],Zs.prototype,"interactive",2),M([ft($s)],Zs.prototype,"label",2);var Is=class extends Fy{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Ks,this.secondaryLabel=new Xd}};M([ft(jl,{optional:!0})],Is.prototype,"fill",2),M([ft(pr)],Is.prototype,"fillOpacity",2),M([ft(zy,{optional:!0})],Is.prototype,"stroke",2),M([ft(pa,{optional:!0})],Is.prototype,"strokeWidth",2),M([ft(pr)],Is.prototype,"strokeOpacity",2),M([ft(pa)],Is.prototype,"cornerRadius",2),M([ft(pw)],Is.prototype,"textAlign",2),M([ft(l8)],Is.prototype,"verticalAlign",2),M([ft(pa)],Is.prototype,"gap",2),M([ft(pa)],Is.prototype,"padding",2),M([ft($s)],Is.prototype,"label",2),M([ft($s)],Is.prototype,"secondaryLabel",2);var Xl=class extends Fy{constructor(){super(...arguments),this.label=new Ks}};M([ft(jl,{optional:!0})],Xl.prototype,"fill",2),M([ft(pr,{optional:!0})],Xl.prototype,"fillOpacity",2),M([ft(zy,{optional:!0})],Xl.prototype,"stroke",2),M([ft(pa,{optional:!0})],Xl.prototype,"strokeWidth",2),M([ft(pr,{optional:!0})],Xl.prototype,"strokeOpacity",2),M([ft($s)],Xl.prototype,"label",2);var gr=class extends Fy{constructor(){super(...arguments),this.label=new Ks,this.secondaryLabel=new Xd}};M([ft(jl,{optional:!0})],gr.prototype,"fill",2),M([ft(pr,{optional:!0})],gr.prototype,"fillOpacity",2),M([ft(zy,{optional:!0})],gr.prototype,"stroke",2),M([ft(pa,{optional:!0})],gr.prototype,"strokeWidth",2),M([ft(pr,{optional:!0})],gr.prototype,"strokeOpacity",2),M([ft($s)],gr.prototype,"label",2),M([ft($s)],gr.prototype,"secondaryLabel",2);var ak=class extends s8{constructor(){super(...arguments),this.group=new Xl,this.tile=new gr}};M([ft($s)],ak.prototype,"group",2),M([ft($s)],ak.prototype,"tile",2);var Cn=class extends i8{constructor(){super(...arguments),this.highlightStyle=new ak,this.tooltip=new n8,this.group=new Zs,this.tile=new Is,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};M([ft(jl,{optional:!0})],Cn.prototype,"sizeName",2),M([ft(jl,{optional:!0})],Cn.prototype,"labelKey",2),M([ft(jl,{optional:!0})],Cn.prototype,"secondaryLabelKey",2),M([ft(o8,{optional:!0})],Cn.prototype,"itemStyler",2),M([ft($s)],Cn.prototype,"highlightStyle",2),M([ft($s)],Cn.prototype,"tooltip",2),M([ft($s)],Cn.prototype,"group",2),M([ft($s)],Cn.prototype,"tile",2),M([ft(dw)],Cn.prototype,"undocumentedGroupFills",2),M([ft(dw)],Cn.prototype,"undocumentedGroupStrokes",2);var{Rect:Gy,Group:c8,BBox:Vy,Selection:fw,Text:Wh}=Hh._Scene,{Color:h8,Logger:u8,clamp:d8,isEqual:p8,sanitizeHtml:ok}=Hh._Util,mw=new Wh;function g8(t,e){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a}=e;mw.setProperties({text:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:o,height:r}=mw.computeBBox();return{width:o,height:r}}function yw(t){if(typeof t=="string"&&!h8.validColorString(t)){const e="black";return u8.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),e}return t}function fr(t){return t.children.length>0?t.sumSize-t.size:t.size}var vw={left:0,center:.5,right:1},f8={top:0,middle:.5,bottom:1},m8=class extends Hh._Scene.Group{distanceSquared(t,e){return this.computeBBox().distanceSquared(t,e)}},rk=class s1 extends Hh._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Cn,this.groupSelection=fw.select(this.contentGroup,m8),this.highlightSelection=fw.select(this.highlightGroup,c8)}groupTitleHeight(e,i){var s,n;const a=(n=(s=this.labelData)==null?void 0:s[e.index])==null?void 0:n.label,{label:o}=this.properties.group,r=3;if(a!=null){if(o.fontSize>i.width/r||o.fontSize>i.height/r)return;{const{height:l}=g8(a,o);return Math.max(l,o.fontSize)}}}getNodePadding(e,i){if(e.index===0)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:s},padding:n}=this.properties.group,a=this.groupTitleHeight(e,i),o=a!=null?a+s:0;return{top:n+o,right:n,bottom:n,left:n}}processData(){return F(this,null,function*(){var e;yield As(s1.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,tile:c,group:h}=this.properties;if(!((e=this.data)!=null&&e.length)){this.labelData=void 0;return}const u=d=>typeof d=="number"?d.toFixed(2):typeof d=="string"?d:"";this.labelData=Array.from(this.rootNode,({datum:d,depth:p,children:g})=>{const f=g.length===0,m=f?c.label:h.label;let v;if(d!=null&&p!=null&&a!=null){const x=d[a];v=this.getLabelText(m,{depth:p,datum:d,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:x},u)}v===""&&(v=void 0);let y;if(f&&d!=null&&p!=null&&o!=null){const x=d[o];y=this.getLabelText(c.secondaryLabel,{depth:p,datum:d,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:o,sizeKey:r,sizeName:l,value:x},u)}return y===""&&(y=void 0),v!=null||y!=null?{label:v,secondaryLabel:y}:void 0})})}sortChildren({children:e}){const i=Array.from(e,(n,a)=>a).filter(n=>fr(e[n])>0).sort((n,a)=>fr(e[a])-fr(e[n]));return{sortedChildrenIndices:i,childAt:n=>{const a=i[n];return e[a]}}}squarify(e,i,s,n){const{index:a,datum:o,children:r}=e;if(i.width<=0||i.height<=0){s[a]=void 0,n[a]=void 0;return}const l=o!=null?this.getNodePadding(e,i):{top:0,right:0,bottom:0,left:0};s[a]=a===0?void 0:i,n[a]=a===0?void 0:l;const{sortedChildrenIndices:c,childAt:h}=this.sortChildren(e),u=c.every(I=>r[I].children.length===0),d=1,p=i.width-l.left-l.right,g=i.height-l.top-l.bottom;if(p<=0||g<=0)return;const f=c.length;let m=0,v=0,y=1/0,x=c.reduce((I,N)=>I+fr(r[N]),0);const b=new Vy(i.x+l.left,i.y+l.top,p,g),S=b.clone();let k=0;for(;k<f;){const I=fr(h(k)),N=fr(h(v)),C=S.width<S.height;m+=I;const E=C?S.height:S.width,O=C?S.width:S.height,P=O*N/m;let w=E*m/x;const R=Math.max(P,w)/Math.min(P,w),G=Math.abs(d-R);if(G<y){y=G,k++;continue}m-=I,w=E*m/x;let z=C?S.x:S.y;for(let U=v;U<k;U++){const V=h(U),X=fr(V),j=C?z:S.x,tt=C?S.y:z,ct=O*X/m,st=C?ct:w,$=C?w:ct,Q=new Vy(j,tt,st,$);this.applyGap(b,Q,u),this.squarify(V,Q,s,n),x-=X,z+=ct}C?(S.y+=w,S.height-=w):(S.x+=w,S.width-=w),v=k,m=0,y=1/0}const D=S.width<S.height;let T=D?S.x:S.y;for(let I=v;I<f;I++){const N=h(I),C=D?T:S.x,E=D?S.y:T,O=fr(N)/x,P=S.width*(D?O:1),w=S.height*(D?1:O),R=new Vy(C,E,P,w);this.applyGap(b,R,u),this.squarify(N,R,s,n),T+=D?P:w}}applyGap(e,i,s){const n=s?this.properties.tile.gap*.5:this.properties.group.gap*.5,a=c=>({left:c.x,top:c.y,right:c.x+c.width,bottom:c.y+c.height}),o=a(e),r=a(i);["top","right","bottom","left"].forEach(c=>{p8(o[c],r[c])||i.shrink(n,c)})}createNodeData(){return F(this,null,function*(){})}updateSelections(){return F(this,null,function*(){var e;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:i}=(e=this.chart)!=null?e:{};if(!i)return;const s=Array.from(this.rootNode),n=a=>{a.append([new Gy,new Wh({tag:0}),new Wh({tag:1})])};this.groupSelection.update(s,n,a=>this.getDatumId(a)),this.highlightSelection.update(s,n,a=>this.getDatumId(a))})}getTileFormat(e,i){const{datum:s,depth:n,children:a}=e,{colorKey:o,childrenKey:r,labelKey:l,secondaryLabelKey:c,sizeKey:h,tile:u,group:d,itemStyler:p}=this.properties;if(!p||s==null||n==null)return{};const g=a.length===0,f=this.getNodeFill(e),m=this.getNodeStroke(e),v=g?u.strokeWidth:d.strokeWidth;return this.ctx.callbackCache.call(p,{seriesId:this.id,highlighted:i,datum:s,depth:n,colorKey:o,childrenKey:r,labelKey:l,secondaryLabelKey:c,sizeKey:h,fill:f,fillOpacity:1,stroke:m,strokeWidth:v,strokeOpacity:1})}getNodeFill(e){var i,s,n;if(e.children.length===0)return(i=this.properties.tile.fill)!=null?i:e.fill;const{undocumentedGroupFills:o}=this.properties,r=o[Math.min((s=e.depth)!=null?s:0,o.length)];return(n=this.properties.group.fill)!=null?n:r}getNodeStroke(e){var i,s,n;if(e.children.length===0)return(i=this.properties.tile.stroke)!=null?i:e.stroke;const{undocumentedGroupStrokes:o}=this.properties,r=o[Math.min((s=e.depth)!=null?s:0,o.length)];return(n=this.properties.group.stroke)!=null?n:r}updateNodes(){return F(this,null,function*(){var e,i;const{rootNode:s,data:n}=this,{highlightStyle:a,tile:o,group:r}=this.properties,{seriesRect:l}=(e=this.chart)!=null?e:{};if(!l||!n)return;const{width:c,height:h}=l,u=Array.from(this.rootNode,()=>{}),d=Array.from(this.rootNode,()=>{});this.squarify(s,new Vy(0,0,c,h),u,d);let p=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();p!=null&&!this.properties.group.interactive&&p.children.length!==0&&(p=void 0),this.updateNodeMidPoint(u);const g=(v,y,x)=>{var b,S,k,D,T,I,N,C,E,O,P;const w=u[v.index];if(w==null){y.visible=!1;return}const R=v.children.length===0;let G,z,U,V,X;if(x){const{tile:vt,group:dt}=a;G=R?vt.fill:dt.fill,z=R?vt.fillOpacity:dt.fillOpacity,U=R?vt.stroke:dt.stroke,V=R?vt.strokeWidth:dt.strokeWidth,X=R?vt.strokeOpacity:dt.strokeOpacity}const j=this.getTileFormat(v,x),tt=(S=(b=j?.fill)!=null?b:G)!=null?S:this.getNodeFill(v),ct=(D=(k=j?.fillOpacity)!=null?k:z)!=null?D:R?o.fillOpacity:r.fillOpacity,st=(I=(T=j?.stroke)!=null?T:U)!=null?I:this.getNodeStroke(v),$=(C=(N=j?.strokeWidth)!=null?N:V)!=null?C:R?o.strokeWidth:r.strokeWidth,Q=(O=(E=j?.strokeOpacity)!=null?E:X)!=null?O:R?o.strokeOpacity:r.strokeOpacity;y.crisp=!0,y.fill=yw(tt),y.fillOpacity=ct,y.stroke=yw(st),y.strokeWidth=$,y.strokeOpacity=Q,y.cornerRadius=R?o.cornerRadius:r.cornerRadius;const J=(P=v.parent)==null?void 0:P.children.every(vt=>vt.children.length===0),it=v.parent!=null?u[v.parent.index]:void 0,ht=v.parent!=null?d[v.parent.index]:void 0;J===!0&&it!=null&&ht!=null?(y.clipBBox=w,y.x=it.x+ht.left,y.y=it.y+ht.top,y.width=it.width-(ht.left+ht.right),y.height=it.height-(ht.top+ht.bottom)):(y.clipBBox=void 0,y.x=w.x,y.y=w.y,y.width=w.width,y.height=w.height),y.visible=!0};this.groupSelection.selectByClass(Gy).forEach(v=>g(v.datum,v,!1)),this.highlightSelection.selectByClass(Gy).forEach(v=>{var y;const x=v.datum===p;v.visible=x||((y=p?.contains(v.datum))!=null?y:!1),v.visible&&g(v.datum,v,x)});const f=Array.from(this.rootNode,v=>{var y,x,b,S;const{index:k,children:D}=v,T=u[k],I=(y=this.labelData)==null?void 0:y[k];if(!(T==null||I==null))if(D.length===0){const N={width:T.width,height:T.height,meta:null},C=n_(I.label,this.properties.tile.label,I.secondaryLabel,this.properties.tile.secondaryLabel,{padding:o.padding},()=>N);if(C==null)return;const{height:E,label:O,secondaryLabel:P}=C,{textAlign:w,verticalAlign:R,padding:G}=o,z=(x=vw[w])!=null?x:.5,U=T.x+G+(T.width-2*G)*z,V=(b=f8[R])!=null?b:.5,X=T.y+G+E*.5+(T.height-2*G-E)*V;return{label:O!=null?{text:O.text,fontSize:O.fontSize,lineHeight:O.lineHeight,style:this.properties.tile.label,x:U,y:X-(E-O.height)*.5}:void 0,secondaryLabel:P!=null?{text:P.text,fontSize:P.fontSize,lineHeight:P.fontSize,style:this.properties.tile.secondaryLabel,x:U,y:X+(E-P.height)*.5}:void 0,verticalAlign:"middle",textAlign:w}}else{if(I?.label==null)return;{const{padding:N,textAlign:C}=r,E=this.groupTitleHeight(v,T);if(E==null)return;const O=T.width-2*N,P=Wh.wrap(I.label,T.width-2*N,1/0,r.label,"never"),w=(S=vw[C])!=null?S:.5;return{label:{text:P,fontSize:r.label.fontSize,lineHeight:Ks.lineHeight(r.label.fontSize),style:this.properties.group.label,x:T.x+N+O*w,y:T.y+N+E*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:C}}}}),m=(v,y,x,b)=>{const S=v.children.length===0,k=f[v.index],D=x===0?k?.label:k?.secondaryLabel;if(k==null||D==null){y.visible=!1;return}let T;if(b){const{tile:I,group:N}=a;T=I.secondaryLabel.color,S?x===0&&(T=I.label.color):T=N.label.color}y.text=D.text,y.fontSize=D.fontSize,y.lineHeight=D.lineHeight,y.fontStyle=D.style.fontStyle,y.fontFamily=D.style.fontFamily,y.fontWeight=D.style.fontWeight,y.fill=T??D.style.color,y.textAlign=k.textAlign,y.textBaseline=k.verticalAlign,y.x=D.x,y.y=D.y,y.visible=!0};this.groupSelection.selectByClass(Wh).forEach(v=>{m(v.datum,v,v.tag,!1)}),this.highlightSelection.selectByClass(Wh).forEach(v=>{var y;const x=v.datum===p;v.visible=x||((y=p?.contains(v.datum))!=null?y:!1),v.visible&&m(v.datum,v,v.tag,x)})})}updateNodeMidPoint(e){this.rootNode.walk(i=>{const s=e[i.index];s!=null&&(i.midPoint.x=s.x+s.width/2,i.midPoint.y=s.y)})}pickNodeClosestDatum(e){const i=this.pickNodeExactShape(e);return i!==void 0?i:this.pickNodeNearestDistantObject(e,this.groupSelection.nodes())}getTooltipHtml(e){var i;const{datum:s,depth:n}=e,{id:a}=this,{tooltip:o,colorKey:r,colorName:l=r,labelKey:c,secondaryLabelKey:h,sizeKey:u,sizeName:d=u,childrenKey:p}=this.properties,g=e.children.length===0,f=g||this.properties.group.interactive;if(s==null||n==null||!f)return Hh._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const m=c!=null?s[c]:void 0,v=this.getTileFormat(e,!1),y=(i=v?.fill)!=null?i:this.getNodeFill(e);if(!o.renderer&&!m)return Hh._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const x=[],b=h!=null?s[h]:void 0;b!=null&&h!==r&&h!==u&&x.push(ok(b));const S=u!=null?s[u]:void 0;S!=null&&x.push(`${d}: ${ok(S)}`);const k=r!=null?s[r]:void 0;k!=null&&x.push(`${l}: ${ok(k)}`);const D=x.join("<br>"),T={title:m,color:g?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:y,content:D};return o.toTooltipHtml(T,{depth:n,datum:s,colorKey:r,labelKey:c,secondaryLabelKey:h,sizeKey:u,title:m,color:y,seriesId:a,childrenKey:p,colorName:l,itemId:void 0,sizeName:d})}pickFocus(e){var i,s;const{focusPath:n}=this;(n.length<2||this.focusSorted==null)&&(n.length=1,this.focusSorted=this.sortChildren(n[0].nodeDatum),n.push({nodeDatum:this.focusSorted.childAt(0),childIndex:0}));const{datumIndexDelta:a,otherIndexDelta:o}=e,r=n[n.length-1];if(o===1){if(r.nodeDatum.children.length>0){this.focusSorted=this.sortChildren(r.nodeDatum);const c={nodeDatum:this.focusSorted.childAt(0),childIndex:0};return n.push(c),this.computeFocusOutputs(c)}}else if(a!==0){const c=r.childIndex+a,h=((s=(i=r.nodeDatum.parent)==null?void 0:i.children.length)!=null?s:1)-1;return r.childIndex=d8(0,c,h),r.nodeDatum=this.focusSorted.childAt(r.childIndex),this.computeFocusOutputs(r)}const l=super.pickFocus(e);return o<0&&(this.focusSorted=this.sortChildren(n[n.length-1].nodeDatum.parent)),l}computeFocusBounds(e){var i;return(i=this.groupSelection.selectByClass(Gy)[e.index])==null?void 0:i.computeTransformedBBox()}};rk.className="TreemapSeries",rk.type="treemap";var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:y8,DEFAULT_FONT_FAMILY:lk,DEFAULT_HIERARCHY_FILLS:v8,DEFAULT_HIERARCHY_STROKES:x8,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Uy,DEFAULT_LABEL_COLOUR:xw,FONT_WEIGHT:bw}=t8._Theme,b8={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:rk,tooltipDefaults:{range:"exact"},solo:!0,themeTemplate:{series:{group:{label:{enabled:!0,color:xw,fontStyle:void 0,fontWeight:bw.NORMAL,fontSize:12,fontFamily:lk,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:Uy,fontStyle:void 0,fontWeight:bw.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:lk,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:Uy,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:lk,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:xw},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:Uy},secondaryLabel:{color:Uy},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{fills:s,strokes:n}=t(e),a=i.get(y8),o=i.get(v8),r=i.get(x8);return{fills:s,strokes:n,colorRange:a,undocumentedGroupFills:o,undocumentedGroupStrokes:r}}},$l=(Y(),W(H)),qs=(Y(),W(H)),Sw=(Y(),W(H)),{DropShadow:S8,Label:M8}=Sw._Scene,{AbstractBarSeriesProperties:_8,BaseProperties:lp,PropertiesArray:k8,SeriesTooltip:D8,Validate:Tt,BOOLEAN:I8,COLOR_STRING:ck,FUNCTION:Mw,LINE_DASH:_w,NUMBER:A8,OBJECT:yo,OBJECT_ARRAY:L8,POSITIVE_NUMBER:Yh,RATIO:hk,STRING:Kh,UNION:kw}=Sw._ModuleSupport,Hy=class extends lp{};M([Tt(kw(["subtotal","total"],"a total type"))],Hy.prototype,"totalType",2),M([Tt(A8)],Hy.prototype,"index",2),M([Tt(Kh)],Hy.prototype,"axisLabel",2);var Dw=class extends lp{};M([Tt(Mw,{optional:!0})],Dw.prototype,"renderer",2);var uk=class extends M8{constructor(){super(...arguments),this.placement="end",this.padding=6}};M([Tt(kw(["start","end","inside"],"a placement"))],uk.prototype,"placement",2),M([Tt(Yh)],uk.prototype,"padding",2);var wi=class extends lp{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new S8().set({enabled:!1}),this.label=new uk,this.tooltip=new Dw}};M([Tt(Kh,{optional:!0})],wi.prototype,"name",2),M([Tt(ck)],wi.prototype,"fill",2),M([Tt(ck)],wi.prototype,"stroke",2),M([Tt(hk)],wi.prototype,"fillOpacity",2),M([Tt(hk)],wi.prototype,"strokeOpacity",2),M([Tt(_w)],wi.prototype,"lineDash",2),M([Tt(Yh)],wi.prototype,"lineDashOffset",2),M([Tt(Yh)],wi.prototype,"strokeWidth",2),M([Tt(Yh)],wi.prototype,"cornerRadius",2),M([Tt(Mw,{optional:!0})],wi.prototype,"itemStyler",2),M([Tt(yo)],wi.prototype,"shadow",2),M([Tt(yo)],wi.prototype,"label",2),M([Tt(yo)],wi.prototype,"tooltip",2);var Zl=class extends lp{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};M([Tt(I8)],Zl.prototype,"enabled",2),M([Tt(ck)],Zl.prototype,"stroke",2),M([Tt(hk)],Zl.prototype,"strokeOpacity",2),M([Tt(_w)],Zl.prototype,"lineDash",2),M([Tt(Yh)],Zl.prototype,"lineDashOffset",2),M([Tt(Yh)],Zl.prototype,"strokeWidth",2);var Wy=class extends lp{constructor(){super(...arguments),this.positive=new wi,this.negative=new wi,this.total=new wi}};M([Tt(yo)],Wy.prototype,"positive",2),M([Tt(yo)],Wy.prototype,"negative",2),M([Tt(yo)],Wy.prototype,"total",2);var vo=class extends _8{constructor(){super(...arguments),this.item=new Wy,this.totals=new k8(Hy),this.line=new Zl,this.tooltip=new D8}};M([Tt(Kh)],vo.prototype,"xKey",2),M([Tt(Kh)],vo.prototype,"yKey",2),M([Tt(Kh,{optional:!0})],vo.prototype,"xName",2),M([Tt(Kh,{optional:!0})],vo.prototype,"yName",2),M([Tt(yo)],vo.prototype,"item",2),M([Tt(L8)],vo.prototype,"totals",2),M([Tt(yo)],vo.prototype,"line",2),M([Tt(yo)],vo.prototype,"tooltip",2);var{adjustLabelPlacement:T8,SeriesNodePickMode:Iw,fixNumericExtent:Aw,valueProperty:Lw,keyProperty:N8,accumulativeValueProperty:Yy,trailingAccumulatedValueProperty:O8,ChartAxisDirection:dk,getRectConfig:C8,updateRect:E8,checkCrisp:R8,updateLabelNode:w8,prepareBarAnimationFunctions:P8,collapsedStartingBarPosition:B8,resetBarSelectionsFn:F8,seriesLabelFadeInAnimation:z8,resetLabelFn:G8,animationValidation:V8,DEFAULT_CARTESIAN_DIRECTION_KEYS:U8,DEFAULT_CARTESIAN_DIRECTION_NAMES:H8,isFiniteNumber:Tw,computeBarFocusBounds:W8}=qs._ModuleSupport,{Rect:Y8,motion:K8}=qs._Scene,{sanitizeHtml:cp,isContinuous:Nw}=qs._Util,{ContinuousScale:j8}=qs._Scale,pk=class extends qs._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:U8,directionNames:H8,pickModes:[Iw.NEAREST_NODE,Iw.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:F8,label:G8}}),this.properties=new vo,this.seriesItemTypes=new Set(["positive","negative","total"])}processData(t){return F(this,null,function*(){var e,i,s,n;const{xKey:a,yKey:o,totals:r}=this.properties,{data:l=[]}=this;if(!this.properties.isValid()||!this.visible)return;const c=k=>Nw(k)&&Number(k)>=0,h=k=>Nw(k)&&Number(k)<0,u=k=>k==="total"||k==="subtotal",d={missingValue:void 0,invalidValue:void 0},p=[],g=r.reduce((k,D)=>{const T=k.get(D.index);return T?T.push(D):k.set(D.index,[D]),k},new Map);l.forEach((k,D)=>{var T;p.push(k),(T=g.get(D))==null||T.forEach(I=>p.push(K(B({},I.toJson()),{[a]:I.axisLabel})))});const f=[];this.ctx.animationManager.isSkipped()||f.push(V8());const m=(e=this.getCategoryAxis())==null?void 0:e.scale,v=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:y,xScaleType:x,yScaleType:b}=this.getScaleInformation({xScale:m,yScale:v}),{processedData:S}=yield this.requestDataModel(t,p,{props:[N8(a,x,{id:"xValue"}),Yy(o,b,K(B({},d),{id:"yCurrent"})),Yy(o,b,K(B({},d),{missingValue:0,id:"yCurrentTotal"})),Yy(o,b,K(B({},d),{id:"yCurrentPositive",validation:c})),Yy(o,b,K(B({},d),{id:"yCurrentNegative",validation:h})),O8(o,b,K(B({},d),{id:"yPrevious"})),Lw(o,b,{id:"yRaw"}),Lw("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:u}),...y?[qs._ModuleSupport.SMALLEST_KEY_INTERVAL,qs._ModuleSupport.LARGEST_KEY_INTERVAL]:[],...f]});this.smallestDataInterval=(s=S.reduced)==null?void 0:s.smallestKeyInterval,this.largestDataInterval=(n=S.reduced)==null?void 0:n.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:s,smallestDataInterval:n}=this;if(!i||!s)return[];const{keys:[a],values:o}=i.domain,r=s.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if(r?.def.type==="key"&&r?.def.valueType==="category")return a;const l=Tw(n)?n:0,c=(e=qs._ModuleSupport.extent(a))!=null?e:[NaN,NaN],h=this.getCategoryAxis(),u=!!h?.isReversed(),d=t===dk.Y,p=u===d?0:-l,g=u===d?l:0,f=c[0]+p,m=c[1]+g;return Aw([f,m],h)}else{const l=s.resolveProcessedDataIndexById(this,"yCurrent"),c=o[l],h=[Math.min(0,c[0]),Math.max(0,c[1])];return Aw(h)}}createNodeData(){return F(this,null,function*(){var t,e,i;const{data:s,dataModel:n,smallestDataInterval:a}=this,{line:o}=this.properties,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(s&&r&&l&&n))return;const c=r.scale,h=l.scale,u=r.isReversed(),d=this.getBarDirection()===dk.X,p=(t=j8.is(c)?c.calcBandwidth(a):c.bandwidth)!=null?t:10;if(((e=this.processedData)==null?void 0:e.type)!=="ungrouped")return;const g={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return g;const f=n.resolveProcessedDataIndexById(this,"yRaw"),m=n.resolveProcessedDataIndexById(this,"xValue"),v=n.resolveProcessedDataIndexById(this,"totalTypeValue"),y=[],x=n.resolveProcessedDataIndexById(this,"yCurrent"),b=n.resolveProcessedDataIndexById(this,"yPrevious"),S=n.resolveProcessedDataIndexById(this,"yCurrentTotal");function k(P,w,R){return P||w?{cumulativeValue:R[S],trailingValue:w?T:0}:{cumulativeValue:R[x],trailingValue:R[b]}}function D(P,w,R,G,z){return P?G:w?(G??0)-(z??0):R}let T=0;const{xKey:I,yKey:N,xName:C,yName:E}=this.properties;(i=this.processedData)==null||i.data.forEach(({keys:P,datum:w,values:R},G)=>{const z=R[v],U=this.isSubtotal(z),V=this.isTotal(z),X=V||U,j=P[m],tt=Math.round(c.convert(j)),ct=R[f],{cumulativeValue:st,trailingValue:$}=k(V,U,R);X&&(T=st??0);const Q=Math.round(h.convert(st)),J=Math.round(h.convert($)),it=D(V,U,ct,st,$),ht=(it??0)>=0,vt=this.getSeriesItemType(ht,z),{fill:dt,stroke:lt,strokeWidth:bt,label:Dt}=this.getItemConfig(vt),$t=ht?Q:J,It=ht?J:Q,Ne=Math.max(bt,Math.abs(It-$t)),Zt={x:d?Math.min($t,It):tt,y:d?tt:Math.min($t,It),width:d?Ne:p,height:d?p:Ne},hs={x:Zt.x+Zt.width/2,y:Zt.y+Zt.height/2},Zi=X?Q:J,ga=Math.floor(o.strokeWidth)%2/2,jh=u?Q:Zi,hp=u?Zi:Q;let xo,fa;d?(xo={x:jh+ga,y:Zt.y},fa={x:hp+ga,y:Zt.y+Zt.height}):(xo={x:Zt.x,y:jh+ga},fa={x:Zt.x+Zt.width,y:hp+ga});const J8={x:u?fa.x:xo.x,y:u?fa.y:xo.y,x2:u?xo.x:fa.x,y2:u?xo.y:fa.y,size:0};y.push(J8);const tq=this.getLabelText(Dt,{itemId:vt==="subtotal"?"total":vt,value:it,datum:w,xKey:I,yKey:N,xName:C,yName:E},fk=>Tw(fk)?fk.toFixed(2):String(fk)),Ow={index:G,series:this,itemId:vt,datum:w,cumulativeValue:st??0,xValue:j,yValue:it,yKey:N,xKey:I,x:Zt.x,y:Zt.y,width:Zt.width,height:Zt.height,midPoint:hs,fill:dt,stroke:lt,strokeWidth:bt,opacity:1,label:B({text:tq},T8({isPositive:(it??-1)>=0,isVertical:!d,placement:Dt.placement,padding:Dt.padding,rect:Zt}))};g.nodeData.push(Ow),g.labelData.push(Ow)});const O=this.properties.line.enabled;return x!==void 0&&O&&(g.pointData=y),g})}updateSeriesItemTypes(){var t,e;const{dataModel:i,seriesItemTypes:s,processedData:n}=this;if(!i||!n)return;s.clear();const a=i.resolveProcessedDataIndexById(this,"yCurrentPositive"),o=i.resolveProcessedDataIndexById(this,"yCurrentNegative"),r=i.resolveProcessedDataIndexById(this,"totalTypeValue"),l=(t=n.domain.values[a])!=null?t:[],c=(e=n.domain.values[o])!=null?e:[];l.length>0&&s.add("positive"),c.length>0&&s.add("negative");const h=n?.domain.values[r];h&&h.forEach(u=>{(u==="total"||u==="subtotal")&&s.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new Y8}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){return F(this,null,function*(){const{nodeData:e,datumSelection:i}=t,s=e??[];return i.update(s)})}updateDatumNodes(t){return F(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:s,ctx:n}=this,{yKey:a,highlightStyle:{item:o}}=this.properties,r=this.getCategoryAxis(),l=R8(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval),c=this.getCategoryDirection()===dk.X;e.each((h,u)=>{const d=u.itemId,{fillOpacity:p,strokeOpacity:g,strokeWidth:f,lineDash:m,lineDashOffset:v,cornerRadius:y,itemStyler:x,shadow:b}=this.getItemConfig(d),S={fill:u.fill,stroke:u.stroke,fillOpacity:p,strokeOpacity:g,lineDash:m,lineDashOffset:v,fillShadow:b,strokeWidth:this.getStrokeWidth(f),cornerRadius:y},k=c?u.width>0:u.height>0,D=C8({datum:u,isHighlighted:i,style:S,highlightStyle:o,itemStyler:x,seriesId:s,itemId:u.itemId,ctx:n,value:u.yValue,yKey:a});D.crisp=l,D.visible=k,E8({rect:h,config:D})})})}updateLabelSelection(t){return F(this,null,function*(){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const s=e[0].itemId,{label:n}=this.getItemConfig(s),a=n.enabled?e:[];return i.update(a)})}updateLabelNodes(t){return F(this,null,function*(){t.labelSelection.each((e,i)=>{w8(e,this.getItemConfig(i.itemId).label,i.label)})})}getTooltipHtml(t){var e,i,s;const n=this.getCategoryAxis(),a=this.getValueAxis();if(!this.properties.isValid()||!n||!a)return qs._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:o}=this,{xKey:r,yKey:l,xName:c,yName:h,tooltip:u}=this.properties,{datum:d,itemId:p,xValue:g,yValue:f}=t,{fill:m,fillOpacity:v,stroke:y,strokeWidth:x,strokeOpacity:b,lineDash:S=[],lineDashOffset:k,cornerRadius:D,name:T,itemStyler:I}=this.getItemConfig(p);let N;I&&(N=this.ctx.callbackCache.call(I,{datum:d,xKey:r,yKey:l,fill:m,fillOpacity:v,stroke:y,strokeWidth:x,strokeOpacity:b,lineDash:S,lineDashOffset:k,cornerRadius:D,highlighted:!1,seriesId:o,itemId:t.itemId}));const C=(i=(e=N?.fill)!=null?e:m)!=null?i:"gray",E=cp(n.formatDatum(g)),O=cp(a.formatDatum(f)),P=this.isTotal(p),w=this.isSubtotal(p);let R;P?R="Total":w?R="Subtotal":R=(s=T??h)!=null?s:l;const G=cp(h),z=`<b>${cp(c??r)}</b>: ${E}<br/><b>${cp(R)}</b>: ${O}`;return u.toTooltipHtml({title:G,content:z,backgroundColor:C},{seriesId:o,itemId:p,datum:d,xKey:r,yKey:l,xName:c,yName:h,color:C,title:G})}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,s=[],n=a=>a.charAt(0).toUpperCase()+a.substring(1);return i.forEach(a=>{const{fill:o,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:h,name:u}=this.getItemConfig(a);s.push({legendType:"category",id:e,itemId:a,seriesId:e,enabled:!0,label:{text:u??n(a)},symbols:[{marker:{fill:o,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:h}}]})}),s}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,contextData:i,paths:s}){const n=P8(B8(this.isVertical(),this.axes,"normal"));K8.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n),z8(this,"labels",this.ctx.animationManager,e);const{pointData:a}=i;if(!a)return;const[o]=s;this.isVertical()?this.animateConnectorLinesVertical(o,a):this.animateConnectorLinesHorizontal(o,a)}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),n=s?.isReversed(),a=n?(c,h)=>c<h:(c,h)=>c>h,o=s?.scale.convert(0),r=e.reduce((c,h)=>(a(h.x,c)&&(c=h.x),c),n?1/0:0),l=(c,h,u,d,p)=>(c-h)/(u-h)*(p-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:o,to:r,ease:qs._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,u)=>{const d=l(c,o,r,o,h.x),p=l(c,o,r,o,h.x2);u!==0&&i.lineTo(d,h.y),i.moveTo(p,h.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const s=this.getValueAxis(),n=s?.isReversed(),a=n?(c,h)=>c>h:(c,h)=>c<h,o=s?.scale.convert(0),r=e.reduce((c,h)=>(a(h.y,c)&&(c=h.y),c),n?0:1/0),l=(c,h,u,d,p)=>(c-h)/(u-h)*(p-d)+d;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:o,to:r,ease:qs._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((h,u)=>{const d=l(c,o,r,o,h.y),p=l(c,o,r,o,h.y2);u!==0&&i.lineTo(h.x,d),i.moveTo(h.x2,p)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){return F(this,null,function*(){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:n}=t;n&&(n.forEach((a,o)=>{o!==0&&s.lineTo(a.x,a.y),s.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:a}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:n,lineDashOffset:a,lineJoin:"round",pointerEvents:qs._Scene.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return W8((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}};pk.className="WaterfallSeries",pk.type="waterfall";var Ky=(Y(),W(H)),gk={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:Ky._Theme.FONT_WEIGHT.NORMAL,fontSize:12,fontFamily:Ky._Theme.DEFAULT_FONT_FAMILY,color:Ky._Theme.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"end"}},X8={series:{item:{positive:gk,negative:gk,total:gk},line:{stroke:Ky._Theme.PALETTE_NEUTRAL_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,toggleSeries:!1}},$8={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:pk,tooltipDefaults:{range:"exact"},defaultAxes:[{type:$l._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:$l._Theme.POSITION.BOTTOM},{type:$l._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:$l._Theme.POSITION.LEFT}],themeTemplate:X8,swapDefaultAxesCondition:({direction:t})=>t==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,palette:s})=>{if(i==="user-indexed"){const{fills:n,strokes:a}=t(e);return{line:{stroke:s.neutral.stroke},item:{positive:{fill:n[0],stroke:a[0]},negative:{fill:n[1],stroke:a[1]},total:{fill:n[2],stroke:a[2]}}}}return{line:{stroke:s.neutral.stroke},item:{positive:{fill:s.up.fill,stroke:s.up.stroke,label:{color:$l._Theme.DEFAULT_LABEL_COLOUR}},negative:{fill:s.down.fill,stroke:s.down.stroke,label:{color:$l._Theme.DEFAULT_LABEL_COLOUR}},total:{fill:s.neutral.fill,stroke:s.neutral.stroke,label:{color:$l._Theme.DEFAULT_LABEL_COLOUR}}}}}};function Z8(){cm._ModuleSupport.moduleRegistry.register(HU,JU,OH,PW,jW,c3,K3,fj,q$,k3,JW,uY,gY,CY,K5,M5,bX,l$,BX,zY,WY,RK,Yj,W$,eH,RZ,wZ,p6,b6,_H,LH,_9,$6,Y9,J9,QY,b8,$8,DK),cm._ModuleSupport.enterpriseModule.isEnterprise=!0,cm._ModuleSupport.enterpriseModule.licenseManager=t=>{var e,i;return new PK((i=(e=t.container)==null?void 0:e.ownerDocument)!=null?i:typeof document>"u"?void 0:document)},cm._ModuleSupport.enterpriseModule.injectWatermark=GK}if(dU(uS,(Y(),W(H)),Js.exports),Z8(),typeof Js.exports=="object"&&typeof Xh=="object"){var q8=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Object.getOwnPropertyNames(e))!Object.prototype.hasOwnProperty.call(t,n)&&n!==i&&Object.defineProperty(t,n,{get:()=>e[n],enumerable:!(s=Object.getOwnPropertyDescriptor(e,n))||s.enumerable});return t};Js.exports=q8(Js.exports,Xh)}return Js.exports});
