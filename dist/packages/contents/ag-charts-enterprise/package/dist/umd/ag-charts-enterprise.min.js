(function(El,Ss){typeof exports=="object"&&typeof module=="object"?module.exports=Ss():typeof define=="function"&&define.amd?define("agCharts",[],Ss):typeof exports=="object"?exports.agCharts=Ss():El.agCharts=Ss()})(this,()=>{var El={},Ss={exports:El};if(typeof oG>"u")var oG=function(t){throw new Error("Unknown module: "+t)};var Cl=Object.defineProperty,F2=Object.defineProperties,dx=Object.getOwnPropertyDescriptor,z2=Object.getOwnPropertyDescriptors,px=Object.getOwnPropertyNames,zh=Object.getOwnPropertySymbols,G2=Object.getPrototypeOf,zp=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,V2=Reflect.get,Gp=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),mt=Math.pow,fx=(e,t,i)=>t in e?Cl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,R=(e,t)=>{for(var i in t||(t={}))zp.call(t,i)&&fx(e,i,t[i]);if(zh)for(var i of zh(t))gx.call(t,i)&&fx(e,i,t[i]);return e},Z=(e,t)=>F2(e,z2(t)),Le=(e,t)=>{var i={};for(var s in e)zp.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&zh)for(var s of zh(e))t.indexOf(s)<0&&gx.call(e,s)&&(i[s]=e[s]);return i},L=(e,t)=>function(){return e&&(t=(0,e[px(e)[0]])(e=0)),t},Us=(e,t)=>{for(var i in t)Cl(e,i,{get:t[i],enumerable:!0})},U2=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of px(t))!zp.call(e,n)&&n!==i&&Cl(e,n,{get:()=>t[n],enumerable:!(s=dx(t,n))||s.enumerable});return e},W=e=>U2(Cl({},"__esModule",{value:!0}),e),x=(e,t,i,s)=>{for(var n=s>1?void 0:s?dx(t,i):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(n=(s?r(t,i,n):r(n))||n);return s&&n&&Cl(t,i,n),n},fn=(e,t,i)=>V2(G2(e),i,t),B=(e,t,i)=>new Promise((s,n)=>{var a=l=>{try{o(i.next(l))}catch(c){n(c)}},r=l=>{try{o(i.throw(l))}catch(c){n(c)}},o=l=>l.done?s(l.value):Promise.resolve(l.value).then(a,r);o((i=i.apply(e,t)).next())}),W2=function(e,t){this[0]=e,this[1]=t},Y2=e=>{var t=e[Gp("asyncIterator")],i=!1,s,n={};return t==null?(t=e[Gp("iterator")](),s=a=>n[a]=r=>t[a](r)):(t=t.call(e),s=a=>n[a]=r=>{if(i){if(i=!1,a==="throw")throw r;return r}return i=!0,{done:!1,value:new W2(new Promise(o=>{var l=t[a](r);if(!(l instanceof Object))throw TypeError("Object expected");o(l)}),1)}}),n[Gp("iterator")]=()=>n,s("next"),"throw"in t?s("throw"):n.throw=a=>{throw a},"return"in t&&s("return"),n},H2=L({"packages/ag-charts-community/src/options/chart/axisOptions.ts"(){"use strict"}}),K2=L({"packages/ag-charts-community/src/options/chart/crosshairOptions.ts"(){"use strict"}}),j2=L({"packages/ag-charts-community/src/options/chart/chartOptions.ts"(){"use strict"}}),X2=L({"packages/ag-charts-community/src/options/chart/chartBuilderOptions.ts"(){"use strict"}}),$2=L({"packages/ag-charts-community/src/options/chart/crossLineOptions.ts"(){"use strict"}}),q2=L({"packages/ag-charts-community/src/options/chart/dropShadowOptions.ts"(){"use strict"}}),mx,Z2=L({"packages/ag-charts-community/src/options/chart/errorBarOptions.ts"(){"use strict";mx=["bar","line","scatter"]}}),Q2=L({"packages/ag-charts-community/src/options/chart/eventOptions.ts"(){"use strict"}}),J2=L({"packages/ag-charts-community/src/options/chart/gradientLegendOptions.ts"(){"use strict"}}),tL=L({"packages/ag-charts-community/src/options/chart/labelOptions.ts"(){"use strict"}}),eL=L({"packages/ag-charts-community/src/options/chart/legendOptions.ts"(){"use strict"}}),iL=L({"packages/ag-charts-community/src/options/chart/polarAxisOptions.ts"(){"use strict"}}),Gh,yx=L({"packages/ag-charts-community/src/options/chart/tooltipOptions.ts"(){"use strict";Gh=(e=>(e.POINTER="pointer",e.NODE="node",e))(Gh||{})}}),sL=L({"packages/ag-charts-community/src/options/chart/themeOptions.ts"(){"use strict"}}),nL=L({"packages/ag-charts-community/src/options/chart/types.ts"(){"use strict"}}),aL=L({"packages/ag-charts-community/src/options/chart/zoomOptions.ts"(){"use strict"}}),rL=L({"packages/ag-charts-community/src/options/series/seriesOptions.ts"(){"use strict"}}),oL=L({"packages/ag-charts-community/src/options/series/cartesian/cartesianOptions.ts"(){"use strict"}}),lL=L({"packages/ag-charts-community/src/options/series/cartesian/cartesianSeriesTooltipOptions.ts"(){"use strict"}}),cL=L({"packages/ag-charts-community/src/options/series/cartesian/cartesianSeriesTypes.ts"(){"use strict"}}),hL=L({"packages/ag-charts-community/src/options/series/cartesian/areaOptions.ts"(){"use strict"}}),uL=L({"packages/ag-charts-community/src/options/series/cartesian/barOptions.ts"(){"use strict"}}),dL=L({"packages/ag-charts-community/src/options/series/cartesian/boxPlotOptions.ts"(){"use strict"}}),pL=L({"packages/ag-charts-community/src/options/series/cartesian/bubbleOptions.ts"(){"use strict"}}),gL=L({"packages/ag-charts-community/src/options/series/cartesian/bulletOptions.ts"(){"use strict"}}),fL=L({"packages/ag-charts-community/src/options/series/cartesian/commonOptions.ts"(){"use strict"}}),mL=L({"packages/ag-charts-community/src/options/series/cartesian/lineOptions.ts"(){"use strict"}}),yL=L({"packages/ag-charts-community/src/options/series/cartesian/heatmapOptions.ts"(){"use strict"}}),vL=L({"packages/ag-charts-community/src/options/series/cartesian/histogramOptions.ts"(){"use strict"}}),xL=L({"packages/ag-charts-community/src/options/series/cartesian/rangeBarOptions.ts"(){"use strict"}}),bL=L({"packages/ag-charts-community/src/options/series/cartesian/rangeAreaOptions.ts"(){"use strict"}}),SL=L({"packages/ag-charts-community/src/options/series/cartesian/scatterOptions.ts"(){"use strict"}}),_L=L({"packages/ag-charts-community/src/options/series/cartesian/waterfallOptions.ts"(){"use strict"}}),ML=L({"packages/ag-charts-community/src/options/series/hierarchy/hierarchyOptions.ts"(){"use strict"}}),kL=L({"packages/ag-charts-community/src/options/series/hierarchy/sunburstOptions.ts"(){"use strict"}}),DL=L({"packages/ag-charts-community/src/options/series/hierarchy/treemapOptions.ts"(){"use strict"}}),AL=L({"packages/ag-charts-community/src/options/series/polar/nightingaleOptions.ts"(){"use strict"}}),LL=L({"packages/ag-charts-community/src/options/series/polar/donutOptions.ts"(){"use strict"}}),TL=L({"packages/ag-charts-community/src/options/series/polar/pieOptions.ts"(){"use strict"}}),IL=L({"packages/ag-charts-community/src/options/series/polar/polarOptions.ts"(){"use strict"}}),EL=L({"packages/ag-charts-community/src/options/series/polar/radarOptions.ts"(){"use strict"}}),CL=L({"packages/ag-charts-community/src/options/series/polar/radarLineOptions.ts"(){"use strict"}}),OL=L({"packages/ag-charts-community/src/options/series/polar/radarAreaOptions.ts"(){"use strict"}}),NL=L({"packages/ag-charts-community/src/options/series/polar/radialBarOptions.ts"(){"use strict"}}),RL=L({"packages/ag-charts-community/src/options/series/polar/radialColumnOptions.ts"(){"use strict"}}),wL=L({"packages/ag-charts-community/src/options/series/polar/radialOptions.ts"(){"use strict"}}),vx,PL=L({"packages/ag-charts-community/src/options/agChartOptions.ts"(){"use strict";H2(),K2(),j2(),X2(),$2(),q2(),Z2(),Q2(),J2(),tL(),eL(),iL(),yx(),sL(),nL(),aL(),rL(),oL(),lL(),cL(),hL(),uL(),dL(),pL(),gL(),fL(),mL(),yL(),vL(),xL(),bL(),SL(),_L(),ML(),kL(),DL(),AL(),LL(),TL(),IL(),EL(),CL(),OL(),NL(),RL(),wL(),vx=0}});function Vp(e,t){Vh.has(t)||(Vh.set(t,!0),e())}function xx(e){return e}function BL(e,t=0,i){const{leading:s=!1,trailing:n=!0,maxWait:a=1/0}=i??{};let r,o;if(a<t)throw new Error("Value of maxWait cannot be lower than waitMs.");function l(...c){if(s&&!o){o=Date.now(),r=setTimeout(()=>o=null,t),e(...c);return}let h=t;if(a!==1/0&&o){const u=Date.now()-o;t>a-u&&(h=a-u)}clearTimeout(r),o??(o=Date.now()),r=setTimeout(()=>{o=null,n&&e(...c)},h)}return Object.assign(l,{cancel(){clearTimeout(r),o=null}})}function bx(e,t=0,i){const{leading:s=!0,trailing:n=!0}=i??{};let a,r,o=!1;function l(){n&&r?(a=setTimeout(l,t),e(...r)):o=!1,r=null}function c(...h){o?r=h:(o=!0,a=setTimeout(l,t),s?e(...h):r=h)}return Object.assign(c,{cancel(){clearTimeout(a),o=!1,r=null}})}var Vh,Uh=L({"packages/ag-charts-community/src/util/function.ts"(){"use strict";Vh=new Map,Vp.clear=()=>Vh.clear()}}),$,gt=L({"packages/ag-charts-community/src/util/logger.ts"(){"use strict";Uh(),$={log(...e){console.log(...e)},warn(e,...t){console.warn(`AG Charts - ${e}`,...t)},error(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)},table(...e){console.table(...e)},warnOnce(e,...t){Vp(()=>$.warn(e,...t),`Logger.warn: ${e}`)},errorOnce(e,...t){Vp(()=>$.error(e,...t),`Logger.error: ${e}`)}}}}),ro,_i,ui=L({"packages/ag-charts-community/src/util/time/interval.ts"(){"use strict";gt(),ro=class{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){var s;const n=(s=this._rangeCallback)==null?void 0:s.call(this,e,t),a=this._encode(i?this.floor(e):this.ceil(e)),r=this._encode(i?this.ceil(t):this.floor(t));if(r<a)return[];const o=[];for(let l=a;l<=r;l++){const c=this._decode(l);o.push(c)}return n?.(),o}},_i=class extends ro{getOffset(e,t){const i=typeof e=="number"||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(i)%t}every(e,t){let i=0,s;const n=e;e=Math.max(1,Math.round(e)),n!==e&&$.warnOnce(`interval step of [${n}] rounded to [${e}].`);const{snapTo:a="start"}=t??{};if(typeof a=="string"){const l=i;s=(c,h)=>{const u=a==="start"?c:h;return i=this.getOffset(u,e),()=>i=l}}else typeof a=="number"?i=this.getOffset(new Date(a),e):a instanceof Date&&(i=this.getOffset(a,e));const r=l=>{const c=this._encode(l);return Math.floor((c-i)/e)},o=l=>this._decode(l*e+i);return new ro(r,o,s)}}}});function FL(e){return e.getTime()}function zL(e){return new Date(e)}var Up,Sx,_x=L({"packages/ag-charts-community/src/util/time/millisecond.ts"(){"use strict";ui(),Up=new _i(FL,zL),Sx=Up}}),GL,Jn,ei,_s,mn,oo,lo,Ol,yn=L({"packages/ag-charts-community/src/util/time/duration.ts"(){"use strict";GL=new Date(0).getFullYear(),Jn=1e3,ei=Jn*60,_s=ei*60,mn=_s*24,oo=mn*7,lo=mn*30,Ol=mn*365}});function VL(e){return Math.floor((e.getTime()-Wp)/Jn)}function UL(e){return new Date(Wp+e*Jn)}var Wp,Yp,Mx,kx=L({"packages/ag-charts-community/src/util/time/second.ts"(){"use strict";yn(),ui(),Wp=new Date().getTimezoneOffset()*ei,Yp=new _i(VL,UL),Mx=Yp}});function WL(e){return Math.floor((e.getTime()-Hp)/ei)}function YL(e){return new Date(Hp+e*ei)}var Hp,Kp,Dx,Ax=L({"packages/ag-charts-community/src/util/time/minute.ts"(){"use strict";yn(),ui(),Hp=new Date().getTimezoneOffset()*ei,Kp=new _i(WL,YL),Dx=Kp}});function HL(e){return Math.floor((e.getTime()-jp)/_s)}function KL(e){return new Date(jp+e*_s)}var jp,Xp,Lx,Tx=L({"packages/ag-charts-community/src/util/time/hour.ts"(){"use strict";yn(),ui(),jp=new Date().getTimezoneOffset()*ei,Xp=new _i(HL,KL),Lx=Xp}});function jL(e){const t=e.getTimezoneOffset()*ei;return Math.floor((e.getTime()-t)/mn)}function XL(e){const t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t}var $p,Ix,Ex=L({"packages/ag-charts-community/src/util/time/day.ts"(){"use strict";yn(),ui(),$p=new _i(jL,XL),Ix=$p}});function ja(e){const i=(7+e-4)%7;function s(a){const r=a.getTimezoneOffset()*ei;return Math.floor((a.getTime()-r)/oo-i/7)}function n(a){const r=new Date(1970,0,1);return r.setDate(r.getDate()+a*7+i),r}return new _i(s,n)}var qp,Cx,Ox,Nx,Rx,wx,Px,Bx,Fx=L({"packages/ag-charts-community/src/util/time/week.ts"(){"use strict";yn(),ui(),qp=ja(0),Cx=ja(1),Ox=ja(2),Nx=ja(3),Rx=ja(4),wx=ja(5),Px=ja(6),Bx=qp}});function $L(e){return e.getFullYear()*12+e.getMonth()}function qL(e){const t=Math.floor(e/12),i=e-t*12;return new Date(t,i,1)}var Zp,zx,Gx=L({"packages/ag-charts-community/src/util/time/month.ts"(){"use strict";ui(),Zp=new _i($L,qL),zx=Zp}});function ZL(e){return e.getFullYear()}function QL(e){const t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t}var Qp,Vx,Ux=L({"packages/ag-charts-community/src/util/time/year.ts"(){"use strict";ui(),Qp=new _i(ZL,QL),Vx=Qp}});function JL(e){return Math.floor(e.getTime()/ei)}function tT(e){return new Date(e*ei)}var Wx,eT=L({"packages/ag-charts-community/src/util/time/utcMinute.ts"(){"use strict";yn(),ui(),Wx=new _i(JL,tT)}});function iT(e){return Math.floor(e.getTime()/_s)}function sT(e){return new Date(e*_s)}var Yx,nT=L({"packages/ag-charts-community/src/util/time/utcHour.ts"(){"use strict";yn(),ui(),Yx=new _i(iT,sT)}});function aT(e){return Math.floor(e.getTime()/mn)}function rT(e){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}var Hx,oT=L({"packages/ag-charts-community/src/util/time/utcDay.ts"(){"use strict";yn(),ui(),Hx=new _i(aT,rT)}});function lT(e){return e.getUTCFullYear()*12+e.getUTCMonth()}function cT(e){const t=Math.floor(e/12),i=e-t*12;return new Date(Date.UTC(t,i,1))}var Kx,hT=L({"packages/ag-charts-community/src/util/time/utcMonth.ts"(){"use strict";ui(),Kx=new _i(lT,cT)}});function uT(e){return e.getUTCFullYear()}function dT(e){const t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}var jx,pT=L({"packages/ag-charts-community/src/util/time/utcYear.ts"(){"use strict";ui(),jx=new _i(uT,dT)}}),Xx={};Us(Xx,{day:()=>$p,friday:()=>wx,hour:()=>Xp,millisecond:()=>Up,minute:()=>Kp,monday:()=>Cx,month:()=>Zp,saturday:()=>Px,second:()=>Yp,sunday:()=>qp,thursday:()=>Rx,tuesday:()=>Ox,utcDay:()=>Hx,utcHour:()=>Yx,utcMinute:()=>Wx,utcMonth:()=>Kx,utcYear:()=>jx,wednesday:()=>Nx,year:()=>Qp});var gT=L({"packages/ag-charts-community/src/util/time/index.ts"(){"use strict";_x(),kx(),Ax(),Tx(),Ex(),Fx(),Gx(),Ux(),eT(),nT(),oT(),hT(),pT()}}),Xa,Wh=L({"packages/ag-charts-community/src/module/enterpriseModule.ts"(){"use strict";Xa={isEnterprise:!1}}});function Ms(e){const t=ks.find(i=>e.type===i.type&&e.optionsKey===i.optionsKey&&e.identifier===i.identifier);if(t){if(e.packageType==="enterprise"&&t.packageType==="community"){const i=ks.indexOf(t);ks.splice(i,1,e)}}else ks.push(e)}function Jp(){return ks.some(e=>e.packageType==="enterprise")}var Yh,ks,$a=L({"packages/ag-charts-community/src/module/module.ts"(){"use strict";Yh=class{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}},ks=[]}});function $x(e,t){Nl[e]=t}function fT(e,t){const i=Nl[e];if(i)return new i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}function qx(e,t){tg[e]=t}function mT(e){var t;return(t=tg[e])!=null?t:{}}var Nl,Hh,tg,co=L({"packages/ag-charts-community/src/chart/factory/axisTypes.ts"(){"use strict";Nl={},Hh={has(e){return Object.hasOwn(Nl,e)},get axesTypes(){return Object.keys(Nl)}},tg={}}});function Zx(e,t){Object.getOwnPropertyDescriptor(e,qa)==null&&Object.defineProperty(e,qa,{value:{}});const i=e[qa],s=t.toString();if(typeof i[s]<"u")return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const a=Object.getOwnPropertyDescriptor(e,t),r=a?.set,o=a?.get;return Object.defineProperty(e,t,{set:function(h){const{setters:u,observers:d}=i[s];let p;u.some(g=>g.length>2)&&(p=o?o.call(this):n.get(this));for(const g of u)if(h=g(this,t,h,p),h===Rl)return;r?r.call(this,h):n.set(this,h);for(const g of d)g(this,h,p)},get:function(){let h=o?o.call(this):n.get(this);for(const u of i[s].getters)if(h=u(this,t,h),h===Rl)return;return h},enumerable:!0,configurable:!1}),i[s]}function vn(e,t,i){return(s,n)=>{const a=Zx(s,n);a.setters.push(e),t&&a.getters.unshift(t),i&&Object.assign(a,i)}}function yT(e){return(t,i)=>{Zx(t,i).observers.push(e)}}function Kh(e){return typeof e<"u"&&qa in e}function ho(e){const t=new Set;for(;Kh(e);)t.add(e?.[qa]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(i=>Object.keys(i))}function vT(e){return ho(e).reduce((t,i)=>{var s;return t[i]=(s=e[i])!=null?s:null,t},{})}function xT(e,t){const i=t.toString();for(;Kh(e);){const s=e[qa];if(Object.hasOwn(s,i))return s[i];e=Object.getPrototypeOf(e)}}var Rl,qa,Za=L({"packages/ag-charts-community/src/util/decorator.ts"(){"use strict";Rl=Symbol("BREAK"),qa="__decorator_config"}});function eg(e){return e!=null}function ye(e){return Array.isArray(e)}function Qx(e){return typeof e=="boolean"}function jh(e){return e instanceof Date}function wl(e){return jh(e)&&!isNaN(Number(e))}function Jx(e){return e instanceof RegExp}function uo(e){return typeof e=="function"}function Ws(e){return typeof e=="object"&&e!==null&&!ye(e)}function bT(e){return ye(e)||qi(e)}function qi(e){return typeof e=="object"&&e!==null&&e.constructor===Object}function Zi(e){return typeof e=="string"}function Ds(e){return typeof e=="number"}function Et(e){return Ds(e)&&Number.isFinite(e)}function t0(e){return typeof window<"u"&&e instanceof HTMLElement}function ST(e,t){return Zi(t)&&Object.keys(e).includes(t)}function e0(e,t){return Object.values(e).includes(t)}function i0(e){return typeof e=="symbol"}var Ut=L({"packages/ag-charts-community/src/util/type-guards.ts"(){"use strict"}});function _T(...e){return bt(...e.reverse())}function bt(...e){var t;const i={};for(const s of e){if(!Ws(s))continue;const n=Kh(s)?ho(s):Object.keys(s);for(const a of n)qi(i[a])&&qi(s[a])?i[a]=bt(i[a],s[a]):(t=i[a])!=null||(i[a]=s[a])}return i}function ig(e,...t){return t&&ye(e)?e.map(i=>bt(i,...t)):e}function s0(e,t){return Object.entries(e).reduce((i,[s,n])=>(i[s]=t(n,s,e),i),{})}function n0(e,t){return(ye(t)?t:t.split(".")).reduce((s,n)=>s[n],e)}function a0(e,t,i){const s=ye(t)?t.slice():t.split("."),n=s.pop(),a=s.reduce((r,o)=>r[o],e);a[n]=i}function sg(e,t,i){if(i===void 0)return t;for(const s of e){const n=i[s];n!==void 0&&(t[s]=n)}return t}var Te=L({"packages/ag-charts-community/src/util/object.ts"(){"use strict";Za(),Ut()}});function MT(e,t){ta[e]=t}function kT(e,t){Xh[e]=bt(t,Xh[e])}function r0(e){var t;return(t=Xh[e])!=null?t:{}}function DT(e){var t;return(t=ta[e])!=null?t:"unknown"}var ta,Xh,wi,po=L({"packages/ag-charts-community/src/chart/factory/chartTypes.ts"(){"use strict";Te(),ta={},Xh={},wi={has(e){return Object.hasOwn(ta,e)},isCartesian(e){return ta[e]==="cartesian"},isPolar(e){return ta[e]==="polar"},isHierarchy(e){return ta[e]==="hierarchy"},get seriesTypes(){return Object.keys(ta)},get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))},get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))},get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}}}});function o0(e){return Qa.some(t=>t.type==="series"&&t.identifier===e)}function ng(e){var t;return(t=Qa.find(i=>i.type==="series"&&i.identifier===e))==null?void 0:t.chartTypes}function AT(e){var t,i;return((i=(t=Qa.find(s=>s.type==="series"&&s.identifier===e))==null?void 0:t.useCount)!=null?i:0)>0}function LT(e){var t;return((t=ng(e))==null?void 0:t.find(s=>s==="cartesian"))==="cartesian"}function TT(e){var t;return((t=ng(e))==null?void 0:t.find(s=>s==="polar"))==="polar"}function IT(e){var t;return((t=ng(e))==null?void 0:t.find(s=>s==="hierarchy"))==="hierarchy"}function ET(e){return e.packageType==="enterprise"}function CT(e){var t;if(!ET(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const i=Qa.find(s=>s.type===e.type&&s.optionsKey===e.optionsKey&&s.identifier===e.identifier&&e.chartTypes.every(n=>s.chartTypes.includes(n)));return i&&((t=i.useCount)!=null||(i.useCount=0),i.useCount++),i!=null}function OT(){return Qa.filter(({useCount:e})=>e==null||e===0)}var Qa,Pl=L({"packages/ag-charts-community/src/chart/factory/expectedEnterpriseModules.ts"(){"use strict";Qa=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}]}});function Bl(e){var t,i,s;return(s=(i=(t=e.series)==null?void 0:t[0])==null?void 0:i.type)!=null?s:"line"}function Ja(e){const t=Bl(e);return t==null?!0:t==="cartesian"?($.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):wi.isCartesian(t)||LT(t)}function ag(e){const t=Bl(e);return t==null?!1:t==="hierarchy"?($.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):wi.isHierarchy(t)||IT(t)}function Fl(e){const t=Bl(e);return t==null?!1:t==="polar"?($.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):wi.isPolar(t)||TT(t)}function NT(e){const t=Bl(e);return Fl(e)&&t!=="pie"&&t!=="donut"}function RT(e){return e==null?!1:wi.has(e)}function wT(e){return e==null?!1:Hh.has(e)}var $h=L({"packages/ag-charts-community/src/chart/mapping/types.ts"(){"use strict";gt(),co(),po(),Pl()}});function PT(e){var t,i,s,n;const a=[],r=DT(Bl(e));for(const{type:o,chartTypes:l,optionsKey:c,optionsInnerKey:h,identifier:u}of Qa)if(!(r!=="unknown"&&!l.includes(r))){if(o==="root"||o==="legend"){const d=e[c];if(d==null)continue;h?d[h]&&(a.push(`${c}.${h}`),delete d[h]):(a.push(c),delete e[c])}else if(o==="axis"){if(!("axes"in e)||!((t=e.axes)!=null&&t.some(d=>d.type===u)))continue;a.push(`axis[type=${u}]`),e.axes=e.axes.filter(d=>d.type!==u)}else if(o==="axis-option"){if(!("axes"in e)||!((i=e.axes)!=null&&i.some(d=>d[c])))continue;a.push(`axis.${c}`),e.axes.forEach(d=>{d[c]&&delete d[c]})}else if(o==="series"){if(!((s=e.series)!=null&&s.some(d=>d.type===u)))continue;a.push(`series[type=${u}]`),e.series=e.series.filter(d=>d.type!==u)}else if(o==="series-option"){if(!((n=e.series)!=null&&n.some(d=>d[c])))continue;a.push(`series.${c}`),e.series.forEach(d=>{d[c]&&delete d[c]})}}a.length&&$.warnOnce([`unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:
`,"",...a,"","See: https://charts.ag-grid.com/javascript/installation/"].join(`
`))}var BT=L({"packages/ag-charts-community/src/chart/factory/processEnterpriseOptions.ts"(){"use strict";gt(),$h(),po(),Pl()}});function Pi(e){return e instanceof Rt||e instanceof go}var Rt,go,di=L({"packages/ag-charts-community/src/util/properties.ts"(){"use strict";Za(),gt(),Ut(),Rt=class{constructor(e){this.className=e}set(e){const t=new Set(Object.keys(e));for(const i of ho(this))if(t.has(i)){const s=e[i],n=this;Pi(n[i])?n[i]=n[i]instanceof go?n[i].reset(s):n[i].set(s):n[i]=s,t.delete(i)}for(const i of t){const{className:s=this.constructor.name}=this.constructor;$.warn(`unable to set [${i}] in ${s} - property is unknown`)}return this}isValid(){return ho(this).every(e=>{const{optional:t}=xT(this,e);return t||typeof this[e]<"u"})}toJson(){return ho(this).reduce((e,t)=>{const i=this[t];return e[t]=Pi(i)?i.toJson():i,e},{})}},go=class u2 extends Array{constructor(t,...i){super(i.length),Object.defineProperty(this,"itemFactory",{value:t,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(ye(t)){this.length=t.length;for(let i=0;i<t.length;i++)this[i]=new this.itemFactory().set(t[i])}return this}reset(t){return new u2(this.itemFactory,...t)}toJson(){return this.slice()}}}});function Bi(e,t){if(ye(t)){if(!ye(e)||e.length!==t.length||t.some((i,s)=>Bi(e[s],i)!=null))return t}else if(qi(t)){if(!qi(e))return t;const i={},s=new Set([...Object.keys(e),...Object.keys(t)]);for(const n of s)if(e[n]!==t[n])if(typeof e[n]!=typeof t[n])i[n]=t[n];else{const a=Bi(e[n],t[n]);a!==null&&(i[n]=a)}return Object.keys(i).length?i:null}else if(e!==t)return t;return null}function ii(e,t){return ye(e)?e.map(i=>ii(i,t)):qi(e)?Object.entries(e).reduce((i,[s,n])=>{var a;return i[s]=(a=t?.shallow)!=null&&a.includes(s)?qh(n):ii(n,t),i},{}):qh(e)}function qh(e){return ye(e)?[...e]:qi(e)?R({},e):jh(e)?new Date(e):Jx(e)?new RegExp(e.source,e.flags):e}function Ys(e,t,i,...s){var n;if(ye(e))t(e,...s),e.forEach((a,r)=>{Ys(a,t,i,...l0(s,r))});else if(qi(e)){t(e,...s);for(const a of Object.keys(e)){if((n=i?.skip)!=null&&n.includes(a))continue;const r=e[a];(ye(r)||qi(r))&&Ys(r,t,i,...l0(s,a))}}}function ea(e,t,i={}){var s,n,a;const{path:r,matcherPath:o=r?r.replace(/(\[[0-9+]+])/i,"[]"):void 0,skip:l=[],constructors:c={},constructedArrays:h=new WeakMap,allowedTypes:u={},idx:d}=i;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${r??"<root>"}`);if(t==null)return e;if(Pi(e))return e.set(t);const p=e;d!=null&&"_declarationOrder"in p&&(p._declarationOrder=d);const g=rg(e);for(const f in t){const m=`${o?o+".":""}${f}`;if(l.indexOf(m)>=0)continue;const v=t[f],y=`${r?r+".":""}${f}`,b=p.constructor,_=p[f];let S=(s=c[m])!=null?s:c[f];try{const D=rg(_),A=rg(v);if(g===zl&&!(f in e||Object.hasOwn(p,f))){$.warn(`unable to set [${y}] in ${b?.name} - property is unknown`);continue}const I=(n=u[m])!=null?n:[D];if(!(D===zl&&A==="object")){if(D!=null&&A!=null&&!I.includes(A)){$.warn(`unable to set [${y}] in ${b?.name} - can't apply type of [${A}], allowed types are: [${I}]`);continue}}if(A==="array")if(S=(a=S??h.get(_))!=null?a:c[`${m}[]`],Pi(p[f]))p[f].set(v);else if(S!=null){const T=v;p[f]=T.map((E,C)=>ea(new S,E,Z(R({},i),{path:y,matcherPath:m+"[]",idx:C})))}else p[f]=v;else if(A===zl)p[f]=v;else if(A==="object")if(Pi(_))p[f].set(v);else if(_!=null)ea(_,v,Z(R({},i),{path:y,matcherPath:m,idx:void 0}));else if(S!=null){const T=new S;Pi(T)?p[f]=T.set(v):p[f]=ea(T,v,Z(R({},i),{path:y,matcherPath:m,idx:void 0}))}else p[f]=v;else Pi(p[f])?p[f].set(v):p[f]=v}catch(D){$.warn(`unable to set [${y}] in [${b?.name}]; nested error is: ${D.message}`)}}return e}function l0(e,t){return e.map(i=>i?.[t])}function rg(e){return e==null?null:t0(e)||jh(e)?"primitive":ye(e)?"array":Ws(e)?qi(e)?"object":zl:uo(e)?"function":"primitive"}var zl,si=L({"packages/ag-charts-community/src/util/json.ts"(){"use strict";gt(),di(),Ut(),zl="class-instance"}});function FT({identifier:e,chartTypes:[t],instanceConstructor:i,seriesDefaults:s,themeTemplate:n,enterpriseThemeTemplate:a,paletteFactory:r,solo:o,stackable:l,groupable:c,stackedByDefault:h,swapDefaultAxesCondition:u}){lg[e]=i,cg[e]=s,c0(e,n,a),r&&UT(e,r),o&&XT(e),l&&$T(e),c&&jT(e),h&&qT(e),u&&ZT(e,u),MT(e,t)}function c0(e,t,i={}){const s=Zh[e];Zh[e]=bt(t,s),hg[e]=bt(i,t,s)}function zT(e,t){const i=lg[e];if(i)return new i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}function GT(e){var t;return ii((t=cg[e])!=null?t:{})}function VT(e){return Xa.isEnterprise?hg[e]:Zh[e]}function UT(e,t){ug[e]=t}function WT(e){return ug[e]}function og(e){return dg.has(e)}function YT(e){return pg.has(e)}function HT(e){return gg.has(e)}function KT(e){return fg.has(e)}function jT(e){gg.add(e)}function XT(e){dg.add(e)}function $T(e){pg.add(e)}function qT(e){fg.add(e)}function ZT(e,t){Qh[e]=t}function QT(e){var t,i;let s;for(const n of(t=e.series)!=null?t:[]){const{type:a="line"}=n,r=(i=Qh[a])==null?void 0:i.call(Qh,n);if(r!=null){if(s!=null&&s!=r)throw new Error("AG Charts - The provided series have incompatible directions");s=r}}return s}var lg,cg,Zh,hg,ug,dg,pg,gg,fg,Qh,Jh=L({"packages/ag-charts-community/src/chart/factory/seriesTypes.ts"(){"use strict";Wh(),si(),Te(),po(),lg={},cg={},Zh={},hg={},ug={},dg=new Set,pg=new Set,gg=new Set,fg=new Set,Qh={}}});function h0(e,t,i,s){u0[e]=i,mg[e]=t,yg[t]=s}function JT(){return yg}function tI(){return mg}var u0,mg,yg,tu=L({"packages/ag-charts-community/src/chart/factory/legendTypes.ts"(){"use strict";u0={},mg={},yg={}}}),vg,xg,bg,Sg,_g,Mg,xn=L({"packages/ag-charts-community/src/chart/themes/constants.ts"(){"use strict";vg=(e=>(e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=17]="LARGE",e))(vg||{}),xg=(e=>(e.NORMAL="normal",e.BOLD="bold",e.BOLDER="bolder",e.LIGHTER="lighter",e))(xg||{}),bg=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(bg||{}),Sg=(e=>(e.CATEGORY="category",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(Sg||{}),_g=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(_g||{}),Mg=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(Mg||{})}}),As,ia,eu=L({"packages/ag-charts-community/src/chart/themes/defaultColors.ts"(){"use strict";As={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},ia={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"}}}),sa,kg,Dg,Ag,Lg,Tg,Ig,Eg,Cg,Og,Hs,tr,Ng,ve,Tt,Rg,er,ir,Gl,Vl,fo,mo,sr,Qi,Ji,ts,es,iu,is,su,nu,Be=L({"packages/ag-charts-community/src/chart/themes/symbols.ts"(){"use strict";sa=Symbol("is-dark-theme"),kg=Symbol("extends-chart-defaults"),Dg=Symbol("extends-legend-defaults"),Ag=Symbol("extends-legend-item-defaults"),Lg=Symbol("extends-legend-item-marker-defaults"),Tg=Symbol("extends-axes-defaults"),Ig=Symbol("extends-axes-label-defaults"),Eg=Symbol("extends-axes-line-defaults"),Cg=Symbol("extends-axes-tick-defaults"),Og=Symbol("extends-axes-grid-line-defaults"),Hs=Symbol("extends-series-defaults"),tr=Symbol("extends-cartesian-marker-defaults"),Ng=Symbol("override-series-label-defaults"),ve=Symbol("default-font"),Tt=Symbol("default-label-colour"),Rg=Symbol("default-inverted-label-colour"),er=Symbol("default-inside-series-label-colour"),ir=Symbol("default-muted-label-colour"),Gl=Symbol("default-axis-grid-colour"),Vl=Symbol("default-axis-line-colour"),fo=Symbol("default-cross-lines-colour"),mo=Symbol("default-background-colour"),sr=Symbol("default-shadow-colour"),Qi=Symbol("default-waterfall-series-positive-colors"),Ji=Symbol("default-waterfall-series-negative-colors"),ts=Symbol("default-waterfall-series-total-colors"),es=Symbol("default-waterfall-series-connector-line-stroke"),iu=Symbol("default-polar-series-stroke"),is=Symbol("default-diverging-series-colour-range"),su=Symbol("default-hierarchy-fills"),nu=Symbol("default-hierarchy-strokes")}});function eI(e,t){var i,s;return e==null?null:{fills:(i=e.fills)!=null?i:t.fills,strokes:(s=e.strokes)!=null?s:t.strokes}}var au,d0,ru,p0,na,Ks,nr=L({"packages/ag-charts-community/src/chart/themes/chartTheme.ts"(){"use strict";si(),Te(),Ut(),co(),po(),tu(),Jh(),xn(),eu(),Be(),au="white",d0={fills:Object.values(As),strokes:Object.values(ia)},ru={get cartesian(){return{seriesTypes:wi.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:wi.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:wi.hierarchyTypes,commonOptions:[]}}},p0=Object.values(ru).reduce((e,{commonOptions:t})=>[...e,...t],[]),na=class re{getPalette(){return d0}static getAxisDefaults(t){return bt(t,{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:ve,color:Tt},label:{fontSize:12,fontFamily:ve,padding:5,color:Tt,avoidCollisions:!0},line:{enabled:!0,width:1,color:Vl},tick:{enabled:!1,width:1,color:Vl},gridLine:{enabled:!0,style:[{stroke:Gl,lineDash:[]}]},crossLines:{enabled:!1,fill:fo,stroke:fo,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:ve,padding:5,color:Tt}}})}static getSeriesDefaults(){return{tooltip:{enabled:!0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getLegendItemMarkerDefaults(){return{size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:mo},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:ve,color:Tt,wrapping:re.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:ve,color:ir,wrapping:re.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:ve,color:"rgb(140, 140, 140)",wrapping:re.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:re.getLegendItemMarkerDefaults(),toggleSeriesVisible:!0,label:{color:Tt,fontSize:12,fontFamily:ve}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Tt},inactiveStyle:{fill:ir},highlightStyle:{fill:Tt},label:{color:Tt}}},tooltip:{enabled:!0,darkTheme:sa,range:"nearest",delay:0},overlays:{loading:{darkTheme:sa},noData:{darkTheme:sa},noVisibleSeries:{darkTheme:sa}},listeners:{}}}constructor(t){var i;t=ii(t??{});const{overrides:s=null,palette:n=null}=t,a=this.createChartConfigPerChartType(this.getDefaults());if(s){const{common:o}=s,l=(c,h)=>{if(h)for(const u of c){const d=u;a[d]=bt(h,a[d])}};for(const[,{seriesTypes:c,commonOptions:h}]of Object.entries(ru)){const u=R({},o);for(const d of p0)h.includes(d)||delete u[d];l(c,u)}wi.seriesTypes.forEach(c=>{const h=c;s[h]&&(a[h]=bt(s[h],a[h]))})}const r=this.getPalette();this.palette=(i=eI(n,r))!=null?i:r,this.config=Object.freeze(this.templateTheme(a))}createChartConfigPerChartType(t){return Object.entries(ru).forEach(([i,{seriesTypes:s}])=>{const n=r0(i);s.forEach(a=>{const r=a;t[r]||(t[r]=ii(n))})}),t}getDefaults(){const t=s=>R(R(R({axes:{}},JT()),re.getChartDefaults()),r0(s)),i=(s,n)=>{var a;const r=t(s),o={};for(const l of n){o[l]=bt(VT(l),(a=o[l])!=null?a:ii(r));const{axes:c}=o[l];for(const h of Hh.axesTypes)c[h]=bt(c[h],mT(h),s==="cartesian"&&re.cartesianAxisDefault[h])}return o};return bt(i("cartesian",wi.cartesianTypes),i("polar",wi.polarTypes),i("hierarchy",wi.hierarchyTypes))}templateTheme(t){const i=ii(t),{extensions:s,properties:n}=this.getTemplateParameters();return Ys(i,a=>{if(a.__extends__){const r=a.__extends__,o=s.get(r);if(o==null)throw new Error(`AG Charts - no template variable provided for: ${r}`);Object.keys(o).forEach(l=>{l in a?Ws(a[l])&&(a[l]=bt(a[l],o[l])):a[l]=o[l]}),delete a.__extends__}if(a.__overrides__){const r=a.__overrides__,o=s.get(r);if(o==null)throw new Error(`AG Charts - no template variable provided for: ${r}`);Object.assign(a,o),delete a.__overrides__}if(ye(a))for(let r=0;r<a.length;r++){const o=a[r];n.has(o)&&(a[r]=n.get(o))}else for(const[r,o]of Object.entries(a))n.has(o)&&(a[r]=n.get(o))}),ii(i)}static getWaterfallSeriesDefaultPositiveColors(){return{fill:As.BLUE,stroke:ia.BLUE,label:{color:Tt}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:As.ORANGE,stroke:ia.ORANGE,label:{color:Tt}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:As.GRAY,stroke:ia.GRAY,label:{color:Tt}}}getTemplateParameters(){const t=new Map;t.set(kg,re.getChartDefaults()),t.set(Tg,re.getAxisDefaults()),t.set(Dg,re.getChartDefaults().legend),t.set(Ag,re.getChartDefaults().legend.item),t.set(Lg,re.getLegendItemMarkerDefaults()),t.set(Ig,re.getAxisDefaults().label),t.set(Eg,re.getAxisDefaults().line),t.set(Cg,re.getAxisDefaults().tick),t.set(Og,re.getAxisDefaults().gridLine),t.set(Hs,re.getSeriesDefaults()),t.set(Ng,{}),t.set(tr,re.getCartesianSeriesMarkerDefaults());const i=new Map;return i.set(sa,!1),i.set(ve,"Verdana, sans-serif"),i.set(Tt,"rgb(70, 70, 70)"),i.set(Rg,"white"),i.set(ir,"rgb(140, 140, 140)"),i.set(Gl,"rgb(224,234,241)"),i.set(Vl,"rgb(195, 195, 195)"),i.set(fo,"rgb(70, 70, 70)"),i.set(er,au),i.set(mo,au),i.set(sr,"rgba(0, 0, 0, 0.5)"),i.set(is,[As.ORANGE,As.YELLOW,As.GREEN]),i.set(su,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(nu,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(iu,au),i.set(Qi,re.getWaterfallSeriesDefaultPositiveColors()),i.set(Ji,re.getWaterfallSeriesDefaultNegativeColors()),i.set(ts,re.getWaterfallSeriesDefaultTotalColors()),i.set(es,re.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:i}}},na.cartesianAxisDefault={number:na.getAxisDefaults({line:{enabled:!1}}),log:na.getAxisDefaults({base:10,line:{enabled:!1}}),category:na.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:na.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":na.getAxisDefaults()},Ks=na}}),ou,aa,Ul,g0,yo,Wl=L({"packages/ag-charts-community/src/chart/themes/darkTheme.ts"(){"use strict";nr(),Be(),ou="#192232",aa={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ul={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},g0={fills:Object.values(aa),strokes:Object.values(Ul)},yo=class Dh extends Ks{static getWaterfallSeriesDefaultPositiveColors(){return{fill:aa.BLUE,stroke:Ul.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:aa.ORANGE,stroke:Ul.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:aa.GRAY,stroke:Ul.GRAY,label:{color:"white"}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(sa,!0),t.properties.set(Qi,Dh.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Dh.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Dh.getWaterfallSeriesDefaultTotalColors()),t.properties.set(es,Dh.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(iu,ou),t.properties.set(Tt,"white"),t.properties.set(ir,"#7D91A0"),t.properties.set(Gl,"#545A6E"),t.properties.set(fo,"white"),t.properties.set(is,[aa.ORANGE,aa.YELLOW,aa.GREEN]),t.properties.set(su,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(nu,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(mo,ou),t.properties.set(er,ou),t}getPalette(){return g0}constructor(t){super(t)}}}}),ra,Yl,f0,m0,iI=L({"packages/ag-charts-community/src/chart/themes/materialDark.ts"(){"use strict";Wl(),Be(),ra={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Yl={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},f0={fills:Object.values(ra),strokes:Object.values(Yl)},m0=class Ah extends yo{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ra.BLUE,stroke:Yl.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ra.RED,stroke:Yl.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ra.GRAY,stroke:Yl.GRAY,label:{color:"white"}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Ah.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Ah.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Ah.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[ra.ORANGE,ra.YELLOW,ra.GREEN]),t.properties.set(es,Ah.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return f0}}}}),oa,Hl,y0,v0,sI=L({"packages/ag-charts-community/src/chart/themes/materialLight.ts"(){"use strict";nr(),Be(),oa={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Hl={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},y0={fills:Object.values(oa),strokes:Object.values(Hl)},v0=class Lh extends Ks{static getWaterfallSeriesDefaultPositiveColors(){return{fill:oa.BLUE,stroke:Hl.BLUE,label:{color:Tt}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:oa.RED,stroke:Hl.RED,label:{color:Tt}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:oa.GRAY,stroke:Hl.GRAY,label:{color:Tt}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Lh.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Lh.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Lh.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[oa.ORANGE,oa.YELLOW,oa.GREEN]),t.properties.set(es,Lh.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return y0}}}}),vo,lu,x0,b0,S0,_0,nI=L({"packages/ag-charts-community/src/chart/themes/polychromaDark.ts"(){"use strict";Wl(),Be(),vo={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},lu={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},x0="#bbbbbb",b0="#eeeeee",S0={fills:Object.values(vo),strokes:Object.values(lu)},_0=class Th extends yo{static getWaterfallSeriesDefaultPositiveColors(){return{fill:vo.BLUE,stroke:lu.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:vo.RED,stroke:lu.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:x0,stroke:b0,label:{color:"white"}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Th.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Th.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Th.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[vo.BLUE,vo.RED]),t.properties.set(es,Th.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return S0}}}}),xo,cu,M0,k0,D0,A0,aI=L({"packages/ag-charts-community/src/chart/themes/polychromaLight.ts"(){"use strict";nr(),Be(),xo={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},cu={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},M0="#bbbbbb",k0="#888888",D0={fills:Object.values(xo),strokes:Object.values(cu)},A0=class Ih extends Ks{static getWaterfallSeriesDefaultPositiveColors(){return{fill:xo.BLUE,stroke:cu.BLUE,label:{color:Tt}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:xo.RED,stroke:cu.RED,label:{color:Tt}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:M0,stroke:k0,label:{color:Tt}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Ih.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Ih.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Ih.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[xo.BLUE,xo.RED]),t.properties.set(es,Ih.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return D0}}}}),la,Kl,L0,T0,rI=L({"packages/ag-charts-community/src/chart/themes/sheetsDark.ts"(){"use strict";Wl(),Be(),la={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Kl={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},L0={fills:Object.values(la),strokes:Object.values(Kl)},T0=class Eh extends yo{static getWaterfallSeriesDefaultPositiveColors(){return{fill:la.BLUE,stroke:Kl.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:la.ORANGE,stroke:Kl.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:la.GRAY,stroke:Kl.GRAY,label:{color:"white"}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Eh.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Eh.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Eh.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[la.ORANGE,la.YELLOW,la.GREEN]),t.properties.set(es,Eh.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return L0}}}}),ca,jl,I0,E0,oI=L({"packages/ag-charts-community/src/chart/themes/sheetsLight.ts"(){"use strict";nr(),Be(),ca={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},jl={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},I0={fills:Object.values(ca),strokes:Object.values(jl)},E0=class Ch extends Ks{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ca.BLUE,stroke:jl.BLUE,label:{color:Tt}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ca.ORANGE,stroke:jl.ORANGE,label:{color:Tt}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ca.GRAY,stroke:jl.GRAY,label:{color:Tt}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Ch.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Ch.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Ch.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[ca.ORANGE,ca.YELLOW,ca.GREEN]),t.properties.set(es,Ch.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return I0}}}}),ha,Xl,C0,O0,lI=L({"packages/ag-charts-community/src/chart/themes/vividDark.ts"(){"use strict";Wl(),Be(),ha={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Xl={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},C0={fills:Object.values(ha),strokes:Object.values(Xl)},O0=class Oh extends yo{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ha.BLUE,stroke:Xl.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ha.ORANGE,stroke:Xl.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ha.GRAY,stroke:Xl.GRAY,label:{color:"white"}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Oh.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Oh.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Oh.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[ha.ORANGE,ha.YELLOW,ha.GREEN]),t.properties.set(es,Oh.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return C0}}}}),ua,$l,N0,R0,cI=L({"packages/ag-charts-community/src/chart/themes/vividLight.ts"(){"use strict";nr(),Be(),ua={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},$l={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},N0={fills:Object.values(ua),strokes:Object.values($l)},R0=class Nh extends Ks{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ua.BLUE,stroke:$l.BLUE,label:{color:Tt}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ua.ORANGE,stroke:$l.ORANGE,label:{color:Tt}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ua.GRAY,stroke:$l.GRAY,label:{color:Tt}}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Qi,Nh.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Ji,Nh.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(ts,Nh.getWaterfallSeriesDefaultTotalColors()),t.properties.set(is,[ua.ORANGE,ua.YELLOW,ua.GREEN]),t.properties.set(es,Nh.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return N0}}}});function hI(e){if(e===null)return;let t=!0;const{baseTheme:i,palette:s,overrides:n}=e;if(i!==void 0&&typeof i!="string"&&typeof i!="object"&&($.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),t=!1),n!==void 0&&typeof n!="object"&&($.warn(`invalid theme.overrides type ${typeof n}, expected object.`),t=!1),typeof s=="object"){if(s!==null){const{fills:a,strokes:r}=s;a!==void 0&&!Array.isArray(a)&&($.warn("theme.overrides.fills must be undefined or an array"),t=!1),r!==void 0&&!Array.isArray(r)&&($.warn("theme.overrides.strokes must be undefined or an array"),t=!1)}}else s!==void 0&&($.warn(`invalid theme.palette type ${typeof s}, expected object.`),t=!1);if(t)return e}function uI(e){if(e===void 0||typeof e=="string"||e instanceof Ks)return e;if(typeof e=="object")return hI(e);$.warn(`invalid theme value type ${typeof e}, expected object or string.`)}function wg(e){let t=uI(e);if(t instanceof Ks)return t;if(t===void 0||typeof t=="string"){const r=Pg[t];return r?r():($.warnOnce(`the theme [${t}] is invalid, using [ag-default] instead.`),bo())}const i=[];let s;for(;typeof t=="object";)i.push(t.overrides),s??(s=t.palette),t=t.baseTheme;const n={baseTheme:t,overrides:bt(...i),palette:s},a=n.baseTheme?wg(n.baseTheme):bo();return new a.constructor(n)}var bo,hu,w0,P0,Pg,Bg=L({"packages/ag-charts-community/src/chart/mapping/themes.ts"(){"use strict";gt(),Te(),nr(),Wl(),iI(),sI(),nI(),aI(),rI(),oI(),lI(),cI(),bo=()=>new Ks,hu=()=>new yo,w0={undefined:bo,null:bo,"ag-default":bo,"ag-sheets":()=>new E0,"ag-polychroma":()=>new A0,"ag-vivid":()=>new R0,"ag-material":()=>new v0},P0={undefined:hu,null:hu,"ag-default-dark":hu,"ag-sheets-dark":()=>new T0,"ag-polychroma-dark":()=>new _0,"ag-vivid-dark":()=>new O0,"ag-material-dark":()=>new m0},Pg=R(R({},P0),w0)}});function js(e){if(e.length===0)return;let t=1/0,i=-1/0;for(let n of e)n instanceof Date&&(n=n.getTime()),typeof n=="number"&&(n<t&&(t=n),n>i&&(i=n));const s=[t,i];if(s.every(isFinite))return s}function B0(e,t,i){return ql(e,t,i).extent}function ql(e,t,i){var s;let n=!1;return e.length>2&&(e=(s=js(e))!=null?s:[NaN,NaN]),isNaN(t)||(n||(n=t>e[0]),e=[t,e[1]]),isNaN(i)||(n||(n=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:n}}function Zl(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!Zl(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function uu(e){return typeof e>"u"?[]:Array.isArray(e)?e:[e]}function Fg(e){return Array.from(new Set(e))}function zg(e,t){return e.reduce((i,s)=>{var n;const a=t(s);return(n=i[a])!=null||(i[a]=[]),i[a].push(s),i},{})}function Gg(e,t,i=0){if(e.length===0)return[];const s=[];for(let n=0;n<t;n++)s.push(e.at((n+i)%e.length));return s}var ni=L({"packages/ag-charts-community/src/util/array.ts"(){"use strict"}});function Vg(e){const t=typeof window<"u"?window:void 0;return t?.[e]}var F0=L({"packages/ag-charts-community/src/util/window.ts"(){"use strict"}}),z0,Ug,G0,te,Fi=L({"packages/ag-charts-community/src/util/debug.ts"(){"use strict";ni(),gt(),F0(),z0=2e3,Ug=Date.now(),G0=()=>{const e=Date.now()-Ug;if(e>z0){const t=(Math.floor(e/100)/10).toFixed(1);$.log(`**** ${t}s since last log message ****`)}Ug=Date.now()},te={create(...e){return Object.assign((...i)=>{te.check(...e)&&(typeof i[0]=="function"&&(i=uu(i[0]())),G0(),$.log(...i))},{check:()=>te.check(...e)})},check(...e){return e.length===0&&e.push(!0),uu(Vg("agChartsDebug")).some(i=>e.includes(i))}}}}),Wg,V0=L({"packages/ag-charts-community/src/module/optionsModule.ts"(){"use strict";co(),po(),Pl(),BT(),Jh(),Bg(),$h(),yx(),ni(),Fi(),si(),gt(),Te(),Ut(),Wh(),Wg=class{constructor(e,t){var i,s,n;const a={shallow:["data"]},r=ii(e,a),o=this.optionsType(r);this.sanityCheckAndCleanup(r),this.userOptions=r,this.activeTheme=wg(r.theme),this.seriesDefaults=this.getOptionsDefaults(r),this.specialOverrides=this.specialOverridesDefaults(R({},t));const l=this.getSeriesThemeConfig(o),{axes:c={},series:h}=l,u=Le(l,["axes","series"]);this.processedOptions=ii(bt(this.userOptions,u,this.seriesDefaults),a),this.processAxesOptions(this.processedOptions,c),this.processSeriesOptions(this.processedOptions),(Ja(this.processedOptions)||NT(this.processedOptions))&&((i=this.processedOptions.legend)==null?void 0:i.enabled)==null&&((n=(s=this.processedOptions).legend)!=null||(s.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),Xa.isEnterprise||PT(this.processedOptions)}getOptions(){var e;return(e=this.processedOptions)!=null?e:{}}diffOptions(e){return Bi(e,this.processedOptions)}getSeriesThemeConfig(e){var t,i;return ii((i=(t=this.activeTheme)==null?void 0:t.config[e])!=null?i:{})}getOptionsDefaults(e){const t=this.optionsType(e),i=GT(t);return QT(e)&&this.swapAxesPosition(i),i}optionsType(e){var t,i,s;return(s=(i=(t=e.series)==null?void 0:t[0])==null?void 0:i.type)!=null?s:"line"}sanityCheckAndCleanup(e){var t;this.deprecationWarnings(e),this.axesTypeIntegrity(e),this.seriesTypeIntegrity(e),this.soloSeriesIntegrity(e),this.removeDisabledOptions(e),this.removeLeftoverSymbols(e),(t=e.series)!=null&&t.some(i=>i.type==="bullet")&&e.sync!=null&&e.sync.enabled!==!1&&($.warnOnce("bullet series cannot be synced, disabling synchronization."),delete e.sync)}swapAxesPosition(e){var t;if(Ja(e)){const[i,s]=(t=e.axes)!=null?t:[];e.axes=[Z(R({},i),{position:s.position}),Z(R({},s),{position:i.position})]}}processAxesOptions(e,t){"axes"in e&&(e.axes=e.axes.map(i=>{var s,n,a,r;const o=bt((s=this.seriesDefaults.axes)==null?void 0:s.find(({type:v})=>v===i.type),(n=t[i.type])==null?void 0:n[i.position],t[i.type]),{crossLines:l}=o,c=Le(o,["crossLines"]);i.crossLines&&(i.crossLines=ig(i.crossLines,l));const h=(a=c.gridLine)==null?void 0:a.style;(r=i.gridLine)!=null&&r.style&&h?.length&&(i.gridLine.style=i.gridLine.style.map((v,y)=>v.stroke!=null||v.lineDash!=null?bt(v,h.at(y%h.length)):v));const u=bt(i,c),{top:d,right:p,bottom:g,left:f}=u;return Le(u,["top","right","bottom","left"])}))}processSeriesOptions(e){const t=this.getDefaultSeriesType(e),i=this.getTooltipPositionDefaults(e),s={colourIndex:0,userPalette:!!(Ws(e.theme)&&e.theme.palette)},n=e.series.map(a=>{var r,o;(r=a.type)!=null||(a.type=t);const l=(o=this.getSeriesThemeConfig(a.type).series)!=null?o:{},{innerLabels:c}=l,h=Le(l,["innerLabels"]),u=bt(this.getSeriesGroupingOptions(a),a,i,h,this.getSeriesPalette(a.type,s));return u.innerLabels&&(u.innerLabels=ig(u.innerLabels,c)),this.activeTheme.templateTheme(u)});e.series=this.setSeriesGroupingOptions(n)}getSeriesPalette(e,t){const i=WT(e),{colourIndex:s,userPalette:n}=t,{fills:a=[],strokes:r=[]}=this.activeTheme.palette;return i?.({userPalette:n,colorsCount:Math.max(a.length,r.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors(o){return t.colourIndex+=o,{fills:Gg(a,o,s),strokes:Gg(r,o,s)}}})}getSeriesGroupingOptions(e){const t=HT(e.type),i=YT(e.type),s=KT(e.type);e.grouped&&!t&&$.warnOnce(`unsupported grouping of series type "${e.type}".`),(e.stacked||e.stackGroup)&&!i&&$.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:n,stacked:a}=e;return a??(a=(s||e.stackGroup!=null)&&!(t&&n)),n??(n=!0),{stacked:i&&a,grouped:t&&n&&!(i&&a)}}setSeriesGroupingOptions(e){const t=this.getSeriesGrouping(e);te.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",t);const i={},s=t.reduce((n,a)=>{var r,o;return a.groupType==="default"||((o=n[r=a.seriesType])!=null||(n[r]=0),n[a.seriesType]+=a.groupType==="stack"?1:a.series.length),n},{});return t.flatMap(n=>{var a,r;switch((r=i[a=n.seriesType])!=null||(i[a]=0),n.groupType){case"stack":const o=i[n.seriesType]++;return n.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupIndex:o,groupCount:s[n.seriesType],stackIndex:c,stackCount:n.series.length}}));case"group":return n.series.map(l=>Object.assign(l,{seriesGrouping:{groupIndex:i[n.seriesType]++,groupCount:s[n.seriesType],stackIndex:0,stackCount:0}}))}return n.series}).map(n=>{var a=n,{stacked:r,grouped:o}=a,l=Le(a,["stacked","grouped"]);return l})}getSeriesGroupId(e){var t;return!e.stacked&&!e.grouped?"default-ag-charts-group":[e.type,e.xKey,e.stacked?(t=e.stackGroup)!=null?t:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const t=new Map;return e.reduce((i,s)=>{const n=s.type;if(!s.stacked&&!s.grouped)i.push({groupType:"default",seriesType:n,series:[s]});else{const a=this.getSeriesGroupId(s);if(!t.has(a)){const o={groupType:s.stacked?"stack":"group",seriesType:n,series:[]};t.set(a,o),i.push(o)}t.get(a).series.push(s)}return i},[])}getDefaultSeriesType(e){if(Ja(e))return"line";if(ag(e))return"treemap";if(Fl(e))return"pie";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(e){var t;const i=(t=e.tooltip)==null?void 0:t.position;if(!qi(i))return;const{type:s,xOffset:n,yOffset:a}=i,r={};return Zi(s)&&e0(Gh,s)&&(r.type=s),Et(n)&&(r.xOffset=n),Et(a)&&(r.yOffset=a),{tooltip:{position:r}}}deprecationWarnings(e){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([i,s])=>{var n;(n=e.series)!=null&&n.some(a=>a[i]!=null)&&$.warnOnce(`Property [series.${i}] is deprecated, please use [series.${s}] and multiple series instead.`)})}axesTypeIntegrity(e){var t;if("axes"in e){const i=(t=e.axes)!=null?t:[];for(const{type:s}of i)wT(s)||(delete e.axes,$.warnOnce(`unknown axis type: ${s}; expected one of: ${Hh.axesTypes.join(", ")}, ignoring.`))}}seriesTypeIntegrity(e){var t;const i=(t=e.series)!=null?t:[];e.series=i.filter(({type:s})=>{if(s==null||RT(s)||o0(s))return!0;$.warnOnce(`unknown series type: ${s}; expected one of: ${wi.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(e){const t=e.series;if(t&&t.length>1&&t.some(i=>og(i.type))){const i=this.optionsType(e);if(og(i))$.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),e.series=t.slice(0,1);else{const{solo:s,nonSolo:n}=zg(t,r=>og(r.type)?"solo":"nonSolo"),a=Fg(s.map(r=>r.type)).join(", ");$.warn(`Unable to mix these series types with the lead series type: ${a}`),e.series=n}}}enableConfiguredOptions(e){Ys(this.userOptions,(t,i)=>{i&&"enabled"in i&&!i._enabledFromTheme&&t.enabled==null&&(i.enabled=!0)},{skip:["data","theme"]},e),Ys(e,t=>{t._enabledFromTheme!=null&&delete t._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(e){Ys(e,t=>{"enabled"in t&&t.enabled===!1&&Object.keys(t).forEach(i=>{i!=="enabled"&&delete t[i]})},{skip:["data","theme"]})}removeLeftoverSymbols(e){Ys(e,t=>{if(!(!t||!Ws(t)))for(const[i,s]of Object.entries(t))i0(s)&&delete t[i]},{skip:["data"]})}specialOverridesDefaults(e){if(e.window==null)if(typeof window<"u")e.window=window;else if(typeof global<"u")e.window=global.window;else throw new Error("AG Charts - unable to resolve global window");if(e.document==null)if(typeof document<"u")e.document=document;else if(typeof global<"u")e.document=global.document;else throw new Error("AG Charts - unable to resolve global document");return e}}}});function du(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");$.warnOnce(i)}}function ar(e,t){const i=du(),s=t?.default;return vn((n,a,r)=>(r!==s&&i(a.toString(),e),r))}function dI(e,t){const i=du();return vn((s,n,a)=>(a!==s[e]&&(i(n.toString(),`Use [${e}] instead.`),s[e]=t?t(a):a),Rl),(s,n)=>(i(n.toString(),`Use [${e}] instead.`),s[e]))}var Yg=L({"packages/ag-charts-community/src/util/deprecation.ts"(){"use strict";Za(),gt()}});function Hg(e,t){const i={};if(Array.isArray(t))for(let s=0;s<e.length;s++)i[`${e[s]}`]=t[s];else for(let s=0;s<e.length;s++)i[`${e[s]}`]=t;return i}var U0=L({"packages/ag-charts-community/src/util/zip.ts"(){"use strict"}});function W0(){pu.clear()}function Xs(e){var t;const i=e.constructor,s=Object.hasOwn(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const n=((t=pu.get(s))!=null?t:0)+1;return pu.set(s,n),`${s}-${n}`}var pu,Ls=L({"packages/ag-charts-community/src/util/id.ts"(){"use strict";pu=new Map}});function pI(){try{return new Function("return true"),!0}catch{return!1}}function J(e){const{changeCb:t,convertor:i}=e??{};return function(s,n){const a=`__${n}`;s[n]||(Y0&&t==null&&i==null?gI(s,n,a,e):fI(s,n,a,e))}}function gI(e,t,i,s){const{redraw:n=1,type:a="normal",checkDirtyOnAssignment:r=!1}=s??{},o=new Function("value",`
        const oldValue = this.${i};
        if (value !== oldValue) {
            this.${i} = value;
            ${a==="normal"?`this.markDirty(this, ${n});`:""}
            ${a==="transform"?`this.markDirtyTransform(${n});`:""}
            ${a==="path"?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}
            ${a==="font"?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}
        }
        ${r?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}
`),l=new Function(`return this.${i};`);Object.defineProperty(e,t,{set:o,get:l,enumerable:!0,configurable:!0})}function fI(e,t,i,s){const{redraw:n=1,type:a="normal",changeCb:r,convertor:o,checkDirtyOnAssignment:l=!1}=s??{};Object.defineProperty(e,t,{set:function(u){const d=this[i];u=o?o(u):u,u!==d&&(this[i]=u,a==="normal"&&this.markDirty(this,n),a==="transform"&&this.markDirtyTransform(n),a==="path"&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),a==="font"&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),r&&r(this)),l&&u!=null&&u._dirty>0&&this.markDirty(u,u._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}var bn,Y0,H0,Ql=L({"packages/ag-charts-community/src/scene/changeDetectable.ts"(){"use strict";bn=(e=>(e[e.NONE=0]="NONE",e[e.TRIVIAL=1]="TRIVIAL",e[e.MINOR=2]="MINOR",e[e.MAJOR=3]="MAJOR",e))(bn||{}),Y0=pI(),H0=class{constructor(){this._dirty=3}markDirty(e,t=1){this._dirty<t&&(this._dirty=t)}markClean(e){this._dirty=0}isDirty(){return this._dirty>0}}}});function It(e,t,i){return Math.min(i,Math.max(e,t))}function gu(e,t){const[i,s]=Sn(t);return It(i,e,s)}function Sn(e){return e.length?[Math.min(...e),Math.max(...e)]:[]}function So(e){const[t,i]=Sn(e);return i-t}function rr(e,t,i=1e-10){return Math.abs(e-t)<i}function Jl(e){return Math.sign(e)===-1||Object.is(e,-0)}function Kg(e,t=2){const i=mt(10,t);return Math.round(e*i)/i}function fu(e,t=2){const i=Math.floor(Math.log(Math.abs(e))/Math.LN10);return i>=0||!isFinite(i)?e.toFixed(t):e.toFixed(Math.abs(i)-1+t)}function mu(e,t){return Math.floor(e%t+(e<0?t:0))}function jg(e,t=10){const[,i=""]=(Math.abs(e)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:t}).split(".");return i.length}var Ot=L({"packages/ag-charts-community/src/util/number.ts"(){"use strict"}});function K0(e,t,i=1/0){const s={nearest:void 0,distanceSquared:i};for(const n of t){const a=n.distanceSquared(e);if(a===0)return{nearest:n,distanceSquared:0};a<s.distanceSquared&&(s.nearest=n,s.distanceSquared=a)}return s}function mI(e,t,i=1/0){const s=t.transformPoint(e.x,e.y),n={nearest:void 0,distanceSquared:i};for(const a of t.children){const{nearest:r,distanceSquared:o}=a.nearestSquared(s,n.distanceSquared);if(o===0)return{nearest:r,distanceSquared:o};o<n.distanceSquared&&(n.nearest=r,n.distanceSquared=o)}return n}var j0=L({"packages/ag-charts-community/src/scene/nearest.ts"(){"use strict"}}),yu,ht,Kt=L({"packages/ag-charts-community/src/scene/bbox.ts"(){"use strict";Ot(),j0(),yu=class Jv{constructor(t,i,s,n){this.x=t,this.y=i,this.width=s,this.height=n}clone(){const{x:t,y:i,width:s,height:n}=this;return new Jv(t,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,i){return t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const i=t.x-It(this.x,t.x,this.x+this.width),s=t.y-It(this.y,t.y,this.y+this.height);return i*i+s*s}static nearestBox(t,i){return K0(t,i)}shrink(t,i){const s=(n,a)=>{switch(n){case"top":this.y+=a;case"bottom":this.height-=a;break;case"left":this.x+=a;case"right":this.width-=a;break;case"vertical":this.y+=a,this.height-=a*2;break;case"horizontal":this.x+=a,this.width-=a*2;break;case void 0:this.x+=a,this.width-=a*2,this.y+=a,this.height-=a*2;break;default:}};return typeof t=="number"?s(i,t):typeof t=="object"&&Object.entries(t).forEach(([n,a])=>s(n,a)),this}grow(t,i){if(typeof t=="number")this.shrink(-t,i);else{const s=R({},t);for(const n in s)s[n]*=-1;this.shrink(s)}return this}static merge(t){let i=1/0,s=1/0,n=-1/0,a=-1/0;return t.forEach(r=>{r.x<i&&(i=r.x),r.y<s&&(s=r.y),r.x+r.width>n&&(n=r.x+r.width),r.y+r.height>a&&(a=r.y+r.height)}),new Jv(i,s,n-i,a-s)}},yu.zero=new yu(0,0,0,0),ht=yu}}),vu,ss,Xg=L({"packages/ag-charts-community/src/scene/matrix.ts"(){"use strict";Kt(),vu=class Rh{get e(){return[...this.elements]}constructor(t=[1,0,0,1,0,0]){this.elements=t}setElements(t){const i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this}get identity(){const t=this.elements;return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0}AxB(t,i,s){const n=t[0]*i[0]+t[2]*i[1],a=t[1]*i[0]+t[3]*i[1],r=t[0]*i[2]+t[2]*i[3],o=t[1]*i[2]+t[3]*i[3],l=t[0]*i[4]+t[2]*i[5]+t[4],c=t[1]*i[4]+t[3]*i[5]+t[5];s=s??t,s[0]=n,s[1]=a,s[2]=r,s[3]=o,s[4]=l,s[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const i=new Array(6);return this.AxB(this.elements,t.elements,i),new Rh(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],s=t[1],n=t[2],a=t[3];const r=t[4],o=t[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new Rh([a,-s,-n,i,n*o-a*r,s*r-i*o])}inverseTo(t){const i=this.elements;let s=i[0],n=i[1],a=i[2],r=i[3];const o=i[4],l=i[5],c=1/(s*r-n*a);return s*=c,n*=c,a*=c,r*=c,t.setElements([r,-n,-a,s,a*l-r*o,n*o-s*l]),this}invertSelf(){const t=this.elements;let i=t[0],s=t[1],n=t[2],a=t[3];const r=t[4],o=t[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,t[0]=a,t[1]=-s,t[2]=-n,t[3]=i,t[4]=n*o-a*r,t[5]=s*r-i*o,this}transformPoint(t,i){const s=this.elements;return{x:t*s[0]+i*s[2]+s[4],y:t*s[1]+i*s[3]+s[5]}}transformBBox(t,i){const s=this.elements,n=s[0],a=s[1],r=s[2],o=s[3],l=t.width*.5,c=t.height*.5,h=t.x+l,u=t.y+c,d=Math.abs(l*n)+Math.abs(c*r),p=Math.abs(l*a)+Math.abs(c*o);return i||(i=new ht(0,0,0,0)),i.x=h*n+u*r+s[4]-d,i.y=h*a+u*o+s[5]-p,i.width=d+d,i.height=p+p,i}toContext(t){if(this.identity)return;const i=this.elements;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static flyweight(t){return Rh.instance.setElements(t.elements)}static updateTransformMatrix(t,i,s,n,a,r,o){const[l,c]=[0,0],h=i,u=s;let d,p;h===1&&u===1?(d=0,p=0):(d=o?.scalingCenterX==null?l:o?.scalingCenterX,p=o?.scalingCenterY==null?c:o?.scalingCenterY);const g=n,f=Math.cos(g),m=Math.sin(g);let v,y;g===0?(v=0,y=0):(v=o?.rotationCenterX==null?l:o?.rotationCenterX,y=o?.rotationCenterY==null?c:o?.rotationCenterY);const b=a,_=r,S=d*(1-h)-v,D=p*(1-u)-y;return t.setElements([f*h,m*h,-m*u,f*u,f*S-m*D+v+b,m*S+f*D+y+_]),t}static fromContext(t){const i=t.getTransform();return new Rh([i.a,i.b,i.c,i.d,i.e,i.f])}},vu.instance=new vu,ss=vu}}),$g,qg,pi,or,ee=L({"packages/ag-charts-community/src/scene/node.ts"(){"use strict";Ls(),Ql(),Xg(),$g=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))($g||{}),qg=e=>{e.parent&&(e.parent.dirtyZIndex=!0),e.zIndexChanged()},pi=class d2 extends H0{constructor({isVirtual:t,tag:i}={}){super(),this.serialNumber=d2._nextSerialNumber++,this.id=Xs(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new ss,this.inverseMatrix=new ss,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=t??!1,this.tag=i??NaN}get datum(){var t,i;return(i=this._datum)!=null?i:(t=this._parent)==null?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=t?.debug;for(const i of this._children)i._setLayerManager(t);for(const i of this._virtualChildren)i._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(this._virtualChildren.length===0)return this._children;const t=[...this._children];for(const i of this._virtualChildren)t.push(...i.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,i){const s=i??Object.keys(t);for(const n of s)this[n]=t[n];return this}append(t){Array.isArray(t)||(t=[t]);for(const i of t){if(i.parent)throw new Error(`${i} already belongs to another parent: ${i.parent}.`);if(i.layerManager)throw new Error(`${i} already belongs to a scene: ${i.layerManager}.`);if(this.childSet[i.id])throw new Error(`Duplicate ${i.constructor.name} node: ${i}`);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(t){return this.append(t),t}removeChild(t){const i=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&i(),t.isVirtual){const s=this._virtualChildren.indexOf(t);s<0&&i(),this._virtualChildren.splice(s,1)}else{const s=this._children.indexOf(t);s<0&&i(),this._children.splice(s,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,3),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=ss.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),t.preMultiplySelf(i.matrix),i=i.parent;return t}transformPoint(t,i){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,i)}inverseTransformPoint(t,i){return this.calculateCumulativeMatrix().transformPoint(t,i)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(t,i){return!1}pickNode(t,i){var s;if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))return;const n=this.children;if(n.length>1e3)for(let a=n.length-1;a>=0;a--){const r=n[a],l=((s=r.computeTransformedBBox())==null?void 0:s.containsPoint(t,i))?r.pickNode(t,i):void 0;if(l)return l}else if(n.length)for(let a=n.length-1;a>=0;a--){const r=n[a].pickNode(t,i);if(r)return r}else if(!this.isContainerNode)return this}findNodes(t){const i=t(this)?[this]:[];for(const s of this.children){const n=s.findNodes(t);n&&i.push(...n)}return i}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const i=ss.flyweight(this.matrix);let s=this.parent;for(;s;)s.computeTransformMatrix(),i.preMultiplySelf(s.matrix),s=s.parent;return i.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:i,scalingY:s,rotation:n,translationX:a,translationY:r,scalingCenterX:o,scalingCenterY:l,rotationCenterX:c,rotationCenterY:h}=this;ss.updateTransformMatrix(t,i,s,n,a,r,{scalingCenterX:o,scalingCenterY:l,rotationCenterX:c,rotationCenterY:h}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:i}=t;this._dirty=0,i&&i.nodesRendered++}clearBBox(t){const i=this.computeBBox();if(i==null)return;const{x:s,y:n,width:a,height:r}=i,o=this.transformPoint(s,n),l=this.transformPoint(s+a,n+r);t.clearRect(o.x,o.y,l.x-o.x,l.y-o.y)}markDirty(t,i=1,s=i){this._dirty>i||this._dirty===i&&i===s||(this._dirty=i,this.parent?this.parent.markDirty(this,s):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:i=!1,recursive:s=!0}=t??{};if(!(this._dirty===0&&!i)){if(this._dirty=0,s!==!1)for(const n of this._virtualChildren)n.markClean({force:i});if(s===!0)for(const n of this._children)n.markClean({force:i})}}visibilityChanged(){}get nodeCount(){let t=1,i=this._dirty>=0||this.dirtyTransform?1:0,s=this.visible?1:0;const n=a=>{const{count:r,visibleCount:o,dirtyCount:l}=a.nodeCount;t+=r,s+=o,i+=l};for(const a of this._children)n(a);for(const a of this._virtualChildren)n(a);return{count:t,visibleCount:s,dirtyCount:i}}zIndexChanged(){}},pi._nextSerialNumber=0,x([J({type:"transform"})],pi.prototype,"scalingX",2),x([J({type:"transform"})],pi.prototype,"scalingY",2),x([J({type:"transform"})],pi.prototype,"scalingCenterX",2),x([J({type:"transform"})],pi.prototype,"scalingCenterY",2),x([J({type:"transform"})],pi.prototype,"rotationCenterX",2),x([J({type:"transform"})],pi.prototype,"rotationCenterY",2),x([J({type:"transform"})],pi.prototype,"rotation",2),x([J({type:"transform"})],pi.prototype,"translationX",2),x([J({type:"transform"})],pi.prototype,"translationY",2),x([J({redraw:3,changeCb:e=>e.visibilityChanged()})],pi.prototype,"visible",2),x([J({redraw:1,changeCb:qg})],pi.prototype,"zIndex",2),x([J({redraw:1,changeCb:qg})],pi.prototype,"zIndexSubOrder",2),or=pi}}),xu,bu,Su,Ts,_u=L({"packages/ag-charts-community/src/util/color.ts"(){"use strict";gt(),Ot(),xu=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*mt((i+.055)/1.055,2.4)},bu=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*mt(i,1/2.4)-.055):12.92*e},Su=class Lt{constructor(t,i,s,n=1){this.r=It(0,t||0,1),this.g=It(0,i||0,1),this.b=It(0,s||0,1),this.a=It(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!Lt.parseHex(t):t.indexOf("rgb")>=0?!!Lt.stringToRgba(t):!!Lt.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return Lt.fromHexString(t);const i=Lt.nameToHex[t.toLowerCase()];if(i)return Lt.fromHexString(i);if(t.indexOf("rgb")>=0)return Lt.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return Lt.fromString(t)}catch{return $.warnOnce(`invalid color string: '${t}'.`),Lt.fromArray([0,0,0])}}static parseHex(t){t=t.replace(/ /g,"").slice(1);let i;switch(t.length){case 6:case 8:i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(`${t[s]}${t[s+1]}`,16));break;case 3:case 4:i=t.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if(i?.length>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(t){const i=Lt.parseHex(t);if(i){const[s,n,a,r]=i;return new Lt(s/255,n/255,a/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[i,s]=[NaN,NaN];for(let o=0;o<t.length;o++){const l=t[o];if(!i&&l==="(")i=o;else if(l===")"){s=o;break}}const n=i&&s&&t.substring(i+1,s);if(!n)return;const a=n.split(","),r=[];for(let o=0;o<a.length;o++){const l=a[o];let c=parseFloat(l);if(isNaN(c))return;l.indexOf("%")>=0?(c=It(0,c,100),c/=100):o===3?c=It(0,c,1):(c=It(0,c,255),c/=255),r.push(c)}return r}static fromRgbaString(t){const i=Lt.stringToRgba(t);if(i){if(i.length===3)return new Lt(i[0],i[1],i[2]);if(i.length===4)return new Lt(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(t.length===4)return new Lt(t[0],t[1],t[2],t[3]);if(t.length===3)return new Lt(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,s,n=1){const a=Lt.HSBtoRGB(t,i,s);return new Lt(a[0],a[1],a[2],n)}static fromHSL(t,i,s,n=1){const a=Lt.HSLtoRGB(t,i,s);return new Lt(a[0],a[1],a[2],n)}static fromOKLCH(t,i,s,n=1){const a=Lt.OKLCHtoRGB(t,i,s);return new Lt(a[0],a[1],a[2],n)}static padHex(t){return t.length===1?"0"+t:t}toHexString(){let t="#"+Lt.padHex(Math.round(this.r*255).toString(16))+Lt.padHex(Math.round(this.g*255).toString(16))+Lt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=Lt.padHex(Math.round(this.a*255).toString(16))),t}toRgbaString(t=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,t);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return Lt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,i,s){const n=xu(t),a=xu(i),r=xu(s),o=Math.cbrt(.4122214708*n+.5363325363*a+.0514459929*r),l=Math.cbrt(.2119034982*n+.6806995451*a+.1073969566*r),c=Math.cbrt(.0883024619*n+.2817188376*a+.6299787005*r),h=.2104542553*o+.793617785*l-.0040720468*c,u=1.9779984951*o-2.428592205*l+.4505937099*c,d=.0259040371*o+.7827717662*l-.808675766*c,p=Math.atan2(d,u)*180/Math.PI,g=h,f=Math.hypot(u,d),m=p>=0?p:p+360;return[g,f,m]}static OKLCHtoRGB(t,i,s){const n=t,a=i*Math.cos(s*Math.PI/180),r=i*Math.sin(s*Math.PI/180),o=mt(n+.3963377774*a+.2158037573*r,3),l=mt(n-.1055613458*a-.0638541728*r,3),c=mt(n-.0894841775*a-1.291485548*r,3),h=4.0767416621*o-3.3077115913*l+.2309699292*c,u=-1.2684380046*o+2.6097574011*l-.3413193965*c,d=-.0041960863*o-.7034186147*l+1.707614701*c,p=bu(h),g=bu(u),f=bu(d);return[p,g,f]}static RGBtoHSL(t,i,s){const n=Math.min(t,i,s),a=Math.max(t,i,s),r=(a+n)/2;let o,l;if(a===n)o=NaN,l=0;else{const c=a-n;l=r>.5?c/(2-a-n):c/(a+n),a===t?o=(i-s)/c+(i<s?6:0):a===i?o=(s-t)/c+2:o=(t-i)/c+4,o*=360/6}return[o,l,r]}static HSLtoRGB(t,i,s){if(i===0)return[s,s,s];const n=s<.5?s*(1+i):s+i-s*i,a=2*s-n;function r(h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?a+(n-a)*6*h:h<1/2?n:h<2/3?a+(n-a)*(2/3-h)*6:a}const o=r(t/360+1/3),l=r(t/360),c=r(t/360-1/3);return[o,l,c]}static RGBtoHSB(t,i,s){const n=Math.min(t,i,s),a=Math.max(t,i,s),r=a!==0?(a-n)/a:0;let o=NaN;if(n!==a){const l=a-n,c=(a-t)/l,h=(a-i)/l,u=(a-s)/l;t===a?o=u-h:i===a?o=2+c-u:o=4+h-c,o/=6,o<0&&(o=o+1)}return[o*360,r,a]}static HSBtoRGB(t,i,s){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,a=0,r=0;if(i===0)n=a=r=s;else{const o=(t-Math.floor(t))*6,l=o-Math.floor(o),c=s*(1-i),h=s*(1-i*l),u=s*(1-i*(1-l));switch(o>>0){case 0:n=s,a=u,r=c;break;case 1:n=h,a=s,r=c;break;case 2:n=c,a=s,r=u;break;case 3:n=c,a=h,r=s;break;case 4:n=u,a=c,r=s;break;case 5:n=s,a=c,r=h;break}}return[n,a,r]}derive(t,i,s,n){const a=Lt.RGBtoHSB(this.r,this.g,this.b);let r=a[2];r==0&&s>1&&(r=.05);const o=((a[0]+t)%360+360)%360,l=It(0,a[1]*i,1);r=It(0,r*s,1);const c=It(0,this.a*n,1),h=Lt.HSBtoRGB(o,l,r);return h.push(c),Lt.fromArray(h)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,i){const s=Lt.tryParseFromString(t),n=Lt.tryParseFromString(i);return a=>{const r=(l,c)=>l*(1-a)+c*a;return new Lt(r(s.r,n.r),r(s.g,n.g),r(s.b,n.b),r(s.a,n.a)).toString()}}},Su.didDebug=!1,Su.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),Ts=Su}});function tc(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function yI(e,t){if(typeof e=="string")try{e=Ts.fromString(e)}catch{e=Ts.fromArray([0,0,0])}if(typeof t=="string")try{t=Ts.fromString(t)}catch{t=Ts.fromArray([0,0,0])}const i=tc(e.r,t.r),s=tc(e.g,t.g),n=tc(e.b,t.b),a=tc(e.a,t.a);return r=>Ts.fromArray([i(r),s(r),n(r),a(r)]).toRgbaString()}var vI=L({"packages/ag-charts-community/src/util/interpolate.ts"(){"use strict";_u()}}),Zg={};Us(Zg,{easeIn:()=>X0,easeInOut:()=>$0,easeInOutQuad:()=>Q0,easeInQuad:()=>q0,easeOut:()=>_o,easeOutQuad:()=>Z0,inverseEaseOut:()=>Jg,linear:()=>Qg});var Qg,X0,_o,$0,q0,Z0,Q0,Jg,Mo=L({"packages/ag-charts-community/src/motion/easing.ts"(){"use strict";Qg=e=>e,X0=e=>1-Math.cos(e*Math.PI/2),_o=e=>Math.sin(e*Math.PI/2),$0=e=>-(Math.cos(e*Math.PI)-1)/2,q0=e=>e*e,Z0=e=>1-mt(1-e,2),Q0=e=>e<.5?2*e*e:1-mt(-2*e+2,2)/2,Jg=e=>2*Math.asin(e)/Math.PI}});function xI(e){return e.every(t=>t instanceof or)}function Mu(e){return xI(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}var ec,tf,ef,sf,ku,nf,da,af,rf,of,lr=L({"packages/ag-charts-community/src/motion/animation.ts"(){"use strict";ee(),vI(),si(),Ot(),Mo(),ec=.2,tf={animationDuration:1,animationDelay:0},ef={animationDuration:.25,animationDelay:0},sf={animationDuration:.5,animationDelay:.25},ku={animationDuration:.25,animationDelay:.75},nf={animationDuration:ec,animationDelay:1},da=["initial","remove","update","add","trailing","end"],af={initial:tf,add:ku,remove:ef,update:sf,trailing:nf,end:{animationDelay:1+ec,animationDuration:0}},rf=(e=>(e.Loop="loop",e.Reverse="reverse",e))(rf||{}),of=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1;var t,i,s,n,a,r,o,l;this.id=e.id,this.groupId=e.groupId,this.autoplay=(t=e.autoplay)!=null?t:!0,this.ease=(i=e.ease)!=null?i:Qg,this.phase=e.phase;const c=(s=e.duration)!=null?s:af[this.phase].animationDuration;this.duration=c*e.defaultDuration,this.delay=((n=e.delay)!=null?n:0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),e.skip===!0?((a=this.onUpdate)==null||a.call(this,e.to,!1,this),(r=this.onStop)==null||r.call(this,this),(o=this.onComplete)==null||o.call(this,this),this.isComplete=!0):this.autoplay&&(this.play(),(l=this.onUpdate)==null||l.call(this,e.from,!0,this)),e.collapsable!==!1&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){let i=e.from===e.to;return i||(i=typeof e.from=="object"&&Bi(e.from,e.to)==null),i?0:t}play(){var e;!this.isPlaying&&!this.isComplete&&(this.isPlaying=!0,(e=this.onPlay)==null||e.call(this,this))}pause(){this.isPlaying&&(this.isPlaying=!1)}stop(){var e;this.isPlaying&&(this.isPlaying=!1,this.isComplete=!0,(e=this.onStop)==null||e.call(this,this))}update(e){var t,i;const s=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);(t=this.onUpdate)==null||t.call(this,n,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,(i=this.onComplete)==null||i.call(this,this),e-(a-s)):0}get delta(){return this.ease(It(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if(typeof t!="object")return this.interpolateValue(e,t);const i=[];for(const s in t){const n=this.interpolateValue(e[s],t[s]);n!=null&&i.push([s,n])}return s=>{const n={};for(const[a,r]of i)n[a]=r(s);return n}}interpolateValue(e,t){if(!(e===void 0||t===void 0)){try{switch(typeof e){case"number":return tc(e,t);case"string":return yI(e,t)}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}}}}),J0={};Us(J0,{NODE_UPDATE_PHASES:()=>lf,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>ai,fromToMotion:()=>Xt,staticFromToMotion:()=>$s});function Xt(e,t,i,s,n,a,r){const{fromFn:o,toFn:l,intermediateFn:c}=n,{nodes:h,selections:u}=Mu(s),d={added:{},removed:{}};a&&r&&(d.added=Hg(r.added,!0),d.removed=Hg(r.removed,!0));const p=(f,m)=>{var v;let y,b=0,_=0;for(const S of m){const D=f[b]===S,A={last:_>=m.length-1,lastLive:b>=f.length-1,prev:m[_-1],prevFromProps:y,prevLive:f[b-1],next:m[_+1],nextLive:f[b+(D?1:0)]},I=`${e}_${t}_${S.id}`;i.stopByAnimationId(I);let T="unknown";D?a&&r&&(T=bI(S,S.datum,a,d)):T="removed";const E=o(S,S.datum,T,A),{phase:C,start:O,finish:N,delay:w,duration:U}=E,G=Le(E,["phase","start","finish","delay","duration"]),F=l(S,S.datum,T,A),{phase:P,start:j,finish:z,delay:q,duration:tt}=F,it=Le(F,["phase","start","finish","delay","duration"]),st=N==null&&z==null;i.animate({id:I,groupId:e,phase:(v=C??P)!=null?v:"update",duration:U??tt,delay:w??q,from:G,to:it,ease:_o,collapsable:st,onPlay:()=>{S.setProperties(R(R({},O),j))},onUpdate(vt){S.setProperties(vt),c&&S.setProperties(c(S,S.datum,T,A))},onStop:()=>{S.setProperties(R(R(R({},it),N),z))}}),D&&b++,_++,y=G}};let g=0;for(const f of u){const m=f.nodes(),v=m.filter(y=>!f.isGarbage(y));p(v,m),i.animate({id:`${e}_${t}_selection_${g}`,groupId:e,phase:"end",from:0,to:1,ease:_o,onStop(){f.cleanup()}}),g++}p(h,h)}function $s(e,t,i,s,n,a,r){const{nodes:o,selections:l}=Mu(s),{start:c={},finish:h,phase:u}=r,d=h==null;i.animate({id:`${e}_${t}`,groupId:e,phase:u??"update",from:n,to:a,ease:_o,collapsable:d,onPlay:()=>{for(const p of o)p.setProperties(c);for(const p of l)for(const g of p.nodes())g.setProperties(c)},onUpdate(p){for(const g of o)g.setProperties(p);for(const g of l)for(const f of g.nodes())f.setProperties(p)},onStop:()=>{for(const p of o)p.setProperties(R(R({},a),h));for(const p of l)for(const g of p.nodes())g.setProperties(R(R({},a),h))}})}function bI(e,t,i,s){const n=i(e,t);return s.added[n]?"added":"updated"}var lf,ai,He=L({"packages/ag-charts-community/src/motion/fromToMotion.ts"(){"use strict";U0(),lr(),Mo(),lf=["removed","updated","added"],ai={added:"add",updated:"update",removed:"remove",unknown:"initial"}}});function oe(e){return e%=Is,e+=Is,e%=Is,e}function SI(e){return e%=Is,e+=Is,e!==Is&&(e%=Is),e}function ic(e){return e%=Is,e<-Math.PI?e+=Is:e>=Math.PI&&(e-=Is),e}function ri(e){return e/180*Math.PI}function _I(e){return e/Math.PI*180}function cf(e,t){return e=oe(e),t=oe(t),t-e+(e>t?2*Math.PI:0)}var Is,Mi=L({"packages/ag-charts-community/src/util/angle.ts"(){"use strict";Is=Math.PI*2}}),gi,sc=L({"packages/ag-charts-community/src/scale/invalidating.ts"(){"use strict";gi=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})}}}),Es,ko=L({"packages/ag-charts-community/src/scale/bandScale.ts"(){"use strict";gt(),Ot(),sc(),Es=class{constructor(){this.type="band",this.invalid=!0,this.interval=1,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&$.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.invalid=!0;const t=[];this.index=new Map;const i=this.index;e.forEach(s=>{i.get(s)===void 0&&i.set(s,t.push(s)-1)}),this._domain=t}get domain(){return this._domain}ticks(){this.refresh();const{interval:e=1}=this,t=Math.abs(Math.round(e));return this._domain.filter((i,s)=>s%t===0)}convert(e){this.refresh();const t=this.index.get(e);if(t===void 0)return NaN;const i=this.ordinalRange[t];return i===void 0?NaN:i}invert(e){this.refresh();const t=this.ordinalRange.findIndex(i=>i===e);return this.domain[t]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=It(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=It(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=It(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(e===0)return;const t=this.round,i=this._paddingInner,s=this._paddingOuter,[n,a]=this.range,r=a-n,o=r/Math.max(1,e+2*s-i),l=t?Math.floor(o):o,c=l*(e-i),h=n+(r-c)/2,u=t?Math.round(h):h,d=l*(1-i),p=t?Math.round(d):d,g=o*(1-i),f=[];for(let m=0;m<e;m++)f.push(u+l*m);this._bandwidth=p,this._rawBandwidth=g,this._step=l,this.ordinalRange=f}},x([gi],Es.prototype,"interval",2),x([gi],Es.prototype,"range",2),x([gi],Es.prototype,"round",2)}});function M(e,t={}){const{optional:i=!1}=t;return vn((s,n,a)=>{var r;const o=Z(R({},t),{target:s,property:n});if(i&&typeof a>"u"||e(a,o))return Pi(s[n])&&!Pi(a)?(s[n].set(a),s[n]):a;const l=String(n).replace(/^_*/,""),c=(r=s.constructor.className)!=null?r:s.constructor.name.replace(/Properties$/,"");return $.warn(`Property [${l}] of [${c}] cannot be set to [${ac(a)}]${e.message?`; expecting ${nc(e,o)}`:""}, ignoring.`),Rl},void 0,{optional:i})}function le(e,t="a"){return Ft(i=>e.includes(i),`${t} keyword such as ${MI(e)}`)}function Ft(e,t){return e.message=t,e}function MI(e){const t=e.map(s=>`'${s}'`);if(t.length===1)return t[0];const i=t.pop();return`${t.join(", ")} or ${i}`}function nc(e,t){return uo(e.message)?e.message(t):e.message}function kI(e){return t=>nc(t,e)}function DI(e){return Object.assign(e,{restrict({length:t,minLength:i}={}){return Ft(s=>ye(s)&&(Ds(t)?s.length===t:!0)&&(Ds(i)?s.length>=i:!0),Ds(i)&&i>0?"a non-empty array":Ds(t)?`an array of length ${t}`:"an array")}})}function AI(e){return Object.assign(e,{restrict({min:t,max:i}={}){const s=["a number"],n=Ds(t),a=Ds(i);return n&&a?s.push(`between ${t} and ${i} inclusive`):n?s.push(`greater than or equal to ${t}`):a&&s.push(`less than or equal to ${i}`),Ft(r=>Et(r)&&(n?r>=t:!0)&&(a?r<=i:!0),s.join(" "))}})}function LI(e){return Object.assign(e,{restrict(t){const i=s=>Pi(s)&&s instanceof t;return Ft((s,n)=>i(s)||Ws(s)&&i(n.target[n.property]),s=>{var n;return(n=nc(e,s))!=null?n:"an object"})}})}function ac(e){if(typeof e=="number"){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}return JSON.stringify(e)}var Cs,pa,nt,rt,zi,X,zt,rc,K,Ct,_n,cr,Do,qs,oc,Ao,Lo,Du,Au,hf,kt,Gi,tb,lc,uf,eb,Lu,df,ib,Zs,Tu,Mn,kn,cc,pf,sb,nb,gf,ff,Iu,mf,Eu,pt=L({"packages/ag-charts-community/src/util/validation.ts"(){"use strict";_u(),Za(),gt(),di(),Ut(),Cs=(...e)=>{const t=[];return Ft((i,s)=>(t.length=0,e.every(n=>{const a=n(i,s);return a||t.push(nc(n,s)),a})),()=>t.filter(Boolean).join(" AND "))},pa=(...e)=>Ft((t,i)=>e.some(s=>s(t,i)),t=>e.map(kI(t)).filter(Boolean).join(" OR ")),nt=LI(Ft((e,t)=>Pi(e)||Ws(e)&&Pi(t.target[t.property]),"an object")),rt=Ft(Qx,"a boolean"),zi=Ft(uo,"a function"),X=Ft(Zi,"a string"),zt=AI(Ft(Et,"a number")),rc=Ft(e=>Ds(e)&&isNaN(e),"NaN"),K=zt.restrict({min:0}),Ct=zt.restrict({min:0,max:1}),_n=zt.restrict({min:-360,max:360}),cr=pa(zt,rc),Do=DI(Ft(ye,"an array")),qs=(e,t)=>Ft((i,s)=>ye(i)&&i.every(n=>e(n,s)),i=>{var s;const n=(s=nc(Do,i))!=null?s:"";return t?`${n} of ${t}`:n}),oc=e=>Et(e)||wl(e),Ao=e=>Ft((t,i)=>!oc(t)||!oc(i.target[e])||t<i.target[e],`expected to be less than ${e}`),Lo=e=>Ft((t,i)=>!oc(t)||!oc(i.target[e])||t>i.target[e],`expected to be greater than ${e}`),Du=Ft(wl,"Date object"),Au=pa(Du,K),hf="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",kt=Ft(e=>Zi(e)&&Ts.validColorString(e),`color String. ${hf}`),Gi=Ft(qs(kt),`color strings. ${hf}`),tb=qs(rt,"boolean values"),lc=qs(zt,"numbers"),uf=qs(X,"strings"),eb=Ft(qs(Du),"Date objects"),Lu=Ft(qs(nt),"objects"),df=le(["butt","round","square"],"a line cap"),ib=le(["round","bevel","miter"],"a line join"),Zs=Ft(qs(K),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Tu=le(["top","right","bottom","left"],"a position"),Mn=le(["normal","italic","oblique"],"a font style"),kn=pa(le(["normal","bold","bolder","lighter"],"a font weight"),zt.restrict({min:1,max:1e3})),cc=le(["never","always","hyphenate","on-space"],"a text wrap strategy"),pf=le(["left","center","right"],"a text align"),sb=le(["top","middle","bottom"],"a vertical align"),nb=le(["ellipsis","hide"],"an overflow strategy"),gf=le(["horizontal","vertical"],"a direction"),ff=le(["inside","outside"],"a placement"),Iu=pa(le(["exact","nearest"],"interaction range"),zt),mf=pa(Cs(zt.restrict({min:1}),Ao("maxSpacing")),rc),Eu=pa(Cs(zt.restrict({min:1}),Lo("minSpacing")),rc)}}),yf,ie=L({"packages/ag-charts-community/src/chart/chartAxisDirection.ts"(){"use strict";yf=(e=>(e.X="x",e.Y="y",e))(yf||{})}});function ab(){if(typeof navigator>"u")return!1;const e=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(e==null)return!1;const t=e[1].split("_"),i=Number(t[0]);return i>16?!1:i===16?Number(t[1])<6:!0}var rb=L({"packages/ag-charts-community/src/util/userAgent.ts"(){"use strict"}}),Cu,se,Dn=L({"packages/ag-charts-community/src/scene/canvas/hdpiCanvas.ts"(){"use strict";rb(),Cu=class tx{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:i,window:s,width:n=600,height:a=300,domLayer:r=!1,zIndex:o=0,name:l=void 0,overrideDevicePixelRatio:c=void 0}=t;this.document=i,this.window=s,tx.document=i,this.element=i.createElement("canvas"),this.element.width=n,this.element.height=a,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:h}=this.element;h.userSelect="none",h.display="block",r&&(h.position="absolute",h.zIndex=String(o),h.top="0",h.left="0",h.pointerEvents="none",h.opacity="1",l&&(this.element.id=l)),this.context=this.setPixelRatio(c),this.resize(n,a)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;t?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,i="image/png"){t=(t??"").trim()||"image";const s=this.getDataURL(i),n=this.document,a=n.createElement("a");a.href=s,a.download=t,a.style.display="none",n.body.appendChild(a),a.click(),n.body.removeChild(a)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let i=t??this.window.devicePixelRatio;return ab()&&(i=1),this._pixelRatio=i,tx.overrideScale(this.realContext,i)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return this.element.style.imageRendering==="pixelated"}get width(){return this._width}get height(){return this._height}resize(t,i){if(!(t>0&&i>0))return;const{element:s,context:n,pixelRatio:a}=this;s.width=Math.round(t*a),s.height=Math.round(i*a),s.style.width=t+"px",s.style.height=i+"px",n.resetTransform(),this._width=t,this._height=i}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("width","100"),i.setAttribute("height","100"),i.classList?i.classList.add("text-measuring-svg"):i.setAttribute("class","text-measuring-svg"),i.style.position="absolute",i.style.top="-1000px",i.style.visibility="hidden";const s=document.createElementNS(t,"text");return s.setAttribute("x","0"),s.setAttribute("y","30"),s.setAttribute("text","black"),i.appendChild(s),document.body.appendChild(i),this._svgText=s,s}static get has(){if(this._has)return this._has;const t=typeof navigator>"u"||navigator.userAgent.indexOf("Chrome")>-1,i=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")>-1,s=!t&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:this.textMeasuringContext.measureText("test").actualBoundingBoxDescent!==void 0&&!i&&!s,getTransform:this.textMeasuringContext.getTransform!==void 0}),this._has}static measureText(t,i,s,n){const a=this.textMeasuringContext;return a.font=i,a.textBaseline=s,a.textAlign=n,a.measureText(t)}static getTextSize(t,i){if(this.has.textMetrics){const s=this.textMeasuringContext;s.font=i;const n=s.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}else return this.measureSvgText(t,i)}static measureSvgText(t,i){const s=this.textSizeCache,n=s[i];if(n){const l=n[t];if(l)return l}else s[i]={};const a=this.svgText;a.style.font=i,a.textContent=t;const r=a.getBBox(),o={width:r.width,height:r.height};return s[i][t]=o,o}static overrideScale(t,i){let s=0;const n={save(){this.$save(),s++},restore(){if(s>0)this.$restore(),s--;else throw new Error("AG Charts - Unable to restore() past depth 0")},setTransform(a,r,o,l,c,h){typeof a=="object"?this.$setTransform(a):this.$setTransform(a*i,r*i,o*i,l*i,c*i,h*i)},resetTransform(){this.$setTransform(i,0,0,i,0,0)},verifyDepthZero(){if(s!==0)throw new Error("AG Charts - Save/restore depth is non-zero: "+s)}};for(const a in n)Object.hasOwn(n,a)&&(t["$"+a]||(t["$"+a]=t[a]),t[a]=n[a]);return t}},Cu.document=globalThis.document,Cu.textSizeCache={},se=Cu}}),ob,TI=L({"packages/ag-charts-community/src/scene/gradient/gradient.ts"(){"use strict";ob=class{constructor(){this.stops=[]}}}}),lb,II=L({"packages/ag-charts-community/src/scene/gradient/linearGradient.ts"(){"use strict";Mi(),TI(),lb=class extends ob{constructor(){super(...arguments),this.angle=0}createGradient(e,t){const{stops:s,angle:n}=this,a=oe(ri(n+90)),r=Math.cos(a),o=Math.sin(a),l=t.width,c=t.height,h=t.x+l*.5,u=t.y+c*.5;if(l>0&&c>0){const d=Math.sqrt(c*c+l*l)/2,p=Math.atan2(c,l);let g;a<Math.PI/2?g=a:a<Math.PI?g=Math.PI-a:a<3*Math.PI/2?g=a-Math.PI:g=2*Math.PI-a;const f=d*Math.abs(Math.cos(g-p)),m=e.createLinearGradient(h+r*f,u+o*f,h-r*f,u-o*f);return s.forEach(v=>{m.addColorStop(v.offset,v.color)}),m}return"black"}}}}),cb,ki,Vi,ga=L({"packages/ag-charts-community/src/scene/shape/shape.ts"(){"use strict";Ot(),II(),ee(),cb=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,ki=class pn extends or{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=pn.defaultStyles.fill,this.stroke=pn.defaultStyles.stroke,this.strokeWidth=pn.defaultStyles.strokeWidth,this.lineDash=pn.defaultStyles.lineDash,this.lineDashOffset=pn.defaultStyles.lineDashOffset,this.lineCap=pn.defaultStyles.lineCap,this.lineJoin=pn.defaultStyles.lineJoin,this.opacity=pn.defaultStyles.opacity,this.fillShadow=pn.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,i=Object.getOwnPropertyNames(t);for(let s=0,n=i.length;s<n;s++){const a=i[s];this[a]=t[a]}}updateGradient(){const{fill:t}=this;let i;if(t?.startsWith("linear-gradient")&&(i=cb.exec(t))){const s=parseFloat(i[1]),n=[],a=i[2],r=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let o;for(;o=r.exec(a);)n.push(o[0]);this.gradient=new lb,this.gradient.angle=s,this.gradient.stops=n.map((l,c)=>({offset:c/(n.length-1),color:l}))}else this.gradient=void 0}align(t,i){var s,n,a;const r=(a=(n=(s=this.layerManager)==null?void 0:s.canvas)==null?void 0:n.pixelRatio)!=null?a:1,o=Math.round(t*r)/r;return i==null?o:i===0?0:i<1?Math.ceil(i*r)/r:Math.round((i+t)*r)/r-o}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:i}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=i}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:i}=t;t.globalAlpha=i*this.opacity*this.fillOpacity}applyShadow(t){var i,s;const n=(s=(i=this.layerManager)==null?void 0:i.canvas.pixelRatio)!=null?s:1,a=this.fillShadow;a?.enabled&&(t.shadowColor=a.color,t.shadowOffsetX=a.xOffset*n,t.shadowOffsetY=a.yOffset*n,t.shadowBlur=a.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:i}=t;t.strokeStyle=this.stroke,t.globalAlpha=i*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=i}}containsPoint(t,i){return this.isPointInPath(t,i)}},ki.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),x([J({redraw:2})],ki.prototype,"fillOpacity",2),x([J({redraw:2})],ki.prototype,"strokeOpacity",2),x([J({redraw:2,changeCb:e=>e.updateGradient()})],ki.prototype,"fill",2),x([J({redraw:2})],ki.prototype,"stroke",2),x([J({redraw:2})],ki.prototype,"strokeWidth",2),x([J({redraw:2})],ki.prototype,"lineDash",2),x([J({redraw:2})],ki.prototype,"lineDashOffset",2),x([J({redraw:2})],ki.prototype,"lineCap",2),x([J({redraw:2})],ki.prototype,"lineJoin",2),x([J({redraw:2,convertor:e=>It(0,e,1)})],ki.prototype,"opacity",2),x([J({redraw:2,checkDirtyOnAssignment:!0})],ki.prototype,"fillShadow",2),Vi=ki}});function Ou(e){const{redraw:t=3,changeCb:i}=e??{};return J({redraw:t,type:"font",changeCb:i})}function EI(e){const t=new Map,i=n=>se.getTextSize(n,e);return{size:i,width:n=>{if(t.has(n))return t.get(n);const{width:a}=i(n);return t.set(n,a),a}}}function fa(e){const{fontFamily:t,fontSize:i,fontStyle:s,fontWeight:n}=e;return[s??"",n??"",i+"px",t].join(" ").trim()}function CI(e,t,i,s){return se.has.textMetrics?hb(e,t,i,s):ub(e,t,i,s)}function hb(e,t,i,s){var n,a;let r=0,o=0,l=0,c=0,h=0;const u=fa(s),{lineHeight:d,textBaseline:p=Dt.defaultStyles.textBaseline,textAlign:g=Dt.defaultStyles.textAlign}=s;for(let f=0;f<e.length;f++){const m=se.measureText(e[f],u,p,g);r=Math.max(r,m.actualBoundingBoxLeft),l=Math.max(l,m.width),f==0?(o+=m.actualBoundingBoxAscent,c+=m.actualBoundingBoxAscent):h+=(n=m.fontBoundingBoxAscent)!=null?n:m.emHeightAscent,f==e.length-1?c+=m.actualBoundingBoxDescent:h+=(a=m.fontBoundingBoxDescent)!=null?a:m.emHeightDescent}return d!==void 0&&(h=(e.length-1)*d),c+=h,o+=h*db(p),new ht(t-r,i-o,l,c)}function ub(e,t,i,s){let n=0,a=0,r=0;const o=fa(s),{lineHeight:l,textBaseline:c=Dt.defaultStyles.textBaseline,textAlign:h=Dt.defaultStyles.textAlign}=s;if(e.length>0){const u=se.getTextSize(e[0],o);n=u.width,a=u.height}for(let u=1;u<e.length;u++){const d=se.getTextSize(e[u],o);n=Math.max(n,d.width),r+=l??d.height}switch(h){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(c){case"alphabetic":i-=a*.7+r*.5;break;case"middle":i-=a*.45+r*.5;break;case"ideographic":i-=a+r;break;case"hanging":i-=a*.2+r*.5;break;case"bottom":i-=a+r;break}return new ht(t,i,n,a+r)}function db(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}function pb(e){return typeof e=="string"?e.split(/\r?\n/g):[]}var Nu,Ke,Dt,fi=L({"packages/ag-charts-community/src/scene/shape/text.ts"(){"use strict";Kt(),Dn(),ee(),ga(),Nu="\u2026",Ke=class $i extends Vi{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=$i.defaultStyles.textAlign,this.textBaseline=$i.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=pb(this.text)}get font(){return(this._font==null||this._dirtyFont)&&(this._dirtyFont=!1,this._font=fa(this)),this._font}computeBBox(){return se.has.textMetrics?hb(this.lines,this.x,this.y,this):ub(this.lines,this.x,this.y,this)}getLineHeight(t){var i,s;if(this.lineHeight)return this.lineHeight;if(se.has.textMetrics){const n=se.measureText(t,this.font,this.textBaseline,this.textAlign);return((i=n.fontBoundingBoxAscent)!=null?i:n.emHeightAscent)+((s=n.fontBoundingBoxDescent)!=null?s:n.emHeightDescent)}return se.getTextSize(t,this.font).height}isPointInPath(t,i){const s=this.transformPoint(t,i),n=this.computeBBox();return n?n.containsPoint(s.x,s.y):!1}render(t){const{ctx:i,forceRender:s,stats:n}=t;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}if(!this.lines.length||!this.layerManager){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);const{fill:a,stroke:r,strokeWidth:o}=this;i.font=this.font,i.textAlign=this.textAlign,i.textBaseline=this.textBaseline;const l=this.layerManager.canvas.pixelRatio||1,{globalAlpha:c}=i;if(a){i.fillStyle=a,i.globalAlpha=c*this.opacity*this.fillOpacity;const{fillShadow:h}=this;h?.enabled&&(i.shadowColor=h.color,i.shadowOffsetX=h.xOffset*l,i.shadowOffsetY=h.yOffset*l,i.shadowBlur=h.blur*l),this.renderLines((u,d,p)=>i.fillText(u,d,p))}if(r&&o){i.strokeStyle=r,i.lineWidth=o,i.globalAlpha=c*this.opacity*this.strokeOpacity;const{lineDash:h,lineDashOffset:u,lineCap:d,lineJoin:p}=this;h&&i.setLineDash(h),u&&(i.lineDashOffset=u),d&&(i.lineCap=d),p&&(i.lineJoin=p),this.renderLines((g,f,m)=>i.strokeText(g,f,m))}super.render(t)}renderLines(t){const{lines:i,x:s,y:n}=this,a=this.lines.map(l=>this.getLineHeight(l));let o=-(a.reduce((l,c)=>l+c,0)-a[0])*db(this.textBaseline);for(let l=0;l<i.length;l++)t(i[l],s,n+o),o+=a[l]}static wrapLines(t,i,s,n,a,r){const o=r!=="hide",l=fa(n),c=EI(l),h=t.split(/\r?\n/g);if(h.length===0)return{lines:void 0,truncated:!1};if(a==="never"){const{text:g,truncated:f}=$i.truncateLine(h[0],i,c,o?"auto":"never");return{lines:g!=null?[g]:void 0,truncated:f}}const u=[];let d=0,p=!1;for(const g of h){const f=$i.wrapLine(g,i,s,c,n,a,d,o);if(f==null)return{lines:void 0,truncated:!1};if(u.push(...f.result),d=f.cumulativeHeight,f.truncated){p=!0;break}}return{lines:u,truncated:p}}static wrap(t,i,s,n,a,r="ellipsis"){const{lines:o,truncated:l}=$i.wrapLines(t,i,s,n,a,r);return{text:o!=null?o.join(`
`).trim():"",truncated:l}}static wrapLine(t,i,s,n,a,r,o,l){if(t=t.trim(),!t)return{result:[],truncated:!1,cumulativeHeight:o};const c=n.size(t);if(c.width<=i)return{result:[t],truncated:!1,cumulativeHeight:o+c.height};if(c.height>s||n.width("W")>i)return l?{result:[],truncated:!0,cumulativeHeight:o}:void 0;const h=t.split(/\s+/g),u=$i.wrapLineSequentially(h,i,s,n,a,r,o,l);if(u==null)return;o=u.cumulativeHeight;let{lines:d}=u;if(!(u.wordsBrokenOrTruncated||u.linesTruncated)){const g=u.lines.length,f=$i.wrapLineBalanced(h,i,n,g);f.length===d.length&&(d=f)}return{result:d.map(g=>g.join(" ")),truncated:u.linesTruncated,cumulativeHeight:o}}static breakWord(t,i,s,n,a){const r=p=>$i.punctuationMarks.includes(t[p]),o=n?a.width("-"):0,l=[];let c=0,h=0;for(let p=0;p<t.length;p++){const g=t[p],f=a.width(g),m=h===0?i:s;c+f+o>m&&(l.push(p),c=0,h++),c+=f}const u=[];let d=0;for(const p of l){let g=t.substring(d,p);n&&g.length>0&&!r(p-1)&&!r(p)&&(g+="-"),u.push(g),d=p}return u.push(t.substring(d)),u}static truncateLine(t,i,s,n){t=t.trimEnd();const a=s.width(t);if(a>i&&n==="never")return{text:void 0,truncated:!1};if(a<=i&&n!=="force")return{text:t,truncated:!1};const r=s.width(Nu);let o=t,l=a;for(;o.length>0&&l+r>i;)o=o.slice(0,-1).trimEnd(),l=s.width(o);return l+r<=i?{text:`${o}${Nu}`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(t,i,s,n,a,r,o,l){const{fontSize:c=0,lineHeight:h=c*$i.defaultLineHeightRatio}=a,u=r==="always"||r==="hyphenate",d=r==="hyphenate",p=n.width(" ");let g=!1,f=!1;const m=[];let v=[],y=0;const b=()=>({lines:m,linesTruncated:f,wordsBrokenOrTruncated:g,cumulativeHeight:o}),_=()=>{if(!l)return;const D=v.join(" "),{text:A}=$i.truncateLine(D,i,n,"force");if(A!=null)return v.splice(0,v.length,A),f=!0,b()},S=()=>{const D=o+h;return D>=s?!1:(v=[],y=0,o=D,m.push(v),!0)};if(!S())return _();for(let D=0;D<t.length;D++){const A=t[D],I=n.width(A),T=v.length===0?0:p,E=y+T+I;if(E<=i){v.push(A),y=E;continue}if(I<=i){if(!S())return _();v.push(A),y=I;continue}if(g=!0,u){const C=i-y-T,O=$i.breakWord(A,C,i,d,n);for(let N=0;N<O.length;N++){const w=O[N];if(w&&v.push(w),N===O.length-1)y=n.width(w);else if(!S())return _()}}else if(l){if(!S())return _();const{text:C}=$i.truncateLine(A,i,n,"force");if(C==null)return;v.push(C),D<t.length-1&&(f=!0);break}else return}return b()}static wrapLineBalanced(t,i,s,n){const a=t.reduce((p,g)=>p+s.width(g),0),r=s.width(" "),o=r*(t.length-n-2),l=(a+o)/n,c=[];let h=[],u=s.width(t[0]),d=!0;for(const p of t){const g=s.width(p);if(d){h=[],h.push(p),u=g,d=!1,c.push(h);continue}const f=u+r+g;f<=l?(h.push(p),u=f):f<=i?(h.push(p),d=!0):(h=[p],u=g,c.push(h))}return c}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}},Ke.className="Text",Ke.defaultLineHeightRatio=1.15,Ke.defaultStyles=Object.assign({},Vi.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Ke.ellipsis=Nu,Ke.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],x([J({redraw:3})],Ke.prototype,"x",2),x([J({redraw:3})],Ke.prototype,"y",2),x([J({redraw:3,changeCb:e=>e._setLines()})],Ke.prototype,"text",2),x([Ou()],Ke.prototype,"fontStyle",2),x([Ou()],Ke.prototype,"fontWeight",2),x([Ou()],Ke.prototype,"fontSize",2),x([Ou()],Ke.prototype,"fontFamily",2),x([J({redraw:3})],Ke.prototype,"textAlign",2),x([J({redraw:3})],Ke.prototype,"textBaseline",2),x([J({redraw:3})],Ke.prototype,"lineHeight",2),Dt=Ke}});function ma(e){const t=ye(e)?e:e.split(".");if(t.length===1){const[i]=t;return vn((s,n,a)=>s[i]=a,s=>s[i])}return vn((i,s,n)=>a0(i,t,n),i=>n0(i,t))}function OI(e){return vn((t,i,s)=>t[e]=s)}function Yt(e,t){return vn((i,s,n)=>i[e][t??s]=n)}function Ie(e){const{newValue:t,oldValue:i,changeValue:s}=e;return vn((n,a,r,o)=>(r!==o&&(o!==void 0&&i?.call(n,o),r!==void 0&&t?.call(n,r),s?.call(n,r,o)),r))}function To(e){return yT(e)}var Di=L({"packages/ag-charts-community/src/util/proxy.ts"(){"use strict";Za(),Te(),Ut()}});function Ru(e,t){const i=e.createElement("style");i.innerHTML=t,e.head.insertBefore(i,e.head.querySelector("style"))}var wu=L({"packages/ag-charts-community/src/util/dom.ts"(){"use strict"}});function hc(e,t){var i,s,n;if(typeof e=="string")return e;const{content:a=(i=t?.content)!=null?i:"",title:r=t?.title,color:o=(s=t?.color)!=null?s:"white",backgroundColor:l=(n=t?.backgroundColor)!=null?n:"#888"}=e,c=r?`<div class="${ce}-title"
        style="color: ${o}; background-color: ${l}">${r}</div>`:"",h=a?`<div class="${ce}-content">${a}</div>`:"";return`${c}${h}`}var ce,gb,fb,Io,Qs,vf,uc=L({"packages/ag-charts-community/src/chart/tooltip/tooltip.ts"(){"use strict";Kt(),wu(),Ot(),di(),pt(),ce="ag-chart-tooltip",gb="ag-chart-dark-tooltip",fb=`
.${ce} {
    transition: transform 0.1s ease;
    max-width: 100%;
    position: fixed;
    left: 0px;
    top: 0px;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: rgb(70, 70, 70);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.${ce}-wrap-always {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: none;
}

.${ce}-wrap-hyphenate {
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
}

.${ce}-wrap-on-space {
    overflow-wrap: normal;
    word-break: normal;
}

.${ce}-wrap-never {
    white-space: pre;
    text-overflow: ellipsis;
}

.${ce}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${ce}-no-animation {
    transition: none !important;
}

.${ce}-hidden {
    visibility: hidden;
}

.${ce}-title {
    overflow: hidden;
    position: relative;
    padding: 8px 14px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    color: white;
    background-color: #888888;
    z-index: 1;
    text-overflow: inherit;
}

.${ce}-title:only-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
}

.${ce}-content {
    overflow: hidden;
    padding: 6px 14px;
    line-height: 1.7em;
    background: white;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 1px solid rgba(0, 0, 0, 0.15);
    overflow: hidden;
    text-overflow: inherit;
}

.${ce}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid #d9d9d9;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${ce}-arrow::after {
    content: "";

    position: absolute;
    top: calc(100% - 1px);
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid white;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`,Io=class extends Rt{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}},x([M(le(["pointer","node"],"a position type"))],Io.prototype,"type",2),x([M(zt)],Io.prototype,"xOffset",2),x([M(zt)],Io.prototype,"yOffset",2),Qs=class ex{constructor(t,i,s,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.darkTheme=!1,this.lastVisibilityChange=Date.now(),this.position=new Io,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=s;const a=i.createElement("div");if(this.element=this.tooltipRoot.appendChild(a),this.element.classList.add(ce),this.canvasElement=t,typeof IntersectionObserver<"u"){const r=new IntersectionObserver(o=>{for(const l of o)l.target===this.canvasElement&&l.intersectionRatio===0&&this.toggle(!1)},{root:this.tooltipRoot});r.observe(this.canvasElement),this.observer=r}ex.tooltipDocuments.indexOf(i)<0&&(Ru(i,fb),ex.tooltipDocuments.push(i))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(ce+"-hidden")}updateClass(t,i,s=!0){const{element:n,class:a,lastClass:r,enableInteraction:o,lastVisibilityChange:l}=this,c=this.isVisible(),h=!!t;let u=1/0;if(c!==h){const m=Date.now();u=m-l,this.lastVisibilityChange=m}const d=(m,v)=>{const y=`${ce}-${m}`;v?n.classList.add(y):n.classList.remove(y)},p=100,g=5,f=!c&&h&&u>p;u>g&&d("no-animation",f),d("no-interaction",!o),d("hidden",!t),d("arrow",!!i),n.classList.toggle(gb,this.darkTheme),this.updateWrapping(),s?(a!==r&&(r&&n.classList.remove(r),a&&n.classList.add(a)),this.lastClass=a):(r&&n.classList.remove(r),this.lastClass=void 0)}updateWrapping(){const{element:t,wrapping:i}=this,s={always:!1,hyphenate:!1,"on-space":!1,never:!1};s[i]=!0,Object.entries(s).forEach(([n,a])=>{t.classList.toggle(`${ce}-wrap-${n}`,a)})}show(t,i,s=!1){var n,a,r,o,l,c,h;const{element:u,canvasElement:d}=this;if(i!==void 0)u.innerHTML=i;else if(!u.innerHTML){this.toggle(!1);return}const p=(a=(n=t.position)==null?void 0:n.xOffset)!=null?a:0,g=(o=(r=t.position)==null?void 0:r.yOffset)!=null?o:0,f=d.getBoundingClientRect(),m=f.left+t.offsetX-u.clientWidth/2+p,v=f.top+t.offsetY-u.clientHeight-8+g,y=this.getWindowBoundingBox(),b=y.x+y.width-u.clientWidth-1,_=y.y+y.height-u.clientHeight,S=It(y.x,m,b),D=It(y.y,v,_),I=!(S!==m||D!==v)&&!p&&!g,T=(c=(l=t.showArrow)!=null?l:this.showArrow)!=null?c:I;if(this.updateShowArrow(T),u.style.transform=`translate(${Math.round(S)}px, ${Math.round(D)}px)`,this.enableInteraction=(h=t.enableInteraction)!=null?h:!1,this.delay>0&&!s){this.toggle(!1),this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0,t.addCustomClass)},this.delay);return}this.toggle(!0,t.addCustomClass)}getWindowBoundingBox(){return new ht(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t,i){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow,i)}pointerLeftOntoTooltip(t){var i;if(!this.enableInteraction)return!1;const s=(i=t.sourceEvent.relatedTarget)==null?void 0:i.classList,a=!!["","-title","-content"].filter(r=>s?.contains(`${ce}${r}`));return s!==void 0&&a}updateShowArrow(t){this._showArrow=t}},Qs.tooltipDocuments=[],x([M(rt)],Qs.prototype,"enabled",2),x([M(rt,{optional:!0})],Qs.prototype,"showArrow",2),x([M(X,{optional:!0})],Qs.prototype,"class",2),x([M(K)],Qs.prototype,"delay",2),x([M(Iu)],Qs.prototype,"range",2),x([M(cc)],Qs.prototype,"wrapping",2),x([M(rt)],Qs.prototype,"darkTheme",2),vf=Qs}}),$t,hr=L({"packages/ag-charts-community/src/chart/caption.ts"(){"use strict";ee(),fi(),Ls(),di(),Di(),pt(),uc(),$t=class extends Rt{constructor(){super(...arguments),this.id=Xs(this),this.node=new Dt().setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}registerInteraction(e){return e.interactionManager.addListener("hover",t=>this.handleMouseMove(e,t))}computeTextWrap(e,t){var i,s;const{text:n,wrapping:a}=this,r=Math.min((i=this.maxWidth)!=null?i:1/0,e),o=(s=this.maxHeight)!=null?s:t;if(!isFinite(r)&&!isFinite(o)){this.node.text=n;return}const{text:l,truncated:c}=Dt.wrap(n??"",r,o,this,a);this.node.text=l,this.truncated=c}handleMouseMove(e,t){if(!this.enabled)return;const{offsetX:i,offsetY:s}=t,n=this.node.computeBBox(),a=this.node.visible&&n.containsPoint(i,s);a&&t.consume(),!this.truncated||!a?e.tooltipManager.removeTooltip(this.id):e.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:t,showArrow:!1,addCustomClass:!1},hc({content:this.text}))}},$t.SMALL_PADDING=10,$t.LARGE_PADDING=20,x([M(rt)],$t.prototype,"enabled",2),x([M(X,{optional:!0}),Yt("node")],$t.prototype,"text",2),x([M(pf,{optional:!0}),Yt("node")],$t.prototype,"textAlign",2),x([M(Mn,{optional:!0}),Yt("node")],$t.prototype,"fontStyle",2),x([M(kn,{optional:!0}),Yt("node")],$t.prototype,"fontWeight",2),x([M(K),Yt("node")],$t.prototype,"fontSize",2),x([M(X),Yt("node")],$t.prototype,"fontFamily",2),x([M(kt,{optional:!0}),Yt("node","fill")],$t.prototype,"color",2),x([M(K,{optional:!0})],$t.prototype,"spacing",2),x([M(K,{optional:!0})],$t.prototype,"lineHeight",2),x([M(K,{optional:!0})],$t.prototype,"maxWidth",2),x([M(K,{optional:!0})],$t.prototype,"maxHeight",2),x([M(cc)],$t.prototype,"wrapping",2)}}),ns,NI=L({"packages/ag-charts-community/src/chart/axis/axisTitle.ts"(){"use strict";pt(),hr(),ns=class{constructor(){this.enabled=!1,this.spacing=$t.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}},x([M(rt)],ns.prototype,"enabled",2),x([M(X,{optional:!0})],ns.prototype,"text",2),x([M(K,{optional:!0})],ns.prototype,"spacing",2),x([M(Mn,{optional:!0})],ns.prototype,"fontStyle",2),x([M(kn,{optional:!0})],ns.prototype,"fontWeight",2),x([M(K)],ns.prototype,"fontSize",2),x([M(X)],ns.prototype,"fontFamily",2),x([M(kt,{optional:!0})],ns.prototype,"color",2),x([M(cc)],ns.prototype,"wrapping",2),x([M(zi,{optional:!0})],ns.prototype,"formatter",2)}});function mb(e,t){var i;(i=xf.constructedArrays)==null||i.set(e,t)}var xf,bf,Sf=L({"packages/ag-charts-community/src/chart/chartOptions.ts"(){"use strict";NI(),xf={constructedArrays:new WeakMap},bf={constructors:{"axes[].title":ns},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}}}}),Os,wt,Ui=L({"packages/ag-charts-community/src/scale/continuousScale.ts"(){"use strict";gt(),sc(),Os=class ix{constructor(t,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=ix.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=t,this.range=i}static is(t){return t instanceof ix}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const{range:i}=this,s=this.getDomain(),n=Math.abs(i[1]-i[0]),a=Math.abs(s[1]-s[0])/t+1,r=Math.floor(n),o=Math.min(a,r);return n/Math.max(1,o)}fromDomain(t){return typeof t=="number"?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,i){var s;const n=(s=i?.clampMode)!=null?s:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const a=this.getDomain().map(u=>this.transform(u)),[r,o]=a,{range:l}=this,[c,h]=l;if(t=this.transform(t),n==="clamped"){const u=Math.min(this.fromDomain(r),this.fromDomain(o)),d=Math.max(this.fromDomain(r),this.fromDomain(o));if(this.fromDomain(t)<u)return c;if(this.fromDomain(t)>d)return h}return r===o?(c+h)/2:t===r?c:t===o?h:c+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(o)-this.fromDomain(r))*(h-c)}invert(t){this.refresh();const i=this.getDomain().map(d=>this.transform(d)),[s,n]=i,{range:a}=this,[r,o]=a,l=r>o,c=l?o:r,h=l?r:o;let u;return t<c?l?n:s:t>h?l?s:n:(r===o?u=this.toDomain((this.fromDomain(s)+this.fromDomain(n))/2):u=this.toDomain(this.fromDomain(s)+(t-r)/(o-r)*(this.fromDomain(n)-this.fromDomain(s))),this.transformInvert(u))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&$.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const t=this.range.slice().sort((i,s)=>i-s);return t[1]-t[0]}isDenseInterval({start:t,stop:i,interval:s,count:n}){const a=i-t,r=this.getPixelRange();return n??(n=a/(typeof s=="number"?s:1)),n>=r?($.warn("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}},Os.defaultTickCount=5,Os.defaultMaxTickCount=6,x([gi],Os.prototype,"domain",2),x([gi],Os.prototype,"range",2),x([gi],Os.prototype,"nice",2),x([gi],Os.prototype,"interval",2),x([gi],Os.prototype,"tickCount",2),x([gi],Os.prototype,"minTickCount",2),x([gi],Os.prototype,"maxTickCount",2),wt=Os}});function yb(e,t){let i=0;return typeof e=="number"&&typeof t=="number"?i=e-t:typeof e=="string"&&typeof t=="string"?i=e.localeCompare(t):e==null&&t==null||(e==null?i=-1:t==null?i=1:i=String(e).localeCompare(String(t))),i}function vb(e,t,i){const s=n=>typeof n=="function"?n():n;for(const n in e){const a=i(s(e[n]),s(t[n]));if(a!==0)return a}return 0}var xb=L({"packages/ag-charts-community/src/util/compare.ts"(){"use strict"}}),Pu,et,xe=L({"packages/ag-charts-community/src/scene/group.ts"(){"use strict";xb(),Ot(),Kt(),ee(),Pu=class sx extends or{constructor(t){var i;super({isVirtual:t?.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:s,zIndexSubOrder:n}=t??{};this.isContainerNode=!0,s!==void 0&&(this.zIndex=s),n!==void 0&&(this.zIndexSubOrder=n),this.name=(i=this.opts)==null?void 0:i.name}zIndexChanged(){var t;this.layer&&((t=this._layerManager)==null||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return this.layer!=null}_setLayerManager(t){var i,s;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&((i=this.opts)!=null&&i.layer)){const{zIndex:n,zIndexSubOrder:a,name:r}=(s=this.opts)!=null?s:{},o=()=>this.getComputedOpacity(),l=()=>this.getVisibility();this.layer=t.addLayer({zIndex:n,zIndexSubOrder:a,name:r,getComputedOpacity:o,getVisibility:l})}}getComputedOpacity(){let t=1,i=this;do i instanceof sx&&(t*=i.opacity);while(i=i.parent);return t}getVisibility(){let t=this,i=this.visible;for(;t=t.parent;)t.visible||(i=t.visible);return i}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,i=1){if(this.isVirtual){super.markDirty(t,i);return}let s=i;(i<2||this.layer!=null)&&(s=1),super.markDirty(t,i,s)}containsPoint(t,i){return!0}computeBBox(){return this.computeTransformMatrix(),sx.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var i,s;const{opts:{name:n=void 0}={},_debug:a=()=>{}}=this,{dirty:r,dirtyZIndex:o,layer:l,children:c,clipRect:h,dirtyTransform:u}=this;let{ctx:d,forceRender:p,clipBBox:g}=t;const{resized:f,stats:m}=t,v=d.getTransform(),y=r>=2||o||f;let b=y,_=!1;for(const E of c)if(b||(b=E.layerManager==null&&E.dirty>=1),_||(_=E.layerManager!=null&&E.dirty>=1),b)break;if(n&&a({name:n,group:this,isDirty:y,isChildDirty:b,dirtyTransform:u,renderCtx:t,forceRender:p}),u)p="dirtyTransform";else if(l){const E=this.computeBBox();(this.lastBBox===void 0||!this.lastBBox.equals(E))&&(p="dirtyTransform",this.lastBBox=E)}if(!y&&!b&&!_&&!p){n&&m&&a({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),l&&m&&(m.layersSkipped++,m.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}const S=this.visible;if(l){if(d=l.context,d.save(),d.resetTransform(),p!=="dirtyTransform"&&(p=b||o),p&&l.clear(),g){const{width:E,height:C,x:O,y:N}=g;a(()=>({name:n,clipBBox:g,ctxTransform:d.getTransform(),renderCtx:t,group:this})),this.clipCtx(d,O,N,E,C)}d.setTransform(v)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),h){const{x:E,y:C,width:O,height:N}=h;d.save(),a(()=>({name:n,clipRect:h,ctxTransform:d.getTransform(),renderCtx:t,group:this})),this.clipCtx(d,E,C,O,N),g=this.matrix.transformBBox(h)}const D=this.hasVirtualChildren();o?(this.sortChildren(c),p!=="dirtyTransform"&&(p=!0)):D&&this.sortChildren(c);const I=p!==t.forceRender||g!==t.clipBBox||d!==t.ctx?Z(R({},t),{ctx:d,forceRender:p,clipBBox:g}):t;let T=0;for(const E of c){if(!E.visible||!S){E.markClean(),m&&(T+=E.nodeCount.count);continue}if(!p&&E.dirty===0){m&&(T+=E.nodeCount.count);continue}d.save(),E.render(I),d.restore()}if(m&&(m.nodesSkipped+=T),super.render(t),h&&d.restore(),D)for(const E of this.virtualChildren)E.markClean({recursive:"virtual"});l&&(m&&m.layersRendered++,d.restore(),p&&l.snapshot(),(s=(i=l.context).verifyDepthZero)==null||s.call(i)),n&&m&&a({name:n,result:"rendered",skipped:T,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort((i,s)=>{var n,a;return vb([i.zIndex,...(n=i.zIndexSubOrder)!=null?n:[void 0,void 0],i.serialNumber],[s.zIndex,...(a=s.zIndexSubOrder)!=null?a:[void 0,void 0],s.serialNumber],yb)})}clipCtx(t,i,s,n,a){t.beginPath(),t.moveTo(i,s),t.lineTo(i+n,s),t.lineTo(i+n,s+a),t.lineTo(i,s+a),t.closePath(),t.clip()}static computeBBox(t){let i=1/0,s=-1/0,n=1/0,a=-1/0;return t.forEach(r=>{if(!r.visible)return;const o=r.computeTransformedBBox();if(!o)return;const l=o.x,c=o.y;l<i&&(i=l),c<n&&(n=c),l+o.width>s&&(s=l+o.width),c+o.height>a&&(a=c+o.height)}),new ht(i,n,s-i,a-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}},Pu.className="Group",x([J({redraw:3,convertor:e=>It(0,e,1)})],Pu.prototype,"opacity",2),et=Pu}}),Ns,RI=L({"packages/ag-charts-community/src/scene/shape/range.ts"(){"use strict";Kt(),ee(),ga(),Ns=class extends Vi{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new ht(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;const{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:r,x2:o,y2:l}=this;a=this.align(a),r=this.align(r),o=this.align(o),l=this.align(l);const{fill:c,opacity:h,isRange:u}=this;if(!!(u&&c)){const{fillOpacity:y}=this;i.fillStyle=c,i.globalAlpha=h*y,i.beginPath(),i.moveTo(a,r),i.lineTo(o,r),i.lineTo(o,l),i.lineTo(a,l),i.closePath(),i.fill()}const{stroke:p,strokeWidth:g,startLine:f,endLine:m}=this;if(!!((f||m)&&p&&g)){const{strokeOpacity:y,lineDash:b,lineDashOffset:_,lineCap:S,lineJoin:D}=this;i.strokeStyle=p,i.globalAlpha=h*y,i.lineWidth=g,b&&i.setLineDash(b),_&&(i.lineDashOffset=_),S&&(i.lineCap=S),D&&(i.lineJoin=D),i.beginPath(),f&&(i.moveTo(a,r),i.lineTo(o,r)),m&&(i.moveTo(o,l),i.lineTo(a,l)),i.stroke()}(t=this.fillShadow)==null||t.markClean(),super.render(e)}},Ns.className="Range",Ns.defaultStyles=Z(R({},Vi.defaultStyles),{strokeWidth:1}),x([J({redraw:2})],Ns.prototype,"x1",2),x([J({redraw:2})],Ns.prototype,"y1",2),x([J({redraw:2})],Ns.prototype,"x2",2),x([J({redraw:2})],Ns.prototype,"y2",2),x([J({redraw:2})],Ns.prototype,"startLine",2),x([J({redraw:2})],Ns.prototype,"endLine",2),x([J({redraw:2})],Ns.prototype,"isRange",2)}});function Bu(e){const{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,s=e.rotation?oe(ri(e.rotation)):0,n=!s&&t>=0&&t<=Math.PI?-1:1,a=!s&&i>=0&&i<=Math.PI?-1:1;let r=0;return e.parallel?r=n*Math.PI/2:a===-1&&(r=Math.PI),{configuredRotation:s,defaultRotation:r,parallelFlipFlag:n,regularFlipFlag:a}}function wI(e,t){return isNaN(e)?t?0:10:e}function PI(e,t,i,s){return e&&!t?i*s===-1?"hanging":"bottom":"middle"}function _f(e,t,i,s,n){const a=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI,o=a||r?-1:1;if(e)if(t||i){if(s*o===-1)return"end"}else return"center";else if(s*n===-1)return"end";return"start"}function BI(e,t,i,s,n){const{width:a,height:r}=t,o=new ht(i,s,0,0);n.transformBBox(o,t);const{x:l=0,y:c=0}=t;return t.width=a,t.height=r,{point:{x:l,y:c,size:0},label:{width:a,height:r,text:e}}}var he,as=L({"packages/ag-charts-community/src/chart/label.ts"(){"use strict";Kt(),fi(),Mi(),di(),pt(),he=class extends Rt{constructor(){super(...arguments),this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return fa(this)}},x([M(rt)],he.prototype,"enabled",2),x([M(kt)],he.prototype,"color",2),x([M(Mn,{optional:!0})],he.prototype,"fontStyle",2),x([M(kn,{optional:!0})],he.prototype,"fontWeight",2),x([M(K)],he.prototype,"fontSize",2),x([M(X)],he.prototype,"fontFamily",2),x([M(zi,{optional:!0})],he.prototype,"formatter",2)}}),Mf,rs=L({"packages/ag-charts-community/src/chart/layers.ts"(){"use strict";Mf=(e=>(e[e.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",e[e.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",e[e.AXIS_ZINDEX=2]="AXIS_ZINDEX",e[e.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",e[e.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",e[e.AXIS_FOREGROUND_ZINDEX=5]="AXIS_FOREGROUND_ZINDEX",e[e.SERIES_CROSSHAIR_ZINDEX=6]="SERIES_CROSSHAIR_ZINDEX",e[e.SERIES_LABEL_ZINDEX=7]="SERIES_LABEL_ZINDEX",e[e.SERIES_CROSSLINE_LINE_ZINDEX=8]="SERIES_CROSSLINE_LINE_ZINDEX",e[e.LEGEND_ZINDEX=9]="LEGEND_ZINDEX",e))(Mf||{})}});function dc(e,t){if(t&&zu(e))return e;if(!t)return Zi(e)||Fu(e)?e:String(e)}function Eo(e){return Fu(e)&&Object.hasOwn(e,"id")?e.id:e}var Fu,bb,zu,Co=L({"packages/ag-charts-community/src/util/value.ts"(){"use strict";Ut(),Fu=e=>!!e&&Object.hasOwn(e,"toString")&&Zi(e.toString()),bb=e=>!!e&&Object.hasOwn(e,"valueOf")&&Et(e.valueOf()),zu=e=>Et(e)||bb(e)||wl(e)}}),Gu,kf,Sb=L({"packages/ag-charts-community/src/chart/crossline/crossLine.ts"(){"use strict";Ui(),gt(),pt(),Co(),Gu=e=>e==="value"?Ft((t,i)=>i.target.type==="line",t=>t.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Ft((t,i)=>i.target.type==="range",t=>t.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),kf=(e,t,i,s)=>{const n=e==="line"&&t!==void 0,a=e==="range"&&i!==void 0;if(!n&&!a)return!0;const[r,o]=i??[t,void 0],l=wt.is(s),c=dc(r,l)!=null&&!isNaN(s.convert(r)),h=dc(o,l)!=null&&!isNaN(s.convert(o));if(n&&c||a&&c&&h)return!0;const u=["Expecting crossLine"];return a?(c||u.push(`range start ${ac(r)}`),h||u.push(`${c?"":"and "}range end ${ac(o)}`)):u.push(`value ${ac(r)}`),u.push("to match the axis scale domain."),$.warnOnce(u.join(" ")),!1}}});function _b({yDirection:e,padding:t=0,position:i="top",bbox:s}){const n=e?Mb:kb,{xTranslationDirection:a,yTranslationDirection:r}=n[i],o=e?s.width:s.height,l=e?s.height:s.width,c=a*(t+o/2),h=r*(t+l/2);return{xTranslation:c,yTranslation:h}}function FI({yDirection:e,bbox:t,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||(s==="top"&&!e?n.top=i+t.height:s==="bottom"&&!e?n.bottom=i+t.height:s==="left"&&e?n.left=i+t.width:s==="right"&&e&&(n.right=i+t.width)),n}var Mb,kb,Vu,Df,Af,Lf,Db,Tf,If,Ef,Cf,Ab,zI=L({"packages/ag-charts-community/src/chart/crossline/crossLineLabelPosition.ts"(){"use strict";Mb={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},kb={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}},Vu=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t/2,y:i}:{x:t,y:isNaN(s)?i:(i+s)/2},Df=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:t,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},Af=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t,y:isNaN(s)?i:(i+s)/2}:{x:t/2,y:isNaN(s)?i:s},Lf=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:i/2,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:(s+n)/2},Db=({xEnd:e,yStart:t,yEnd:i})=>({x:e/2,y:isNaN(i)?t:(t+i)/2}),Tf=({yDirection:e,xStart:t,xEnd:i,yStart:s})=>e?{x:t/2,y:s}:{x:i,y:s},If=({yDirection:e,xStart:t,yStart:i,yEnd:s})=>e?{x:t,y:isNaN(s)?i:s}:{x:t,y:i},Ef=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t,y:i}:{x:t,y:isNaN(s)?i:s},Cf=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:i,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:n},Ab={top:{c:Vu},bottom:{c:Lf},left:{c:Df},right:{c:Af},topLeft:{c:Tf},topRight:{c:Ef},bottomLeft:{c:If},bottomRight:{c:Cf},inside:{c:Db},insideLeft:{c:Df},insideRight:{c:Af},insideTop:{c:Vu},insideBottom:{c:Lf},insideTopLeft:{c:Tf},insideBottomLeft:{c:If},insideTopRight:{c:Ef},insideBottomRight:{c:Cf}}}}),Lb,Wi,oi,Uu,Tb=L({"packages/ag-charts-community/src/chart/crossline/cartesianCrossLine.ts"(){"use strict";ko(),Ui(),Kt(),xe(),ee(),RI(),fi(),Ls(),Ot(),pt(),ie(),as(),rs(),Sb(),zI(),Lb=le(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),Wi=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}},x([M(rt,{optional:!0})],Wi.prototype,"enabled",2),x([M(X,{optional:!0})],Wi.prototype,"text",2),x([M(Mn,{optional:!0})],Wi.prototype,"fontStyle",2),x([M(kn,{optional:!0})],Wi.prototype,"fontWeight",2),x([M(K)],Wi.prototype,"fontSize",2),x([M(X)],Wi.prototype,"fontFamily",2),x([M(zt)],Wi.prototype,"padding",2),x([M(kt,{optional:!0})],Wi.prototype,"color",2),x([M(Lb,{optional:!0})],Wi.prototype,"position",2),x([M(_n,{optional:!0})],Wi.prototype,"rotation",2),x([M(rt,{optional:!0})],Wi.prototype,"parallel",2),oi=class wh{constructor(){this.id=Xs(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Wi,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new et({name:`${this.id}`,layer:!0,zIndex:wh.LINE_LAYER_ZINDEX}),this.labelGroup=new et({name:`${this.id}`,layer:!0,zIndex:wh.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Ns,this.crossLineLabel=new Dt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,labelGroup:i,crossLineRange:s,crossLineLabel:n}=this;t.append(s),i.append(n),s.pointerEvents=1}update(t){const{enabled:i,data:s,type:n,value:a,range:r,scale:o}=this;if(!n||!o||!i||!t||!kf(n,a,r,o)||s.length===0){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,i){if(!t||!this.createNodeData(i))return;const{sideFlag:n,gridLength:a,data:r}=this,o=[],l=0,c=n*a,h=r[0],u=r[1],d=new ht(Math.min(l,c),Math.min(h,u),Math.abs(l-c),Math.abs(h-u));o.push(d);const p=this.computeLabelBBox();return p&&o.push(p),ht.merge(o)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(t){var i,s,n;const{scale:a,gridLength:r,sideFlag:o,direction:l,label:{position:c="top"},clippedRange:h,strokeWidth:u=0}=this;if(this.data=[],!a)return!1;const d=(i=a.bandwidth)!=null?i:0,p=(s=a.step)!=null?s:0,g=(t?-1:1)*(a instanceof Es?(p-d)/2:0),[f,m]=[0,o*r];let[v,y]=this.getRange(),[b,_]=[Number(a.convert(v,{clampMode:"clamped"}))-g,a.convert(y,{clampMode:"clamped"})+d+g];b=gu(b,h),_=gu(_,h),[v,y]=[Number(a.convert(v)),a.convert(y)+d];const S=(v===b||y===_||b!==_)&&Math.abs(_-b)>0;if(S&&b>_&&([b,_]=[_,b],[v,y]=[y,v]),v-g>=b&&(v-=g),y+g<=_&&(y+=g),this.isRange=S,this.startLine=u>0&&v>=b&&v<=b+g,this.endLine=u>0&&y>=_-d-g&&y<=_,!S&&!this.startLine&&!this.endLine)return!1;if(this.data=[b,_],this.label.enabled){const D=l==="y",{c:A=Vu}=(n=Ab[c])!=null?n:{},{x:I,y:T}=A({yDirection:D,xStart:f,xEnd:m,yStart:b,yEnd:_});this.labelPoint={x:I,y:T}}return!0}updateRangeNode(){var t;const{crossLineRange:i,sideFlag:s,gridLength:n,data:a,startLine:r,endLine:o,isRange:l,fill:c,fillOpacity:h,stroke:u,strokeWidth:d,lineDash:p}=this;i.x1=0,i.x2=s*n,i.y1=a[0],i.y2=a[1],i.startLine=r,i.endLine=o,i.isRange=l,i.fill=c,i.fillOpacity=h??1,i.stroke=u,i.strokeWidth=d??1,i.strokeOpacity=(t=this.strokeOpacity)!=null?t:1,i.lineDash=p}updateLabel(){const{crossLineLabel:t,label:i}=this;i.text&&(t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fill=i.color,t.text=i.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:n,rotation:a,position:r="top",padding:o=0},direction:l,parallelFlipRotation:c,regularFlipRotation:h}=this;if(i===void 0||s===void 0)return;const{defaultRotation:u,configuredRotation:d}=Bu({rotation:a,parallel:n,regularFlipRotation:h,parallelFlipRotation:c});t.rotation=u+d,t.textBaseline="middle",t.textAlign="center";const p=t.computeTransformedBBox();if(!p)return;const g=l==="y",{xTranslation:f,yTranslation:m}=_b({yDirection:g,padding:o,position:r,bbox:p});t.translationX=i+f,t.translationY=s+m}getZIndex(t=!1){return t?wh.RANGE_LAYER_ZINDEX:wh.LINE_LAYER_ZINDEX}getRange(){var t;const{value:i,range:s,scale:n}=this,a=wt.is(n),r=(t=s?.[0])!=null?t:i;let o=s?.[1];return!a&&o===void 0&&(o=r),a&&r===o&&(o=void 0),[r,o]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const i=new Dt;i.fontFamily=t.fontFamily,i.fontSize=t.fontSize,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.text=t.text;const{labelPoint:{x:s=void 0,y:n=void 0}={},label:{parallel:a,rotation:r,position:o="top",padding:l=0},direction:c,parallelFlipRotation:h,regularFlipRotation:u}=this;if(s===void 0||n===void 0)return;const{configuredRotation:d}=Bu({rotation:r,parallel:a,regularFlipRotation:u,parallelFlipRotation:h});i.rotation=d,i.textBaseline="middle",i.textAlign="center";const p=i.computeTransformedBBox();if(!p)return;const g=c==="y",{xTranslation:f,yTranslation:m}=_b({yDirection:g,padding:l,position:o,bbox:p});return i.translationX=s+f,i.translationY=n+m,i.computeTransformedBBox()}calculatePadding(t){var i,s,n,a,r,o,l,c;const{isRange:h,startLine:u,endLine:d,direction:p,label:{padding:g=0,position:f="top"}}=this;if(!h&&!u&&!d)return;const m=this.computeLabelBBox();if(m?.x==null||m?.y==null)return;const v=FI({yDirection:p==="y",padding:g,position:f,bbox:m});t.left=Math.max((i=t.left)!=null?i:0,(s=v.left)!=null?s:0),t.right=Math.max((n=t.right)!=null?n:0,(a=v.right)!=null?a:0),t.top=Math.max((r=t.top)!=null?r:0,(o=v.top)!=null?o:0),t.bottom=Math.max((l=t.bottom)!=null?l:0,(c=v.bottom)!=null?c:0)}},oi.LINE_LAYER_ZINDEX=8,oi.RANGE_LAYER_ZINDEX=3,oi.LABEL_LAYER_ZINDEX=7,oi.className="CrossLine",x([M(rt,{optional:!0})],oi.prototype,"enabled",2),x([M(le(["range","line"],"a crossLine type"),{optional:!0})],oi.prototype,"type",2),x([M(Cs(Gu("range"),Do.restrict({length:2})),{optional:!0})],oi.prototype,"range",2),x([M(Gu("value"),{optional:!0})],oi.prototype,"value",2),x([M(kt,{optional:!0})],oi.prototype,"fill",2),x([M(Ct,{optional:!0})],oi.prototype,"fillOpacity",2),x([M(kt,{optional:!0})],oi.prototype,"stroke",2),x([M(zt,{optional:!0})],oi.prototype,"strokeWidth",2),x([M(Ct,{optional:!0})],oi.prototype,"strokeOpacity",2),x([M(Zs,{optional:!0})],oi.prototype,"lineDash",2),Uu=oi}}),Of,Ib=L({"packages/ag-charts-community/src/module/moduleMap.ts"(){"use strict";Ut(),Of=class{constructor(){this.moduleMap=new Map}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,t(e))}removeModule(e){var t;const i=Zi(e)?e:e.optionsKey;(t=this.moduleMap.get(i))==null||t.destroy(),this.moduleMap.delete(i)}isModuleEnabled(e){return this.moduleMap.has(Zi(e)?e:e.optionsKey)}getModule(e){return this.moduleMap.get(Zi(e)?e:e.optionsKey)}get modules(){return this.moduleMap.values()}mapValues(e){return Array.from(this.moduleMap.values()).map(e)}destroy(){for(const e of this.moduleMap.keys())this.removeModule({optionsKey:e})}}}}),Eb={};Us(Eb,{resetMotion:()=>Ee});function Ee(e,t){const{nodes:i,selections:s}=Mu(e);for(const n of s){for(const a of n.nodes()){const r=t(a,a.datum);a.setProperties(r)}n.cleanup()}for(const n of i){const a=t(n,n.datum);n.setProperties(a)}}var ya=L({"packages/ag-charts-community/src/motion/resetMotion.ts"(){"use strict";lr()}}),Oo,pc=L({"packages/ag-charts-community/src/motion/states.ts"(){"use strict";Fi(),Oo=class{constructor(e,t,i){this.states=t,this.preTransitionCb=i,this.debug=te.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,"color: green")}transition(e,t){var i,s;const n=this.states[this.state],a=n?.[e];if(!a){this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey");return}let r=this.state;return typeof a=="string"?r=a:typeof a=="object"&&(r=a.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${r}`,"color: green"),(i=this.preTransitionCb)==null||i.call(this,this.state,r),this.state=r,typeof a=="function"?a(t):typeof a=="object"&&((s=a.action)==null||s.call(a,t)),this.state}}}});function Cb(e){let t,i;const s=Pb.exec(e);s&&([,t,e,i]=s);const n=wb.exec(e);if(!n)throw new Error(`The number formatter is invalid: ${e}`);const[,a,r,o,l,c,h,u,d,p,g]=n;return{fill:a,align:r,sign:o,symbol:l,zero:c,width:parseInt(h),comma:u,precision:parseInt(d),trim:!!p,type:g,prefix:t,suffix:i}}function Ob(e){const t=typeof e=="string"?Cb(e):e,{fill:i,align:s,sign:n="-",symbol:a,zero:r,width:o,comma:l,type:c,prefix:h="",suffix:u="",precision:d}=t;let{trim:p}=t;const g=d===void 0||isNaN(d);let f;if(!c)f=Ai.g,p=!0;else if(c in Ai&&c in dr)f=g?dr[c]:Ai[c];else if(c in Ai)f=Ai[c];else if(c in dr)f=dr[c];else throw new Error(`The number formatter type is invalid: ${c}`);let m;return d==null||g?m=c?6:12:m=d,v=>{let y=f(v,m);return p&&(y=GI(y)),l&&(y=VI(y,l)),y=WI(v,y,n),a&&a!=="#"&&(y=`${a}${y}`),a==="#"&&c==="x"&&(y=`0x${y}`),c==="s"&&(y=`${y}${UI(v)}`),(c==="%"||c==="p")&&(y=`${y}%`),o!=null&&!isNaN(o)&&(y=YI(y,o,i??r,s)),y=`${h}${y}${u}`,y}}function GI(e){return e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function VI(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const s=e.substring(0,i).split(""),n=e.substring(i);for(let a=s.length-3;a>0;a-=3)s.splice(a,0,t);return`${s.join("")}${n}`}function UI(e){return Bb[Nb(e)]}function Nb(e){return It(Rf,Math.floor(Math.log10(Math.abs(e))/3)*3,wf)}function WI(e,t,i=""){if(i==="(")return e>=0?t:`(${t})`;const s=i==="+"?"+":"";return`${e>=0?s:Fb}${t}`}function YI(e,t,i=" ",s=">"){let n=e;if(s===">"||!s)n=n.padStart(t,i);else if(s==="<")n=n.padEnd(t,i);else if(s==="^"){const a=Math.max(0,t-n.length),r=Math.ceil(a/2),o=Math.floor(a/2);n=n.padStart(r+n.length,i),n=n.padEnd(o+n.length,i)}return n}function Rb(e,t){const i=Cb(t??",f"),{precision:s}=i;(s==null||isNaN(s))&&(i.type==="f"||i.type==="%"?i.precision=Math.max(...e.map(a=>{if(typeof a!="number"||a===0)return 0;const r=Math.floor(Math.log10(Math.abs(a))),o=i.type?6:12,l=a.toExponential(o-1).replace(/\.?0+e/,"e"),c=l.indexOf(".");if(c<0)return r>=0?0:-r;const h=l.indexOf("e")-c;return Math.max(0,h-r-1)})):(!i.type||i.type in Ai)&&(i.precision=Math.max(...e.map(a=>{if(typeof a!="number")return 0;const r=a.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return r.substring(0,r.indexOf("e")).replace(".","").length}))));const n=Ob(i);return a=>n(Number(a))}var ur,Js,Nf,wb,Pb,gc,dr,Ai,Rf,wf,Bb,Fb,Pf=L({"packages/ag-charts-community/src/util/numberFormat.ts"(){"use strict";Ot(),ur=e=>`(${e})`,Js=e=>`${ur(e)}?`,Nf=e=>Js(`?:${e}`),wb=(()=>{const e=".",t="[<>=^]",i="[+\\-( ]",s="[$\u20AC\xA3\xA5\u20A3\u20B9#]",n="0",a="\\d+",r=",",o="\\d+",l="~",c="[%a-z]";return new RegExp(["^",Nf(`${Js(e)}${ur(t)}`),Js(i),Js(s),Js(n),Js(a),Js(r),Nf(`\\.${ur(o)}`),Js(l),Js(c),"$"].join(""),"i")})(),Pb=(()=>{const e=".*?",t=".+?",i=".*?";return new RegExp(["^",ur(e),`#\\{${ur(t)}\\}`,ur(i),"$"].join(""))})(),gc=e=>Math.floor(Math.abs(e)),dr={b:e=>gc(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>gc(e).toString(8),x:e=>gc(e).toString(16),X:e=>dr.x(e).toUpperCase(),n:e=>dr.d(e),"%":e=>`${gc(e*100).toFixed(0)}`},Ai={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>Ai.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>Ai.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>Ai.g(e,t).toUpperCase(),n:(e,t)=>Ai.g(e,t),p:(e,t)=>Ai.r(e*100,t),r:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i))-(t-1);if(n<=0)return i.toFixed(-n);const a=Math.pow(10,n);return(Math.round(i/a)*a).toFixed()},s:(e,t)=>{const i=Nb(e);return Ai.r(e/Math.pow(10,i),t)},"%":(e,t)=>Ai.f(e*100,t)},Rf=-24,wf=24,Bb={[Rf]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xB5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[wf]:"Y"},Fb="\u2212"}});function Wu(e,t,i,s,n){if(i<2)return fc(e,t,t-e);const a=No(e,t,i,s,n);return isNaN(a)?Ro(0):(e=Math.ceil(e/a)*a,t=Math.floor(t/a)*a,fc(e,t,a))}function No(e,t,i,s=0,n=1/0){const a=Math.abs(t-e),r=a/i,o=Math.floor(Math.log10(r)),l=Math.pow(10,o),c=Bf.map(h=>{const u=h*l,d=Math.ceil(a/u),p=d>=s&&d<=n,g=Math.abs(d-i);return{multiplier:h,isWithinBounds:p,diffCount:g}}).sort((h,u)=>h.isWithinBounds!==u.isWithinBounds?h.isWithinBounds?-1:1:h.diffCount-u.diffCount)[0].multiplier;return!c||isNaN(c)?NaN:c*l}function HI(e,t){const i=Math.abs(t-e),s=Math.floor(Math.log10(i)),n=Math.pow(10,s),a=e>t?Math.ceil:Math.floor,r=t<e?Math.floor:Math.ceil;return Bf.map(o=>{const l=o*n,c=a(e/l)*l,h=r(t/l)*l;return{error:1-i/Math.abs(h-c),domain:[c,h]}}).sort((o,l)=>o.error-l.error)[0].domain}function fc(e,t,i){const s=Math.min(e,t),n=Math.max(e,t),a=jg(i),r=Math.pow(10,a),o=Math.ceil((n-s)/i),l=Ro(a);for(let c=0;c<=o;c++){const h=s+i*c;l.push(Math.round(h*r)/r)}return l}var Ro,Bf,wo=L({"packages/ag-charts-community/src/util/ticks.ts"(){"use strict";Ot(),Ro=(e,t=[])=>Object.assign(t,{fractionDigits:e}),Bf=[1,2,5,10]}}),Ff,Yu,zf=L({"packages/ag-charts-community/src/scale/logScale.ts"(){"use strict";Uh(),gt(),Ot(),Pf(),wo(),Ut(),Ui(),sc(),Ff=class nx extends wt{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=xx,this.basePow=xx,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,$.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=nx.getBaseLogMethod(this.base),this.basePow=nx.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[t,i]=this.domain,s=t>i?Math.ceil:Math.floor,n=t>i?Math.floor:Math.ceil,a=this.pow(s(this.log(t))),r=this.pow(n(this.log(i)));this.niceDomain=[a,r]}ticks(){var t;const i=(t=this.tickCount)!=null?t:10;if(!this.domain||this.domain.length<2||i<1)return[];this.refresh();const s=this.base,[n,a]=this.getDomain(),r=Math.min(n,a),o=Math.max(n,a);let l=this.log(r),c=this.log(o);if(this.interval){const m=Math.abs(this.interval),v=Math.abs(c-l);let y=fc(l,c,Math.min(v,m));if(y=Ro(y.fractionDigits,y.map(b=>this.pow(b)).filter(b=>b>=r&&b<=o)),!this.isDenseInterval({start:r,stop:o,interval:m,count:y.length}))return y}const h=s%1===0,u=c-l>=i;if(!h||u){let m=Wu(l,c,Math.min(c-l,i));return m=Ro(m.fractionDigits,m.map(v=>this.pow(v))),m}const d=[],p=r>0;l=Math.floor(l)-1,c=Math.round(c)+1;const g=So(this.range)/i;let f=1/0;for(let m=l;m<=c;m++){const v=this.convert(this.pow(m+1));for(let y=1;y<s;y++){const b=p?y:s-y+1,_=this.pow(m)*b,S=this.convert(_),D=Math.abs(f-S),A=Math.abs(S-v),I=D>=g&&A>=g;_>=r&&_<=o&&(y===1||I)&&(d.push(_),f=S)}}return d}tickFormat({count:t,ticks:i,specifier:s}){return t!==1/0&&i==null&&this.ticks(),s??(s=this.base===10?".0e":","),Zi(s)?Ob(s):s}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const i=Math.log(t);return s=>Math.log(s)/i}}static getBasePowerMethod(t){switch(t){case 10:return i=>i>=0?mt(10,i):1/mt(10,-i);case Math.E:return Math.exp;default:return i=>mt(t,i)}}},x([gi],Ff.prototype,"base",2),Yu=Ff}});function Gf(e,t=new Date(e.getFullYear(),0,1)){const i=e.getTimezoneOffset()-t.getTimezoneOffset(),s=e.getTime()-t.getTime()+i*6e4,n=36e5*24;return Math.floor(s/n)}function zb(e,t){const s=new Date(e.getFullYear(),0,1).getDay(),n=(t-s+7)%7,a=new Date(e.getFullYear(),0,n+1);return a<=e?Math.floor(Gf(e,a)/7)+1:0}function Gb(e,t=e.getFullYear()){const s=new Date(t,0,1).getDay(),n=(Wf-s+7)%7,a=new Date(t,0,n-(Wf-Uf)+1);return a<=e?Math.floor(Gf(e,a)/7)+1:Gb(e,t-1)}function KI(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${je(Math.floor(i/60),2,"0")}${je(Math.floor(i%60),2,"0")}`}function je(e,t,i){const s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function Vf(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(i!==0){const o=i>0?e.substring(0,i):e;t.push(o)}if(i<0)break;const s=e[i+1],n=Wb[s];n!=null&&i++;const a=e[i+1],r=Ub[a];if(typeof r=="function")t.push([r,n]);else if(typeof r=="string"){const o=Vf(r);t.push([o,n])}else t.push(`${n??""}${a}`);e=e.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return t.map(n=>typeof n=="string"?n:n[0](s,n[1])).join("")}}var mc,Vb,Uf,Wf,Ub,Wb,jI=L({"packages/ag-charts-community/src/util/timeFormat.ts"(){"use strict";mc={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},Vb=0,Uf=1,Wf=4,Ub={a:e=>mc.shortDays[e.getDay()],A:e=>mc.days[e.getDay()],b:e=>mc.shortMonths[e.getMonth()],B:e=>mc.months[e.getMonth()],c:"%x, %X",d:(e,t)=>je(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>je(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>je(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return i===0?"12":je(i,2,t??"0")},j:(e,t)=>je(Gf(e)+1,3,t??"0"),m:(e,t)=>je(e.getMonth()+1,2,t??"0"),M:(e,t)=>je(e.getMinutes(),2,t??"0"),L:(e,t)=>je(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>je(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>je(zb(e,Vb),2,t??"0"),V:(e,t)=>je(Gb(e),2,t??"0"),w:(e,t)=>je(e.getDay(),2,t??"0"),W:(e,t)=>je(zb(e,Uf),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>je(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>je(e.getFullYear(),4,t??"0"),Z:e=>KI(e),"%":()=>"%"},Wb={_:" ",0:"0","-":""}}});function os(e){return e instanceof Date?e.getTime():e}var va,Hu,Yf=L({"packages/ag-charts-community/src/scale/timeScale.ts"(){"use strict";Ot(),wo(),Ex(),yn(),Tx(),ui(),_x(),Ax(),Gx(),kx(),Fx(),Ux(),jI(),Ui(),va={0:".%L",1:":%S",2:"%I:%M",3:"%I %p",4:"%a",5:"%b %d",6:"%B",7:"%y",8:"%Y"},Hu=class extends wt{constructor(){super([],[0,1]),this.type="time",this.year=Vx,this.month=zx,this.week=Bx,this.day=Ix,this.hour=Lx,this.minute=Dx,this.second=Mx,this.millisecond=Sx,this.tickIntervals=[[this.second,1,Jn],[this.second,5,5*Jn],[this.second,15,15*Jn],[this.second,30,30*Jn],[this.minute,1,ei],[this.minute,5,5*ei],[this.minute,15,15*ei],[this.minute,30,30*ei],[this.hour,1,_s],[this.hour,3,3*_s],[this.hour,6,6*_s],[this.hour,12,12*_s],[this.day,1,mn],[this.day,2,2*mn],[this.week,1,oo],[this.week,2,2*oo],[this.week,3,3*oo],[this.month,1,lo],[this.month,2,2*lo],[this.month,3,3*lo],[this.month,4,4*lo],[this.month,6,6*lo],[this.year,1,Ol]]}toDomain(e){return new Date(e)}calculateDefaultTickFormat(e=[]){let t=8;const i=l=>{l<t&&(t=l)};for(const l of e){const c=this.getLowestGranularityFormat(l);i(c)}const s=os(e[0]),n=os(e.at(-1)),a=new Date(s).getFullYear(),o=new Date(n).getFullYear()-a>0;return this.buildFormatString(t,o)}buildFormatString(e,t){let i=[va[e]],s=0;const n=this.getDomain(),a=So(n.map(os));switch(e){case 1:a/ei>1&&i.push(va[2]);case 2:a/_s>1&&i.push(va[3]);case 3:s=i.length,a/mn>1&&i.push(va[4]);case 4:if(a/oo>1||t){const r=i.indexOf(va[4]);r>-1&&i.splice(r,1,va[5])}case 5:case 6:(a/Ol>1||t)&&i.push(va[8]);default:break}return s<i.length&&(i=[...i.slice(0,s),i.slice(s).join(" ")]),s>0&&(i=[...i.slice(0,s).reverse(),...i.slice(s)],s<i.length&&i.splice(s,0," ")),i.join("")}getLowestGranularityFormat(e){return this.second.floor(e)<e?0:this.minute.floor(e)<e?1:this.hour.floor(e)<e?2:this.day.floor(e)<e?3:this.month.floor(e)<e?this.week.floor(e)<e?4:5:this.year.floor(e)<e?6:8}defaultTickFormat(e){const t=this.calculateDefaultTickFormat(e);return i=>Vf(t)(i)}getTickInterval({start:e,stop:t,count:i,minCount:s,maxCount:n}){const{tickIntervals:a}=this;let r,o;const l=i??wt.defaultTickCount,c=Math.abs(t-e)/Math.max(l,1);let h=0;for(;h<a.length&&c>a[h][2];)h++;if(h===0)o=Math.max(No(e,t,l,s,n),1),r=this.millisecond;else if(h===a.length){const u=e/Ol,d=t/Ol;o=No(u,d,l,s,n),r=this.year}else{const u=c-a[h-1][2],d=a[h][2]-c,p=u<d?h-1:h;[r,o]=a[p]}return r.every(o)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[e,t]=this.getDomain().map(os),i=Math.min(e,t),s=Math.max(e,t);if(this.interval!==void 0)return this.getTicksForInterval({start:i,stop:s});if(this.nice){const{tickCount:n}=this;if(n===2)return this.niceDomain;if(n===1)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:i,stop:s})}getDefaultTicks({start:e,stop:t}){const i=this.getTickInterval({start:e,stop:t,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(e),new Date(t)):[]}getTicksForInterval({start:e,stop:t}){const{interval:i,tickIntervals:s}=this;if(!i)return[];if(i instanceof ro){const h=i.range(new Date(e),new Date(t));return this.isDenseInterval({start:e,stop:t,interval:i,count:h.length})?this.getDefaultTicks({start:e,stop:t}):h}const n=Math.abs(i);if(this.isDenseInterval({start:e,stop:t,interval:n}))return this.getDefaultTicks({start:e,stop:t});const a=[...s];a.reverse();const r=a.find(h=>n%h[2]===0);if(r)return r[0].every(n/(r[2]/r[1])).range(new Date(e),new Date(t));let o=new Date(e);const l=new Date(t),c=[];for(;o<=l;)c.push(o),o=new Date(o),o.setMilliseconds(o.getMilliseconds()+n);return c}tickFormat({ticks:e,specifier:t}){return t==null?this.defaultTickFormat(e):Vf(t)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,i]=this.domain;for(let s=0;s<4;s++){this.updateNiceDomainIteration(t,i);const[n,a]=this.niceDomain;if(os(t)===os(n)&&os(i)===os(a))break;t=n,i=a}}updateNiceDomainIteration(e,t){const i=Math.min(os(e),os(t)),s=Math.max(os(e),os(t)),n=e>t,{interval:a}=this;let r;if(a instanceof ro)r=a;else{const o=typeof a=="number"?(s-i)/Math.max(a,1):this.tickCount;r=this.getTickInterval({start:i,stop:s,count:o,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const o=r.range(new Date(i),new Date(s),!0),l=n?[...o].reverse():o,c=l[0],h=l.at(-1);this.niceDomain=[c,h]}}}}}),jt,xa=L({"packages/ag-charts-community/src/scene/selection.ts"(){"use strict";Fi(),ee(),jt=class no{constructor(t,i,s=!0){this.parentNode=t,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=te.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(or,i)?()=>new i:i}static select(t,i,s=!0){return new no(t,i,s)}static selectAll(t,i){const s=[],n=a=>{i(a)&&s.push(a),a.children.forEach(n)};return n(t),s}static selectByClass(t,i){return no.selectAll(t,s=>s instanceof i)}static selectByTag(t,i){return no.selectAll(t,s=>s.tag===i)}createNode(t,i,s){const n=this.nodeFactory(t);return n.datum=t,i?.(n),s!=null?this._nodes.splice(s,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(t,i,s){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),s){const n=new Map(t.map((a,r)=>[s(a),[a,r]]));for(const[a,r]of this._nodesMap.entries())if(n.has(r)){const[o]=n.get(r);a.datum=o,this.garbageBin.delete(a),n.delete(r)}else this.garbageBin.add(a);for(const[a,[r,o]]of n.entries())this._nodesMap.set(this.createNode(r,i,o),a)}else{const n=Math.max(t.length,this.data.length);for(let a=0;a<n;a++)a>=t.length?this.garbageBin.add(this._nodes[a]):a>=this._nodes.length?this.createNode(t[a],i):(this._nodes[a].datum=t[a],this.garbageBin.delete(this._nodes[a]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach((i,s)=>t(i,i.datum,s)),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t],s=this._nodes[t].datum;yield{node:i,datum:s,index:t}}}select(t){return no.selectAll(this.parentNode,t)}selectByClass(t){return no.selectByClass(this.parentNode,t)}selectByTag(t){return no.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}}}),be,pr=L({"packages/ag-charts-community/src/scene/shape/line.ts"(){"use strict";Kt(),ee(),ga(),be=class extends Vi{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}computeBBox(){return new ht(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:s}=this.transformPoint(e,t);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}render(e){var t;const{ctx:i,forceRender:s,stats:n,devicePixelRatio:a}=e;if(this.dirty===0&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:o,x2:l,y2:c}=this;if(r===l){const{strokeWidth:h}=this,u=Math.round(r*a)/a+Math.trunc(h*a)%2/(a*2);r=u,l=u}else if(o===c){const{strokeWidth:h}=this,u=Math.round(o*a)/a+Math.trunc(h*a)%2/(a*2);o=u,c=u}i.beginPath(),i.moveTo(r,o),i.lineTo(l,c),this.fillStroke(i),(t=this.fillShadow)==null||t.markClean(),super.render(e)}},be.className="Line",be.defaultStyles=Object.assign({},Vi.defaultStyles,{fill:void 0,strokeWidth:1}),x([J({redraw:3})],be.prototype,"x1",2),x([J({redraw:3})],be.prototype,"y1",2),x([J({redraw:3})],be.prototype,"x2",2),x([J({redraw:3})],be.prototype,"y2",2)}});function XI(e,t,i,s,n){let a=e.x;e.x<t?a=t:e.x>t+s&&(a=t+s);let r=e.y;e.y<i?r=i:e.y>i+n&&(r=i+n);const o=e.x-a,l=e.y-r;return Math.sqrt(o*o+l*l)<=e.size*.5}function Yb(e,t,i,s,n){const a=e.x+e.width>t&&e.x<t+s,r=e.y+e.height>i&&e.y<i+n;return a&&r}function $I(e,t,i,s,n){return t+s<e.x+e.width&&t>e.x&&i>e.y&&i+n<e.y+e.height}function qI(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}function ZI(e,t,i=5){const s=[];e=e.map(n=>n.slice().sort((a,r)=>r.point.size-a.point.size));for(let n=0;n<e.length;n++){const a=s[n]=[],r=e[n];if(r?.length&&r[0].label)for(let o=0,l=r.length;o<l;o++){const c=r[o],h=c.label,u=c.point.size*.5,d=c.point.x-h.width*.5,p=c.point.y-u-h.height-i,{width:g,height:f}=h;!(!t||$I(t,d,p,g,f))||e.some(b=>b.some(_=>XI(_.point,d,p,g,f)))||s.some(b=>b.some(_=>Yb(_,d,p,g,f)))||a.push({index:o,text:h.text,x:d,y:p,width:g,height:f,datum:c})}}return s}function QI(e,t){const i=[];for(let s=0;s<e.length;s++){const n=e[s],{point:{x:a,y:r},label:{text:o}}=n;let{label:{width:l,height:c}}=n;if(l+=t??0,c+=t??0,i.some(u=>Yb(u,a,r,l,c)))return!0;i.push({index:s,text:o,x:a,y:r,width:l,height:c,datum:n})}return!1}var Hb=L({"packages/ag-charts-community/src/scene/util/labelPlacement.ts"(){"use strict"}});function JI(e,t){return e.length===t.length&&e.every((i,s)=>Number(i)===Number(t[s]))}var tE=L({"packages/ag-charts-community/src/util/equal.ts"(){"use strict"}}),Kb,jb,yc,eE=L({"packages/ag-charts-community/src/chart/axis/axisGridLine.ts"(){"use strict";Ut(),pt(),Kb=["stroke","lineDash"],jb=qs(e=>Ws(e)&&Object.keys(e).every(t=>Kb.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),yc=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}},x([M(rt)],yc.prototype,"enabled",2),x([M(K)],yc.prototype,"width",2),x([M(jb)],yc.prototype,"style",2)}});function An(e,t=[void 0]){return vn((i,s,n)=>t.includes(n)?uo(e)?e(n):e:n)}var Po=L({"packages/ag-charts-community/src/util/default.ts"(){"use strict";Za(),Ut()}}),ue,Ku=L({"packages/ag-charts-community/src/chart/axis/axisLabel.ts"(){"use strict";fi(),Po(),pt(),ue=class{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return fa(this)}},x([M(rt)],ue.prototype,"enabled",2),x([M(rt,{optional:!0})],ue.prototype,"autoWrap",2),x([M(K,{optional:!0})],ue.prototype,"maxWidth",2),x([M(K,{optional:!0})],ue.prototype,"maxHeight",2),x([M(Mn,{optional:!0})],ue.prototype,"fontStyle",2),x([M(kn,{optional:!0})],ue.prototype,"fontWeight",2),x([M(zt.restrict({min:1}))],ue.prototype,"fontSize",2),x([M(X)],ue.prototype,"fontFamily",2),x([M(K)],ue.prototype,"padding",2),x([M(cr),An(NaN)],ue.prototype,"minSpacing",2),x([M(kt,{optional:!0})],ue.prototype,"color",2),x([M(_n,{optional:!0})],ue.prototype,"rotation",2),x([M(rt)],ue.prototype,"avoidCollisions",2),x([M(rt)],ue.prototype,"mirrored",2),x([M(rt)],ue.prototype,"parallel",2),x([M(X,{optional:!0})],ue.prototype,"format",2)}}),Bo,Xb=L({"packages/ag-charts-community/src/chart/axis/axisLine.ts"(){"use strict";pt(),Bo=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}},x([M(rt)],Bo.prototype,"enabled",2),x([M(K)],Bo.prototype,"width",2),x([M(kt,{optional:!0})],Bo.prototype,"color",2)}}),$b,ls,ju=L({"packages/ag-charts-community/src/chart/axis/axisTick.ts"(){"use strict";Po(),ui(),Ut(),pt(),$b=Ft(e=>Et(e)&&e>0||e instanceof ro,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),ls=class{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}},x([M(rt)],ls.prototype,"enabled",2),x([M(K)],ls.prototype,"width",2),x([M(K)],ls.prototype,"size",2),x([M(kt,{optional:!0})],ls.prototype,"color",2),x([M($b,{optional:!0})],ls.prototype,"interval",2),x([M(Do,{optional:!0})],ls.prototype,"values",2),x([M(mf),An(NaN)],ls.prototype,"minSpacing",2)}});function Hf(e){const[t,i]=Sn(e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}function iE(e,t){return Math.abs(t-e)<eS?t:e>t?t+Xu:t-Xu}function qb(e){const t=(r,o)=>{const[l=e.min,c=e.max]=Sn(o??[]);return r<l||r>c};return{tick:{fromFn(r,o,l){let c=r.y1+r.translationY,h=r.opacity;return(l==="added"||t(r.datum.translationY,r.datum.range))&&(c=o.translationY,h=0),{y:0,translationY:c,opacity:h,phase:ai[l]}},toFn(r,o,l){const c=o.translationY;let h=1;return l==="removed"&&(h=0),{y:0,translationY:c,opacity:h,finish:{y:c,translationY:0}}},intermediateFn(r,o,l){return{visible:!t(r.y)}}},line:{fromFn(r,o){var l;return Z(R({},(l=r.previousDatum)!=null?l:o),{phase:ai.updated})},toFn(r,o){return R({},o)}},label:{fromFn(r,o,l){var c;const h=(c=r.previousDatum)!=null?c:o,u=h.x,d=h.y,p=h.rotationCenterX;let g=Math.round(r.translationY),f=h.rotation,m=r.opacity;return l==="removed"||t(h.y,h.range)||(l==="added"||t(r.datum.y,r.datum.range))&&(g=Math.round(h.translationY),m=0,f=o.rotation),{x:u,y:d,rotationCenterX:p,translationY:g,rotation:f,opacity:m,phase:ai[l]}},toFn(r,o,l){var c,h;const u=o.x,d=o.y,p=o.rotationCenterX,g=Math.round(o.translationY);let f=0,m=1;return l==="added"?(m=1,f=o.rotation):l==="removed"?(m=0,f=o.rotation):f=iE((h=(c=r.previousDatum)==null?void 0:c.rotation)!=null?h:o.rotation,o.rotation),{x:u,y:d,rotationCenterX:p,translationY:g,rotation:f,opacity:m,finish:{rotation:o.rotation}}}},group:{fromFn(r,o){const{rotation:l,translationX:c,translationY:h}=r;return{rotation:l,translationX:c,translationY:h,phase:ai.updated}},toFn(r,o){const{rotation:l,translationX:c,translationY:h}=o;return{rotation:l,translationX:c,translationY:h}}}}}function Zb(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function Qb(e){const{visible:t,min:i,max:s}=e;return(n,a)=>{const r=a.translationY,o=t&&r>=i&&r<=s;return{y:r,translationY:0,opacity:1,visible:o}}}function Jb(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function tS(){return(e,t)=>R({},t)}var Xu,eS,iS=L({"packages/ag-charts-community/src/chart/axis/axisUtil.ts"(){"use strict";He(),Ot(),Xu=Math.PI*2,eS=Xu/2}}),Kf,ba,$u,jf=L({"packages/ag-charts-community/src/chart/axis/axis.ts"(){"use strict";Ib(),He(),ya(),pc(),Ui(),zf(),Yf(),Kt(),xe(),Xg(),xa(),pr(),fi(),Hb(),Mi(),tE(),Ls(),si(),gt(),Ot(),Di(),pt(),hr(),ie(),Tb(),as(),rs(),eE(),Ku(),Xb(),ju(),iS(),Kf=(e=>(e[e.TickLine=0]="TickLine",e[e.TickLabel=1]="TickLabel",e[e.GridLine=2]="GridLine",e[e.GridArc=3]="GridArc",e[e.AxisLine=4]="AxisLine",e))(Kf||{}),ba=class p2{constructor(t,i,s){this.moduleCtx=t,this.scale=i,this.id=Xs(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new et({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new be),this.tickLineGroup=this.axisGroup.appendChild(new et({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new et({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new et({name:`${this.id}-CrossLines`}),this.gridGroup=new et({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new et({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=jt.select(this.tickLineGroup,be,!1),this.tickLabelGroupSelection=jt.select(this.tickLabelGroup,Dt,!1),this.gridLineGroupSelection=jt.select(this.gridLineGroup,be,!1),this.line=new Bo,this.tick=this.createTick(),this.gridLine=new yc,this.label=this.createLabel(),this.defaultTickMinSpacing=p2.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new $t,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new Of,this.refreshScale(),this._titleCaption.registerInteraction(this.moduleCtx),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",a=>this.checkAxisHover(a))),this.animationManager=t.animationManager,this.animationState=new Oo("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:a=>this.animateReadyUpdate(a),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines);let n;this.destroyFns.push(t.layoutService.addListener("layout-complete",a=>{n!=null&&Bi(a.chart,n)!=null&&this.animationState.transition("resize"),n=R({},a.chart)})),s?.respondsToZoom!==!1&&this.destroyFns.push(t.updateService.addListener("update-complete",a=>{this.minRect=a.minRect}))}get type(){var t;return(t=this.constructor.type)!=null?t:""}set crossLines(t){var i,s;(i=this._crossLines)==null||i.forEach(n=>this.detachCrossLine(n)),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,(s=this._crossLines)==null||s.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}refreshScale(){var t;this.range=this.scale.range.slice(),(t=this.crossLines)==null||t.forEach(this.initCrossLine,this)}updateRange(){var t;const{range:i,visibleRange:s,scale:n}=this,a=(i[1]-i[0])/(s[1]-s[0]),r=a*s[0],o=i[0]-r;n.range=[o,o+a],(t=this.crossLines)==null||t.forEach(l=>{l.clippedRange=[i[0],i[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,i){i.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,i){i.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,i=0,s=0){const[n,a]=Sn(this.range);return t+i>=n-s&&t<=a+s}onLabelFormatChange(t,i){const{scale:s,fractionDigits:n}=this,r=!(s instanceof Yu)&&n>0?o=>typeof o=="number"?o.toFixed(n):String(o):o=>String(o);if(i&&s&&s.tickFormat)try{this.labelFormatter=s.tickFormat({ticks:t,specifier:i})}catch{this.labelFormatter=r,$.warnOnce(`the axis label format string ${i} is invalid. No formatting will be applied`)}else this.labelFormatter=r}setTickInterval(t){var i;this.scale.interval=(i=this.tick.interval)!=null?i:t}setTickCount(t,i,s){const{scale:n}=this;if(t&&wt.is(n)){if(typeof t=="number"){n.tickCount=t,n.minTickCount=i??0,n.maxTickCount=s??1/0;return}n instanceof Hu&&this.setTickInterval(t)}}onGridLengthChange(t,i){var s;(i&&!t||!i&&t)&&this.onGridVisibilityChange(),(s=this.crossLines)==null||s.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createTick(){return new ls}createLabel(){return new ue}checkAxisHover(t){!this.interactionEnabled||!this.computeBBox().containsPoint(t.offsetX,t.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t=0,i=!0){if(!this.tickGenerationResult)return;const{rotation:s,parallelFlipRotation:n,regularFlipRotation:a}=this.calculateRotations(),r=this.label.getSideFlag();this.updatePosition();const o=this.getAxisLineCoordinates(),{tickData:l,combinedRotation:c,textBaseline:h,textAlign:u,primaryTickCount:d}=this.tickGenerationResult,p=this.tickLabelGroupSelection.nodes().map(g=>g.datum.tickId);if(this.updateSelections(o,l.ticks,{combinedRotation:c,textAlign:u,textBaseline:h,range:this.scale.range}),!i||this.animationManager.isSkipped())this.resetSelectionNodes();else{const g=this.calculateUpdateDiff(p,l);this.animationState.transition("update",g)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(r),this.updateTickLines(),this.updateTitle({anyTickVisible:l.ticks.length>0}),this.updateCrossLines({rotation:s,parallelFlipRotation:n,regularFlipRotation:a}),this.updateLayoutState(),d}getAxisLineCoordinates(){const[t,i]=Sn(this.range);return{x:0,y1:t,y2:i}}getTickLineCoordinates(t){const s=this.label.getSideFlag()*this.getTickSize(),n=Math.min(0,s),a=n+Math.abs(s),r=t.translationY;return{x1:n,x2:a,y:r}}getTickLabelProps(t,i){const{label:s}=this,{combinedRotation:n,textBaseline:a,textAlign:r,range:o}=i,l=t.tickLabel,h=s.getSideFlag()*(this.getTickSize()+s.padding+this.seriesAreaPadding),u=l!==""&&l!=null;return{tickId:t.tickId,translationY:t.translationY,fill:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:n,rotationCenterX:h,text:l,textAlign:r,textBaseline:a,visible:u,x:h,y:0,range:o}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(t,i){var s;const{title:n}=this;if(!n){t.enabled=!1;return}if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const a=t.node,r=((s=n.spacing)!=null?s:0)+i.spacing,o=this.label.getSideFlag(),l=oe(this.rotation),c=o===-1&&l>Math.PI&&l<Math.PI*2?-1:1,h=c*o*Math.PI/2,u=c===1?"bottom":"top",{range:d}=this,p=Math.floor(c*o*(d[0]+d[1])/2),g=Math.floor(o===-1?c*-r:-r),{callbackCache:f}=this.moduleCtx,{formatter:m=y=>y.defaultValue}=n,v=f.call(m,this.getTitleFormatterParams());a.setProperties({rotation:h,text:v,textBaseline:u,visible:!0,x:p,y:g})}}calculateLayout(t){var i,s;const{rotation:n,parallelFlipRotation:a,regularFlipRotation:r}=this.calculateRotations(),o=this.label.getSideFlag(),l=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:a,regularFlipRotation:r,labelX:l,sideFlag:o}),this.updateLayoutState();const c=this.tickGenerationResult,{tickData:h,combinedRotation:u,textBaseline:d,textAlign:p}=c,g=Le(c,["tickData","combinedRotation","textBaseline","textAlign"]),f=[],{x:m,y1:v,y2:y}=this.getAxisLineCoordinates(),b=new ht(m+Math.min(o*this.seriesAreaPadding,0),v,this.seriesAreaPadding,y-v);if(f.push(b),this.tick.enabled&&h.ticks.forEach(I=>{const{x1:T,x2:E,y:C}=this.getTickLineCoordinates(I),O=new ht(T,C,E-T,0);f.push(O)}),this.label.enabled){const I=new Dt;h.ticks.forEach(T=>{const E=this.getTickLabelProps(T,{combinedRotation:u,textAlign:p,textBaseline:d,range:this.scale.range});if(!E.visible)return;I.setProperties(Z(R({},E),{translationY:Math.round(T.translationY)}));const C=I.computeTransformedBBox();C&&f.push(C)})}const _=I=>{const T=new ss,{rotation:E,translationX:C,translationY:O,rotationCenterX:N,rotationCenterY:w}=this.getAxisTransform();return ss.updateTransformMatrix(T,1,1,E,C,O,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:N,rotationCenterY:w}),T.transformBBox(I)};if((i=this.title)!=null&&i.enabled){const I=new $t,T=ht.merge(f).width;this.setTitleProps(I,{spacing:T});const C=I.node.computeTransformedBBox();C&&f.push(C)}const S=ht.merge(f),D=_(S),A=this.isAnySeriesActive();return(s=this.crossLines)==null||s.forEach(I=>{var T;I.sideFlag=-o,I.direction=n===-Math.PI/2?"x":"y",I instanceof Uu&&(I.label.parallel=(T=I.label.parallel)!=null?T:this.label.parallel),I.parallelFlipRotation=a,I.regularFlipRotation=r,I.calculateLayout(A,this.reverse)}),t=g.primaryTickCount,{primaryTickCount:t,bbox:D}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:i}=this;wt.is(t)&&(t.nice=i,t.update())}calculateRotations(){const t=ri(this.rotation),i=oe(t),s=oe(t-Math.PI/2);return{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}}generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:a}){var r;const{scale:o,tick:l,label:{parallel:c,rotation:h,fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g}}=this,f=t!==void 0,{defaultRotation:m,configuredRotation:v,parallelFlipFlag:y,regularFlipFlag:b}=Bu({rotation:h,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),_=v+m,S=new ss,{maxTickCount:D}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(r=l.maxSpacing)!=null?r:NaN}),I=!wt.is(o)||isNaN(D)?10:D;let T=_f(c,v,0,a,b);const E=PI(c,v,a,y),C={fontFamily:u,fontSize:d,fontStyle:p,fontWeight:g,textBaseline:E,textAlign:T};let O={rawTicks:[],ticks:[],labelCount:0},N=0,w=0,U=!0,G=!1;for(;U&&N<=I&&!G;){w=0,T=_f(c,v,0,a,b);const P=this.getTickStrategies({secondaryAxis:f,index:N});for(const j of P){({tickData:O,index:N,autoRotation:w,terminate:G}=j({index:N,tickData:O,textProps:C,labelOverlap:U,terminate:G,primaryTickCount:t}));const z=v!==0||w!==0,q=_+w;T=_f(c,v,w,a,b),U=this.checkLabelOverlap(q,z,S,O.ticks,n,Z(R({},C),{textAlign:T}))}}const F=m+v+w;return!f&&O.rawTicks.length>0&&(t=O.rawTicks.length),{tickData:O,primaryTickCount:t,combinedRotation:F,textBaseline:E,textAlign:T}}getTickStrategies({index:t,secondaryAxis:i}){const{scale:s,label:n,tick:a}=this,r=wt.is(s),o=n.enabled&&n.avoidCollisions,l=!r&&t!==0&&o,c=n.autoRotate===!0&&n.rotation===void 0,h=[];let u;this.tick.values?u=3:i?u=1:l?u=2:u=0;const d=({index:p,tickData:g,primaryTickCount:f,terminate:m})=>this.createTickData(u,p,g,m,f);if(h.push(d),!r&&!isNaN(a.minSpacing)){const p=({index:g,tickData:f,primaryTickCount:m,terminate:v})=>this.createTickData(2,g,f,v,m);h.push(p)}if(!o)return h;if(n.autoWrap){const p=({index:g,tickData:f,textProps:m})=>this.wrapLabels(f,g,m);h.push(p)}else if(c){const p=({index:g,tickData:f,labelOverlap:m,terminate:v})=>({index:g,tickData:f,autoRotation:this.getAutoRotation(m),terminate:v});h.push(p)}return h}createTickData(t,i,s,n,a){var r;const{scale:o,tick:l}=this,{maxTickCount:c,minTickCount:h,defaultTickCount:u}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:(r=l.maxSpacing)!=null?r:NaN}),d=wt.is(o),p=!d||isNaN(c)?10:c;let g=d?Math.max(u-i,h):c;const f=l.interval===void 0&&l.values===void 0&&g>h&&(d||t===2);let m=!0;for(;m&&i<=p;){const y=s.rawTicks;g=d?Math.max(u-i,h):c;const{rawTicks:b,ticks:_,labelCount:S}=this.getTicks({tickGenerationType:t,previousTicks:y,tickCount:g,minTickCount:h,maxTickCount:c,primaryTickCount:a});s.rawTicks=b,s.ticks=_,s.labelCount=S,m=f?JI(b,y):!1,i++}const v=l.interval!==void 0||l.values!==void 0;return n||(n=v),{tickData:s,index:i,autoRotation:0,terminate:n}}checkLabelOverlap(t,i,s,n,a,r){ss.updateTransformMatrix(s,1,1,t,0,0);const o=this.createLabelData(n,a,r,s),l=wI(this.label.minSpacing,i);return QI(o,l)}createLabelData(t,i,s,n){const a=[];for(const r of t){const{tickLabel:o,translationY:l}=r;if(o===""||o==null)continue;const c=pb(o),{width:h,height:u}=CI(c,i,l,s),d=new ht(i,l,h,u),p=BI(o,d,i,l,n);a.push(p)}return a}getAutoRotation(t){var i;return t?oe(ri((i=this.label.autoRotateAngle)!=null?i:0)):0}getTicks({tickGenerationType:t,previousTicks:i,tickCount:s,minTickCount:n,maxTickCount:a,primaryTickCount:r}){var o;const{range:l,scale:c,visibleRange:h}=this;let u;switch(t){case 3:if(wt.is(c)){const y=c.getDomain(),b=c.fromDomain(y[0]),_=c.fromDomain(y[1]),S=Math.min(b,_),D=Math.max(b,_);u=this.tick.values.filter(A=>A>=S&&A<=D).sort((A,I)=>A-I)}else u=this.tick.values;break;case 1:u=this.updateSecondaryAxisTicks(r);break;case 2:u=this.filterTicks(i,s);break;default:u=this.createTicks(s,n,a);break}this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0,this.onLabelFormatChange(u,this.label.format);const d=((o=c.bandwidth)!=null?o:0)/2,p=[];let g=0;const f=new Map,m=Math.max(0,Math.floor(h[0]*u.length)),v=Math.min(u.length,Math.ceil(h[1]*u.length));for(let y=m;y<v;y++){const b=u[y],_=c.convert(b)+d;if(l.length>0&&!this.inRange(_,0,.001))continue;const S=this.formatTick(b,y);let D=S;if(f.has(D)){const A=f.get(D);f.set(D,A+1),D=`${D}_${A}`}else f.set(D,1);p.push({tick:b,tickId:D,tickLabel:S,translationY:_}),!(S===""||S==null)&&g++}return{rawTicks:u,ticks:p,labelCount:g}}filterTicks(t,i){var s;const a=!isNaN(this.tick.minSpacing)||!isNaN((s=this.tick.maxSpacing)!=null?s:NaN)?Math.ceil(t.length/i):2;return t.filter((r,o)=>o%a===0)}createTicks(t,i,s){var n,a,r;return this.setTickCount(t,i,s),(r=(a=(n=this.scale).ticks)==null?void 0:a.call(n))!=null?r:[]}estimateTickCount({minSpacing:t,maxSpacing:i}){const{minRect:s}=this,n=this.calculateRangeWithBleed(),a=Math.max(this.defaultTickMinSpacing,n/wt.defaultMaxTickCount);let r=!isNaN(i);isNaN(t)&&(t=a),isNaN(i)&&(i=n),t>i&&(t===a?t=i:i=t);const o=s?this.direction==="x"?s.width:s.height:1;r&&(r=o<a);const l=It(1,Math.floor(n/t),r?Math.floor(n/o):1/0),c=Math.min(l,Math.ceil(n/i)),h=It(c,wt.defaultTickCount,l);return{minTickCount:c,maxTickCount:l,defaultTickCount:h}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:i,regularFlipRotation:s}){var n;const a=this.label.getSideFlag(),r=this.isAnySeriesActive();(n=this.crossLines)==null||n.forEach(o=>{var l;o.sideFlag=-a,o.direction=t===-Math.PI/2?"x":"y",o instanceof Uu&&(o.label.parallel=(l=o.label.parallel)!=null?l:this.label.parallel),o.parallelFlipRotation=i,o.regularFlipRotation=s,o.update(r)})}updateTickLines(){const{tick:t,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=t.width,n.stroke=t.color,n.x1=s*this.getTickSize(),n.x2=0})}calculateAvailableRange(){return So(this.range)}calculateRangeWithBleed(){const t=1/So(this.visibleRange);return Kg(this.calculateAvailableRange()*t,2)}calculateDomain(){const i=this.boundSeries.filter(s=>this.includeInvisibleDomains||s.isEnabled()).flatMap(s=>s.getDomain(this.direction));this.setDomain(i)}getAxisTransform(){return{rotation:ri(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:t,axisGroup:i,gridGroup:s,translation:n,gridLineGroupSelection:a,gridPadding:r,gridLength:o}=this,{rotation:l}=this.calculateRotations(),c=this.label.getSideFlag(),h=Math.floor(n.x),u=Math.floor(n.y);t.setProperties({rotation:l,translationX:h,translationY:u}),s.setProperties({rotation:l,translationX:h,translationY:u}),i.datum=this.getAxisTransform(),a.each(d=>{d.x1=r,d.x2=-c*o+r})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,i,s){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?i:[],n=>n.append(new be({tag:2})),n=>n.tickId),this.tickLineGroupSelection.update(i,n=>n.appendChild(new be({tag:0})),n=>n.tickId),this.tickLabelGroupSelection.update(i.map(n=>this.getTickLabelProps(n,s)),n=>n.appendChild(new Dt({tag:1})),n=>n.tickId)}updateAxisLine(){const{line:t}=this,i=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:i})}updateGridLines(t){const{gridLine:{style:i,width:s},gridPadding:n,gridLength:a}=this;a===0||i.length===0||this.gridLineGroupSelection.each((r,o,l)=>{const{stroke:c,lineDash:h}=i[l%i.length];r.setProperties({x1:n,x2:-t*a+n,fill:void 0,stroke:c,strokeWidth:s,lineDash:h})})}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each((i,s)=>{i.setProperties(s,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(t,i,s){const{parallel:n,maxWidth:a,maxHeight:r}=this.label;let o=this.maxThickness,l=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([o,l]=[l,o]),t.ticks.forEach(c=>{const{text:h}=Dt.wrap(c.tickLabel,a??o,r??l,s,"hyphenate");c.tickLabel=h}),{tickData:t,index:i,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:i,title:s,_titleCaption:n,lineNode:a,tickLineGroup:r,tickLabelGroup:o}=this;if(!s){n.enabled=!1;return}let l=0;if(s.enabled&&t.anyTickVisible){const c=et.computeBBox([r,o,a]),h=i===0?c.width:c.height;l+=h+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(n,{spacing:l})}formatTick(t,i){var s,n;const{label:a,labelFormatter:r,fractionDigits:o,moduleCtx:{callbackCache:l}}=this;if(a.formatter){const c=o>0?t:String(t);return(s=l.call(a.formatter,{value:c,index:i,fractionDigits:o,formatter:r}))!=null?s:c}else if(r)return(n=l.call(r,t))!=null?n:String(t);return String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,i,s,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new ht(t,i,s,n))}clipGrid(t,i,s,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new ht(t,i,s,n))}calculatePadding(t,i,s){const n=Math.abs(s?i:t)*.01;return[n,n]}getTitleFormatterParams(){var t;const i=this.boundSeries.reduce((s,n)=>{const a=n.getKeys(this.direction),r=n.getNames(this.direction);for(let o=0;o<a.length;o++)s.push({key:a[o],name:r[o]});return s},[]);return{direction:this.direction,boundSeries:i,defaultValue:(t=this.title)==null?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return R({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize()},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return(t=this.axisContext)!=null||(this.axisContext=this.createAxisContext()),Z(R({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:wt.is(this.scale),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),scaleValueFormatter:t=>{var i,s;return(s=(i=this.scale).tickFormat)==null?void 0:s.call(i,{specifier:t})},scaleBandwidth:()=>{var t;return(t=this.scale.bandwidth)!=null?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var i,s;return(s=(i=this.scale).invert)==null?void 0:s.call(i,t)}}}animateReadyUpdate(t){const{animationManager:i}=this.moduleCtx,s=Hf(this),n=qb(s);Xt(this.id,"axis-group",i,[this.axisGroup],n.group),Xt(this.id,"line",i,[this.lineNode],n.line),Xt(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(a,r)=>r.tickId,t),Xt(this.id,"tick-labels",i,[this.tickLabelGroupSelection],n.label,(a,r)=>r.tickId,t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:i,tickLabelGroupSelection:s,lineNode:n}=this,a=Hf(this);Ee([this.axisGroup],Zb()),Ee([t,i],Qb(a)),Ee([s],Jb()),Ee([n],tS())}calculateUpdateDiff(t,i){const s=new Set,n=new Set,a={},r=Math.max(t.length,i.ticks.length);for(let o=0;o<r;o++){const l=i.ticks[o],c=t[o],h=l?.tickId;a[h??c]=l,c!==h&&(n.has(h)?n.delete(h):h&&s.add(h),s.has(c)?s.delete(c):c&&n.add(c))}return{changed:s.size>0||n.size>0,added:Array.from(s.values()),removed:Array.from(n.values())}}isReversed(){return this.reverse}},ba.defaultTickMinSpacing=50,x([M(rt)],ba.prototype,"nice",2),x([M(rt)],ba.prototype,"reverse",2),x([M(uf)],ba.prototype,"keys",2),x([M(Ft(e=>typeof e=="object","Title object"),{optional:!0})],ba.prototype,"title",2),x([To((e,t,i)=>e.onGridLengthChange(t,i))],ba.prototype,"gridLength",2),$u=ba}}),qu,sE=L({"packages/ag-charts-community/src/chart/axis/cartesianAxisLabel.ts"(){"use strict";pt(),Ku(),qu=class extends ue{constructor(){super(...arguments),this.autoRotateAngle=335}},x([M(rt,{optional:!0})],qu.prototype,"autoRotate",2),x([M(_n)],qu.prototype,"autoRotateAngle",2)}}),Zu,Fo,vc=L({"packages/ag-charts-community/src/chart/axis/cartesianAxis.ts"(){"use strict";pt(),ie(),Sf(),Tb(),jf(),sE(),Zu=class g2 extends $u{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(t){return t instanceof g2}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t,i){return this.updateDirection(),super.update(t,i)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Z(R({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){mb(t,Uu)}createLabel(){return new qu}},x([M(K)],Zu.prototype,"thickness",2),x([M(Tu)],Zu.prototype,"position",2),Fo=Zu}}),tn,xc=L({"packages/ag-charts-community/src/chart/axis/categoryAxis.ts"(){"use strict";ko(),pt(),vc(),tn=class extends Fo{constructor(e){super(e,new Es),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(e){this.scale.paddingOuter=e}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(e){const t=[],i=new Set;for(const s of e){const n=s instanceof Date?s.getTime():s;i.has(n)||(i.add(n),t.push(s))}return{domain:t,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const e=this.boundSeries.map(t=>{var i;return(i=t.getBandScalePadding)==null?void 0:i.call(t)}).filter(t=>t!=null);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}},tn.className="CategoryAxis",tn.type="category",x([M(Ct)],tn.prototype,"groupPaddingInner",2)}});function nE(e,t=!0){const i=new Xf;let s=0;return t&&e.forEach(n=>s=Math.max(s,n.labels.length)),e.forEach(n=>{if(t)for(;n.labels.length<s;)n.labels.unshift("");aE(i,n)}),i}function aE(e,t){const i=t.labels.slice().reverse(),s=i.length-1;i.forEach((n,a)=>{const r=e.children,o=r.find(c=>c.label===n),l=a!==s;if(o&&l)e=o;else{const c=new Xf(n,e);c.number=r.length,r.push(c),l&&(e=c)}})}function rE(e,t,i){const s=t.number-e.number,n=i/s;t.change-=n,t.shift+=i,e.change+=n,t.prelim+=i,t.mod+=i}function oE(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function lE(e){const t=e.children;if(t){let i=0,s=0;for(let n=t.length-1;n>=0;n--){const a=t[n];a.prelim+=i,a.mod+=i,s+=a.change,i+=a.shift+s}}}function cE(e,t,i){const s=e.getLeftSibling();if(s){let n=e,a=e,r=s,o=a.getLeftmostSibling(),l=a.mod,c=n.mod,h=r.mod,u=o.mod;for(;r.nextRight()&&a.nextLeft();){r=r.nextRight(),a=a.nextLeft(),o=o.nextLeft(),n=n.nextRight(),n.ancestor=e;const d=r.prelim+h-(a.prelim+l)+i;d>0&&(rE(oE(r,e,t),e,d),l+=d,c+=d),h+=r.mod,l+=a.mod,u+=o.mod,c+=n.mod}r.nextRight()&&!n.nextRight()?(n.thread=r.nextRight(),n.mod+=h-c):(a.nextLeft()&&!o.nextLeft()&&(o.thread=a.nextLeft(),o.mod+=l-u),t=e)}return t}function sS(e,t){const i=e.children;if(i.length){let s=i[0];i.forEach(r=>{sS(r,t),s=cE(r,s,t)}),lE(e);const n=(i[0].prelim+i.at(-1).prelim)/2,a=e.getLeftSibling();a?(e.prelim=a.prelim+t,e.mod=e.prelim-n):e.prelim=n}else{const s=e.getLeftSibling();e.prelim=s?s.prelim+t:0}}function nS(e,t,i){e.x=e.prelim+t,e.y=e.depth,i.update(e),e.children.forEach(s=>nS(s,t+e.mod,i))}function aS(e){const t=e.children;let i=0;t.forEach(s=>{aS(s),s.children.length?i+=s.leafCount:i++}),e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function hE(e){const t=new rS;return sS(e,1),nS(e,-e.prelim,t),aS(e),t}var Xf,$f,rS,uE=L({"packages/ag-charts-community/src/chart/axis/tree.ts"(){"use strict";Xf=class{constructor(e="",t,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=e,this.parent=t,this.depth=t?t.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((e,t)=>t!==this.number):[]}},$f=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){const{x:i,y:s}=t(e);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}},rS=class{constructor(){this.dimensions=new $f,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(e){this.dimensions.update(e,t=>({x:t.x,y:t.y})),e.children.length?this.nonLeafNodes.push(e):(this.leafCount++,this.leafNodes.push(e)),e.depth>this.depth&&(this.depth=e.depth),this.nodes.push(e)}resize(e,t,i=0,s=0,n=!1){const a=this.leafCount-1,r=this.depth,o=this.dimensions;let l=1,c=1;if(e>0&&a){const p=(o.right-o.left)/a;l=e/a/p,n&&(l=-l)}if(t>0&&r){const p=(o.bottom-o.top)/r;c=t/r/p}const h=new $f;this.nodes.forEach(p=>{p.screenX=p.x*l,p.screenY=p.y*c,h.update(p,g=>({x:g.screenX,y:g.screenY}))});const u=-h.left,d=-h.top;this.nodes.forEach(p=>{p.screenX+=u+i,p.screenY+=d+s})}}}}),qf,Ln,Qu=L({"packages/ag-charts-community/src/chart/axis/groupedCategoryAxis.ts"(){"use strict";ko(),Kt(),Xg(),xa(),pr(),fi(),Mi(),ni(),Ut(),pt(),ie(),as(),Ku(),Xb(),vc(),uE(),qf=class extends ue{constructor(){super(...arguments),this.grid=!1}},x([M(rt)],qf.prototype,"grid",2),Ln=class extends Fo{constructor(e){super(e,new Es),this.tickScale=new Es,this.line=new Bo,this.label=new qf,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:t,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:a}=this;a.paddingOuter=.1,a.paddingInner=a.paddingOuter*2,this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=jt.select(s,be),this.axisLineSelection=jt.select(t,be),this.separatorSelection=jt.select(t,be),this.labelSelection=jt.select(i,Dt)}updateRange(){const{range:e,visibleRange:t,scale:i}=this,s=(e[1]-e[0])/(t[1]-t[0]),n=s*t[0],a=e[0]-n;this.tickScale.range=i.range=[a,a+s],this.resizeTickTree()}resizeTickTree(){var e;const t=this.scale,i=t.domain.length?[t.convert(t.domain[0]),t.convert(t.domain[t.domain.length-1])]:t.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+((e=t.bandwidth)!=null?e:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return this.label.fontSize*1.5}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){var e;const{direction:t}=this;let i=null;const s=this.boundSeries.filter(a=>a.visible).flatMap(a=>{if(t==="y"||i)return a.getDomain(t);if(i===null){const r=a.getDomain(t);return i=Ds(r[0]),r}return[]});this.setDomain((e=js(s))!=null?e:Fg(s));const{domain:n}=this.dataDomain;this.tickTreeLayout=hE(nE(n)),this.tickScale.domain=n.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:e}=this;e.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:e}=this.computedLayout;this.labelSelection.update(e).each((i,s)=>{i.setProperties(s)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:e}=this.computedLayout,{range:t}=this,i=1e-7;this.separatorSelection.update(e).each((n,a)=>{n.x1=a.x1,n.x2=a.x2,n.y1=a.y,n.y2=a.y,n.visible=a.y>=t[0]-i&&a.y<=t[1]+i,n.stroke=this.tick.color,n.fill=void 0,n.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:e}=this.computedLayout;this.axisLineSelection.update(e).each((i,s)=>{i.setProperties(Z(R({},s),{stroke:this.line.color,strokeWidth:this.line.width})),i.x1=s.x,i.x2=s.x,i.y1=s.y1,i.y2=s.y2,i.strokeWidth=this.line.width,i.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:e,gridLine:t,label:i,range:s,tickScale:n}=this,a=n.ticks(),r=i.getSideFlag(),o=this.gridLineSelection.update(e?a:[]);if(e){const{width:l,style:c}=t,h=c.length;o.each((u,d,p)=>{const g=Math.round(n.convert(d));u.x1=0,u.x2=-r*e,u.y1=g,u.y2=g,u.visible=g>=s[0]&&g<=s[1];const{stroke:f,lineDash:m}=c[p%h];u.stroke=f,u.strokeWidth=l,u.lineDash=m,u.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:t,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:a,title:{formatter:r=H=>H.defaultValue}={}}=this,o=e.range[0],l=e.range[1],h=Math.abs(l-o)/e.domain.length||0,u=Math.ceil(t.fontSize/h),d=ri(this.rotation),p=Math.abs(Math.cos(d))<1e-8,g=t.getSideFlag(),f=this.lineHeight,m=this.tickTreeLayout,v=e.ticks(),y=m?m.nodes:[],b=m?m.depth>1:!1,{defaultRotation:_,configuredRotation:S,parallelFlipFlag:D}=Bu({rotation:t.rotation,parallel:i,regularFlipRotation:oe(d-Math.PI/2),parallelFlipRotation:oe(d)}),A=[],I=H=>({fill:H.fill,fontFamily:H.fontFamily,fontSize:H.fontSize,fontStyle:H.fontStyle,fontWeight:H.fontWeight,rotation:H.rotation,rotationCenterX:H.rotationCenterX,rotationCenterY:H.rotationCenterY,text:H.text,textAlign:H.textAlign,textBaseline:H.textBaseline,translationX:H.translationX,translationY:H.translationY,visible:H.visible,x:H.x,y:H.y}),T=new Map;let E=0;const C=new Dt,O=(H,at)=>{var ut;if(C.setProperties({fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textAlign:"center",textBaseline:D===-1?"bottom":"hanging",translationX:H.screenY-t.fontSize*.25,translationY:H.screenX}),at===0){if(!(a?.enabled&&v.length>0))return!1;const dt=s.call(r,this.getTitleFormatterParams());C.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:dt,textBaseline:"hanging",translationX:H.screenY-t.fontSize*.25,translationY:H.screenX})}else{if(at%u!==0)return!1;if(!(H.screenX>=n[0]&&H.screenX<=n[1]))return!1;t.formatter?C.text=(ut=s.call(t.formatter,{value:String(H.label),index:at}))!=null?ut:String(H.label):C.text=String(H.label)}return!0};y.forEach((H,at)=>{if(!O(H,at))return;const ct=C.computeTransformedBBox();if(!ct)return;T.set(at,ct),!H.children.length&&ct.width>E&&(E=ct.width)});const N=g*t.padding,w=this.label.grid,U=[];y.forEach((H,at)=>{let ut=O(H,at);const ct=at;C.x=N,C.rotationCenterX=N;const dt=!H.children.length;if(dt)C.rotation=S,C.textAlign="end",C.textBaseline="middle";else{C.translationX-=E-f+this.label.padding;const yt=H.leafCount*h,xt=T.get(ct);xt&&xt.width>yt?(ut=!1,T.delete(ct)):p?C.rotation=_:C.rotation=-Math.PI/2}if(H.parent&&b){const yt=dt?H.screenX-h/2:H.screenX-H.leafCount*h/2;if(dt)(H.number!==H.children.length-1||w)&&U.push({y:yt,x1:0,x2:-E-this.label.padding*2});else{const xt=-E-this.label.padding*2+H.screenY;U.push({y:yt,x1:xt+f,x2:xt})}}let ot;if(ut){const yt=C.computeTransformedBBox();yt&&T.set(at,yt),ot=Z(R({},I(C)),{visible:ut})}else T.delete(at),ot={visible:ut};A.push(ot)});let G=0;U.forEach(H=>G=Math.min(G,H.x2)),U.push({y:Math.max(o,l),x1:0,x2:G});const F=[],P=[],j=1e-7;U.forEach(H=>{if(H.y>=n[0]-j&&H.y<=n[1]+j){const{x1:at,x2:ut,y:ct}=H,dt=new ht(Math.min(at,ut),ct,Math.abs(at-ut),0);P.push(dt),F.push({x1:at,x2:ut,y:ct})}});const z=[],q=[],tt=m?m.depth+1:1;for(let H=0;H<tt;H++){const at=v.length>0&&(H===0||w&&b),ut=H>0?-E-this.label.padding*2-(H-1)*f:0,ct=new ht(ut,Math.min(...n),0,Math.abs(n[1]-n[0]));q.push(ct),z.push({x:ut,y1:n[0],y2:n[1],visible:at})}const it=H=>{const at=new ss,{rotation:ut,translationX:ct,translationY:dt,rotationCenterX:ot,rotationCenterY:yt}=this.getAxisTransform();return ss.updateTransformMatrix(at,1,1,ut,ct,dt,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:ot,rotationCenterY:yt}),at.transformBBox(H)},st=ht.merge([...T.values(),...P,...q]);return{bbox:it(st),tickLabelLayout:A,separatorLayout:F,axisLineLayout:z}}calculateLayout(){const{axisLineLayout:e,separatorLayout:t,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:e,separatorLayout:t,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}},Ln.className="GroupedCategoryAxis",Ln.type="grouped-category",x([M(kt,{optional:!0})],Ln.prototype,"labelColor",2)}}),Zf,dE=L({"packages/ag-charts-community/src/scene/canvas/hdpiOffscreenCanvas.ts"(){"use strict";rb(),Dn(),Zf=class{constructor({width:e=600,height:t=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(e,t),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(e,t)}static isSupported(){return typeof OffscreenCanvas<"u"&&OffscreenCanvas.prototype.transferToImageBitmap!=null}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=e??window.devicePixelRatio;return ab()&&(t=1),this._pixelRatio=t,se.overrideScale(this.realContext,t)}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.resetTransform(),this._width=e,this._height=t}}}}),Ju,td,ed,oS=L({"packages/ag-charts-community/src/scene/scene.ts"(){"use strict";ni(),xb(),Fi(),Ls(),gt(),F0(),Dn(),dE(),xe(),ee(),Ju="adv-composite",td="dom-composite",ed=class{constructor(e){this.id=Xs(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=te.create(!0,"scene");var t;const{document:i,window:s,mode:n=(t=Vg("agChartsSceneRenderModel"))!=null?t:Ju,width:a,height:r,overrideDevicePixelRatio:o=void 0}=e;this.overrideDevicePixelRatio=o,this.opts={document:i,window:s,mode:n},this.canvas=new se({document:i,window:s,width:a,height:r,overrideDevicePixelRatio:o})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,t){this.canvas.download(e,t)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,t){e=Math.round(e),t=Math.round(t);const i=e<=0||t<=0,s=isNaN(e)||isNaN(t);return e===this.width&&t===this.height||s||i?!1:(this.pendingSize=[e,t],this.markDirty(),!0)}addLayer(e){var t;const{mode:i}=this.opts;if(!["composite",td,Ju].includes(i))return;const{zIndex:n=this._nextZIndex++,name:a,zIndexSubOrder:r,getComputedOpacity:o,getVisibility:l}=e,{width:c,height:h,overrideDevicePixelRatio:u}=this,d=i===td,g=!(i===Ju)||!Zf.isSupported()?new se({document:this.opts.document,window:this.opts.window,width:c,height:h,domLayer:d,zIndex:n,name:a,overrideDevicePixelRatio:u}):new Zf({width:c,height:h,overrideDevicePixelRatio:u}),f={id:this._nextLayerId++,name:a,zIndex:n,zIndexSubOrder:r,canvas:g,getComputedOpacity:o,getVisibility:l};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(f),this.sortLayers(),d){const m=this.layers.map(b=>b.canvas).filter(b=>b instanceof se),v=m.findIndex(b=>b===g);((t=m[v-1])!=null?t:this.canvas).element.insertAdjacentElement("afterend",g.element)}return this.debug("Scene.addLayer() - layers",this.layers),f.canvas}removeLayer(e){const t=this.layers.findIndex(i=>i.canvas===e);t>=0&&(this.layers.splice(t,1),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(e,t,i){const s=this.layers.find(n=>n.canvas===e);s&&(s.zIndex=t,s.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((e,t)=>{var i,s;return vb([e.zIndex,...(i=e.zIndexSubOrder)!=null?i:[void 0,void 0],e.id],[t.zIndex,...(s=t.zIndexSubOrder)!=null?s:[void 0,void 0],t.id],yb)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){var t;e!==this._root&&((t=this._root)==null||t._setLayerManager(),this._root=e,e&&e._setLayerManager({addLayer:i=>this.addLayer(i),moveLayer:(...i)=>this.moveLayer(...i),removeLayer:(...i)=>this.removeLayer(...i),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:te.create("scene")}),this.markDirty())}get root(){return this._root}strip(){const{layers:e}=this;for(const t of e)t.canvas.destroy(),delete t.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){return B(this,null,function*(){var t,i;const{debugSplitTimes:s={start:performance.now()},extraDebugStats:n={}}=e??{},{canvas:a,canvas:{context:r},root:o,layers:l,pendingSize:c,opts:{mode:h}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach(p=>p.canvas.resize(...c)),this.pendingSize=void 0),o&&!o.visible){this._dirty=!1;return}if(o&&!this.dirty){this.debug("Scene.render() - no-op",{redrawType:bn[o.dirty],tree:this.buildTree(o)}),this.debugStats(s,r,void 0,n);return}const u={ctx:r,devicePixelRatio:(t=this.canvas.pixelRatio)!=null?t:1,forceRender:!0,resized:!!c,debugNodes:{}};te.check("scene:stats:verbose")&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!o||o.dirty>=1)&&(d=!0,a.clear()),o&&te.check("scene:dirtyTree")){const{dirtyTree:p,paths:g}=this.buildDirtyTree(o);te.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:p,paths:g})}o&&d&&(this.debug("Scene.render() - before",{redrawType:bn[o.dirty],canvasCleared:d,tree:this.buildTree(o)}),o.visible&&(r.save(),o.render(u),r.restore())),s["\u270D\uFE0F"]=performance.now(),h!==td&&l.length>0&&d&&(this.sortLayers(),r.save(),r.setTransform(1/a.pixelRatio,0,0,1/a.pixelRatio,0,0),l.forEach(({canvas:{imageSource:p,enabled:g},getComputedOpacity:f,getVisibility:m})=>{!g||!m()||(r.globalAlpha=f(),r.drawImage(p,0,0))}),r.restore(),s["\u26D9"]=performance.now()),(i=r.verifyDepthZero)==null||i.call(r),this._dirty=!1,this.debugStats(s,r,u.stats,n),this.debugSceneNodeHighlight(r,u.debugNodes),o&&this.debug("Scene.render() - after",{redrawType:bn[o.dirty],canvasCleared:d,tree:this.buildTree(o)})})}debugStats(e,t,i,s={}){if(te.check("scene:stats","scene:stats:verbose")){const n=performance.now(),a=e.start;e.end=performance.now();const r=(S,D)=>{const A=S+D;return`${S} / ${A} (${Math.round(100*S/A)}%)`},o=(S,D,A)=>`${S}: ${Math.round((A-D)*100)/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:h=0,nodesSkipped:u=0}=i??{};let d=0;const p=Object.entries(e).filter(([S])=>S!=="end").map(([S,D],A)=>{const I=A>0?o(S,d,D):null;return d=D,I}).filter(S=>S!=null).join(" + "),g=Object.entries(s).map(([S,D])=>`${S}: ${D}`).join(" ; "),f=te.check("scene:stats:verbose"),v=[`${o("\u23F1\uFE0F",a,n)} (${p})`,`${g}`,`Layers: ${f?r(l,c):this.layers.length}`,f?`Nodes: ${r(h,u)}`:null].filter(S=>S!=null).map(S=>[S,se.getTextSize(S,t.font)]),y=Math.max(...v.map(([,{width:S}])=>S)),b=v.reduce((S,[,{height:D}])=>S+D,0);t.save(),t.fillStyle="white",t.fillRect(0,0,y,b),t.fillStyle="black";let _=0;for(const[S,D]of v)_+=D.height,t.fillText(S,2,_);t.restore()}}debugSceneNodeHighlight(e,t){var i;const s=r=>o=>r.test(o.id)?!0:o instanceof et&&o.name!=null&&r.test(o.name),n=r=>o=>r===o.id?!0:o instanceof et&&o.name!=null&&r===o.name,a=uu(Vg("agChartsSceneDebug")).flatMap(r=>r==="layout"?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:r);for(const r of a){if(typeof r=="string"&&t[r]!=null)continue;const o=typeof r=="string"?n(r):s(r),l=(i=this.root)==null?void 0:i.findNodes(o);if(!l||l.length===0){$.log(`Scene.render() - no debugging node with id [${r}] in scene graph.`);continue}for(const c of l)c instanceof et&&c.name?t[c.name]=c:t[c.id]=c}e.save();for(const[r,o]of Object.entries(t)){const l=o.computeTransformedBBox();if(!l){$.log(`Scene.render() - no bbox for debugged node [${r}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(l.x,l.y,l.width,l.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(r,l.x,l.y,l.width),e.fillText(r,l.x,l.y,l.width)}e.restore()}buildTree(e){var t,i;const s=(t=e instanceof et?e.name:null)!=null?t:e.id;return this.debug.check()?R(R({name:s,node:e,dirty:bn[e.dirty]},(i=e.parent)!=null&&i.isVirtual?{virtualParentDirty:bn[e.parent.dirty],virtualParent:e.parent}:{}),e.children.map(n=>this.buildTree(n)).reduce((n,a)=>{let{name:r}=a;const{node:{visible:o,opacity:l,zIndex:c,zIndexSubOrder:h},node:u,virtualParent:d}=a;(!o||l<=0)&&(r=`(${r})`),u instanceof et&&u.isLayer()&&(r=`*${r}*`);const p=[`${r??"<unknown>"}`,`z: ${c}`,h&&`zo: ${h.map(m=>typeof m=="function"?`${m()} (fn)`:m).join(" / ")}`,d&&"(virtual parent)"].filter(m=>!!m).join(" ");let g=p,f=1;for(;n[g]!=null&&f<100;)g=`${p} (${f++})`;return n[g]=a,n},{})):{}}buildDirtyTree(e){var t;if(e.dirty===0)return{dirtyTree:{},paths:[]};const i=e.children.map(a=>this.buildDirtyTree(a)).filter(a=>a.paths.length>0),s=(t=e instanceof et?e.name:null)!=null?t:e.id,n=i.length===0?[s]:i.map(a=>a.paths).reduce((a,r)=>a.concat(r),[]).map(a=>`${s}.${a}`);return{dirtyTree:R({name:s,node:e,dirty:bn[e.dirty]},i.map(a=>a.dirtyTree).filter(a=>a.dirty!==void 0).reduce((a,r)=>{var o;return a[(o=r.name)!=null?o:"<unknown>"]=r,a},{})),paths:n}}},ed.className="Scene"}});function pE(e){return new Promise(t=>{setTimeout(()=>t(void 0),e)})}var gE=L({"packages/ag-charts-community/src/util/async.ts"(){"use strict"}}),lS,fE=L({"packages/ag-charts-community/src/util/callbackCache.ts"(){"use strict";gt(),lS=class{constructor(){this.cache=new WeakMap}call(e,...t){let i,s=this.cache.get(e);const n=()=>{try{const a=e(...t);return s&&i!=null&&s.set(i,a),a}catch(a){$.warnOnce("User callback errored, ignoring",a);return}};try{i=JSON.stringify(t)}catch{return n()}return s==null&&(s=new Map,this.cache.set(e,s)),s.has(i)?s.get(i):n()}invalidateCache(){this.cache=new WeakMap}}}}),cS,mE=L({"packages/ag-charts-community/src/util/mutex.ts"(){"use strict";gt(),cS=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext()})}acquireImmediately(e){return B(this,null,function*(){return this.available?(yield this.acquire(e),!0):!1})}waitForClearAcquireQueue(){return B(this,null,function*(){return this.acquire(()=>B(this,null,function*(){}))})}dispatchNext(){return B(this,null,function*(){var e,t;this.available=!1;let[i,s]=(e=this.acquireQueue.shift())!=null?e:[];for(;i;){try{yield i(),s?.()}catch(n){$.error("mutex callback error",n),s?.()}[i,s]=(t=this.acquireQueue.shift())!=null?t:[]}this.available=!0})}}}}),Qf,hS=L({"packages/ag-charts-community/src/util/observable.ts"(){"use strict";Qf=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){var i;(i=this.eventListeners.get(e))==null||i.delete(t),this.eventListeners.size===0&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){var t;(t=this.eventListeners.get(e.type))==null||t.forEach(i=>i(e))}}}}),Tn,Jf=L({"packages/ag-charts-community/src/util/padding.ts"(){"use strict";di(),pt(),Tn=class extends Rt{constructor(e=0,t=e,i=e,s=t){super(),this.top=e,this.right=t,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}},x([M(K)],Tn.prototype,"top",2),x([M(K)],Tn.prototype,"right",2),x([M(K)],Tn.prototype,"bottom",2),x([M(K)],Tn.prototype,"left",2)}});function yE(e){return uS((t,i)=>requestAnimationFrame(t),e)}function vE(e){return uS((t,i=0)=>setTimeout(t,i),e)}function uS(e,t){let i=0,s=!1,n,a;const r=()=>s,o=()=>{s=!1,a?.(),a=void 0,n=void 0,i>0&&e(l)},l=()=>{const c=i;i=0,s=!0;const h=t({count:c});if(!h){o();return}h.then(o,o)};return{schedule(c){i===0&&!r()&&e(l,c),i++},await(){return B(this,null,function*(){if(r())for(n==null&&(n=new Promise(c=>{a=c}));r();)yield n})}}}var xE=L({"packages/ag-charts-community/src/util/render.ts"(){"use strict"}}),Yi,tm,bE=L({"packages/ag-charts-community/src/util/sizeMonitor.ts"(){"use strict";Yi=class{static init(t){if(typeof ResizeObserver>"u"){for(const[i,s]of this.elements)this.checkClientSize(i,s);return}this.resizeObserver=new ResizeObserver(i=>{for(const s of i){const{width:n,height:a}=s.contentRect;this.checkSize(this.elements.get(s.target),s.target,n,a)}}),this.ownerDocument=t,this.ready=!0,this.documentReady=t.readyState!=="loading",this.documentReady||t.addEventListener("DOMContentLoaded",this.onContentLoaded)}static destroy(){var t,i;(t=this.ownerDocument)==null||t.removeEventListener("DOMContentLoaded",this.onContentLoaded),(i=this.resizeObserver)==null||i.disconnect(),delete this.resizeObserver,delete this.ownerDocument,this.ready=!1}static checkSize(t,i,s,n){var a,r;t&&(s!==((a=t.size)==null?void 0:a.width)||n!==((r=t.size)==null?void 0:r.height))&&(t.size={width:s,height:n},t.cb(t.size,i))}static observe(t,i){var s;if(this.ready||this.init(t.ownerDocument),!this.documentReady){this.queuedObserveRequests.push([t,i]);return}this.elements.has(t)?this.removeFromQueue(t):(s=this.resizeObserver)==null||s.observe(t),this.elements.set(t,{cb:i})}static unobserve(t){var i;(i=this.resizeObserver)==null||i.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}static removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([i])=>i!==t)}static checkClientSize(t,i){var s,n;const a=(s=t.clientWidth)!=null?s:0,r=(n=t.clientHeight)!=null?n:0;this.checkSize(i,t,a,r)}},Yi.elements=new Map,Yi.ready=!1,Yi.documentReady=!1,Yi.queuedObserveRequests=[],Yi.onContentLoaded=()=>{var e;const t=((e=Yi.ownerDocument)==null?void 0:e.readyState)!=="loading",i=Yi.documentReady;Yi.documentReady=t,t&&t!==i&&(Yi.queuedObserveRequests.forEach(([s,n])=>Yi.observe(s,n)),Yi.queuedObserveRequests=[])},tm=Yi}}),em,SE=L({"packages/ag-charts-community/src/chart/chartHighlight.ts"(){"use strict";pt(),em=class{constructor(){this.range="tooltip"}},x([M(le(["tooltip","node"],"a range"))],em.prototype,"range",2)}}),zo,gr=L({"packages/ag-charts-community/src/chart/chartUpdateType.ts"(){"use strict";zo=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(zo||{})}}),id,_E=L({"packages/ag-charts-community/src/chart/data/dataDomain.ts"(){"use strict";id=class{constructor(e){this.type=e,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(e){this.type==="discrete"?this.discreteDomain.add(e):this.type==="continuous"&&(this.continuousDomain[0]>e&&(this.continuousDomain[0]=e),this.continuousDomain[1]<e&&(this.continuousDomain[1]=e))}getDomain(){if(this.type==="discrete")return this.discreteDomain;if(this.type==="continuous")return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}}});function bc(e,t=[1/0,-1/0]){for(const i of e)typeof i=="number"&&(i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i));return t}var dS=L({"packages/ag-charts-community/src/chart/data/utilFunctions.ts"(){"use strict"}});function ME(e){return e.map(t=>Ws(t)?JSON.stringify(t):t).join("-")}function kE(e){return Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(e*1e4)/1e4}function DE(e){if(e===void 0)return[];let[t,i]=e;return t=Number(t),i=Number(i),t===0&&i===0?[0,1]:t===1/0&&i===-1/0?[]:(t===1/0&&(t=0),i===-1/0&&(i=0),Et(t)&&Et(i)?[t,i]:[])}function mi(e,t){var i;const s=DE(e);if(s.length===0)return s;let[n,a]=s;if(n===a){const[r,o]=(i=t?.calculatePadding(n,a,t.isReversed()))!=null?i:[1,1];n-=r,a+=o}return[n,a]}function pS(){return new Map([[void 0,0]])}function im(e,t){var i;return t===void 0?0:(i=t.get(e.id))!=null?i:0}function AE(e){var t,i;const s=(n,a)=>{a.length>0&&($.log(`DataModel.processData() - ${n}`),$.table(a))};if($.log("DataModel.processData() - processedData",e),s("Key Domains",e.domain.keys),s("Group Domains",(t=e.domain.groups)!=null?t:[]),s("Value Domains",e.domain.values),s("Aggregate Domains",(i=e.domain.aggValues)!=null?i:[]),e.type==="grouped"){const n=e.data.reduce((a,r)=>{var o,l;const c=(o=r.keys)!=null?o:[],h=(l=r.aggValues)!=null?l:[],u=r.keys.map(()=>{}),d=h?.map(()=>{});return a.push(...r.values.map((p,g)=>[...g===0?c:u,...p??[],...g==0?h:d])),a},[]);s("Values",n)}else{const n=e.data.reduce((a,r)=>{var o;const l=(o=r.aggValues)!=null?o:[];return a.push([...r.keys,...r.values,...l]),a},[]);s("Values",n)}}var Sa,sm,en=L({"packages/ag-charts-community/src/chart/data/dataModel.ts"(){"use strict";Fi(),gt(),Ot(),Ut(),_E(),dS(),Sa=Symbol("invalid"),sm=class{constructor(e){this.debug=te.create(!0,"data-model");const{props:t,mode:i="standalone"}=e;this.mode=i;let s=!0;for(const r of t){if(r.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&s&&(s=!1)}this.opts=R({dataVisible:!0},e),this.keys=t.filter(r=>r.type==="key").map((r,o)=>Z(R({},r),{index:o,missing:pS()})),this.values=t.filter(r=>r.type==="value").map((r,o)=>Z(R({},r),{index:o,missing:pS()})),this.aggregates=t.filter(r=>r.type==="aggregate").map((r,o)=>Z(R({},r),{index:o})),this.groupProcessors=t.filter(r=>r.type==="group-value-processor").map((r,o)=>Z(R({},r),{index:o})),this.propertyProcessors=t.filter(r=>r.type==="property-value-processor").map((r,o)=>Z(R({},r),{index:o})),this.reducers=t.filter(r=>r.type==="reducer").map((r,o)=>Z(R({},r),{index:o})),this.processors=t.filter(r=>r.type==="processor").map((r,o)=>Z(R({},r),{index:o}));for(const r of this.values)if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);const n=({matchGroupIds:r})=>{for(const o of r??[])if(!this.values.some(l=>l.groupId===o))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${o}).`)},a=({matchIds:r})=>{for(const o of r??[])if(!this.values.some(l=>{var c;return(c=l.ids)==null?void 0:c.some(([h,u])=>h===o[0]&&u===o[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${o}).`)};for(const r of[...this.groupProcessors,...this.aggregates])a(r),n(r)}resolveProcessedDataIndexById(e,t){var i;const{index:s,def:n}=(i=this.resolveProcessedDataDefById(e,t))!=null?i:{};return{index:s,def:n}}resolveProcessedDataIndicesById(e,t){return this.resolveProcessedDataDefsById(e,t).map(({index:i,def:s})=>({index:i,def:s}))}resolveProcessedDataDefById(e,t){return this.resolveProcessedDataDefsById(e,t)[0]}resolveProcessedDataDefsByIds(e,t){const i=[];for(const s of t)i.push([s,this.resolveProcessedDataDefsById(e,s)]);return i}resolveProcessedDataDefsValues(e,{keys:t,values:i}){const s={};for(const[n,[{index:a,def:r}]]of e){const o=r.type==="key"?t:i;s[n]=o[a]}return s}resolveProcessedDataDefsById(e,t){const{keys:i,values:s,aggregates:n,groupProcessors:a,reducers:r}=this,o=h=>{const{ids:u,scopes:d}=h;return u==null||e!=null&&!d?.some(p=>p===e.id)?!1:u.some(([p,g])=>p===e.id&&(typeof t=="string"?g===t:t.test(g)))},l=[i,s,n,a,r],c=[];for(const h of l)c.push(...h.filter(o).map(u=>({index:u.index,def:u})));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`)}getDomain(e,t,i="value",s){var n,a,r,o;let l;try{l=this.resolveProcessedDataIndicesById(e,t)}catch(d){if(typeof t!="string"&&/didn't find property definition/.test(d.message))return[];throw d}let c;switch(i){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}const h=(a=(n=s.domain[c])==null?void 0:n[l[0].index])!=null?a:[];if(l.length===1)return h;const u=[...h];for(const d of l.slice(1))bc((o=(r=s.domain[c])==null?void 0:r[d.index])!=null?o:[],u);return u}processData(e,t){const{opts:{groupByKeys:i,groupByFn:s},aggregates:n,groupProcessors:a,reducers:r,processors:o,propertyProcessors:l}=this,c=performance.now();if(i&&this.keys.length===0)return;let h=this.extractData(e,t);i?h=this.groupData(h):s&&(h=this.groupData(h,s(h))),a.length>0&&this.postProcessGroups(h),n.length>0&&this.aggregateData(h),l.length>0&&this.postProcessProperties(h),r.length>0&&this.reduceData(h),o.length>0&&this.postProcessData(h);for(const d of[...this.keys,...this.values])if(e.length>0){for(const[p,g]of d.missing)if(g>=e.length){const f=p===void 0?"":` for ${p}`;$.warnOnce(`the key '${d.property}' was not found in any data element${f}.`)}}const u=performance.now();return h.time=u-c,this.debug.check()&&AE(h),h}valueGroupIdxLookup({matchGroupIds:e,matchIds:t}){return this.values.map((i,s)=>({def:i,index:s})).filter(({def:i})=>e&&(i.groupId==null||!e.includes(i.groupId))?!1:t?i.ids==null?!1:t.some(([s,n])=>{var a;return(a=i.ids)==null?void 0:a.some(([r,o])=>r===s&&o===n)}):!0).map(({index:i})=>i)}valueIdxLookup(e,t){const i=e==null||e.length===0,s=o=>{if(o==null)return!0;const c=o==null||o.length===0;return i===c?!0:o?.some(h=>e.includes(h))},n=typeof t=="string"?t:t.id,a=([o,l])=>s([o])&&l===n,r=this.values.findIndex(o=>{var l;return s(o.scopes)&&(((l=o.ids)==null?void 0:l.some(c=>a(c)))||o.property===n||o.id===n)});if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`)}extractData(e,t){var i,s,n,a,r,o;const{keys:l,values:c,opts:{dataVisible:h}}=this,{dataDomain:u,processValue:d,scopes:p,allScopesHaveSameDefs:g}=this.initDataDomainProcessor(),f=new Array(h?e.length:0);let m=0,v=0;for(const[b,_]of e.entries()){const S={},D=p.size>0?new Set(p):void 0,A=h?new Array(l.length):void 0;let I=0,T;for(const N of l){if(T=d(N,_,T),T===Sa)break;A&&(A[I++]=T)}if(T===Sa)continue;const E=h&&c.length>0?new Array(c.length):void 0;let C;const O={};for(const N of t??[])O[N.id]=N;for(const[N,w]of c.entries()){for(const U of(i=w.scopes)!=null?i:p){const G=O[U],F=(s=G?.data[b])!=null?s:_;C=d(w,F,C,U),!(C===Sa||!E)&&(G!==void 0&&((a=S[n=G.id])!=null||(S[n]={}),S[G.id][w.property]=C),w.useScopedValues?((r=E[N])!=null||(E[N]={}),E[N][U]=C):E[N]=C)}if(C===Sa){if(g)break;for(const U of(o=w.scopes)!=null?o:p)D?.delete(U);if(D?.size===0)break}}if(!(C===Sa&&g)&&D?.size!==0&&h){const N={datum:R(R({},_),S),keys:A,values:E};!g&&D&&D.size<p.size&&(v++,N.validScopes=[...D]),f[m++]=N}}f.length=m;const y=b=>{const _=u.get(b).getDomain();return Array.isArray(_)&&_[0]>_[1]?[]:[..._]};return{type:"ungrouped",input:{count:e.length},data:f,domain:{keys:l.map(b=>y(b)),values:c.map(b=>y(b))},defs:{allScopesHaveSameDefs:g,keys:l,values:c},partialValidDataCount:v,time:0}}groupData(e,t){var i,s,n,a;const r=new Map;for(const h of e.data){const{keys:u,values:d,datum:p,validScopes:g}=h,f=t?t(h):u,m=ME(f);if(r.has(m)){const v=r.get(m);if(v.values.push(d),v.datum.push(p),g!=null)for(let y=0;y<((s=(i=v.validScopes)==null?void 0:i.length)!=null?s:0);y++){const b=(n=v.validScopes)==null?void 0:n[y];g.some(_=>_===b)||(a=v.validScopes)==null||a.splice(y,1)}}else r.set(m,{keys:f,values:[d],datum:[p],validScopes:g})}const o=new Array(r.size),l=new Array(r.size);let c=0;for(const[,{keys:h,values:u,datum:d,validScopes:p}]of r.entries())p?.length!==0&&(l[c]=h,o[c++]={keys:h,values:u,datum:d,validScopes:p});return Z(R({},e),{type:"grouped",data:o,domain:Z(R({},e.domain),{groups:l})})}aggregateData(e){var t,i,s,n,a,r,o,l;const{aggregates:c}=this;if(!c)return;const h=c.map(()=>[1/0,-1/0]),u=c.map(f=>this.valueGroupIdxLookup(f)),d=c.map(f=>f.aggregateFunction),p=c.map(f=>f.groupAggregateFunction),g=c.map(f=>f.finalFunction);for(const f of e.data){let{values:m}=f;const{validScopes:v}=f;(t=f.aggValues)!=null||(f.aggValues=new Array(u.length)),e.type==="ungrouped"&&(m=[m]);let y=0;for(const b of u){if(!((i=v?.some(A=>{var I;return(I=c[y].matchScopes)==null?void 0:I.some(T=>A===T)}))!=null?i:!0)){y++;continue}let S=(n=(s=p[y])==null?void 0:s.call(p))!=null?n:bc([]);for(const A of m){const I=b.map(E=>A[E]),T=d[y](I,f.keys);T&&(S=(r=(a=p[y])==null?void 0:a.call(p,T,S))!=null?r:bc(T,S))}const D=((l=(o=g[y])==null?void 0:o.call(g,S))!=null?l:S).map(A=>kE(A));bc(D,h[y]),f.aggValues[y++]=D}}e.domain.aggValues=h}postProcessGroups(e){var t,i,s,n,a;const{groupProcessors:r}=this;if(!r)return;const o=new Set,l=new Map,c=new Map,h=new Map;for(const d of r){const p=this.valueGroupIdxLookup(d);c.set(d,p),h.set(d,d.adjust());for(const g of p){const f=this.values[g];o.add(g),l.set(g,new id(f.valueType==="category"?"discrete":"continuous"))}}const u=d=>{var p;for(const g of o)(p=l.get(g))==null||p.extend(d[g])};for(const d of e.data){for(const p of r){if(!((i=(t=d.validScopes)==null?void 0:t.some(v=>{var y;return(y=p.matchScopes)==null?void 0:y.some(b=>v===b)}))!=null?i:!0))continue;const f=(s=c.get(p))!=null?s:[],m=(a=(n=h.get(p))==null?void 0:n())!=null?a:()=>{};if(e.type==="grouped"){for(const v of d.values)v&&m(v,f);continue}d.values&&m(d.values,f)}if(e.type==="grouped")for(const p of d.values)u(p);else u(d.values)}for(const[d,p]of l)e.domain.values[d]=[...p.getDomain()]}postProcessProperties(e){const{propertyProcessors:t}=this;if(t)for(const{adjust:i,property:s,scopes:n}of t)i()(e,this.valueIdxLookup(n??[],s))}reduceData(e){var t,i,s;const{reducers:n}=this,a=n.map(l=>l.scopes),r=n.map(l=>l.reducer()),o=n.map(l=>l.initialValue);for(const l of e.data){let c=0;for(const h of r){if(!((i=(t=l.validScopes)==null?void 0:t.some(d=>{var p;return(p=a[c])==null?void 0:p.some(g=>d===g)}))!=null?i:!0)){c++;continue}o[c]=h(o[c],l),c++}}for(let l=0;l<o.length;l++)(s=e.reduced)!=null||(e.reduced={}),e.reduced[n[l].property]=o[l]}postProcessData(e){var t;const{processors:i}=this;for(const s of i)(t=e.reduced)!=null||(e.reduced={}),e.reduced[s.property]=s.calculate(e)}initDataDomainProcessor(){var e;const{keys:t,values:i}=this,s=new Set;for(const d of i)for(const p of(e=d.scopes)!=null?e:[])s.add(p);const n=s.size,a=new Map,r=new Map;let o=!0;const l=(d,p,g=a)=>{var f;p==="category"?g.set(d,new id("discrete")):(g.set(d,new id("continuous")),o&&(o=((f=d.scopes)!=null?f:[]).length===n))},c=()=>{t.forEach(d=>l(d,d.valueType)),i.forEach(d=>l(d,d.valueType))};c();const h=this.buildAccessors(...t,...i);return{dataDomain:a,processValue:(d,p,g,f)=>{var m,v,y,b,_;const S=d.property in h;let D=!1,A;if(S){try{A=h[d.property](p)}catch{}D=A!==void 0}else D=d.property in p,A=D?p[d.property]:d.missingValue;d.forceValue!=null&&(A=D&&Jl(A)?-1*d.forceValue:d.forceValue,D=!0);const I="missingValue"in d;if(!D&&!I){const T=(m=d.missing.get(f))!=null?m:0;d.missing.set(f,T+1)}if(a.has(d)||c(),D&&!((y=(v=d.validation)==null?void 0:v.call(d,A,p))!=null?y:!0))if("invalidValue"in d)A=d.invalidValue;else return this.mode!=="integrated"&&$.warnOnce(`invalid value of type [${typeof A}] ignored:`,`[${A}]`),Sa;return d.processor&&(r.has(d)||r.set(d,d.processor()),A=(b=r.get(d))==null?void 0:b(A,g!==Sa?g:void 0)),(_=a.get(d))==null||_.extend(A),A},initDataDomain:c,scopes:s,allScopesHaveSameDefs:o}}buildAccessors(...e){const t={};if(this.mode==="integrated")return t;for(const i of e){if(!(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0))continue;let n;i.property.startsWith("[")?n=`return datum${i.property};`:n=`return datum.${i.property};`,t[i.property]=new Function("datum",n)}return t}}}}),nm,gS=L({"packages/ag-charts-community/src/chart/data/dataController.ts"(){"use strict";Fi(),si(),en(),nm=class{constructor(e){this.mode=e,this.debug=te.create(!0,"data-model"),this.requested=[],this.status="setup"}request(e,t,i){return B(this,null,function*(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,n)=>{this.requested.push({id:e,opts:i,data:t,resultCb:s,reject:n})})})}execute(){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const{valid:e,invalid:t}=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",e);const i=this.mergeRequested(e);this.debug("DataController.execute() - merged",i),this.debug.check()&&(window.processedData=[]);const s=e.some(n=>n.data!=null);for(const{opts:n,data:a,resultCbs:r,rejects:o,ids:l}of i){const c=s||n.props.some(h=>{var u;return h.type!=="value"&&h.type!=="key"?!1:(u=h.useScopedValues)!=null?u:!1});try{const h=new sm(Z(R({},n),{mode:this.mode})),u=h.processData(a,e);this.debug.check()&&window.processedData.push(u),u&&u.partialValidDataCount===0?r.forEach((d,p)=>{const g=l[p];let f=u;c&&(f=this.extractScopedData(g,u)),d({dataModel:h,processedData:f})}):u?this.splitResult(h,u,l,r):o.forEach(d=>d(new Error("AG Charts - no processed data generated")))}catch(h){o.forEach(u=>u(h))}}t.forEach(({error:n,reject:a})=>a(n))}extractScopedData(e,t){const i=n=>Array.isArray(n)?n.map(i):R(R({},n),n[e]),s=n=>{var a;return Array.isArray(n)?n.map(s):(a=n?.[e])!=null?a:n};return Z(R({},t),{data:t.data.map(n=>Z(R({},n),{datum:i(n.datum),values:n.values.map(s)}))})}validateRequests(e){const t=[],i=[];for(const[s,n]of e.entries())s>0&&n.data.length!==e[0].data.length&&n.opts.groupByData===!1?i.push(Z(R({},n),{error:new Error("all series[].data arrays must be of the same length and have matching keys.")})):t.push(n);return{valid:t,invalid:i}}mergeRequested(e){const t=[],i=l=>l.filter(c=>c.type==="key").map(c=>c.property).join(";"),s=({opts:l,data:c})=>h=>(l.groupByData===!1||h[0].data===c)&&h[0].opts.groupByKeys===l.groupByKeys&&h[0].opts.dataVisible===l.dataVisible&&h[0].opts.groupByFn===l.groupByFn&&i(h[0].opts.props)===i(l.props),n=l=>c=>{var h;if(c.type!==l.type)return!1;const u=(h=Bi(c,l))!=null?h:{};return delete u.scopes,delete u.id,delete u.ids,"useScopedValues"in u&&delete u.useScopedValues,Object.keys(u).length===0},a=l=>{var c;if(l.type!=="key"&&l.type!=="value")return;const h=new Set((c=l.scopes)!=null?c:[]);l.useScopedValues=h.size>1},r=l=>Z(R({},l[0]),{props:l.reduce((c,h)=>{var u,d,p,g,f,m;for(const v of h.props){if(v.id!=null){(u=v.ids)!=null||(v.ids=[]);for(const b of(d=v.scopes)!=null?d:[])v.ids.push([b,v.id])}const y=c.find(n(v));if(!y){a(v),c.push(v);continue}(p=y.scopes)!=null||(y.scopes=[]),y.scopes.push(...(g=v.scopes)!=null?g:[]),a(v),(y.type==="key"||y.type==="value")&&((f=v.ids)!=null&&f.length)&&((m=y.ids)==null||m.push(...v.ids))}return c},[])}),o=l=>({ids:l.map(({id:c})=>c),resultCbs:l.map(({resultCb:c})=>c),rejects:l.map(({reject:c})=>c),data:l[0].data,opts:r(l.map(({opts:c})=>c))});for(const l of e){const c=t.find(s(l));c?c.push(l):t.push([l])}return t.map(o)}splitResult(e,t,i,s){for(let n=0;n<i.length;n++){const a=i[n],r=s[n];r({dataModel:e,processedData:Z(R({},t),{data:t.data.filter(({validScopes:o})=>o==null||o.some(l=>l===a))})})}}}}}),fr,Go=L({"packages/ag-charts-community/src/util/listeners.ts"(){"use strict";gt(),fr=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const s=i.findIndex(n=>n.symbol===e);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(const i of this.getListenersByType(e))try{i.handler(...t)}catch(s){$.errorOnce(s)}}dispatchWrapHandlers(e,t,...i){for(const s of this.getListenersByType(e))try{t(s.handler,...i)}catch(n){$.errorOnce(n)}}getListenersByType(e){var t;return(t=this.registeredListeners.get(e))!=null?t:[]}destroy(){this.registeredListeners.clear()}}}}),Sc,fS=L({"packages/ag-charts-community/src/chart/data/dataService.ts"(){"use strict";Fi(),Uh(),Go(),gt(),Di(),Sc=class extends fr{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=te.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.freshRequests.length>0)}createThrottledFetch(e){return bx(t=>this.fetch(t),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return bx((t,i)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:i})},e,{leading:!0,trailing:!0})}fetch(e){return B(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const t=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=yield this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-t}ms | ${i}`)}catch(a){this.debug(`DataService - request failed | ${i}`),$.errorOnce(`DataService - request failed | [${a}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(a=>a===i);if(n===-1||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(n+1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")})}},x([Ie({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],Sc.prototype,"dispatchThrottle",2),x([Ie({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],Sc.prototype,"requestThrottle",2)}}),mS,am,LE=L({"packages/ag-charts-community/src/chart/interaction/animationBatch.ts"(){"use strict";lr(),Fi(),gt(),mS=[!0,"animation"],am=class{constructor(){this.stoppedCbs=new Set,this.controllers=new Map,this.debug=te.create(...mS),this.currentPhase=0,this.phases=new Map(da.map(e=>[e,[]])),this.skipAnimations=!1}get size(){return this.controllers.size}isActive(){return this.controllers.size>0}getActiveControllers(){var e;return(e=this.phases.get(da[this.currentPhase]))!=null?e:[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){var t;if(e.isComplete)return;if(da.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),(t=this.phases.get(e.phase))==null||t.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t?.indexOf(e);i!=null&&i>=0&&t?.splice(i,1)}progress(e){const t=da[this.currentPhase];let i=[...this.getActiveControllers()];const s=this.controllers.size;this.debug(`AnimationBatch - progressing by ${e}; current phase ${t} with ${i?.length} active controllers of ${s} total`,this.phases);let n=e===0?.01:e;const a=()=>da[this.currentPhase]==null,r=()=>{for(i=[...this.getActiveControllers()];!a()&&i.length===0;)this.currentPhase++,i=[...this.getActiveControllers()],this.debug(`AnimationBatch - phase changing to ${da[this.currentPhase]}`,{unusedTime:n},i)};for(;n>0&&!a();){r();const o=n;let l=0;for(const c of i)n=Math.min(c.update(o),n),c.isComplete&&(l++,this.removeAnimation(c));this.debug(`AnimationBatch - updated ${i.length} controllers; ${l} completed`)}}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}pause(){for(const e of this.controllers.values())e.pause()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){$.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach(e=>e()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){}}}}),_a,mr=L({"packages/ag-charts-community/src/chart/interaction/baseManager.ts"(){"use strict";Go(),_a=class{constructor(){this.listeners=new fr}addListener(e,t){return this.listeners.addListener(e,t)}removeListener(e){this.listeners.removeListener(e)}destroy(){this.listeners.destroy()}}}}),rm,om,lm,yS,_c,vS,sd,cm,Vo=L({"packages/ag-charts-community/src/chart/interaction/interactionManager.ts"(){"use strict";Fi(),wu(),gt(),Ut(),mr(),rm=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","page-left","wheel"],om=["pagehide","mousemove","mouseup"],lm=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],yS=`
.ag-chart-wrapper {
    touch-action: none;
}
`,_c=(e=>(e[e.Default=8]="Default",e[e.ZoomDrag=4]="ZoomDrag",e[e.ContextMenu=2]="ContextMenu",e[e.Animation=1]="Animation",e[e.All=15]="All",e))(_c||{}),vS=[!0,"interaction"],sd=class Ph extends _a{constructor(t,i,s){super(),this.debug=te.create(...vS),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.stateQueue=8,this.rootElement=i.body,this.element=t,this.window=s;for(const n of lm)n.startsWith("touch")?t.addEventListener(n,this.eventHandler,{passive:!0}):n==="wheel"?t.addEventListener(n,this.eventHandler,{passive:!1}):t.addEventListener(n,this.eventHandler);for(const n of om)this.window.addEventListener(n,this.eventHandler);Ph.interactionDocuments.includes(i)||(Ru(i,yS),Ph.interactionDocuments.push(i))}destroy(){super.destroy();for(const t of om)this.window.removeEventListener(t,this.eventHandler);for(const t of lm)this.element.removeEventListener(t,this.eventHandler)}addListener(t,i,s=8){return super.addListener(t,n=>{this.getState()&s&&i(n)})}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){const i=this.decideInteractionEventTypes(t);i.length>0&&this.dispatchEvent(t,i).catch(s=>$.errorOnce(s))}dispatchEvent(t,i){return B(this,null,function*(){const s=this.calculateCoordinates(t);if(s!=null)for(const n of i)this.listeners.dispatchWrapHandlers(n,(a,r)=>{r.consumed||a(r)},this.buildEvent(R({type:n,event:t},s)))})}decideInteractionEventTypes(t){const i="drag-start";switch(t.type){case"click":case"dblclick":case"contextmenu":case"wheel":return[t.type];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,[i];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,[i];case"touchmove":case"mousemove":return!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(t)?[]:this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":return!this.mouseDown&&!this.isEventOverElement(t)?[]:(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]);case"touchend":return!this.touchDown&&!this.isEventOverElement(t)?[]:(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]);case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const s=t instanceof MouseEvent&&(t.buttons&1)===1;return this.mouseDown!==s?(this.mouseDown=s,[s?i:"drag-end"]):[];case"pagehide":return["page-left"]}return[]}isEventOverElement(t){var i;return t.target===this.element||((i=t.target)==null?void 0:i.parentElement)===this.element}calculateCoordinates(t){var i;if(t instanceof MouseEvent)return this.getMouseEventCoords(t);if(typeof TouchEvent<"u"&&t instanceof TouchEvent){const s=(i=t.touches[0])!=null?i:t.changedTouches[0],{clientX:n,clientY:a,pageX:r,pageY:o}=s;return Z(R({},Ph.NULL_COORDS),{clientX:n,clientY:a,pageX:r,pageY:o})}else if(t instanceof PageTransitionEvent)return t.persisted?void 0:Ph.NULL_COORDS}getMouseEventCoords(t){const{clientX:i,clientY:s,pageX:n,pageY:a}=t;let{offsetX:r,offsetY:o}=t;const l=c=>{let h=0,u=0;for(;c;)h+=c.offsetLeft,u+=c.offsetTop,c=c.offsetParent;return{x:h,y:u}};if(this.dragStartElement!=null&&t.target!==this.dragStartElement){const c=l(this.dragStartElement),h=l(t.target);r-=c.x-h.x,o-=c.y-h.y}return{clientX:i,clientY:s,pageX:n,pageY:a,offsetX:r,offsetY:o}}isWheelEvent(t){return t.type==="wheel"}buildEvent(t){const{type:i,event:s,clientX:n,clientY:a}=t;let{offsetX:r,offsetY:o,pageX:l,pageY:c}=t;if(!Et(r)||!Et(o)){const g=this.element.getBoundingClientRect();r=n-g.left,o=a-g.top}if(!Et(l)||!Et(c)){const g=this.rootElement.getBoundingClientRect();l=n-g.left,c=a-g.top}const h=g=>{const y=Math.sign(g);return(Math.log10(Math.abs(g)/60+.1)*3+3)*y};let[u,d]=[NaN,NaN];if(this.isWheelEvent(s)){const g=s.deltaMode===0?h:f=>f;u=g(s.deltaX),d=g(s.deltaY)}const p={type:i,offsetX:r,offsetY:o,pageX:l,pageY:c,deltaX:u,deltaY:d,sourceEvent:s,consumed:!1,consume(){p.consumed=!0}};return this.debug("InteractionManager - builtEvent: ",p),p}},sd.interactionDocuments=[],sd.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},cm=sd}}),xS,hm,bS=L({"packages/ag-charts-community/src/chart/interaction/animationManager.ts"(){"use strict";lr(),Fi(),gt(),LE(),mr(),Vo(),xS=[!0,"animation"],hm=class extends _a{constructor(e,t){super(),this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new am,this.debug=te.create(...xS),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(e){var t=e,{disableInteractions:i=!0}=t,s=Le(t,["disableInteractions"]),n;const a=this.batch;try{a.checkOverlappingId(s.id)}catch(c){this.failsafeOnError(c);return}const r=(n=s.id)!=null?n:Math.random().toString(),o=this.isSkipped();o&&this.debug("AnimationManager - skipping animation");const l=new of(Z(R({},s),{id:r,skip:o,autoplay:this.isPlaying?s.autoplay:!1,phase:s.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(l,this.defaultDuration))return this.batch.addAnimation(l),l}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=requestAnimationFrame(e)}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e;const t=i=>B(this,null,function*(){const s=()=>B(this,null,function*(){const n=i-(e??i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(1);try{this.batch.progress(n)}catch(a){this.failsafeOnError(a)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(t):this.batch.stop()});this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){$.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new am,e===!0&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isActive()||this.interactionManager.popState(1),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1),this.requestAnimation()}onBatchStop(e){this.batch.stoppedCbs.add(e)}}}}),um,SS=L({"packages/ag-charts-community/src/chart/interaction/chartEventManager.ts"(){"use strict";mr(),um=class extends _a{legendItemClick(e,t,i,s){const n={type:"legend-item-click",series:e,itemId:t,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(e,t,i,s,n){const a={type:"legend-item-double-click",series:e,itemId:t,enabled:i,legendItemName:n,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",a)}axisHover(e,t){const i={type:"axis-hover",axisId:e,direction:t};this.listeners.dispatch("axis-hover",i)}}}}),dm,_S=L({"packages/ag-charts-community/src/chart/interaction/contextMenuRegistry.ts"(){"use strict";dm=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultAction(){return[...this.defaultActions]}registerDefaultAction(e){e.id&&this.defaultActions.find(({id:t})=>t===e.id)||this.defaultActions.push(e)}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}isDisabled(e){return this.disabledActions.has(e)}}}}),pm,MS=L({"packages/ag-charts-community/src/chart/interaction/cursorManager.ts"(){"use strict";pm=class{constructor(e){this.states={},this.element=e}updateCursor(e,t){delete this.states[e],t!=null&&(this.states[e]={style:t}),this.applyStates()}applyStates(){let e="default";Object.entries(this.states).reverse().slice(0,1).forEach(([t,{style:i}])=>e=i),this.element.style.cursor=e}getCursor(){return this.element.style.cursor}}}});function TE(e,t){const i=e.screenX-t.screenX,s=e.screenY-t.screenY;return i*i+s*s}function kS(e,t){return Math.sqrt(TE(e,t))}var DS,gm,AS=L({"packages/ag-charts-community/src/chart/interaction/gestureDetector.ts"(){"use strict";gt(),Te(),mr(),DS=1,gm=class extends _a{constructor(e){super(),this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=e,e.addEventListener("touchstart",this.touchstart,{passive:!0}),e.addEventListener("touchmove",this.touchmove,{passive:!0}),e.addEventListener("touchend",this.touchend),e.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:e}=this;e.removeEventListener("touchstart",this.touchstart),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(e){const{touches:t}=e,{finger1:i,finger2:s}=this.pinch;if(this.pinch.status!==0&&t.length===2){if(t[0].identifier===i.identifier&&t[1].identifier===s.identifier)return[t[0],t[1]];if(t[0].identifier===s.identifier&&t[1].identifier===i.identifier)return[t[1],t[0]]}}copyTouchData(e){const t=["identifier","screenX","screenY"];sg(t,this.pinch.finger1,e.touches[0]),sg(t,this.pinch.finger2,e.touches[1]),this.pinch.distance=kS(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(e,t){const{finger1:i,finger2:s,origin:n}=this.pinch,a={type:e,finger1:i,finger2:s,deltaDistance:t,origin:n};this.listeners.dispatch(e,a)}onTouchStart(e){this.stopPinchTracking();const{pinch:t}=this;e.touches.length===2&&(t.status=1,this.copyTouchData(e),t.origin.x=(e.touches[0].clientX+e.touches[1].clientX)/2,t.origin.y=(e.touches[0].clientY+e.touches[1].clientY)/2)}onTouchMove(e){const t=this.findPinchTouches(e);if(t!==void 0){const[i,s]=t,{pinch:n}=this,a=kS(i,s),r=a-n.distance;n.status===1?Math.abs(r)>DS&&(n.status=2,this.copyTouchData(e),this.dispatchPinchEvent("pinch-start",0)):n.status===2?(n.distance=a,this.copyTouchData(e),this.dispatchPinchEvent("pinch-move",r)):$.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(e){this.stopPinchTracking()}onTouchCancel(e){this.stopPinchTracking()}stopPinchTracking(){const{pinch:e}=this;e.status===2&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}}}}),nd,LS=L({"packages/ag-charts-community/src/chart/interaction/highlightManager.ts"(){"use strict";mr(),nd=class extends _a{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(e,t){this.highlightStates.delete(e),t!=null&&this.highlightStates.set(e,t),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(e,t){this.pickedStates.delete(e),t!=null&&this.pickedStates.set(e,t),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:e}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,e)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:e})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(e,t){return e===t||e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}}}});function IE(e,t,i){var s,n;return(n=(s=e.bbox.computeBBox())==null?void 0:s.containsPoint(t,i))!=null?n:!1}function TS(e){var t;const{width:i=0,height:s=0}=(t=e.bbox.computeBBox())!=null?t:{};return i*s}var IS,EE=L({"packages/ag-charts-community/src/util/bboxset.ts"(){"use strict";IS=class{constructor(){this.nodes=[]}add(e,t){this.nodes.push({value:e,bbox:t})}find(e,t){return this.nodes.filter(i=>IE(i,e,t)).sort((i,s)=>TS(i)-TS(s)).map(i=>i.value)}*[Symbol.iterator](){for(const{value:e}of Object.values(this.nodes))yield e}clear(){this.nodes.length=0}}}}),ES,CS,CE=L({"packages/ag-charts-community/src/chart/interaction/regionManager.ts"(){"use strict";EE(),Go(),gt(),Vo(),ES=class extends fr{},CS=class{constructor(e){this.interactionManager=e,this.eventHandler=t=>this.processEvent(t),this.regions=new IS,this.destroyFns=[],rm.forEach(t=>this.destroyFns.push(e.addListener(t,this.eventHandler,15)))}destroy(){this.destroyFns.forEach(e=>e()),this.currentRegion=void 0;for(const e of this.regions)e.listeners.destroy();this.regions.clear()}pushRegion(e,t){const i={name:e,listeners:new ES};return this.regions.add(i,t),i}addRegion(e,t){const i=this.pushRegion(e,t),{interactionManager:s}=this;class n{addListener(r,o,l=8){return i.listeners.addListener(r,c=>{c.consumed||s.getState()&l&&o(c)})}}return new n}processEvent(e){const{currentRegion:t}=this,i=this.pickRegion(e.offsetX,e.offsetY);t!==void 0&&i?.name!==t.name&&t?.listeners.dispatch("leave",Z(R({},e),{type:"leave"})),i!==void 0&&B(this,null,function*(){return i.listeners.dispatch(e.type,e)}).catch(n=>$.errorOnce(n)),this.currentRegion=i}pickRegion(e,t){const i=this.regions.find(e,t);return i.length>0?i[0]:void 0}}}}),ad,OS,OE=L({"packages/ag-charts-community/src/chart/interaction/syncManager.ts"(){"use strict";mr(),ad=class ao extends _a{constructor(t){super(),this.chart=t}subscribe(t=ao.DEFAULT_GROUP){let i=this.get(t);return i||(i=new Set,ao.chartsGroups.set(t,i)),i.add(this.chart),this}unsubscribe(t=ao.DEFAULT_GROUP){var i;return(i=this.get(t))==null||i.delete(this.chart),this}getChart(){return this.chart}getGroup(t=ao.DEFAULT_GROUP){const i=this.get(t);return i?Array.from(i):[]}getGroupSiblings(t=ao.DEFAULT_GROUP){return this.getGroup(t).filter(i=>i!==this.chart)}get(t){return ao.chartsGroups.get(t)}},ad.chartsGroups=new Map,ad.DEFAULT_GROUP=Symbol("sync-group-default"),OS=ad}}),rd,NS=L({"packages/ag-charts-community/src/chart/interaction/tooltipManager.ts"(){"use strict";rd=class{constructor(e,t){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=e,this.destroyFns.push(t.addListener("hover",i=>this.checkExclusiveRects(i)))}getRange(){return this.tooltip.range}updateTooltip(e,t,i){var s;i==null&&(i=(s=this.states[e])==null?void 0:s.content),this.states[e]={content:i,meta:t},this.applyStates()}updateExclusiveRect(e,t){t?this.exclusiveAreas[e]=t:delete this.exclusiveAreas[e]}removeTooltip(e){delete this.states[e],this.applyStates()}getTooltipMeta(e){var t;return(t=this.states[e])==null?void 0:t.meta}destroy(){for(const e of this.destroyFns)e()}checkExclusiveRects(e){let t;for(const[i,s]of Object.entries(this.exclusiveAreas))if(s.containsPoint(e.offsetX,e.offsetY)){t=i;break}t!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=t,this.applyStates())}applyStates(){var e;const t=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,s;if(t.reverse(),t.slice(0,1).forEach(n=>{var a;const{content:r,meta:o}=(a=this.states[n])!=null?a:{};i=r,s=o}),s===void 0||i===void 0){this.appliedState=void 0,this.tooltip.toggle(!1);return}if(((e=this.appliedState)==null?void 0:e.content)===i){const n=this.tooltip.isVisible();this.tooltip.show(s,void 0,n)}else this.tooltip.show(s,i);this.appliedState={content:i,meta:s}}static makeTooltipMeta(e,t){var i,s,n,a;const{offsetX:r,offsetY:o}=e,{tooltip:l}=t.series.properties,c={xOffset:l.position.xOffset,yOffset:l.position.yOffset},h={offsetX:r,offsetY:o,lastPointerEvent:{offsetX:r,offsetY:o},showArrow:l.showArrow,position:c},u=(s=(i=t.yBar)==null?void 0:i.upperPoint)!=null?s:t.midPoint;if(l.position.type==="node"&&u){const{x:d,y:p}=u,g=t.series.contentGroup.inverseTransformPoint(d,p);return Z(R({},h),{offsetX:Math.round(g.x),offsetY:Math.round(g.y)})}return h.enableInteraction=(a=(n=l.interaction)==null?void 0:n.enabled)!=null?a:!1,h}}}}),fm,RS,wS=L({"packages/ag-charts-community/src/chart/interaction/zoomManager.ts"(){"use strict";si(),ie(),mr(),fm=class extends _a{constructor(){super(...arguments),this.axisZoomManagers=new Map}updateAxes(e){var t;const i=new Map(e.map(s=>[s.id,this.axisZoomManagers.get(s.id)]));this.axisZoomManagers.clear();for(const s of e)this.axisZoomManagers.set(s.id,(t=i.get(s.id))!=null?t:new RS(s));this.initialZoom&&(this.updateZoom(this.initialZoom),this.initialZoom=void 0)}updateZoom(e){if(this.axisZoomManagers.size===0){this.initialZoom=e;return}this.axisZoomManagers.forEach(t=>{t.updateZoom(e?.[t.getDirection()])}),this.applyChanges()}updateAxisZoom(e,t){var i;(i=this.axisZoomManagers.get(e))==null||i.updateZoom(t),this.applyChanges()}getZoom(){let e,t;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?e??(e=i.getZoom()):i.getDirection()==="y"&&(t??(t=i.getZoom()))}),e||t)return{x:e,y:t}}getAxisZoom(e){var t,i;return(i=(t=this.axisZoomManagers.get(e))==null?void 0:t.getZoom())!=null?i:{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}applyChanges(){if(!Array.from(this.axisZoomManagers.values()).map(i=>i.applyChanges()).some(Boolean))return;const t={};for(const[i,s]of this.axisZoomManagers.entries())t[i]=s.getZoom();this.listeners.dispatch("zoom-change",Z(R({type:"zoom-change"},this.getZoom()),{axes:t}))}},RS=class{constructor(e){this.pendingZoom=null,this.axis=e;const[t=0,i=1]=e.visibleRange;this.initialZoom=this.currentZoom={min:t,max:i}}getDirection(){return this.axis.direction}updateZoom(e){this.pendingZoom=e?R({},e):null}getZoom(){return ii(this.currentZoom)}applyChanges(){var e;const t=this.currentZoom;return this.currentZoom=(e=this.pendingZoom)!=null?e:this.initialZoom,t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}}}}),mm,PS=L({"packages/ag-charts-community/src/chart/layout/layoutService.ts"(){"use strict";Go(),gt(),mm=class extends fr{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(e,t){if(this.isLayoutStage(e)||this.isLayoutComplete(e))return super.addListener(e,t);throw new Error(`AG Charts - unsupported listener type: ${e}`)}dispatchPerformLayout(e,t){return this.isLayoutStage(e)?this.getListenersByType(e).reduce((i,s)=>{try{return s.handler(i)}catch(n){return $.errorOnce(n),i}},t):t}dispatchLayoutComplete(e){this.dispatch(this.layoutComplete,e)}isLayoutStage(e){return e!==this.layoutComplete}isLayoutComplete(e){return e===this.layoutComplete}}}});function NE({orientation:e,bboxes:t,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:a=0,forceResult:r=!1}){const o=e==="horizontal",l={max:o?s:i,fn:o?d=>d.width:d=>d.height,padding:o?a:n},c={max:o?i:s,fn:o?d=>d.height:d=>d.width,padding:o?n:a};let h=0;const u=[];for(;h<t.length;){const d=t.slice(h),p=RE(d,h,l,c,r);if(!p)return;h+=p.processedBBoxCount,u.push(p.pageIndices)}return PE(u,e,t,n,a)}function RE(e,t,i,s,n){let r=FE(e,i);if(r<1){if(!n)return;r=1}for(let o=r;o>=1;o--){const l=wE(e,t,o,i,s,n);if(l==null&&o<=1)return;if(l==null)continue;if(typeof l=="number"){if(l<=1)return;o=l<o&&l>1?l:o;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function wE(e,t,i,s,n,a){var r;const o=[];let l=0,c=0,h=[];const u=[];for(let d=0;d<e.length;d++){const p=(d+i)%i;p===0&&(l+=c,c=0,h.length>0&&o.push(h),h=[]);const g=s.fn(e[d])+s.padding;u[p]=Math.max((r=u[p])!=null?r:0,g),c=Math.max(c,n.fn(e[d])+n.padding);const f=l+c,m=!a||o.length>0;if(f>n.max&&m){h=[];break}if(u.reduce((y,b)=>y+b,0)>s.max&&!a)return u.length<i?u.length:void 0;h.push(d+t)}return h.length>0&&o.push(h),o.length>0?o:void 0}function PE(e,t,i,s,n){let a=0,r=0;return{pages:e.map(l=>{t==="horizontal"&&(l=BE(l));let c=0;const h=l.map(p=>{const g=p.map(v=>(c=Math.max(v,c),i[v]));let f=0,m=0;return g.forEach(v=>{f+=v.height+s,m=Math.max(m,v.width+n)}),{indices:p,bboxes:g,columnHeight:Math.ceil(f),columnWidth:Math.ceil(m)}});let u=0,d=0;return h.forEach(p=>{u+=p.columnWidth,d=Math.max(d,p.columnHeight)}),a=Math.max(u,a),r=Math.max(d,r),{columns:h,startIndex:l[0][0],endIndex:c,pageWidth:u,pageHeight:d}}),maxPageWidth:a,maxPageHeight:r}}function BE(e){const t=[];for(const i of e[0])t.push([]);return e.forEach((i,s)=>{i.forEach((n,a)=>{t[a][s]=n})}),t}function FE(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)if(s+=t.fn(e[n])+t.padding,s>t.max)return i/n<2?Math.ceil(i/2):n;return i}var zE=L({"packages/ag-charts-community/src/chart/gridLayout.ts"(){"use strict"}});function GE(e,t){const i=-t/e;return e!==0&&i>=0&&i<=1?[i]:[]}function VE(e,t,i){if(e===0)return GE(t,i);const s=t*t-4*e*i,n=[];if(s===0){const a=-t/(2*e);a>=0&&a<=1&&n.push(a)}else if(s>0){const a=Math.sqrt(s),r=(-t-a)/(2*e),o=(-t+a)/(2*e);r>=0&&r<=1&&n.push(r),o>=0&&o<=1&&n.push(o)}return n}function UE(e,t,i,s){if(e===0)return VE(t,i,s);const n=t/e,a=i/e,r=s/e,o=(3*a-n*n)/9,l=(9*n*a-27*r-2*n*n*n)/54,c=o*o*o+l*l,h=1/3,u=[];if(c>=0){const d=Math.sqrt(c),p=Math.sign(l+d)*Math.pow(Math.abs(l+d),h),g=Math.sign(l-d)*Math.pow(Math.abs(l-d),h),f=Math.abs(Math.sqrt(3)*(p-g)/2),m=-h*n+(p+g);if(m>=0&&m<=1&&u.push(m),f===0){const v=-h*n-(p+g)/2;v>=0&&v<=1&&u.push(v)}}else{const d=Math.acos(l/Math.sqrt(-o*o*o)),p=h*n,g=2*Math.sqrt(-o),f=g*Math.cos(h*d)-p,m=g*Math.cos(h*(d+2*Math.PI))-p,v=g*Math.cos(h*(d+4*Math.PI))-p;f>=0&&f<=1&&u.push(f),m>=0&&m<=1&&u.push(m),v>=0&&v<=1&&u.push(v)}return u}var WE=L({"packages/ag-charts-community/src/scene/polyRoots.ts"(){"use strict"}});function Mc(e,t,i,s,n,a,r,o){const l=(i-e)*(o-a)-(s-t)*(r-n);if(l===0)return null;const c=((r-n)*(t-a)-(e-n)*(o-a))/l,h=((i-e)*(t-a)-(s-t)*(e-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?{x:e+c*(i-e),y:t+c*(s-t)}:null}function YE(e,t,i,s,n,a,r,o,l,c,h,u){const d=[],p=c-u,g=h-l,f=l*(u-c)-c*(h-l),m=BS(e,i,n,r),v=BS(t,s,a,o),y=p*m[0]+g*v[0],b=p*m[1]+g*v[1],_=p*m[2]+g*v[2],S=p*m[3]+g*v[3]+f,D=UE(y,b,_,S);for(const A of D){const I=A*A,T=A*I,E=m[0]*T+m[1]*I+m[2]*A+m[3],C=v[0]*T+v[1]*I+v[2]*A+v[3];let O;l!==h?O=(E-l)/(h-l):O=(C-c)/(u-c),O>=0&&O<=1&&d.push({x:E,y:C})}return d}function BS(e,t,i,s){return[-e+3*t-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function FS(e,t,i,s,n,a,r,o,l,c){const h=(c-o)/(l-r),u=o-h*r,d=Math.pow(h,2)+1,p=2*(h*(u-t)-e),g=Math.pow(e,2)+Math.pow(u-t,2)-Math.pow(i,2),f=Math.pow(p,2)-4*d*g;if(f<0)return[];const m=(-p+Math.sqrt(f))/2/d,v=(-p-Math.sqrt(f))/2/d,y=[];return[m,v].forEach(b=>{if(!(b>=Math.min(r,l)&&b<=Math.max(r,l)))return;const S=h*b+u,D=oe(s);let A=oe(n),I=oe(Math.atan2(S,b));A<=D&&(A+=2*Math.PI),I<D&&(I+=2*Math.PI),a!==(I>=D&&I<=A)&&y.push({x:b,y:S})}),y}var zS=L({"packages/ag-charts-community/src/scene/intersection.ts"(){"use strict";Mi(),WE()}}),yr,od=L({"packages/ag-charts-community/src/scene/path2D.ts"(){"use strict";zS(),yr=class{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let e=0;e<this.commands.length;e++)if(this.commands[e]!==this.previousCommands[e])return!0;for(let e=0;e<this.params.length;e++)if(this.params[e]!==this.previousParams[e])return!0;return!1}draw(e){const t=this.commands,i=this.params;let s=0;e.beginPath();for(const n of t)switch(n){case 0:e.moveTo(i[s++],i[s++]);break;case 1:e.lineTo(i[s++],i[s++]);break;case 3:e.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case 2:e.arc(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]===1);break;case 4:e.closePath();break}t.length===0&&e.closePath()}moveTo(e,t){this.xy?(this.xy[0]=e,this.xy[1]=t):this.xy=[e,t],this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.xy?(this.commands.push(1),this.params.push(e,t),this.xy[0]=e,this.xy[1]=t):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}roundRect(e,t,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(e,t+n),this.arc(e+n,t+n,n,Math.PI,3*Math.PI/2),this.lineTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,3*Math.PI/2,2*Math.PI),this.lineTo(e+i,t+n),this.lineTo(e+i,t+s-n),this.arc(e+i-n,t+s-n,n,0,Math.PI/2),this.lineTo(e+i-n,t+s),this.lineTo(e+n,t+s),this.arc(e+ +n,t+s-n,n,Math.PI/2,Math.PI),this.lineTo(e,t+s-n),this.closePath()}arc(e,t,i,s,n,a=!1){const r=e+i*Math.cos(n),o=t+i*Math.sin(n);this.xy?(this.xy[0]=r,this.xy[1]=o):this.xy=[r,o],this.commands.push(2),this.params.push(e,t,i,s,n,a?1:0)}cubicCurveTo(e,t,i,s,n,a){this.xy||this.moveTo(e,t),this.commands.push(3),this.params.push(e,t,i,s,n,a),this.xy&&(this.xy[0]=n,this.xy[1]=a)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(4),this._closedPath=!0)}clear({trackChanges:e}={trackChanges:!1}){e?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,a=-1e4,r=-1e4;let o=NaN,l=NaN,c=0,h=0,u=0;for(let d=0,p=0;d<n;d++)switch(i[d]){case 0:!isNaN(o)&&Mc(o,l,c,h,a,r,e,t)&&u++,c=s[p++],o=c,h=s[p++],l=h;break;case 1:Mc(c,h,s[p++],s[p++],a,r,e,t)&&u++,c=s[p-2],h=s[p-1];break;case 3:u+=YE(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,r,e,t).length,c=s[p-2],h=s[p-1];break;case 2:const g=s[p++],f=s[p++],m=s[p++],v=s[p++],y=s[p++],b=!!s[p++];u+=FS(g,f,m,v,y,b,a,r,e,t).length,c=g+Math.cos(y)*m,h=f+Math.sin(y)*m;break;case 4:!isNaN(o)&&Mc(o,l,c,h,a,r,e,t)&&u++;break}return u%2===1}getPoints(){const{commands:e,params:t}=this,i=[];let s=0;for(let n=0;n<e.length;n++)switch(e[n]){case 0:case 1:i.push({x:t[s++],y:t[s++]});break;case 3:s+=4,i.push({x:t[s++],y:t[s++]});break;case 2:i.push({x:t[s++],y:t[s++]}),s+=4;break;case 4:break}return i}}}});function ft(e){const{redraw:t=3,changeCb:i,convertor:s}=e??{};return J({redraw:t,type:"path",convertor:s,changeCb:i})}var Li,In=L({"packages/ag-charts-community/src/scene/shape/path.ts"(){"use strict";ee(),od(),ga(),Li=class extends Vi{constructor(){super(...arguments),this.path=new yr,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||((t=(e=this.fillShadow)==null?void 0:e.isDirty())!=null?t:!1)||((s=(i=this._clipPath)==null?void 0:i.isDirty())!=null?s:!1))}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(e){var t,i,s,n,a;const{ctx:r,forceRender:o,stats:l}=e;if(this.dirty===0&&!o){l&&(l.nodesSkipped+=this.nodeCount.count);return}if(this.computeTransformMatrix(),this.matrix.toContext(r),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),!isNaN(this._clipX)&&!isNaN(this._clipY)&&this.clipMode!=null){r.save();const c=this.strokeWidth/2;if((t=this._clipPath)!=null||(this._clipPath=new yr),this._clipPath.clear(),this._clipPath.rect(-c,-c,this._clipX+c,this._clipY+c+c),this.clipMode==="normal"&&((i=this._clipPath)==null||i.draw(r),r.clip()),this._clipX>0&&this._clipY>0&&(this.path.draw(r),this.fillStroke(r)),this.clipMode==="punch-out"){(s=this._clipPath)==null||s.draw(r),r.clip();const{x:h=-1e4,y:u=-1e4,width:d=2e4,height:p=2e4}=(n=this.computeBBox())!=null?n:{};r.clearRect(h,u,d,p)}r.restore()}else this.path.draw(r),this.fillStroke(r);(a=this.fillShadow)==null||a.markClean(),super.render(e)}},Li.className="Path",x([ft()],Li.prototype,"clipMode",2),x([ft()],Li.prototype,"clipX",1),x([ft()],Li.prototype,"clipY",1)}}),Ti,sn=L({"packages/ag-charts-community/src/chart/marker/marker.ts"(){"use strict";Kt(),In(),Ti=class extends Li{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:e,y:t,size:i}=this,s=i/2;return new ht(e-s,t-s,i,i)}applyPath(e,t){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:a,y:r,t:o}of t)s+=a*e,n+=r*e,o==="move"?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}},x([ft()],Ti.prototype,"x",2),x([ft()],Ti.prototype,"y",2),x([ft({convertor:Math.abs})],Ti.prototype,"size",2)}}),Rs,kc=L({"packages/ag-charts-community/src/chart/marker/circle.ts"(){"use strict";sn(),Rs=class extends Ti{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=s/2;i.clear(),i.arc(e,t,n,0,Math.PI*2),i.closePath()}},Rs.className="Circle"}}),ld,GS,HE=L({"packages/ag-charts-community/src/chart/marker/cross.ts"(){"use strict";sn(),ld=class f2 extends Ti{updatePath(){const t=this.size/4.2;super.applyPath(t,f2.moves)}},ld.className="Cross",ld.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],GS=ld}}),cd,ym,VS=L({"packages/ag-charts-community/src/chart/marker/diamond.ts"(){"use strict";sn(),cd=class m2 extends Ti{updatePath(){const t=this.size/2;super.applyPath(t,m2.moves)}},cd.className="Diamond",cd.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],ym=cd}}),vm,KE=L({"packages/ag-charts-community/src/chart/marker/heart.ts"(){"use strict";sn(),vm=class extends Ti{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:t,size:i,rad:s}=this,n=i/4,a=this.y+n/2;t.clear(),t.arc(e-n,a-n,n,s(130),s(330)),t.arc(e+n,a-n,n,s(220),s(50)),t.lineTo(e,a+n),t.closePath()}},vm.className="Heart"}}),hd,US,jE=L({"packages/ag-charts-community/src/chart/marker/plus.ts"(){"use strict";sn(),hd=class y2 extends Ti{updatePath(){const t=this.size/3;super.applyPath(t,y2.moves)}},hd.className="Plus",hd.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],US=hd}}),vr,xm=L({"packages/ag-charts-community/src/chart/marker/square.ts"(){"use strict";sn(),vr=class extends Ti{updatePath(){const{path:e,x:t,y:i}=this,s=this.size/2;e.clear(),e.moveTo(this.align(t-s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i+s)),e.lineTo(this.align(t-s),this.align(i+s)),e.closePath()}},vr.className="Square"}}),ud,xr,bm=L({"packages/ag-charts-community/src/chart/marker/triangle.ts"(){"use strict";sn(),ud=class v2 extends Ti{updatePath(){const t=this.size*1.1;super.applyPath(t,v2.moves)}},ud.className="Triangle",ud.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],xr=ud}});function WS(e){return typeof e=="string"&&YS.includes(e)}function Ma(e=vr){return WS(e)?Sm[e]:typeof e=="function"?e:vr}var Sm,YS,En=L({"packages/ag-charts-community/src/chart/marker/util.ts"(){"use strict";kc(),HE(),VS(),KE(),jE(),xm(),bm(),Sm={circle:Rs,cross:GS,diamond:ym,heart:vm,plus:US,square:vr,triangle:xr},YS=Object.keys(Sm)}}),de,XE=L({"packages/ag-charts-community/src/chart/markerLabel.ts"(){"use strict";Dn(),xe(),pr(),fi(),Di(),xm(),de=class extends et{constructor(){super({name:"markerLabelGroup"}),this.label=new Dt,this.line=new be,this._marker=new vr,this._markerSize=15,this._spacing=8;const{marker:e,label:t,line:i}=this;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=se.has.textMetrics?1:0,this.append([i,e,t]),this.update()}set marker(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())}get marker(){return this._marker}set markerSize(e){this._markerSize!==e&&(this._markerSize=e,this.update())}get markerSize(){return this._markerSize}set spacing(e){this._spacing!==e&&(this._spacing=e,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(e){const t=this.marker.size/2+e;this.line.x1=-t,this.line.x2=t,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){this.marker.size=this.markerSize;const e=this.line.visible?this.line.x2:-1/0,t=this.markerSize/2;this.label.x=Math.max(e,t)+this.spacing}render(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(e)}},de.className="MarkerLabel",x([Yt("label")],de.prototype,"text",2),x([Yt("label")],de.prototype,"fontStyle",2),x([Yt("label")],de.prototype,"fontWeight",2),x([Yt("label")],de.prototype,"fontSize",2),x([Yt("label")],de.prototype,"fontFamily",2),x([Yt("label","fill")],de.prototype,"color",2),x([Yt("marker","fill")],de.prototype,"markerFill",2),x([Yt("marker","stroke")],de.prototype,"markerStroke",2),x([Yt("marker","strokeWidth")],de.prototype,"markerStrokeWidth",2),x([Yt("marker","fillOpacity")],de.prototype,"markerFillOpacity",2),x([Yt("marker","strokeOpacity")],de.prototype,"markerStrokeOpacity",2),x([Yt("marker","visible")],de.prototype,"markerVisible",2),x([Yt("line","stroke")],de.prototype,"lineStroke",2),x([Yt("line","strokeWidth")],de.prototype,"lineStrokeWidth",2),x([Yt("line","strokeOpacity")],de.prototype,"lineStrokeOpacity",2),x([Yt("line","lineDash")],de.prototype,"lineLineDash",2),x([Yt("line","visible")],de.prototype,"lineVisible",2)}}),br,nn,Dc,ka,$E=L({"packages/ag-charts-community/src/chart/pagination/pagination.ts"(){"use strict";Dn(),xe(),fi(),Ls(),di(),Di(),pt(),gr(),bm(),En(),br=class extends Rt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}},x([M(kt)],br.prototype,"color",2),x([M(Mn,{optional:!0})],br.prototype,"fontStyle",2),x([M(kn,{optional:!0})],br.prototype,"fontWeight",2),x([M(K)],br.prototype,"fontSize",2),x([M(X)],br.prototype,"fontFamily",2),nn=class extends Rt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}},x([M(K)],nn.prototype,"size",2),x([M(kt,{optional:!0})],nn.prototype,"fill",2),x([M(Ct,{optional:!0})],nn.prototype,"fillOpacity",2),x([M(kt,{optional:!0})],nn.prototype,"stroke",2),x([M(K)],nn.prototype,"strokeWidth",2),x([M(Ct)],nn.prototype,"strokeOpacity",2),Dc=class extends Rt{constructor(e){super(),this.parent=e,this.shape=xr,this.size=15,this.padding=8}},x([Ie({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Dc.prototype,"shape",2),x([M(K)],Dc.prototype,"size",2),x([M(K)],Dc.prototype,"padding",2),ka=class extends Rt{constructor(e,t,i,s){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.regionManager=i,this.cursorManager=s,this.id=Xs(this),this.marker=new Dc(this),this.activeStyle=new nn,this.inactiveStyle=new nn,this.highlightStyle=new nn,this.label=new br,this.group=new et({name:"pagination"}),this.labelNode=new Dt,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new xr,this._previousButton=new xr,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:se.has.textMetrics?1:0}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const n=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(n.addListener("click",a=>this.onPaginationClick(a)),n.addListener("hover",a=>this.onPaginationMouseMove(a))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(e=>e())}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:r,fontFamily:o}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=r,i.fontFamily=o}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:r,highlightActive:o}=this,l=(c,h)=>h?a:c===o?r:n;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",s))}updateMarker(e,t){var i;const{size:s}=this.marker;e.size=s,e.fill=t.fill,e.fillOpacity=(i=t.fillOpacity)!=null?i:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,s=e===t-1,n=e===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(e,t){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,t)}previousButtonContainsPoint(e,t){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,t)}onPaginationClick(e){const{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(t,i)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){const{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=Ma(this.marker.shape||xr);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}},ka.className="Pagination",x([M(nt)],ka.prototype,"marker",2),x([M(nt)],ka.prototype,"activeStyle",2),x([M(nt)],ka.prototype,"inactiveStyle",2),x([M(nt)],ka.prototype,"highlightStyle",2),x([M(nt)],ka.prototype,"label",2)}}),Cn,Sr,dd,an,pd,yi,HS=L({"packages/ag-charts-community/src/chart/legend.ts"(){"use strict";Kt(),Dn(),xe(),ee(),xa(),fi(),Ls(),gt(),Ot(),di(),Di(),pt(),gr(),zE(),Vo(),rs(),En(),XE(),$E(),uc(),Cn=class extends Rt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}},x([M(K,{optional:!0})],Cn.prototype,"maxLength",2),x([M(kt)],Cn.prototype,"color",2),x([M(Mn,{optional:!0})],Cn.prototype,"fontStyle",2),x([M(kn,{optional:!0})],Cn.prototype,"fontWeight",2),x([M(K)],Cn.prototype,"fontSize",2),x([M(X)],Cn.prototype,"fontFamily",2),x([M(zi,{optional:!0})],Cn.prototype,"formatter",2),Sr=class extends Rt{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}},x([To(e=>{var t;return(t=e.parent)==null?void 0:t.onMarkerShapeChange()})],Sr.prototype,"shape",2),x([M(K)],Sr.prototype,"size",2),x([M(K)],Sr.prototype,"padding",2),x([M(K,{optional:!0})],Sr.prototype,"strokeWidth",2),x([M(rt)],Sr.prototype,"enabled",2),dd=class extends Rt{},x([M(K,{optional:!0})],dd.prototype,"strokeWidth",2),x([M(K,{optional:!0})],dd.prototype,"length",2),an=class extends Rt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new Sr,this.label=new Cn,this.line=new dd}},x([M(K,{optional:!0})],an.prototype,"maxWidth",2),x([M(K)],an.prototype,"paddingX",2),x([M(K)],an.prototype,"paddingY",2),x([M(rt)],an.prototype,"toggleSeriesVisible",2),x([M(rt)],an.prototype,"showSeriesStroke",2),x([M(nt)],an.prototype,"marker",2),x([M(nt)],an.prototype,"label",2),x([M(nt)],an.prototype,"line",2),pd=class extends Rt{},x([M(zi,{optional:!0})],pd.prototype,"legendItemClick",2),x([M(zi,{optional:!0})],pd.prototype,"legendItemDoubleClick",2),yi=class extends Rt{constructor(e){super(),this.ctx=e,this.id=Xs(this),this.group=new et({name:"legend",layer:!0,zIndex:9}),this.itemSelection=jt.select(this.group,de),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new an,this.listeners=new pd,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new ka(s=>e.updateService.update(s),s=>this.updatePageNumber(s),e.regionManager,e.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const t=9,i=e.regionManager.addRegion("legend",this.group);this.destroyFns.push(i.addListener("click",s=>this.checkLegendClick(s),t),i.addListener("dblclick",s=>this.checkLegendDoubleClick(s),t),i.addListener("hover",s=>this.handleLegendMouseMove(s)),i.addListener("leave",s=>this.handleLegendMouseExit(s)),e.layoutService.addListener("start-layout",s=>this.positionLegend(s.shrinkRect)),()=>this.detachLegend())}set data(e){this._data=e,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach(e=>e()),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(e){const{characterWidths:t}=this;if(t.has(e))return t.get(e);const i={"...":se.getTextSize("...",e).width};return t.set(e,i),i}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.append(this.group)}detachLegend(){var e;(e=this.group.parent)==null||e.removeChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;return i?t.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}performLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:a,marker:{size:r,padding:o,shape:l},label:{maxLength:c=1/0,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:p},line:g,showSeriesStroke:f}=this.item,m=[...this.data];this.reverseOrder&&m.reverse(),this.itemSelection.update(m);const v=[],y=fa(n),_=a??e*.8,S=r+o+i;if(this.itemSelection.each((N,w)=>{var U,G,F;const P=Ma(l??w.marker.shape),j=(U=w.marker.enabled)!=null?U:this.item.marker.enabled;N.marker&&N.marker instanceof P||(N.marker=new P),N.markerSize=r,N.spacing=o,N.fontStyle=h,N.fontWeight=u,N.fontSize=d,N.fontFamily=p;const z=(G=w.itemId)!=null?G:w.id,q=this.getItemLabel(w),tt=(q??"<unknown>").replace(/\r?\n/g," ");N.text=this.truncate(tt,c,_,S,y,z),f&&w.line!==void 0?(N.lineVisible=!0,N.markerVisible=j,N.setSeriesStrokeOffset((F=g.length)!=null?F:5)):(N.lineVisible=!1,N.markerVisible=!0),v.push(N.computeBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return!1;const D=this.size,A=this.oldSize;D[0]=e,D[1]=t,(D[0]!==A[0]||D[1]!==A[1])&&(A[0]=D[0],A[1]=D[1]);const{pages:I,maxPageHeight:T,maxPageWidth:E}=this.updatePagination(v,e,t);this.pages=I,this.maxPageSize=[E-i,T-s];const C=this.pagination.currentPage,O=this.pages[C];if(this.pages.length<1||!O){this.visible=!1;return}this.visible=!0,this.updatePositions(C),this.update()}truncate(e,t,i,s,n,a){const r="...",o=e.split("");let l=!1;if(e.length>t&&(e=`${e.substring(0,t)}`,l=!0),Math.floor(s+se.getTextSize(e,n).width)>i){let h="";const u=this.getCharacterWidths(n);let d=s+u[r];for(const p of o){if(u[p]||(u[p]=se.getTextSize(p,n).width),d+=u[p],d>i)break;h+=p}e=h,l=!0}return l?(e+=r,this.truncatedItems.add(a)):this.truncatedItems.delete(a),e}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:r,maxPageWidth:o,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),h=a.findIndex(y=>y.endIndex>=n);this.pagination.currentPage=It(0,h,a.length-1);const{paddingX:u,paddingY:d}=this.item,p=8,g=o-u,f=r-d;let m=0,v=-l.y-this.item.marker.size/2;return c?v+=f+p:(m+=-l.x+g+p,v+=(f-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:r,maxPageWidth:o,pages:a}}calculatePagination(e,t,i){var s,n,a;const{paddingX:r,paddingY:o}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let h=this.pagination.computeBBox(),u=new ht(0,0,0,0),d=[],p=0,g=0,f=0;const m=y=>{const{width:b,height:_}=y;return b===h.width&&_===h.height},v=this.maxWidth!==void 0||this.maxHeight!==void 0;do{if(f++>10){$.warn("unable to find stable legend layout.");break}h=u;const y=t-(c?0:h.width),b=i-(c?h.height:0),_=NE({orientation:l,bboxes:e,maxHeight:b,maxWidth:y,itemPaddingY:o,itemPaddingX:r,forceResult:v});d=(s=_?.pages)!=null?s:[],p=(n=_?.maxPageWidth)!=null?n:0,g=(a=_?.maxPageHeight)!=null?a:0;const S=d.length;if(this.pagination.visible=S>1,this.pagination.totalPages=S,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(u));return{maxPageWidth:p,maxPageHeight:g,pages:d,paginationBBox:h,paginationVertical:c}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:a,endIndex:r}=s[e];let o=0,l=0;const c=n.length,h=n[0].indices.length,u=this.getOrientation()==="horizontal",d=n[0].bboxes[0].height+t,p=[];i.each((g,f,m)=>{var v,y;if(m<a||m>r){g.visible=!1;return}const b=m-a;let _=0,S=0;u?(_=b%c,S=Math.floor(b/c)):(_=Math.floor(b/h),S=b%h),g.visible=!0;const D=n[_];D&&(l=d*S,o=(v=p[S])!=null?v:0,p[S]=((y=p[S])!=null?y:0)+D.columnWidth,g.translationX=Math.floor(o),g.translationY=Math.floor(l))})}updatePageNumber(e){const{pages:t}=this,{startIndex:i,endIndex:s}=t[e];i===0?this.paginationTrackingIndex=0:e===t.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.ctx.updateService.update(6)}update(){const{label:{color:e},marker:t,line:i,showSeriesStroke:s}=this.item;this.itemSelection.each((n,a)=>{var r,o;const l=a.marker;n.markerFill=l.fill,n.markerStroke=l.stroke,n.markerStrokeWidth=(r=t.strokeWidth)!=null?r:Math.min(2,l.strokeWidth),n.markerFillOpacity=l.fillOpacity,n.markerStrokeOpacity=l.strokeOpacity,n.opacity=a.enabled?1:.5,n.color=e;const{line:c}=a;s&&c!==void 0&&(n.lineStroke=c.stroke,n.lineStrokeOpacity=c.strokeOpacity,n.lineStrokeWidth=(o=i.strokeWidth)!=null?o:Math.min(2,c.strokeWidth),n.lineLineDash=c.lineDash)})}getDatumForPoint(e,t){const i=[],s={dist:1/0,datum:void 0};for(const a of this.group.children){if(!a.visible||!(a instanceof de))continue;const r=a.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(e,t))return a.datum;const o=e-r.x-this.item.paddingX/2,l=t-r.y-this.item.paddingY/2,c=mt(o,2)+mt(l,2);o>=0&&l>=0&&c<s.dist&&(s.dist=c,s.datum=a.datum),i.push(r)}if(ht.merge(i).containsPoint(e,t))return s.datum}computePagedBBox(){const e=this.group.computeBBox();if(this.pages.length<=1)return e;const[t,i]=this.maxPageSize;return e.height=Math.max(i,e.height),e.width=Math.max(t,e.width),e}checkLegendClick(e){const{listeners:{legendItemClick:t},ctx:{chartService:i,highlightManager:s},item:{toggleSeriesVisible:n},preventHidingAll:a}=this,r=this.getDatumForPoint(e.offsetX,e.offsetY);if(!r)return;const{id:o,itemId:l,enabled:c}=r,h=i.series.find(d=>d.id===o);if(!h)return;e.consume();let u=c;n&&(u=!c,a&&!u&&i.series.flatMap(p=>p.getLegendData("category")).filter(p=>p.enabled).length<2&&(u=!0),this.ctx.chartEventManager.legendItemClick(h,l,u,r.legendItemName)),u?s.updateHighlight(this.id,{series:h,itemId:l,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),t?.({type:"click",enabled:u,itemId:l,seriesId:h.id})}checkLegendDoubleClick(e){var t;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},item:{toggleSeriesVisible:n}}=this;if(s.mode==="integrated")return;const a=this.getDatumForPoint(e.offsetX,e.offsetY);if(!a)return;const{id:r,itemId:o,seriesId:l}=a,c=s.series.find(h=>h.id===r);if(c){if(e.consume(),n){const h=s.series.flatMap(p=>p.getLegendData("category")),u=h.filter(p=>p.enabled).length,d=h.find(p=>p.itemId===o&&p.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(c,o,(t=d?.enabled)!=null?t:!1,u,d?.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),i?.({type:"dblclick",enabled:!0,itemId:o,seriesId:c.id})}}handleLegendMouseMove(e){var t;const{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;const{offsetX:a,offsetY:r}=e;e.consume();const o=this.getDatumForPoint(a,r);if(o===void 0){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}const l=o?this.ctx.chartService.series.find(c=>c.id===o?.id):void 0;o&&this.truncatedItems.has((t=o.itemId)!=null?t:o.id)?this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:a,offsetY:r,lastPointerEvent:e,showArrow:!1,addCustomClass:!1},hc({content:this.getItemLabel(o)})):this.ctx.tooltipManager.removeTooltip(this.id),(s||n.legendItemClick!=null||n.legendItemDoubleClick!=null)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),o?.enabled&&l?this.ctx.highlightManager.updateHighlight(this.id,{series:l,itemId:o?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(e){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id)}positionLegend(e){const t=e.clone();if(!this.enabled||!this.data.length)return{shrinkRect:t};const[i,s]=this.calculateLegendDimensions(e);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,s);const n=this.computePagedBBox(),a=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return e.height-n.height;case"right":default:return e.width-n.width}};if(this.visible){let r,o;switch(this.position){case"top":case"bottom":r=(e.width-n.width)/2,o=a(),t.shrink(n.height,this.position);break;case"left":case"right":default:r=a(),o=(e.height-n.height)/2,t.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+e.x+r),this.group.translationY=Math.floor(-n.y+e.y+o)}if(this.visible&&this.enabled&&this.data.length){const r=this.spacing;t.shrink(r,this.position);const o=n.clone();o.x+=this.group.translationX,o.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,o)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:t}}calculateLegendDimensions(e){const{width:t,height:i}=e,s=t/i,n=.5,a=.2,r=.25;let o,l;switch(this.position){case"top":case"bottom":const c=s<1?Math.min(n,a*(1/s)):a;o=this.maxWidth?Math.min(this.maxWidth,t):t,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break;case"left":case"right":default:const h=s>1?Math.min(n,r*s):r;o=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*h),l=this.maxHeight?Math.min(this.maxHeight,i):i}return[o,l]}},yi.className="Legend",x([M(nt)],yi.prototype,"pagination",2),x([M(nt)],yi.prototype,"item",2),x([M(nt)],yi.prototype,"listeners",2),x([To(e=>e.updateGroupVisibility()),M(rt)],yi.prototype,"enabled",2),x([M(Tu)],yi.prototype,"position",2),x([M(K,{optional:!0})],yi.prototype,"maxWidth",2),x([M(K,{optional:!0})],yi.prototype,"maxHeight",2),x([M(rt,{optional:!0})],yi.prototype,"reverseOrder",2),x([M(le(["horizontal","vertical"],"an orientation"),{optional:!0})],yi.prototype,"orientation",2),x([M(rt,{optional:!0})],yi.prototype,"preventHidingAll",2),x([M(K)],yi.prototype,"spacing",2)}});function qE(e){return _m.includes(e.type)}function ZE(e){return _m.includes(e.type)}function QE(e){return typeof e=="string"&&KS.includes(e)}var KS,_m,jS,JE=L({"packages/ag-charts-community/src/chart/mapping/prepareAxis.ts"(){"use strict";KS=["top","right","bottom","left"],_m=["category","grouped-category","number","log","time"],jS=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(e,t){const{result:i,valid:s,invalid:n}=this;ZE(t)&&(QE(t.position)?s.push(e):n.push(e)),i.push(e)}guessInvalidPositions(){const e=this.valid.filter(i=>qE(i)).map(i=>i.position).filter(i=>i!==void 0),t=["top","right","bottom","left"];for(const i of this.invalid){let s=t.pop();for(;e.includes(s)&&s!==void 0;)s=t.pop();if(s===void 0)break;i.position=s}return this.result}}}});function tC(e,t,i){var s,n,a;const r=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"],o=(g,f)=>{const m=[g];for(const v of r)v in f&&f[v]!=null&&m.push(`${v}=${f[v]}`);return m.join(";")},l=new Map;let c=0;for(const g of e){const f=o(g.type,g.properties);l.has(f)||l.set(f,[]),(s=l.get(f))==null||s.push([g,c++])}const h=new Map;for(const g of t){const f=o(g.type,g);h.has(f)||h.set(f,[]),(n=h.get(f))==null||n.push(g)}if(![...l.keys()].some(g=>h.has(g)))return{status:"no-overlap",oldKeys:l.keys(),newKeys:h.keys()};const d=[];let p=-1;for(const[g,f]of h.entries())for(const m of f){p++;const v=l.get(g);if(v==null||v.length<1){d.push({opts:m,idx:p,status:"add"}),l.delete(g);continue}const[y,b]=v.shift(),_=(a=i?.[b])!=null?a:{},S=Bi(_,m??{});S?d.push({opts:m,series:y,diff:S,idx:b,status:"update"}):d.push({opts:m,series:y,idx:b,status:"no-op"}),v.length===0&&l.delete(g)}for(const g of l.values())for(const[f,m]of g)d.push({series:f,idx:m,status:"remove"});return{status:"overlap",changes:d}}var eC=L({"packages/ag-charts-community/src/chart/mapping/prepareSeries.ts"(){"use strict";si()}}),rn,gd,_r,iC=L({"packages/ag-charts-community/src/chart/overlay/overlay.ts"(){"use strict";pt(),rn="ag-chart-overlay",gd="ag-chart-dark-overlay",_r=class{constructor(e,t,i){this.className=e,this.parentElement=t,this.animationManager=i,this.darkTheme=!1}show(e){var t,i;this.element||(this.element=this.createElement("div"),this.element.classList.add(this.className,rn)),this.element.classList.toggle(gd,this.darkTheme);const{element:s}=this;if(s.style.position="absolute",s.style.left=`${e.x}px`,s.style.top=`${e.y}px`,s.style.width=`${e.width}px`,s.style.height=`${e.height}px`,this.renderer)s.innerHTML=this.renderer();else{const n=this.createElement("div");n.style.alignItems="center",n.style.boxSizing="border-box",n.style.display="flex",n.style.justifyContent="center",n.style.margin="8px",n.style.height="100%",n.style.font="12px Verdana, sans-serif",n.innerText=(t=this.text)!=null?t:"No data to display",s.replaceChildren(n),this.animationManager.animate({from:0,to:1,phase:"add",id:"overlay",groupId:"opacity",onUpdate(a){s.style.opacity=String(a)},onStop(){s.style.opacity="1"}})}(i=this.parentElement)==null||i.append(s)}hide(){if(!this.element)return;const e=this.element;this.animationManager.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.remove()}}),this.element=void 0}createElement(e,t){return this.parentElement.ownerDocument.createElement(e,t)}},x([M(zi,{optional:!0})],_r.prototype,"renderer",2),x([M(X,{optional:!0})],_r.prototype,"text",2),x([M(rt)],_r.prototype,"darkTheme",2)}}),XS,Mm,$S,sC=L({"packages/ag-charts-community/src/chart/overlay/chartOverlays.ts"(){"use strict";lr(),wu(),iC(),XS=`
.${rn} {
    color: #181d1f;
}

.${rn}.${gd} {
    color: #ffffff;
}

.${rn}--loading {
    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */
}

.${rn}__loading-background {
    background: white; /* DEFAULT_BACKGROUND_FILL */
}

.${rn}.${gd} .${rn}__loading-background {
    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */
}
`,Mm=class ax{constructor(t,i){this.loading=new _r("ag-chart-loading-overlay",t,i),this.loading.text="Loading data...",this.loading.renderer=()=>this.renderLoadingSpinner(t,i),this.noData=new _r("ag-chart-no-data-overlay",t,i),this.noVisibleSeries=new _r("ag-chart-no-visible-series",t,i),this.noVisibleSeries.text="No visible series",ax.overlayDocuments.indexOf(t.ownerDocument)<0&&(Ru(t.ownerDocument,XS),ax.overlayDocuments.push(t.ownerDocument))}destroy(){this.loading.hide(),this.noData.hide(),this.noVisibleSeries.hide()}renderLoadingSpinner(t,i){var s;const n=this.createElement(t,"div");n.className=`${rn}--loading`,n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.flexDirection="column",n.style.height="100%",n.style.boxSizing="border-box",n.style.font="13px Verdana, sans-serif",n.style.userSelect="none",n.style.animation=`ag-charts-loading ${ku.animationDuration*i.defaultDuration}ms linear 50ms both`;const a=this.createElement(n,"span");a.style.width="45px",a.style.height="40px",a.style.backgroundImage=`${["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join("")}`,a.style.backgroundSize="10px 400%",a.style.backgroundRepeat="no-repeat",a.style.animation="ag-charts-loading-matrix 1s infinite linear";const r=this.createElement(n,"p");r.style.marginTop="1em",r.innerText=(s=this.loading.text)!=null?s:"Loading data...";const o=this.createElement(t,"div");o.className=`${rn}__loading-background`,o.style.position="absolute",o.style.top="0",o.style.right="0",o.style.bottom="0",o.style.left="0",o.style.opacity="0.5",o.style.zIndex="-1";const l=this.createElement(n,"style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(l,a,r,o),n.outerHTML}createElement(t,i,s){return t.ownerDocument.createElement(i,s)}},Mm.overlayDocuments=[],$S=Mm}});function fd(e,t=[0,0]){for(const i of e)typeof i=="number"&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function nC(e,t,i){return{id:t,scopes:[e.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:n=>fd(n)}}function qS(e,t,i){return{id:t,scopes:[e.id],type:"aggregate",matchGroupIds:i?[i]:void 0,aggregateFunction:s=>fd(s),groupAggregateFunction:(s,n=[0,0])=>{var a,r;return n[0]+=(a=s?.[0])!=null?a:0,n[1]+=(r=s?.[1])!=null?r:0,n}}}function ZS(e,t,i){return{id:t,scopes:[e.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:n=>bc(n)}}function aC(e,t){return{id:t,scopes:[e.id],type:"aggregate",aggregateFunction:()=>[0,1]}}function km(e,t){return{id:t,scopes:[e.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(i,s=[0,0])=>{var n,a;return s[0]+=(n=i?.[0])!=null?n:0,s[1]+=(a=i?.[1])!=null?a:0,s}}}function rC(e,t,i){return{id:t,scopes:[e.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:n=>fd(n).map(a=>a/n.length)}}function QS(e,t,i){return{id:t,scopes:[e.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:n=>fd(n),groupAggregateFunction:(n,a=[0,0,-1])=>{var r,o;return a[0]+=(r=n?.[0])!=null?r:0,a[1]+=(o=n?.[1])!=null?o:0,a[2]++,a},finalFunction:(n=[0,0,0])=>{const a=n[0]+n[1];return a>=0?[0,a/n[2]]:[a/n[2],0]}}}function Dm(e,t,i,s){const n={id:t,scopes:[e.id],matchGroupIds:s?[s]:void 0,type:"aggregate",aggregateFunction:(a,r=[])=>{const o=r[1]-r[0];return i.aggregateFunction(a).map(l=>l/o)}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function JS(e){return()=>{let t=0;return i=>Et(i)?(t+=e?Math.max(0,i):i,t):i}}function t_(){return()=>{let e=0;return t=>{if(!Et(t))return t;const i=e;return e+=t,i}}}var Am=L({"packages/ag-charts-community/src/chart/data/aggregateFunctions.ts"(){"use strict";Ut(),dS()}});function md(e,t){var i,s,n;const a=JSON.stringify(e,null,0);return Uo.has(t)||Uo.set(t,new Map),(i=Uo.get(t))!=null&&i.has(a)||(s=Uo.get(t))==null||s.set(a,t(e)),(n=Uo.get(t))==null?void 0:n.get(a)}var Uo,oC=L({"packages/ag-charts-community/src/util/memo.ts"(){"use strict";Uo=new Map}});function lC({normaliseTo:e,mode:t}){const i=(s,n)=>{const a=s*e/n;return a>=0?Math.min(e,a):Math.max(-e,a)};return()=>()=>(s,n)=>{const a=[0,0];for(const o of n){const l=s[o],c=l<0?0:1;t==="sum"?a[c]+=l:c===0?a[c]=Math.min(a[c],l):a[c]=Math.max(a[c],l)}const r=Math.max(Math.abs(a[0]),a[1]);for(const o of n)s[o]=i(s[o],r)}}function yd(e,t,i,s="sum"){return{scopes:[e.id],type:"group-value-processor",matchGroupIds:t,adjust:md({normaliseTo:i,mode:s},lC)}}function cC({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:s}){const n=e[1]-e[0],a=(r,o,l)=>{const c=e[0]+(r-o)/l*n;return l===0?t:c>=e[1]?e[1]:c<e[0]?e[0]:c};return()=>(r,o)=>{let[l,c]=r.domain.values[o];i!=null&&(l=i),s!=null&&(c=s);const h=c-l;r.domain.values[o]=[e[0],e[1]];for(const u of r.data){let d=u.values;r.type==="ungrouped"&&(d=[d]);for(const p of d)p[o]=a(p[o],l,h)}}}function Ac(e,t,i,s,n,a){return{scopes:[e.id],type:"property-value-processor",property:t,adjust:md({normaliseTo:i,rangeMin:n,rangeMax:a,zeroDomain:s},cC)}}function Wo(e,t=[]){return{type:"processor",scopes:[e.id],property:"animationValidation",calculate(i){var s;const{keys:n,values:a}=i.defs,{input:r,data:o}=i;let l=!0,c=!0;const h=[];for(let d=0;d<a.length;d++)(s=a[d].scopes)!=null&&s.some(p=>p===e.id)&&t.some(p=>a[d].id===p)&&h.push([d,a[d]]);const u=(d,p,g)=>{var f;if(p.valueType==="category"){const v=i.domain[g][d];l&&(l=v.length===r.count);return}let m=(f=o[0])==null?void 0:f[g][d];for(let v=1;(l||c)&&v<o.length;v++){const y=o[v][g][d];c&&(c=m<=y),l&&(l=m!==y),m=y}};for(let d=0;(l||c)&&d<n.length;d++)u(d,n[d],"keys");for(let d=0;(l||c)&&d<h.length;d++){const[p,g]=h[d];u(p,g,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function hC({mode:e,separateNegative:t}){return()=>()=>(i,s)=>{const n=[0,0];for(const a of s){const r=i[a],o=Jl(r)&&t?0:1;Et(r)&&(e==="normal"&&(n[o]+=r),i[a]=n[o],e==="trailing"&&(n[o]+=r))}}}function uC({mode:e,sum:t}){return()=>{const i=[];let s=!0;return()=>(n,a)=>{let r=0;for(const o of a){const l=n[o],c=s&&t==="current"?0:i[o];i[o]=l;const h=t==="current"?l:c;if(!Et(l)||!Et(c)){n[o]=r;continue}e==="normal"&&(r+=h),n[o]=r,e==="trailing"&&(r+=h)}s=!1}}}function e_(e,t,i,s,n=!1){let a;if(i.startsWith("window")){const r=i.endsWith("-trailing")?"trailing":"normal";a=md({mode:r,sum:s},uC)}else a=md({mode:i,separateNegative:n},hC);return{scopes:[e.id],type:"group-value-processor",matchGroupIds:[t],adjust:a}}function Mr(e,t=!0){return{type:"processor",property:"diff",calculate:i=>{const s={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,a=new Map,r=new Map,o=new Map,l=new Map,c=new Map,h=new Map;for(let u=0;u<Math.max(e.data.length,i.data.length);u++){const d=e.data[u],p=i.data[u],g=d?Da(d.keys):"",f=p?Da(p.keys):"";if(g===f){Zl(d.values,p.values)||(r.set(f,p),c.set(f,u));continue}o.has(f)?((t||!Zl(o.get(f).values,p.values))&&(r.set(f,p),c.set(f,u),n.set(f,p)),o.delete(f),h.delete(f)):p&&(a.set(f,p),l.set(f,u)),a.has(g)?((t||!Zl(a.get(g).values,d.values))&&(r.set(g,d),c.set(g,u),n.set(g,d)),a.delete(g),l.delete(g)):d&&(r.delete(g),c.delete(g),o.set(g,d),h.set(g,u))}return s.added=Array.from(a.keys()),s.updated=Array.from(r.keys()),s.removed=Array.from(o.keys()),s.moved=Array.from(n.keys()),s.addedIndices=Array.from(l.values()),s.updatedIndices=Array.from(c.values()),s.removedIndices=Array.from(h.values()),s.changed=s.added.length>0||s.updated.length>0||s.removed.length>0,s}}}function Da(e){return ye(e)?e.map(t=>Eo(t)).join("___"):Eo(e)}var vd,i_,Lm,On=L({"packages/ag-charts-community/src/chart/data/processors.ts"(){"use strict";ni(),oC(),Ot(),Ut(),Co(),vd={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,i)=>{const s=i.keys[0],n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n<t?n:t}}},i_={type:"processor",property:"aggValuesExtent",calculate:e=>{var t,i,s,n;const a=[...(i=(t=e.domain.aggValues)==null?void 0:t[0])!=null?i:[0,0]];for(const[r,o]of(n=(s=e.domain.aggValues)==null?void 0:s.slice(1))!=null?n:[])r<a[0]&&(a[0]=r),o>a[1]&&(a[1]=o);return a}},Lm={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>{if(e!=null)return[...e].sort((t,i)=>{for(let s=0;s<t.length;s++){const n=t[s]-i[s];if(n!==0)return n}return 0})}}}});function Tm(e){return dc(e,!0)!=null}function s_(e){return dc(e,!1)!=null}function Xe(e,t,i,s={}){return R({scopes:[e.id],property:t,type:"key",valueType:i?"range":"category",validation:i?Tm:s_},s)}function Gt(e,t,i,s={}){return R({scopes:[e.id],property:t,type:"value",valueType:i?"range":"category",validation:i?Tm:s_},s)}function Im(e,t,i={}){const s=i,{min:n=-1/0,max:a=1/0}=s,r=Le(s,["min","max"]);return R({scopes:[e.id],type:"value",property:t,valueType:"range",validation:Tm,processor:()=>o=>Et(o)?It(n,o,a):o},r)}function dC(e,t,i,s={}){return Z(R({},Gt(e,t,i,s)),{processor:n_()})}function n_(){return()=>{let e=0;return t=>{const i=e;return e=t,i}}}function Em(e,t,i,s={}){const n=s,{onlyPositive:a}=n,r=Le(n,["onlyPositive"]);return Z(R({},Gt(e,t,i,r)),{processor:JS(a)})}function pC(e,t,i,s={}){return Z(R({},Gt(e,t,i,s)),{processor:t_()})}function Aa(e,t,i,s,n="current",a){return[Gt(e,t,i,a),e_(e,a.groupId,s,n,a.separateNegative),...a.rangeId!=null?[ZS(e,a.rangeId,a.groupId)]:[]]}var Cm,Yo,xd,kr,Ii=L({"packages/ag-charts-community/src/chart/series/series.ts"(){"use strict";Ib(),xe(),Ls(),si(),Go(),Ot(),Te(),hS(),Di(),Ut(),Co(),ie(),Am(),On(),rs(),Cm=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",e[e.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",e[e.NEAREST_NODE=3]="NEAREST_NODE",e))(Cm||{}),Yo=class{constructor(e,t,{datum:i},s){this.type=e,this.event=t,this.datum=i,this.seriesId=s.id}},xd=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},kr=class extends Qf{constructor(e){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeClickEvent=Yo,this.internalId=Xs(this),this.rootGroup=new et({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new Of,this._declarationOrder=-1,this.seriesListeners=new fr;const{moduleCtx:t,useLabelLayer:i=!1,pickModes:s=[1],directionKeys:n={},directionNames:a={},contentGroupVirtual:r=!0,canHaveAxes:o=!1}=e;this.ctx=t,this.directionKeys=n,this.directionNames=a,this.canHaveAxes=o,this.contentGroup=this.rootGroup.appendChild(new et({name:`${this.internalId}-content`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new et({name:`${this.internalId}-highlight`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new et({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new et({name:"highlightLabel",zIndex:10})),this.pickModes=s,this.labelGroup=this.rootGroup.appendChild(new et({name:`${this.internalId}-series-labels`,layer:i,zIndex:7})),this.annotationGroup=new et({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var e,t;return(t=(e=this.properties)==null?void 0:e.id)!=null?t:this.internalId}get type(){var e;return(e=this.constructor.type)!=null?e:""}set data(e){this._data=e,this.onDataChange()}get data(){var e;return(e=this._data)!=null?e:this._chartData}set visible(e){this.properties.visible=e,this.visibleChanged()}get visible(){return this.properties.visible}onDataChange(){this.nodeDataRefresh=!0}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:s,visible:n}=this;e&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),t&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:n,seriesGrouping:t}),this.fireEvent(new xd(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(e,t=0){let i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":t+=15e3;break;case"annotation":i+=15e3;break}return[()=>this._declarationOrder+i,t]}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),s=t?.[i],n=[];if(!s)return n;const a=(...r)=>{for(const o of r)Array.isArray(o)?a(...o):typeof o=="object"?a(...Object.values(o)):n.push(o)};return a(...s.map(r=>this.properties[r])),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapValues(s=>s.getDomain(e));return t.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(e){const{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){var e,t;const{series:i}=(t=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight())!=null?t:{};return i==null?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapValues(t=>t.getTooltipParams()).reduce((t,i)=>R(R({},i),t),{})}pickNode(e,t){const{pickModes:i,visible:s,rootGroup:n}=this;if(!(!s||!n.visible))for(const a of i){if(t&&!t.includes(a))continue;let r;switch(a){case 0:r=this.pickNodeExactShape(e);break;case 1:case 2:r=this.pickNodeMainAxisFirst(e,a===2);break;case 3:r=this.pickNodeClosestDatum(e);break}if(r)return{pickMode:a,match:r.datum,distance:r.distance}}}pickNodeExactShape(e){const t=this.contentGroup.pickNode(e.x,e.y);return t&&{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeClickEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",e,t,this))}toggleSeriesItem(e,t){this.visible=t,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:e,enabled:t})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Z(R({},this.ctx),{series:this})}getLabelText(e,t,i=String){var s;return e.formatter&&(s=this.ctx.callbackCache.call(e.formatter,R({seriesId:this.id},t)))!=null?s:i(t.value)}getMarkerStyle(e,t,i=e.getStyle()){var s,n;const a={size:(n=(s=t.datum.point)==null?void 0:s.size)!=null?n:0},r=bt(a,i);if(e.formatter){const o=this.ctx.callbackCache.call(e.formatter,Z(R(R({seriesId:this.id},r),t),{datum:t.datum.datum}));return bt(o,r)}return r}updateMarkerStyle(e,t,i,s=t.getStyle(),{applyTranslation:n=!0}={}){const{point:a}=i.datum,r=this.getMarkerStyle(t,i,s),o=this.visible&&r.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);n?e.setProperties(Z(R({visible:o},r),{translationX:a?.x,translationY:a?.y})):e.setProperties(R({visible:o},r)),typeof t.shape=="function"&&!e.dirtyPath&&(e.path.clear({trackChanges:!0}),e.updatePath(),e.checkPathDirty())}getMinRect(){}get nodeDataDependencies(){var e;return(e=this._nodeDataDependencies)!=null?e:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=e??{width:NaN,height:NaN},s=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,n=Bi(this.nodeDataDependencies,s)!=null;return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}},kr.highlightedZIndex=1e12,x([Ie({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],kr.prototype,"seriesGrouping",2)}}),Om,a_,gC=L({"packages/ag-charts-community/src/chart/series/seriesLayerManager.ts"(){"use strict";xe(),rs(),Om=30,a_=class{constructor(e){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=e}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){var t,i,s,n;const{internalId:a,type:r,rootGroup:o,highlightGroup:l,annotationGroup:c,seriesGrouping:h}=e,{groupIndex:u=a}=h??{};if(this.series[a]!=null)throw new Error(`AG Charts - series already has an allocated layer: ${this.series[a]}`);Object.keys(this.series).length===0&&(this.mode=this.expectedSeriesCount>=Om?"aggressive-grouping":"normal"),(i=(t=this.groups)[r])!=null||(t[r]={});const d=this.lookupIdx(u);let p=this.groups[r][d];return p||(p=(n=(s=this.groups[r])[d])!=null?n:s[d]={seriesIds:[],group:this.rootGroup.appendChild(new et({name:`${r}-content`,layer:!0,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new et({name:`${r}-highlight`,layer:!0,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new et({name:`${r}-annotation`,layer:!0,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("annotation")}))}),this.series[a]={layerState:p,seriesConfig:e},p.seriesIds.push(a),p.group.appendChild(o),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(e){var t,i;const{internalId:s,seriesGrouping:n,type:a,rootGroup:r,highlightGroup:o,annotationGroup:l,oldGrouping:c}=e,{groupIndex:h=s}=n??{};(i=(t=this.groups[a])==null?void 0:t[h])!=null&&i.seriesIds.includes(s)||(this.series[s]!=null&&this.releaseGroup({internalId:s,seriesGrouping:c,type:a,rootGroup:r,highlightGroup:o,annotationGroup:l}),this.requestGroup(e))}releaseGroup(e){var t,i,s,n,a;const{internalId:r,seriesGrouping:o,rootGroup:l,highlightGroup:c,annotationGroup:h,type:u}=e,{groupIndex:d=r}=o??{};if(this.series[r]==null)throw new Error(`AG Charts - series doesn't have an allocated layer: ${r}`);const p=this.lookupIdx(d),g=(s=(t=this.groups[u])==null?void 0:t[p])!=null?s:(i=this.series[r])==null?void 0:i.layerState;if(g&&(g.seriesIds=g.seriesIds.filter(f=>f!==r),g.group.removeChild(l),g.highlight.removeChild(c),g.annotation.removeChild(h)),g?.seriesIds.length===0)this.rootGroup.removeChild(g.group),this.rootGroup.removeChild(g.highlight),this.rootGroup.removeChild(g.annotation),delete this.groups[u][p],delete this.groups[u][r];else if(g?.seriesIds.length>0){const f=(a=this.series[(n=g?.seriesIds)==null?void 0:n[0]])==null?void 0:a.seriesConfig;g.group.zIndexSubOrder=f?.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=f?.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=f?.getGroupZIndexSubOrder("annotation")}delete this.series[r]}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").slice(-1)[0]),!e)?0:Math.floor(Math.max(Math.min(e/this.expectedSeriesCount,1),0)*Om)}destroy(){for(const e of Object.values(this.groups))for(const t of Object.values(e))this.rootGroup.removeChild(t.group),this.rootGroup.removeChild(t.highlight),this.rootGroup.removeChild(t.annotation);this.groups={},this.series={}}}}}),r_,fC=L({"packages/ag-charts-community/src/chart/series/seriesStateManager.ts"(){"use strict";r_=class{constructor(){this.groups={}}registerSeries({id:e,seriesGrouping:t,visible:i,type:s}){var n,a;t&&((a=(n=this.groups)[s])!=null||(n[s]={}),this.groups[s][e]={grouping:t,visible:i})}deregisterSeries({id:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&Object.keys(this.groups[t]).length===0&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){var s;if(!t)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const n=new Set,a=new Set;for(const[o,l]of Object.entries((s=this.groups[e])!=null?s:{}))l.visible&&(n.add(l.grouping.groupIndex),l.grouping.groupIndex===t.groupIndex&&a.add(l.grouping.stackIndex));const r=[...n.values()];return r.sort((o,l)=>o-l),{visibleGroupCount:r.length,visibleSameStackCount:a.size,index:r.indexOf(t.groupIndex)}}}}}),o_,mC=L({"packages/ag-charts-community/src/chart/update/baseLayoutProcessor.ts"(){"use strict";fi(),gt(),hr(),o_=class{constructor(e,t){this.chartLike=e,this.layoutService=t,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",i=>this.layoutComplete(i)),this.layoutService.addListener("start-layout",i=>this.positionPadding(i.shrinkRect)),this.layoutService.addListener("start-layout",i=>this.positionCaptions(i.shrinkRect)))}destroy(){this.destroyFns.forEach(e=>e())}layoutComplete({clipSeries:e,series:{paddedRect:t}}){const{seriesArea:i,seriesRoot:s}=this.chartLike;i.clip||e?s.setClipRectInGroupCoordinateSpace(t):s.setClipRectInGroupCoordinateSpace()}positionPadding(e){const{padding:t}=this.chartLike;return e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),{shrinkRect:e}}positionCaptions(e){var t,i,s,n;const{title:a,subtitle:r,footnote:o}=this.chartLike,l=e.clone(),c=p=>{var g;const f=e.height/10,m=(g=p.lineHeight)!=null?g:p.fontSize*Dt.defaultLineHeightRatio,v=e.width,y=Math.max(m,f);p.computeTextWrap(v,y)},h=p=>p==="left"?l.x:p==="right"?l.x+l.width:(p!=="center"&&$.error(`invalid textAlign value: ${p}`),l.x+l.width/2),u=(p,g)=>{const f=l.y;p.node.x=h(p.textAlign),p.node.y=f,p.node.textBaseline="top",c(p);const m=p.node.computeBBox(),v=Math.ceil(m.y-f+m.height+g);l.shrink(v,"top")},d=(p,g)=>{const f=l.y+l.height;p.node.x=h(p.textAlign),p.node.y=f,p.node.textBaseline="bottom",c(p);const m=p.node.computeBBox(),v=Math.ceil(f-m.y+g);l.shrink(v,"bottom")};if(r&&(r.node.visible=(t=r.enabled)!=null?t:!1),a&&(a.node.visible=a.enabled,a.node.visible)){const p=r?.node.visible?$t.SMALL_PADDING:$t.LARGE_PADDING,g=(i=a.spacing)!=null?i:p;u(a,g)}return r&&r.node.visible&&u(r,(s=r.spacing)!=null?s:0),o&&(o.node.visible=o.enabled,o.node.visible&&d(o,(n=o.spacing)!=null?n:0)),{shrinkRect:l}}}}}),l_,yC=L({"packages/ag-charts-community/src/chart/update/dataWindowProcessor.ts"(){"use strict";gr(),l_=class{constructor(e,t,i,s){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(e=>e())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return B(this,null,function*(){if(!this.dataService.isLazy())return;const e=this.getValidAxis();let t,i=!0;if(e){const s=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,s),i=this.shouldRefresh(e,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:t?.min,windowEnd:t?.max})})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(e.id);return i&&t.min===i.min&&t.max===i.max?!1:(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){var i,s;const n=(s=(i=e.scale).getDomain)==null?void 0:s.call(i);if(!t||!n||n.length===0||isNaN(Number(n[0])))return;const a=Number(n[1])-Number(n[0]),r=new Date(Number(n[0])+a*t.min),o=new Date(Number(n[0])+a*t.max);return{min:r,max:o}}}}}),c_,vC=L({"packages/ag-charts-community/src/chart/update/overlaysProcessor.ts"(){"use strict";c_=class{constructor(e,t,i,s){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutService=s,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",n=>this.onLayoutComplete(n)))}destroy(){this.destroyFns.forEach(e=>e())}onLayoutComplete({series:{rect:e}}){const t=this.dataService.isLoading(),i=this.chartLike.series.some(n=>{var a;return(a=n.data)==null?void 0:a.length}),s=this.chartLike.series.some(n=>n.visible);this.toggleOverlay(this.overlays.loading,e,t),this.toggleOverlay(this.overlays.noData,e,!t&&!i),this.toggleOverlay(this.overlays.noVisibleSeries,e,i&&!s)}toggleOverlay(e,t,i){i&&t?e.show(t):e.hide()}}}}),Nm,h_=L({"packages/ag-charts-community/src/chart/updateService.ts"(){"use strict";Go(),gr(),Nm=class extends fr{constructor(e){super(),this.updateCallback=e}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(e){this.dispatch("update-complete",{type:"update-complete",minRect:e})}}}}),cs,bd,pe,Lc,Sd=L({"packages/ag-charts-community/src/chart/chart.ts"(){"use strict";$a(),Kt(),xe(),oS(),Hb(),ni(),gE(),fE(),Fi(),Ls(),si(),gt(),mE(),Te(),hS(),Jf(),di(),Di(),xE(),bE(),Ut(),pt(),hr(),ie(),SE(),Sf(),gr(),gS(),fS(),co(),Pl(),tu(),Jh(),bS(),SS(),_S(),MS(),AS(),LS(),Vo(),CE(),OE(),NS(),wS(),rs(),PS(),HS(),JE(),eC(),$h(),sC(),Ii(),gC(),fC(),uc(),mC(),yC(),vC(),h_(),cs=te.create(!0,"opts"),bd=class extends Rt{constructor(){super(...arguments),this.padding=new Tn(0)}},x([M(rt,{optional:!0})],bd.prototype,"clip",2),x([M(nt)],bd.prototype,"padding",2),pe=class x2 extends Qf{constructor(t,i){var s;super(),this.id=Xs(this),this.seriesRoot=new et({name:`${this.id}-Series-root`}),this.debug=te.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new Tn(20),this.seriesArea=new bd,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.highlightManager=new nd,this.syncManager=new OS(this),this.zoomManager=new fm,this.modules=new Map,this.legends=new Map,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new cS,this.updateRequestors={},this.performUpdateTrigger=vE(u=>B(this,[u],function*({count:d}){this.destroyed||this.updateMutex.acquire(()=>B(this,null,function*(){try{yield this.performUpdate(d)}catch(p){$.error("update error",p)}}))})),this.axes=[],this.series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=yE(()=>{this.lastInteractionEvent&&(this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0)}),this.onSeriesNodeClick=u=>{const d=Z(R({},u),{type:"seriesNodeClick"});Object.defineProperty(d,"series",{enumerable:!1,get:()=>u.series}),this.fireEvent(d)},this.onSeriesNodeDoubleClick=u=>{const d=Z(R({},u),{type:"seriesNodeDoubleClick"});this.fireEvent(d)},this.seriesGroupingChanged=u=>{if(!(u instanceof xd))return;const{series:d,seriesGrouping:p,oldGrouping:g}=u;d.rootGroup.parent!=null&&this.seriesLayerManager.changeGroup({internalId:d.internalId,type:d.type,rootGroup:d.rootGroup,highlightGroup:d.highlightGroup,annotationGroup:d.annotationGroup,getGroupZIndexSubOrder:f=>d.getGroupZIndexSubOrder(f),seriesGrouping:p,oldGrouping:g})},this.chartOptions=t;const{window:n,document:a}=t.specialOverrides,r=i?.scene,o=(s=i?.element)!=null?s:a.createElement("div"),l=i?.container,c=new et({name:"root"});c.visible=!1,c.append(this.seriesRoot),this.axisGridGroup=new et({name:"Axes-Grids",layer:!0,zIndex:1}),c.appendChild(this.axisGridGroup),this.axisGroup=new et({name:"Axes",layer:!0,zIndex:2}),c.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=r??new ed(this.chartOptions.specialOverrides),this.scene.root=c,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new um,this.contextMenuRegistry=new dm,this.cursorManager=new pm(o),this.highlightManager=new nd,this.interactionManager=new cm(o,a,n),this.regionManager=new CS(this.interactionManager),this.gestureDetector=new gm(o),this.layoutService=new mm,this.updateService=new Nm((u=0,d)=>this.update(u,d)),this.seriesStateManager=new r_,this.seriesLayerManager=new a_(this.seriesRoot),this.callbackCache=new lS,this.animationManager=new hm(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.dataService=new Sc(this.animationManager),this.overlays=new $S(this.element,this.animationManager),this.processors=[new o_(this,this.layoutService),new l_(this,this.dataService,this.updateService,this.zoomManager),new c_(this,this.overlays,this.dataService,this.layoutService)],this.tooltip=new vf(this.scene.canvas.element,a,n,a.body),this.tooltipManager=new rd(this.tooltip,this.interactionManager),this.highlight=new em,this.container=l,this.attachLegend("category",yi),this.legend=this.legends.get("category");const{All:h}=_c;tm.observe(this.element,u=>this.rawResize(u)),this._destroyFns.push(this.dataService.addListener("data-load",u=>{this.data=u.data}),this.interactionManager.addListener("click",u=>this.onClick(u)),this.interactionManager.addListener("dblclick",u=>this.onDoubleClick(u)),this.interactionManager.addListener("hover",u=>this.onMouseMove(u)),this.interactionManager.addListener("leave",u=>this.onLeave(u)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.resetPointer()),this.interactionManager.addListener("drag",()=>this.resetPointer()),this.interactionManager.addListener("contextmenu",u=>this.onContextMenu(u),h),this.animationManager.addListener("animation-frame",()=>{this.update(6)}),this.highlightManager.addListener("highlight-change",u=>this.changeHighlightDatum(u)),this.zoomManager.addListener("zoom-change",()=>this.update(2,{forceNodeDataRefresh:!0,skipAnimations:!0})))}static getInstance(t){return x2.chartsInstances.get(t)}onAutoSizeChange(t){const{style:i}=this.element;if(t){if(i.display="block",i.width="100%",i.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else i.display="inline-block",i.width="auto",i.height="auto"}download(t,i){this.scene.download(t,i)}getOptions(){var t;return(t=this.queuedUserOptions.at(-1))!=null?t:this.userOptions}addModule(t){if(this.modules.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);const i=new t.instanceConstructor(this.getModuleContext());if(t.type==="legend"){const s=i;this.legends.set(t.identifier,s),s.attachLegend(this.scene.root)}this.modules.set(t.optionsKey,i)}removeModule(t){var i;t.type==="legend"&&this.legends.delete(t.identifier),(i=this.modules.get(t.optionsKey))==null||i.destroy(),this.modules.delete(t.optionsKey)}attachLegend(t,i){const s=new i(this.getModuleContext());this.legends.set(t,s),s.attachLegend(this.scene.root)}isModuleEnabled(t){return this.modules.has(t.optionsKey)}getModuleContext(){return{window:this.chartOptions.specialOverrides.window,document:this.chartOptions.specialOverrides.document,scene:this.scene,animationManager:this.animationManager,chartEventManager:this.chartEventManager,contextMenuRegistry:this.contextMenuRegistry,cursorManager:this.cursorManager,highlightManager:this.highlightManager,interactionManager:this.interactionManager,regionManager:this.regionManager,gestureDetector:this.gestureDetector,tooltipManager:this.tooltipManager,syncManager:this.syncManager,zoomManager:this.zoomManager,chartService:this,dataService:this.dataService,layoutService:this.layoutService,updateService:this.updateService,seriesStateManager:this.seriesStateManager,callbackCache:this.callbackCache}}resetAnimations(){var t;this.chartAnimationPhase="initial";for(const i of this.series)i.resetAnimation(this.chartAnimationPhase);for(const i of this.axes)i.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,(t=this.animationManager)==null||t.reset()}skipAnimations(){this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){if(this.destroyed)return;const i=t?.keepTransferableResources;let s;this.performUpdateType=7,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),this.legends.forEach(n=>n.destroy()),this.legends.clear(),this.overlays.destroy(),tm.unobserve(this.element);for(const n of this.modules.values())n?.destroy();return this.modules.clear(),this.regionManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.zoomManager.destroy(),i?(this.scene.strip(),s={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this.animationRect=void 0,this.animationManager.reset(),this.syncManager.destroy(),this.destroyed=!0,Object.freeze(this),s}resetPointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>B(this,null,function*(){this.destroyed||(yield t(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})))}update(t=0,i){var s,n;const{forceNodeDataRefresh:a=!1,skipAnimations:r,seriesToUpdate:o=this.series,newAnimationBatch:l}=i??{};a&&this.series.forEach(c=>c.markNodeDataDirty());for(const c of o)this.seriesToUpdate.add(c);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),l&&this.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=(s=i?.skipSync)!=null?s:!1,this.debug.check()){let c=(n=new Error().stack)!=null?n:"<unknown>";c=c.replace(/\([^)]*/g,""),this.updateRequestors[c]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.performUpdateTrigger.schedule(i?.backOffMs))}performUpdate(t){return B(this,null,function*(){const{performUpdateType:i,extraDebugStats:s}=this,n=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.updateShortcutCount===0&&i<6&&(this.animationManager.startBatch(this._performUpdateSkipAnimations),this.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",zo[i]);const a={start:performance.now()};switch(i){case 0:case 1:yield this.updateData(),a["\u2B07\uFE0F"]=performance.now();case 2:yield this.processData(),this.resetPointer(!0),a["\u{1F3ED}"]=performance.now();case 3:if(this.checkUpdateShortcut(3)||!this.checkFirstAutoSize(n))break;yield this.processLayout(),a["\u2316"]=performance.now();case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:o}=this;yield Promise.all(n.map(c=>c.update({seriesRect:o}))),a["\u{1F914}"]=performance.now();case 5:if(this.checkUpdateShortcut(5))break;const l=this.tooltipManager.getTooltipMeta(this.id);i<=4&&l!==void 0&&this.handlePointer(l.lastPointerEvent,!0),a["\u2196"]=performance.now();case 6:if(this.checkUpdateShortcut(6))break;s.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:a,extraDebugStats:s}),this.extraDebugStats={};case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const r=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((r-a.start)*100)/100,count:t,performUpdateType:zo[i]})})}checkUpdateShortcut(t){return this.updateShortcutCount>3?($.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const i=this._performUpdateNoRenderCount++,s=mt(i,2)*10;if(i<8)return this.update(3,{seriesToUpdate:t,backOffMs:s}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",s),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onSeriesChange(t,i){var s,n;const a=(s=i?.filter(r=>!t.includes(r)))!=null?s:[];this.destroySeries(a),(n=this.seriesLayerManager)==null||n.setSeriesCount(t.length);for(const r of t){if(i?.includes(r))continue;r.rootGroup.parent==null&&this.seriesLayerManager.requestGroup(r);const o=this;r.chart={get mode(){return o.mode},get isMiniChart(){return!1},get seriesRect(){return o.seriesRect},placeLabels(){return o.placeLabels()}},r.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(r),r.addChartEventListeners()}}destroySeries(t){t?.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(i=>i.axes[t.direction]===t)})}assignAxesToSeries(){const t=zg(this.axes,i=>i.direction);this.series.forEach(i=>{i.directions.forEach(s=>{const n=t[s];if(!n){$.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const a=i.getKeys(s),r=this.findMatchingAxis(n,a);if(!r){$.warnOnce(`no matching axis for direction [${s}] and keys [${a}]; check series and axes configuration.`);return}i.axes[s]=r})})}findMatchingAxis(t,i){for(const s of t){if(!s.keys.length)return s;if(i){for(const n of i)if(s.keys.includes(n))return s}}}rawResize(t){var i;let{width:s,height:n}=t;if(s=Math.floor(s),n=Math.floor(n),!this.autoSize||s===0&&n===0)return;const[a=0,r=0]=(i=this._lastAutoSize)!=null?i:[];a===s&&r===n||(this._lastAutoSize=[s,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,i,s){var n,a,r,o;if(t??(t=(a=this.width)!=null?a:this.autoSize?(n=this._lastAutoSize)==null?void 0:n[0]:this.scene.canvas.width),i??(i=(o=this.height)!=null?o:this.autoSize?(r=this._lastAutoSize)==null?void 0:r[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${s}`,{width:t,height:i,stack:new Error().stack}),!(!t||!i||!Et(t)||!Et(i))&&this.scene.resize(t,i)){this.resetPointer(),this.animationManager.reset();let l=!0;this.autoSize&&this._firstAutoSize&&(l=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:l})}}updateData(){return B(this,null,function*(){this.series.forEach(i=>i.setChartData(this.data));const t=Array.from(this.modules.values(),i=>{var s;return(s=i.updateData)==null?void 0:s.call(i,{data:this.data})});yield Promise.all(t)})}processData(){return B(this,null,function*(){if(this.series.some(n=>n.canHaveAxes)){this.assignAxesToSeries(),this.assignSeriesToAxes();const n=this.modules.get("sync");n?.enabled&&n.syncAxes(this._skipSync)}const t=new nm(this.mode),i=this.series.map(n=>n.processData(t)),s=Array.from(this.modules.values(),n=>{var a;return(a=n.processData)==null?void 0:a.call(n,{dataController:t})});t.execute(),yield Promise.all([...i,...s]),yield this.updateLegend()})}placeLabels(){const t=[],i=[];for(const c of this.series){if(!c.visible)continue;const h=c.getLabelData();qI(h?.[0])&&(i.push(h),t.push(c))}const{seriesRect:s}=this,{top:n,right:a,bottom:r,left:o}=this.seriesArea.padding,l=s&&i.length>0?ZI(i,{x:-o,y:-n,width:s.width+o+a,height:s.height+n+r}):[];return new Map(l.map((c,h)=>[t[h],c]))}updateLegend(){return B(this,null,function*(){this.legends.forEach((t,i)=>{const s=a=>a.every(r=>r.legendType==="category"),n=this.series.filter(a=>a.properties.showInLegend).flatMap(a=>a.getLegendData(i));s(n)&&this.mode!=="integrated"&&this.validateCategoryLegendData(n),t.data=n})})}validateCategoryLegendData(t){const i={};t.forEach(s=>{var n,a,r,o,l;const c=(n=this.series.find(h=>h.id===s.seriesId))==null?void 0:n.type;c&&((a=i[c])!=null||(i[c]={}),(l=(r=i[c])[o=s.label.text])!=null||(r[o]=new Set),s.marker.fill!=null&&i[c][s.label.text].add(s.marker.fill))});for(const s of Object.values(i))for(const[n,a]of Object.entries(s))a.size>1&&$.warnOnce(`legend item '${n}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){return B(this,null,function*(){var t;const i=this.animationRect;yield this.performLayout(),i&&!((t=this.animationRect)!=null&&t.equals(i))&&this.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return B(this,null,function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:i}=this.scene;let s={shrinkRect:new ht(0,0,t,i)};s=this.layoutService.dispatchPerformLayout("start-layout",s),s=this.layoutService.dispatchPerformLayout("before-series",s);const n=Array.from(this.modules.values(),a=>B(this,null,function*(){var r;a.performLayout!=null&&(s=yield(r=a.performLayout)==null?void 0:r.call(a,s))}));return yield Promise.all(n),s.shrinkRect})}pickSeriesNode(t,i,s){var n,a;const r=performance.now(),o=i?[0]:void 0,l=[...this.series].reverse();let c;for(const h of l){if(!h.visible||!h.rootGroup.visible)continue;const{match:u,distance:d}=(n=h.pickNode(t,o))!=null?n:{};if(!(!u||d==null)&&((!c||c.distance>d)&&d<=(s??1/0)&&(c={series:h,distance:d,datum:u}),d===0))break}return this.extraDebugStats.pickSeriesNode=Math.round(((a=this.extraDebugStats.pickSeriesNode)!=null?a:0)+(performance.now()-r)),c}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(6)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||(this.resetPointer(),this.update(6))}onContextMenu(t){this.tooltipManager.removeTooltip(this.id);const{Default:i,ContextMenu:s}=_c;this.interactionManager.getState()&(i|s)&&this.checkSeriesNodeRange(t,(n,a)=>{this.highlightManager.updateHighlight(this.id,a)})}handlePointer(t,i){if(this.interactionManager.getState()!==8)return;const{lastPick:s,hoverRect:n}=this,{offsetX:a,offsetY:r}=t,o=(l=!1)=>{s&&this.resetPointer(l)};if(i&&this.animationManager.isActive()){o();return}if(!n?.containsPoint(a,r)){o();return}this.handlePointerTooltip(t,o),this.handlePointerNode(t)}handlePointerTooltip(t,i){const{lastPick:s,tooltip:n}=this,{range:a}=n,{offsetX:r,offsetY:o}=t;let l;Et(a)&&(l=a);const c=this.pickSeriesNode({x:r,y:o},a==="exact",l);if(!c){this.tooltipManager.removeTooltip(this.id),this.highlight.range==="tooltip"&&i(!0);return}const h=this.highlight.range==="node"||!s||s!==c.datum;let u;h&&(u=c.series.getTooltipHtml(c.datum),this.highlight.range==="tooltip"&&this.highlightManager.updateHighlight(this.id,c.datum));const d=l!=null,p=this.tooltip.enabled&&c.series.properties.tooltip.enabled,g=a==="exact"&&c.distance===0,m=p&&(a==="nearest"||d||g)&&(!h||u!==void 0),v=rd.makeTooltipMeta(t,c.datum);m&&this.tooltipManager.updateTooltip(this.id,v,u)}handlePointerNode(t){this.checkSeriesNodeRange(t,(s,n)=>{(s.hasEventListener("nodeClick")||s.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id,n)})||(this.cursorManager.updateCursor("chart"),this.highlight.range==="node"&&this.highlightManager.updateHighlight(this.id))}onClick(t){if(this.checkSeriesNodeClick(t)){this.update(4);return}this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){if(this.checkSeriesNodeDoubleClick(t)){this.update(4);return}this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(i,s)=>i.fireNodeClickEvent(t.sourceEvent,s))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(i,s)=>i.fireNodeDoubleClickEvent(t.sourceEvent,s))}checkSeriesNodeRange(t,i){const s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=s?.datum,a=n?.series.properties.nodeClickRange;let r;Et(a)&&(r=a);let o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(o?this.highlightManager.updatePicked(this.id,o.datum):this.highlightManager.updatePicked(this.id),n&&a==="nearest")return i(n.series,n),!0;if(a!=="exact"&&(o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!o)return!1;const l=r!=null,c=a==="exact"&&o.distance===0;return l||c?(i(o.series,o.datum),!0):!1}changeHighlightDatum(t){var i,s;const n=new Set,{series:a=void 0,datum:r}=(i=t.currentHighlight)!=null?i:{},{series:o=void 0,datum:l}=(s=t.previousHighlight)!=null?s:{};o&&n.add(o),a&&n.add(a),o?.properties.cursor&&l&&this.cursorManager.updateCursor(o.id),a?.properties.cursor&&r&&this.cursorManager.updateCursor(a.id,a.properties.cursor),this.lastPick=t.currentHighlight,a==null||o==null?this.update(4):this.update(4,{seriesToUpdate:n})}waitForUpdate(t=5e3){return B(this,null,function*(){const i=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this.performUpdateType!==7;){if(performance.now()-i>t)throw new Error("waitForUpdate() timeout reached.");yield pE(5)}yield this.updateMutex.waitForClearAcquireQueue()})}getMinRect(){const t=this.series.map(i=>i.getMinRect()).filter(i=>i!==void 0);if(t.length)return new ht(0,0,t.reduce((i,s)=>Math.max(i,s.width),0),t.reduce((i,s)=>Math.max(i,s.height),0))}filterMiniChartSeries(t){return t!=null?t.filter(i=>i.showInMiniChart!==!1):t}applyOptions(t){var i,s,n,a,r,o;const l=this.processedOptions,c=t.diffOptions(l),h=t.userOptions;if(c==null)return;cs("AgChartV2.updateDelta() - applying delta",c);const u=bt(c,l),d=this.applyModules(u),p=["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.label"];(Ja(c)||Fl(c))&&p.push("axes"),c.listeners&&this.registerListeners(this,c.listeners),this.applyOptionValues(this,c,{skip:p});let g=!1,f="no-op";c.series&&c.series.length>0&&(f=this.applySeries(this,c.series,l?.series),g=!0),f==="replaced"&&this.resetAnimations(),this.applyAxes(this,u,l,f)&&(g=!0);const m=!!c.data||f==="data-change"||f==="replaced",v=tI(),y=Object.values(v).some(T=>c[T]!=null),b=c.title!=null&&c.subtitle!=null;g=g||m||y||b,c.data&&(this.data=c.data),(i=c.legend)!=null&&i.listeners&&Object.assign(this.legend.listeners,c.legend.listeners),c.listeners&&this.updateAllSeriesListeners(),this.chartOptions=t,this.processedOptions=u,this.userOptions=bt(h,this.userOptions);const _=this.modules.get("navigator"),S=this.modules.get("zoom");!_?.enabled&&!S?.enabled&&this.zoomManager.updateZoom();const D=_?.miniChart;if(D?.enabled===!0&&c?.series!=null){const T=this.applySeries(D,this.filterMiniChartSeries(c.series),this.filterMiniChartSeries(l?.series));this.applyAxes(D,c,l,T,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const E=D.axes,C=E.find(O=>O.direction==="x");for(const O of E)O.gridLine.enabled=!1,O.label.enabled=O===C,O.tick.enabled=!1,O.interactionEnabled=!1;if(C!=null){const O=(n=(s=c.navigator)==null?void 0:s.miniChart)==null?void 0:n.label,N=(o=(r=(a=c.navigator)==null?void 0:a.miniChart)==null?void 0:r.label)==null?void 0:o.interval;ea(C.label,O,{path:"navigator.miniChart.label",skip:["navigator.miniChart.label.interval","navigator.miniChart.label.rotation","navigator.miniChart.label.minSpacing","navigator.miniChart.label.autoRotate","navigator.miniChart.label.autoRotateAngle"]}),ea(C.tick,N,{path:"navigator.miniChart.interval",skip:["navigator.miniChart.interval.enabled","navigator.miniChart.interval.width","navigator.miniChart.interval.size","navigator.miniChart.interval.color","navigator.miniChart.interval.interval","navigator.miniChart.interval.step"]});const w=N?.step;w!=null&&(C.tick.interval=w)}}else D?.enabled===!1&&(D.series=[],D.axes=[]);const I=g||d?1:3;cs("AgChartV2.applyChartOptions() - update type",zo[I]),this.update(I,{forceNodeDataRefresh:g,newAnimationBatch:!0})}applyModules(t){let i=!1;for(const s of ks){if(s.type!=="root"&&s.type!=="legend")continue;const n=t[s.optionsKey],a=s.chartTypes.includes(this.constructor.type)&&n!=null,r=this.isModuleEnabled(s);a!==r&&(a?(this.addModule(s),this[s.optionsKey]=this.modules.get(s.optionsKey)):(this.removeModule(s),delete this[s.optionsKey]),i=!0)}return i}applySeries(t,i,s){if(!i)return"no-change";const n=tC(t.series,i,s);if(n.status==="no-overlap")return cs(`AgChartV2.applySeries() - creating new series instances, status: ${n.status}`,n),t.series=this.createSeries(i),"replaced";cs("AgChartV2.applySeries() - matchResult",n);const a=[];for(const l of n.changes){if(l.status==="add"){const d=this.createSeries([l.opts])[0];a.push(d),cs("AgChartV2.applySeries() - created new series",d);continue}else if(l.status==="remove"){cs(`AgChartV2.applySeries() - removing series at previous idx ${l.idx}`,l.series);continue}else if(l.status==="no-op"){a.push(l.series),cs(`AgChartV2.applySeries() - no change to series at previous idx ${l.idx}`,l.series);continue}const{series:c,diff:h,idx:u}=l;cs(`AgChartV2.applySeries() - applying series diff previous idx ${u}`,h,c),this.applySeriesValues(c,h),c.markNodeDataDirty(),a.push(c)}for(let l=0;l<a.length;l++)a[l]._declarationOrder=l;cs("AgChartV2.applySeries() - final series instances",a),t.series=a;const r=n.changes.some(({diff:l})=>l&&(l.seriesGrouping!=null||l.data!=null)),o=n.changes.every(l=>l.status==="no-op");return r?"data-change":o?"no-op":"updated"}applyAxes(t,i,s,n,a=[]){if(!("axes"in i)||!i.axes)return!1;a=["axes[].type",...a];const{axes:r}=i;return!(n==="replaced")&&t.axes.length===r.length&&t.axes.every((c,h)=>c.type===r[h].type)&&Ja(s)?(t.axes.forEach((c,h)=>{var u,d;const p=(d=(u=s.axes)==null?void 0:u[h])!=null?d:{},g=Bi(p,r[h]);cs(`AgChartV2.applyAxes() - applying axis diff idx ${h}`,g);const f=`axes[${h}]`;this.applyOptionValues(c,g,{path:f,skip:a})}),!0):(cs(`AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ${n}`),t.axes=this.createAxis(r,a),!0)}createSeries(t){var i;const s=[],n=this.getModuleContext();for(const a of t??[]){const r=(i=a.type)!=null?i:"unknown";if(o0(r)&&!AT(r))continue;const o=zT(r,n);this.applySeriesOptionModules(o,a),this.applySeriesValues(o,a),s.push(o)}return s}applySeriesOptionModules(t,i){const s=t.createModuleContext(),n=t.getModuleMap();for(const a of ks)a.type==="series-option"&&a.optionsKey in i&&a.seriesTypes.includes(t.type)&&n.addModule(a,r=>new r.instanceConstructor(s))}applySeriesValues(t,i){const s=t.getModuleMap(),n=i,{type:a,data:r,errorBar:o,listeners:l,seriesGrouping:c,showInMiniChart:h}=n,u=Le(n,["type","data","errorBar","listeners","seriesGrouping","showInMiniChart"]);t.properties.set(u),"data"in i&&(t.data=i.data),"errorBar"in i&&s.isModuleEnabled("errorBar")&&s.getModule("errorBar").properties.set(i.errorBar),i?.listeners&&this.registerListeners(t,i.listeners),c&&(t.seriesGrouping=R(R({},t.seriesGrouping),c))}createAxis(t,i){const s=new jS,n=this.getModuleContext();let a=0;for(const r of t??[]){const o=fT(r.type,n),l=`axes[${a++}]`;this.applyAxisModules(o,r),this.applyOptionValues(o,r,{path:l,skip:i}),s.push(o,r)}return s.guessInvalidPositions()}applyAxisModules(t,i){let s=!1;const n=ks.filter(r=>r.type==="axis-option"),a=t.createModuleContext();for(const r of n){const o=i[r.optionsKey]!=null,l=t.getModuleMap(),c=l.isModuleEnabled(r);o!==c&&(s=!0,o?(l.addModule(r,h=>new h.instanceConstructor(a)),t[r.optionsKey]=l.getModule(r)):(l.removeModule(r),delete t[r.optionsKey]))}return s}applyOptionValues(t,i,{skip:s,path:n}={}){const a=this.getModuleContext();class r extends $t{constructor(){super(),this.registerInteraction(a)}}return ea(t,i,{constructors:Z(R({},bf.constructors),{title:r,subtitle:r,footnote:r}),constructedArrays:xf.constructedArrays,allowedTypes:R({},bf.allowedTypes),skip:s,path:n})}registerListeners(t,i){t.clearEventListeners();for(const[s,n]of Object.entries(i))uo(n)&&t.addEventListener(s,n)}},pe.chartsInstances=new WeakMap,pe.NodeValueChangeOptions={newValue(e){var t;(t=this.scene.root)==null||t.appendChild(e.node)},oldValue(e){var t;(t=this.scene.root)==null||t.removeChild(e.node)}},x([Ie({newValue(e){this.destroyed||(e.setAttribute("data-ag-charts",""),e.appendChild(this.element),pe.chartsInstances.set(e,this))},oldValue(e){e.removeAttribute("data-ag-charts"),e.removeChild(this.element),pe.chartsInstances.delete(e)}})],pe.prototype,"container",2),x([Ie({newValue(e){this.resize(e,void 0,"width option")}})],pe.prototype,"width",2),x([Ie({newValue(e){this.resize(void 0,e,"height option")}})],pe.prototype,"height",2),x([Ie({newValue(e){this.onAutoSizeChange(e)}}),M(rt)],pe.prototype,"autoSize",2),x([M(nt)],pe.prototype,"padding",2),x([M(nt)],pe.prototype,"seriesArea",2),x([Ie(pe.NodeValueChangeOptions)],pe.prototype,"title",2),x([Ie(pe.NodeValueChangeOptions)],pe.prototype,"subtitle",2),x([Ie(pe.NodeValueChangeOptions)],pe.prototype,"footnote",2),x([M(le(["standalone","integrated"],"a chart mode"))],pe.prototype,"mode",2),x([Ie({changeValue(e,t=[]){for(const i of t)e.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of e)t?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup);this.zoomManager.updateAxes(e)}})],pe.prototype,"axes",2),x([Ie({changeValue(e,t){this.onSeriesChange(e,t)}})],pe.prototype,"series",2),Lc=pe}}),Rm,u_=L({"packages/ag-charts-community/src/chart/series/dataModelSeries.ts"(){"use strict";Ui(),ie(),Ii(),Rm=class extends kr{isContinuous(){var e,t;const i=wt.is((e=this.axes.x)==null?void 0:e.scale),s=wt.is((t=this.axes.y)==null?void 0:t.scale);return{isContinuousX:i,isContinuousY:s}}getModulePropertyDefinitions(){return this.moduleMap.mapValues(e=>e.getPropertyDefinitions(this.isContinuous())).flat()}requestDataModel(e,t,i){return B(this,null,function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=yield e.request(this.id,t??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}})}isProcessedDataAnimatable(){var e,t;const i=(t=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:t.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:n}=i;return s&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}}}),on,Tc,wm,Ho,hs,Ic=L({"packages/ag-charts-community/src/chart/series/seriesProperties.ts"(){"use strict";di(),pt(),on=class extends Rt{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}},x([M(kt,{optional:!0})],on.prototype,"fill",2),x([M(Ct,{optional:!0})],on.prototype,"fillOpacity",2),x([M(kt,{optional:!0})],on.prototype,"stroke",2),x([M(K,{optional:!0})],on.prototype,"strokeWidth",2),x([M(Ct,{optional:!0})],on.prototype,"strokeOpacity",2),x([M(Zs,{optional:!0})],on.prototype,"lineDash",2),x([M(K,{optional:!0})],on.prototype,"lineDashOffset",2),Tc=class extends Rt{},x([M(K,{optional:!0})],Tc.prototype,"strokeWidth",2),x([M(Ct,{optional:!0})],Tc.prototype,"dimOpacity",2),x([M(rt,{optional:!0})],Tc.prototype,"enabled",2),wm=class extends Rt{constructor(){super(...arguments),this.color="black"}},x([M(kt,{optional:!0})],wm.prototype,"color",2),Ho=class extends Rt{constructor(){super(...arguments),this.item=new on,this.series=new Tc,this.text=new wm}},x([M(nt)],Ho.prototype,"item",2),x([M(nt)],Ho.prototype,"series",2),x([M(nt)],Ho.prototype,"text",2),hs=class extends Rt{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new Ho}},x([M(X,{optional:!0})],hs.prototype,"id",2),x([M(rt)],hs.prototype,"visible",2),x([M(rt)],hs.prototype,"showInLegend",2),x([M(X)],hs.prototype,"cursor",2),x([M(Iu)],hs.prototype,"nodeClickRange",2),x([M(nt)],hs.prototype,"highlightStyle",2)}}),d_,p_,_d,Nn,Rn,Hi=L({"packages/ag-charts-community/src/chart/series/cartesian/cartesianSeries.ts"(){"use strict";ya(),pc(),Ui(),zf(),Kt(),xe(),xa(),In(),fi(),Fi(),pt(),xc(),ie(),rs(),En(),u_(),Ii(),Ic(),d_={x:["xKey"],y:["yKey"]},p_={x:["xName"],y:["yName"]},_d=class extends Yo{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Nn=class extends hs{},x([M(X,{optional:!0})],Nn.prototype,"legendItemName",2),Rn=class extends Rm{constructor(e){var t=e,{pathsPerSeries:i=1,hasMarkers:s=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:a=[],directionKeys:r=d_,directionNames:o=p_,datumSelectionGarbageCollection:l=!0,markerSelectionGarbageCollection:c=!0,animationAlwaysUpdateSelections:h=!1,animationResetFns:u}=t,d=Le(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns"]);super(R({directionKeys:r,directionNames:o,useSeriesGroupLayer:!0,canHaveAxes:!0},d)),this._contextNodeData=[],this.NodeClickEvent=_d,this.highlightSelection=jt.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=jt.select(this.highlightLabel,Dt),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=te.create(),this.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:a,directionKeys:r,directionNames:o,animationResetFns:u,animationAlwaysUpdateSelections:h,datumSelectionGarbageCollection:l,markerSelectionGarbageCollection:c},this.animationState=new Oo("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:p=>this.animateWaitingUpdateReady(p)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData.slice()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(e){return B(this,arguments,function*({seriesRect:t}){var i,s;const{visible:n,_contextNodeData:a}=this,{series:r}=(s=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())!=null?s:{},o=r?r===this:void 0,l=this.checkResize(t),c=yield this.updateHighlightSelection(o);yield this.updateSelections(n),yield this.updateNodes(c,o,n);const h=this.getAnimationData(t,a);l&&this.animationState.transition("resize",h),this.animationState.transition("update",h)})}updateSelections(e){return B(this,null,function*(){const t=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!e&&t)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const i=this.isProcessedDataAnimatable();this._contextNodeData.forEach(a=>{var r;(r=a.animationValid)!=null||(a.animationValid=i)}),yield this.updateSeriesGroups();const{dataModel:s,processedData:n}=this;s!==void 0&&n!==void 0&&this.dispatch("data-update",{dataModel:s,processedData:n})}yield Promise.all(this.subGroups.map((i,s)=>this.updateSeriesGroupSelections(i,s)))}})}updateSeriesGroupSelections(e,t,i){return B(this,null,function*(){const{datumSelection:s,labelSelection:n,markerSelection:a,paths:r}=e,o=this._contextNodeData[t],{nodeData:l,labelData:c,itemId:h}=o;yield this.updatePaths({seriesHighlighted:i,itemId:h,contextData:o,paths:r,seriesIdx:t}),e.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:s,seriesIdx:t}),e.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:n,seriesIdx:t}),a&&(e.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:a,seriesIdx:t}))})}markerFactory(){const e=Ma();return new e}updateSeriesGroups(){return B(this,null,function*(){const{_contextNodeData:e,contentGroup:t,subGroups:i,opts:{pathsPerSeries:s,hasMarkers:n,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:r}}=this;if(e.length===i.length)return;e.length<i.length&&i.splice(e.length).forEach(({dataNodeGroup:l,markerGroup:c,labelGroup:h,paths:u})=>{t.removeChild(l),c&&t.removeChild(c),h&&t.removeChild(h);for(const d of u)t.removeChild(d)});const o=e.length;for(;o>i.length;){const c=this.subGroupId++,h=new et({name:`${this.id}-series-sub${c}-dataNodes`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data",c)}),u=n?new et({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",c)}):void 0,d=new et({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:7,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",c)});t.appendChild(h),t.appendChild(d),u&&t.appendChild(u);const p=[];for(let g=0;g<s;g++)p[g]=new Li,p[g].zIndex=4,p[g].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",g),t.appendChild(p[g]);i.push({paths:p,dataNodeGroup:h,markerGroup:u,labelGroup:d,labelSelection:jt.select(d,Dt),datumSelection:jt.select(h,()=>this.nodeFactory(),a),markerSelection:u?jt.select(u,()=>this.markerFactory(),r):void 0})}})}getGroupZIndexSubOrder(e,t=0){var i;const s=super.getGroupZIndexSubOrder(e,t);if(e==="paths"){const n=(i=this.opts.pathsZIndexSubOrderOffset[t])!=null?i:0,a=s[0];typeof a=="function"?s[0]=()=>+a()+n:s[0]=+a+n}return s}updateNodes(e,t,i){return B(this,null,function*(){var s;const{highlightSelection:n,highlightLabelSelection:a,opts:{hasMarkers:r,hasHighlightedLabels:o}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&((s=this._contextNodeData)==null?void 0:s.length)>0&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!t;const h=this.getOpacity();r?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),o&&(yield this.updateLabelNodes({labelSelection:a,seriesIdx:-1})),yield Promise.all(this.subGroups.map((u,d)=>B(this,null,function*(){const{dataNodeGroup:p,markerGroup:g,datumSelection:f,labelSelection:m,markerSelection:v,paths:y,labelGroup:b}=u,{itemId:_}=this.contextNodeData[d],S=c;p.opacity=h,p.visible=l||S,b.visible=S,g&&(g.opacity=h,g.zIndex=p.zIndex>=4?p.zIndex:p.zIndex+1,g.visible=S),b&&(b.opacity=h),yield this.updatePathNodes({seriesHighlighted:t,itemId:_,paths:y,seriesIdx:d,opacity:h,visible:S,animationEnabled:l}),p.visible&&(yield this.updateDatumNodes({datumSelection:f,highlightedItems:e,isHighlight:!1,seriesIdx:d}),yield this.updateLabelNodes({labelSelection:m,seriesIdx:d}),r&&v&&(yield this.updateMarkerNodes({markerSelection:v,isHighlight:!1,seriesIdx:d})))})))})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum&&s.itemId===t.itemId);return i.length!==0?i:void 0}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){return B(this,null,function*(){var t;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this,a=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight(),r=e&&a?.datum?a:void 0;let o,l;if(r!=null){const c=this.isLabelEnabled();for(const{labelData:h,nodeData:u}of n)if(l=this.getHighlightData(u,r),o=c?this.getHighlightLabelData(h,r):void 0,(!c||o!=null)&&l!=null)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:s}),l})}pickNodeExactShape(e){var t;const i=super.pickNodeExactShape(e);if(i)return i;const{x:s,y:n}=e,{opts:{hasMarkers:a}}=this;let r;for(const{dataNodeGroup:o,markerGroup:l}of this.subGroups){let c=o.pickNode(s,n);if(!c&&a&&(c=l?.pickNode(s,n)),c)break}if(r)return{datum:r.datum,distance:0};for(const o of this.moduleMap.modules){const{datum:l}=(t=o.pickNodeExact(e))!=null?t:{};if(l!==void 0)return{datum:l,distance:0}}}pickNodeClosestDatum(e){var t,i;const{x:s,y:n}=e,{axes:a,rootGroup:r,_contextNodeData:o}=this,l=a.x,c=a.y,h=r.transformPoint(s,n);let u=1/0,d;for(const p of o)for(const g of p.nodeData){const{point:{x:f=NaN,y:m=NaN}={}}=g;if(isNaN(f)||isNaN(m)||!(l?.inRange(f)&&c?.inRange(m)))continue;const y=Math.max(mt(h.x-f,2)+mt(h.y-m,2),0);y<u&&(u=y,d=g)}for(const p of this.moduleMap.modules){const g=p.pickNodeNearest(e);if(g!==void 0&&g.distanceSquared<u){u=g.distanceSquared,d=g.datum;break}}if(d){const p=Math.max(Math.sqrt(u)-((i=(t=d.point)==null?void 0:t.size)!=null?i:0),0);return{datum:d,distance:p}}}pickNodeMainAxisFirst(e,t){var i,s;const{x:n,y:a}=e,{axes:r,rootGroup:o,_contextNodeData:l}=this,c=r.x,h=r.y,u=[c,h].filter(v=>v instanceof tn).map(v=>v.direction);if(t&&u.length===0)return;const[d="x"]=u,p=o.transformPoint(n,a),g=d==="x"?[p.x,p.y]:[p.y,p.x],f=[1/0,1/0];let m;for(const v of l)for(const y of v.nodeData){const{point:{x:b=NaN,y:_=NaN}={}}=y;if(isNaN(b)||isNaN(_)||!(c?.inRange(b)&&h?.inRange(_)))continue;const D=d==="x"?[b,_]:[_,b];let A=!0;for(let I=0;I<D.length;I++){const T=Math.abs(D[I]-g[I]);if(T>f[I]){A=!1;break}T<f[I]&&(f[I]=T,f.fill(1/0,I+1,f.length))}A&&(m=y)}if(m){let v=Math.max(mt(f[0],2)+mt(f[1],2)-((s=(i=m.point)==null?void 0:i.size)!=null?s:0),0);for(const y of this.moduleMap.modules){const b=y.pickNodeMainAxisFirst(e);if(b!==void 0&&b.distanceSquared<v){m=b.datum,v=b.distanceSquared;break}}return{datum:m,distance:Math.sqrt(v)}}}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:s,series:n}=e,a=t!=null&&t===e.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,{legendItemName:a}=this.properties,r=a!=null&&a===e.legendItemName;s.id===this.id||r?this.toggleSeriesItem(i,!0):t&&n===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[e]=this._contextNodeData;if(!e?.nodeData.length)return;const t=e.nodeData.map(({midPoint:s})=>{var n;return(n=s?.x)!=null?n:0}).sort((s,n)=>s-n).reduce((s,n,a,r)=>a>0?Math.max(s,n-r[a-1]):s,0),i=e.nodeData.map(({midPoint:s})=>{var n;return(n=s?.y)!=null?n:0}).sort((s,n)=>s-n).reduce((s,n,a,r)=>a>0?Math.max(s,n-r[a-1]):s,0);return new ht(0,0,t,i)}updateHighlightSelectionItem(e){return B(this,null,function*(){const{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:s}=e,n=i??[];if(t){const a=s;return this.updateMarkerSelection({nodeData:n,markerSelection:a,seriesIdx:-1})}else return this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})})}updateHighlightSelectionLabel(e){return B(this,null,function*(){var t;return this.updateLabelSelection({labelData:(t=e.items)!=null?t:[],labelSelection:e.highlightLabelSelection,seriesIdx:-1})})}updateDatumSelection(e){return B(this,null,function*(){return e.datumSelection})}updateDatumNodes(e){return B(this,null,function*(){})}updateMarkerSelection(e){return B(this,null,function*(){return e.markerSelection})}updateMarkerNodes(e){return B(this,null,function*(){})}updatePaths(e){return B(this,null,function*(){e.paths.forEach(t=>t.visible=!1)})}updatePathNodes(e){return B(this,null,function*(){const{paths:t,opacity:i,visible:s}=e;for(const n of t)n.opacity=i,n.visible=s})}resetAllAnimation(e){var t,i;const{path:s,datum:n,label:a,marker:r}=(i=(t=this.opts)==null?void 0:t.animationResetFns)!=null?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),s&&e.paths.forEach(o=>{Ee(o,s)}),n&&Ee(e.datumSelections,n),a&&Ee(e.labelSelections,a),r&&Ee(e.markerSelections,r),e.contextData.some(o=>o.animationValid===!1)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t,i;const{datum:s}=(i=(t=this.opts)==null?void 0:t.animationResetFns)!=null?i:{};s&&Ee([e],s)}animateReadyHighlightMarkers(e){var t,i;const{marker:s}=(i=(t=this.opts)==null?void 0:t.animationResetFns)!=null?i:{};s&&Ee([e],s)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(e,t){return{datumSelections:this.subGroups.map(({datumSelection:s})=>s),markerSelections:this.subGroups.filter(({markerSelection:s})=>s!==void 0).map(({markerSelection:s})=>s),labelSelections:this.subGroups.map(({labelSelection:s})=>s),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:t,paths:this.subGroups.map(({paths:s})=>s),seriesRect:e}}calculateScaling(){const e={},t=i=>{const s=this.axes[i];if(s){if(s.scale instanceof Yu){const{range:n,domain:a}=s.scale;e[i]={type:"log",convert:r=>s.scale.convert(r),domain:[a[0],a[1]],range:[n[0],n[1]]}}else if(s.scale instanceof wt){const{range:n}=s.scale,a=s.scale.getDomain();e[i]={type:"continuous",domain:[a[0],a[1]],range:[n[0],n[1]]}}else if(s.scale){const{domain:n}=s.scale;e[i]={type:"category",domain:n,range:n.map(a=>s.scale.convert(a))}}}};return t("x"),t("y"),e}}}}),g_,Md,f_,xC=L({"packages/ag-charts-community/src/chart/cartesianChart.ts"(){"use strict";He(),Mi(),gt(),Te(),xc(),Qu(),Sd(),ie(),Hi(),g_=["top","right","bottom","left"],Md=class b2 extends Lc{constructor(t,i){super(t,i),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}performLayout(){return B(this,null,function*(){const t=yield fn(b2.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:s}=this,{animationRect:n,seriesRect:a,visibility:r,clipSeries:o}=this.updateAxes(t);this.seriesRoot.visible=r.series,this.seriesRect=a,this.animationRect=n;const{x:l,y:c}=a;if(i)s.translationX=Math.floor(l),s.translationY=Math.floor(c),this.firstSeriesTranslation=!1;else{const{translationX:d,translationY:p}=s;$s(this.id,"seriesRect",this.animationManager,[this.seriesRoot],{translationX:d,translationY:p},{translationX:Math.floor(l),translationY:Math.floor(c)},{phase:"update"})}const h=a.clone().grow(this.seriesArea.padding);this.hoverRect=h,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:o,series:{rect:a,paddedRect:h,visible:r.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(d=>R({id:d.id},d.getLayoutState()))});const u=Array.from(this.modules.values(),d=>{var p;return(p=d.performCartesianLayout)==null?void 0:p.call(d,{seriesRect:a})});return yield Promise.all(u),t})}updateAxes(t){var i;const s=this.axes.flatMap(v=>{var y;return(y=v.crossLines)!=null?y:[]}).map(v=>v.id),n=this._lastCrossLineIds!=null&&this._lastCrossLineIds.length===s.length&&this._lastCrossLineIds.every((v,y)=>s[y]===v);let a,r;n?(a=R({},this._lastAxisWidths),r=R({},this._lastVisibility)):(a={top:0,bottom:0,left:0,right:0},r={crossLines:!0,series:!0},this._lastCrossLineIds=s);const o=new Set(this.axes.map(v=>v.position));for(const v of Object.keys(a))o.has(v)||delete a[v];const l=(v,y)=>Object.keys(v).some(b=>a[b]==null)?!1:r.crossLines===y.crossLines&&r.series===y.series&&Object.entries(a).every(([b,_])=>{const S=v[b];return _!=null||S!=null?_===S:!0}),c=v=>s0(v,y=>y&&Math.abs(y)===1/0?0:y!=null?Math.ceil(y):y);let h={},u={},d=!1,p=(i=this.seriesRect)==null?void 0:i.clone(),g=0,f={};do{Object.assign(a,h),Object.assign(r,u);const v=this.updateAxesPass(a,t.clone(),p);if(h=c(v.axisWidths),u=v.visibility,d=v.clipSeries,p=v.seriesRect,f=v.primaryTickCounts,g++>10){$.warn("unable to find stable axis layout.");break}}while(!l(h,u));this.axes.forEach(v=>{v.update(f[v.direction])});const m=5;return this.axes.forEach(v=>{if(v.setCrossLinesVisible(r.crossLines),!!p)switch(v.clipGrid(p.x,p.y,p.width+m,p.height+m),v.position){case"left":case"right":v.clipTickLines(t.x,p.y,t.width+m,p.height+m);break;case"top":case"bottom":v.clipTickLines(p.x,t.y,p.width+m,t.height+m);break}}),this._lastAxisWidths=a,this._lastVisibility=r,{seriesRect:p,animationRect:t,visibility:r,clipSeries:d}}updateAxesPass(t,i,s){const n={},a={},r={series:!0,crossLines:!0};let o=!1;const l={},c=this.applySeriesPadding(i),h=s?this.buildCrossLinePadding(t):{},u=this.buildAxisBound(c,t,h,r),d=this.buildSeriesRect(u,t);return this.axes.forEach(p=>{var g,f;const{position:m="left"}=p,{clipSeries:v,axisThickness:y,axisOffset:b}=this.calculateAxisDimensions({axis:p,seriesRect:d,paddedBounds:c,axisWidths:t,newAxisWidths:a,primaryTickCounts:l,clipSeries:o,addInterAxisPadding:((g=n[m])!=null?g:0)>0});n[m]=((f=n[m])!=null?f:0)+1,o=o||v,this.positionAxis({axis:p,axisBound:u,axisOffset:b,axisThickness:y,axisWidths:t,primaryTickCounts:l,seriesRect:d})}),{clipSeries:o,seriesRect:d,axisWidths:a,visibility:r,primaryTickCounts:l}}buildCrossLinePadding(t){var i;const s={};this.axes.forEach(n=>{n.crossLines&&n.crossLines.forEach(a=>{a.calculatePadding(s)})});for(const[n,a=0]of Object.entries(s))s[n]=Math.max(a-((i=t[n])!=null?i:0),0);return s}applySeriesPadding(t){const i=t.clone(),s=this.axes.slice().reverse();return g_.forEach(n=>{const a=this.seriesArea.padding[n],r=s.find(o=>o.position===n);r?r.seriesAreaPadding=a:i.shrink(a,n)}),i}buildAxisBound(t,i,s,n){var a,r,o,l;const c=t.clone(),{top:h=0,right:u=0,bottom:d=0,left:p=0}=s,g=p+u,f=h+d,m=((a=i.left)!=null?a:0)+((r=i.right)!=null?r:0)+g,v=((o=i.top)!=null?o:0)+((l=i.bottom)!=null?l:0)+f;return c.width<=m||c.height<=v?(n.crossLines=!1,n.series=!1,c):(c.x+=p,c.y+=h,c.width-=g,c.height-=f,c)}buildSeriesRect(t,i){const s=t.clone(),{top:n,bottom:a,left:r,right:o}=i;return s.x+=r??0,s.y+=n??0,s.width-=(r??0)+(o??0),s.height-=(n??0)+(a??0),s.width=Math.max(0,s.width),s.height=Math.max(0,s.height),s}clampToOutsideSeriesRect(t,i,s,n){const{x:a,y:r,width:o,height:l}=t,h=[a,r,a+o,r+l][(s==="x"?0:1)+(n===1?0:2)];return(n===1?Math.min:Math.max)(i,h)}calculateAxisDimensions(t){var i,s,n,a,r;const{axis:o,seriesRect:l,paddedBounds:c,axisWidths:h,newAxisWidths:u,primaryTickCounts:d,addInterAxisPadding:p}=t;let{clipSeries:g}=t;const{position:f="left",direction:m}=o,v=C=>C instanceof tn||C instanceof Ln?[0,l.height]:[l.height,0],y=(i=u[f])!=null?i:0;switch(f){case"top":case"bottom":o.range=[0,l.width],o.gridLength=l.height;break;case"right":case"left":o.range=v(o),o.gridLength=l.width;break}const{min:b,max:_}=this.zoomManager.getAxisZoom(o.id);o.visibleRange=[b,_],g||(g=o.dataDomain.clipped||o.visibleRange[0]>0||o.visibleRange[1]<1);let S=o.nice?d[m]:void 0;const D=m==="y",A=.3;o.maxThickness=o.thickness||(D?c.width:c.height)*A;const I=o.calculateLayout(S);S=I.primaryTickCount,(s=d[m])!=null||(d[m]=S);let T;if(o.thickness!=null&&o.thickness>0)T=o.thickness;else{const{bbox:C}=I;T=D?C.width:C.height}return p&&(T+=15),T=Math.ceil(T),u[f]=((n=u[f])!=null?n:0)+T,o.gridPadding=((a=h[f])!=null?a:0)-((r=u[f])!=null?r:0),{clipSeries:g,axisThickness:T,axisOffset:y,primaryTickCount:S}}positionAxis(t){var i,s,n,a;const{axis:r,axisBound:o,axisWidths:l,seriesRect:c,axisOffset:h,axisThickness:u}=t,{position:d}=r;switch(d){case"top":r.translation.x=o.x+((i=l.left)!=null?i:0),r.translation.y=this.clampToOutsideSeriesRect(c,o.y+1+h+u,"y",1);break;case"bottom":r.translation.x=o.x+((s=l.left)!=null?s:0),r.translation.y=this.clampToOutsideSeriesRect(c,o.y+o.height+1-u-h,"y",-1);break;case"left":r.translation.y=o.y+((n=l.top)!=null?n:0),r.translation.x=this.clampToOutsideSeriesRect(c,o.x+h+u,"x",1);break;case"right":r.translation.y=o.y+((a=l.top)!=null?a:0),r.translation.x=this.clampToOutsideSeriesRect(c,o.x+o.width-u-h,"x",-1);break}r.updatePosition({rotation:ri(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(t=>!(t instanceof Rn&&t.shouldFlipXY()))}},Md.className="CartesianChart",Md.type="cartesian",f_=Md}}),Ko,Dr,bC=L({"packages/ag-charts-community/src/chart/chartProxy.ts"(){"use strict";si(),Di(),Ko=class S2{static isInstance(t){var i;return t instanceof S2||((i=t.constructor)==null?void 0:i.name)==="AgChartInstanceProxy"&&t.chart!=null?!0:t.chart!=null&&this.validateImplementation(t)}static validateImplementation(t){var i;const s=["getOptions","destroy"],n=Object.keys((i=Object.getPrototypeOf(t))!=null?i:{});return s.every(a=>n.includes(a))}constructor(t){this.chart=t}getOptions(){return ii(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}},Ko.chartInstances=new WeakMap,x([Ie({oldValue(e){Ko.chartInstances.delete(e)},newValue(e){Ko.chartInstances.set(e,this)}})],Ko.prototype,"chart",2),Dr=Ko}}),ws,jo=L({"packages/ag-charts-community/src/scale/linearScale.ts"(){"use strict";Pf(),wo(),Ui(),ws=class extends wt{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(e){return e}ticks(){var e;const t=(e=this.tickCount)!=null?e:wt.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||this.domain.some(a=>!isFinite(a)))return[];this.refresh();const[i,s]=this.getDomain(),{interval:n}=this;if(n){const a=Math.abs(n);if(!this.isDenseInterval({start:i,stop:s,interval:a}))return fc(i,s,a)}return Wu(i,s,t,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(e,t){var i,s;const n=(i=this.tickCount)!=null?i:wt.defaultTickCount;return(s=this.interval)!=null?s:No(e,t,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var e;const t=(e=this.tickCount)!=null?e:wt.defaultTickCount;if(t<1){this.niceDomain=[...this.domain];return}let[i,s]=this.domain;if(t===1)[i,s]=HI(i,s);else{const n=i>s?Math.ceil:Math.floor,a=s<i?Math.floor:Math.ceil,r=4;for(let o=0;o<r;o++){const l=i,c=s,h=this.getTickStep(i,s),[u,d]=this.domain;if(h>=1)i=n(u/h)*h,s=a(d/h)*h;else{const p=1/h;i=n(u*p)/p,s=a(d*p)/p}if(i===l&&s===c)break}}this.niceDomain=[i,s]}tickFormat({ticks:e,specifier:t}){return Rb(e??this.ticks(),t)}}}});function SC(e,t,i){let[s,n]=Sn(e);s=_C(Math.floor(s),n,t);const a=kC(s,n,t),r=t-1;n=s+r*a;const o=i?[n,s]:[s,n],l=MC(s,a,t);return[o,l]}function _C(e,t,i){const s=Math.abs(t-e)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(e/a)*a}function MC(e,t,i){const s=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(s):0,a=Math.pow(10,n),r=Ro(n);for(let o=0;o<i;o++){const l=e+t*o;r[o]=Math.round(l*a)/a}return r}function kC(e,t,i){const s=i-1,n=(t-e)/s;return DC(n)}function DC(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),s=e/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}var AC=L({"packages/ag-charts-community/src/util/secondaryAxisTicks.ts"(){"use strict";Ot(),wo()}}),Pm,La,m_=L({"packages/ag-charts-community/src/chart/axis/numberAxis.ts"(){"use strict";jo(),ni(),Po(),gt(),AC(),pt(),ju(),vc(),Pm=class extends ls{constructor(){super(...arguments),this.maxSpacing=NaN}},x([M(Eu),An(NaN)],Pm.prototype,"maxSpacing",2),La=class extends Fo{constructor(e,t=new ws){super(e,t),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=ql(e,t,i);return{domain:s,clipped:n}}formatDatum(e){return typeof e=="number"?e.toFixed(2):($.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))}createTick(){return new Pm}updateSecondaryAxisTicks(e){if(this.dataDomain==null)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(this.dataDomain.domain.length===0)return[];const[t,i]=SC(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}},La.className="NumberAxis",La.type="number",x([M(Cs(cr,Ao("max"))),An(NaN)],La.prototype,"min",2),x([M(Cs(cr,Lo("min"))),An(NaN)],La.prototype,"max",2)}}),Bm,wn,Fm=L({"packages/ag-charts-community/src/chart/axis/logAxis.ts"(){"use strict";zf(),ni(),Po(),gt(),Ut(),pt(),m_(),Bm=Ft(e=>Ds(e)&&e!==0,"a non-zero number"),wn=class extends La{constructor(e){super(e,new Yu),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=ql(e,t,i),a=s[0]>s[1],r=s[0]<0&&s[1]>0,o=s[0]===0&&s[1]===0;return(a||r||o)&&(e=[],r?$.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):o&&$.warn("the data domain has 0 extent, no data is rendered.")),s[0]===0&&(s[0]=1),s[1]===0&&(s[1]=-1),{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}},wn.className="LogAxis",wn.type="log",x([M(Cs(cr,Bm,Ao("max"))),An(NaN)],wn.prototype,"min",2),x([M(Cs(cr,Bm,Lo("min"))),An(NaN)],wn.prototype,"max",2)}}),zm,Ta,y_=L({"packages/ag-charts-community/src/chart/axis/timeAxis.ts"(){"use strict";Yf(),ni(),Po(),pt(),ju(),vc(),zm=class extends ls{constructor(){super(...arguments),this.maxSpacing=NaN}},x([M(Eu),An(NaN)],zm.prototype,"maxSpacing",2),Ta=class extends Fo{constructor(e){super(e,new Hu),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:t}=this;this.refreshScale(),this.datumFormatter=t.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(e){var t;let{min:i,max:s}=this,n=!1;return typeof i=="number"&&(i=new Date(i)),typeof s=="number"&&(s=new Date(s)),e.length>2&&(e=((t=js(e))!=null?t:[0,1e3]).map(a=>new Date(a))),i instanceof Date&&(n||(n=i>e[0]),e=[i,e[1]]),s instanceof Date&&(n||(n=s<e[1]),e=[e[0],s]),e[0]>e[1]&&(e=[]),{domain:e,clipped:n}}createTick(){return new zm}onLabelFormatChange(e,t){t?super.onLabelFormatChange(e,t):this.labelFormatter=this.scale.tickFormat({ticks:e})}formatDatum(e){var t;return(t=this.moduleCtx.callbackCache.call(this.datumFormatter,e))!=null?t:String(e)}calculatePadding(e,t,i){return i?[1,0]:[0,1]}},Ta.className="TimeAxis",Ta.type="time",x([M(Cs(Au,Ao("max")),{optional:!0})],Ta.prototype,"min",2),x([M(Cs(Au,Lo("min")),{optional:!0})],Ta.prototype,"max",2)}}),Gm,Ec,Cc,kd,$e,Oc=L({"packages/ag-charts-community/src/scene/shape/rect.ts"(){"use strict";Kt(),od(),In(),ga(),Gm=1e-6,Ec=(e,t,i,s,n)=>{let a=!1,r=!1,o=s-Math.sqrt(Math.max(mt(n,2)-mt(i,2),0)),l=0,c=0,h=i-Math.sqrt(Math.max(mt(n,2)-mt(s,2),0));return o>e?(a=!0,o=e,l=i-Math.sqrt(Math.max(mt(n,2)-mt(s-e,2)))):o<Gm&&(o=0),h>t?(r=!0,c=s-Math.sqrt(Math.max(mt(n,2)-mt(i-t,2))),h=t):h<Gm&&(h=0),{leading0:o,leading1:l,trailing0:c,trailing1:h,leadingClipped:a,trailingClipped:r}},Cc=(e,{x0:t,y0:i,x1:s,y1:n,cx:a,cy:r},o,l)=>{if(l&&e.moveTo(t,i),t!==s||i!==n){const c=Math.atan2(i-r,t-a),h=Math.atan2(n-r,s-a);e.arc(a,r,o,c,h)}else e.lineTo(t,i)},kd=(e,t,i,s,n,a,r)=>{let{topLeft:o,topRight:l,bottomRight:c,bottomLeft:h}=a;const u=Math.max(o+h,l+c),d=Math.max(o+l,h+c);if(u<=0&&d<=0){e.rect(t,i,s,n);return}else if(r==null&&o===l&&o===c&&o===h){e.roundRect(t,i,s,n,o);return}if(s<0&&(t+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),r!=null){const A=Math.max(t,r.x),I=Math.min(t+s,r.x+r.width),T=Math.max(i,r.y),E=Math.min(i+n,r.y+r.height);t=A,i=T,s=I-A,n=E-T}if(s<=0||n<=0)return;r??(r=new ht(t,i,s,n));const p=Math.max(u/r.height,d/r.width,1);p>1&&(o/=p,l/=p,c/=p,h/=p);let g=!0,f=!0,m=!0,v=!0,y,b,_,S;if(g){const A=Ec(n,s,Math.max(r.x+o-t,0),Math.max(r.y+o-i,0),o);A.leadingClipped&&(v=!1),A.trailingClipped&&(f=!1);const I=Math.max(t+A.leading1,t),T=Math.max(i+A.leading0,i),E=Math.max(t+A.trailing1,t),C=Math.max(i+A.trailing0,i),O=r.x+o,N=r.y+o;y={x0:I,y0:T,x1:E,y1:C,cx:O,cy:N}}if(f){const A=Ec(s,n,Math.max(r.y+l-i,0),Math.max(t+s-(r.x+r.width-l),0),l);A.leadingClipped&&(g=!1),A.trailingClipped&&(m=!1);const I=Math.min(t+s-A.leading0,t+s),T=Math.max(i+A.leading1,i),E=Math.min(t+s-A.trailing0,t+s),C=Math.max(i+A.trailing1,i),O=r.x+r.width-l,N=r.y+l;b={x0:I,y0:T,x1:E,y1:C,cx:O,cy:N}}if(m){const A=Ec(n,s,Math.max(t+s-(r.x+r.width-c),0),Math.max(i+n-(r.y+r.height-c),0),c);A.leadingClipped&&(f=!1),A.trailingClipped&&(v=!1);const I=Math.min(t+s-A.leading1,t+s),T=Math.min(i+n-A.leading0,i+n),E=Math.min(t+s-A.trailing1,t+s),C=Math.min(i+n-A.trailing0,i+n),O=r.x+r.width-c,N=r.y+r.height-c;_={x0:I,y0:T,x1:E,y1:C,cx:O,cy:N}}if(v){const A=Ec(s,n,Math.max(i+n-(r.y+r.height-h),0),Math.max(r.x+h-t,0),h);A.leadingClipped&&(m=!1),A.trailingClipped&&(g=!1);const I=Math.max(t+A.leading0,t),T=Math.min(i+n-A.leading1,i+n),E=Math.max(t+A.trailing0,t),C=Math.min(i+n-A.trailing1,i+n),O=r.x+h,N=r.y+r.height-h;S={x0:I,y0:T,x1:E,y1:C,cx:O,cy:N}}let D=!1;g&&y!=null&&(Cc(e,y,o,!D),D||(D=!0)),f&&b!=null&&(Cc(e,b,l,!D),D||(D=!0)),m&&_!=null&&(Cc(e,_,c,!D),D||(D=!0)),v&&S!=null&&(Cc(e,S,h,!D),D||(D=!0)),e.closePath()},$e=class extends Li{constructor(){super(...arguments),this.borderPath=new yr,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.cornerRadiusBbox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Vi.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Vi.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth?!0:!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var e,t,i;const{path:s,borderPath:n,crisp:a,topLeftCornerRadius:r,topRightCornerRadius:o,bottomRightCornerRadius:l,bottomLeftCornerRadius:c}=this;let{x:h,y:u,width:d,height:p,strokeWidth:g,cornerRadiusBbox:f}=this;const v=1/((t=(e=this.layerManager)==null?void 0:e.canvas.pixelRatio)!=null?t:1);let y=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),a&&(d<=v&&(y*=d/v),p<=v&&(y*=p/v),d=this.align(h,d),p=this.align(u,p),h=this.align(h),u=this.align(u),f=f!=null?new ht(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),g)if(d<v){const b=h+v/2;n.moveTo(b,u),n.lineTo(b,u+p),g=v,this.borderClipPath=void 0}else if(p<v){const b=u+v/2;n.moveTo(h,b),n.lineTo(h+d,b),g=v,this.borderClipPath=void 0}else if(g<d&&g<p){const b=g/2;h+=b,u+=b,d-=g,p-=g;const _=f?.clone().shrink(b),S={topLeft:r>0?r-g:0,topRight:o>0?o-g:0,bottomRight:l>0?l-g:0,bottomLeft:c>0?c-g:0};this.borderClipPath=void 0,kd(s,h,u,d,p,S,_),kd(n,h,u,d,p,S,_)}else this.borderClipPath=(i=this.borderClipPath)!=null?i:new yr,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(h,u,d,p),n.rect(h,u,d,p);else{const b={topLeft:r,topRight:o,bottomRight:l,bottomLeft:c};this.borderClipPath=void 0,kd(s,h,u,d,p,b,f)}this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=y}computeBBox(){const{x:e,y:t,width:i,height:s}=this;return new ht(e,t,i,s)}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=e;e.globalAlpha=n*s*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:a,microPixelEffectOpacity:r}=this;if(!!t&&!!i){const{strokeOpacity:l,lineDash:c,lineDashOffset:h,lineCap:u,lineJoin:d}=this;n&&(n.draw(e),e.clip()),s.draw(e);const{globalAlpha:p}=e;e.strokeStyle=t,e.globalAlpha=p*a*l*r,e.lineWidth=i,c&&e.setLineDash(c),h&&(e.lineDashOffset=h),u&&(e.lineCap=u),d&&(e.lineJoin=d),e.stroke(),e.globalAlpha=p}}},$e.className="Rect",x([ft()],$e.prototype,"x",2),x([ft()],$e.prototype,"y",2),x([ft()],$e.prototype,"width",2),x([ft()],$e.prototype,"height",2),x([ft()],$e.prototype,"topLeftCornerRadius",2),x([ft()],$e.prototype,"topRightCornerRadius",2),x([ft()],$e.prototype,"bottomRightCornerRadius",2),x([ft()],$e.prototype,"bottomLeftCornerRadius",2),x([ft()],$e.prototype,"cornerRadiusBbox",2),x([ft()],$e.prototype,"crisp",2)}}),Xo,v_=L({"packages/ag-charts-community/src/chart/background/background.ts"(){"use strict";$a(),xe(),Oc(),Di(),pt(),rs(),Xo=class extends Yh{constructor(e){var t;super(),this.node=new et({name:"background",zIndex:0}),this.rectNode=new $e,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),(t=e.scene.root)==null||t.appendChild(this.node),this.destroyFns.push(()=>{var i;return(i=e.scene.root)==null?void 0:i.removeChild(this.node)},e.layoutService.addListener("layout-complete",i=>this.onLayoutComplete(i)))}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}},x([M(rt),Yt("node","visible")],Xo.prototype,"visible",2),x([M(kt,{optional:!0}),Yt("rectNode","fill")],Xo.prototype,"fill",2),x([M(nt,{optional:!0})],Xo.prototype,"image",2)}}),Vm,x_=L({"packages/ag-charts-community/src/chart/background/backgroundModule.ts"(){"use strict";v_(),Vm={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Xo}}}),us,b_=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeHandle.ts"(){"use strict";Kt(),In(),pt(),us=class extends Li{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:e,centerY:t,width:i,height:s}=this,n=e-i/2,a=t-s/2;return new ht(n,a,i,s)}isPointInPath(e,t){const i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:e,centerX:t,centerY:i,width:s,height:n}=this;e.clear();const a=t-s/2,r=i-n/2,o=this.align(a),l=this.align(r),c=o+this.align(a,s),h=l+this.align(r,n);e.moveTo(o,l),e.lineTo(c,l),e.lineTo(c,h),e.lineTo(o,h),e.closePath();const u=this.gripLineGap/2,d=this.gripLineLength/2;e.moveTo(this.align(t-u),this.align(i-d)),e.lineTo(this.align(t-u),this.align(i+d)),e.moveTo(this.align(t+u),this.align(i-d)),e.lineTo(this.align(t+u),this.align(i+d))}},us.className="RangeHandle",x([M(kt)],us.prototype,"_fill",2),x([M(kt)],us.prototype,"_stroke",2),x([M(K)],us.prototype,"_strokeWidth",2),x([M(df)],us.prototype,"_lineCap",2),x([M(K)],us.prototype,"_width",2),x([M(K)],us.prototype,"_gripLineGap",2),x([M(K)],us.prototype,"_gripLineLength",2),x([M(K)],us.prototype,"_height",2)}});function Dd(e,t){e!==t&&(this.dirtyPath=!0)}var Pn,S_=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeMask.ts"(){"use strict";Kt(),In(),Ot(),Di(),pt(),Pn=class extends Li{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.001,this._min=0,this._max=1}set min(e){var t;e=It(0,e,this.max-this.minRange),this._min!==e&&!isNaN(e)&&(this._min=e,this.dirtyPath=!0,(t=this.onRangeChange)==null||t.call(this))}get min(){return this._min}set max(e){var t;e=It(this.min+this.minRange,e,1),this._max!==e&&!isNaN(e)&&(this._max=e,this.dirtyPath=!0,(t=this.onRangeChange)==null||t.call(this))}get max(){return this._max}computeBBox(){const{x:e,y:t,width:i,height:s}=this;return new ht(e,t,i,s)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:s,min:n,max:a}=this,r=e+i*n,o=e+i*a;return new ht(r,t,o-r,s)}updatePath(){const{path:e,x:t,y:i,width:s,height:n,min:a,max:r}=this;e.clear();const o=this.align(t),l=this.align(i),c=o+this.align(t,s),h=l+this.align(i,n);e.moveTo(o,l),e.lineTo(c,l),e.lineTo(c,h),e.lineTo(o,h),e.lineTo(o,l);const u=this.align(t+s*a),d=this.align(t+s*r);e.moveTo(u,l),e.lineTo(u,h),e.lineTo(d,h),e.lineTo(d,l),e.lineTo(u,l)}},Pn.className="RangeMask",x([Ie({changeValue:Dd}),M(K)],Pn.prototype,"x",2),x([Ie({changeValue:Dd}),M(K)],Pn.prototype,"y",2),x([Ie({changeValue:Dd}),M(K)],Pn.prototype,"width",2),x([Ie({changeValue:Dd}),M(K)],Pn.prototype,"height",2),x([M(zt)],Pn.prototype,"_min",2),x([M(zt)],Pn.prototype,"_max",2)}}),$o,__,LC=L({"packages/ag-charts-community/src/chart/navigator/shapes/rangeSelector.ts"(){"use strict";xe(),Di(),b_(),S_(),$o=class _2 extends et{constructor(){super({name:"rangeSelectorGroup",layer:!0}),this.minHandle=new us,this.maxHandle=new us,this.background=(()=>{const t=new et({name:"navigator-background"});return t.zIndex=1,this.appendChild(t),t})(),this.mask=(()=>{const{x:t,y:i,width:s,height:n,min:a,max:r}=_2.defaults,o=new Pn;o.x=t,o.y=i,o.width=s,o.height=n,o.min=a,o.max=r,o.zIndex=2;const{minHandle:l,maxHandle:c}=this;return l.centerX=t,c.centerX=t+s,l.centerY=c.centerY=i+n/2,l.zIndex=4,c.zIndex=3,this.append([o,l,c]),o.onRangeChange=()=>{var h;this.updateHandles(),(h=this.onRangeChange)==null||h.call(this)},o})(),this.isContainerNode=!0}layout(t,i,s,n){this.mask.x=t,this.mask.y=i,this.mask.width=s,this.mask.height=n,this.updateHandles(),this.background.translationX=t,this.background.translationY=i}updateHandles(){const{x:t,y:i,width:s,height:n}=this.mask,{minHandle:a,maxHandle:r,min:o,max:l}=this;a.centerX=t+s*o,r.centerX=t+s*l,a.centerY=r.centerY=i+n/2,o+(l-o)/2<.5?(a.zIndex=3,r.zIndex=4):(a.zIndex=4,r.zIndex=3)}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}},$o.className="Range",$o.defaults={x:0,y:0,width:200,height:30,min:0,max:1},x([ma("mask.min")],$o.prototype,"min",2),x([ma("mask.max")],$o.prototype,"max",2),__=$o}}),ds,M_=L({"packages/ag-charts-community/src/chart/navigator/navigator.ts"(){"use strict";$a(),Kt(),Uh(),Ot(),Di(),pt(),Vo(),b_(),S_(),LC(),ds=class extends Yh{constructor(e){var t;super(),this.ctx=e,this.rs=new __,this.miniChart=void 0,this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.height=30,this.margin=10,this.visible=!0,this.x=0,this.y=0,this.width=0,this.rs.onRangeChange=BL(()=>this.onRangeChange()),(t=e.scene.root)==null||t.appendChild(this.rs);const i=13;this.destroyFns.push(e.interactionManager.addListener("drag-start",s=>this.onDragStart(s),i),e.interactionManager.addListener("drag",s=>this.onDrag(s),i),e.interactionManager.addListener("hover",s=>this.onDrag(s),i),e.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),e.zoomManager.addListener("zoom-change",()=>this.onZoomChange()),()=>{var s;return(s=e.scene.root)==null?void 0:s.removeChild(this.rs)},()=>delete this.rs.onRangeChange),this.updateGroupVisibility()}updateGroupVisibility(){const e=!!(this.enabled&&this.visible);e!==this.rs.visible&&(this.rs.visible=e,e&&this.onRangeChange())}performLayout(e){return B(this,arguments,function*({shrinkRect:t}){if(this.enabled){const i=this.height+this.margin;t.shrink(i,"bottom"),this.y=t.y+t.height+this.margin}else this.y=0;return{shrinkRect:t}})}performCartesianLayout(e){return B(this,null,function*(){const{x:t,width:i}=e.seriesRect,s=!0;if(this.enabled&&s){const{y:n,height:a}=this;this.rs.layout(t,n,i,a)}this.visible=s,this.x=t,this.width=i})}onRangeChange(){var e,t;const{min:i,max:s}=this.rs,n=this.ctx.zoomManager.getZoom();(((e=n?.x)==null?void 0:e.min)!==i||((t=n?.x)==null?void 0:t.max)!==s)&&this.ctx.zoomManager.updateZoom({x:{min:i,max:s},y:n?.y})}onZoomChange(){const e=this.ctx.zoomManager.getZoom();e&&e.x&&(this.min=e.x.min,this.max=e.x.max)}onDragStart(e){if(!this.enabled)return;const{offsetX:t,offsetY:i}=e,{rs:s}=this,{minHandle:n,maxHandle:a,min:r}=s,{x:o,width:l}=this,c=s.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.zIndex<a.zIndex?a.containsPoint(t,i)?this.maxHandleDragging=!0:n.containsPoint(t,i)&&(this.minHandleDragging=!0):n.containsPoint(t,i)?this.minHandleDragging=!0:a.containsPoint(t,i)&&(this.maxHandleDragging=!0),!this.minHandleDragging&&!this.maxHandleDragging&&c.containsPoint(t,i)&&(this.panHandleOffset=(t-o)/l-r))}onDrag(e){if(!this.enabled)return;const{rs:t,panHandleOffset:i}=this,{minHandle:s,maxHandle:n}=t,{x:a,y:r,width:o,height:l}=this,{offsetX:c,offsetY:h}=e,u=a+o*t.min,d=a+o*t.max,p=new ht(u,r,d-u,l),g=()=>It(0,(c-a)/o,1);if(s.containsPoint(c,h)||n.containsPoint(c,h)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,h)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)t.min=g();else if(this.maxHandleDragging)t.max=g();else if(!isNaN(i)){const f=t.max-t.min,m=Math.min(g()-i,1-f);m<=t.min?(t.min=m,t.max=t.min+f):(t.max=m+f,t.min=t.max-f)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}},x([M(nt,{optional:!0})],ds.prototype,"miniChart",2),x([M(rt),To(e=>e.updateGroupVisibility())],ds.prototype,"enabled",2),x([ma("rs.mask")],ds.prototype,"mask",2),x([ma("rs.minHandle")],ds.prototype,"minHandle",2),x([ma("rs.maxHandle")],ds.prototype,"maxHandle",2),x([ma("rs.min")],ds.prototype,"min",2),x([ma("rs.max")],ds.prototype,"max",2),x([M(K)],ds.prototype,"margin",2),x([M(rt),To(e=>e.updateGroupVisibility())],ds.prototype,"visible",2)}}),Um,k_=L({"packages/ag-charts-community/src/chart/navigator/navigatorModule.ts"(){"use strict";M_(),Um={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:ds,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}}}}),Ad,qo,Zo=L({"packages/ag-charts-community/src/module/theme.ts"(){"use strict";Ad=({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}},qo=e=>{const{fill:t,stroke:i}=Ad(e);return{marker:{fill:t,stroke:i}}}}});function D_(e,t,i,s,n){const{addPhaseFn:a,updatePhaseFn:r,removePhaseFn:o}=n,l=(c,h,u)=>{i.animate({id:`${e}_${t}_${h.id}_${c}`,groupId:e,from:0,to:1,ease:_o,onUpdate(d,p){p&&c!=="removed"||(h.path.clear({trackChanges:!0}),u(d,h),h.checkPathDirty())},onStop(){c==="added"&&(h.path.clear({trackChanges:!0}),u(1,h),h.checkPathDirty())},phase:ai[c]})};for(const c of s)i.isSkipped()||(l("removed",c,o),l("updated",c,r)),l("added",c,a)}var A_=L({"packages/ag-charts-community/src/motion/pathMotion.ts"(){"use strict";Mo(),He()}});function qt(e){if(e!=null)return e===""?"":(Qo??(Qo=document.createElement("div")),Qo.textContent=String(e),Qo.innerHTML)}var Qo,Bn=L({"packages/ag-charts-community/src/util/sanitize.ts"(){"use strict";Qo=null}});function Nt({id:e},t,i,s){$s(e,t,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Ar({id:e},t,i,s){$s(e,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Fn(e){return{opacity:1}}var zn=L({"packages/ag-charts-community/src/chart/series/seriesLabelUtil.ts"(){"use strict";He()}}),Wm,L_=L({"packages/ag-charts-community/src/scene/util/changeDetectableProperties.ts"(){"use strict";di(),Ql(),Wm=class extends Rt{constructor(){super(...arguments),this._dirty=3}markDirty(e,t=1){this._dirty<t&&(this._dirty=t)}markClean(e){this._dirty=0}isDirty(){return this._dirty>0}}}}),ps,Jo=L({"packages/ag-charts-community/src/scene/dropShadow.ts"(){"use strict";pt(),Ql(),ee(),L_(),ps=class extends Wm{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}},x([M(rt),J({redraw:3})],ps.prototype,"enabled",2),x([M(kt),J({redraw:3})],ps.prototype,"color",2),x([M(zt),J({redraw:3})],ps.prototype,"xOffset",2),x([M(zt),J({redraw:3})],ps.prototype,"yOffset",2),x([M(K),J({redraw:3})],ps.prototype,"blur",2)}}),T_,vi,Nc=L({"packages/ag-charts-community/src/chart/series/seriesMarker.ts"(){"use strict";Ql(),L_(),pt(),kc(),sn(),En(),T_=Ft(e=>WS(e)||Object.getPrototypeOf(e)===Ti,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),vi=class extends Wm{constructor(){super(...arguments),this.enabled=!0,this.shape=Rs,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:e,fill:t,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}=this;return{size:e,fill:t,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}}getDiameter(){return this.size+this.strokeWidth}},x([M(rt),J({redraw:3})],vi.prototype,"enabled",2),x([M(T_),J({redraw:3})],vi.prototype,"shape",2),x([M(K),J({redraw:3})],vi.prototype,"size",2),x([M(kt,{optional:!0}),J({redraw:3})],vi.prototype,"fill",2),x([M(Ct),J({redraw:3})],vi.prototype,"fillOpacity",2),x([M(kt,{optional:!0}),J({redraw:3})],vi.prototype,"stroke",2),x([M(K),J({redraw:3})],vi.prototype,"strokeWidth",2),x([M(Ct),J({redraw:3})],vi.prototype,"strokeOpacity",2),x([M(zi,{optional:!0}),J({redraw:3})],vi.prototype,"formatter",2)}}),Ym,xi,Gn=L({"packages/ag-charts-community/src/chart/series/seriesTooltip.ts"(){"use strict";di(),pt(),uc(),Ym=class extends Rt{constructor(){super(...arguments),this.enabled=!1}},x([M(rt)],Ym.prototype,"enabled",2),xi=class extends Rt{constructor(){super(...arguments),this.enabled=!0,this.interaction=new Ym,this.position=new Io}toTooltipHtml(e,t){return this.renderer?hc(this.renderer(t),e):hc(e)}},x([M(rt)],xi.prototype,"enabled",2),x([M(rt,{optional:!0})],xi.prototype,"showArrow",2),x([M(zi,{optional:!0})],xi.prototype,"renderer",2),x([M(nt)],xi.prototype,"interaction",2),x([M(nt)],xi.prototype,"position",2)}}),Ce,TC=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesProperties.ts"(){"use strict";Jo(),pt(),as(),Nc(),Gn(),Hi(),Ce=class extends Nn{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new ps,this.marker=new vi,this.label=new he,this.tooltip=new xi,this.connectMissingData=!1}},x([M(X)],Ce.prototype,"xKey",2),x([M(X,{optional:!0})],Ce.prototype,"xName",2),x([M(X)],Ce.prototype,"yKey",2),x([M(X,{optional:!0})],Ce.prototype,"yName",2),x([M(K,{optional:!0})],Ce.prototype,"normalizedTo",2),x([M(kt)],Ce.prototype,"fill",2),x([M(Ct)],Ce.prototype,"fillOpacity",2),x([M(kt)],Ce.prototype,"stroke",2),x([M(K)],Ce.prototype,"strokeWidth",2),x([M(Ct)],Ce.prototype,"strokeOpacity",2),x([M(Zs)],Ce.prototype,"lineDash",2),x([M(K)],Ce.prototype,"lineDashOffset",2),x([M(nt)],Ce.prototype,"shadow",2),x([M(nt)],Ce.prototype,"marker",2),x([M(nt)],Ce.prototype,"label",2),x([M(nt)],Ce.prototype,"tooltip",2),x([M(rt)],Ce.prototype,"connectMissingData",2)}});function Rc({id:e},t,i,s){const n={phase:s?ai[s]:"trailing"};$s(e,"markers",t,i,{opacity:0},{opacity:1},n),i.forEach(a=>a.cleanup())}function Hm({id:e},t,i){$s(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function Km({id:e,nodeDataDependencies:t},i,s){const n=t.seriesRectWidth;Xt(e,"markers",i,s,{fromFn:(o,l)=>{var c,h;const u=(h=(c=l.midPoint)==null?void 0:c.x)!=null?h:n;return{scalingX:0,scalingY:0,delay:It(0,Jg(u/n),1),duration:ec,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function wc(e){return{opacity:1,scalingX:1,scalingY:1}}function Pc(e,t){var i,s,n,a;return{translationX:(s=(i=t.point)==null?void 0:i.x)!=null?s:NaN,translationY:(a=(n=t.point)==null?void 0:n.y)!=null?a:NaN}}function jm(e,t){const i=(r,o)=>{const l=e[o][r];return Array.isArray(l)?l[0]:l},s=r=>{const{xValue:o}=r;return e.moved[o]?{point:i(o,"moved"),status:"updated"}:e.removed[o]?{point:i(o,"removed"),status:"removed"}:e.added[o]?{point:i(o,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(r,o)=>{var l,c,h,u,d,p;const{status:g,point:f}=s(o);if(g==="unknown")return{opacity:0};const m={translationX:(c=(l=f?.from)==null?void 0:l.x)!=null?c:r.translationX,translationY:(u=(h=f?.from)==null?void 0:h.y)!=null?u:r.translationY,opacity:r.opacity,phase:ai[g]};return t==="added"?Z(R({},m),{opacity:0,translationX:(d=f?.to)==null?void 0:d.x,translationY:(p=f?.to)==null?void 0:p.y,phase:ai.added}):(g==="added"&&(m.opacity=0),m)},toFn:(r,o)=>{var l,c;const{status:h,point:u}=s(o);if(h==="unknown")return{opacity:0};const d={translationX:o.point.x,translationY:o.point.y,opacity:1,phase:ai[h]};return h==="removed"||t==="removed"?Z(R({},d),{translationX:(l=u?.to)==null?void 0:l.x,translationY:(c=u?.to)==null?void 0:c.y,opacity:0,phase:ai.removed}):d}}}var Lr=L({"packages/ag-charts-community/src/chart/series/cartesian/markerUtil.ts"(){"use strict";lr(),He(),Ot(),Mo()}});function Xm(e){return e.reduce(({min:t,max:i},s)=>((t==null||t.point.x>s.point.x)&&(t=s),(i==null||i.point.x<s.point.x)&&(i=s),{min:t,max:i}),{})}function I_(e,t,i){const s=(t.y-e.y)/(t.x-e.x),n=(i-e.x)*s+e.y;return{x:i,y:n}}function E_(e,t,i,s){let n=-1,a=0;const r=[];for(;a<e.length;){if(e[a].change===t){r.push(e[a]),a++;continue}if(e[a].change===i){a++;continue}r.length>0&&(s(r,n,a),r.length=0),n=a,a++}r.length>0&&s(r,n,a)}function $m(e,t){E_(e,"out","in",(i,s,n)=>{var a,r;s===-1&&e[n]?i.forEach(o=>o.to=e[n].from):n===e.length&&e[s]?i.forEach(o=>o.to=e[s].from):t==="intersect"&&((a=e[s])!=null&&a.from)&&((r=e[n])!=null&&r.from)?i.forEach(o=>o.to=I_(e[s].from,e[n].from,o.from.x)):i.forEach(o=>o.to=o.from)}),E_(e,"in","out",(i,s,n)=>{var a,r;s===-1&&e[n]?i.forEach(o=>o.from=e[n].to):n===e.length&&e[s]?i.forEach(o=>o.from=e[s].to):t==="intersect"&&((a=e[s])!=null&&a.to)&&((r=e[n])!=null&&r.to)?i.forEach(o=>o.from=I_(e[s].to,e[n].to,o.to.x)):i.forEach(o=>o.from=o.to)})}function C_(e,t,i){const s=isNaN(e.x)?t.x:e.x,n=isNaN(e.y)?t.y:e.y,a=t.x-e.x,r=t.y-e.y,o=isNaN(a)?0:a*i,l=isNaN(r)?0:r*i;return{x:s+o,y:n+l}}function qm(e,t,i){const{path:s}=i;let n;for(const a of e){const{from:r,to:o}=a,l=t[a.change];if(l==null||r==null||o==null)continue;const{x:c,y:h}=C_(r,o,l);if(a.moveTo===!1)s.lineTo(c,h);else if(a.moveTo===!0||!n)s.moveTo(c,h);else if(n){const u=a.moveTo==="in"?l:1-l,{x:d,y:p}=C_(n,{x:c,y:h},u);s.lineTo(d,p),s.moveTo(c,h)}n={x:c,y:h}}}function Zm({id:e,visible:t,nodeDataDependencies:i},s,n){const{seriesRectWidth:a,seriesRectHeight:r}=i;$s(e,"path_properties",s,n,{clipX:0},{clipX:a},{phase:"initial",start:{clipMode:"normal",clipY:r,visible:t},finish:{clipMode:void 0,visible:t}})}function Bc({id:e},t,i,s,n="add"){$s(e,t,i,s,{opacity:0},{opacity:1},{phase:n})}function IC({id:e},t,i,s){$s(e,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Qm(e){return t=>({opacity:e.getOpacity(),clipScalingX:1,clipMode:void 0})}function Ld({nodeDataDependencies:e},t){const i=s=>isFinite(s)?s:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}var Fc=L({"packages/ag-charts-community/src/chart/series/cartesian/pathUtil.ts"(){"use strict";He()}});function O_(e){return e.type==="continuous"||e.type==="log"}function N_(e){return e.type==="category"}function R_(e,t){return e.domain.length===t.domain.length&&e.range.length===t.range.length&&e.domain.every((i,s)=>i===t.domain[s])&&e.range.every((i,s)=>i===t.range[s])}function w_(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:O_(e)&&O_(t)?e.type===t.type&&R_(e,t):N_(e)&&N_(t)?R_(e,t):!1}var EC=L({"packages/ag-charts-community/src/chart/series/cartesian/scaling.ts"(){"use strict"}});function Td(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);const i=t.domain.findIndex(s=>s===e);return i>=0?t.range[i]:NaN}function CC(e,t){return!w_(e.scales.x,t.scales.x)||!w_(e.scales.y,t.scales.y)}function OC(e,t){const i=Number(e),s=Number(t);return!isNaN(i)&&!isNaN(s)?Math.abs(s-i)<.25:e===t}function P_(e=!1,t=!1){return e===t?!!e:e?"in":"out"}function zc(e,t,i={}){var s,n,a,r;const{backfillSplitMode:o="intersect"}=i,l=b=>{var _,S;return{x:Td((_=b.xValue)!=null?_:NaN,e.scales.x),y:Td((S=b.yValue)!=null?S:NaN,e.scales.y)}},c=b=>{var _,S;return{x:Td((_=b.xValue)!=null?_:NaN,t.scales.x),y:Td((S=b.yValue)!=null?S:NaN,t.scales.y)}},h=[],u={added:{},moved:{},removed:{}},d=(b,_,S,D="move")=>{b&&(isNaN(b.point.x)||isNaN(b.point.y))&&(b=_);const A={from:b?.point,to:_?.point,moveTo:P_(b?.point.moveTo,_?.point.moveTo),change:D};D==="move"?(u.moved[S]=A,v++,y++):D==="in"?(u.added[S]=A,y++):D==="out"&&(u.removed[S]=A,v++),h.push(A)},{min:p,max:g}=Xm(t.nodeData),{min:f,max:m}=Xm(e.nodeData);let v=0,y=0;for(;v<t.nodeData.length||y<e.nodeData.length;){const b=t.nodeData[v],_=e.nodeData[y],S=b?l(b):void 0,D=_?c(_):void 0,A=void 0;if(S&&OC(S.x,_?.point.x))d(b,_,_.xValue,"move");else if(S&&S.x<((s=f?.point.x)!=null?s:-1/0))d(b,A,b.xValue,"out");else if(S&&S.x>((n=m?.point.x)!=null?n:1/0))d(b,A,b.xValue,"out");else if(D&&D.x<((a=p?.point.x)!=null?a:-1/0))d(A,_,_.xValue,"in");else if(D&&D.x>((r=g?.point.x)!=null?r:1/0))d(A,_,_.xValue,"in");else if(S&&S.x<_?.point.x)d(b,A,b.xValue,"out");else if(D&&D.x<b?.point.x)d(A,_,_.xValue,"in");else if(b)d(b,A,b.xValue,"out");else if(_)d(A,_,_.xValue,"in");else throw new Error("Unable to process points")}return $m(h,o),{result:h,resultMap:u}}function Gc(e,t,i,s={}){var n,a,r;const{backfillSplitMode:o="intersect",multiDatum:l=!1}=s,c=[],h={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let d,p;const g=(b,_)=>{var S,D;const A=_.change==="move"?"moved":_.change==="in"?"added":"removed";l?((D=(S=u[A])[b])!=null||(S[b]=[]),u[A][b].push(_)):h[A][b]=_,d=_,p=Eo(b)};let f=0,m=0,v=!1;for(;f<t.nodeData.length||m<e.nodeData.length;){const b=t.nodeData[f],_=e.nodeData[m],S=Eo(b?.xValue),D=Eo(_?.xValue);let A;if(S===D)A={change:"move",moveTo:P_((n=b.point.moveTo)!=null?n:!1,_.point.moveTo),from:b.point,to:_.point},g(b?.xValue,A),f++,m++;else if(i!==void 0&&i.removed.indexOf(String(S))>=0)A={change:"out",moveTo:(a=b.point.moveTo)!=null?a:!1,from:b.point},g(b?.xValue,A),f++;else if(i!==void 0&&i.added.indexOf(String(D))>=0)A={change:"in",moveTo:(r=_.point.moveTo)!=null?r:!1,to:_.point},g(_?.xValue,A),m++;else if(l&&d&&p===S)A=R({},d),g(b?.xValue,A),f++;else if(l&&d&&p===D)A=R({},d),g(_?.xValue,A),m++;else{v=!0;break}c.push(A)}let y=-1/0;return v||(v=c.some(b=>{const{change:_,to:{x:S=-1/0}={}}=b;if(_==="out")return;const D=S<y;return y=S,D})),v?{result:void 0,resultMap:void 0}:($m(c,o),l?{result:c,resultMap:u}:{result:c,resultMap:h})}function B_(e,t){let i="updated";const s=n=>n.visible;return!s(t)&&s(e)?i="added":s(t)&&!s(e)&&(i="removed"),i}function NC(e,t){const i=t==="none"?"updated":e,s={fromFn:n=>{let a;return e==="removed"?a={finish:{visible:!1}}:e==="added"?a={start:{visible:!0}}:a={},R({phase:ai[i]},a)},toFn:n=>({phase:ai[i]})};return t==="fade"?{fromFn:n=>{const a=e==="added"?0:n.opacity;return R({opacity:a},s.fromFn(n))},toFn:n=>R({opacity:e==="removed"?0:1},s.toFn(n))}:s}function Jm(e,t,i,s,n){const a=B_(e,t),r=(h,u)=>{n(i,{move:0,out:h},u)},o=(h,u)=>{n(i,{move:h},u)},l=(h,u)=>{n(i,{move:1,in:h},u)},c=NC(a,s);return{status:a,path:{addPhaseFn:l,updatePhaseFn:o,removePhaseFn:r},pathProperties:c}}function F_(e,t,i){var s,n,a;const r=((s=e.scales.x)==null?void 0:s.type)==="category",o=((n=t.scales.x)==null?void 0:n.type)==="category";if(r!==o)return;const{result:l,resultMap:c}=r?Gc(e,t,i):zc(e,t);let h="updated";if(t.visible&&!e.visible?h="removed":!t.visible&&e.visible&&(h="added"),l===void 0||c===void 0)return;const u=((a=i?.changed)!=null?a:!0)||CC(e,t)||h!=="updated",d=Jm(e,t,l,"fade",qm),p=jm(c,h);return Z(R({},d),{marker:p,hasMotion:u})}var ty=L({"packages/ag-charts-community/src/chart/series/cartesian/lineUtil.ts"(){"use strict";He(),Co(),Lr(),Fc(),EC()}});function Id(e){const{points:t}=e.fillData;return{top:t.slice(0,t.length/2),bottom:t.slice(t.length/2).reverse()}}function Ia(e,t,i){return{scales:t.scales,nodeData:i[e],visible:t.visible}}function RC(e,t,i){const s=Id(t),n=Id(e),a={multiDatum:!0};return{top:Gc(Ia("top",e,n),Ia("top",t,s),i,a),bottom:Gc(Ia("bottom",e,n),Ia("bottom",t,s),i,a)}}function wC(e,t){const i=Id(t),s=Id(e);return{top:zc(Ia("top",e,s),Ia("top",t,i)),bottom:zc(Ia("bottom",e,s),Ia("bottom",t,i))}}function z_(e,t,i){var s,n;const a=((s=e.scales.x)==null?void 0:s.type)==="category",r=((n=t.scales.x)==null?void 0:n.type)==="category";if(a!==r)return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const l=()=>a?Gc(e,t,i,{backfillSplitMode:"static",multiDatum:!0}):zc(e,t,{backfillSplitMode:"static"}),c=()=>a?RC(e,t,i):wC(e,t),{resultMap:h}=l(),{top:u,bottom:d}=c();if(h===void 0||u.result===void 0||d.result===void 0)return;const p=[...u.result,...d.result.reverse()],f=(t.stackVisible?e.stackVisible:!1)?"none":"fade",m=Jm(e,t,p,f,qm),v=jm(h,o);return{fill:m,marker:v}}var ey,G_=L({"packages/ag-charts-community/src/chart/series/cartesian/areaUtil.ts"(){"use strict";ty(),Lr(),Fc(),ey=(e=>(e[e.Fill=0]="Fill",e[e.Stroke=1]="Stroke",e[e.Marker=2]="Marker",e[e.Label=3]="Label",e))(ey||{})}}),Ed,V_,PC=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeries.ts"(){"use strict";He(),A_(),ya(),Ui(),xe(),ee(),ni(),Te(),Bn(),Ut(),Co(),Fm(),y_(),ie(),en(),On(),En(),Ii(),zn(),TC(),G_(),Hi(),Lr(),Fc(),Ed=class M2 extends Rn{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:Qm({getOpacity:()=>this.getOpacity()}),label:Fn,marker:(i,s)=>R(R({},wc(i)),Pc(i,s))}}),this.properties=new Ce}processData(t){return B(this,null,function*(){if(this.data==null||!this.properties.isValid())return;const{data:i,visible:s,seriesGrouping:{groupIndex:n=this.id,stackCount:a=1}={}}=this,{xKey:r,yKey:o,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),{isContinuousX:u,isContinuousY:d}=this.isContinuous(),p=[`area-stack-${n}-yValues`,`area-stack-${n}-yValues-trailing`,`area-stack-${n}-yValues-prev`,`area-stack-${n}-yValues-trailing-prev`,`area-stack-${n}-yValues-marker`],g=[];eg(c)&&(g.push(yd(this,[p[0],p[1],p[4]],c,"range")),g.push(yd(this,[p[2],p[3]],c,"range"))),!u&&h&&this.processedData&&g.push(Mr(this.processedData)),h&&g.push(Wo(this));const f={invalidValue:null};l&&a>1&&(f.invalidValue=0),s||(f.forceValue=0),yield this.requestDataModel(t,i,{props:[Xe(this,r,u,{id:"xValue"}),Gt(this,o,d,R({id:"yValueRaw"},f)),...Aa(this,o,d,"window","current",Z(R({id:"yValueEnd"},f),{groupId:p[0]})),...Aa(this,o,d,"window-trailing","current",Z(R({id:"yValueStart"},f),{groupId:p[1]})),...Aa(this,o,d,"window","last",Z(R({id:"yValuePreviousEnd"},f),{groupId:p[2]})),...Aa(this,o,d,"window-trailing","last",Z(R({id:"yValuePreviousStart"},f),{groupId:p[3]})),...Aa(this,o,d,"normal","current",Z(R({id:"yValueCumulative"},f),{groupId:p[4]})),...g],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:i,dataModel:s,axes:n}=this;if(!i||!s||i.data.length===0)return[];const a=n.x,r=n.y,o=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),c=s.getDomain(this,"yValueEnd","value",i);if(t==="x")return o?.def.type==="key"&&o.def.valueType==="category"?l:mi(js(l),a);if(r instanceof wn||r instanceof Ta)return mi(c,r);{const h=[c[0]>0?0:c[0],c[1]<0?0:c[1]];return mi(h,r)}}createNodeData(){return B(this,null,function*(){var t;const{axes:i,data:s,processedData:{data:n}={},dataModel:a}=this,r=i.x,o=i.y;if(!r||!o||!s||!a||!this.properties.isValid())return[];const{yKey:l,xKey:c,marker:h,label:u,fill:d,stroke:p,connectMissingData:g}=this.properties,{scale:f}=r,{scale:m}=o,v=wt.is(m),y=((t=f.bandwidth)!=null?t:0)/2,b=a.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),_=P=>{const j=P,{point:z}=j,q=Le(j,["point"]);return Z(R({},q),{point:Z(R({},z),{moveTo:!0})})},S=(P,j,z)=>{const q=f.convert(P)+y,tt=m.convert(j),it=m.convert(z);return[{point:{x:q,y:it},yValue:z,xValue:P},{point:{x:q,y:tt},yValue:j,xValue:P}]},D=(P,j,z)=>{let q;return(eg(this.properties.normalizedTo)?v&&zu(z):!isNaN(z))&&(q=j),{x:f.convert(P)+y,y:m.convert(q),size:h.size}},A=l,I=[],T=[],{visibleSameStackCount:E}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),C={itemId:A,fillData:{itemId:A,points:[]},strokeData:{itemId:A,points:[]},labelData:I,nodeData:T,scales:fn(M2.prototype,this,"calculateScaling").call(this),visible:this.visible,stackVisible:E>0},O=C.fillData.points,N=[],w=C.strokeData.points;let U=-1,G,F=-1/0;return n?.forEach(P=>{const{keys:j,keys:[z],datum:q,values:tt}=P;tt.forEach((it,st)=>{var vt,H,at;U++;const ut=q[st],ct=a.resolveProcessedDataDefsValues(b,{keys:j,values:it}),{yValueRaw:dt,yValueCumulative:ot}=ct;let{yValueStart:yt,yValueEnd:xt,yValuePreviousStart:Ht,yValuePreviousEnd:ae}=ct;const Vt=dt!=null,we=D(z,+ot,dt);if(Vt&&h&&T.push({index:U,series:this,itemId:A,datum:ut,midPoint:{x:we.x,y:we.y},cumulativeValue:xt,yValue:dt,xValue:z,yKey:l,xKey:c,point:we,fill:(vt=h.fill)!=null?vt:d,stroke:(H=h.stroke)!=null?H:p,strokeWidth:(at=h.strokeWidth)!=null?at:this.getStrokeWidth(this.properties.strokeWidth)}),Vt&&u){const Ri=this.getLabelText(u,{value:dt,datum:ut,xKey:c,yKey:l,xName:this.properties.xName,yName:this.properties.yName},me=>Et(me)?me.toFixed(2):String(me));I.push({index:U,series:this,itemId:l,datum:ut,x:we.x,y:we.y,label:Ri?{text:Ri,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}const Ae=G!=null&&z!=null,Pe=F!=null&&Vt;Pe||(yt=yt??0,xt=yt??0,Ht=Ht??0,ae=Ht??0);const[ne,qn]=S(G,Ht,ae),[Zn,xs]=S(z,yt,xt);Ae&&(!g||Pe)&&(O.push(ne),N.push(qn),O.push(Zn),N.push(xs)),Pe&&U>0&&(w.push(_(ne)),w.push(Zn)),G=z,F=dt})}),w.length>0&&(w[0]=_(w[0])),N.reverse(),O.push(...N),[C]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,i=Ma(t);return new i}updatePathNodes(t){return B(this,null,function*(){const{opacity:i,visible:s,animationEnabled:n}=t,[a,r]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);r.setProperties({tag:1,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:i,visible:s}),a.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:i,visible:s||n,strokeWidth:o}),Ld(this,r),Ld(this,a)})}updatePaths(t){return B(this,null,function*(){this.updateAreaPaths([t.paths],[t.contextData])})}updateAreaPaths(t,i){this.updateFillPath(t,i),this.updateStrokePath(t,i)}updateFillPath(t,i){i.forEach(({fillData:s},n)=>{const[a]=t[n],{path:r}=a;r.clear({trackChanges:!0});for(const{point:o}of s.points)o.moveTo?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y);r.closePath(),a.checkPathDirty()})}updateStrokePath(t,i){i.forEach(({strokeData:s},n)=>{const[,a]=t[n],{path:r}=a;r.clear({trackChanges:!0});for(const{point:o}of s.points)o.moveTo?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y);a.checkPathDirty()})}updateMarkerSelection(t){return B(this,null,function*(){const{nodeData:i,markerSelection:s}=t;return this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(this.properties.marker.enabled?i:[])})}updateMarkerNodes(t){return B(this,null,function*(){const{markerSelection:i,isHighlight:s}=t,{xKey:n,yKey:a,marker:r,fill:o,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u,highlightStyle:d}=this.properties,p=bt(s&&d.item,r.getStyle(),{fill:o,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u});i.each((g,f)=>{this.updateMarkerStyle(g,r,{datum:f,highlighted:s,xKey:n,yKey:a},p)}),s||this.properties.marker.markClean()})}updateLabelSelection(t){return B(this,null,function*(){const{labelData:i,labelSelection:s}=t;return s.update(i,n=>{n.tag=3})})}updateLabelNodes(t){return B(this,null,function*(){const{labelSelection:i}=t,{enabled:s,fontStyle:n,fontWeight:a,fontSize:r,fontFamily:o,color:l}=this.properties.label;i.each((c,h)=>{const{x:u,y:d,label:p}=h;p&&s&&this.visible?(c.fontStyle=n,c.fontWeight=a,c.fontSize=r,c.fontFamily=o,c.textAlign=p.textAlign,c.textBaseline=p.textBaseline,c.text=p.text,c.x=u,c.y=d-10,c.fill=l,c.visible=!0):c.visible=!1})})}getTooltipHtml(t){const{id:i,axes:s,dataModel:n}=this,{xKey:a,xName:r,yName:o,tooltip:l,marker:c}=this.properties,{yKey:h,xValue:u,yValue:d,datum:p}=t,g=s.x,f=s.y;if(!this.properties.isValid()||!(g&&f&&Et(d))||!n)return"";const m=g.formatDatum(u),v=f.formatDatum(d),y=qt(o),b=qt(m+": "+v),_=bt({fill:this.properties.fill},c.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:S}=this.getMarkerStyle(c,{datum:t,xKey:a,yKey:h,highlighted:!1},_);return l.toTooltipHtml({title:y,content:b,backgroundColor:S},{datum:p,xKey:a,xName:r,yKey:h,yName:o,color:S,title:y,seriesId:i})}getLegendData(t){var i,s,n,a;if(!((i=this.data)!=null&&i.length)||!this.properties.isValid()||t!=="category")return[];const{yKey:r,yName:o,fill:l,stroke:c,fillOpacity:h,strokeOpacity:u,strokeWidth:d,lineDash:p,marker:g,visible:f}=this.properties,m=!g.enabled||g.fill===void 0;return[{legendType:t,id:this.id,itemId:r,seriesId:this.id,enabled:f,label:{text:o??r},marker:{shape:g.shape,fill:m?l:g.fill,fillOpacity:m?h:g.fillOpacity,stroke:(s=g.stroke)!=null?s:c,strokeOpacity:(n=g.strokeOpacity)!=null?n:u,strokeWidth:(a=g.strokeWidth)!=null?a:0,enabled:g.enabled||d<=0},line:{stroke:c,strokeOpacity:u,strokeWidth:d,lineDash:p}}]}animateEmptyUpdateReady(t){const{markerSelections:i,labelSelections:s,contextData:n,paths:a}=t,{animationManager:r}=this.ctx;this.updateAreaPaths(a,n),Zm(this,r,a.flat()),Ee(i,Pc),Km(this,r,i),Nt(this,"labels",r,s)}animateReadyResize(t){const{contextData:i,paths:s}=t;this.updateAreaPaths(s,i),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var i,s;const{animationManager:n}=this.ctx,{markerSelections:a,labelSelections:r,contextData:o,paths:l,previousContextData:c}=t,[[h,u]]=l;super.resetAllAnimation(t);const d=()=>{this.updateAreaPaths(l,o),this.updateStrokePath(l,o)},p=()=>{n.skipCurrentBatch(),d()};if(o.length===0||c?.length===0){d(),Rc(this,n,a,"added"),Bc(this,"fill_path_properties",n,[h]),Bc(this,"stroke",n,[u],"trailing"),Nt(this,"labels",n,r);return}const[g]=o,[f]=c??[],m=z_(g,f,(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff);if(m===void 0){p();return}Rc(this,n,a),Xt(this.id,"fill_path_properties",n,[h],m.fill.pathProperties),D_(this.id,"fill_path_update",n,[h],m.fill.path),this.updateStrokePath(l,o),Bc(this,"stroke",n,[u],"trailing"),Nt(this,"labels",n,r)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new et}},Ed.className="AreaSeries",Ed.type="area",V_=Ed}}),U_,BC=L({"packages/ag-charts-community/src/chart/series/cartesian/areaSeriesModule.ts"(){"use strict";Zo(),xn(),Be(),PC(),U_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:V_,stackable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:Hs,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:sr,xOffset:3,yOffset:3,blur:5},marker:{__extends__:tr,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt,formatter:void 0}}},paletteFactory:e=>{const{marker:t}=qo(e);return{fill:t.fill,stroke:t.stroke,marker:t}}}}}),Cd,iy,sy=L({"packages/ag-charts-community/src/chart/series/cartesian/abstractBarSeries.ts"(){"use strict";pt(),ie(),Hi(),Cd=class extends Nn{constructor(){super(...arguments),this.direction="vertical"}},x([M(gf)],Cd.prototype,"direction",2),iy=class extends Rn{getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}}}}),ny,Se,FC=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesProperties.ts"(){"use strict";Jo(),pt(),as(),Gn(),sy(),ny=class extends he{constructor(){super(...arguments),this.placement="inside"}},x([M(ff)],ny.prototype,"placement",2),Se=class extends Cd{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new ps,this.label=new ny,this.tooltip=new xi}},x([M(X)],Se.prototype,"xKey",2),x([M(X,{optional:!0})],Se.prototype,"xName",2),x([M(X)],Se.prototype,"yKey",2),x([M(X,{optional:!0})],Se.prototype,"yName",2),x([M(X,{optional:!0})],Se.prototype,"stackGroup",2),x([M(zt,{optional:!0})],Se.prototype,"normalizedTo",2),x([M(kt)],Se.prototype,"fill",2),x([M(Ct)],Se.prototype,"fillOpacity",2),x([M(kt)],Se.prototype,"stroke",2),x([M(K)],Se.prototype,"strokeWidth",2),x([M(Ct)],Se.prototype,"strokeOpacity",2),x([M(Zs)],Se.prototype,"lineDash",2),x([M(K)],Se.prototype,"lineDashOffset",2),x([M(K)],Se.prototype,"cornerRadius",2),x([M(zi,{optional:!0})],Se.prototype,"formatter",2),x([M(nt,{optional:!0})],Se.prototype,"shadow",2),x([M(nt)],Se.prototype,"label",2),x([M(nt)],Se.prototype,"tooltip",2)}});function W_({rect:e,config:t}){const{crisp:i=!0,fill:s,stroke:n,strokeWidth:a,fillOpacity:r,strokeOpacity:o,lineDash:l,lineDashOffset:c,fillShadow:h,cornerRadius:u=0,topLeftCornerRadius:d,topRightCornerRadius:p,bottomRightCornerRadius:g,bottomLeftCornerRadius:f,cornerRadiusBbox:m,visible:v=!0}=t;e.crisp=i,e.fill=s,e.stroke=n,e.strokeWidth=a,e.fillOpacity=r,e.strokeOpacity=o,e.lineDash=l,e.lineDashOffset=c,e.fillShadow=h,e.topLeftCornerRadius=d?u:0,e.topRightCornerRadius=p?u:0,e.bottomRightCornerRadius=g?u:0,e.bottomLeftCornerRadius=f?u:0,e.cornerRadiusBbox=m,e.visible=v}function Y_(e){var t=e,{datum:i,isHighlighted:s,style:n,highlightStyle:a,formatter:r,seriesId:o,ctx:{callbackCache:l}}=t,c=Le(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]),h,u,d,p,g,f;const{fill:m,fillOpacity:v,stroke:y,strokeWidth:b}=bt(s&&a,n),{strokeOpacity:_,fillShadow:S,lineDash:D,lineDashOffset:A,cornerRadius:I=0,topLeftCornerRadius:T=!0,topRightCornerRadius:E=!0,bottomRightCornerRadius:C=!0,bottomLeftCornerRadius:O=!0,cornerRadiusBbox:N}=n;let w;return r&&(w=l.call(r,R({datum:i.datum,xKey:i.xKey,fill:m,stroke:y,strokeWidth:b,cornerRadius:I,highlighted:s,seriesId:o},c))),{fill:(h=w?.fill)!=null?h:m,stroke:(u=w?.stroke)!=null?u:y,strokeWidth:(d=w?.strokeWidth)!=null?d:b,fillOpacity:(p=w?.fillOpacity)!=null?p:v,strokeOpacity:(g=w?.strokeOpacity)!=null?g:_,lineDash:D,lineDashOffset:A,fillShadow:S,cornerRadius:(f=w?.cornerRadius)!=null?f:I,topLeftCornerRadius:T,topRightCornerRadius:E,bottomRightCornerRadius:C,bottomLeftCornerRadius:O,cornerRadiusBbox:N}}function H_(e=[]){const[t,i]=e;return!(t!==0||i!==1)}function Vc(e,t,i){const{startingX:s,startingY:n}=GC(e,t);return{isVertical:e,calculate:(r,o)=>{let l=e?r.x:s,c=e?n:r.y,h=e?r.width:0,u=e?0:r.height;const d=r.opacity;return o&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=o,h=e?o.width:0,u=e?0:o.height,e&&!ay(o)?c+=o.height:!e&&ay(o)&&(l+=o.width)),{x:l,y:c,width:h,height:u,opacity:d}},mode:i}}function zC(e,t){return{isVertical:e,calculate:i=>({x:e?i.x:i.x+i.width/2,y:e?i.y+i.height/2:i.y,width:e?i.width:0,height:e?0:i.height,opacity:i.opacity}),mode:t}}function Uc(e){const t=n=>n==null||isNaN(n.x)||isNaN(n.y);return{toFn:(n,a,r)=>r==="removed"&&n.datum==null&&e.mode==="fade"?Z(R({},Wc(n,a)),{opacity:0}):r==="removed"||t(a)?e.calculate(a,n.previousDatum):{x:a.x,y:a.y,width:a.width,height:a.height,opacity:a.opacity},fromFn:(n,a,r)=>{r==="updated"&&t(a)?r="removed":r==="updated"&&t(n.previousDatum)&&(r="added");let o={x:n.x,y:n.y,width:n.width,height:n.height,opacity:n.opacity};r==="added"&&n.previousDatum==null&&e.mode==="fade"?o=Z(R({},Wc(n,a)),{opacity:0}):(r==="unknown"||r==="added")&&(o=e.calculate(a,n.previousDatum));const l=ai[r];return Z(R({},o),{phase:l})}}}function GC(e,t){const i=t[e?"y":"x"];let s=1/0,n=0;return i?(e?n=i.scale.convert(wt.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(wt.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}function Wc(e,{x:t,y:i,width:s,height:n,opacity:a}){return{x:t,y:i,width:s,height:n,opacity:a}}var ay,ry=L({"packages/ag-charts-community/src/chart/series/cartesian/barUtil.ts"(){"use strict";He(),Ui(),Ot(),Te(),ie(),ay=e=>{var t;return Jl((t=e.yValue)!=null?t:0)}}});function K_(e,t,i){if(t.enabled&&i){const{x:s,y:n,text:a,textAlign:r,textBaseline:o}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d}=t;e.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:c,fontWeight:h,fontSize:u,fontFamily:d,textAlign:r,textBaseline:o})}else e.visible=!1}function j_({isPositive:e,isVertical:t,placement:i,padding:s=0,rect:n}){let a=n.x+n.width/2,r=n.y+n.height/2,o="center",l="middle";switch(i){case"start":{t?(r=e?n.y+n.height+s:n.y-s,l=e?"top":"bottom"):(a=e?n.x-s:n.x+n.width+s,o=e?"start":"end");break}case"outside":case"end":{t?(r=e?n.y-s:n.y+n.height+s,l=e?"bottom":"top"):(a=e?n.x+n.width+s:n.x-s,o=e?"start":"end");break}}return{x:a,y:r,textAlign:o,textBaseline:l}}var X_=L({"packages/ag-charts-community/src/chart/series/cartesian/labelUtil.ts"(){"use strict"}}),Od,$_,VC=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeries.ts"(){"use strict";He(),ko(),Ui(),Kt(),ee(),Oc(),ni(),Bn(),Ut(),xc(),Qu(),Fm(),ie(),en(),On(),Ii(),zn(),sy(),FC(),ry(),X_(),Od=class k2 extends iy{constructor(t){super({moduleCtx:t,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Wc,label:Fn}}),this.properties=new Se,this.groupScale=new Es,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()==="x"?t==="x"?"y":"x":t}processData(t){return B(this,null,function*(){var i,s,n,a;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:r=this.id}={},data:o=[]}=this,{xKey:l,yKey:c,normalizedTo:h}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=Math.abs(h??NaN),p=wt.is((i=this.getCategoryAxis())==null?void 0:i.scale),g=wt.is((s=this.getValueAxis())==null?void 0:s.scale),f=`bar-stack-${r}-yValues`,m=`${f}-trailing`,v=d&&isFinite(d)?d:void 0,y=[];v&&y.push(yd(this,[f,m],v,"range")),u&&this.processedData&&y.push(Mr(this.processedData)),u&&y.push(Wo(this));const b=this.visible?{}:{forceValue:0},{processedData:_}=yield this.requestDataModel(t,o,{props:[Xe(this,l,p,{id:"xValue"}),Gt(this,c,g,R({id:"yValue-raw",invalidValue:null},b)),...Aa(this,c,g,"normal","current",R({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},b)),...Aa(this,c,g,"trailing","current",R({id:"yValue-start",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0},b)),...p?[vd]:[],...y],groupByKeys:!0,groupByData:!1});this.smallestDataInterval={x:(a=(n=_.reduced)==null?void 0:n.smallestKeyInterval)!=null?a:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var i;const{processedData:s,dataModel:n}=this;if(!s||!n||s.data.length===0)return[];const{reduced:{[vd.property]:a}={}}=s,r=this.getCategoryAxis(),o=this.getValueAxis(),l=n.resolveProcessedDataDefById(this,"xValue"),c=n.getDomain(this,"xValue","key",s),h=n.getDomain(this,"yValue-end","value",s);if(t===this.getCategoryDirection()){if(l?.def.type==="key"&&l?.def.valueType==="category")return c;const u=a!=null&&isFinite(a)?a:0,d=(i=js(c))!=null?i:[NaN,NaN],p=r?.isReversed();if(t==="y"){const m=d[0]+(p?0:-u),v=d[1]+(p?u:0);return mi([m,v],r)}const g=d[0]+(p?-u:0),f=d[1]+(p?0:u);return mi([g,f],r)}else{if(this.getValueAxis()instanceof wn)return mi(h,o);{const u=[h[0]>0?0:h[0],h[1]<0?0:h[1]];return mi(u,o)}}}createNodeData(){return B(this,null,function*(){const{dataModel:t}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&s&&this.properties.isValid()))return[];const n=i.scale,a=s.scale,{groupScale:r,processedData:o,smallestDataInterval:l,ctx:{seriesStateManager:c}}=this,{xKey:h,yKey:u,xName:d,yName:p,fill:g,stroke:f,strokeWidth:m,cornerRadius:v,legendItemName:y,label:b}=this.properties,_=s.isReversed(),S=wt.is(n)?n.calcBandwidth(l?.x):n.bandwidth,D=[],{index:A,visibleGroupCount:I}=c.getVisiblePeerGroupIndex(this);for(let F=0;F<I;F++)D.push(String(F));r.domain=D,r.range=[0,S??0],i instanceof tn?r.paddingInner=i.groupPaddingInner:i instanceof Ln?r.padding=.1:r.padding=0,r.round=r.padding!==0;const T=r.bandwidth>=1?r.bandwidth:r.rawBandwidth,E=t.resolveProcessedDataIndexById(this,"xValue").index,C=t.resolveProcessedDataIndexById(this,"yValue-raw").index,O=t.resolveProcessedDataIndexById(this,"yValue-start").index,N=t.resolveProcessedDataIndexById(this,"yValue-end").index,w=t.resolveProcessedDataDefById(this,"yValue-range").index,U=!this.ctx.animationManager.isSkipped(),G=[];return o?.data.forEach(({keys:F,datum:P,values:j,aggValues:z})=>{j.forEach((q,tt)=>{var it,st;(it=G[tt])!=null||(G[tt]={itemId:u,nodeData:[],labelData:[],scales:fn(k2.prototype,this,"calculateScaling").call(this),visible:this.visible||U});const vt=F[E],H=n.convert(vt),at=+q[N],ut=+q[O],ct=q[C],dt=ct>=0,ot=dt!==_,yt=(st=z?.[w][dt?1:0])!=null?st:0,xt=H+r.convert(String(A));if(isNaN(at))return;const Ht=a.convert(at),ae=a.convert(ut),Vt=this.getBarDirection()==="x",we=a.convert(yt),Ae=a.convert(0),Pe=new ht(Vt?Math.min(Ae,we):xt,Vt?xt:Math.min(Ae,we),Vt?Math.abs(Ae-we):T,Vt?T:Math.abs(Ae-we)),ne={x:Vt?Math.min(Ht,ae):xt,y:Vt?xt:Math.min(Ht,ae),width:Vt?Math.abs(ae-Ht):T,height:Vt?T:Math.abs(ae-Ht),cornerRadiusBbox:Pe},{fontStyle:qn,fontWeight:Zn,fontSize:xs,fontFamily:Ri,color:me,placement:Zv}=b,_h=this.getLabelText(this.properties.label,{datum:P[tt],value:ct,xKey:h,yKey:u,xName:d,yName:p,legendItemName:y},Qn=>Et(Qn)?Qn.toFixed(2):""),Ll=_h?R({text:_h,fill:me,fontStyle:qn,fontWeight:Zn,fontSize:xs,fontFamily:Ri},j_({isPositive:dt,isVertical:!Vt,placement:Zv,rect:ne})):void 0,Mh=this.shouldFlipXY()?ne.height:ne.width,kh={series:this,itemId:u,datum:P[tt],cumulativeValue:at,xValue:vt,yValue:ct,yKey:u,xKey:h,capDefaults:{lengthRatioMultiplier:Mh,lengthMax:Mh},x:ne.x,y:ne.y,width:ne.width,height:ne.height,midPoint:{x:ne.x+ne.width/2,y:ne.y+ne.height/2},fill:g,stroke:f,opacity:1,strokeWidth:m,cornerRadius:v,topLeftCornerRadius:Vt!==ot,topRightCornerRadius:ot,bottomRightCornerRadius:Vt===ot,bottomLeftCornerRadius:!ot,cornerRadiusBbox:Pe,label:Ll};G[tt].nodeData.push(kh),G[tt].labelData.push(kh)})}),G})}nodeFactory(){return new $e}updateDatumSelection(t){return B(this,null,function*(){return t.datumSelection.update(t.nodeData,i=>{i.tag=0},i=>Da(i.xValue))})}updateDatumNodes(t){return B(this,null,function*(){if(!this.properties.isValid())return;const{yKey:i,stackGroup:s,fill:n,fillOpacity:a,stroke:r,strokeWidth:o,strokeOpacity:l,lineDash:c,lineDashOffset:h,formatter:u,shadow:d,highlightStyle:{item:p}}=this.properties,g=this.axes.x,f=H_(g?.visibleRange),m=this.getCategoryDirection()==="x";t.datumSelection.each((v,y)=>{const b={fill:n,stroke:r,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(o),cornerRadius:y.cornerRadius,topLeftCornerRadius:y.topLeftCornerRadius,topRightCornerRadius:y.topRightCornerRadius,bottomRightCornerRadius:y.bottomRightCornerRadius,bottomLeftCornerRadius:y.bottomLeftCornerRadius,cornerRadiusBbox:y.cornerRadiusBbox},_=m?y.width>0:y.height>0,S=Y_({datum:y,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:p,yKey:i,style:b,formatter:u,stackGroup:s});S.crisp=f,S.visible=_,W_({rect:v,config:S})})})}updateLabelSelection(t){return B(this,null,function*(){const i=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(i,s=>{s.tag=1,s.pointerEvents=1})})}updateLabelNodes(t){return B(this,null,function*(){t.labelSelection.each((i,s)=>{K_(i,this.properties.label,s.label)})})}getTooltipHtml(t){var i;const{id:s,processedData:n,ctx:{callbackCache:a}}=this,r=this.getCategoryAxis(),o=this.getValueAxis();if(!n||!this.properties.isValid()||!r||!o)return"";const{xKey:l,yKey:c,xName:h,yName:u,fill:d,stroke:p,strokeWidth:g,tooltip:f,formatter:m,stackGroup:v}=this.properties,{xValue:y,yValue:b,datum:_}=t,S=r.formatDatum(y),D=o.formatDatum(b),A=qt(u),I=qt(S+": "+D);let T;m&&(T=a.call(m,{seriesId:s,datum:_,xKey:l,yKey:c,stackGroup:v,fill:d,stroke:p,strokeWidth:this.getStrokeWidth(g),highlighted:!1}));const E=(i=T?.fill)!=null?i:d;return f.toTooltipHtml({title:A,content:I,backgroundColor:E},R({seriesId:s,datum:_,xKey:l,yKey:c,xName:h,yName:u,stackGroup:v,title:A,color:E},this.getModuleTooltipParams()))}getLegendData(t){var i,s;const{showInLegend:n}=this.properties;if(t!=="category"||!((i=this.data)!=null&&i.length)||!this.properties.isValid()||!n)return[];const{yKey:a,yName:r,fill:o,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u,legendItemName:d,visible:p}=this.properties;return[{legendType:"category",id:this.id,itemId:a,seriesId:this.id,enabled:p,label:{text:(s=d??r)!=null?s:a},marker:{fill:o,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u},legendItemName:d}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:i,annotationSelections:s}){const n=Uc(Vc(this.isVertical(),this.axes,"normal"));Xt(this.id,"nodes",this.ctx.animationManager,t,n),Nt(this,"labels",this.ctx.animationManager,i),Nt(this,"annotations",this.ctx.animationManager,s)}animateWaitingUpdateReady(t){var i,s,n;const{datumSelections:a,labelSelections:r,annotationSelections:o,previousContextData:l}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const c=(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff,h=l?.length===0?"fade":"normal",u=Uc(Vc(this.isVertical(),this.axes,h));Xt(this.id,"nodes",this.ctx.animationManager,a,u,(p,g)=>Da(g.xValue),c),((n=c?.changed)!=null?n:!0)&&(Nt(this,"labels",this.ctx.animationManager,r),Nt(this,"annotations",this.ctx.animationManager,o))}isLabelEnabled(){return this.properties.label.enabled}},Od.className="BarSeries",Od.type="bar",$_=Od}}),q_,UC=L({"packages/ag-charts-community/src/chart/series/cartesian/barSeriesModule.ts"(){"use strict";Zo(),xn(),Be(),VC(),q_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:$_,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},swapDefaultAxesCondition:e=>e?.direction==="horizontal",themeTemplate:{series:{__extends__:Hs,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:ve,color:er,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:sr,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Ad}}}),oy,Z_,Ea,Yc=L({"packages/ag-charts-community/src/scale/colorScale.ts"(){"use strict";_u(),gt(),Ot(),sc(),oy=e=>{const t=Ts.fromString(e),[i,s,n]=Ts.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:s,h:n,a:t.a}},Z_=(e,t,i)=>{i=It(0,i,1);let s,n;if(Number.isNaN(e.h)&&Number.isNaN(t.h))s=0,n=0;else if(Number.isNaN(e.h))s=t.h,n=t.c;else if(Number.isNaN(t.h))s=e.h,n=e.c;else{const o=e.h;let l=t.h;const c=t.h-e.h;c>180?l-=360:c<-180&&(l+=360),s=o*(1-i)+l*i,n=e.c*(1-i)+t.c*i}const a=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return Ts.fromOKLCH(a,n,s,r)},Ea=class{constructor(){this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(oy)}update(){const{domain:e,range:t}=this;e.length<2&&($.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let i=1;i<e.length;i++){const s=e[i-1],n=e[i];if(s>=n){$.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((a,r)=>a-r);break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(oy)}convert(e){this.refresh();const{domain:t,range:i,parsedRange:s}=this,n=t[0],a=t.at(-1),r=i[0],o=i[i.length-1];if(e<=n)return r;if(e>=a)return o;let l,c;if(t.length===2){const d=(e-n)/(a-n),p=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(d*(i.length-1)),i.length-2),c=(d-l*p)/p}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const d=t[l],p=t[l+1];c=(e-d)/(p-d)}const h=s[l],u=s[l+1];return Z_(h,u,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&$.warnOnce("Expected update to not invalidate scale"))}},x([gi],Ea.prototype,"domain",2),x([gi],Ea.prototype,"range",2)}}),Nd,Fe,WC=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesProperties.ts"(){"use strict";Ql(),pt(),as(),Nc(),Gn(),Hi(),Nd=class extends vi{constructor(){super(...arguments),this.maxSize=30}},x([M(K),J({redraw:3})],Nd.prototype,"maxSize",2),x([M(lc,{optional:!0}),J({redraw:3})],Nd.prototype,"domain",2),Fe=class extends Nn{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Nd,this.label=new he,this.tooltip=new xi}},x([M(X)],Fe.prototype,"xKey",2),x([M(X)],Fe.prototype,"yKey",2),x([M(X)],Fe.prototype,"sizeKey",2),x([M(X,{optional:!0})],Fe.prototype,"labelKey",2),x([M(X,{optional:!0})],Fe.prototype,"colorKey",2),x([M(X,{optional:!0})],Fe.prototype,"xName",2),x([M(X,{optional:!0})],Fe.prototype,"yName",2),x([M(X,{optional:!0})],Fe.prototype,"sizeName",2),x([M(X,{optional:!0})],Fe.prototype,"labelName",2),x([M(X,{optional:!0})],Fe.prototype,"colorName",2),x([M(lc,{optional:!0})],Fe.prototype,"colorDomain",2),x([M(Gi)],Fe.prototype,"colorRange",2),x([M(X,{optional:!0})],Fe.prototype,"title",2),x([M(nt)],Fe.prototype,"marker",2),x([M(nt)],Fe.prototype,"label",2),x([M(nt)],Fe.prototype,"tooltip",2)}}),Q_,Rd,J_,YC=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeries.ts"(){"use strict";Yc(),jo(),Dn(),xe(),ni(),Te(),Bn(),ie(),en(),On(),En(),Ii(),zn(),WC(),Hi(),Lr(),Q_=class extends _d{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.properties.sizeKey}},Rd=class D2 extends Rn{constructor(t){super({moduleCtx:t,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Fn,marker:wc}}),this.NodeClickEvent=Q_,this.properties=new Fe,this.sizeScale=new ws,this.colorScale=new Ea}processData(t){return B(this,null,function*(){var i,s;if(!this.properties.isValid()||this.data==null)return;const{isContinuousX:n,isContinuousY:a}=this.isContinuous(),{xKey:r,yKey:o,sizeKey:l,labelKey:c,colorDomain:h,colorRange:u,colorKey:d,marker:p}=this.properties,{dataModel:g,processedData:f}=yield this.requestDataModel(t,this.data,{props:[Xe(this,r,n,{id:"xKey-raw"}),Xe(this,o,a,{id:"yKey-raw"}),...c?[Xe(this,c,!1,{id:"labelKey-raw"})]:[],Gt(this,r,n,{id:"xValue"}),Gt(this,o,a,{id:"yValue"}),Gt(this,l,!0,{id:"sizeValue"}),...d?[Gt(this,d,!0,{id:"colorValue"})]:[],...c?[Gt(this,c,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),m=g.resolveProcessedDataIndexById(this,"sizeValue").index,v=(i=f.domain.values[m])!=null?i:[];if(this.sizeScale.domain=p.domain?p.domain:v,d){const y=g.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=(s=h??f.domain.values[y])!=null?s:[],this.colorScale.range=u,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:i,processedData:s}=this;if(!s||!i)return[];const n=t==="x"?"xValue":"yValue",a=i.resolveProcessedDataDefById(this,n),r=i.getDomain(this,n,"value",s);if(a?.def.type==="value"&&a?.def.valueType==="category")return r;const o=this.axes[t];return mi(js(r),o)}createNodeData(){return B(this,null,function*(){var t,i,s;const{axes:n,dataModel:a,processedData:r,colorScale:o,sizeScale:l}=this,{xKey:c,yKey:h,sizeKey:u,labelKey:d,xName:p,yName:g,sizeName:f,labelName:m,label:v,colorKey:y,marker:b,visible:_}=this.properties,S=n.x,D=n.y;if(!(a&&r&&_&&S&&D))return[];const A=a.resolveProcessedDataIndexById(this,"xValue").index,I=a.resolveProcessedDataIndexById(this,"yValue").index,T=u?a.resolveProcessedDataIndexById(this,"sizeValue").index:-1,E=y?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=d?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,O=S.scale,N=D.scale,w=((t=O.bandwidth)!=null?t:0)/2,U=((i=N.bandwidth)!=null?i:0)/2,G=[];l.range=[b.size,b.maxSize];const F=v.getFont();for(const{values:P,datum:j}of(s=r.data)!=null?s:[]){const z=P[A],q=P[I],tt=O.convert(z)+w,it=N.convert(q)+U,st=this.getLabelText(v,{value:d?P[C]:q,datum:j,xKey:c,yKey:h,sizeKey:u,labelKey:d,xName:p,yName:g,sizeName:f,labelName:m}),vt=se.getTextSize(String(st),F),H=u?l.convert(P[T]):b.size,at=y?o.convert(P[E]):void 0;G.push({series:this,itemId:h,yKey:h,xKey:c,datum:j,xValue:z,yValue:q,sizeValue:P[T],point:{x:tt,y:it,size:H},midPoint:{x:tt,y:it},fill:at,label:R({text:st},vt)})}return[{itemId:h,nodeData:G,labelData:G,scales:fn(D2.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return(t=this.contextNodeData)==null?void 0:t.reduce((i,s)=>i.concat(s.labelData),[])}markerFactory(){const{shape:t}=this.properties.marker,i=Ma(t);return new i}updateMarkerSelection(t){return B(this,null,function*(){const{nodeData:i,markerSelection:s}=t;this.properties.marker.isDirty()&&(s.clear(),s.cleanup());const n=this.properties.marker.enabled?i:[];return s.update(n,void 0,a=>Da([a.xValue,a.yValue,a.label.text]))})}updateMarkerNodes(t){return B(this,null,function*(){const{markerSelection:i,isHighlight:s}=t,{xKey:n,yKey:a,sizeKey:r,labelKey:o,marker:l}=this.properties,c=bt(s&&this.properties.highlightStyle.item,l.getStyle());this.sizeScale.range=[l.size,l.maxSize],i.each((h,u)=>{this.updateMarkerStyle(h,l,{datum:u,highlighted:s,xKey:n,yKey:a,sizeKey:r,labelKey:o},c)}),s||this.properties.marker.markClean()})}updateLabelSelection(t){return B(this,null,function*(){var i,s;const n=this.properties.label.enabled?(s=(i=this.chart)==null?void 0:i.placeLabels().get(this))!=null?s:[]:[];return t.labelSelection.update(n.map(a=>Z(R({},a.datum),{point:{x:a.x,y:a.y,size:a.datum.point.size}})))})}updateLabelNodes(t){return B(this,null,function*(){const{label:i}=this.properties;t.labelSelection.each((s,n)=>{var a,r,o,l;s.text=n.label.text,s.fill=i.color,s.x=(r=(a=n.point)==null?void 0:a.x)!=null?r:0,s.y=(l=(o=n.point)==null?void 0:o.y)!=null?l:0,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.fontSize=i.fontSize,s.fontFamily=i.fontFamily,s.textAlign="left",s.textBaseline="top"})})}getTooltipHtml(t){var i;const s=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!s||!n)return"";const{xKey:a,yKey:r,sizeKey:o,labelKey:l,xName:c,yName:h,sizeName:u,labelName:d,marker:p,tooltip:g}=this.properties,f=(i=this.properties.title)!=null?i:h,m=bt({fill:t.fill,strokeWidth:this.getStrokeWidth(p.strokeWidth)},p.getStyle()),{fill:v="gray"}=this.getMarkerStyle(p,{datum:t,highlighted:!1,xKey:a,yKey:r,sizeKey:o,labelKey:l},m),{datum:y,xValue:b,yValue:_,sizeValue:S,label:{text:D}}=t,A=qt(s.formatDatum(b)),I=qt(n.formatDatum(_));let T=`<b>${qt(c??a)}</b>: ${A}<br><b>${qt(h??r)}</b>: ${I}`;return o&&(T+=`<br><b>${qt(u??o)}</b>: ${qt(String(S))}`),l&&(T=`<b>${qt(d??l)}</b>: ${qt(D)}<br>`+T),g.toTooltipHtml({title:f,content:T,backgroundColor:v},{datum:y,xKey:a,xName:c,yKey:r,yName:h,sizeKey:o,sizeName:u,labelKey:l,labelName:d,title:f,color:v,seriesId:this.id})}getLegendData(){var t,i;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid())return[];const{yKey:s,yName:n,title:a,marker:r,visible:o}=this.properties,{shape:l,fill:c,stroke:h,fillOpacity:u,strokeOpacity:d,strokeWidth:p}=r;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:o,label:{text:(i=a??n)!=null?i:s},marker:{shape:l,fill:c??"rgba(0, 0, 0, 0)",stroke:h??"rgba(0, 0, 0, 0)",fillOpacity:u??1,strokeOpacity:d??1,strokeWidth:p??0}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:i}){Hm(this,this.ctx.animationManager,t),Nt(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new et}},Rd.className="BubbleSeries",Rd.type="bubble",J_=Rd}}),tM,HC=L({"packages/ag-charts-community/src/chart/series/cartesian/bubbleSeriesModule.ts"(){"use strict";Zo(),xn(),Be(),YC(),tM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:J_,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:Hs,tooltip:{position:{type:"node"}},marker:{__extends__:tr,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt}}},paletteFactory:qo}}}),_e,KC=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesProperties.ts"(){"use strict";Jo(),pt(),as(),Gn(),Hi(),_e=class extends Nn{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new ps,this.label=new he,this.tooltip=new xi}},x([M(X)],_e.prototype,"xKey",2),x([M(X,{optional:!0})],_e.prototype,"yKey",2),x([M(X,{optional:!0})],_e.prototype,"xName",2),x([M(X,{optional:!0})],_e.prototype,"yName",2),x([M(kt,{optional:!0})],_e.prototype,"fill",2),x([M(Ct)],_e.prototype,"fillOpacity",2),x([M(kt,{optional:!0})],_e.prototype,"stroke",2),x([M(K)],_e.prototype,"strokeWidth",2),x([M(Ct)],_e.prototype,"strokeOpacity",2),x([M(Zs)],_e.prototype,"lineDash",2),x([M(K)],_e.prototype,"lineDashOffset",2),x([M(rt)],_e.prototype,"areaPlot",2),x([M(Do,{optional:!0})],_e.prototype,"bins",2),x([M(le(["count","sum","mean"],"a histogram aggregation"))],_e.prototype,"aggregation",2),x([M(K,{optional:!0})],_e.prototype,"binCount",2),x([M(nt)],_e.prototype,"shadow",2),x([M(nt)],_e.prototype,"label",2),x([M(nt)],_e.prototype,"tooltip",2)}}),ly,wd,eM,jC=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeries.ts"(){"use strict";He(),ee(),Oc(),Bn(),wo(),ie(),Am(),en(),On(),Ii(),zn(),ry(),Hi(),KC(),ly=10,wd=class A2 extends Rn{constructor(t){super({moduleCtx:t,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Wc,label:Fn}}),this.properties=new _e,this.calculatedBins=[]}deriveBins(t){if(this.properties.binCount)return this.calculateNiceBins(t,this.properties.binCount);const i=Wu(t[0],t[1],ly),s=No(t[0],t[1],ly),[n]=i,a=r=>[r,r+s];return[[n-s,n],...i.map(a)]}calculateNiceBins(t,i){const s=Math.floor(t[0]),n=t[1],a=i||1,{start:r,binSize:o}=this.calculateNiceStart(s,n,a);return this.getBins(r,n,o,a)}getBins(t,i,s,n){const a=[],r=this.calculatePrecision(s);for(let o=0;o<n;o++){const l=Math.round((t+o*s)*r)/r;let c=Math.round((t+(o+1)*s)*r)/r;o===n-1&&(c=Math.max(c,i)),a[o]=[l,c]}return a}calculatePrecision(t){let i=10;if(isFinite(t)&&t>0)for(;t<1;)i*=10,t*=10;return i}calculateNiceStart(t,i,s){const n=Math.abs(i-t)/s,a=Math.floor(Math.log10(n)),r=Math.pow(10,a);return{start:Math.floor(t/r)*r,binSize:n}}processData(t){return B(this,null,function*(){var i;const{xKey:s,yKey:n,areaPlot:a,aggregation:r}=this.properties,o=[Xe(this,s,!0),Lm];if(n){let c=km(this,"groupCount");r==="count"||(r==="sum"?c=qS(this,"groupAgg"):r==="mean"&&(c=QS(this,"groupAgg"))),a&&(c=Dm(this,"groupAgg",c)),o.push(Gt(this,n,!0,{invalidValue:void 0}),c)}else{let c=km(this,"groupAgg");a&&(c=Dm(this,"groupAgg",c)),o.push(c)}const l=c=>{var h;const u=mi(c.domain.keys[0]);if(u.length===0)return c.domain.groups=[],()=>[];const d=(h=this.properties.bins)!=null?h:this.deriveBins(u),p=d.length;return this.calculatedBins=[...d],g=>{const f=g.keys[0];for(let m=0;m<p;m++){const v=d[m];if(f>=v[0]&&f<v[1]||m===p-1&&f<=v[1])return v}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&o.push(Mr(this.processedData,!1)),yield this.requestDataModel(t,(i=this.data)!=null?i:[],{props:o,dataVisible:this.visible,groupByFn:l}),this.animationState.transition("updateData")})}getSeriesDomain(t){var i,s,n,a;const{processedData:r,dataModel:o}=this;if(!r||!o||!this.calculatedBins.length)return[];const l=o.getDomain(this,"groupAgg","aggregate",r),c=(i=this.calculatedBins)==null?void 0:i[0][0],h=(a=this.calculatedBins)==null?void 0:a[((n=(s=this.calculatedBins)==null?void 0:s.length)!=null?n:0)-1][1];return mi(t==="x"?[c,h]:l)}createNodeData(){return B(this,null,function*(){var t;const{id:i,axes:s,processedData:n,ctx:{callbackCache:a}}=this,r=s.x,o=s.y;if(!this.visible||!r||!o||!n||n.type!=="grouped")return[];const{scale:l}=r,{scale:c}=o,{xKey:h,yKey:u,xName:d,yName:p,fill:g,stroke:f,strokeWidth:m}=this.properties,{formatter:v=I=>String(I.value),fontStyle:y,fontWeight:b,fontSize:_,fontFamily:S,color:D}=this.properties.label,A=[];return n.data.forEach(I=>{var T;const{aggValues:[[E,C]]=[[0,0]],datum:O,datum:{length:N},keys:w,keys:[U,G]}=I,F=l.convert(U),P=l.convert(G),j=E+C,z=c.convert(0),q=c.convert(j),tt=Math.abs(P-F),it=Math.abs(q-z),st=Math.min(F,P),vt=Math.min(z,q),H=j!==0?{text:(T=a.call(v,{value:j,datum:O,seriesId:i,xKey:h,yKey:u,xName:d,yName:p}))!=null?T:String(j),fontStyle:y,fontWeight:b,fontSize:_,fontFamily:S,fill:D,x:st+tt/2,y:vt+it/2}:void 0,at={x:st+tt/2,y:vt+it/2};A.push({series:this,datum:O,aggregatedValue:j,frequency:N,domain:w,yKey:u,xKey:h,x:st,y:vt,xValue:F,yValue:q,width:tt,height:it,midPoint:at,fill:g,stroke:f,opacity:1,strokeWidth:m,label:H})}),[{itemId:(t=this.properties.yKey)!=null?t:this.id,nodeData:A,labelData:A,scales:fn(A2.prototype,this,"calculateScaling").call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new $e}updateDatumSelection(t){return B(this,null,function*(){const{nodeData:i,datumSelection:s}=t;return s.update(i,n=>{n.tag=0,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(t){return B(this,null,function*(){const{isHighlight:i}=t,{fillOpacity:s,strokeOpacity:n,lineDash:a,lineDashOffset:r,shadow:o,highlightStyle:{item:{fill:l,fillOpacity:c=s,stroke:h,strokeWidth:u}}}=this.properties;t.datumSelection.each((d,p,g)=>{var f,m;const v=i&&u!==void 0?u:p.strokeWidth,y=i?c:s;d.fill=(f=i?l:void 0)!=null?f:p.fill,d.stroke=(m=i?h:void 0)!=null?m:p.stroke,d.fillOpacity=y,d.strokeOpacity=n,d.strokeWidth=v,d.lineDash=a,d.lineDashOffset=r,d.fillShadow=o,d.zIndex=i?kr.highlightedZIndex:g,d.visible=p.height>0})})}updateLabelSelection(t){return B(this,null,function*(){const{labelData:i,labelSelection:s}=t;return s.update(i,n=>{n.tag=1,n.pointerEvents=1,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(t){return B(this,null,function*(){const i=this.isLabelEnabled();t.labelSelection.each((s,n)=>{const a=n.label;a&&i?(s.text=a.text,s.x=a.x,s.y=a.y,s.fontStyle=a.fontStyle,s.fontWeight=a.fontWeight,s.fontSize=a.fontSize,s.fontFamily=a.fontFamily,s.fill=a.fill,s.visible=!0):s.visible=!1})})}getTooltipHtml(t){const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,xName:r,yName:o,fill:l,aggregation:c,tooltip:h}=this.properties,{aggregatedValue:u,frequency:d,domain:[p,g]}=t,f=`${qt(r??n)}: ${i.formatDatum(p)} - ${i.formatDatum(g)}`;let m=a?`<b>${qt(o??a)} (${c})</b>: ${s.formatDatum(u)}<br>`:"";m+=`<b>Frequency</b>: ${d}`;const v={title:f,backgroundColor:l,content:m};return h.toTooltipHtml(v,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:n,xName:r,yKey:a,yName:o,color:l,title:f,seriesId:this.id})}getLegendData(t){var i,s;if(!((i=this.data)!=null&&i.length)||t!=="category")return[];const{xKey:n,yName:a,fill:r,fillOpacity:o,stroke:l,strokeWidth:c,strokeOpacity:h,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:u,label:{text:(s=a??n)!=null?s:"Frequency"},marker:{fill:r??"rgba(0, 0, 0, 0)",stroke:l??"rgba(0, 0, 0, 0)",fillOpacity:o,strokeOpacity:h,strokeWidth:c}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:i}){const s=Uc(Vc(!0,this.axes,"normal"));Xt(this.id,"datums",this.ctx.animationManager,t,s),Nt(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var i,s;const n=(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff,a=Uc(Vc(!0,this.axes,"normal"));Xt(this.id,"datums",this.ctx.animationManager,t.datumSelections,a,(r,o)=>Da(o.domain),n),Nt(this,"labels",this.ctx.animationManager,t.labelSelections)}isLabelEnabled(){return this.properties.label.enabled}},wd.className="HistogramSeries",wd.type="histogram",eM=wd}}),iM,XC=L({"packages/ag-charts-community/src/chart/series/cartesian/histogramSeriesModule.ts"(){"use strict";xn(),Be(),jC(),iM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:eM,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:Hs,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:er,formatter:void 0},shadow:{enabled:!1,color:sr,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}}}}}),li,$C=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesProperties.ts"(){"use strict";pt(),as(),Nc(),Gn(),Hi(),li=class extends Nn{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new vi,this.label=new he,this.tooltip=new xi,this.connectMissingData=!1}},x([M(X)],li.prototype,"xKey",2),x([M(X)],li.prototype,"yKey",2),x([M(X,{optional:!0})],li.prototype,"xName",2),x([M(X,{optional:!0})],li.prototype,"yName",2),x([M(X,{optional:!0})],li.prototype,"title",2),x([M(kt)],li.prototype,"stroke",2),x([M(K)],li.prototype,"strokeWidth",2),x([M(Ct)],li.prototype,"strokeOpacity",2),x([M(Zs)],li.prototype,"lineDash",2),x([M(K)],li.prototype,"lineDashOffset",2),x([M(nt)],li.prototype,"marker",2),x([M(nt)],li.prototype,"label",2),x([M(nt)],li.prototype,"tooltip",2),x([M(rt)],li.prototype,"connectMissingData",2)}}),Pd,sM,qC=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeries.ts"(){"use strict";He(),A_(),ya(),xe(),ee(),ni(),Te(),Bn(),Ut(),ie(),en(),On(),En(),Ii(),zn(),Hi(),$C(),ty(),Lr(),Fc(),Pd=class L2 extends Rn{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:Qm({getOpacity:()=>this.getOpacity()}),label:Fn,marker:(i,s)=>R(R({},wc(i)),Pc(i,s))}}),this.properties=new li}processData(t){return B(this,null,function*(){if(!this.properties.isValid()||this.data==null)return;const{xKey:i,yKey:s}=this.properties,n=!this.ctx.animationManager.isSkipped(),{isContinuousX:a,isContinuousY:r}=this.isContinuous(),o=[];a||(o.push(Xe(this,i,a,{id:"xKey"})),n&&this.processedData&&o.push(Mr(this.processedData))),n&&o.push(Wo(this,a?["xValue"]:[])),o.push(Gt(this,i,a,{id:"xValue"}),Gt(this,s,r,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,this.data,{props:o}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{axes:i,dataModel:s,processedData:n}=this;if(!n||!s)return[];const a=i.x,r=i.y,o=s.resolveProcessedDataDefById(this,"xValue");if(t==="x"){const l=s.getDomain(this,"xValue","value",n);return o?.def.type==="value"&&o.def.valueType==="category"?l:mi(js(l),a)}else{const l=s.getDomain(this,"yValue","value",n);return mi(l,r)}}createNodeData(){return B(this,null,function*(){var t,i,s;const{processedData:n,dataModel:a,axes:r}=this,o=r.x,l=r.y;if(!n||!a||!o||!l)return[];const{xKey:c,yKey:h,xName:u,yName:d,marker:p,label:g,connectMissingData:f}=this.properties,m=o.scale,v=l.scale,y=((t=m.bandwidth)!=null?t:0)/2,b=((i=v.bandwidth)!=null?i:0)/2,_=[],S=p.enabled?p.size:0,D=a.resolveProcessedDataIndexById(this,"xValue").index,A=a.resolveProcessedDataIndexById(this,"yValue").index;let I=!0,T;for(let E=0;E<n.data.length;E++){const{datum:C,values:O}=T??n.data[E],N=O[D],w=O[A];if(w===void 0)I=!f;else{const U=m.convert(N)+y;if(isNaN(U)){I=!f,T=void 0;continue}T=((s=n.data[E+1])==null?void 0:s.values[A])===void 0?void 0:n.data[E+1];const G=v.convert(w)+b,F=this.getLabelText(g,{value:w,datum:C,xKey:c,yKey:h,xName:u,yName:d},P=>Et(P)?P.toFixed(2):String(P));_.push({series:this,datum:C,yKey:h,xKey:c,point:{x:U,y:G,moveTo:I,size:S},midPoint:{x:U,y:G},yValue:w,xValue:N,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:F?{text:F,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0}),I=!1}}return[{itemId:h,nodeData:_,labelData:_,scales:fn(L2.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,i=Ma(t);return new i}updatePathNodes(t){return B(this,null,function*(){const{paths:[i],opacity:s,visible:n,animationEnabled:a}=t;i.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:s,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),a||(i.visible=n),Ld(this,i)})}updateMarkerSelection(t){return B(this,null,function*(){let{nodeData:i}=t;const{markerSelection:s}=t,{shape:n,enabled:a}=this.properties.marker;return i=n&&a?i:[],this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(i,void 0,r=>Da(r.xValue))})}updateMarkerNodes(t){return B(this,null,function*(){const{markerSelection:i,isHighlight:s}=t,{xKey:n,yKey:a,stroke:r,strokeWidth:o,strokeOpacity:l,marker:c,highlightStyle:h}=this.properties,u=bt(s&&h.item,c.getStyle(),{stroke:r,strokeWidth:o,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();i.each((p,g)=>{this.updateMarkerStyle(p,c,{datum:g,highlighted:s,xKey:n,yKey:a},u,{applyTranslation:d})}),s||c.markClean()})}updateLabelSelection(t){return B(this,null,function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])})}updateLabelNodes(t){return B(this,null,function*(){const{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:r,color:o}=this.properties.label;t.labelSelection.each((l,c)=>{const{point:h,label:u}=c;c&&u&&i?(l.fontStyle=s,l.fontWeight=n,l.fontSize=a,l.fontFamily=r,l.textAlign=u.textAlign,l.textBaseline=u.textBaseline,l.text=u.text,l.x=h.x,l.y=h.y-10,l.fill=o,l.visible=!0):l.visible=!1})})}getTooltipHtml(t){var i;const s=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!s||!n)return"";const{xKey:a,yKey:r,xName:o,yName:l,strokeWidth:c,marker:h,tooltip:u}=this.properties,{datum:d,xValue:p,yValue:g}=t,f=s.formatDatum(p),m=n.formatDatum(g),v=qt((i=this.properties.title)!=null?i:l),y=qt(f+": "+m),b=bt({fill:h.stroke},h.getStyle(),{strokeWidth:c}),{fill:_}=this.getMarkerStyle(h,{datum:t,xKey:a,yKey:r,highlighted:!1},b);return u.toTooltipHtml({title:v,content:y,backgroundColor:_},R({datum:d,xKey:a,xName:o,yKey:r,yName:l,title:v,color:_,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var i,s,n,a,r,o,l,c,h;if(!((i=this.data)!=null&&i.length&&this.properties.isValid()&&t==="category"))return[];const{yKey:u,yName:d,stroke:p,strokeOpacity:g,strokeWidth:f,lineDash:m,title:v,marker:y,visible:b}=this.properties,_="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:u,seriesId:this.id,enabled:b,label:{text:(s=v??d)!=null?s:u},marker:{shape:y.shape,fill:(n=y.fill)!=null?n:_,stroke:(r=(a=y.stroke)!=null?a:p)!=null?r:_,fillOpacity:(o=y.fillOpacity)!=null?o:1,strokeOpacity:(c=(l=y.strokeOpacity)!=null?l:g)!=null?c:1,strokeWidth:(h=y.strokeWidth)!=null?h:0,enabled:y.enabled},line:{stroke:p??_,strokeOpacity:g,strokeWidth:f,lineDash:m}}]}updatePaths(t){return B(this,null,function*(){this.updateLinePaths([t.paths],[t.contextData])})}updateLinePaths(t,i){i.forEach(({nodeData:s},n)=>{const[a]=t[n],{path:r}=a;r.clear({trackChanges:!0});for(const o of s)o.point.moveTo?r.moveTo(o.point.x,o.point.y):r.lineTo(o.point.x,o.point.y);a.checkPathDirty()})}animateEmptyUpdateReady(t){const{markerSelections:i,labelSelections:s,annotationSelections:n,contextData:a,paths:r}=t,{animationManager:o}=this.ctx;this.updateLinePaths(r,a),Zm(this,o,r.flat()),Ee(i,Pc),Km(this,o,i),Nt(this,"labels",o,s),Nt(this,"annotations",o,n)}animateReadyResize(t){const{contextData:i,paths:s}=t;this.updateLinePaths(s,i),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var i,s;const{animationManager:n}=this.ctx,{markerSelections:a,labelSelections:r,annotationSelections:o,contextData:l,paths:c,previousContextData:h}=t,[u]=c;super.resetAllAnimation(t);const d=()=>{this.updateLinePaths(c,l)},p=()=>{n.skipCurrentBatch(),d()};if(l.length===0||h?.length===0){d(),Rc(this,n,a,"added"),Bc(this,"path_properties",n,u??[]),Nt(this,"labels",n,r),Nt(this,"annotations",n,o);return}const[g]=l,[f]=h??[],m=F_(g,f,(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff);if(m===void 0){p();return}Rc(this,n,a),Xt(this.id,"path_properties",n,u,m.pathProperties),D_(this.id,"path_update",n,u,m.path),m.hasMotion&&(Nt(this,"labels",n,r),Nt(this,"annotations",n,o))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new et}},Pd.className="LineSeries",Pd.type="line",sM=Pd}}),nM,ZC=L({"packages/ag-charts-community/src/chart/series/cartesian/lineSeriesModule.ts"(){"use strict";Zo(),xn(),Be(),qC(),nM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:sM,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:Hs,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:tr,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt,formatter:void 0}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:e=>{const{marker:t}=qo(e);return{stroke:t.fill,marker:t}}}}}),ci,QC=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesProperties.ts"(){"use strict";pt(),as(),Nc(),Gn(),Hi(),ci=class extends Nn{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new vi,this.label=new he,this.tooltip=new xi}},x([M(X)],ci.prototype,"xKey",2),x([M(X)],ci.prototype,"yKey",2),x([M(X,{optional:!0})],ci.prototype,"labelKey",2),x([M(X,{optional:!0})],ci.prototype,"colorKey",2),x([M(X,{optional:!0})],ci.prototype,"xName",2),x([M(X,{optional:!0})],ci.prototype,"yName",2),x([M(X,{optional:!0})],ci.prototype,"labelName",2),x([M(X,{optional:!0})],ci.prototype,"colorName",2),x([M(lc,{optional:!0})],ci.prototype,"colorDomain",2),x([M(Gi)],ci.prototype,"colorRange",2),x([M(X,{optional:!0})],ci.prototype,"title",2),x([M(nt)],ci.prototype,"marker",2),x([M(nt)],ci.prototype,"label",2),x([M(nt)],ci.prototype,"tooltip",2)}}),Bd,aM,JC=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeries.ts"(){"use strict";Yc(),Dn(),xe(),ee(),ni(),Te(),Bn(),ie(),en(),En(),Ii(),zn(),Hi(),Lr(),QC(),Bd=class T2 extends Rn{constructor(t){super({moduleCtx:t,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:wc,label:Fn}}),this.properties=new ci,this.colorScale=new Ea}processData(t){return B(this,null,function*(){var i;if(!this.properties.isValid()||this.data==null)return;const{isContinuousX:s,isContinuousY:n}=this.isContinuous(),{xKey:a,yKey:r,labelKey:o,colorKey:l,colorDomain:c,colorRange:h}=this.properties,{dataModel:u,processedData:d}=yield this.requestDataModel(t,this.data,{props:[Xe(this,a,s,{id:"xKey-raw"}),Xe(this,r,n,{id:"yKey-raw"}),...o?[Xe(this,o,!1,{id:"labelKey-raw"})]:[],Gt(this,a,s,{id:"xValue"}),Gt(this,r,n,{id:"yValue"}),...l?[Gt(this,l,!0,{id:"colorValue"})]:[],...o?[Gt(this,o,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(l){const p=u.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=(i=c??d.domain.values[p])!=null?i:[],this.colorScale.range=h,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(t){const{dataModel:i,processedData:s}=this;if(!s||!i)return[];const n=t==="x"?"xValue":"yValue",a=i.resolveProcessedDataDefById(this,n),r=i.getDomain(this,n,"value",s);if(a?.def.type==="value"&&a?.def.valueType==="category")return r;const o=this.axes[t];return mi(js(r),o)}createNodeData(){return B(this,null,function*(){var t,i,s;const{axes:n,dataModel:a,processedData:r,colorScale:o}=this,{xKey:l,yKey:c,labelKey:h,colorKey:u,xName:d,yName:p,labelName:g,marker:f,label:m,visible:v}=this.properties,y=n.x,b=n.y;if(!(a&&r&&v&&y&&b))return[];const _=a.resolveProcessedDataIndexById(this,"xValue").index,S=a.resolveProcessedDataIndexById(this,"yValue").index,D=u?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,A=h?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,I=y.scale,T=b.scale,E=((t=I.bandwidth)!=null?t:0)/2,C=((i=T.bandwidth)!=null?i:0)/2,O=[],N=m.getFont();for(const{values:w,datum:U}of(s=r.data)!=null?s:[]){const G=w[_],F=w[S],P=I.convert(G)+E,j=T.convert(F)+C,z=this.getLabelText(m,{value:h?w[A]:F,datum:U,xKey:l,yKey:c,labelKey:h,xName:d,yName:p,labelName:g}),q=se.getTextSize(z,N),tt=u?o.convert(w[D]):void 0;O.push({series:this,itemId:c,yKey:c,xKey:l,datum:U,xValue:G,yValue:F,capDefaults:{lengthRatioMultiplier:f.getDiameter(),lengthMax:1/0},point:{x:P,y:j,size:f.size},midPoint:{x:P,y:j},fill:tt,label:R({text:z},q)})}return[{itemId:c,nodeData:O,labelData:O,scales:fn(T2.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return(t=this.contextNodeData)==null?void 0:t.reduce((i,s)=>i.concat(s.labelData),[])}markerFactory(){const{shape:t}=this.properties.marker,i=Ma(t);return new i}updateMarkerSelection(t){return B(this,null,function*(){const{nodeData:i,markerSelection:s}=t;return this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(this.properties.marker.enabled?i:[])})}updateMarkerNodes(t){return B(this,null,function*(){const{markerSelection:i,isHighlight:s}=t,{xKey:n,yKey:a,labelKey:r,marker:o,highlightStyle:l}=this.properties,c=bt(s&&l.item,o.getStyle());i.each((h,u)=>{this.updateMarkerStyle(h,o,{datum:u,highlighted:s,xKey:n,yKey:a,labelKey:r},c)}),s||o.markClean()})}updateLabelSelection(t){return B(this,null,function*(){var i,s;const n=this.isLabelEnabled()?(s=(i=this.chart)==null?void 0:i.placeLabels().get(this))!=null?s:[]:[];return t.labelSelection.update(n.map(({datum:a,x:r,y:o})=>Z(R({},a),{point:{x:r,y:o,size:a.point.size}})),a=>{a.pointerEvents=1})})}updateLabelNodes(t){return B(this,null,function*(){const{label:i}=this.properties;t.labelSelection.each((s,n)=>{var a,r,o,l;s.text=n.label.text,s.fill=i.color,s.x=(r=(a=n.point)==null?void 0:a.x)!=null?r:0,s.y=(l=(o=n.point)==null?void 0:o.y)!=null?l:0,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.fontSize=i.fontSize,s.fontFamily=i.fontFamily,s.textAlign="left",s.textBaseline="top"})})}getTooltipHtml(t){const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,labelKey:r,xName:o,yName:l,labelName:c,title:h=l,marker:u,tooltip:d}=this.properties,{datum:p,xValue:g,yValue:f,label:m}=t,v=bt({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:y="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:n,yKey:a,labelKey:r},v),b=qt(i.formatDatum(g)),_=qt(s.formatDatum(f));let S=`<b>${qt(o??n)}</b>: ${b}<br><b>${qt(l??a)}</b>: ${_}`;return r&&(S=`<b>${qt(c??r)}</b>: ${qt(m.text)}<br>`+S),d.toTooltipHtml({title:h,content:S,backgroundColor:y},R({datum:p,xKey:n,xName:o,yKey:a,yName:l,labelKey:r,labelName:c,title:h,color:y,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var i,s,n,a,r,o;const{yKey:l,yName:c,title:h,marker:u,visible:d}=this.properties,{fill:p,stroke:g,fillOpacity:f,strokeOpacity:m,strokeWidth:v}=u;return!((i=this.data)!=null&&i.length)||!this.properties.isValid()||t!=="category"?[]:[{legendType:"category",id:this.id,itemId:l,seriesId:this.id,enabled:d,label:{text:(s=h??c)!=null?s:l},marker:{shape:u.shape,fill:(a=(n=u.fill)!=null?n:p)!=null?a:"rgba(0, 0, 0, 0)",stroke:(o=(r=u.stroke)!=null?r:g)!=null?o:"rgba(0, 0, 0, 0)",fillOpacity:f??1,strokeOpacity:m??1,strokeWidth:v??0}}]}animateEmptyUpdateReady(t){const{markerSelections:i,labelSelections:s,annotationSelections:n}=t;Hm(this,this.ctx.animationManager,i),Nt(this,"labels",this.ctx.animationManager,s),Nt(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new et}},Bd.className="ScatterSeries",Bd.type="scatter",aM=Bd}}),rM,tO=L({"packages/ag-charts-community/src/chart/series/cartesian/scatterSeriesModule.ts"(){"use strict";Zo(),xn(),Be(),JC(),rM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:aM,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:Hs,tooltip:{position:{type:"node"}},marker:{__extends__:tr,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:qo}}});function cy(e,t,i){const s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const r=ic(i.startAngle),o=ic(i.endAngle),l=Math.atan2(t,e);return r<o?l<=o&&l>=r:l<=o&&l>=-Math.PI||l>=r&&l<=Math.PI}function oM(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=t,r={x:a*Math.cos(i),y:a*Math.sin(i)},o={x:a*Math.cos(s),y:a*Math.sin(s)},l=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=n===0?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Mc(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)!=null||Mc(e.start.x,e.start.y,e.end.x,e.end.y,o.x,o.y,c.x,c.y)!=null||FS(0,0,a,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y).length>0}function lM(e,t){const i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},a={x:e.x+e.width,y:e.y+e.height};return oM({start:i,end:s},t)||oM({start:n,end:a},t)}var hy=L({"packages/ag-charts-community/src/scene/util/sector.ts"(){"use strict";Mi(),zS()}}),Ki,uy=L({"packages/ag-charts-community/src/scene/shape/sector.ts"(){"use strict";Kt(),hy(),In(),Ki=class extends Li{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.angleOffset=0,this.inset=0}computeBBox(){const e=this.outerRadius;return new ht(this.centerX-e,this.centerY-e,e*2,e*2)}updatePath(){const e=this.path,{angleOffset:t,inset:i}=this,s=this.startAngle+t,n=this.endAngle+t,a=s<=n?n-s:Math.PI*2-(s-n),r=Math.max(Math.min(this.innerRadius,this.outerRadius)+i,0),o=Math.max(Math.max(this.innerRadius,this.outerRadius)-i,0),l=a>=2*Math.PI,c=this.centerX,h=this.centerY;if(e.clear(),l)e.arc(c,h,o,s,n),r>i&&(e.moveTo(c+r*Math.cos(n),h+r*Math.sin(n)),e.arc(c,h,r,n,s,!0));else{const u=r>0?i/r:0,d=o>0?i/o:0;if(a<2*d)return;const g=r<=i||a<2*u;if(g){const f=a<Math.PI*.5?i*(1+Math.cos(a))/Math.sin(a):NaN;let m;f>0&&f<o?m=Math.max(Math.hypot(i,f),r):m=r;const v=s+a*.5;e.moveTo(c+m*Math.cos(v),h+m*Math.sin(v))}else e.moveTo(c+r*Math.cos(s+u),h+r*Math.sin(s+u));e.arc(c,h,o,s+d,n-d),g||(r>0?e.arc(c,h,r,n-u,s+u,!0):e.lineTo(c,h))}e.closePath(),this.dirtyPath=!1}isPointInPath(e,t){const{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,a=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),o=this.transformPoint(e,t);return cy(o.x,o.y,{startAngle:s,endAngle:n,innerRadius:a,outerRadius:r})}},Ki.className="Sector",x([ft()],Ki.prototype,"centerX",2),x([ft()],Ki.prototype,"centerY",2),x([ft()],Ki.prototype,"innerRadius",2),x([ft()],Ki.prototype,"outerRadius",2),x([ft()],Ki.prototype,"startAngle",2),x([ft()],Ki.prototype,"endAngle",2),x([ft()],Ki.prototype,"angleOffset",2),x([ft()],Ki.prototype,"inset",2)}}),dy,Fd,zd,Tr,Gd,Hc,St,eO=L({"packages/ag-charts-community/src/chart/series/polar/donutSeriesProperties.ts"(){"use strict";Jo(),gt(),di(),pt(),hr(),as(),eu(),Ic(),Gn(),dy=class extends $t{constructor(){super(...arguments),this.showInLegend=!1}},x([M(rt)],dy.prototype,"showInLegend",2),Fd=class extends he{constructor(){super(...arguments),this.margin=2}set(e,t){return super.set(e)}},x([M(X)],Fd.prototype,"text",2),x([M(zt)],Fd.prototype,"margin",2),zd=class extends Rt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}},x([M(kt)],zd.prototype,"fill",2),x([M(Ct)],zd.prototype,"fillOpacity",2),Tr=class extends he{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},x([M(K)],Tr.prototype,"offset",2),x([M(_n)],Tr.prototype,"minAngle",2),x([M(K)],Tr.prototype,"minSpacing",2),x([M(K)],Tr.prototype,"maxCollisionOffset",2),x([M(rt)],Tr.prototype,"avoidCollisions",2),Gd=class extends he{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},x([M(zt)],Gd.prototype,"positionOffset",2),x([M(Ct)],Gd.prototype,"positionRatio",2),Hc=class extends Rt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},x([M(Gi,{optional:!0})],Hc.prototype,"colors",2),x([M(K)],Hc.prototype,"length",2),x([M(K)],Hc.prototype,"strokeWidth",2),St=class extends hs{constructor(){super(...arguments),this.fills=Object.values(As),this.strokes=Object.values(ia),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new go(Fd),this.title=new dy,this.innerCircle=new zd,this.shadow=new ps,this.calloutLabel=new Tr,this.sectorLabel=new Gd,this.calloutLine=new Hc,this.tooltip=new xi,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const e=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?($.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):e}},x([M(X)],St.prototype,"angleKey",2),x([M(X,{optional:!0})],St.prototype,"angleName",2),x([M(X,{optional:!0})],St.prototype,"radiusKey",2),x([M(X,{optional:!0})],St.prototype,"radiusName",2),x([M(K,{optional:!0})],St.prototype,"radiusMin",2),x([M(K,{optional:!0})],St.prototype,"radiusMax",2),x([M(X,{optional:!0})],St.prototype,"calloutLabelKey",2),x([M(X,{optional:!0})],St.prototype,"calloutLabelName",2),x([M(X,{optional:!0})],St.prototype,"sectorLabelKey",2),x([M(X,{optional:!0})],St.prototype,"sectorLabelName",2),x([M(X,{optional:!0})],St.prototype,"legendItemKey",2),x([M(Gi)],St.prototype,"fills",2),x([M(Gi)],St.prototype,"strokes",2),x([M(Ct)],St.prototype,"fillOpacity",2),x([M(Ct)],St.prototype,"strokeOpacity",2),x([M(Zs)],St.prototype,"lineDash",2),x([M(K)],St.prototype,"lineDashOffset",2),x([M(zi,{optional:!0})],St.prototype,"formatter",2),x([M(_n)],St.prototype,"rotation",2),x([M(zt)],St.prototype,"outerRadiusOffset",2),x([M(Ct)],St.prototype,"outerRadiusRatio",2),x([M(zt,{optional:!0})],St.prototype,"innerRadiusOffset",2),x([M(Ct,{optional:!0})],St.prototype,"innerRadiusRatio",2),x([M(K)],St.prototype,"strokeWidth",2),x([M(K,{optional:!0})],St.prototype,"sectorSpacing",2),x([M(Lu)],St.prototype,"innerLabels",2),x([M(nt)],St.prototype,"title",2),x([M(nt)],St.prototype,"innerCircle",2),x([M(nt)],St.prototype,"shadow",2),x([M(nt)],St.prototype,"calloutLabel",2),x([M(nt)],St.prototype,"sectorLabel",2),x([M(nt)],St.prototype,"calloutLine",2),x([M(nt)],St.prototype,"tooltip",2),x([M(X,{optional:!0})],St.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2)}});function tl(e,t,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],r=Math.PI/-2+ri(t),o=({radius:p})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*p}),l=({radius:p})=>({innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*p});return{nodes:{toFn:(p,g,f,{prevLive:m})=>{var v,y;let{startAngle:b,endAngle:_,innerRadius:S,outerRadius:D}=g;const{stroke:A,fill:I}=g.sectorFormat;if(f==="removed"&&m?(b=(v=m.datum)==null?void 0:v.endAngle,_=(y=m.datum)==null?void 0:y.endAngle):f==="removed"&&!m&&(b=r,_=r),f==="removed"){const T=o(g);S=T.innerRadius,D=T.outerRadius}return{startAngle:b,endAngle:_,outerRadius:D,innerRadius:S,stroke:A,fill:I}},fromFn:(p,g,f,{prevFromProps:m})=>{var v,y,b,_,S,D;let{startAngle:A,endAngle:I,innerRadius:T,outerRadius:E}=p,{fill:C,stroke:O}=g.sectorFormat;if(f==="unknown"||f==="added"&&!m?(A=r,I=r,T=g.innerRadius,E=g.outerRadius):f==="added"&&m&&(A=(v=m.endAngle)!=null?v:r,I=(y=m.endAngle)!=null?y:r,T=(b=m.innerRadius)!=null?b:g.innerRadius,E=(_=m.outerRadius)!=null?_:g.outerRadius),f==="added"&&!e){const N=l(g);T=N.innerRadius,E=N.outerRadius}return f==="updated"&&(C=(S=p.fill)!=null?S:C,O=(D=p.stroke)!=null?D:O),{startAngle:A,endAngle:I,innerRadius:T,outerRadius:E,fill:C,stroke:O,phase:"initial"}}},innerCircle:{fromFn:(p,g)=>{var f,m,v;return{size:(v=(m=(f=p.previousDatum)==null?void 0:f.radius)!=null?m:p.size)!=null?v:0,phase:"initial"}},toFn:(p,g)=>{var f;return{size:(f=g.radius)!=null?f:0}}}}}function cM(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}var hM=L({"packages/ag-charts-community/src/chart/series/polar/pieUtil.ts"(){"use strict";Mi()}}),Kc,Vd=L({"packages/ag-charts-community/src/chart/series/polar/polarSeries.ts"(){"use strict";ya(),pc(),xe(),xa(),fi(),ie(),u_(),Ii(),Kc=class extends Rm{constructor(e){var t=e,{useLabelLayer:i=!1,pickModes:s=[0],canHaveAxes:n=!1,animationResetFns:a}=t,r=Le(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Z(R({},r),{useLabelLayer:i,pickModes:s,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new et),this.itemSelection=jt.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=jt.select(this.labelGroup,Dt,!1),this.highlightSelection=jt.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new Oo("empty",{empty:{update:{target:"ready",action:o=>this.animateEmptyUpdateReady(o)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:o=>this.animateReadyHighlight(o),highlightMarkers:o=>this.animateReadyHighlightMarkers(o),resize:o=>this.animateReadyResize(o),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:o=>this.animateWaitingUpdateReady(o)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:o=>this.animateClearingUpdateEmpty(o)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(e,t){return null}resetAllAnimation(){var e;const{item:t,label:i}=(e=this.animationResetFns)!=null?e:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&Ee([this.itemSelection,this.highlightSelection],t),i&&Ee([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){var t;const{item:i}=(t=this.animationResetFns)!=null?t:{};i&&Ee([this.highlightSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(e){return{seriesRect:e}}}}}),uM,jc,dM=L({"packages/ag-charts-community/src/chart/series/polar/donutSeries.ts"(){"use strict";He(),jo(),Kt(),xe(),ee(),xa(),pr(),uy(),fi(),hy(),Mi(),si(),gt(),Ot(),Te(),Bn(),Ut(),ie(),en(),On(),rs(),kc(),Ii(),zn(),eO(),hM(),Vd(),uM=class extends Yo{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},jc=class extends Kc{constructor(e){super({moduleCtx:e,useLabelLayer:!0,animationResetFns:{item:cM,label:Fn}}),this.properties=new St,this.previousRadiusScale=new ws,this.radiusScale=new ws,this.backgroundGroup=this.rootGroup.appendChild(new et({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new et({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Rs),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Rs),this.innerCircleGroup=this.backgroundGroup.appendChild(new et({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=uM,this.angleScale=new ws,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2);const t=new et({name:"pieCalloutLabels"}),i=new et({name:"pieSectorLabels"}),s=new et({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=jt.select(t,et),this.sectorLabelSelection=jt.select(i,Dt),this.innerLabelsSelection=jt.select(s,Dt),this.innerCircleSelection=jt.select(this.innerCircleGroup,Rs);for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1}addChartEventListeners(){var e;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(e=>e):super.visible}processSeriesItemEnabled(){var e;const{data:t,visible:i}=this;this.seriesItemEnabled=(e=t?.map(()=>i))!=null?e:[]}nodeFactory(){return new Ki}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return B(this,null,function*(){var t,i,s,n,a;if(this.data==null||!this.properties.isValid())return;let{data:r}=this;const{seriesItemEnabled:o}=this,{angleKey:l,radiusKey:c,calloutLabelKey:h,sectorLabelKey:u,legendItemKey:d}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=[],f=[];d?g.push(Xe(this,d,!1,{id:"legendItemKey"})):h?g.push(Xe(this,h,!1,{id:"calloutLabelKey"})):u&&g.push(Xe(this,u,!1,{id:"sectorLabelKey"})),c&&f.push(Im(this,c,{id:"radiusValue",min:(t=this.properties.radiusMin)!=null?t:0,max:this.properties.radiusMax}),Gt(this,c,!0,{id:"radiusRaw"}),Ac(this,{id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),h&&f.push(Gt(this,h,!1,{id:"calloutLabelValue"})),u&&f.push(Gt(this,u,!1,{id:"sectorLabelValue"})),d&&f.push(Gt(this,d,!1,{id:"legendItemValue"})),p&&this.processedData&&g.length>0&&f.push(Mr(this.processedData)),f.push(Wo(this)),r=r.map((m,v)=>o[v]?m:Z(R({},m),{[l]:0})),yield this.requestDataModel(e,r,{props:[...g,Em(this,l,!0,{id:"angleValue",onlyPositive:!0}),Gt(this,l,!0,{id:"angleRaw"}),Ac(this,{id:"angleValue"},[0,1],0,0),...f]});for(const m of(a=(n=(s=this.processedData)==null?void 0:s.defs)==null?void 0:n.values)!=null?a:[]){const{id:v,missing:y,property:b}=m,_=im(this,y);v!=="angleRaw"&&_>0&&$.warnOnce(`no value was found for the key '${String(b)}' on ${_} data element${_>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return B(this,null,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){const t=e.resolveProcessedDataIndexById(this,"angleValue").index,i=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue").index:-1,s=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,n=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,a=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue").index:-1;return{angleIdx:t,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:n,legendItemIdx:a}}createNodeData(){return B(this,null,function*(){const{id:e,processedData:t,dataModel:i,angleScale:s}=this,{rotation:n,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,[{itemId:e,nodeData:[],labelData:[]}];if(!t||!i||t.type!=="ungrouped")return[];const{angleIdx:r,radiusIdx:o,calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:h}=this.getProcessedDataIndexes(i);let u=0,d=0;const p=t.data.map((g,f)=>{var m;const{datum:v,values:y}=g,b=y[r],_=s.convert(u)+ri(n);u=b,d+=b;const S=s.convert(u)+ri(n),D=Math.abs(S-_),A=_+D/2,I=y[r+1],T=o>=0&&(m=y[o])!=null?m:1,E=o>=0?y[o+1]:void 0,C=h>=0?y[h]:void 0,O=this.getLabels(v,A,D,!0,y[l],y[c],C),N=this.getSectorFormat(v,f,!1);return R({itemId:f,series:this,datum:v,index:f,angleValue:I,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:_,endAngle:S,sectorFormat:N,radiusValue:E,radius:T,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(T),0),legendItemValue:C},O)});return this.zerosumOuterRing.visible=d===0,this.zerosumInnerRing.visible=d===0&&a!=null&&a!==1&&a>0,[{itemId:e,nodeData:p,labelData:p}]})}getLabels(e,t,i,s,n,a,r){const{calloutLabel:o,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||o.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>ri(o.minAngle)&&(p.calloutLabel=Z(R({},this.getTextAlignment(t)),{text:this.getLabelText(o,Z(R({},d),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Z(R({},d),{value:a}))}),c!=null&&r!=null&&(p.legendItem={key:c,text:r}),p}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=ic(e),s=-3*Math.PI/4,n=i-s,a=Math.floor(n/(Math.PI/2)),r=mu(a,t.length);return t[r]}getSectorFormat(e,t,i){var s,n,a,r,o;const{callbackCache:l,highlightManager:c}=this.ctx,{angleKey:h,radiusKey:u,fills:d,strokes:p,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,v=c.getActiveHighlight(),y=i&&v?.series===this&&t===v.itemId,{fill:b,fillOpacity:_,stroke:S,strokeWidth:D,strokeOpacity:A}=bt(y&&this.properties.highlightStyle.item,{fill:d.length>0?d[t%d.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:f!=null?p.length>0?p[t%p.length]:void 0:p.length>0?p[t%p.length]:m,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let I;return g&&(I=l.call(g,{datum:e,angleKey:h,radiusKey:u,fill:b,stroke:S,fills:d,strokes:p,strokeWidth:D,highlighted:y,seriesId:this.id})),{fill:(s=I?.fill)!=null?s:b,fillOpacity:(n=I?.fillOpacity)!=null?n:_,stroke:(a=I?.stroke)!=null?a:S,strokeWidth:(r=I?.strokeWidth)!=null?r:D,strokeOpacity:(o=I?.strokeOpacity)!=null?o:A}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:n}=s,a=Le(s,["radius"]);return Z(R({},a),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const n=2+((t=(e=this.properties.title)==null?void 0:e.spacing)!=null?t:0),a=Math.max(0,-i);return-i-n-a}update(e){return B(this,arguments,function*({seriesRect:t}){const{title:i}=this.properties,s={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=Bi(this.nodeDataDependencies,s)!=null;if(n&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const a=this.getTitleTranslationY(),r=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(r,0,a),i.node.translationY=isFinite(a)?a:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var e,t;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((e=this.labelGroup)==null||e.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(t=this.labelGroup)==null||t.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}})}updateSelections(){return B(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return B(this,null,function*(){const{itemSelection:e,highlightSelection:t,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(r,o)=>{let l=this.nodeData;o&&(l=l.map(c=>Z(R({},c),{sectorFormat:R({},c.sectorFormat)}))),r.update(l,void 0,c=>this.getDatumId(c)),this.ctx.animationManager.isSkipped()&&r.cleanup()};a(e,!1),a(t,!0),i.update(this.nodeData,r=>{const o=new be;o.tag=1,o.pointerEvents=1,r.appendChild(o);const l=new Dt;l.tag=2,l.pointerEvents=1,r.appendChild(l)}),s.update(this.nodeData,r=>{r.pointerEvents=1}),n.update(this.properties.innerLabels,r=>{r.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius()),a=1;t=Math.ceil(n*2+a)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){return B(this,null,function*(){const t=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:a})=>{var r,o;n.setProperties({fill:(r=this.properties.innerCircle)==null?void 0:r.fill,opacity:(o=this.properties.innerCircle)==null?void 0:o.fillOpacity,size:a})});const s=(n,a,r,o)=>{const l=this.getSectorFormat(a.datum,a.itemId,o);a.sectorFormat.fill=l.fill,a.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(n.startAngle=a.startAngle,n.endAngle=a.endAngle,n.innerRadius=a.innerRadius,n.outerRadius=a.outerRadius),(o||c)&&(n.fill=l.fill,n.stroke=l.stroke),n.strokeWidth=l.strokeWidth,n.fillOpacity=l.fillOpacity,n.strokeOpacity=this.properties.strokeOpacity,n.lineDash=this.properties.lineDash,n.lineDashOffset=this.properties.lineDashOffset,n.fillShadow=this.properties.shadow,n.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2:0,n.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((n,a,r)=>s(n,a,r,!1)),this.highlightSelection.each((n,a,r)=>{const o=t?.series===this&&n.datum.itemId===t.itemId;s(n,a,r,!0),n.visible=o}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var e;const{calloutLine:t}=this.properties,i=t.length,s=t.strokeWidth,n=(e=t.colors)!=null?e:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((r,o)=>{const l=r.datum,{calloutLabel:c,outerRadius:h}=l;if(c?.text&&!c.hidden&&h!==0){r.visible=!0,r.strokeWidth=s,r.stroke=n[o%n.length],r.fill=void 0;const u=l.midCos*h,d=l.midSin*h;let p=l.midCos*(h+i),g=l.midSin*(h+i);if((c.collisionTextAlign||c.collisionOffsetY!==0)&&c.box!=null){const m=c.box;let v=p,y=g;p<m.x?v=m.x:p>m.x+m.width&&(v=m.x+m.width),g<m.y?y=m.y:g>m.y+m.height&&(y=m.y+m.height);const b=v-p,_=y-g,S=Math.sqrt(Math.pow(b,2)+Math.pow(_,2)),D=S-a;D>0&&(p=p+b*D/S,g=g+_*D/S)}r.x1=u,r.y1=d,r.x2=p,r.y2=g}else r.visible=!1})}getLabelOverflow(e,t,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,r=i.y+i.height-this.centerY,o=1;let l=1;t.x+o<s?l=(t.x+t.width-s)/t.width:t.x+t.width-o>n&&(l=(n-t.x)/t.width);const c=t.y+o<a||t.y+t.height-o>r,h=l===1?e.length:Math.floor(e.length*l)-1,u=this.bboxIntersectsSurroundingSeries(t);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(e,t=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const n=[{x:e.x+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+e.height+i},{x:e.x+t,y:e.y+e.height+i}],a=mt(s,2);return n.some(r=>mt(r.x,2)+mt(r.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,a=e.convert(0),r=y=>!y.calloutLabel||y.outerRadius===0,o=this.nodeData,l=this.nodeData.filter(y=>!r(y));if(l.forEach(y=>{const b=y.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,b)=>y.midSin-b.midSin),h=l.filter(y=>y.midCos>=0).sort((y,b)=>y.midSin-b.midSin),u=l.filter(y=>{var b;return y.midSin<0&&((b=y.calloutLabel)==null?void 0:b.textAlign)==="center"}).sort((y,b)=>y.midCos-b.midCos),d=l.filter(y=>{var b;return y.midSin>=0&&((b=y.calloutLabel)==null?void 0:b.textAlign)==="center"}).sort((y,b)=>y.midCos-b.midCos),p=new Dt,g=y=>{var b;const _=y.calloutLabel;if(_==null)return new ht(0,0,0,0);const S=y.outerRadius+i.length+s,D=y.midCos*S,A=y.midSin*S+_.collisionOffsetY;return p.text=_.text,p.x=D,p.y=A,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(b=_.collisionTextAlign)!=null?b:_.textAlign,textBaseline:_.textBaseline}),p.computeBBox()},f=(y,b,_)=>{const S=g(y).grow(n/2),D=g(b).grow(n/2);if(S.x<D.x+D.width&&S.x+S.width>D.x&&(_==="to-top"?S.y<D.y+D.height:S.y+S.height>D.y)){const I=_==="to-top"?S.y-D.y-D.height:S.y+S.height-D.y;b.calloutLabel.collisionOffsetY=I}},m=y=>{const b=y.slice().sort((S,D)=>Math.abs(S.midSin)-Math.abs(D.midSin))[0],_=y.indexOf(b);for(let S=_-1;S>=0;S--){const D=y[S+1],A=y[S];f(D,A,"to-top")}for(let S=_+1;S<y.length;S++){const D=y[S-1],A=y[S];f(D,A,"to-bottom")}},v=y=>{const b=l.some(T=>T.calloutLabel.collisionOffsetY!==0),_=y.map(T=>g(T)),S=_.map(T=>T.clone().grow(n/2));let D=!1;for(let T=0;T<S.length&&!D;T++){const E=S[T];for(let C=T+1;C<y.length;C++){const O=S[C];if(E.collidesBBox(O)){D=!0;break}}}const A=o.map(T=>{const{startAngle:E,endAngle:C,outerRadius:O}=T;return{startAngle:E,endAngle:C,innerRadius:a,outerRadius:O}}),I=_.some(T=>A.some(E=>lM(T,E)));!D&&!b&&!I||y.filter(T=>T.calloutLabel.textAlign==="center").forEach(T=>{const E=T.calloutLabel;T.midCos<0?E.collisionTextAlign="right":T.midCos>0?E.collisionTextAlign="left":E.collisionTextAlign="center"})};m(c),m(h),v(u),v(d)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:r}=i,o=new Dt;this.calloutLabelSelection.selectByTag(2).forEach(l=>{var c;const{datum:h}=l,u=h.calloutLabel,d=t.convert(h.radius),p=Math.max(0,d);if(!u?.text||p===0||u.hidden){l.visible=!1;return}const g=p+n+a,f=h.midCos*g,m=h.midSin*g+u.collisionOffsetY,v={textAlign:(c=u.collisionTextAlign)!=null?c:u.textAlign,textBaseline:u.textBaseline};o.text=u.text,o.x=f,o.y=m,o.setFont(this.properties.calloutLabel),o.setAlign(v);const y=o.computeBBox();let b=u.text,_=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:D}=this.getLabelOverflow(u.text,y,e);b=u.text.length===S?u.text:`${u.text.substring(0,S)}\u2026`,_=!D}l.text=b,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v),l.fill=r,l.visible=_})}computeLabelsBBox(e,t){return B(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:r,minSpacing:o}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Dt;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.computeBBox(),l.push(h))}return this.nodeData.forEach(d=>{var p;const g=d.calloutLabel;if(!g||d.outerRadius===0)return null;const f=d.outerRadius+n+a,m=d.midCos*f,v=d.midSin*f+g.collisionOffsetY;c.text=g.text,c.x=m,c.y=v,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=g.collisionTextAlign)!=null?p:g.textAlign,textBaseline:g.textBaseline});const y=c.computeBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>r){g.hidden=!0;return}if(h){const b=t.y-this.centerY,_=new ht(h.x-o,b,h.width+2*o,h.y+h.height+o-b);if(y.collidesBBox(_)){g.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:_,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(g.text,y,t),D=g.text.length>2&&b<2;if(_||D||S){g.hidden=!0;return}}g.hidden=!1,l.push(y)}),l.length===0?null:ht.merge(l)})}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:r,positionRatio:o,color:l}=this.properties.sectorLabel;this.sectorLabelSelection.each((c,h)=>{const{sectorLabel:u,outerRadius:d}=h;let p=!1;if(u&&d!==0){const g=t*(1-o)+d*o+r;c.fill=l,c.fontStyle=s,c.fontWeight=n,c.fontSize=i,c.fontFamily=a,c.text=u.text,c.x=h.midCos*g,c.y=h.midSin*g,c.textAlign="center",c.textBaseline="middle";const f=c.computeBBox(),m=[[f.x,f.y],[f.x+f.width,f.y],[f.x+f.width,f.y+f.height],[f.x,f.y+f.height]],{startAngle:v,endAngle:y}=h,b={startAngle:v,endAngle:y,innerRadius:t,outerRadius:d};m.every(([_,S])=>cy(_,S,b))&&(p=!0)}c.visible=p})}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,color:m}=u;h.fontStyle=d,h.fontWeight=p,h.fontSize=g,h.fontFamily=f,h.text=u.text,h.x=0,h.y=0,h.fill=m,h.textAlign="center",h.textBaseline="alphabetic",e.push(h.computeBBox()),t.push(u.margin)});const i=h=>h===0?0:t[h],s=h=>h===t.length-1?0:t[h],n=e.reduce((h,u,d)=>h+u.height+i(d)+s(d),0),a=Math.max(...e.map(h=>h.width)),r=this.getInnerRadius(),l=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),c=[];for(let h=0,u=-n/2;h<e.length;h++){const p=e[h].height+u+i(h);c.push(p),u=p+s(h)}this.innerLabelsSelection.each((h,u,d)=>{h.y=c[d],h.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(e){const{angleKey:t,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:r,legendItem:o}=e;if(n&&o!==void 0)return o.text;if(i&&i!==t&&r?.text!==void 0)return r.text;if(s&&s!==t&&a?.text!==void 0)return a.text}getTooltipHtml(e){var t;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=e,a=qt((t=this.properties.title)==null?void 0:t.text),r=Et(s)?fu(s):String(s),o=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:a??o,content:a&&o?`${o}: ${r}`:r,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(e){var t,i,s,n,a;const{processedData:r,dataModel:o}=this;if(!o||!r?.data.length||!this.properties.isValid()||e!=="category")return[];const{angleKey:l,calloutLabelKey:c,sectorLabelKey:h,legendItemKey:u}=this.properties;if(!u&&(!c||c===l)&&(!h||h===l))return[];const{calloutLabelIdx:d,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(o),f=((t=this.properties.title)==null?void 0:t.showInLegend)&&this.properties.title.text,m=[];for(let v=0;v<r.data.length;v++){const{datum:y,values:b}=r.data[v],_=[];f&&_.push(f);const S=this.getLabels(y,2*Math.PI,2*Math.PI,!1,b[d],b[p],b[g]);if(u&&S.legendItem!==void 0?_.push(S.legendItem.text):c&&c!==l&&((i=S.calloutLabel)==null?void 0:i.text)!==void 0?_.push((s=S.calloutLabel)==null?void 0:s.text):h&&h!==l&&((n=S.sectorLabel)==null?void 0:n.text)!==void 0&&_.push((a=S.sectorLabel)==null?void 0:a.text),_.length===0)continue;const D=this.getSectorFormat(y,v,!1);m.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:this.seriesItemEnabled[v],label:{text:_.join(" - ")},marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:u!=null?y[u]:void 0})}return m}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendItemName:n}=e;s.id===this.id?this.toggleSeriesItem(i,t):n!=null&&this.toggleOtherSeriesItems(n,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;(i=this.processedData)==null||i.data.forEach(({values:n},a)=>{n[s]===e&&this.toggleSeriesItem(a,t)})}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=tl(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Xt(this.id,"nodes",t,[this.itemSelection,this.highlightSelection],i.nodes),Xt(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),Nt(this,"callout",t,[this.calloutLabelSelection]),Nt(this,"sector",t,[this.sectorLabelSelection]),Nt(this,"inner",t,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,s,n,a;const{itemSelection:r,highlightSelection:o,processedData:l,radiusScale:c,previousRadiusScale:h}=this,{animationManager:u}=this.ctx,d=(e=l?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((t=d?.moved.length)!=null?t:0)===0&&d?.addedIndices.every(v=>!d.removedIndices.includes(v)),g=((i=l?.defs.keys.length)!=null?i:0)>0,f=(a=(n=(s=l?.reduced)==null?void 0:s.animationValidation)==null?void 0:n.uniqueKeys)!=null?a:!0;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=tl(!1,this.properties.rotation,c,h);Xt(this.id,"nodes",u,[r,o],m.nodes,(v,y)=>this.getDatumId(y),d),Xt(this.id,"innerCircle",u,[this.innerCircleSelection],m.innerCircle),Nt(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Nt(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Nt(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=tl(!1,this.properties.rotation,i,s);Xt(this.id,"nodes",n,[e,t],a.nodes),Xt(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Ar(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Ar(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Ar(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:r}=this.properties;if((s=(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(r)return e[r];if(n)return e[n];if(a)return e[a]}}getDatumId(e){var t;const{index:i}=e;return(t=this.getDatumIdFromData(e.datum))!=null?t:`${i}`}onDataChange(){this.processSeriesItemEnabled()}},jc.className="DonutSeries",jc.type="donut"}}),py,gy,pM=L({"packages/ag-charts-community/src/chart/series/polar/pieTheme.ts"(){"use strict";xn(),Be(),py={series:{__extends__:Hs,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:ve,color:ir,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:ve,color:er,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:sr,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ve,color:Tt,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:mo}},gy=({takeColors:e,colorsCount:t,userPalette:i})=>{const{fills:s,strokes:n}=e(t);return{fills:s,strokes:i?n:[],calloutLine:{colors:n}}}}}),gM,iO=L({"packages/ag-charts-community/src/chart/series/polar/donutSeriesModule.ts"(){"use strict";dM(),pM(),gM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:jc,seriesDefaults:{},themeTemplate:py,paletteFactory:gy}}}),fy,Ud,Wd,Ir,Yd,Xc,_t,sO=L({"packages/ag-charts-community/src/chart/series/polar/pieSeriesProperties.ts"(){"use strict";Jo(),Yg(),di(),pt(),hr(),as(),eu(),Ic(),Gn(),fy=class extends $t{constructor(){super(...arguments),this.showInLegend=!1}},x([M(rt)],fy.prototype,"showInLegend",2),Ud=class extends he{set(e,t){return super.set(e)}},x([ar("Use a Donut Series instead"),M(X,{optional:!0})],Ud.prototype,"text",2),x([ar("Use a Donut Series instead"),M(zt,{optional:!0})],Ud.prototype,"margin",2),Wd=class extends Rt{},x([ar("Use a Donut Series instead"),M(kt,{optional:!0})],Wd.prototype,"fill",2),x([ar("Use a Donut Series instead"),M(Ct,{optional:!0})],Wd.prototype,"fillOpacity",2),Ir=class extends he{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}},x([M(K)],Ir.prototype,"offset",2),x([M(_n)],Ir.prototype,"minAngle",2),x([M(K)],Ir.prototype,"minSpacing",2),x([M(K)],Ir.prototype,"maxCollisionOffset",2),x([M(rt)],Ir.prototype,"avoidCollisions",2),Yd=class extends he{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}},x([M(zt)],Yd.prototype,"positionOffset",2),x([M(Ct)],Yd.prototype,"positionRatio",2),Xc=class extends Rt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}},x([M(Gi,{optional:!0})],Xc.prototype,"colors",2),x([M(K)],Xc.prototype,"length",2),x([M(K)],Xc.prototype,"strokeWidth",2),_t=class extends hs{constructor(){super(...arguments),this.fills=Object.values(As),this.strokes=Object.values(ia),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new go(Ud),this.title=new fy,this.innerCircle=new Wd,this.shadow=new ps,this.calloutLabel=new Ir,this.sectorLabel=new Yd,this.calloutLine=new Xc,this.tooltip=new xi,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}},x([M(X)],_t.prototype,"angleKey",2),x([M(X,{optional:!0})],_t.prototype,"angleName",2),x([M(X,{optional:!0})],_t.prototype,"radiusKey",2),x([M(X,{optional:!0})],_t.prototype,"radiusName",2),x([M(K,{optional:!0})],_t.prototype,"radiusMin",2),x([M(K,{optional:!0})],_t.prototype,"radiusMax",2),x([M(X,{optional:!0})],_t.prototype,"calloutLabelKey",2),x([M(X,{optional:!0})],_t.prototype,"calloutLabelName",2),x([M(X,{optional:!0})],_t.prototype,"sectorLabelKey",2),x([M(X,{optional:!0})],_t.prototype,"sectorLabelName",2),x([M(X,{optional:!0})],_t.prototype,"legendItemKey",2),x([M(Gi)],_t.prototype,"fills",2),x([M(Gi)],_t.prototype,"strokes",2),x([M(Ct)],_t.prototype,"fillOpacity",2),x([M(Ct)],_t.prototype,"strokeOpacity",2),x([M(Zs)],_t.prototype,"lineDash",2),x([M(K)],_t.prototype,"lineDashOffset",2),x([M(zi,{optional:!0})],_t.prototype,"formatter",2),x([M(_n)],_t.prototype,"rotation",2),x([M(zt)],_t.prototype,"outerRadiusOffset",2),x([M(Ct)],_t.prototype,"outerRadiusRatio",2),x([ar("Use a Donut Series instead"),M(zt,{optional:!0})],_t.prototype,"innerRadiusOffset",2),x([ar("Use a Donut Series instead"),M(Ct,{optional:!0})],_t.prototype,"innerRadiusRatio",2),x([M(K)],_t.prototype,"strokeWidth",2),x([M(K,{optional:!0})],_t.prototype,"sectorSpacing",2),x([M(Lu)],_t.prototype,"innerLabels",2),x([M(nt)],_t.prototype,"title",2),x([M(nt)],_t.prototype,"innerCircle",2),x([M(nt)],_t.prototype,"shadow",2),x([M(nt)],_t.prototype,"calloutLabel",2),x([M(nt)],_t.prototype,"sectorLabel",2),x([M(nt)],_t.prototype,"calloutLine",2),x([M(nt)],_t.prototype,"tooltip",2),x([M(X,{optional:!0})],_t.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2)}}),fM,$c,mM=L({"packages/ag-charts-community/src/chart/series/polar/pieSeries.ts"(){"use strict";He(),jo(),Kt(),xe(),ee(),xa(),pr(),uy(),fi(),hy(),Mi(),si(),gt(),Ot(),Te(),Bn(),Ut(),ie(),en(),On(),rs(),kc(),Ii(),zn(),sO(),hM(),Vd(),fM=class extends Yo{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},$c=class extends Kc{constructor(e){super({moduleCtx:e,useLabelLayer:!0,animationResetFns:{item:cM,label:Fn}}),this.properties=new _t,this.previousRadiusScale=new ws,this.radiusScale=new ws,this.backgroundGroup=this.rootGroup.appendChild(new et({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new et({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Rs),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Rs),this.innerCircleGroup=this.backgroundGroup.appendChild(new et({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=fM,this.angleScale=new ws,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2);const t=new et({name:"pieCalloutLabels"}),i=new et({name:"pieSectorLabels"}),s=new et({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=jt.select(t,et),this.sectorLabelSelection=jt.select(i,Dt),this.innerLabelsSelection=jt.select(s,Dt),this.innerCircleSelection=jt.select(this.innerCircleGroup,Rs);for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1}addChartEventListeners(){var e;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(e=>e):super.visible}processSeriesItemEnabled(){var e;const{data:t,visible:i}=this;this.seriesItemEnabled=(e=t?.map(()=>i))!=null?e:[]}nodeFactory(){return new Ki}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}processData(e){return B(this,null,function*(){var t,i,s,n,a;if(this.data==null||!this.properties.isValid())return;let{data:r}=this;const{seriesItemEnabled:o}=this,{angleKey:l,radiusKey:c,calloutLabelKey:h,sectorLabelKey:u,legendItemKey:d}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=[],f=[];d?g.push(Xe(this,d,!1,{id:"legendItemKey"})):h?g.push(Xe(this,h,!1,{id:"calloutLabelKey"})):u&&g.push(Xe(this,u,!1,{id:"sectorLabelKey"})),c&&f.push(Im(this,c,{id:"radiusValue",min:(t=this.properties.radiusMin)!=null?t:0,max:this.properties.radiusMax}),Gt(this,c,!0,{id:"radiusRaw"}),Ac(this,{id:"radiusValue"},[0,1],1,(i=this.properties.radiusMin)!=null?i:0,this.properties.radiusMax)),h&&f.push(Gt(this,h,!1,{id:"calloutLabelValue"})),u&&f.push(Gt(this,u,!1,{id:"sectorLabelValue"})),d&&f.push(Gt(this,d,!1,{id:"legendItemValue"})),p&&this.processedData&&g.length>0&&f.push(Mr(this.processedData)),f.push(Wo(this)),r=r.map((m,v)=>o[v]?m:Z(R({},m),{[l]:0})),yield this.requestDataModel(e,r,{props:[...g,Em(this,l,!0,{id:"angleValue",onlyPositive:!0}),Gt(this,l,!0,{id:"angleRaw"}),Ac(this,{id:"angleValue"},[0,1],0,0),...f]});for(const m of(a=(n=(s=this.processedData)==null?void 0:s.defs)==null?void 0:n.values)!=null?a:[]){const{id:v,missing:y,property:b}=m,_=im(this,y);v!=="angleRaw"&&_>0&&$.warnOnce(`no value was found for the key '${String(b)}' on ${_} data element${_>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return B(this,null,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){const t=e.resolveProcessedDataIndexById(this,"angleValue").index,i=this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue").index:-1,s=this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,n=this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,a=this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue").index:-1;return{angleIdx:t,radiusIdx:i,calloutLabelIdx:s,sectorLabelIdx:n,legendItemIdx:a}}createNodeData(){return B(this,null,function*(){const{id:e,processedData:t,dataModel:i,angleScale:s}=this,{rotation:n}=this.properties;if(!t||!i||t.type!=="ungrouped")return[];const{angleIdx:a,radiusIdx:r,calloutLabelIdx:o,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let h=0,u=0;const d=t.data.map((g,f)=>{var m;const{datum:v,values:y}=g,b=y[a],_=s.convert(h)+ri(n);h=b,u+=b;const S=s.convert(h)+ri(n),D=Math.abs(S-_),A=_+D/2,I=y[a+1],T=r>=0&&(m=y[r])!=null?m:1,E=r>=0?y[r+1]:void 0,C=c>=0?y[c]:void 0,O=this.getLabels(v,A,D,!0,y[o],y[l],C),N=this.getSectorFormat(v,f,!1);return R({itemId:f,series:this,datum:v,index:f,angleValue:I,midAngle:A,midCos:Math.cos(A),midSin:Math.sin(A),startAngle:_,endAngle:S,sectorFormat:N,radiusValue:E,radius:T,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(T),0),legendItemValue:C},O)});this.zerosumOuterRing.visible=u===0;const{innerRadiusRatio:p=1}=this.properties;return this.zerosumInnerRing.visible=u===0&&p!==1&&p>0,[{itemId:e,nodeData:d,labelData:d}]})}getLabels(e,t,i,s,n,a,r){const{calloutLabel:o,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||o.enabled?this.properties.calloutLabelKey:void 0,u=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!u&&!c)return{};const d={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>ri(o.minAngle)&&(p.calloutLabel=Z(R({},this.getTextAlignment(t)),{text:this.getLabelText(o,Z(R({},d),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Z(R({},d),{value:a}))}),c!=null&&r!=null&&(p.legendItem={key:c,text:r}),p}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=ic(e),s=-3*Math.PI/4,n=i-s,a=Math.floor(n/(Math.PI/2)),r=mu(a,t.length);return t[r]}getSectorFormat(e,t,i){var s,n,a,r,o;const{callbackCache:l,highlightManager:c}=this.ctx,{angleKey:h,radiusKey:u,fills:d,strokes:p,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,v=c.getActiveHighlight(),y=i&&v?.series===this&&t===v.itemId,{fill:b,fillOpacity:_,stroke:S,strokeWidth:D,strokeOpacity:A}=bt(y&&this.properties.highlightStyle.item,{fill:d.length>0?d[t%d.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:f!=null?p.length>0?p[t%p.length]:void 0:p.length>0?p[t%p.length]:m,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let I;return g&&(I=l.call(g,{datum:e,angleKey:h,radiusKey:u,fill:b,stroke:S,fills:d,strokes:p,strokeWidth:D,highlighted:y,seriesId:this.id})),{fill:(s=I?.fill)!=null?s:b,fillOpacity:(n=I?.fillOpacity)!=null?n:_,stroke:(a=I?.stroke)!=null?a:S,strokeWidth:(r=I?.strokeWidth)!=null?r:D,strokeOpacity:(o=I?.strokeOpacity)!=null?o:A}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t),this.nodeData=this.nodeData.map(i=>{var s=i,{radius:n}=s,a=Le(s,["radius"]);return Z(R({},a),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var e,t;const i=Math.max(0,this.radiusScale.range[1]);if(i===0)return NaN;const n=2+((t=(e=this.properties.title)==null?void 0:e.spacing)!=null?t:0),a=Math.max(0,-i);return-i-n-a}update(e){return B(this,arguments,function*({seriesRect:t}){const{title:i}=this.properties,s={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=Bi(this.nodeDataDependencies,s)!=null;if(n&&(this._nodeDataDependencies=s),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const a=this.getTitleTranslationY(),r=i.node.computeBBox();i.node.visible=i.enabled&&isFinite(a)&&!this.bboxIntersectsSurroundingSeries(r,0,a),i.node.translationY=isFinite(a)?a:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)})}updateTitleNodes(){var e,t;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&((e=this.labelGroup)==null||e.removeChild(i.node)),s&&(s.node.textBaseline="bottom",(t=this.labelGroup)==null||t.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach(e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}})}updateSelections(){return B(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return B(this,null,function*(){const{itemSelection:e,highlightSelection:t,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(r,o)=>{let l=this.nodeData;o&&(l=l.map(c=>Z(R({},c),{sectorFormat:R({},c.sectorFormat)}))),r.update(l,void 0,c=>this.getDatumId(c)),this.ctx.animationManager.isSkipped()&&r.cleanup()};a(e,!1),a(t,!0),i.update(this.nodeData,r=>{const o=new be;o.tag=1,o.pointerEvents=1,r.appendChild(o);const l=new Dt;l.tag=2,l.pointerEvents=1,r.appendChild(l)}),s.update(this.nodeData,r=>{r.pointerEvents=1}),n.update(this.properties.innerLabels,r=>{r.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius()),a=1;t=Math.ceil(n*2+a)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){return B(this,null,function*(){const t=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:a})=>{var r,o;n.setProperties({fill:(r=this.properties.innerCircle)==null?void 0:r.fill,opacity:(o=this.properties.innerCircle)==null?void 0:o.fillOpacity,size:a})});const s=(n,a,r,o)=>{const l=this.getSectorFormat(a.datum,a.itemId,o);a.sectorFormat.fill=l.fill,a.sectorFormat.stroke=l.stroke;const c=this.ctx.animationManager.isSkipped();c&&(n.startAngle=a.startAngle,n.endAngle=a.endAngle,n.innerRadius=a.innerRadius,n.outerRadius=a.outerRadius),(o||c)&&(n.fill=l.fill,n.stroke=l.stroke),n.strokeWidth=l.strokeWidth,n.fillOpacity=l.fillOpacity,n.strokeOpacity=this.properties.strokeOpacity,n.lineDash=this.properties.lineDash,n.lineDashOffset=this.properties.lineDashOffset,n.fillShadow=this.properties.shadow,n.inset=this.properties.sectorSpacing!=null?(this.properties.sectorSpacing+(l.stroke!=null?l.strokeWidth:0))/2:0,n.lineJoin=this.properties.sectorSpacing!=null?"miter":"round"};this.itemSelection.each((n,a,r)=>s(n,a,r,!1)),this.highlightSelection.each((n,a,r)=>{const o=t?.series===this&&n.datum.itemId===t.itemId;s(n,a,r,!0),n.visible=o}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var e;const{calloutLine:t}=this.properties,i=t.length,s=t.strokeWidth,n=(e=t.colors)!=null?e:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((r,o)=>{const l=r.datum,{calloutLabel:c,outerRadius:h}=l;if(c?.text&&!c.hidden&&h!==0){r.visible=!0,r.strokeWidth=s,r.stroke=n[o%n.length],r.fill=void 0;const u=l.midCos*h,d=l.midSin*h;let p=l.midCos*(h+i),g=l.midSin*(h+i);if((c.collisionTextAlign||c.collisionOffsetY!==0)&&c.box!=null){const m=c.box;let v=p,y=g;p<m.x?v=m.x:p>m.x+m.width&&(v=m.x+m.width),g<m.y?y=m.y:g>m.y+m.height&&(y=m.y+m.height);const b=v-p,_=y-g,S=Math.sqrt(Math.pow(b,2)+Math.pow(_,2)),D=S-a;D>0&&(p=p+b*D/S,g=g+_*D/S)}r.x1=u,r.y1=d,r.x2=p,r.y2=g}else r.visible=!1})}getLabelOverflow(e,t,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,r=i.y+i.height-this.centerY,o=1;let l=1;t.x+o<s?l=(t.x+t.width-s)/t.width:t.x+t.width-o>n&&(l=(n-t.x)/t.width);const c=t.y+o<a||t.y+t.height-o>r,h=l===1?e.length:Math.floor(e.length*l)-1,u=this.bboxIntersectsSurroundingSeries(t);return{textLength:h,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:u}}bboxIntersectsSurroundingSeries(e,t=0,i=0){const{surroundingRadius:s}=this;if(s==null)return!1;const n=[{x:e.x+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+e.height+i},{x:e.x+t,y:e.y+e.height+i}],a=mt(s,2);return n.some(r=>mt(r.x,2)+mt(r.y,2)>a)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,a=e.convert(0),r=y=>!y.calloutLabel||y.outerRadius===0,o=this.nodeData,l=this.nodeData.filter(y=>!r(y));if(l.forEach(y=>{const b=y.calloutLabel;b!=null&&(b.hidden=!1,b.collisionTextAlign=void 0,b.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(y=>y.midCos<0).sort((y,b)=>y.midSin-b.midSin),h=l.filter(y=>y.midCos>=0).sort((y,b)=>y.midSin-b.midSin),u=l.filter(y=>{var b;return y.midSin<0&&((b=y.calloutLabel)==null?void 0:b.textAlign)==="center"}).sort((y,b)=>y.midCos-b.midCos),d=l.filter(y=>{var b;return y.midSin>=0&&((b=y.calloutLabel)==null?void 0:b.textAlign)==="center"}).sort((y,b)=>y.midCos-b.midCos),p=new Dt,g=y=>{var b;const _=y.calloutLabel;if(_==null)return new ht(0,0,0,0);const S=y.outerRadius+i.length+s,D=y.midCos*S,A=y.midSin*S+_.collisionOffsetY;return p.text=_.text,p.x=D,p.y=A,p.setFont(this.properties.calloutLabel),p.setAlign({textAlign:(b=_.collisionTextAlign)!=null?b:_.textAlign,textBaseline:_.textBaseline}),p.computeBBox()},f=(y,b,_)=>{const S=g(y).grow(n/2),D=g(b).grow(n/2);if(S.x<D.x+D.width&&S.x+S.width>D.x&&(_==="to-top"?S.y<D.y+D.height:S.y+S.height>D.y)){const I=_==="to-top"?S.y-D.y-D.height:S.y+S.height-D.y;b.calloutLabel.collisionOffsetY=I}},m=y=>{const b=y.slice().sort((S,D)=>Math.abs(S.midSin)-Math.abs(D.midSin))[0],_=y.indexOf(b);for(let S=_-1;S>=0;S--){const D=y[S+1],A=y[S];f(D,A,"to-top")}for(let S=_+1;S<y.length;S++){const D=y[S-1],A=y[S];f(D,A,"to-bottom")}},v=y=>{const b=l.some(T=>T.calloutLabel.collisionOffsetY!==0),_=y.map(T=>g(T)),S=_.map(T=>T.clone().grow(n/2));let D=!1;for(let T=0;T<S.length&&!D;T++){const E=S[T];for(let C=T+1;C<y.length;C++){const O=S[C];if(E.collidesBBox(O)){D=!0;break}}}const A=o.map(T=>{const{startAngle:E,endAngle:C,outerRadius:O}=T;return{startAngle:E,endAngle:C,innerRadius:a,outerRadius:O}}),I=_.some(T=>A.some(E=>lM(T,E)));!D&&!b&&!I||y.filter(T=>T.calloutLabel.textAlign==="center").forEach(T=>{const E=T.calloutLabel;T.midCos<0?E.collisionTextAlign="right":T.midCos>0?E.collisionTextAlign="left":E.collisionTextAlign="center"})};m(c),m(h),v(u),v(d)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:r}=i,o=new Dt;this.calloutLabelSelection.selectByTag(2).forEach(l=>{var c;const{datum:h}=l,u=h.calloutLabel,d=t.convert(h.radius),p=Math.max(0,d);if(!u?.text||p===0||u.hidden){l.visible=!1;return}const g=p+n+a,f=h.midCos*g,m=h.midSin*g+u.collisionOffsetY,v={textAlign:(c=u.collisionTextAlign)!=null?c:u.textAlign,textBaseline:u.textBaseline};o.text=u.text,o.x=f,o.y=m,o.setFont(this.properties.calloutLabel),o.setAlign(v);const y=o.computeBBox();let b=u.text,_=!0;if(i.avoidCollisions){const{textLength:S,hasVerticalOverflow:D}=this.getLabelOverflow(u.text,y,e);b=u.text.length===S?u.text:`${u.text.substring(0,S)}\u2026`,_=!D}l.text=b,l.x=f,l.y=m,l.setFont(this.properties.calloutLabel),l.setAlign(v),l.fill=r,l.visible=_})}computeLabelsBBox(e,t){return B(this,null,function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:r,minSpacing:o}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Dt;let h;const{title:u}=this.properties;if(u?.text&&u.enabled){const d=this.getTitleTranslationY();isFinite(d)&&(c.text=u.text,c.x=0,c.y=d,c.setFont(u),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.computeBBox(),l.push(h))}return this.nodeData.forEach(d=>{var p;const g=d.calloutLabel;if(!g||d.outerRadius===0)return null;const f=d.outerRadius+n+a,m=d.midCos*f,v=d.midSin*f+g.collisionOffsetY;c.text=g.text,c.x=m,c.y=v,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:(p=g.collisionTextAlign)!=null?p:g.textAlign,textBaseline:g.textBaseline});const y=c.computeBBox();if(g.box=y,Math.abs(g.collisionOffsetY)>r){g.hidden=!0;return}if(h){const b=t.y-this.centerY,_=new ht(h.x-o,b,h.width+2*o,h.y+h.height+o-b);if(y.collidesBBox(_)){g.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:b,hasVerticalOverflow:_,hasSurroundingSeriesOverflow:S}=this.getLabelOverflow(g.text,y,t),D=g.text.length>2&&b<2;if(_||D||S){g.hidden=!0;return}}g.hidden=!1,l.push(y)}),l.length===0?null:ht.merge(l)})}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:r,positionRatio:o,color:l}=this.properties.sectorLabel,c=t>0,h=this.seriesItemEnabled.filter(Boolean).length===1;this.sectorLabelSelection.each((u,d)=>{const{sectorLabel:p,outerRadius:g}=d;let f=!1;if(p&&g!==0){const m=t*(1-o)+g*o+r;u.fill=l,u.fontStyle=s,u.fontWeight=n,u.fontSize=i,u.fontFamily=a,u.text=p.text,!c&&h?(u.x=0,u.y=0):(u.x=d.midCos*m,u.y=d.midSin*m),u.textAlign="center",u.textBaseline="middle";const y=u.computeBBox(),b=[[y.x,y.y],[y.x+y.width,y.y],[y.x+y.width,y.y+y.height],[y.x,y.y+y.height]],{startAngle:_,endAngle:S}=d,D={startAngle:_,endAngle:S,innerRadius:t,outerRadius:g};b.every(([A,I])=>cy(A,I,D))&&(f=!0)}u.visible=f})}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((h,u)=>{const{fontStyle:d,fontWeight:p,fontSize:g,fontFamily:f,color:m,margin:v=2}=u;h.fontStyle=d,h.fontWeight=p,h.fontSize=g,h.fontFamily=f,h.text=u.text,h.x=0,h.y=0,h.fill=m,h.textAlign="center",h.textBaseline="alphabetic",e.push(h.computeBBox()),t.push(v)});const i=h=>h===0?0:t[h],s=h=>h===t.length-1?0:t[h],n=e.reduce((h,u,d)=>h+u.height+i(d)+s(d),0),a=Math.max(...e.map(h=>h.width)),r=this.getInnerRadius(),l=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),c=[];for(let h=0,u=-n/2;h<e.length;h++){const p=e[h].height+u+i(h);c.push(p),u=p+s(h)}this.innerLabelsSelection.each((h,u,d)=>{h.y=c[d],h.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}getDatumLegendName(e){const{angleKey:t,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:r,legendItem:o}=e;if(n&&o!==void 0)return o.text;if(i&&i!==t&&r?.text!==void 0)return r.text;if(s&&s!==t&&a?.text!==void 0)return a.text}getTooltipHtml(e){var t;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=e,a=qt((t=this.properties.title)==null?void 0:t.text),r=Et(s)?fu(s):String(s),o=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:a??o,content:a&&o?`${o}: ${r}`:r,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(e){var t,i,s,n,a;const{processedData:r,dataModel:o}=this;if(!o||!r?.data.length||e!=="category")return[];const{angleKey:l,calloutLabelKey:c,sectorLabelKey:h,legendItemKey:u}=this.properties;if(!u&&(!c||c===l)&&(!h||h===l))return[];const{calloutLabelIdx:d,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(o),f=((t=this.properties.title)==null?void 0:t.showInLegend)&&this.properties.title.text,m=[];for(let v=0;v<r.data.length;v++){const{datum:y,values:b}=r.data[v],_=[];f&&_.push(f);const S=this.getLabels(y,2*Math.PI,2*Math.PI,!1,b[d],b[p],b[g]);if(u&&S.legendItem!==void 0?_.push(S.legendItem.text):c&&c!==l&&((i=S.calloutLabel)==null?void 0:i.text)!==void 0?_.push((s=S.calloutLabel)==null?void 0:s.text):h&&h!==l&&((n=S.sectorLabel)==null?void 0:n.text)!==void 0&&_.push((a=S.sectorLabel)==null?void 0:a.text),_.length===0)continue;const D=this.getSectorFormat(y,v,!1);m.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:this.seriesItemEnabled[v],label:{text:_.join(" - ")},marker:{fill:D.fill,stroke:D.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:u!=null?y[u]:void 0})}return m}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendItemName:n}=e;s.id===this.id?this.toggleSeriesItem(i,t):n!=null&&this.toggleOtherSeriesItems(n,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;(i=this.processedData)==null||i.data.forEach(({values:n},a)=>{n[s]===e&&this.toggleSeriesItem(a,t)})}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=tl(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Xt(this.id,"nodes",t,[this.itemSelection,this.highlightSelection],i.nodes),Xt(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),Nt(this,"callout",t,[this.calloutLabelSelection]),Nt(this,"sector",t,[this.sectorLabelSelection]),Nt(this,"inner",t,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,s,n,a;const{itemSelection:r,highlightSelection:o,processedData:l,radiusScale:c,previousRadiusScale:h}=this,{animationManager:u}=this.ctx,d=(e=l?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=((t=d?.moved.length)!=null?t:0)===0&&d?.addedIndices.every(v=>!d.removedIndices.includes(v)),g=((i=l?.defs.keys.length)!=null?i:0)>0,f=(a=(n=(s=l?.reduced)==null?void 0:s.animationValidation)==null?void 0:n.uniqueKeys)!=null?a:!0;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=tl(!1,this.properties.rotation,c,h);Xt(this.id,"nodes",u,[r,o],m.nodes,(v,y)=>this.getDatumId(y),d),Xt(this.id,"innerCircle",u,[this.innerCircleSelection],m.innerCircle),Nt(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Nt(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Nt(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=tl(!1,this.properties.rotation,i,s);Xt(this.id,"nodes",n,[e,t],a.nodes),Xt(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Ar(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Ar(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Ar(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:r}=this.properties;if((s=(i=(t=this.processedData)==null?void 0:t.reduced)==null?void 0:i.animationValidation)!=null&&s.uniqueKeys){if(r)return e[r];if(n)return e[n];if(a)return e[a]}}getDatumId(e){var t;const{index:i}=e;return(t=this.getDatumIdFromData(e.datum))!=null?t:`${i}`}onDataChange(){this.processSeriesItemEnabled()}},$c.className="PieSeries",$c.type="pie"}}),yM,nO=L({"packages/ag-charts-community/src/chart/series/polar/pieSeriesModule.ts"(){"use strict";mM(),pM(),yM={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:$c,seriesDefaults:{},themeTemplate:py,paletteFactory:gy}}});function aO(){Ms(Vm),Ms(Um),Ms(U_),Ms(q_),Ms(tM),Ms(nM),Ms(rM),Ms(gM),Ms(yM),Ms(iM),new Map([[La.type,La],[tn.type,tn],[Ta.type,Ta],[Ln.type,Ln],[wn.type,wn]]).forEach((t,i)=>{$x(i,t)}),h0("category","legend",yi,void 0)}var rO=L({"packages/ag-charts-community/src/chart/factory/registerInbuiltModules.ts"(){"use strict";$a(),xc(),Qu(),Fm(),m_(),y_(),x_(),HS(),k_(),BC(),UC(),HC(),XC(),ZC(),tO(),iO(),nO(),co(),tu()}});function oO(){for(const e of ks){if(e.packageType==="enterprise"&&!CT(e)&&$.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(const t of e.chartTypes)kT(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);FT(e)}if(e.type==="series-option"&&e.themeTemplate)for(const t of e.seriesTypes)c0(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(const t of e.axisTypes){const i=e.themeTemplate[t],s=R(R({},e.themeTemplate),i);for(const n of e.axisTypes)delete s[n];qx(t,s)}e.type==="axis"&&($x(e.identifier,e.instanceConstructor),e.themeTemplate&&qx(e.identifier,e.themeTemplate)),e.type==="legend"&&h0(e.identifier,e.optionsKey,e.instanceConstructor,e.themeTemplate)}if(Jp()){const e=OT();e.length>0&&$.errorOnce("Enterprise modules expected but not registered: ",e)}}var lO=L({"packages/ag-charts-community/src/chart/factory/setupModules.ts"(){"use strict";$a(),gt(),co(),po(),Pl(),tu(),Jh()}}),Hd,vM,cO=L({"packages/ag-charts-community/src/chart/hierarchyChart.ts"(){"use strict";Kt(),Sd(),Hd=class I2 extends Lc{constructor(t,i){super(t,i),this._data={}}performLayout(){return B(this,null,function*(){const t=yield fn(I2.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s}=this,n=t.clone();return t.shrink(i.left,"left"),t.shrink(i.top,"top"),t.shrink(i.right,"right"),t.shrink(i.bottom,"bottom"),this.seriesRect=t,this.animationRect=t,this.hoverRect=t,s.translationX=Math.floor(t.x),s.translationY=Math.floor(t.y),yield Promise.all(this.series.map(a=>B(this,null,function*(){yield a.update({seriesRect:t})}))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new ht(t.x,t.y,t.width,t.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:t,visible:!0},axes:[]}),t})}},Hd.className="HierarchyChart",Hd.type="hierarchy",vM=Hd}}),Er,xM=L({"packages/ag-charts-community/src/chart/axis/polarAxis.ts"(){"use strict";pt(),jf(),Er=class extends $u{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(e,t){return null}},x([M(le(["polygon","circle"],"a polar axis shape"))],Er.prototype,"shape",2),x([M(Ct)],Er.prototype,"innerRadiusRatio",2)}}),Kd,bM,hO=L({"packages/ag-charts-community/src/chart/polarChart.ts"(){"use strict";Kt(),Jf(),xM(),Sd(),ie(),rs(),dM(),mM(),Vd(),Kd=class E2 extends Lc{constructor(t,i){super(t,i),this.padding=new Tn(40),this.axisGroup.zIndex=5}performLayout(){return B(this,null,function*(){const t=yield fn(E2.prototype,this,"performLayout").call(this),i=t.clone();return this.computeSeriesRect(t),yield this.computeCircle(t),this.axes.forEach(s=>s.update()),this.hoverRect=t,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:t,visible:!0},axes:[]}),t})}updateAxes(t,i,s){var n,a;const r=this.axes.find(u=>u.direction==="x"),o=this.axes.find(u=>u.direction==="y");if(!(r instanceof Er)||!(o instanceof Er))return;const l=r.scale,c=(n=l.ticks)==null?void 0:n.call(l).map(u=>l.convert(u)),h=o.innerRadiusRatio;r.innerRadiusRatio=h,(a=r.computeRange)==null||a.call(r),r.gridLength=s,o.gridAngles=c,o.gridRange=r.range,o.range=[s,s*h],[r,o].forEach(u=>{u.translation.x=t,u.translation.y=i,u.calculateLayout()})}computeSeriesRect(t){const{seriesArea:{padding:i}}=this;t.shrink(i.left,"left"),t.shrink(i.top,"top"),t.shrink(i.right,"right"),t.shrink(i.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return B(this,null,function*(){const i=this.series.filter(h=>h instanceof Kc),s=this.axes.filter(h=>h instanceof Er),n=(h,u,d)=>{this.updateAxes(h,u,d),i.forEach(g=>{g.centerX=h,g.centerY=u,g.radius=d});const p=i.filter(g=>g instanceof $c||g instanceof jc);if(p.length>1){const g=p.map(f=>{const m=f.getInnerRadius();return{series:f,innerRadius:m}}).sort((f,m)=>f.innerRadius-m.innerRadius);g.at(-1).series.surroundingRadius=void 0;for(let f=0;f<g.length-1;f++)g[f].series.surroundingRadius=g[f+1].innerRadius}},a=t.x+t.width/2,r=t.y+t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let l=o;n(a,r,l);const c=(...h)=>B(this,[...h],function*({hideWhenNecessary:u=!1}={}){const d=[];for(const f of[...s,...i]){const m=yield f.computeLabelsBBox({hideWhenNecessary:u},t);m&&d.push(m)}if(d.length===0){n(a,r,o);return}const p=ht.merge(d),g=this.refineCircle(p,l,t);n(g.centerX,g.centerY,g.radius),g.radius!==l&&(l=g.radius)});return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:a,centerY:r}})}refineCircle(t,i,s){const a=-i,r=-i,o=i,l=i;let c=Math.max(0,a-t.x),h=Math.max(0,r-t.y),u=Math.max(0,t.x+t.width-o),d=Math.max(0,t.y+t.height-l);c=u=Math.max(c,u),h=d=Math.max(h,d);const p=s.width-c-u,g=s.height-h-d;let f=Math.min(p,g)/2;const m=.5*s.width/2,v=.5*s.height/2,y=Math.min(m,v);if(f<y){f=y;const S=c+u,D=h+d;if(2*f+D>s.height){const A=s.height-2*f;Math.min(h,d)*2>A?(h=A/2,d=A/2):h>d?h=A-d:d=A-h}if(2*f+S>s.width){const A=s.width-2*f;Math.min(c,u)*2>A?(c=A/2,u=A/2):c>u?c=A-u:u=A-c}}const b=c+2*f+u,_=h+2*f+d;return{centerX:s.x+(s.width-b)/2+c+f,centerY:s.y+(s.height-_)/2+h+f,radius:f}}},Kd.className="PolarChart",Kd.type="polar",bM=Kd}});function SM(e){if(Ja(e))return"cartesian";if(Fl(e))return"polar";if(ag(e))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${e.type}`)}var qc,Zc,Cr,_M,my,Or,uO=L({"packages/ag-charts-community/src/chart/agChartV2.ts"(){"use strict";Wh(),$a(),V0(),Fi(),Yg(),si(),gt(),Te(),xC(),Sd(),bC(),gr(),rO(),lO(),cO(),$h(),hO(),qc=te.create(!0,"opts"),Zc=class Bh{static licenseCheck(t){var i,s,n,a;this.licenseChecked||(this.licenseManager=(s=(i=Xa).licenseManager)==null?void 0:s.call(i,t),(n=this.licenseManager)==null||n.setLicenseKey(this.licenseKey,this.gridContext),(a=this.licenseManager)==null||a.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var i,s;return(s=(i=Xa).licenseManager)==null?void 0:s.call(i,{}).getLicenseDetails(t)}static getInstance(t){return Or.getInstance(t)}static create(t){var i,s,n,a;this.licenseCheck(t);const r=Or.createOrUpdate(t);return(i=this.licenseManager)!=null&&i.isDisplayWatermark()&&((a=(n=Xa).injectWatermark)==null||a.call(n,(s=t.document)!=null?s:document,r.chart.element,this.licenseManager.getWatermarkMessage())),r}static update(t,i){if(!Dr.isInstance(t))throw new Error(Bh.INVALID_CHART_REF_MESSAGE);Or.createOrUpdate(i,t)}static updateDelta(t,i){if(!Dr.isInstance(t))throw new Error(Bh.INVALID_CHART_REF_MESSAGE);Or.updateUserDelta(t,i)}static download(t,i){if(!(t instanceof Dr))throw new Error(Bh.INVALID_CHART_REF_MESSAGE);Or.download(t,i)}static getImageDataURL(t,i){if(!(t instanceof Dr))throw new Error(Bh.INVALID_CHART_REF_MESSAGE);return Or.getImageDataURL(t,i)}},Zc.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",Zc.licenseChecked=!1,Zc.gridContext=!1,Cr=Zc,_M=class Il{static warnDeprecated(t){du()(`AgChart.${t}`,`Use AgCharts.${t} instead`)}static create(t){return Il.warnDeprecated("create"),Cr.create(t)}static update(t,i){return Il.warnDeprecated("update"),Cr.update(t,i)}static updateDelta(t,i){return Il.warnDeprecated("updateDelta"),Cr.updateDelta(t,i)}static download(t,i){return Il.warnDeprecated("download"),Cr.download(t,i)}static getImageDataURL(t,i){return Il.warnDeprecated("getImageDataURL"),Cr.getImageDataURL(t,i)}},my=class gn{static getInstance(t){const i=Lc.getInstance(t);return i!=null?Dr.chartInstances.get(i):void 0}static initialiseModules(){gn.initialised||(aO(),oO(),gn.initialised=!0)}static createOrUpdate(t,i){var s;gn.initialiseModules(),qc(">>> AgChartV2.createOrUpdate() user options",t);const n=t,{overrideDevicePixelRatio:a,document:r,window:o}=n,l=Le(n,["overrideDevicePixelRatio","document","window"]),c=new Wg(l,{overrideDevicePixelRatio:a,document:r,window:o});let h=i?.chart;return(h==null||SM(l)!==SM(h.processedOptions))&&(h=gn.createChartInstance(c,h)),i==null?i=new Dr(h):i.chart=h,qc.check()&&typeof window<"u"&&((s=window.agChartInstances)!=null||(window.agChartInstances={}),window.agChartInstances[h.id]=h),h.queuedUserOptions.push(l),h.requestFactoryUpdate(u=>{u.applyOptions(c),u.queuedUserOptions.splice(0,u.queuedUserOptions.indexOf(l))}),i}static updateUserDelta(t,i){i=ii(i,{shallow:["data"]}),Ys(i,r=>{if(typeof r=="object")for(const[o,l]of Object.entries(r))typeof l>"u"&&Object.assign(r,{[o]:Symbol("UNSET")})},{skip:["data"]});const{chart:s}=t,n=s.getOptions(),a=bt(i,n);qc(">>> AgChartV2.updateUserDelta() user delta",i),qc("AgChartV2.updateUserDelta() - base options",n),gn.createOrUpdate(a,t)}static download(t,i){return B(this,null,function*(){try{const s=yield gn.prepareResizedChart(t,i);s.chart.scene.download(i?.fileName,i?.fileFormat),s.destroy()}catch(s){$.errorOnce(s)}})}static getImageDataURL(t,i){return B(this,null,function*(){const s=yield gn.prepareResizedChart(t,i),{canvas:n}=s.chart.scene,a=n.getDataURL(i?.fileFormat);return s.destroy(),a})}static prepareResizedChart(t){return B(this,arguments,function*(i,s={}){const{chart:n}=i,{width:a=n.width,height:r=n.height}=s,o=bt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:a,height:r},Jp()&&{animation:{enabled:!1}},n.userOptions),l=gn.createOrUpdate(o);return l.chart.zoomManager.updateZoom(i.chart.zoomManager.getZoom()),i.chart.series.forEach((c,h)=>{c.visible!==!0&&(l.chart.series[h].visible=c.visible)}),i.chart.update(0,{forceNodeDataRefresh:!0}),yield l.chart.waitForUpdate(),l})}static createChartInstance(t,i){const s=i?.destroy({keepTransferableResources:!0}),n=gn.getChartByOptions(t.processedOptions);return new n(t,s)}static getChartByOptions(t){if(Ja(t))return f_;if(ag(t))return vM;if(Fl(t))return bM;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}},my.initialised=!1,Or=my}}),MM,dO=L({"packages/ag-charts-community/src/version.ts"(){"use strict";MM="9.1.1"}}),Ps,pO=L({"packages/ag-charts-community/src/scene/shape/arc.ts"(){"use strict";Mi(),Ot(),Kt(),In(),ga(),Ps=class extends Li{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return rr(oe(this.startAngle),oe(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?e.closePath():this.type===2&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new ht(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.transformPoint(e,t),s=this.computeBBox();return this.type!==0&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}},Ps.className="Arc",Ps.defaultStyles=Object.assign({},Vi.defaultStyles,{lineWidth:1,fillStyle:null}),x([ft()],Ps.prototype,"centerX",2),x([ft()],Ps.prototype,"centerY",2),x([ft()],Ps.prototype,"radius",2),x([ft()],Ps.prototype,"startAngle",2),x([ft()],Ps.prototype,"endAngle",2),x([ft()],Ps.prototype,"counterClockwise",2),x([ft()],Ps.prototype,"type",2)}}),Qc,gO=L({"packages/ag-charts-community/src/scene/shape/linearGradientFill.ts"(){"use strict";Yc(),ee(),ga(),Qc=class extends Vi{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(e){this._mask!=null&&this.removeChild(this._mask),e!=null&&this.appendChild(e),this._mask=e}isPointInPath(e,t){var i,s;return(s=(i=this.mask)==null?void 0:i.isPointInPath(e,t))!=null?s:!1}computeBBox(){var e;return(e=this.mask)==null?void 0:e.computeBBox()}render(e){const{mask:t,stops:i}=this,{ctx:s,devicePixelRatio:n}=e,a=1/n,r=t?.computeTransformedBBox();if(t==null||i==null||r==null)return;t.dirtyPath&&(t.updatePath(),t.dirtyPath=!1),s.save(),s.beginPath(),t.path.draw(s),s.clip(),s.resetTransform();const o=Math.floor(r.x),l=Math.ceil(r.x+r.width),c=Math.floor(r.y),h=Math.ceil(r.y+r.height),u=new Ea,[d,p]=this.direction==="to-right"?[o,l]:[c,h];if(u.domain=i.map((g,f)=>d+(p-d)*f/(i.length-1)),u.range=i,u.update(),this.direction==="to-right"){const g=h-c;for(let f=o;f<=l;f+=a)s.fillStyle=u.convert(f),s.fillRect(f,c,a,g)}else{const g=l-o;for(let f=c;f<=h;f+=a)s.fillStyle=u.convert(f),s.fillRect(o,f,g,a)}s.restore()}},x([J({redraw:3})],Qc.prototype,"direction",2),x([J({redraw:3})],Qc.prototype,"stops",2),x([J({redraw:3})],Qc.prototype,"_mask",2)}});function kM(e,t,i){const s=Math.sqrt(mt(e,2)+mt(t,2)),a=Math.atan2(t,e)+i;return{x:Math.cos(a)*s,y:Math.sin(a)*s}}function fO(e,t,i,s,n){const a=cf(e,t),r=a*(1-s)/2;if(e+=r,t-=r,a<.001)return 2*i*n;if(a>=2*Math.PI){const p=e+a/2;e=p-Math.PI,t=p+Math.PI}const o=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),h=i*Math.sin(t),u=Math.floor(Math.sqrt(mt(o-c,2)+mt(l-h,2))),d=2*i*n;return Math.max(1,Math.min(d,u))}var gs,mO=L({"packages/ag-charts-community/src/scene/shape/radialColumnShape.ts"(){"use strict";Mi(),Ot(),od(),In(),gs=class extends Li{constructor(){super(...arguments),this.borderPath=new yr,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:e,endAngle:t}=this,i=cf(e,t);return oe(e+i/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:s}=this,n=-e/2,a=e/2,r=-i,o=-t,l=this.getRotation(),c=[[n,o],[n,r],[a,r],[a,o],[n,o]].map(([h,u])=>kM(h,u,l));s.clear({trackChanges:!0}),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.lineTo(c[0].x,c[0].y),s.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:r}=this,o=rr(s,n),l=Math.asin(e/2/s),c=this.getRotation(),h=(I,T)=>kM(I,T,c),u=(I,T)=>Math.sqrt(mt(I,2)+mt(T,2)),d=(I,T)=>T>I?0:Math.sqrt(mt(I,2)-mt(T,2)),p=(I,T,E)=>E?I<T:I>T,g=o&&!isNaN(l)&&l<Math.PI/6;let f=-e/2,m=e/2;const v=-i,y=-s*(g?Math.cos(l):1),b=p(a,u(s,e/2),!r);if(b){const I=d(a,s);f=-I,m=I}t.clear({trackChanges:!0});const _=h(f,y);t.moveTo(_.x,_.y);const S=rr(s,i),D=p(a,u(i,e/2),!r);if(S&&g)t.arc(0,0,s,oe(-l-Math.PI/2)+c,oe(l-Math.PI/2)+c,!1);else if(D){const I=-d(a,e/2),T=d(a,i);if(!b){const E=h(f,I);t.lineTo(E.x,E.y)}if(t.arc(0,0,a,Math.atan2(I,f)+c,Math.atan2(v,-T)+c,!1),!rr(T,0)){const E=h(T,v);t.lineTo(E.x,E.y)}t.arc(0,0,a,Math.atan2(v,T)+c,Math.atan2(I,m)+c,!1)}else{const I=h(f,v),T=h(m,v);t.lineTo(I.x,I.y),t.lineTo(T.x,T.y)}const A=h(m,y);if(t.lineTo(A.x,A.y),g)t.arc(0,0,s,oe(l-Math.PI/2)+c,oe(-l-Math.PI/2)+c,!0);else{const I=h(f,y);t.lineTo(I.x,I.y)}t.closePath()}},gs.className="RadialColumnShape",x([ft()],gs.prototype,"isBeveled",2),x([ft()],gs.prototype,"columnWidth",2),x([ft()],gs.prototype,"startAngle",2),x([ft()],gs.prototype,"endAngle",2),x([ft()],gs.prototype,"outerRadius",2),x([ft()],gs.prototype,"innerRadius",2),x([ft()],gs.prototype,"axisInnerRadius",2),x([ft()],gs.prototype,"axisOuterRadius",2),x([ft()],gs.prototype,"isRadiusAxisReversed",2)}}),Nr,yO=L({"packages/ag-charts-community/src/scene/image.ts"(){"use strict";ee(),Nr=class extends or{constructor(e){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=e}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===0&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);const n=this.sourceImage;t.globalAlpha=this.opacity,t.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(e)}},x([J({redraw:3})],Nr.prototype,"x",2),x([J({redraw:3})],Nr.prototype,"y",2),x([J({redraw:3})],Nr.prototype,"width",2),x([J({redraw:3})],Nr.prototype,"height",2),x([J({redraw:3})],Nr.prototype,"opacity",2)}}),DM={};Us(DM,{Arc:()=>Ps,BBox:()=>ht,BandScale:()=>Es,Caption:()=>$t,Circle:()=>Rs,ContinuousScale:()=>wt,Diamond:()=>ym,DropShadow:()=>ps,Group:()=>et,HdpiCanvas:()=>se,Image:()=>Nr,Label:()=>he,Line:()=>be,LinearGradientFill:()=>Qc,LinearScale:()=>ws,Marker:()=>Ti,Node:()=>or,Path:()=>Li,Path2D:()=>yr,PointerEvents:()=>$g,RadialColumnShape:()=>gs,Rect:()=>$e,RedrawType:()=>bn,Scene:()=>ed,SceneChangeDetection:()=>J,ScenePathChangeDetection:()=>ft,Sector:()=>Ki,Selection:()=>jt,Shape:()=>Vi,Square:()=>vr,Text:()=>Dt,Tooltip:()=>vf,Triangle:()=>xr,easing:()=>Zg,getFont:()=>fa,getMarker:()=>Ma,getRadialColumnWidth:()=>fO,motion:()=>AM,nearestSquared:()=>K0,nearestSquaredInContainer:()=>mI,toRadians:()=>ri,toTooltipHtml:()=>hc});var AM,vO=L({"packages/ag-charts-community/src/integrated-charts-scene.ts"(){"use strict";He(),ya(),hr(),Jo(),xe(),oS(),ee(),xa(),pO(),pr(),gO(),In(),Oc(),uy(),mO(),ga(),fi(),Ui(),ko(),jo(),Mi(),as(),sn(),En(),kc(),VS(),xm(),bm(),uc(),Kt(),j0(),Dn(),yO(),od(),Mo(),AM=R(R({},J0),Eb)}}),LM={};Us(LM,{CARTESIAN_AXIS_TYPE:()=>Sg,ChartTheme:()=>Ks,DEFAULT_AXIS_GRID_COLOUR:()=>Gl,DEFAULT_AXIS_LINE_COLOUR:()=>Vl,DEFAULT_BACKGROUND_COLOUR:()=>mo,DEFAULT_CROSS_LINES_COLOUR:()=>fo,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>is,DEFAULT_FONT_FAMILY:()=>ve,DEFAULT_HIERARCHY_FILLS:()=>su,DEFAULT_HIERARCHY_STROKES:()=>nu,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>er,DEFAULT_INVERTED_LABEL_COLOUR:()=>Rg,DEFAULT_LABEL_COLOUR:()=>Tt,DEFAULT_MUTED_LABEL_COLOUR:()=>ir,DEFAULT_POLAR_SERIES_STROKE:()=>iu,DEFAULT_SHADOW_COLOUR:()=>sr,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>es,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>Ji,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>Qi,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>ts,EXTENDS_AXES_DEFAULTS:()=>Tg,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>Og,EXTENDS_AXES_LABEL_DEFAULTS:()=>Ig,EXTENDS_AXES_LINE_DEFAULTS:()=>Eg,EXTENDS_AXES_TICK_DEFAULTS:()=>Cg,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>tr,EXTENDS_CHART_DEFAULTS:()=>kg,EXTENDS_LEGEND_DEFAULTS:()=>Dg,EXTENDS_LEGEND_ITEM_DEFAULTS:()=>Ag,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:()=>Lg,EXTENDS_SERIES_DEFAULTS:()=>Hs,FONT_SIZE:()=>vg,FONT_WEIGHT:()=>xg,IS_DARK_THEME:()=>sa,OVERRIDE_SERIES_LABEL_DEFAULTS:()=>Ng,POLAR_AXIS_SHAPE:()=>Mg,POLAR_AXIS_TYPE:()=>_g,POSITION:()=>bg,getChartTheme:()=>wg,themes:()=>TM});var TM,xO=L({"packages/ag-charts-community/src/integrated-charts-theme.ts"(){"use strict";Bg(),Bg(),nr(),Be(),xn(),TM=Object.entries(Pg).reduce((e,[t,i])=>(e[t]=i(),e),{})}}),bO=L({"packages/ag-charts-community/src/scale/scale.ts"(){"use strict"}}),IM={};Us(IM,{BandScale:()=>Es,ColorScale:()=>Ea,ContinuousScale:()=>wt,Invalidating:()=>gi,LinearScale:()=>ws,TimeScale:()=>Hu});var SO=L({"packages/ag-charts-community/src/sparklines-scale.ts"(){"use strict";Yf(),ko(),Ui(),Yc(),jo(),bO(),sc()}}),EM={};Us(EM,{Color:()=>Ts,Logger:()=>$,Padding:()=>Tn,angleBetween:()=>cf,checkDatum:()=>dc,clamp:()=>It,clampArray:()=>gu,countFractionDigits:()=>jg,createId:()=>Xs,deepClone:()=>ii,extent:()=>js,findMinMax:()=>Sn,findRangeExtent:()=>So,isContinuous:()=>zu,isDate:()=>wl,isEqual:()=>rr,isNegative:()=>Jl,isNumber:()=>Et,isNumberEqual:()=>rr,isString:()=>Zi,isStringObject:()=>Fu,jsonApply:()=>ea,jsonDiff:()=>Bi,jsonWalk:()=>Ys,mod:()=>mu,normalisedExtent:()=>B0,normalisedExtentWithMetadata:()=>ql,normalizeAngle180:()=>ic,normalizeAngle360:()=>oe,normalizeAngle360Inclusive:()=>SI,range:()=>fc,resetIds:()=>W0,round:()=>Kg,sanitizeHtml:()=>qt,shallowClone:()=>qh,tickFormat:()=>Rb,tickStep:()=>No,ticks:()=>Wu,toDegrees:()=>_I,toFixed:()=>fu,toRadians:()=>ri,transformIntegratedCategoryValue:()=>Eo,zipObject:()=>Hg});var _O=L({"packages/ag-charts-community/src/sparklines-util.ts"(){"use strict";Mi(),Ls(),si(),Ot(),Jf(),Bn(),Co(),U0(),Ut(),ni(),Ot(),Pf(),wo(),_u(),gt()}});function MO(...e){for(const t of e)if(t instanceof $e){const{x:i,y:s,width:n,height:a}=t;t.setProperties({x:s,y:i,width:a,height:n})}else if(t instanceof be){const{x1:i,y1:s,x2:n,y2:a}=t;t.setProperties({x1:s,y1:i,x2:a,y2:n})}}var kO=L({"packages/ag-charts-community/src/scene/util/shapes.ts"(){"use strict";pr(),Oc()}}),DO=L({"packages/ag-charts-community/src/util/types.ts"(){"use strict"}}),AO=L({"packages/ag-charts-community/src/module/baseModule.ts"(){"use strict"}}),LO=L({"packages/ag-charts-community/src/module/coreModules.ts"(){"use strict"}}),TO=L({"packages/ag-charts-community/src/module/optionsModuleTypes.ts"(){"use strict"}}),IO=L({"packages/ag-charts-community/src/module/moduleContext.ts"(){"use strict"}}),EO=L({"packages/ag-charts-community/src/chart/series/seriesEvents.ts"(){"use strict"}}),CO=L({"packages/ag-charts-community/src/chart/series/seriesTypes.ts"(){"use strict"}}),yy,Jc,CM,OO=L({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeries.ts"(){"use strict";ya(),pc(),Yc(),Ii(),yy=class Bp{constructor(t,i,s,n,a,r,o,l,c,h,u){this.series=t,this.index=i,this.datum=s,this.size=n,this.colorValue=a,this.fill=r,this.stroke=o,this.sumSize=l,this.depth=c,this.parent=h,this.children=u,this.midPoint={x:0,y:0}}contains(t){let i=t;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(t,i=Bp.Walk.PreOrder){i===Bp.Walk.PreOrder&&t(this),this.children.forEach(s=>{s.walk(t,i)}),i===Bp.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*Y2(t)}},yy.Walk={PreOrder:0,PostOrder:1},Jc=yy,CM=class extends kr{constructor(e){super({moduleCtx:e,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new Jc(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new Oo("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){return B(this,null,function*(){var e,t;const{childrenKey:i,sizeKey:s,colorKey:n,fills:a,strokes:r,colorRange:o}=this.properties;let l=0;const c=()=>(l+=1,l);let h=0,u=1/0,d=-1/0;const p=new Array(((t=(e=this.data)==null?void 0:e.length)!=null?t:0)+1).fill(void 0),g=(b,_)=>{const S=c(),D=_.depth!=null?_.depth+1:0,A=i!=null?b[i]:void 0,I=A==null||A.length===0;let T=s!=null?b[s]:void 0;Number.isFinite(T)?T=Math.max(T,0):T=I?1:0;const E=T;h=Math.max(h,D);const C=n!=null?b[n]:void 0;return typeof C=="number"&&(p[S]=C,u=Math.min(u,C),d=Math.max(d,C)),f(new Jc(this,S,b,T,C,void 0,void 0,E,D,_,[]),A)},f=(b,_)=>(_?.forEach(S=>{const D=g(S,b);b.children.push(D),b.sumSize+=D.sumSize}),b),m=f(new Jc(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),v=[u,d];let y;o!=null&&Number.isFinite(u)&&Number.isFinite(d)&&(y=new Ea,y.domain=v,y.range=o,y.update()),m.children.forEach((b,_)=>{b.walk(S=>{let D;const A=p[S.index];A!=null&&(D=y?.convert(A)),D??(D=a?.[_%a.length]),S.fill=D,S.stroke=y==null?r?.[_%r.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=m,this.maxDepth=h,this.colorDomain=v})}update(e){return B(this,arguments,function*({seriesRect:t}){yield this.updateSelections(),yield this.updateNodes();const i=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)})}resetAllAnimation(e){var t;const i=(t=this.animationResetFns)==null?void 0:t.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),i!=null&&Ee(e.datumSelections,i)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t;const i=(t=this.animationResetFns)==null?void 0:t.datum;i!=null&&Ee([e],i)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorName:i,colorRange:s,visible:n}=this.properties;return e==="gradient"&&t!=null&&s!=null?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return`${e.index}`}getDatumId(e){return this.getDatumIdFromData(e)}}}}),Vn,NO=L({"packages/ag-charts-community/src/chart/series/hierarchy/hierarchySeriesProperties.ts"(){"use strict";pt(),eu(),Ic(),Vn=class extends hs{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(As),this.strokes=Object.values(ia)}},x([M(X)],Vn.prototype,"childrenKey",2),x([M(X,{optional:!0})],Vn.prototype,"sizeKey",2),x([M(X,{optional:!0})],Vn.prototype,"colorKey",2),x([M(X,{optional:!0})],Vn.prototype,"colorName",2),x([M(Gi)],Vn.prototype,"fills",2),x([M(Gi)],Vn.prototype,"strokes",2),x([M(Gi,{optional:!0})],Vn.prototype,"colorRange",2)}}),RO=L({"packages/ag-charts-community/src/chart/chartAxis.ts"(){"use strict"}}),OM,wO=L({"packages/ag-charts-community/src/chart/legendDatum.ts"(){"use strict";OM=0}}),NM={};Us(NM,{ADD_PHASE:()=>ku,AGG_VALUES_EXTENT:()=>i_,AND:()=>Cs,ANIMATION_PHASE_ORDER:()=>da,ANIMATION_PHASE_TIMINGS:()=>af,ARRAY:()=>Do,ARRAY_OF:()=>qs,AbstractBarSeries:()=>iy,AbstractBarSeriesProperties:()=>Cd,ActionOnSet:()=>Ie,Animation:()=>of,AnimationManager:()=>hm,AreaSeriesTag:()=>ey,Axis:()=>$u,AxisLabel:()=>ue,AxisTick:()=>ls,BOOLEAN:()=>rt,BOOLEAN_ARRAY:()=>tb,Background:()=>Xo,BackgroundModule:()=>Vm,BaseModuleInstance:()=>Yh,BaseProperties:()=>Rt,COLOR_STRING:()=>kt,COLOR_STRING_ARRAY:()=>Gi,CartesianAxis:()=>Fo,CartesianSeries:()=>Rn,CartesianSeriesNodeClickEvent:()=>_d,CartesianSeriesProperties:()=>Nn,CategoryAxis:()=>tn,ChartAxisDirection:()=>yf,ChartEventManager:()=>um,ChartOptions:()=>Wg,ChartUpdateType:()=>zo,ContextMenuRegistry:()=>dm,CursorManager:()=>pm,DATE:()=>Du,DATE_ARRAY:()=>eb,DATE_OR_DATETIME_MS:()=>Au,DEGREE:()=>_n,DIRECTION:()=>gf,DataController:()=>nm,DataModel:()=>sm,DataService:()=>Sc,Default:()=>An,Deprecated:()=>ar,DeprecatedAndRenamedTo:()=>dI,FONT_STYLE:()=>Mn,FONT_WEIGHT:()=>kn,FUNCTION:()=>zi,GREATER_THAN:()=>Lo,GestureDetector:()=>gm,GroupedCategoryAxis:()=>Ln,HierarchyNode:()=>Jc,HierarchySeries:()=>CM,HierarchySeriesProperties:()=>Vn,HighlightManager:()=>nd,HighlightStyle:()=>Ho,INITIAL_LOAD:()=>tf,INTERACTION_RANGE:()=>Iu,INTERACTION_TYPES:()=>rm,InteractionManager:()=>cm,InteractionState:()=>_c,LABEL_PHASE:()=>nf,LESS_THAN:()=>Ao,LINE_CAP:()=>df,LINE_DASH:()=>Zs,LINE_JOIN:()=>ib,Layers:()=>Mf,LayoutService:()=>mm,MATCHING_CROSSLINE_TYPE:()=>Gu,MAX_SPACING:()=>Eu,MIN_SPACING:()=>mf,Motion:()=>Zg,NAN:()=>rc,NODE_UPDATE_PHASES:()=>lf,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>ai,NUMBER:()=>zt,NUMBER_ARRAY:()=>lc,NUMBER_OR_NAN:()=>cr,Navigator:()=>ds,NavigatorModule:()=>Um,OBJECT:()=>nt,OBJECT_ARRAY:()=>Lu,OR:()=>pa,OVERFLOW_STRATEGY:()=>nb,ObserveChanges:()=>To,PLACEMENT:()=>ff,POSITION:()=>Tu,POSITIVE_NUMBER:()=>K,PolarAxis:()=>Er,PolarSeries:()=>Kc,PropertiesArray:()=>go,ProxyOnWrite:()=>OI,ProxyProperty:()=>ma,ProxyPropertyOnWrite:()=>Yt,QUICK_TRANSITION:()=>ec,RATIO:()=>Ct,REGISTERED_MODULES:()=>ks,REMOVE_PHASE:()=>ef,RepeatType:()=>rf,SMALLEST_KEY_INTERVAL:()=>vd,SORT_DOMAIN_GROUPS:()=>Lm,STRING:()=>X,STRING_ARRAY:()=>uf,Series:()=>kr,SeriesGroupingChangedEvent:()=>xd,SeriesItemHighlightStyle:()=>on,SeriesMarker:()=>vi,SeriesNodeClickEvent:()=>Yo,SeriesNodePickMode:()=>Cm,SeriesProperties:()=>hs,SeriesTooltip:()=>xi,StateMachine:()=>Oo,TEXT_ALIGN:()=>pf,TEXT_WRAP:()=>cc,Tags:()=>Kf,TooltipManager:()=>rd,UNION:()=>le,UPDATE_PHASE:()=>sf,UpdateService:()=>Nm,VERTICAL_ALIGN:()=>sb,Validate:()=>M,ZoomManager:()=>fm,__FORCE_MODULE_DETECTION:()=>OM,accumulateGroup:()=>e_,accumulatedValue:()=>JS,accumulativeValueProperty:()=>Em,adjustLabelPlacement:()=>j_,animationValidation:()=>Wo,area:()=>Dm,arraysEqual:()=>Zl,assignJsonApplyConstructedArray:()=>mb,average:()=>rC,backfillPathPointData:()=>$m,buildResetPathFn:()=>Qm,checkCrisp:()=>H_,circularSliceArray:()=>Gg,clamp:()=>It,clampArray:()=>gu,collapsedStartingBarPosition:()=>Vc,count:()=>aC,countFractionDigits:()=>jg,createDatumId:()=>Da,createDeprecationWarning:()=>du,deconstructSelectionsOrNodes:()=>Mu,deepClone:()=>ii,deepMerge:()=>_T,determinePathStatus:()=>B_,diff:()=>Mr,enterpriseModule:()=>Xa,extent:()=>js,extractDecoratedProperties:()=>vT,findMinMax:()=>Sn,findRangeExtent:()=>So,fixNumericExtent:()=>mi,fromToMotion:()=>Xt,getMissCount:()=>im,getPath:()=>n0,getRectConfig:()=>Y_,groupAccumulativeValueProperty:()=>Aa,groupAverage:()=>QS,groupBy:()=>zg,groupCount:()=>km,groupSum:()=>qS,hasRegisteredEnterpriseModules:()=>Jp,injectStyle:()=>Ru,invertShapeDirection:()=>MO,isArray:()=>ye,isBoolean:()=>Qx,isDate:()=>jh,isDecoratedObject:()=>Kh,isDefined:()=>eg,isEnumKey:()=>ST,isEnumValue:()=>e0,isEqual:()=>rr,isFiniteNumber:()=>Et,isFunction:()=>uo,isHtmlElement:()=>t0,isNegative:()=>Jl,isNumber:()=>Ds,isObject:()=>Ws,isObjectLike:()=>bT,isPlainObject:()=>qi,isProperties:()=>Pi,isRegExp:()=>Jx,isString:()=>Zi,isSymbol:()=>i0,isValidDate:()=>wl,jsonApply:()=>ea,jsonDiff:()=>Bi,jsonWalk:()=>Ys,keyProperty:()=>Xe,listDecoratedProperties:()=>ho,mapValues:()=>s0,markerFadeInAnimation:()=>Rc,markerPaletteFactory:()=>qo,markerScaleInAnimation:()=>Hm,markerSwipeScaleInAnimation:()=>Km,mergeArrayDefaults:()=>ig,mergeDefaults:()=>bt,midpointStartingBarPosition:()=>zC,minMax:()=>Xm,mod:()=>mu,normaliseGroupTo:()=>yd,normalisePropertyTo:()=>Ac,normalisedExtent:()=>B0,normalisedExtentWithMetadata:()=>ql,pairCategoryData:()=>Gc,pairContinuousData:()=>zc,partialAssign:()=>sg,pathFadeInAnimation:()=>Bc,pathFadeOutAnimation:()=>IC,pathSwipeInAnimation:()=>Zm,predicateWithMessage:()=>Ft,prepareAreaPathAnimation:()=>z_,prepareAxisAnimationContext:()=>Hf,prepareAxisAnimationFunctions:()=>qb,prepareBarAnimationFunctions:()=>Uc,prepareLinePathAnimation:()=>F_,prepareLinePathAnimationFns:()=>Jm,prepareMarkerAnimation:()=>jm,range:()=>ZS,rangedValueProperty:()=>Im,registerModule:()=>Ms,renderPartialPath:()=>qm,resetAxisGroupFn:()=>Zb,resetAxisLabelSelectionFn:()=>Jb,resetAxisLineSelectionFn:()=>tS,resetAxisSelectionFn:()=>Qb,resetBarSelectionsFn:()=>Wc,resetIds:()=>W0,resetLabelFn:()=>Fn,resetMarkerFn:()=>wc,resetMarkerPositionFn:()=>Pc,resetMotion:()=>Ee,round:()=>Kg,seriesLabelFadeInAnimation:()=>Nt,seriesLabelFadeOutAnimation:()=>Ar,setPath:()=>a0,shallowClone:()=>qh,singleSeriesPaletteFactory:()=>Ad,staticFromToMotion:()=>$s,stringify:()=>ac,sum:()=>nC,toArray:()=>uu,toFixed:()=>fu,trailingAccumulatedValue:()=>t_,trailingAccumulatedValueProperty:()=>pC,trailingValue:()=>n_,trailingValueProperty:()=>dC,unique:()=>Fg,updateClipPath:()=>Ld,updateLabelNode:()=>K_,updateRect:()=>W_,validateCrossLineValues:()=>kf,valueProperty:()=>Gt});var PO=L({"packages/ag-charts-community/src/module-support.ts"(){"use strict";ni(),pt(),Po(),Za(),wu(),Yg(),si(),Ot(),Te(),di(),Di(),kO(),DO(),Ut(),Zo(),AO(),LO(),V0(),TO(),$a(),IO(),Wh(),v_(),x_(),M_(),k_(),ie(),Sf(),iS(),en(),gS(),fS(),On(),Am(),h_(),PS(),bS(),SS(),_S(),MS(),LS(),Vo(),AS(),NS(),wS(),rs(),Ii(),EO(),zn(),Ic(),Nc(),Gn(),CO(),sy(),Hi(),ty(),ry(),G_(),Lr(),X_(),Fc(),Vd(),OO(),NO(),jf(),Ku(),ju(),xM(),xc(),Qu(),vc(),RO(),Sb(),wO(),lr(),Mo(),pc(),ya(),He(),Ls(),gr()}}),V={};Us(V,{AgChart:()=>_M,AgCharts:()=>Cr,AgErrorBarSupportedSeriesTypes:()=>mx,AgTooltipPositionType:()=>Gh,Marker:()=>Ti,VERSION:()=>MM,_ModuleSupport:()=>NM,_Scale:()=>IM,_Scene:()=>DM,_Theme:()=>LM,_Util:()=>EM,__FORCE_MODULE_DETECTION:()=>vx,time:()=>Xx});var Y=L({"packages/ag-charts-community/src/main.ts"(){"use strict";PL(),gT(),uO(),dO(),sn(),vO(),xO(),SO(),_O(),PO()}}),th=Object.defineProperty,BO=Object.defineProperties,RM=Object.getOwnPropertyDescriptor,FO=Object.getOwnPropertyDescriptors,zO=Object.getOwnPropertyNames,jd=Object.getOwnPropertySymbols,GO=Object.getPrototypeOf,vy=Object.prototype.hasOwnProperty,wM=Object.prototype.propertyIsEnumerable,VO=Reflect.get,ze=Math.pow,PM=(e,t,i)=>t in e?th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,At=(e,t)=>{for(var i in t||(t={}))vy.call(t,i)&&PM(e,i,t[i]);if(jd)for(var i of jd(t))wM.call(t,i)&&PM(e,i,t[i]);return e},bi=(e,t)=>BO(e,FO(t)),BM=(e,t)=>{var i={};for(var s in e)vy.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&jd)for(var s of jd(e))t.indexOf(s)<0&&wM.call(e,s)&&(i[s]=e[s]);return i},UO=(e,t)=>{for(var i in t)th(e,i,{get:t[i],enumerable:!0})},xy=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zO(t))!vy.call(e,n)&&n!==i&&th(e,n,{get:()=>t[n],enumerable:!(s=RM(t,n))||s.enumerable});return e},WO=(e,t,i)=>(xy(e,t,"default"),i&&xy(i,t,"default")),YO=e=>xy(th({},"__esModule",{value:!0}),e),k=(e,t,i,s)=>{for(var n=s>1?void 0:s?RM(t,i):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(n=(s?r(t,i,n):r(n))||n);return s&&n&&th(t,i,n),n},Bs=(e,t,i)=>VO(GO(e),i,t),Q=(e,t,i)=>new Promise((s,n)=>{var a=l=>{try{o(i.next(l))}catch(c){n(c)}},r=l=>{try{o(i.throw(l))}catch(c){n(c)}},o=l=>l.done?s(l.value):Promise.resolve(l.value).then(a,r);o((i=i.apply(e,t)).next())}),by={};UO(by,{AgCharts:()=>FM.AgCharts,time:()=>FM.time}),Ss.exports=YO(by);var hG=(Y(),W(V)),FM=(Y(),W(V)),Pt=(Y(),W(V)),zM=(Y(),W(V)),GM={__extends__:zM._Theme.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:zM._Theme.EXTENDS_AXES_GRID_LINE_DEFAULTS}},Sy=(Y(),W(V));function _y(e,t,i){const s=(a,r,o,l)=>{let c=e[0];for(let h=a;o>0?h<=r:h>r;h+=o){const u=e[h];if(l(c,u))return!0;c=u}return!1},n=Math.floor(e.length/2);return s(t,n,t,i)?!0:s(e.length-t,n,-t,i)}var el=(Y(),W(V)),eh=(Y(),W(V)),My=(Y(),W(V)),{ChartAxisDirection:HO,Layers:ky,ARRAY:KO,BOOLEAN:Dy,COLOR_STRING:Ay,FONT_STYLE:jO,FONT_WEIGHT:XO,LINE_DASH:$O,NUMBER:VM,POSITIVE_NUMBER:qO,RATIO:UM,STRING:WM,UNION:ZO,AND:QO,Validate:Oe,MATCHING_CROSSLINE_TYPE:YM}=My._ModuleSupport,{Group:HM}=My._Scene,{createId:JO}=My._Util,Fs=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};k([Oe(Dy,{optional:!0})],Fs.prototype,"enabled",2),k([Oe(WM,{optional:!0})],Fs.prototype,"text",2),k([Oe(jO,{optional:!0})],Fs.prototype,"fontStyle",2),k([Oe(XO,{optional:!0})],Fs.prototype,"fontWeight",2),k([Oe(qO)],Fs.prototype,"fontSize",2),k([Oe(WM)],Fs.prototype,"fontFamily",2),k([Oe(VM)],Fs.prototype,"padding",2),k([Oe(Ay,{optional:!0})],Fs.prototype,"color",2),k([Oe(Dy,{optional:!0})],Fs.prototype,"parallel",2);var Ei=class rx{constructor(){this.id=JO(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new Fs,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=HO.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new HM({name:`${this.id}`,layer:!0,zIndex:rx.LINE_LAYER_ZINDEX}),this.labelGroup=new HM({name:`${this.id}`,layer:!0,zIndex:rx.LABEL_LAYER_ZINDEX})}calculatePadding(){}setSectorNodeProps(t){var i,s,n;t.fill=this.fill,t.fillOpacity=(i=this.fillOpacity)!=null?i:1,t.stroke=this.stroke,t.strokeOpacity=(s=this.strokeOpacity)!=null?s:1,t.strokeWidth=(n=this.strokeWidth)!=null?n:1,t.lineDash=this.lineDash}setLabelNodeProps(t,i,s,n,a){const{label:r}=this;t.x=i,t.y=s,t.text=r.text,t.textAlign="center",t.textBaseline=n,t.rotation=a,t.rotationCenterX=i,t.rotationCenterY=s,t.fill=r.color,t.fontFamily=r.fontFamily,t.fontSize=r.fontSize,t.fontStyle=r.fontStyle,t.visible=!0}calculateLayout(t){}};Ei.LINE_LAYER_ZINDEX=ky.SERIES_CROSSLINE_LINE_ZINDEX,Ei.RANGE_LAYER_ZINDEX=ky.SERIES_CROSSLINE_RANGE_ZINDEX,Ei.LABEL_LAYER_ZINDEX=ky.SERIES_LABEL_ZINDEX,k([Oe(Dy,{optional:!0})],Ei.prototype,"enabled",2),k([Oe(ZO(["range","line"],"a crossLine type"),{optional:!0})],Ei.prototype,"type",2),k([Oe(QO(YM("range"),KO.restrict({length:2})),{optional:!0})],Ei.prototype,"range",2),k([Oe(YM("value"),{optional:!0})],Ei.prototype,"value",2),k([Oe(Ay,{optional:!0})],Ei.prototype,"fill",2),k([Oe(UM,{optional:!0})],Ei.prototype,"fillOpacity",2),k([Oe(Ay,{optional:!0})],Ei.prototype,"stroke",2),k([Oe(VM,{optional:!0})],Ei.prototype,"strokeWidth",2),k([Oe(UM,{optional:!0})],Ei.prototype,"strokeOpacity",2),k([Oe($O,{optional:!0})],Ei.prototype,"lineDash",2);var KM=Ei,{ChartAxisDirection:tN,validateCrossLineValues:eN}=eh._ModuleSupport,{Path:jM,Sector:iN,Text:sN}=eh._Scene,{normalizeAngle360:Ly,isNumberEqual:XM}=eh._Util,$M=class Fp extends KM{constructor(){super(),this.direction=tN.X,this.polygonNode=new jM,this.sectorNode=new iN,this.lineNode=new jM,this.labelNode=new sN,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:i,shape:s,type:n,value:a,range:r}=this;if(!i||!n||!eN(n,a,r,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=t,this.labelGroup.visible=t,n==="line"&&s==="circle"&&i instanceof eh._Scale.BandScale&&(this.type="range",this.range=[a,a]),this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){var i,s;const{scale:n,type:a,value:r,lineNode:o}=this;let l;if(!t||a!=="line"||!n||isNaN(l=n.convert(r))){o.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:h}=this;o.visible=!0,o.stroke=this.stroke,o.strokeOpacity=(i=this.strokeOpacity)!=null?i:1,o.strokeWidth=(s=this.strokeWidth)!=null?s:1,o.fill=void 0,o.lineDash=this.lineDash;const u=h*Math.cos(l),d=h*Math.sin(l),p=c*Math.cos(l),g=c*Math.sin(l);o.path.clear({trackChanges:!0}),o.path.moveTo(p,g),o.path.lineTo(u,d),this.group.zIndex=Fp.LINE_LAYER_ZINDEX}updatePolygonNode(t){var i;const{polygonNode:s,range:n,scale:a,shape:r,type:o}=this;let l;if(!t||o!=="range"||r!=="polygon"||!a||!n||!(l=(i=a.ticks)==null?void 0:i.call(a))){s.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:h}=this,u=l.indexOf(n[0]),d=l.indexOf(n[1]),g=(u<=d?l.slice(u,d+1):l.slice(u).concat(l.slice(0,d+1))).map(m=>a.convert(m));s.visible=!0,this.setSectorNodeProps(s);const{path:f}=s;f.clear({trackChanges:!0}),g.forEach((m,v)=>{const y=h*Math.cos(m),b=h*Math.sin(m);v===0?f.moveTo(y,b):f.lineTo(y,b)}),c===0?f.lineTo(0,0):g.slice().reverse().forEach(m=>{const v=c*Math.cos(m),y=c*Math.sin(m);f.lineTo(v,y)}),s.path.closePath(),this.group.zIndex=Fp.RANGE_LAYER_ZINDEX}updateSectorNode(t){var i;const{sectorNode:s,range:n,scale:a,shape:r,type:o}=this;if(!t||o!=="range"||r!=="circle"||!a||!n){s.visible=!1;return}const{axisInnerRadius:l,axisOuterRadius:c}=this,h=n.map(p=>a.convert(p)),u=(i=a.step)!=null?i:0,d=a instanceof eh._Scale.BandScale?u/2:0;s.visible=!0,this.setSectorNodeProps(s),s.centerX=0,s.centerY=0,s.innerRadius=l,s.outerRadius=c,s.startAngle=h[0]-d,s.endAngle=h[1]+d,this.group.zIndex=Fp.RANGE_LAYER_ZINDEX}updateLabelNode(t){var i,s;const{label:n,labelNode:a,range:r,scale:o,type:l}=this;if(!t||n.enabled===!1||!n.text||!o||l==="range"&&!r){a.visible=!0;return}const{axisInnerRadius:c,axisOuterRadius:h}=this;let u,d,p,g;if(l==="line"){const f=Ly(o.convert(this.value)),m=3*Math.PI/2,v=XM(f,m)||f>m||f<Math.PI/2,y=(c+h)/2*Math.cos(f),b=(c+h)/2*Math.sin(f);u=y+n.padding*Math.cos(f+Math.PI/2),d=b+n.padding*Math.sin(f+Math.PI/2),g=v?"top":"bottom",p=v?f:f-Math.PI}else{const[f,m]=r.map(S=>Ly(o.convert(S)));let v=(f+m)/2;f>m&&(v-=Math.PI),v=Ly(v);const y=(XM(v,0)||v>0)&&v<Math.PI;let b;const _=(s=(i=o.ticks)==null?void 0:i.call(o))!=null?s:[];this.shape==="circle"||_.length<3?b=h-n.padding:b=h*Math.cos(Math.PI/_.length)-n.padding,u=b*Math.cos(v),d=b*Math.sin(v),g=y?"bottom":"top",p=y?v-Math.PI/2:v+Math.PI/2}this.setLabelNodeProps(a,u,d,g,p)}};$M.className="AngleCrossLine";var qM=$M,{AND:nN,assignJsonApplyConstructedArray:aN,ChartAxisDirection:rN,GREATER_THAN:oN,NUMBER:ZM,UNION:lN,ProxyOnWrite:cN,Validate:Ty}=el._ModuleSupport,{Path:hN,Text:QM}=el._Scene,{angleBetween:uN,isNumberEqual:il,toRadians:Iy,normalizeAngle360:sl}=el._Util,Ey=class extends el._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};k([Ty(lN(["fixed","parallel","perpendicular"],"a label orientation"))],Ey.prototype,"orientation",2);var Xd=class extends el._ModuleSupport.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new hN),this.computeRange=()=>{const i=sl(-Math.PI/2+Iy(this.startAngle));let s=this.endAngle==null?i+Math.PI*2:-Math.PI/2+Iy(this.endAngle);s<i&&(s+=2*Math.PI),this.range=[i,s]},this.includeInvisibleDomains=!0}get direction(){return rN.X}assignCrossLineArrayConstructor(e){aN(e,qM)}createLabel(){return new Ey}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:e,gridLength:t}=this;return uN(e[0],e[1])*t}updatePosition(){const{translation:e,axisGroup:t,gridGroup:i,crossLineGroup:s}=this,n=Math.floor(e.x),a=Math.floor(e.y);t.translationX=n,t.translationY=a,i.translationX=n,i.translationY=a,s.translationX=n,s.translationY=a}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear({trackChanges:!0});const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:n,y:a,moveTo:r,arc:o,radius:l=0,startAngle:c=0,endAngle:h=0})=>{o?t.arc(n,a,l,c,h):r?t.moveTo(n,a):t.lineTo(n,a)}),s&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.color,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){var e;const{scale:t,shape:i,gridLength:s}=this,[n,a]=this.range,r=il(a-n,2*Math.PI),o=[];if(i==="circle")r?(o.push({x:s,y:0,moveTo:!0}),o.push({x:0,y:0,radius:s,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(o.push({x:s*Math.cos(n),y:s*Math.sin(n),moveTo:!0}),o.push({x:0,y:0,radius:s,startAngle:sl(n),endAngle:sl(a),arc:!0,moveTo:!1}));else if(i==="polygon"){const l=(((e=t.ticks)==null?void 0:e.call(t))||[]).map(c=>t.convert(c));l.length>2&&l.forEach((c,h)=>{const u=s*Math.cos(c),d=s*Math.sin(c),p=h===0;o.push({x:u,y:d,moveTo:p})})}return{points:o,closePath:r}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{enabled:i,style:s,width:n},innerRadiusRatio:a}=this;if(!(s&&t>0))return;const r=this.tickData,o=t*a,l=s.length,c=h=>h.value;this.gridLineGroupSelection.update(i?r:[],void 0,c).each((h,u,d)=>{const{value:p}=u,{stroke:g,lineDash:f}=s[d%l],m=e.convert(p);h.x1=o*Math.cos(m),h.y1=o*Math.sin(m),h.x2=t*Math.cos(m),h.y2=t*Math.sin(m),h.stroke=g,h.strokeWidth=n,h.lineDash=f,h.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this,i=this.tickData;t.update(e.enabled?i:[]).each((s,n,a)=>{const r=this.labelData[a];if(!r||r.hidden){s.visible=!1;return}s.text=r.text,s.setFont(e),s.fill=e.color,s.x=r.x,s.y=r.y,s.textAlign=r.textAlign,s.textBaseline=r.textBaseline,s.visible=!0,r.rotation?(s.rotation=r.rotation,s.rotationCenterX=r.x,s.rotationCenterY=r.y):s.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:s}=this,n=this.tickData;s.update(i.enabled?n:[]).each((a,r)=>{const{value:o}=r,l=e.convert(o),c=Math.cos(l),h=Math.sin(l);a.x1=t*c,a.y1=t*h,a.x2=(t+i.size)*c,a.y2=(t+i.size)*h,a.stroke=i.color,a.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:s,gridLength:n,scale:a,tick:r}=this;if(!s.enabled)return[];const o=new QM,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,h=e.map((u,d)=>{var p;const{value:g}=u,f=n+s.padding+r.size,m=a.convert(g),v=Math.cos(m),y=Math.sin(m),b=f*v,_=f*y,{textAlign:S,textBaseline:D}=this.getLabelAlign(m),A=d===e.length-1&&g!==e[0]&&il(sl(m),sl(a.convert(e[0]))),I=this.getLabelRotation(m);let T=String(g);if(s.formatter){const{callbackCache:C}=this.moduleCtx;T=(p=C.call(s.formatter,{value:g,index:d}))!=null?p:""}o.text=T,o.x=b,o.y=_,o.setFont(s),o.textAlign=S,o.textBaseline=D,o.rotation=I,I&&(o.rotationCenterX=b,o.rotationCenterY=_);let E=I?o.computeTransformedBBox():o.computeBBox();if(E&&t.hideWhenNecessary&&!I){const C=l-E.x,O=E.x+E.width-c,N=1;if(C>N||O>N){const w=E.width-Math.max(C,O);({text:T}=QM.wrap(T,w,1/0,s,"never")),T==="\u2026"&&(T="",E=void 0),o.text=T,E=o.computeBBox()}}return{text:T,x:b,y:_,textAlign:S,textBaseline:D,hidden:T===""||u.hidden||A,rotation:I,box:E}});return s.avoidCollisions&&this.avoidLabelCollisions(h),h}computeLabelsBBox(e,t){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:el._Scene.BBox.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof Ey?e.orientation:"fixed"}getLabelRotation(e){var t;let i=Iy((t=this.label.rotation)!=null?t:0);e=sl(e);const s=this.getLabelOrientation();return s==="parallel"?(i+=e,e>=0&&e<Math.PI?i-=Math.PI/2:i+=Math.PI/2):s==="perpendicular"&&(i+=e,e>=Math.PI/2&&e<3*Math.PI/2&&(i+=Math.PI)),i}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let s,n;const a=this.getLabelOrientation(),r=il(t,0),o=il(i,0),l=il(t,1),c=il(i,-1),h=t>0&&!r,u=i>0&&!o;return a==="parallel"?(s="center",n=l&&o||u?"top":"bottom"):a==="perpendicular"?(s=c||h?"left":"right",n="middle"):(s=r?"center":h?"left":"right",n=o?"middle":u?"top":"bottom"),{textAlign:s,textBaseline:n}}updateCrossLines(){var e;(e=this.crossLines)==null||e.forEach(t=>{if(t instanceof qM){const{shape:i,gridLength:s,innerRadiusRatio:n}=this;t.shape=i,t.axisOuterRadius=s,t.axisInnerRadius=s*n}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};k([cN("rotation"),Ty(ZM.restrict({min:0,max:360}))],Xd.prototype,"startAngle",2),k([Ty(nN(ZM.restrict({min:0,max:720}),oN("startAngle")),{optional:!0})],Xd.prototype,"endAngle",2);var{RATIO:JM,Validate:tk}=Sy._ModuleSupport,{BandScale:dN}=Sy._Scale,{isNumberEqual:ek}=Sy._Util,nl=class extends Xd{constructor(e){super(e,new dN),this.groupPaddingInner=0,this.paddingInner=0}generateAngleTicks(){var e,t;const{scale:i,tick:s,gridLength:n}=this,a=(t=(e=s.values)!=null?e:i.ticks())!=null?t:[];if(a.length<2||isNaN(s.minSpacing))return a.map(h=>({value:h,visible:!0}));const r=a[0],o=i.convert(r),l=n*Math.cos(o),c=n*Math.sin(o);for(let h=1;h<a.length-1;h++){const u=a[h],d=i.convert(u);if(d-o>Math.PI)break;const p=n*Math.cos(d),g=n*Math.sin(d);if(Math.sqrt(ze(p-l,2)+ze(g-c,2))>s.minSpacing){const m=new Set([r]);return _y(a,h,(v,y)=>{m.add(y)}),a.map(v=>{const y=m.has(v);return{value:v,visible:y}})}}return[{value:r,visible:!0}]}avoidLabelCollisions(e){let{minSpacing:t}=this.label;if(Number.isFinite(t)||(t=0),e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;const h=l.box.clone().grow(t/2),u=c.box.clone().grow(t/2);return h.collidesBBox(u)},s=e[0],n=e.at(-1),a=new Set([s]),r=ek(s.x,n.x)&&ek(s.y,n.y),o=Math.floor(e.length/2);for(let l=1;l<=o;l++){const c=r?e.slice(0,-1):e;if(!_y(c,l,i)){_y(c,l,(u,d)=>{a.add(d)});break}}e.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};nl.className="AngleCategoryAxis",nl.type="angle-category",k([tk(JM)],nl.prototype,"groupPaddingInner",2),k([tk(JM)],nl.prototype,"paddingInner",2);var pN={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:nl,themeTemplate:GM},Cy=(Y(),W(V)),ik=(Y(),W(V)),{LinearScale:gN,Invalidating:fN}=ik._Scale,{isNumberEqual:mN,range:sk}=ik._Util,nk=class extends gN{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(n=>!isFinite(n)))return[];this.refresh();const[e,t]=this.getDomain(),{interval:i}=this;if(i){const n=Math.abs(i);if(!this.isDenseInterval({start:e,stop:t,interval:n}))return sk(e,t,n)}const s=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,t);return sk(e,t,s)}hasNiceRange(){const e=this.range.slice().sort((i,s)=>i-s);return[Math.PI,2*Math.PI].some(i=>mN(i,e[1]-e[0]))}getNiceStepAndTickCount(){const[e,t]=this.niceDomain;let i=this.getTickStep(e,t);const s=isNaN(this.maxTickCount)?1/0:this.maxTickCount,n=Math.abs(t-e)/i;let a=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return a>s&&(a/=2,i*=2),{count:a,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const e=this.niceDomain[0]>this.niceDomain[1],t=e?this.niceDomain[1]:this.niceDomain[0],{step:i,count:s}=this.getNiceStepAndTickCount(),n=1/i,a=i>=1?Math.ceil(t/i+s)*i:Math.ceil((t+s*i)*n)/n;this.niceDomain=e?[a,t]:[t,a],this.niceTickStep=i}getPixelRange(){return this.arcLength}};k([fN],nk.prototype,"arcLength",2);var{AND:ak,Default:Oy,GREATER_THAN:yN,LESS_THAN:vN,NUMBER_OR_NAN:rk,MIN_SPACING:xN,Validate:Ny}=Cy._ModuleSupport,{angleBetween:bN,isNumberEqual:ok,normalisedExtentWithMetadata:SN}=Cy._Util,lk=class extends Cy._ModuleSupport.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};k([Ny(xN),Oy(NaN)],lk.prototype,"maxSpacing",2);var ih=class extends Xd{constructor(e){super(e,new nk),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=SN(e,t,i);return{domain:s,clipped:n}}createTick(){return new lk}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),s=bN(t,i)||2*Math.PI,n=this.gridLength;return s*n}generateAngleTicks(){var e;const t=this.getRangeArcLength(),{scale:i,tick:s,range:n}=this,{minSpacing:a=NaN,maxSpacing:r=NaN}=s,o=r?Math.floor(t/r):1,l=a?Math.floor(t/a):1/0,c=Math.floor(4/Math.PI*Math.abs(n[0]-n[1]));return i.tickCount=Math.max(o,Math.min(l,c)),i.minTickCount=o,i.maxTickCount=l,i.arcLength=t,((e=s.values)!=null?e:i.ticks()).map(u=>({value:u,visible:!0}))}avoidLabelCollisions(e){let{minSpacing:t}=this.label;Number.isFinite(t)||(t=0);const i=(a,r)=>{if(a.hidden||r.hidden)return!1;const o=a.box.clone().grow(t/2),l=r.box.clone().grow(t/2);return o.collidesBBox(l)},s=e[0],n=e.at(-1);s!==n&&ok(s.x,n.x)&&ok(s.y,n.y)&&(n.hidden=!0);for(let a=1;a<e.length;a*=2){let r=!1;for(let o=a;o<e.length;o+=a){const l=e[o],c=e[o-a];if(i(c,l)){r=!0;break}}if(!r){e.forEach((o,l)=>{l%a>0&&(o.hidden=!0,o.box=void 0)});return}}e.forEach((a,r)=>{r>0&&(a.hidden=!0,a.box=void 0)})}};ih.className="AngleNumberAxis",ih.type="angle-number",k([Ny(ak(rk,vN("max"))),Oy(NaN)],ih.prototype,"min",2),k([Ny(ak(rk,yN("min"))),Oy(NaN)],ih.prototype,"max",2);var _N={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:ih,themeTemplate:GM},Ry=(Y(),W(V)),ck={__extends__:Ry._Theme.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:Ry._Theme.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:Ry._Theme.EXTENDS_AXES_TICK_DEFAULTS}},hk=(Y(),W(V)),al=(Y(),W(V)),Rr=(Y(),W(V)),{ChartAxisDirection:MN,Validate:kN,DEGREE:DN,validateCrossLineValues:AN}=Rr._ModuleSupport,{Path:LN,Sector:TN,Text:IN}=Rr._Scene,{normalizeAngle360:EN,toRadians:CN,isNumberEqual:ON}=Rr._Util,uk=class extends Fs{constructor(){super(...arguments),this.positionAngle=void 0}};k([kN(DN,{optional:!0})],uk.prototype,"positionAngle",2);var dk=class ox extends KM{constructor(){super(),this.direction=MN.Y,this.label=new uk,this.polygonNode=new LN,this.sectorNode=new TN,this.labelNode=new IN,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:i,type:s,value:n,range:a}=this;if(!i||!s||!AN(s,n,a,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}s==="line"&&i instanceof Rr._Scale.BandScale&&(this.type="range",this.range=[n,n]),this.updateRadii();const{innerRadius:r,outerRadius:o}=this;t&&(t=r>=this.axisInnerRadius&&o<=this.axisOuterRadius),this.group.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.group.zIndex=this.type==="line"?ox.LINE_LAYER_ZINDEX:ox.RANGE_LAYER_ZINDEX}updateRadii(){var t;const{range:i,scale:s,type:n,axisInnerRadius:a,axisOuterRadius:r}=this;if(!s)return{innerRadius:0,outerRadius:0};const o=h=>r+a-h;let l=0,c=0;if(n==="line")l=o(s.convert(this.value)),c=l;else{const h=Math.abs((t=s?.bandwidth)!=null?t:0),u=i.map(d=>s.convert(d));l=o(Math.max(...u)),c=o(Math.min(...u))+h}this.outerRadius=l,this.innerRadius=c}drawPolygon(t,i,s){i.forEach((n,a)=>{const r=t*Math.cos(n),o=t*Math.sin(n);a===0?s.path.moveTo(r,o):s.path.lineTo(r,o)}),s.path.closePath()}updatePolygonNode(t){const{gridAngles:i,polygonNode:s,scale:n,shape:a,type:r,innerRadius:o,outerRadius:l}=this;if(!t||a!=="polygon"||!n||!i){s.visible=!1;return}s.visible=!0;const c=this.getPadding();s.path.clear({trackChanges:!0}),this.drawPolygon(l-c,i,s);const h=i.slice().reverse(),u=r==="line"?l-c:o+c;this.drawPolygon(u,h,s),this.setSectorNodeProps(s)}updateSectorNode(t){const{axisInnerRadius:i,axisOuterRadius:s,scale:n,sectorNode:a,shape:r,innerRadius:o,outerRadius:l}=this;if(!t||r!=="circle"||!n){a.visible=!1;return}a.visible=!0,a.startAngle=0,a.endAngle=2*Math.PI;const c=this.getPadding();a.innerRadius=Rr._Util.clamp(i,o+c,s),a.outerRadius=Rr._Util.clamp(i,l-c,s),this.setSectorNodeProps(a)}updateLabelNode(t){var i,s;const{innerRadius:n,label:a,labelNode:r,scale:o,shape:l,type:c}=this;if(!t||a.enabled===!1||!a.text||!o){r.visible=!1;return}const h=EN(CN(((i=a.positionAngle)!=null?i:0)-90)),u=(ON(h,0)||h>0)&&h<Math.PI,d=u?h-Math.PI/2:h+Math.PI/2;let p=0;const g=(s=this.gridAngles)!=null?s:[];c==="line"?p=n+a.padding:l==="circle"||g.length<3?p=n-a.padding:p=n*Math.cos(Math.PI/g.length)-a.padding;const f=p*Math.cos(h),m=p*Math.sin(h);let v;c==="line"?v=u?"top":"bottom":v=u?"bottom":"top",this.setLabelNodeProps(r,f,m,v,d)}getPadding(){var t,i;const{scale:s}=this;if(!s)return 0;const n=Math.abs((t=s.bandwidth)!=null?t:0),a=Math.abs((i=s.step)!=null?i:0);return s instanceof Rr._Scale.BandScale?(a-n)/2:0}};dk.className="RadiusCrossLine";var pk=dk,{assignJsonApplyConstructedArray:NN,ChartAxisDirection:RN,Default:gk,Layers:wN,DEGREE:fk,MIN_SPACING:PN,BOOLEAN:BN,Validate:$d}=al._ModuleSupport,{Caption:FN,Group:zN,Path:GN,Selection:VN}=al._Scene,{isNumberEqual:UN,normalizeAngle360:mk,toRadians:WN}=al._Util,yk=class extends al._ModuleSupport.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};k([$d(PN),gk(NaN)],yk.prototype,"maxSpacing",2);var wy=class extends al._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};k([$d(BN,{optional:!0})],wy.prototype,"autoRotate",2),k([$d(fk)],wy.prototype,"autoRotateAngle",2);var Py=class extends al._ModuleSupport.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new zN({name:`${this.id}-gridPaths`,zIndex:wN.AXIS_GRID_ZINDEX})),this.gridPathSelection=VN.select(this.gridPathGroup,GN)}get direction(){return RN.Y}assignCrossLineArrayConstructor(e){NN(e,pk)}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:s}=this,n=e*s,a=WN(i);return{translationX:t.x,translationY:t.y-e-n,rotation:a,rotationCenterX:0,rotationCenterY:e+n}}updateSelections(e,t,i){var s;super.updateSelections(e,t,i);const{gridLine:{enabled:n,style:a,width:r},shape:o}=this;if(!a)return;const l=this.prepareTickData(t),c=a.length,h=(m,v)=>{const{stroke:y,lineDash:b}=a[v%c];m.stroke=y,m.strokeWidth=r,m.lineDash=b,m.fill=void 0},[u,d]=(s=this.gridRange)!=null?s:[0,2*Math.PI],p=UN(d-u,2*Math.PI),g=(m,v)=>{const{path:y}=m;y.clear({trackChanges:!0});const b=this.getTickRadius(v);p?(y.moveTo(b,0),y.arc(0,0,b,0,2*Math.PI)):(y.moveTo(b*Math.cos(u),b*Math.sin(u)),y.arc(0,0,b,mk(u),mk(d))),p&&y.closePath()},f=(m,v)=>{const{path:y}=m,b=this.gridAngles;if(y.clear({trackChanges:!0}),!b||b.length<3)return;const _=this.getTickRadius(v);b.forEach((S,D)=>{const A=_*Math.cos(S),I=_*Math.sin(S);D===0?y.moveTo(A,I):y.lineTo(A,I),b.forEach((T,E)=>{const C=_*Math.cos(T),O=_*Math.sin(T);E===0?y.moveTo(C,O):y.lineTo(C,O)}),y.closePath()}),y.closePath()};this.gridPathSelection.update(n?l:[]).each((m,v,y)=>{h(m,y),o==="circle"?g(m,v):f(m,v)})}updateTitle(){var e;const t=c=>c.defaultValue,{title:i,_titleCaption:s,range:n,moduleCtx:{callbackCache:a}}=this,{formatter:r=t}=(e=this.title)!=null?e:{};if(!i){s.enabled=!1;return}s.enabled=i.enabled,s.fontFamily=i.fontFamily,s.fontSize=i.fontSize,s.fontStyle=i.fontStyle,s.fontWeight=i.fontWeight,s.color=i.color,s.wrapping=i.wrapping;let o=!1;const l=s.node;i.enabled&&(o=!0,l.rotation=Math.PI/2,l.x=Math.floor((n[0]+n[1])/2),l.y=-FN.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=a.call(r,this.getTitleFormatterParams())),l.visible=o}createTick(){return new yk}updateCrossLines(){var e;(e=this.crossLines)==null||e.forEach(t=>{if(t instanceof pk){const{shape:i,gridAngles:s,range:n,innerRadiusRatio:a}=this,r=n[0];t.shape=i,t.gridAngles=s,t.axisOuterRadius=r,t.axisInnerRadius=r*a}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new wy}};k([$d(fk),gk(0)],Py.prototype,"positionAngle",2);var{RATIO:By,ProxyPropertyOnWrite:vk,Validate:Fy}=hk._ModuleSupport,{BandScale:YN}=hk._Scale,wr=class extends Py{constructor(e){super(e,new YN),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t}=this,i=t.range[0],s=i*this.innerRadiusRatio,n=(i-s)/t.domain.length;return i-e.translationY+s-n/2}};wr.className="RadiusCategoryAxis",wr.type="radius-category",k([Fy(By)],wr.prototype,"groupPaddingInner",2),k([vk("scale","paddingInner"),Fy(By)],wr.prototype,"paddingInner",2),k([vk("scale","paddingOuter"),Fy(By)],wr.prototype,"paddingOuter",2);var HN={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:wr,themeTemplate:ck},zy=(Y(),W(V)),{AND:xk,Default:bk,GREATER_THAN:KN,LESS_THAN:jN,NUMBER_OR_NAN:Sk,Validate:_k}=zy._ModuleSupport,{LinearScale:XN}=zy._Scale,{normalisedExtentWithMetadata:$N}=zy._Util,sh=class extends Py{constructor(e){super(e,new XN),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(e){var t;const{scale:i}=this,s=(t=i.getDomain)==null?void 0:t.call(i)[1];return e.filter(({tick:n})=>n!==s).sort((n,a)=>a.tick-n.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],s=i*this.innerRadiusRatio;return i-e.translationY+s}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=$N(e,t,i);return{domain:s,clipped:n}}};sh.className="RadiusNumberAxis",sh.type="radius-number",k([_k(xk(Sk,jN("max"))),bk(NaN)],sh.prototype,"min",2),k([_k(xk(Sk,KN("min"))),bk(NaN)],sh.prototype,"max",2);var qN={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:sh,themeTemplate:ck},Mk=(Y(),W(V)),{BOOLEAN:ZN,POSITIVE_NUMBER:QN,ActionOnSet:kk,Validate:Dk}=Mk._ModuleSupport,Gy=class extends Mk._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.animationManager=e.animationManager,this.animationManager.skip(!1)}};k([kk({newValue(e){this.animationManager&&this.animationManager.skip(!e)}}),Dk(ZN)],Gy.prototype,"enabled",2),k([kk({newValue(e){this.animationManager&&(this.animationManager.defaultDuration=e)}}),Dk(QN)],Gy.prototype,"duration",2);var JN={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Gy,themeTemplate:{animation:{enabled:!0}}},Vy=(Y(),W(V)),Ak=(Y(),W(V)),{Image:tR}=Ak._Scene,{BaseProperties:eR,ObserveChanges:iR,ProxyProperty:sR,Validate:Pr,NUMBER:qd,POSITIVE_NUMBER:Lk,RATIO:nR}=Ak._ModuleSupport,Un=class extends eR{constructor(e){super(),this.loadedSynchronously=!0,this.opacity=1,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var t;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),(t=this.onLoad)==null||t.call(this))},this.imageElement=e.document.createElement("img"),this.imageElement.onload=this.onImageLoad,this.node=new tR(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(e,t){this.containerWidth=e,this.containerHeight=t,this.node.setProperties(this.complete?At({visible:!0,opacity:this.opacity},this.calculatePosition(this.imageElement.width,this.imageElement.height)):{visible:!1})}calculatePosition(e,t){let{top:i,right:s,bottom:n,left:a,width:r,height:o}=this;return a!=null?r!=null?s=this.containerWidth-a+r:s!=null&&(r=this.containerWidth-a-s):s!=null&&r!=null&&(a=this.containerWidth-s-r),i!=null?o!=null?n=this.containerHeight-i-o:n!=null&&(o=this.containerHeight-n-i):n!=null&&o!=null&&(i=this.containerHeight-n-o),r==null?o==null?(r=e,o=t):r=Math.ceil(e*o/t):o==null&&(o=Math.ceil(t*r/e)),a==null&&(s==null?a=Math.floor((this.containerWidth-r)/2):a=this.containerWidth-s-r),i==null&&(n==null?i=Math.floor((this.containerHeight-o)/2):i=this.containerHeight-o-n),{x:a,y:i,width:r,height:o}}};k([Pr(qd,{optional:!0})],Un.prototype,"top",2),k([Pr(qd,{optional:!0})],Un.prototype,"right",2),k([Pr(qd,{optional:!0})],Un.prototype,"bottom",2),k([Pr(qd,{optional:!0})],Un.prototype,"left",2),k([Pr(Lk,{optional:!0})],Un.prototype,"width",2),k([Pr(Lk,{optional:!0})],Un.prototype,"height",2),k([Pr(nR)],Un.prototype,"opacity",2),k([sR("imageElement.src"),iR(e=>e.loadedSynchronously=e.complete)],Un.prototype,"url",2);var{ActionOnSet:aR,OBJECT:rR,Validate:oR}=Vy._ModuleSupport,Tk=class extends Vy._ModuleSupport.Background{constructor(e){super(e),this.image=new Un(e),this.updateService=e.updateService}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.updateService.update(Vy._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};k([oR(rR,{optional:!0}),aR({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){this.node.removeChild(e.node),e.onLoad=void 0}})],Tk.prototype,"image",2);var lR={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Tk},cR=(Y(),W(V)),nh=(Y(),W(V)),Ne="ag-chart-context-menu",ln="ag-charts-dark-context-menu",hR=`
.${Ne} {
    background: rgb(248, 248, 248);
    border: 1px solid #babfc7;
    border-radius: 5px;
    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);
    color: rgb(24, 29, 31);
    font: 13px Verdana, sans-serif;
    position: fixed;
    transition: transform 0.1s ease;
    white-space: nowrap;
    z-index: 99999;
}

.${Ne}.${ln} {
    color: white;
    background: #15181c;
}

.${Ne}__cover {
    position: fixed;
    left: 0px;
    top: 0px;
}

.${Ne}__menu {
    display: flex;
    flex-direction: column;
    padding: 0.5em 0;
}

.${Ne}__item {
    background: none;
    border: none;
    box-sizing: border-box;
    font: inherit;
    padding: 0.5em 1em;
    text-align: left;
    -webkit-appearance: none;
    -moz-appearance: none;
}

.${Ne}__item.${ln} {
    color: white;
}

.${Ne}__item:hover {
    background: rgb(33, 150, 243, 0.1);
}

.${Ne}__item:hover.${ln} {
    background: rgb(33, 150, 243, 0.1);
}

.${Ne}__item:active {
    background: rgb(33, 150, 243, 0.2);
}

.${Ne}__item:active.${ln} {
    background: rgb(33, 150, 243, 0.1);
}

.${Ne}__item[disabled] {
    border: none;
    opacity: 0.5;
    text-align: left;
}

.${Ne}__item[disabled]:hover {
    background: inherit;
    cursor: inherit;
}

.${Ne}__divider {
    margin: 5px 0;
    background: #babfc7;
    height: 1px;
}

.${Ne}__divider.${ln} {
    background: rgb(33, 150, 243, 0.1);
}
`,{BOOLEAN:Ik,Validate:Ek}=nh._ModuleSupport,Zd=class lx extends nh._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=t.highlightManager,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.scene=t.scene;const{Default:i,ContextMenu:s,All:n}=nh._ModuleSupport.InteractionState,a=i|s;if(this.destroyFns.push(t.interactionManager.addListener("contextmenu",r=>this.onContextMenu(r),a),t.interactionManager.addListener("click",()=>this.onClick(),n)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=t.scene.canvas.element,this.container=t.document.body,this.element=this.container.appendChild(t.document.createElement("div")),this.element.classList.add(Ne),this.element.addEventListener("contextmenu",r=>r.preventDefault()),this.destroyFns.push(()=>{var r;return(r=this.element.parentNode)==null?void 0:r.removeChild(this.element)}),this.hide(),typeof IntersectionObserver<"u"){const r=new IntersectionObserver(o=>{for(const l of o)l.target===this.canvasElement&&l.intersectionRatio===0&&this.hide()},{root:this.container});r.observe(this.canvasElement),this.intersectionObserver=r}if(typeof MutationObserver<"u"){const r=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});r.observe(this.element,{childList:!0}),this.mutationObserver=r}if(lx.contextMenuDocuments.indexOf(t.document)<0){const r=t.document.createElement("style");r.innerHTML=hR,t.document.head.insertBefore(r,t.document.head.querySelector("style")),lx.contextMenuDocuments.push(t.document)}this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const r=t.chartService.title;let o="image";r!==void 0&&r.enabled&&r.text!==void 0&&(o=r.text),this.scene.download(o)}})}isShown(){return this.menuElement!==void 0}onClick(){this.isShown()&&this.hide()}onContextMenu(t){if(!this.enabled)return;this.showEvent=t.sourceEvent,this.x=t.pageX,this.y=t.pageY,this.groups.default=this.registry.copyDefaultAction(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:i,node:s,extra:n,extraNode:a}=this.groups;i.length+s.length+n.length+a.length!==0&&(t.consume(),t.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(nh._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(ln,this.darkTheme);const t=this.renderMenu();this.menuElement?this.element.replaceChild(t,this.menuElement):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block"}hide(){this.interactionManager.popState(nh._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const t=this.ctx.document.createElement("div");return t.classList.add(`${Ne}__menu`),t.classList.toggle(ln,this.darkTheme),this.groups.default.forEach(i=>{const s=this.renderItem(i);s&&t.appendChild(s)}),["node","extra","extraNode"].forEach(i=>{this.groups[i].length===0||["node","extraNode"].includes(i)&&!this.pickedNode||(t.appendChild(this.createDividerElement()),this.groups[i].forEach(s=>{const n=this.renderItem(s);n&&t.appendChild(n)}))}),t}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=this.ctx.document.createElement("div");return t.classList.add(`${Ne}__divider`),t.classList.toggle(ln,this.darkTheme),t}createActionElement({id:t,label:i,action:s}){return t&&this.registry.isDisabled(t)?this.createDisabledElement(i):this.createButtonElement(i,s)}createButtonElement(t,i){const s=this.ctx.document.createElement("button");return s.classList.add(`${Ne}__item`),s.classList.toggle(ln,this.darkTheme),s.innerHTML=t,s.onclick=()=>{var n,a,r;const o={event:this.showEvent,datum:(n=this.pickedNode)==null?void 0:n.datum,itemId:(a=this.pickedNode)==null?void 0:a.itemId,seriesId:(r=this.pickedNode)==null?void 0:r.series.id};i(o),this.hide()},s}createDisabledElement(t){const i=this.ctx.document.createElement("button");return i.classList.add(`${Ne}__item`),i.classList.toggle(ln,this.darkTheme),i.disabled=!0,i.innerHTML=t,i}reposition(){const{x:t,y:i,ctx:{window:s}}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",t+this.element.offsetWidth>s.innerWidth?this.element.style.right=`calc(100% - ${t-1}px)`:this.element.style.left=`${t+1}px`,i+this.element.offsetHeight>s.innerHeight?this.element.style.bottom=`calc(100% - ${i}px - 0.5em)`:this.element.style.top=`calc(${i}px - 0.5em)`}destroy(){var t,i;super.destroy(),this.destroyFns.forEach(s=>s()),(t=this.intersectionObserver)==null||t.unobserve(this.canvasElement),(i=this.mutationObserver)==null||i.disconnect()}};Zd.contextMenuDocuments=[],k([Ek(Ik)],Zd.prototype,"enabled",2),k([Ek(Ik)],Zd.prototype,"darkTheme",2);var uR=Zd,dR={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],optionsKey:"contextMenu",instanceConstructor:uR,themeTemplate:{contextMenu:{enabled:!0,darkTheme:cR._Theme.IS_DARK_THEME}}},Uy=(Y(),W(V)),Wy=(Y(),W(V)),{ActionOnSet:pR,BaseProperties:gR,BOOLEAN:fR,FUNCTION:mR,NUMBER:Ck,STRING:Ok,Validate:rl}=Wy._ModuleSupport,{BBox:yR}=Wy._Scene,ol="ag-crosshair-label",vR=`
.${ol} {
    position: absolute;
    left: 0px;
    top: 0px;
    user-select: none;
    pointer-events: none;
    font: 12px Verdana, sans-serif;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    box-sizing: border-box;
}

.${ol}-content {
    padding: 0 7px;
    border-radius: 2px;
    line-height: 1.7em;
    background-color: rgb(71,71,71);
    color: rgb(255, 255, 255);
}

.${ol}-hidden {
    top: -10000px !important;
}
`,Ca=class cx extends gR{constructor(t,i){if(super(),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0,this.element=i.appendChild(t.createElement("div")),this.element.classList.add(ol),this.labelRoot=i,cx.labelDocuments.indexOf(t)<0){const s=t.createElement("style");s.innerHTML=vR,t.head.insertBefore(s,t.head.querySelector("style")),cx.labelDocuments.push(t)}}show(t){const{element:i}=this;let s=t.x+this.xOffset,n=t.y+this.yOffset;const a=(c,h,u)=>Math.max(Math.min(h,u),c),r=this.getContainerBoundingBox(),o=r.x+r.width-i.clientWidth-1,l=r.y+r.height-i.clientHeight;s=a(r.x+1,s,o),n=a(r.y,n,l),i.style.transform=`translate(${Math.round(s)}px, ${Math.round(n)}px)`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}computeBBox(){const{element:t}=this;return new Wy._Scene.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}getContainerBoundingBox(){const{width:t,height:i}=this.labelRoot.getBoundingClientRect();return new yR(0,0,t,i)}toggle(t){this.element.classList.toggle(`${ol}-hidden`,!t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}toLabelHtml(t,i){var s,n;if(typeof t=="string")return t;i=i??{};const{text:a=(s=i.text)!=null?s:"",color:r=i.color,backgroundColor:o=i.backgroundColor,opacity:l=(n=i.opacity)!=null?n:1}=t,c=`opacity: ${l}; background-color: ${o?.toLowerCase()}; color: ${r}`;return`<div class="${ol}-content" style="${c}">
                    <span>${a}</span>
                </div>`}};Ca.labelDocuments=[],k([rl(fR)],Ca.prototype,"enabled",2),k([rl(Ok,{optional:!0}),pR({changeValue(e,t){e!==t&&(t&&this.element.classList.remove(t),e&&this.element.classList.add(e))}})],Ca.prototype,"className",2),k([rl(Ck)],Ca.prototype,"xOffset",2),k([rl(Ck)],Ca.prototype,"yOffset",2),k([rl(Ok,{optional:!0})],Ca.prototype,"format",2),k([rl(mR,{optional:!0})],Ca.prototype,"renderer",2);var xR=Ca,{Group:bR,Line:SR,BBox:Yy}=Uy._Scene,{POSITIVE_NUMBER:Nk,RATIO:_R,BOOLEAN:Rk,COLOR_STRING:MR,LINE_DASH:kR,OBJECT:DR,Validate:Oa,Layers:AR}=Uy._ModuleSupport,Wn=class extends Uy._ModuleSupport.BaseModuleInstance{constructor(e){var t,i;super(),this.ctx=e,this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.seriesRect=new Yy(0,0,0,0),this.hoverRect=new Yy(0,0,0,0),this.bounds=new Yy(0,0,0,0),this.visible=!1,this.crosshairGroup=new bR({layer:!0,zIndex:AR.SERIES_CROSSHAIR_ZINDEX}),this.lineNode=this.crosshairGroup.appendChild(new SR),this.activeHighlight=void 0,(t=e.scene.root)==null||t.appendChild(this.crosshairGroup),this.axisCtx=e.parent,this.crosshairGroup.visible=!1,this.label=new xR(e.document,(i=e.scene.canvas.container)!=null?i:e.document.body),this.destroyFns.push(e.interactionManager.addListener("hover",s=>this.onMouseMove(s)),e.interactionManager.addListener("leave",()=>this.onMouseOut()),e.highlightManager.addListener("highlight-change",s=>this.onHighlightChange(s)),e.layoutService.addListener("layout-complete",s=>this.layout(s)),()=>{var s;return(s=e.scene.root)==null?void 0:s.removeChild(this.crosshairGroup)},()=>this.label.destroy())}layout({series:{rect:e,paddedRect:t,visible:i},axes:s}){var n;if(this.hideCrosshair(),!(i&&s&&this.enabled)){this.visible=!1;return}this.visible=!0,this.seriesRect=e,this.hoverRect=t;const{position:a="left",axisId:r}=this.axisCtx,o=s.find(p=>p.id===r);if(!o)return;this.axisLayout=o;const l=o.gridPadding+o.seriesAreaPadding;this.bounds=this.buildBounds(e,a,l);const{crosshairGroup:c,bounds:h}=this;c.translationX=Math.round(h.x),c.translationY=Math.round(a==="top"||a==="bottom"?h.y+h.height:h.y);const u=a==="top"||a==="bottom"?-Math.PI/2:0;c.rotation=u,this.updateLine();const d=(n=this.label.format)!=null?n:o.label.format;this.labelFormatter=d?this.axisCtx.scaleValueFormatter(d):void 0}buildBounds(e,t,i){const s=e.clone();return s.x+=t==="left"?-i:0,s.y+=t==="top"?-i:0,s.width+=t==="left"||t==="right"?i:0,s.height+=t==="top"||t==="bottom"?i:0,s}updateLine(){const{lineNode:e,bounds:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r,axisCtx:o,axisLayout:l}=this;l&&(e.stroke=i,e.strokeWidth=s,e.strokeOpacity=n,e.lineDash=a,e.lineDashOffset=r,e.y1=e.y2=0,e.x1=0,e.x2=o.direction==="x"?t.height:t.width)}formatValue(e){var t;const{labelFormatter:i,axisLayout:s,ctx:{callbackCache:n}}=this;if(i){const o=n.call(i,e);if(o!==void 0)return o}const a=e%1===0,r=((t=s?.label.fractionDigits)!=null?t:0)+(a?0:1);return typeof e=="number"?e.toFixed(r):String(e)}onMouseMove(e){if(!this.enabled||this.snap)return;const{crosshairGroup:t,seriesRect:i,hoverRect:s,axisCtx:n,activeHighlight:a}=this,{offsetX:r,offsetY:o}=e;if(this.visible&&s.containsPoint(r,o)){t.visible=!0;const l=a?this.getActiveHighlight(a):void 0;let c,h=0,u=0;n.direction==="x"?(h=Math.max(Math.min(i.x+i.width,r),i.x),t.translationX=Math.round(h),c=n.continuous?n.scaleInvert(r-i.x):l?.value):(u=Math.max(Math.min(i.y+i.height,o),i.y),t.translationY=Math.round(u),c=n.continuous?n.scaleInvert(o-i.y):l?.value),c&&this.label.enabled?this.showLabel(h,u,c):this.hideLabel()}else this.hideCrosshair()}onMouseOut(){this.hideCrosshair()}onHighlightChange(e){var t,i,s;if(!this.enabled)return;const{crosshairGroup:n,seriesRect:a,axisCtx:r}=this,{datum:o,series:l}=(t=e.currentHighlight)!=null?t:{},c=o&&(((i=l?.axes.x)==null?void 0:i.id)===r.axisId||((s=l?.axes.y)==null?void 0:s.id)===r.axisId);if(this.activeHighlight=c?e.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight){this.hideCrosshair();return}const{value:h,position:u}=this.getActiveHighlight(this.activeHighlight);n.visible=!0;let d=0,p=0;r.direction==="x"?(d=u,n.translationX=Math.round(d+a.x)):(p=u,n.translationY=Math.round(p+a.y)),this.label.enabled?this.showLabel(d+a.x,p+a.y,h):this.hideLabel()}}getActiveHighlight(e){var t,i;const{axisCtx:s}=this,{datum:n,xKey:a="",yKey:r="",aggregatedValue:o,series:l,cumulativeValue:c,midPoint:h}=e,u=s.scaleBandwidth()/2;if(o!==void 0&&((t=l.axes.y)==null?void 0:t.id)===s.axisId)return{value:o,position:s.scaleConvert(o)+u};const d=s.keys().indexOf(r)>=0;if(c!==void 0&&d)return{value:c,position:s.scaleConvert(c)+u};const p=d?r:a,g=(i=s.direction==="x"?h?.x:h?.y)!=null?i:0;return{value:s.continuous?s.scaleInvert(g):n[p],position:g}}getLabelHtml(e){const{label:t,axisLayout:{label:{fractionDigits:i=0}={}}={}}=this,{renderer:s}=t,n={text:this.formatValue(e)};if(s){const a={value:e,fractionDigits:i};return t.toLabelHtml(s(a),n)}return t.toLabelHtml(n)}showLabel(e,t,i){const{axisCtx:s,bounds:n,label:a,axisLayout:r}=this;if(!r)return;const{label:{padding:o},tickSize:l}=r,c=o+l,h=this.getLabelHtml(i);a.setLabelHtml(h);const u=a.computeBBox();let d;if(s.direction==="x"){const p=-u.width/2,g=s.position==="bottom"?0:-u.height,f=s.position==="bottom"?n.y+n.height+c:n.y-c;d={x:e+p,y:f+g}}else{const p=-u.height/2,g=s.position==="right"?0:-u.width;d={x:(s.position==="right"?n.x+n.width+c:n.x-c)+g,y:t+p}}a.show(d)}hideCrosshair(){this.crosshairGroup.visible=!1,this.hideLabel()}hideLabel(){this.label.toggle(!1)}};k([Oa(Rk)],Wn.prototype,"enabled",2),k([Oa(MR,{optional:!0})],Wn.prototype,"stroke",2),k([Oa(kR,{optional:!0})],Wn.prototype,"lineDash",2),k([Oa(Nk)],Wn.prototype,"lineDashOffset",2),k([Oa(Nk)],Wn.prototype,"strokeWidth",2),k([Oa(_R)],Wn.prototype,"strokeOpacity",2),k([Oa(Rk)],Wn.prototype,"snap",2),k([Oa(DR)],Wn.prototype,"label",2);var wk=(Y(),W(V)),LR={crosshair:{enabled:!0,snap:!0,stroke:wk._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:wk._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},TR={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","number","log","time"],instanceConstructor:Wn,themeTemplate:LR},Pk=(Y(),W(V)),{BOOLEAN:IR,FUNCTION:ER,ActionOnSet:ah,Validate:Bk}=Pk._ModuleSupport,ll=class extends Pk._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=e.dataService}updateCallback(e,t){this.dataService&&(e&&t!=null?this.dataService.updateCallback(t):this.dataService.clearCallback())}};k([ah({newValue(e){this.updateCallback(e,this.getData)}}),Bk(IR)],ll.prototype,"enabled",2),k([ah({newValue(e){this.updateCallback(this.enabled,e)}}),Bk(ER)],ll.prototype,"getData",2),k([ah({newValue(e){this.dataService.requestThrottle=e}})],ll.prototype,"requestThrottle",2),k([ah({newValue(e){this.dataService.dispatchThrottle=e}})],ll.prototype,"updateThrottle",2),k([ah({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],ll.prototype,"updateDuringInteraction",2);var CR={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar"],instanceConstructor:ll,themeTemplate:{dataSource:{enabled:!1}}},OR=(Y(),W(V)),Br=(Y(),W(V)),Fr=(Y(),W(V)),{partialAssign:NR,mergeDefaults:Qd}=Fr._ModuleSupport,{BBox:Yn}=Fr._Scene,RR=class{constructor(e){this.components=e,this.union=Yn.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},wR=class extends Fr._Scene.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new Fr._Scene.Path,this.capsPath=new Fr._Scene.Path,this.bboxes=new RR([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:s}=e,{lengthRatioMultiplier:n,lengthMax:a}=t,r=s??i*n;return Math.min(r,a)}getFormatterParams(e,t){const{datum:i}=this;if(i===void 0||e.formatter===void 0&&e.cap.formatter===void 0)return;const{xLowerKey:s,xLowerName:n,xUpperKey:a,xUpperName:r,yLowerKey:o,yLowerName:l,yUpperKey:c,yUpperName:h}=e;return{datum:i.datum,seriesId:i.datum.seriesId,xKey:i.xKey,yKey:i.yKey,xLowerKey:s,xLowerName:n,xUpperKey:a,xUpperName:r,yLowerKey:o,yLowerName:l,yUpperKey:c,yUpperName:h,highlighted:t}}formatStyles(e,t,i){let s=e,{cap:n}=s,a=BM(s,["cap"]);const r=this.getFormatterParams(t,i);if(r!==void 0){if(t.formatter!==void 0){const o=t.formatter(r);a=Qd(o,a),n=Qd(o,n),n=Qd(o?.cap,n)}if(t.cap.formatter!==void 0){const o=t.cap.formatter(r);n=Qd(o,n)}}return{whiskerStyle:a,capsStyle:n}}applyStyling(e,t){NR(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i){if(this.datum===void 0)return;const{whiskerStyle:s,capsStyle:n}=this.formatStyles(e,t,i),{xBar:a,yBar:r,capDefaults:o}=this.datum,l=this.whiskerPath;this.applyStyling(l,s),l.path.clear(),r!==void 0&&(l.path.moveTo(r.lowerPoint.x,r.lowerPoint.y),l.path.lineTo(r.upperPoint.x,r.upperPoint.y)),a!==void 0&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(n??{},o);const c=this.capLength/2,h=this.capsPath;this.applyStyling(h,n),h.path.clear(),r!==void 0&&(h.path.moveTo(r.lowerPoint.x-c,r.lowerPoint.y),h.path.lineTo(r.lowerPoint.x+c,r.lowerPoint.y),h.path.moveTo(r.upperPoint.x-c,r.upperPoint.y),h.path.lineTo(r.upperPoint.x+c,r.upperPoint.y)),a!==void 0&&(h.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-c),h.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+c),h.path.moveTo(a.upperPoint.x,a.upperPoint.y-c),h.path.lineTo(a.upperPoint.x,a.upperPoint.y+c)),h.path.closePath(),h.markDirtyTransform()}updateBBoxes(){var e;const{capLength:t,whiskerPath:i,capsPath:s}=this,{yBar:n,xBar:a}=(e=this.datum)!=null?e:{},r=t/2,o=[];if(n!==void 0){const l=n.lowerPoint.y-n.upperPoint.y;o.push(new Yn(n.lowerPoint.x,n.upperPoint.y,i.strokeWidth,l),new Yn(n.lowerPoint.x-r,n.lowerPoint.y,t,s.strokeWidth),new Yn(n.upperPoint.x-r,n.upperPoint.y,t,s.strokeWidth))}if(a!==void 0){const l=a.upperPoint.x-a.lowerPoint.x;o.push(new Yn(a.lowerPoint.x,a.upperPoint.y,l,i.strokeWidth),new Yn(a.lowerPoint.x,a.lowerPoint.y-r,s.strokeWidth,t),new Yn(a.upperPoint.x,a.upperPoint.y-r,s.strokeWidth,t))}this.bboxes.components=o,this.bboxes.union=Yn.merge(o)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t){const{bboxes:i}=this;if(i.union.distanceSquared(e)>t)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=Yn.nearestBox(e,i.components);return{nearest:this,distanceSquared:s}}},PR=class extends Fr._Scene.Group{get children(){return super.children}nearestSquared(e){const{nearest:t,distanceSquared:i}=Fr._Scene.nearestSquaredInContainer(e,this);if(t!==void 0&&!isNaN(i))return{datum:t.datum,distanceSquared:i}}},BR=(Y(),W(V)),{BaseProperties:Fk,Validate:Zt,BOOLEAN:zk,COLOR_STRING:Gk,FUNCTION:Vk,LINE_DASH:Uk,NUMBER:FR,OBJECT:zR,POSITIVE_NUMBER:Jd,RATIO:Hy,STRING:Na}=BR._ModuleSupport,cn=class extends Fk{};k([Zt(zk,{optional:!0})],cn.prototype,"visible",2),k([Zt(Gk,{optional:!0})],cn.prototype,"stroke",2),k([Zt(Jd,{optional:!0})],cn.prototype,"strokeWidth",2),k([Zt(Hy,{optional:!0})],cn.prototype,"strokeOpacity",2),k([Zt(Uk,{optional:!0})],cn.prototype,"lineDash",2),k([Zt(Jd,{optional:!0})],cn.prototype,"lineDashOffset",2),k([Zt(FR,{optional:!0})],cn.prototype,"length",2),k([Zt(Hy,{optional:!0})],cn.prototype,"lengthRatio",2),k([Zt(Vk,{optional:!0})],cn.prototype,"formatter",2);var qe=class extends Fk{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new cn}};k([Zt(Na,{optional:!0})],qe.prototype,"yLowerKey",2),k([Zt(Na,{optional:!0})],qe.prototype,"yLowerName",2),k([Zt(Na,{optional:!0})],qe.prototype,"yUpperKey",2),k([Zt(Na,{optional:!0})],qe.prototype,"yUpperName",2),k([Zt(Na,{optional:!0})],qe.prototype,"xLowerKey",2),k([Zt(Na,{optional:!0})],qe.prototype,"xLowerName",2),k([Zt(Na,{optional:!0})],qe.prototype,"xUpperKey",2),k([Zt(Na,{optional:!0})],qe.prototype,"xUpperName",2),k([Zt(zk,{optional:!0})],qe.prototype,"visible",2),k([Zt(Gk,{optional:!0})],qe.prototype,"stroke",2),k([Zt(Jd,{optional:!0})],qe.prototype,"strokeWidth",2),k([Zt(Hy,{optional:!0})],qe.prototype,"strokeOpacity",2),k([Zt(Uk,{optional:!0})],qe.prototype,"lineDash",2),k([Zt(Jd,{optional:!0})],qe.prototype,"lineDashOffset",2),k([Zt(Vk,{optional:!0})],qe.prototype,"formatter",2),k([Zt(zR)],qe.prototype,"cap",2);var{fixNumericExtent:Wk,groupAccumulativeValueProperty:GR,isDefined:Ci,mergeDefaults:VR,valueProperty:tp,ChartAxisDirection:Ky}=Br._ModuleSupport;function UR(e){for(const t of Br.AgErrorBarSupportedSeriesTypes)if(t==e.series.type)return e.series;throw new Error(`AG Charts - unsupported series type '${e.series.type}', error bars supported series types: ${Br.AgErrorBarSupportedSeriesTypes.join(", ")}`)}var WR=class Fh extends Br._ModuleSupport.BaseModuleInstance{constructor(t){super(),this.properties=new qe;const i=UR(t),{annotationGroup:s,annotationSelections:n}=i;this.cartesianSeries=i,this.groupNode=new PR({name:`${s.id}-errorBars`,zIndex:Br._ModuleSupport.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:i.getGroupZIndexSubOrder("annotation")}),s.appendChild(this.groupNode),this.selection=Br._Scene.Selection.select(this.groupNode,()=>this.errorBarFactory()),n.add(this.selection),this.destroyFns.push(i.addListener("data-processed",a=>this.onDataProcessed(a)),i.addListener("data-update",a=>this.onDataUpdate(a)),i.addListener("visibility-changed",a=>this.onToggleSeriesItem(a)),t.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>s.removeChild(this.groupNode),()=>n.delete(this.selection))}hasErrorBars(){const{xLowerKey:t,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties;return Ci(t)&&Ci(i)||Ci(s)&&Ci(n)}isStacked(){var t;const i=(t=this.cartesianSeries.seriesGrouping)==null?void 0:t.stackCount;return i===void 0?!1:i>0}getUnstackPropertyDefinition(t){const i=[],{cartesianSeries:s}=this,{xLowerKey:n,xUpperKey:a,yLowerKey:r,yUpperKey:o,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{isContinuousX:h,isContinuousY:u}=t;return r!==void 0&&o!==void 0&&i.push(tp(s,r,u,{id:c}),tp(s,o,u,{id:c})),n!==void 0&&a!==void 0&&i.push(tp(s,n,h,{id:l}),tp(s,a,h,{id:l})),i}getStackPropertyDefinition(t){var i,s;const n=[],{cartesianSeries:a}=this,{xLowerKey:r,xUpperKey:o,yLowerKey:l,yUpperKey:c,xErrorsID:h,yErrorsID:u}=this.getMaybeFlippedKeys(),{isContinuousX:d,isContinuousY:p}=t,g=(s=(i=a.seriesGrouping)==null?void 0:i.groupIndex)!=null?s:a.id,f=At({invalidValue:null,missingValue:0,separateNegative:!0},a.visible?{}:{forceValue:0}),m=(y,b,_,S)=>GR(a,y,b,"normal","current",At({id:`${_}-${S}`,groupId:`errorGroup-${g}-${S}`},f)),v=(y,b,_,S)=>{n.push(...m(y,_,S,"lower"),...m(b,_,S,"upper"))};return l!==void 0&&c!==void 0&&v(l,c,p,u),r!==void 0&&o!==void 0&&v(r,o,d,h),n}getPropertyDefinitions(t){return this.isStacked()?this.getStackPropertyDefinition(t):this.getUnstackPropertyDefinition(t)}onDataProcessed(t){this.dataModel=t.dataModel,this.processedData=t.processedData}getDomain(t){const{xLowerKey:i,xUpperKey:s,xErrorsID:n,yLowerKey:a,yUpperKey:r,yErrorsID:o}=this.getMaybeFlippedKeys();if(t===Ky.X?Ci(i)&&Ci(s):Ci(a)&&Ci(r)){const{dataModel:c,processedData:h,cartesianSeries:u}=this,d=u.axes[t],p={x:n,y:o}[t];if(c!==void 0&&h!==void 0)if(this.isStacked()){const g=c.getDomain(u,`${p}-lower`,"value",h),f=c.getDomain(u,`${p}-upper`,"value",h),m=[Math.min(...g,...f),Math.max(...g,...f)];return Wk(m,d)}else{const g=c.getDomain(u,p,"value",h);return Wk(g,d)}}return[]}onDataUpdate(t){this.dataModel=t.dataModel,this.processedData=t.processedData,Ci(t.dataModel)&&Ci(t.processedData)&&(this.createNodeData(),this.update())}getNodeData(){const{contextNodeData:t}=this.cartesianSeries;if(t.length>0)return t[0].nodeData}createNodeData(){var t,i;const s=this.getNodeData(),n=(t=this.cartesianSeries.axes[Ky.X])==null?void 0:t.scale,a=(i=this.cartesianSeries.axes[Ky.Y])==null?void 0:i.scale;if(!(!this.hasErrorBars()||!n||!a||!s))for(let r=0;r<s.length;r++){const{midPoint:o,xLower:l,xUpper:c,yLower:h,yUpper:u}=this.getDatum(s,r);if(o!==void 0){let d,p;Ci(l)&&Ci(c)&&(d={lowerPoint:{x:this.convert(n,l),y:o.y},upperPoint:{x:this.convert(n,c),y:o.y}}),Ci(h)&&Ci(u)&&(p={lowerPoint:{x:o.x,y:this.convert(a,h)},upperPoint:{x:o.x,y:this.convert(a,u)}}),s[r].xBar=d,s[r].yBar=p}}}getMaybeFlippedKeys(){let{xLowerKey:t,xUpperKey:i,yLowerKey:s,yUpperKey:n}=this.properties,[a,r]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([t,s]=[s,t],[i,n]=[n,i],[a,r]=[r,a]),{xLowerKey:t,xUpperKey:i,xErrorsID:a,yLowerKey:s,yUpperKey:n,yErrorsID:r}}static getDatumKey(t,i,s){if(i===void 0)return;const n=t.datum[i];if(n!==void 0){if(typeof n!="number"){Br._Util.Logger.warnOnce(`Found [${i}] error value of type ${typeof n}. Expected number type`);return}return n+s}}getDatum(t,i){const{xLowerKey:s,xUpperKey:n,yLowerKey:a,yUpperKey:r}=this.getMaybeFlippedKeys(),o=t[i],l=o.cumulativeValue===void 0||!this.isStacked()?0:o.cumulativeValue-o.yValue,[c,h]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:o.midPoint,xLower:Fh.getDatumKey(o,s,c),xUpper:Fh.getDatumKey(o,n,c),yLower:Fh.getDatumKey(o,a,h),yUpper:Fh.getDatumKey(o,r,h)}}convert(t,i){var s;const n=((s=t.bandwidth)!=null?s:0)/2;return t.convert(i)+n}update(){const t=this.getNodeData();t!==void 0&&(this.selection.update(t),this.selection.each((i,s,n)=>this.updateNode(i,s,n)))}updateNode(t,i,s){t.datum=i,t.update(this.getDefaultStyle(),this.properties,!1),t.updateBBoxes()}pickNodeExact(t){const{x:i,y:s}=this.groupNode.transformPoint(t.x,t.y),n=this.groupNode.pickNode(i,s);if(n!==void 0)return{datum:n.datum,distanceSquared:0}}pickNodeNearest(t){return this.groupNode.nearestSquared(t)}pickNodeMainAxisFirst(t){return this.groupNode.nearestSquared(t)}getTooltipParams(){const{xLowerKey:t,xUpperKey:i,yLowerKey:s,yUpperKey:n,xLowerName:a=t,xUpperName:r=i,yLowerName:o=s,yUpperName:l=n}=this.properties;return{xLowerKey:t,xLowerName:a,xUpperKey:i,xUpperName:r,yLowerKey:s,yLowerName:o,yUpperKey:n,yUpperName:l}}onToggleSeriesItem(t){this.groupNode.visible=t.enabled}makeStyle(t){return{visible:t.visible,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,cap:VR(this.properties.cap,t)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(t,i,s){const n=this.getNodeData();if(n!==void 0){for(let a=0;a<n.length;a++)if(t===n[a]){this.selection.nodes()[a].update(i,this.properties,s);break}}}onHighlightChange(t){const{previousHighlight:i,currentHighlight:s}=t;s?.series===this.cartesianSeries&&this.restyleHighlightChange(s,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new wR}getWhiskerProperties(){const{stroke:t,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}=this.properties;return{stroke:t,strokeWidth:i,visible:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}}},YR=(Y(),W(V)),HR={series:{errorBar:{visible:!0,stroke:YR._Theme.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},KR={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:OR.AgErrorBarSupportedSeriesTypes,instanceConstructor:WR,themeTemplate:HR},ep=(Y(),W(V)),Yk=(Y(),W(V)),ip=(Y(),W(V)),{Validate:jy,BOOLEAN:jR,POSITIVE_NUMBER:Hk,Layers:Xy,ActionOnSet:Kk,CategoryAxis:XR,GroupedCategoryAxis:$R}=ip._ModuleSupport,{toRadians:qR,Padding:ZR,Logger:jk}=ip._Util,{Text:QR,Group:sp,BBox:Xk}=ip._Scene,$y=class{constructor(){this.top=0,this.bottom=0}};k([jy(Hk)],$y.prototype,"top",2),k([jy(Hk)],$y.prototype,"bottom",2);var np=class extends ip._ModuleSupport.BaseModuleInstance{constructor(){super(...arguments),this.enabled=!1,this.padding=new $y,this.root=new sp({name:"root"}),this.seriesRoot=this.root.appendChild(new sp({name:"Series-root",layer:!0,zIndex:Xy.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new sp({name:"Axes-Grids",layer:!0,zIndex:Xy.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new sp({name:"Axes-Grids",layer:!0,zIndex:Xy.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(e=>e.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(e,t){var i;const s=(i=t?.filter(n=>!e.includes(n)))!=null?i:[];this.destroySeries(s);for(const n of e){if(t?.includes(n))continue;n.rootGroup.parent==null&&this.seriesRoot.appendChild(n.rootGroup);const a=this;n.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return a.seriesRect},placeLabels(){return new Map}},n.resetAnimation("initial")}}destroySeries(e){e?.forEach(t=>{t.destroy(),t.rootGroup!=null&&this.seriesRoot.removeChild(t.rootGroup),t.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)})}assignAxesToSeries(){const e={};this.axes.forEach(t=>{var i;const s=t.direction;((i=e[s])!=null?i:e[s]=[]).push(t)}),this.series.forEach(t=>{t.directions.forEach(i=>{const s=e[i];if(!s){jk.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const n=t.getKeys(i),a=this.findMatchingAxis(s,n);if(!a){jk.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`);return}t.axes[i]=a})})}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t){for(const s of t)if(i.keys.includes(s))return i}}}updateData(e){return Q(this,null,function*(){this.series.forEach(t=>t.setChartData(e.data))})}processData(e){return Q(this,null,function*(){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=this.series.map(i=>i.processData(e.dataController));yield Promise.all(t)})}computeAxisPadding(){const e=new ZR;return this.axes.forEach(t=>{var i;const{position:s,thickness:n=0,line:a,label:r}=t;if(s==null)return;let o;n>0?o=n:o=(a.enabled?a.width:0)+(r.enabled?((i=r.fontSize)!=null?i:0)*QR.defaultLineHeightRatio+r.padding:0),e[s]=Math.ceil(o)}),e}layout(e,t){return Q(this,null,function*(){const{padding:i}=this,s=this.seriesRect!=null,n=new Xk(0,0,e,t-(i.top+i.bottom));this.seriesRect=n,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new Xk(0,-i.top,e,t)));const a=r=>r instanceof XR||r instanceof $R?[0,n.height]:[n.height,0];this.axes.forEach(r=>{const{position:o="left"}=r;switch(o){case"top":case"bottom":r.range=[0,n.width],r.gridLength=n.height;break;case"right":case"left":r.range=a(r),r.gridLength=n.width;break}switch(o){case"top":case"left":r.translation.x=0,r.translation.y=0;break;case"bottom":r.translation.x=0,r.translation.y=t;break;case"right":r.translation.x=e,r.translation.y=0;break}r.gridPadding=0,r.calculateLayout(),r.updatePosition({rotation:qR(r.rotation),sideFlag:r.label.getSideFlag()}),r.update(void 0,s)}),yield Promise.all(this.series.map(r=>r.update({seriesRect:n})))})}};k([jy(jR)],np.prototype,"enabled",2),k([Kk({changeValue(e,t=[]){for(const i of t)e.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of e)t?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],np.prototype,"axes",2),k([Kk({changeValue(e,t){this.onSeriesChange(e,t)}})],np.prototype,"series",2);var{ObserveChanges:JR}=Yk._ModuleSupport,$k=class hx extends Yk._ModuleSupport.Navigator{constructor(){super(...arguments),this.miniChart=new np}updateData(t){return Q(this,null,function*(){yield this.miniChart.updateData(t)})}processData(t){return Q(this,null,function*(){yield this.miniChart.processData(t)})}performLayout(t){return Q(this,null,function*(){const{shrinkRect:i}=yield Bs(hx.prototype,this,"performLayout").call(this,t);if(this.enabled){const{top:s,bottom:n}=this.miniChart.computeAxisPadding();i.shrink(s+n,"bottom"),this.y-=n}return{shrinkRect:i}})}performCartesianLayout(t){return Q(this,null,function*(){yield Bs(hx.prototype,this,"performCartesianLayout").call(this,t),yield this.miniChart.layout(this.width,this.height)})}};k([JR((e,t,i)=>{i!=null&&e.rs.background.removeChild(i.root),t!=null&&e.rs.background.appendChild(t.root)})],$k.prototype,"miniChart",2);var tw=$k,qk,ew={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:tw,themeTemplate:bi(At({},ep._ModuleSupport.NavigatorModule.themeTemplate),{navigator:bi(At({},(qk=ep._ModuleSupport.NavigatorModule.themeTemplate)==null?void 0:qk.navigator),{miniChart:{enabled:!1,label:{color:ep._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:ep._Theme.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})},Zk=(Y(),W(V)),{BOOLEAN:qy,STRING:iw,UNION:sw,BaseProperties:nw,CartesianAxis:Qk,ChartUpdateType:Jk,isDate:aw,isFiniteNumber:ap,ObserveChanges:rh,Validate:oh}=Zk._ModuleSupport,{Logger:rw}=Zk._Util,zr=class extends nw{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(e,t=Jk.UPDATE_DATA){e.updateService.update(t,{skipSync:!0})}updateSiblings(e){const{syncManager:t}=this.moduleContext;for(const i of t.getGroupSiblings(e))this.updateChart(i)}enabledZoomSync(){const{syncManager:e,zoomManager:t}=this.moduleContext;this.disableZoomSync=t.addListener("zoom-change",()=>{var i;for(const s of e.getGroupSiblings(this.groupId))(i=s.modules.get("sync"))!=null&&i.zoom&&s.zoomManager.updateZoom(this.mergeZoom(s))})}enabledNodeInteractionSync(){const{highlightManager:e,syncManager:t}=this.moduleContext;this.disableNodeInteractionSync=e.addListener("highlight-change",i=>{var s,n;for(const a of t.getGroupSiblings(this.groupId))if((s=a.modules.get("sync"))!=null&&s.nodeInteraction){if(!((n=i.currentHighlight)!=null&&n.datum)){a.highlightManager.updateHighlight(a.id);continue}for(const r of a.axes){const o=this.axes==="xy"?"x":this.axes;if(!Qk.is(r)||r.direction!==o)continue;const l=a.series.map(c=>{const h=c.getKeys(r.direction);if(r.keys.length&&!r.keys.some(f=>h.includes(f)))return;const[{nodeData:u}]=c.contextNodeData;if(!u?.length)return;const d=u[0][`${r.direction}Key`];let p=i.currentHighlight.datum[d];const g=aw(p);return g&&(p=p.getTime()),u.find(f=>{const m=f.datum[d];return g?m.getTime()===p:m===p})}).filter(Boolean);l.length<2&&l[0]!==a.highlightManager.getActiveHighlight()&&(a.highlightManager.updateHighlight(a.id,l[0]),this.updateChart(a,Jk.SERIES_UPDATE))}}})}syncAxes(e=!1){const{syncManager:t}=this.moduleContext,i=t.getChart(),s=t.getGroup(this.groupId).flatMap(a=>a.series),n=t.getGroupSiblings(this.groupId).flatMap(a=>a.axes);i.axes.forEach(a=>{if(!Qk.is(a)||this.axes!=="xy"&&this.axes!==a.direction)return;const{direction:r,min:o,max:l,nice:c,reverse:h}=a;for(const u of n)if(r===u.direction&&(c!==u.nice||h!==u.reverse||o!==u.min&&(ap(o)||ap(u.min))||l!==u.max&&(ap(l)||ap(u.max)))){rw.warnOnce("For axes sync, ensure matching `min`, `max`, `nice`, and `reverse` properties.");return}a.boundSeries=s.filter(u=>{const d=u.getKeys(a.direction);return a.keys.length?a.keys.some(p=>d.includes(p)):!0})}),e||setTimeout(()=>this.updateSiblings(this.groupId))}mergeZoom(e){var t,i;const{zoomManager:s}=this.moduleContext;if(this.axes==="xy")return s.getZoom();const n=(t=e.zoomManager.getZoom())!=null?t:{};return n[this.axes]=(i=s.getZoom())==null?void 0:i[this.axes],n}onEnabledChange(){const{syncManager:e}=this.moduleContext;this.enabled?e.subscribe(this.groupId):e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){var e;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():(e=this.disableNodeInteractionSync)==null||e.call(this)}onZoomChange(){var e;this.enabled&&this.zoom?this.enabledZoomSync():(e=this.disableZoomSync)==null||e.call(this)}destroy(){var e;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),(e=this.disableZoomSync)==null||e.call(this)}};zr.className="Sync",k([oh(qy),rh(e=>e.onEnabledChange())],zr.prototype,"enabled",2),k([oh(iw,{optional:!0}),rh((e,t,i)=>e.onGroupIdChange(t,i))],zr.prototype,"groupId",2),k([oh(sw(["x","y","xy"],"an axis")),rh(e=>e.onAxesChange())],zr.prototype,"axes",2),k([oh(qy),rh(e=>e.onNodeInteractionChange())],zr.prototype,"nodeInteraction",2),k([oh(qy),rh(e=>e.onZoomChange())],zr.prototype,"zoom",2);var ow={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:zr,themeTemplate:{sync:{enabled:!1}}},Gr=(Y(),W(V)),tD=(Y(),W(V)),{COLOR_STRING:lw,RATIO:cw,Validate:eD}=tD._ModuleSupport,rp=class extends tD._Scene.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};rp.className="ZoomRect",k([eD(lw)],rp.prototype,"fill",2),k([eD(cw)],rp.prototype,"fillOpacity",2);var Zy=(Y(),W(V)),hw=(Y(),W(V)),{clamp:uw}=hw._ModuleSupport,Jt={min:0,max:1},op=(e,t=Jt.min,i=Jt.max)=>uw(t,e,i);function iD(){return{x:At({},Jt),y:At({},Jt)}}function Ge(e){var t,i,s,n,a,r,o,l;return{x:{min:(i=(t=e?.x)==null?void 0:t.min)!=null?i:Jt.min,max:(n=(s=e?.x)==null?void 0:s.max)!=null?n:Jt.max},y:{min:(r=(a=e?.y)==null?void 0:a.min)!=null?r:Jt.min,max:(l=(o=e?.y)==null?void 0:o.max)!=null?l:Jt.max}}}function Ra(e,t,i){if(!e)return{x:0,y:0};const s=op(t-e.x,0,e.x+e.width),n=op(i-e.y,0,e.y+e.height),a=1/e.width*s,r=1-1/e.height*n;return{x:op(a),y:op(r)}}function lp(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function dw(e,t,i){const s=e.x.max-e.x.min,n=e.y.max-e.y.min;return{x:{min:e.x.min,max:e.x.min+s*t},y:{min:e.y.min,max:e.y.min+n*i}}}function sD(e,t,i){const s=e.x.max-e.x.min,n=e.y.max-e.y.min,a=e.x.min+s/2,r=e.y.min+n/2;return{x:{min:a-s*t/2,max:a+s*t/2},y:{min:r-n*i/2,max:r+n*i/2}}}function cp(e,t,i,s){const{min:n,max:a}=t,r=n+(a-n)/2,o=e.max-e.min;switch(i){case"start":return{min:n,max:t.min+o};case"end":return{min:t.max-o,max:a};case"middle":return{min:r-o/2,max:r+o/2};case"pointer":return lh(e,t,s??r);default:return{min:n,max:a}}}function lh(e,t,i){const s=i*(1-(t.max-t.min-(e.max-e.min))),n=i-s,a=e.min+n,r=e.max+n;return{min:a,max:r}}function pw(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}function Hn(e){const t=iD();return t.x=nD(e.x),t.y=nD(e.y),t}function nD(e){const t=e.max-e.min;let i=e.max>Jt.max?Jt.max-t:e.min,s=e.min<Jt.min?t:e.max;return i=Math.max(Jt.min,i),s=Math.min(Jt.max,s),{min:i,max:s}}var gw=class{constructor(){this.isAxisDragging=!1}update(e,t,i,s,n,a){var r;return this.isAxisDragging=!0,(r=this.oldZoom)!=null||(this.oldZoom=Ge(t===Zy._ModuleSupport.ChartAxisDirection.X?bi(At({},n),{x:a}):bi(At({},n),{y:a}))),this.updateCoords(e.offsetX,e.offsetY),this.updateZoom(t,i,s)}stop(){this.isAxisDragging=!1,this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:s,oldZoom:n}=this;let a=Ge(n);if(!s||!n)return e===Zy._ModuleSupport.ChartAxisDirection.X?a.x:a.y;const r=Ra(i,s.x1,s.y1),o=Ra(i,s.x2,s.y2);if(e===Zy._ModuleSupport.ChartAxisDirection.X){const c=(o.x-r.x)*(n.x.max-n.x.min);return a.x.max+=c,a.x=cp(a.x,n.x,t,r.x),a=Hn(a),a.x}const l=(o.y-r.y)*(n.y.max-n.y.min);return a.y.max-=l,a.y=cp(a.y,n.y,t,r.y),a=Hn(a),a.y}},aD=(Y(),W(V)),fw=class{constructor(){this.isPanning=!1,this.hscrollCoords={x1:0,x2:0,y1:0,y2:0}}updateDrag(e,t,i){this.isPanning=!0;const{offsetX:s,offsetY:n}=e;return this.dragCoords?(this.dragCoords.x1=this.dragCoords.x2,this.dragCoords.y1=this.dragCoords.y2,this.dragCoords.x2=s,this.dragCoords.y2=n):this.dragCoords={x1:s,y1:n,x2:s,y2:n},this.translateZooms(t,i,this.dragCoords)}updateHScroll(e,t,i){return this.isPanning=!0,this.hscrollCoords.x1=e*5,this.translateZooms(t,i,this.hscrollCoords)}stop(){this.isPanning=!1,this.dragCoords=void 0}translateZooms(e,t,i){const{x1:s,y1:n,x2:a,y2:r}=i,o=s<=a?a-s:s-a,l=n<=r?r-n:n-r,c=Ra(e,e.x+o,e.y+e.height-l),h=s<=a?-c.x:c.x,u=n<=r?c.y:-c.y,d={};for(const[p,{direction:g,zoom:f}]of Object.entries(t)){let m;g===aD._ModuleSupport.ChartAxisDirection.X?m=Ge({x:f}):m=Ge({y:f});const v=m.x.max-m.x.min,y=m.y.max-m.y.min;m=Hn(lp(m,h*v,u*y)),g===aD._ModuleSupport.ChartAxisDirection.X?d[p]={direction:g,zoom:m.x}:d[p]={direction:g,zoom:m.y}}return d}},mw=class{update(e,t,i,s,n,a,r,o){const l=Ge(o),c=e.sourceEvent,h=e.deltaY;let u=Ge(l);return u.x.max+=n?t*h*(l.x.max-l.x.min):0,u.y.max+=a?t*h*(l.y.max-l.y.min):0,i==="pointer"&&n||s==="pointer"&&a?u=this.scaleZoomToPointer(c,n,a,r,l,u):(n&&(u.x=cp(u.x,l.x,i)),a&&(u.y=cp(u.y,l.y,s))),u=Hn(u),u}scaleZoomToPointer(e,t,i,s,n,a){var r,o;const l=Ra(s,(r=e.offsetX)!=null?r:e.clientX,(o=e.offsetY)!=null?o:e.clientY);return a.x=t?lh(a.x,n.x,l.x):a.x,a.y=i?lh(a.y,n.y,l.y):a.y,a}},yw=class{constructor(e){this.rect=e,this.rect.visible=!1}update(e,t,i,s,n,a,r){this.rect.visible=!0,this.updateCoords(e.offsetX,e.offsetY,t,i,s,n,a,r),this.updateRect(a)}stop(e,t,i){let s=Ge();if(!e||!t)return s;this.coords&&(s=this.createZoomFromCoords(t,i));const n=t.width/e.width,a=t.height/e.height;return s=Hn(pw(s,n,a)),this.reset(),s}reset(){this.coords=void 0,this.rect.visible=!1}updateCoords(e,t,i,s,n,a,r,o){if(!this.coords){this.coords={x1:e,y1:t,x2:e,y2:t};return}if(this.coords.x2=e,this.coords.y2=t,!r)return;const l=Ge(o),c=this.getNormalisedDimensions(),h=r.width/r.height,u=l.x.max-l.x.min,d=l.y.max-l.y.min,p=i/u,g=s/d;c.width/r.width<p&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-r.width*p:this.coords.x2=this.coords.x1+r.width*p),a&&!n?c.height/r.height<g&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-r.width*p:this.coords.y2=this.coords.y1+r.height*g):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-c.width/h,this.coords.y1-r.height*g):this.coords.y2=Math.max(this.coords.y1+c.width/h,this.coords.y1+r.height*g),n||(this.coords.x1=r.x,this.coords.x2=r.x+r.width),a||(this.coords.y1=r.y,this.coords.y2=r.y+r.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:s,height:n}=i;let{x:a,y:r}=i;a=Math.max(a,e.x),a-=Math.max(0,a+s-(e.x+e.width)),r=Math.max(r,e.y),r-=Math.max(0,r+n-(e.y+e.height)),t.x=a,t.y=r,t.width=s,t.height=n}createZoomFromCoords(e,t){const i=Ge(t),s=this.getNormalisedDimensions(),n=Ra(e,s.x,s.y+s.height),a=s.width/e.width,r=s.height/e.height;let o=dw(i,a,r);const l=n.x*(i.x.max-i.x.min),c=n.y*(i.y.max-i.y.min);return o=lp(o,l,c),o=Hn(o),o}getNormalisedDimensions(){var e;const{x1:t=0,y1:i=0,x2:s=0,y2:n=0}=(e=this.coords)!=null?e:{},a=t<=s?t:s,r=i<=n?i:n,o=t<=s?s-t:t-s,l=i<=n?n-i:i-n;return{x:a,y:r,width:o,height:l}}},{BOOLEAN:cl,NUMBER:rD,RATIO:vw,UNION:Qy,ActionOnSet:xw,ChartAxisDirection:hp,ChartUpdateType:bw,Validate:ji,round:Sw}=Gr._ModuleSupport,oD=Qy(["pointer","start","middle","end"],"an anchor cord"),up="zoom-action",dp="pan-action",pp="zoom-cursor",lD="zoom-tooltip",_w=3,Vr=e=>Sw(e,_w),Oi=class extends Gr._ModuleSupport.BaseModuleInstance{constructor(e){var t;super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(Jt.max-Jt.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX="end",this.anchorPointY="middle",this.axisDragger=new gw,this.panner=new fw,this.scroller=new mw,this.isDragging=!1,this.minRatioX=0,this.minRatioY=0,this.enableSecondaryAxis=!1,this.scene=e.scene,this.cursorManager=e.cursorManager,this.highlightManager=e.highlightManager,this.tooltipManager=e.tooltipManager,this.zoomManager=e.zoomManager,this.dataService=e.dataService,this.updateService=e.updateService,this.contextMenuRegistry=e.contextMenuRegistry;const{Default:i,ZoomDrag:s,Animation:n}=Gr._ModuleSupport.InteractionState,a=i|n|s,r=i|n;this.destroyFns.push(e.interactionManager.addListener("dblclick",l=>this.onDoubleClick(l),r),e.interactionManager.addListener("drag",l=>this.onDrag(l),a),e.interactionManager.addListener("drag-start",l=>this.onDragStart(l),a),e.interactionManager.addListener("drag-end",()=>this.onDragEnd(),a),e.interactionManager.addListener("wheel",l=>this.onWheel(l),r),e.interactionManager.addListener("hover",()=>this.onHover(),r),e.chartEventManager.addListener("axis-hover",l=>this.onAxisHover(l)),e.gestureDetector.addListener("pinch-move",l=>this.onPinchMove(l)),e.layoutService.addListener("layout-complete",l=>this.onLayoutComplete(l)),e.updateService.addListener("update-complete",l=>this.onUpdateComplete(l)));const o=new rp;this.selector=new yw(o),(t=this.scene.root)==null||t.appendChild(o),this.destroyFns.push(()=>{var l;return(l=this.scene.root)==null?void 0:l.removeChild(o)})}registerContextMenuActions(){this.contextMenuRegistry.registerDefaultAction({id:up,label:"Zoom to here",action:t=>this.onContextMenuZoomToHere(t)}),this.contextMenuRegistry.registerDefaultAction({id:dp,label:"Pan to here",action:t=>this.onContextMenuPanToHere(t)});const e=Ge(this.zoomManager.getZoom());this.toggleContextMenuActions(e)}toggleContextMenuActions(e){this.isMinZoom(e)?this.contextMenuRegistry.disableAction(up):this.contextMenuRegistry.enableAction(up),this.isMaxZoom(e)?this.contextMenuRegistry.disableAction(dp):this.contextMenuRegistry.enableAction(dp)}onDoubleClick(e){var t;if(!(!this.enabled||!this.enableDoubleClickToReset))if(this.hoveredAxis){const{id:i,direction:s}=this.hoveredAxis;this.updateAxisZoom(i,s,At({},Jt))}else(t=this.paddedRect)!=null&&t.containsPoint(e.offsetX,e.offsetY)&&this.highlightManager.getActivePicked()===void 0&&this.updateZoom(iD())}onDragStart(e){var t;this.canDragSelection=(t=this.paddedRect)==null?void 0:t.containsPoint(e.offsetX,e.offsetY)}onDrag(e){if(!this.enabled||!this.paddedRect||!this.seriesRect)return;this.ctx.interactionManager.pushState(Gr._ModuleSupport.InteractionState.ZoomDrag);const t=e.sourceEvent;if(!(t.button===0))return;this.isDragging=!0,this.tooltipManager.updateTooltip(lD);const s=Ge(this.zoomManager.getZoom());if(this.enableAxisDragging&&this.hoveredAxis){const{id:n,direction:a}=this.hoveredAxis,r=a===Gr._ModuleSupport.ChartAxisDirection.X?this.anchorPointX:this.anchorPointY,o=this.zoomManager.getAxisZoom(n),l=this.axisDragger.update(e,a,r,this.seriesRect,s,o);this.updateAxisZoom(n,a,l);return}if(this.paddedRect.containsPoint(e.offsetX,e.offsetY)){if(this.enablePanning&&(!this.enableSelecting||this.isPanningKeyPressed(t))){const n=this.panner.updateDrag(e,this.seriesRect,this.zoomManager.getAxisZooms());for(const[a,{direction:r,zoom:o}]of Object.entries(n))this.updateAxisZoom(a,r,o);this.cursorManager.updateCursor(pp,"grabbing");return}!this.enableSelecting||!this.canDragSelection||this.isPanningKeyPressed(t)||this.panner.isPanning||this.isMinZoom(s)||(this.selector.update(e,this.minRatioX,this.minRatioY,this.isScalingX(),this.isScalingY(),this.paddedRect,s),this.updateService.update(bw.PERFORM_LAYOUT,{skipAnimations:!0}))}}onDragEnd(){if(this.ctx.interactionManager.popState(Gr._ModuleSupport.InteractionState.ZoomDrag),!this.enabled||!this.isDragging)return;const e=Ge(this.zoomManager.getZoom());if(this.cursorManager.updateCursor(pp),this.enableAxisDragging&&this.axisDragger.isAxisDragging)this.axisDragger.stop();else if(this.enablePanning&&this.panner.isPanning)this.panner.stop();else if(this.enableSelecting&&!this.isMinZoom(e)&&this.canDragSelection){const t=this.selector.stop(this.seriesRect,this.paddedRect,e);this.updateZoom(t)}this.isDragging=!1,this.tooltipManager.removeTooltip(lD)}onWheel(e){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),i=this.paddedRect.containsPoint(e.offsetX,e.offsetY),s=this.enableAxisDragging&&this.hoveredAxis!=null;let n=this.isScalingX(),a=this.isScalingY();s&&(n=this.hoveredAxis.direction===Gr._ModuleSupport.ChartAxisDirection.X,a=!n);const r=e.sourceEvent,{deltaX:o,deltaY:l}=r;if(this.enablePanning&&o!==void 0&&l!==void 0&&Math.abs(o)>Math.abs(l)){e.consume(),e.sourceEvent.preventDefault();const c=this.panner.updateHScroll(e.deltaX,this.seriesRect,this.zoomManager.getAxisZooms());for(const[h,{direction:u,zoom:d}]of Object.entries(c))this.updateAxisZoom(h,u,d);return}if(i||s){e.consume(),e.sourceEvent.preventDefault();const c=this.scroller.update(e,this.scrollingStep,this.getAnchorPointX(),this.getAnchorPointY(),n,a,this.seriesRect,t);this.updateZoom(c)}}onHover(){this.enabled&&(this.hoveredAxis=void 0,this.cursorManager.updateCursor(pp))}onAxisHover(e){this.enabled&&(this.hoveredAxis={id:e.axisId,direction:e.direction},this.enableAxisDragging&&this.cursorManager.updateCursor(pp,e.direction===hp.X?"ew-resize":"ns-resize"))}onPinchMove(e){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),i=Ge(t),s=Ge(t),n=e.deltaDistance*-.01,a=Ra(this.seriesRect,e.origin.x,e.origin.y);this.isScalingX()&&(s.x.max+=n*(i.x.max-i.x.min),s.x=lh(s.x,i.x,a.x)),this.isScalingY()&&(s.y.max+=n*(i.y.max-i.y.min),s.y=lh(s.y,i.y,a.y)),this.updateZoom(Hn(s))}onLayoutComplete(e){if(!this.enabled)return;const{series:{rect:t,paddedRect:i,shouldFlipXY:s}}=e;this.seriesRect=t,this.paddedRect=i,this.shouldFlipXY=s}onUpdateComplete({minRect:e}){if(!this.enabled||!this.paddedRect||!e)return;if(this.dataService.isLazy()){this.minRatioX=0,this.minRatioY=0;return}const t=Ge(this.zoomManager.getZoom()),i=this.shouldFlipXY?this.minVisibleItemsY:this.minVisibleItemsX,s=this.shouldFlipXY?this.minVisibleItemsX:this.minVisibleItemsY,n=e.width*i/this.paddedRect.width,a=e.height*s/this.paddedRect.height,r=n*(t.x.max-t.x.min),o=a*(t.y.max-t.y.min);this.isScalingX()&&(this.minRatioX=Math.min(1,Vr(r))),this.isScalingY()&&(this.minRatioY=Math.min(1,Vr(o))),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onContextMenuZoomToHere({event:e}){if(!this.enabled||!this.paddedRect||!e||!e.target)return;const t=Ge(this.zoomManager.getZoom()),i=Ra(this.paddedRect,e.clientX,e.clientY),s=i.x*(t.x.max-t.x.min),n=i.y*(t.y.max-t.y.min),a=Jt.max-Jt.min,r=a/2;let o={x:{min:i.x-r,max:i.x+r},y:{min:i.y-r,max:i.y+r}};o=sD(o,this.isScalingX()?this.minRatioX:a,this.isScalingY()?this.minRatioY:a),o=lp(o,t.x.min-i.x+s,t.y.min-i.y+n),this.updateZoom(Hn(o))}onContextMenuPanToHere({event:e}){if(!this.enabled||!this.paddedRect||!e||!e.target)return;const t=Ge(this.zoomManager.getZoom()),i=Ra(this.paddedRect,e.clientX,e.clientY),s=t.x.max-t.x.min,n=t.y.max-t.y.min,a=i.x*s,r=i.y*n,o=(Jt.max-Jt.min)/2;let l={x:{min:i.x-o,max:i.x+o},y:{min:i.y-o,max:i.y+o}};l=sD(l,s,n),l=lp(l,t.x.min-i.x+a,t.y.min-i.y+r),this.updateZoom(Hn(l))}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(e){const t=this.enableScrolling?(e.x.max-e.x.min)*(1-this.scrollingStep):Vr(e.x.max-e.x.min),i=this.enableScrolling?(e.y.max-e.y.min)*(1-this.scrollingStep):Vr(e.y.max-e.y.min),s=!this.isScalingX()||t<=this.minRatioX,n=!this.isScalingY()||i<=this.minRatioX;return s&&n}isMaxZoom(e){return e.x.min===Jt.min&&e.x.max===Jt.max&&e.y.min===Jt.min&&e.y.max===Jt.max}updateZoom(e){const t=Vr(e.x.max-e.x.min),i=Vr(e.y.max-e.y.min);if(t<this.minRatioX||i<this.minRatioY){this.contextMenuRegistry.disableAction(up),this.contextMenuRegistry.enableAction(dp);return}this.toggleContextMenuActions(e),this.zoomManager.updateZoom(e)}updateAxisZoom(e,t,i){if(!i)return;if(!this.enableSecondaryAxis){const n=Ge(this.zoomManager.getZoom());t===hp.X?n.x=i:n.y=i,this.updateZoom(n);return}const s=Vr(i.max-i.min);t===hp.X&&s<this.minRatioX||t===hp.Y&&s<this.minRatioY||this.zoomManager.updateAxisZoom(e,i)}};k([xw({newValue(e){e&&this.registerContextMenuActions()}}),ji(cl)],Oi.prototype,"enabled",2),k([ji(cl)],Oi.prototype,"enableAxisDragging",2),k([ji(cl)],Oi.prototype,"enableDoubleClickToReset",2),k([ji(cl)],Oi.prototype,"enablePanning",2),k([ji(cl)],Oi.prototype,"enableScrolling",2),k([ji(cl)],Oi.prototype,"enableSelecting",2),k([ji(Qy(["alt","ctrl","meta","shift"],"a pan key"))],Oi.prototype,"panKey",2),k([ji(Qy(["x","y","xy"],"an axis"))],Oi.prototype,"axes",2),k([ji(vw)],Oi.prototype,"scrollingStep",2),k([ji(rD.restrict({min:1}))],Oi.prototype,"minVisibleItemsX",2),k([ji(rD.restrict({min:1}))],Oi.prototype,"minVisibleItemsY",2),k([ji(oD)],Oi.prototype,"anchorPointX",2),k([ji(oD)],Oi.prototype,"anchorPointY",2);var Mw={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Oi,themeTemplate:{zoom:{enabled:!1}}},hl=(Y(),W(V)),{BOOLEAN:cD,Layers:kw,POSITION:Dw,Validate:Ur,Default:Aw,MIN_SPACING:Lw,POSITIVE_NUMBER:Jy,ProxyProperty:fs,DeprecatedAndRenamedTo:Tw}=hl._ModuleSupport,{BBox:Iw,Group:tv,Rect:Ew,LinearGradientFill:Cw,Triangle:Ow}=hl._Scene,{createId:Nw,Logger:Rw}=hl._Util,ev=class{constructor(){this.thickness=16,this.preferredLength=100}};k([Ur(Jy)],ev.prototype,"thickness",2),k([Ur(Jy)],ev.prototype,"preferredLength",2);var hD=class extends hl._ModuleSupport.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.maxSpacing=NaN}};k([Ur(Lw),Aw(NaN)],hD.prototype,"maxSpacing",2);var ww=class extends hl._ModuleSupport.CartesianAxis{constructor(e){super(e,new hl._Scale.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}formatDatum(e){return typeof e=="number"?e.toFixed(2):(Rw.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))}createTick(){return new hD}},wa=class{constructor(e){this.label=e}};k([fs("label.fontStyle")],wa.prototype,"fontStyle",2),k([fs("label.fontWeight")],wa.prototype,"fontWeight",2),k([fs("label.fontSize")],wa.prototype,"fontSize",2),k([fs("label.fontFamily")],wa.prototype,"fontFamily",2),k([fs("label.color")],wa.prototype,"color",2),k([fs("label.format")],wa.prototype,"format",2),k([fs("label.formatter")],wa.prototype,"formatter",2);var ch=class{constructor(e){this.tick=e}};k([fs("tick.values")],ch.prototype,"values",2),k([fs("tick.minSpacing")],ch.prototype,"minSpacing",2),k([fs("tick.maxSpacing")],ch.prototype,"maxSpacing",2),k([fs("tick.interval")],ch.prototype,"step",2);var uD=class{constructor(e){this.axis=e,this.label=new wa(e.label),this.interval=new ch(e.tick)}};k([fs("axis.seriesAreaPadding")],uD.prototype,"padding",2);var Wr=class{constructor(e){this.ctx=e,this.id=Nw(this),this.group=new tv({name:"legend",layer:!0,zIndex:kw.LEGEND_ZINDEX}),this.gradient=new ev,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=e.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",t=>this.update(t.shrinkRect))),this.highlightManager=e.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange())),this.gradientRect=new Ew,this.gradientFill=new Cw,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Ow,this.group.append(this.arrow),this.axisGridGroup=new tv({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new tv({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new ww(e),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new uD(this.axis),this.stop=this.scale,this.destroyFns.push(()=>this.detachLegend())}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(e=>e())}attachLegend(e){e.append(this.group)}detachLegend(){var e;(e=this.group.parent)==null||e.removeChild(this.group)}update(e){const t=this.data[0];if(!this.enabled||!t||!t.enabled)return this.group.visible=!1,{shrinkRect:e.clone()};const{colorRange:i}=this.normalizeColorArrays(t),s=this.updateGradientRect(e,i),n=this.updateAxis(t,s),{newShrinkRect:a,translateX:r,translateY:o}=this.getMeasurements(e,s,n);return this.updateArrow(s),this.group.visible=!0,this.group.translationX=r,this.group.translationY=o,this.latestGradientBox=s,{shrinkRect:a}}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const s=i.length;return t=i.map((n,a)=>{const[r,o]=t;return a===0?r:a===s-1?o:r+(o-r)*a/(s-1)}),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{preferredLength:i,thickness:s}=this.gradient,n=new Iw(0,0,0,0),a=this.getOrientation()==="vertical";if(a){const r=e.height,o=i;n.x=0,n.y=0,n.width=s,n.height=Math.min(r,o)}else{const r=e.width,o=i;n.x=0,n.y=0,n.width=Math.min(r,o),n.height=s}return this.reverseOrder&&(t=t.slice().reverse()),this.gradientFill.stops=t,this.gradientFill.direction=a?"to-bottom":"to-right",this.gradientRect.x=n.x,this.gradientRect.y=n.y,this.gradientRect.width=n.width,this.gradientRect.height=n.height,n}updateAxis(e,t){const{reverseOrder:i,axis:s}=this,n=this.getOrientation()==="vertical";s.position=n?"right":"bottom",s.colorDomain=i?e.colorDomain.slice().reverse():e.colorDomain,s.calculateDomain(),s.range=n?[0,t.height]:[0,t.width],s.gridLength=0,s.translation.x=t.x+(n?t.width:0),s.translation.y=t.y+(n?0:t.height);const a=s.calculateLayout().bbox;return s.update(),a}updateArrow(e){var t;const{arrow:i,axis:{label:s,scale:n}}=this,a=this.highlightManager.getActiveHighlight(),r=a?.colorValue;if(a==null||r==null){i.visible=!1;return}const o=this.getOrientation()==="vertical",l=(t=s.fontSize)!=null?t:0,c=n.convert(r);let h,u,d;o?(h=e.x-l/2,u=e.y+c,d=Math.PI/2):(h=e.x+c,u=e.y-l/2,d=Math.PI),i.fill=s.color,i.size=l,i.translationX=h,i.translationY=u,i.rotation=d,i.visible=!0}getMeasurements(e,t,i){let s,n;this.getOrientation()==="vertical"?(s=t.width+i.width,n=t.height):(s=t.width,n=t.height+i.height);const{spacing:r}=this,o=e.clone();let l,c;return this.position==="left"?(l=e.x,c=e.y+e.height/2-n/2,o.shrink(s+r,"left")):this.position==="right"?(l=e.x+e.width-s,c=e.y+e.height/2-n/2,o.shrink(s+r,"right")):this.position==="top"?(l=e.x+e.width/2-s/2,c=e.y,o.shrink(n+r,"top")):(l=e.x+e.width/2-s/2,c=e.y+e.height-n,o.shrink(n+r,"bottom")),{translateX:l,translateY:c,gradientBox:t,newShrinkRect:o}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&this.latestGradientBox!=null&&this.updateArrow(this.latestGradientBox)}};Wr.className="GradientLegend",k([Ur(cD)],Wr.prototype,"enabled",2),k([Ur(Dw)],Wr.prototype,"position",2),k([Ur(cD,{optional:!0})],Wr.prototype,"reverseOrder",2),k([Ur(Jy)],Wr.prototype,"spacing",2),k([Tw("scale")],Wr.prototype,"stop",2);var dD=(Y(),W(V)),Pw="bottom",Bw={position:Pw,spacing:20,scale:{padding:8,label:{color:dD._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:dD._Theme.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},Fw={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient",instanceConstructor:Wr,themeTemplate:Bw},zw=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,t){let i=e[0],s=e[1],n=e[2],a=e[3];i=this.ff(i,s,n,a,t[0],7,-680876936),a=this.ff(a,i,s,n,t[1],12,-389564586),n=this.ff(n,a,i,s,t[2],17,606105819),s=this.ff(s,n,a,i,t[3],22,-1044525330),i=this.ff(i,s,n,a,t[4],7,-176418897),a=this.ff(a,i,s,n,t[5],12,1200080426),n=this.ff(n,a,i,s,t[6],17,-1473231341),s=this.ff(s,n,a,i,t[7],22,-45705983),i=this.ff(i,s,n,a,t[8],7,1770035416),a=this.ff(a,i,s,n,t[9],12,-1958414417),n=this.ff(n,a,i,s,t[10],17,-42063),s=this.ff(s,n,a,i,t[11],22,-1990404162),i=this.ff(i,s,n,a,t[12],7,1804603682),a=this.ff(a,i,s,n,t[13],12,-40341101),n=this.ff(n,a,i,s,t[14],17,-1502002290),s=this.ff(s,n,a,i,t[15],22,1236535329),i=this.gg(i,s,n,a,t[1],5,-165796510),a=this.gg(a,i,s,n,t[6],9,-1069501632),n=this.gg(n,a,i,s,t[11],14,643717713),s=this.gg(s,n,a,i,t[0],20,-373897302),i=this.gg(i,s,n,a,t[5],5,-701558691),a=this.gg(a,i,s,n,t[10],9,38016083),n=this.gg(n,a,i,s,t[15],14,-660478335),s=this.gg(s,n,a,i,t[4],20,-405537848),i=this.gg(i,s,n,a,t[9],5,568446438),a=this.gg(a,i,s,n,t[14],9,-1019803690),n=this.gg(n,a,i,s,t[3],14,-187363961),s=this.gg(s,n,a,i,t[8],20,1163531501),i=this.gg(i,s,n,a,t[13],5,-1444681467),a=this.gg(a,i,s,n,t[2],9,-51403784),n=this.gg(n,a,i,s,t[7],14,1735328473),s=this.gg(s,n,a,i,t[12],20,-1926607734),i=this.hh(i,s,n,a,t[5],4,-378558),a=this.hh(a,i,s,n,t[8],11,-2022574463),n=this.hh(n,a,i,s,t[11],16,1839030562),s=this.hh(s,n,a,i,t[14],23,-35309556),i=this.hh(i,s,n,a,t[1],4,-1530992060),a=this.hh(a,i,s,n,t[4],11,1272893353),n=this.hh(n,a,i,s,t[7],16,-155497632),s=this.hh(s,n,a,i,t[10],23,-1094730640),i=this.hh(i,s,n,a,t[13],4,681279174),a=this.hh(a,i,s,n,t[0],11,-358537222),n=this.hh(n,a,i,s,t[3],16,-722521979),s=this.hh(s,n,a,i,t[6],23,76029189),i=this.hh(i,s,n,a,t[9],4,-640364487),a=this.hh(a,i,s,n,t[12],11,-421815835),n=this.hh(n,a,i,s,t[15],16,530742520),s=this.hh(s,n,a,i,t[2],23,-995338651),i=this.ii(i,s,n,a,t[0],6,-198630844),a=this.ii(a,i,s,n,t[7],10,1126891415),n=this.ii(n,a,i,s,t[14],15,-1416354905),s=this.ii(s,n,a,i,t[5],21,-57434055),i=this.ii(i,s,n,a,t[12],6,1700485571),a=this.ii(a,i,s,n,t[3],10,-1894986606),n=this.ii(n,a,i,s,t[10],15,-1051523),s=this.ii(s,n,a,i,t[1],21,-2054922799),i=this.ii(i,s,n,a,t[8],6,1873313359),a=this.ii(a,i,s,n,t[15],10,-30611744),n=this.ii(n,a,i,s,t[6],15,-1560198380),s=this.ii(s,n,a,i,t[13],21,1309151649),i=this.ii(i,s,n,a,t[4],6,-145523070),a=this.ii(a,i,s,n,t[11],10,-1120210379),n=this.ii(n,a,i,s,t[2],15,718787259),s=this.ii(s,n,a,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(s,e[1]),e[2]=this.add32(n,e[2]),e[3]=this.add32(a,e[3])}cmn(e,t,i,s,n,a){return t=this.add32(this.add32(t,e),this.add32(s,a)),this.add32(t<<n|t>>>32-n,i)}ff(e,t,i,s,n,a,r){return this.cmn(t&i|~t&s,e,t,n,a,r)}gg(e,t,i,s,n,a,r){return this.cmn(t&s|i&~s,e,t,n,a,r)}hh(e,t,i,s,n,a,r){return this.cmn(t^i^s,e,t,n,a,r)}ii(e,t,i,s,n,a,r){return this.cmn(i^(t|~s),e,t,n,a,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=e.length;s+=64)this.md5cycle(i,this.md5blk(e.substring(s-64,s)));e=e.substring(s-64);const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<e.length;s++)n[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,n),s=0;s<16;s++)n[s]=0;return n[14]=t*8,this.md5cycle(i,n),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=t[e>>s*8+4&15]+t[e>>s*8&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}};function iv(e){return e==null||e.length===0}var gp={"01":"GRID","02":"CHARTS","0102":"BOTH"},pD=class bs{constructor(t){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new zw,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(this.licenseKey,this.gridContext),i=`AG ${t.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`,s=t.suppliedLicenseType===void 0?"":`AG ${t.suppliedLicenseType==="BOTH"?"Grid and AG Charts":t.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(t.expired){const n=bs.getChartsReleaseDate(),a=bs.formatDate(n);this.outputExpiredKey(t.expiry,a,s)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,s):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,s)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(bs.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const s=i.length-32,n=i.substring(s),a=i.substring(0,s),[r,o,l]=bs.extractBracketedInformation(i);return{md5:n,license:a,version:r,isTrial:o,type:l}}getLicenseDetails(t,i=!1){const s="CHARTS";if(iv(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:s};const n=bs.getChartsReleaseDate(),{md5:a,license:r,version:o,isTrial:l,type:c}=bs.extractLicenseComponents(t);let h=a===this.md5.md5(r)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,u,d,p=null,g=!1,f;function m(){u=p<new Date,d=void 0}if(h&&(p=bs.extractExpiry(r),h=!isNaN(p.getTime()),h))switch(d=n>p,o){case"legacy":case"2":{h=!1;break}case"3":iv(c)?h=!1:(f=c,c!==gp["02"]&&c!==gp["0102"]?(h=!1,g=!0):l&&m())}return h?{licenseKey:t,valid:h,expiry:bs.formatDate(p),expired:d,version:o,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:i?f!=="BOTH":void 0,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}:{licenseKey:t,valid:h,incorrectLicenseType:g,currentLicenseType:s,suppliedLicenseType:f}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!iv(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const t=this.document.defaultView||window;if(!t)return"localhost";const i=t.location,{hostname:s=""}=i;return s}isForceWatermark(){var t,i;if(!this.document)return!1;const s=((i=(t=this.document)==null?void 0:t.defaultView)!=null?i:typeof window<"u")?window:void 0;if(!s)return!1;const{pathname:n}=s.location;return n?n.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(t){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=t.getDate(),n=t.getMonth(),a=t.getFullYear();return s+" "+i[n]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(bs.decode(bs.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,r,o,l,c,h,u=0;const d=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<d.length;)o=i.indexOf(d.charAt(u++)),l=i.indexOf(d.charAt(u++)),c=i.indexOf(d.charAt(u++)),h=i.indexOf(d.charAt(u++)),n=o<<2|l>>4,a=(l&15)<<4|c>>2,r=(c&3)<<6|h,s=s+String.fromCharCode(n),c!=64&&(s=s+String.fromCharCode(a)),h!=64&&(s=s+String.fromCharCode(r));return s=bs.utf8_decode(s),s}static utf8_decode(t){t=t.replace(/rn/g,"n");let i="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);n<128?i+=String.fromCharCode(n):n>127&&n<2048?(i+=String.fromCharCode(n>>6|192),i+=String.fromCharCode(n&63|128)):(i+=String.fromCharCode(n>>12|224),i+=String.fromCharCode(n>>6&63|128),i+=String.fromCharCode(n&63|128))}return i}setLicenseKey(t,i=!1){this.gridContext=i,this.licenseKey=t}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const i=t.match(/\[(.*?)\]/g).map(o=>o.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const s=i.filter(o=>o==="TRIAL").length===1,n=i.filter(o=>o.indexOf("v")===0)[0],a=n?n.replace("v",""):"legacy",r=gp[i.filter(o=>gp[o])[0]];return[a,s,r]}centerPadAndOutput(t){const i=this.totalMessageLength-t.length;console.error(t.padStart(i/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,i="*",s=""){console.error(t.padEnd(this.totalMessageLength-s.length,i)+s)}outputInvalidLicenseKey(t,i,s){this.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${s} only and does not cover you for ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,s){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${s} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,s){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${s} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};pD.RELEASE_INFORMATION="MTcwODMyOTU2Mjk0OA==";var Gw=pD,Vw=(Y(),W(V)),{injectStyle:Uw}=Vw._ModuleSupport,Ww=`
.ag-watermark {
    position: absolute;
    bottom: 20px;
    right: 25px;
    font-weight: bold;
    font-family: Impact, sans-serif;
    font-size: 19px;
    opacity: 0.7;
    animation: 1s ease-out 3s ag-watermark-fadeout;
    color: #9B9B9B;

    &::before {
        content: '';
        display: block;
        height: 40px;
        width: 170px;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);
        background-repeat: no-repeat;
        background-size: 170px 40px;
    }

    > span {
        padding-left: 0.7rem;
    }
}

@keyframes ag-watermark-fadeout {
    from { opacity: 0.5; }
    to { opacity: 0; }
}
`;function Yw(e,t,i){Uw(e,Ww);const s=e.createElement("div"),n=e.createElement("span");n.innerText=i,s.addEventListener("animationend",()=>t.removeChild(s)),s.classList.add("ag-watermark"),s.appendChild(n),t.appendChild(s)}var ul=(Y(),W(V)),hn=(Y(),W(V));function Hw(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function Kw(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var ms=(Y(),W(V)),jw=class extends ms._Scene.Group{constructor(){super(),this.append([new ms._Scene.Rect({tag:0}),new ms._Scene.Rect({tag:0}),new ms._Scene.Rect({tag:2}),new ms._Scene.Rect({tag:1}),new ms._Scene.Line({tag:3}),new ms._Scene.Line({tag:3}),new ms._Scene.Line({tag:4}),new ms._Scene.Line({tag:4})])}updateDatumStyles(e,t,i,s){const{bandwidth:n,scaledValues:{xValue:a,medianValue:r}}=e;let{minValue:o,q1Value:l,q3Value:c,maxValue:h}=e.scaledValues;(i&&!s||!i&&s)&&([h,c,l,o]=[o,l,c,h]);const{fill:u,fillOpacity:d,stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,lineDashOffset:v,cap:y,whisker:b}=t,_=ms._Scene.Selection.select(this,ms._Scene.Rect),S=_.selectByTag(0),[D]=_.selectByTag(2),[A]=_.selectByTag(1),I=_.selectByTag(3),T=_.selectByTag(4);b.strokeWidth>n&&(b.strokeWidth=n),D.setProperties({x:l,y:a,width:c-l,height:n}),S[0].setProperties({x:l,y:a,width:Math.round(r-l+g/2),height:n}),S[1].setProperties({x:Math.round(r-g/2),y:a,width:Math.floor(c-r+g/2),height:n});const E=Math.max(Math.round(r-g/2),l+g),C=Math.min(Math.round(r+g/2),c-g);A.setProperties({visible:E<C,x:E,y:a+g,width:C-E,height:Math.max(0,n-g*2)});const O=Math.floor(a+n*(1-y.lengthRatio)/2),N=Math.ceil(a+n*(1+y.lengthRatio)/2);T[0].setProperties({x:o,y1:O,y2:N}),T[1].setProperties({x:h,y1:O,y2:N}),I[0].setProperties({x1:Math.round(o+b.strokeWidth/2),x2:l,y:Math.floor(a+n/2)}),I[1].setProperties({x1:c,x2:Math.round(h-b.strokeWidth/2),y:Math.floor(a+n/2)}),i&&ms._ModuleSupport.invertShapeDirection(D,A,...S,...T,...I);for(const w of S)w.setProperties({fill:u,fillOpacity:d,strokeWidth:g*2,strokeOpacity:0});A.setProperties({fill:p,fillOpacity:f,strokeWidth:0});for(const w of[...I,...T])w.setProperties(b);D.setProperties({stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,lineDashOffset:v,fillOpacity:0})}},Xw=(Y(),W(V)),{BaseProperties:gD,AbstractBarSeriesProperties:$w,SeriesTooltip:qw,Validate:Bt,COLOR_STRING:sv,FUNCTION:Zw,LINE_DASH:fD,OBJECT:nv,POSITIVE_NUMBER:fp,RATIO:mp,STRING:Xi,mergeDefaults:Qw}=Xw._ModuleSupport,mD=class extends gD{constructor(){super(...arguments),this.lengthRatio=.5}};k([Bt(mp)],mD.prototype,"lengthRatio",2);var dl=class extends gD{};k([Bt(sv,{optional:!0})],dl.prototype,"stroke",2),k([Bt(fp)],dl.prototype,"strokeWidth",2),k([Bt(mp)],dl.prototype,"strokeOpacity",2),k([Bt(fD,{optional:!0})],dl.prototype,"lineDash",2),k([Bt(fp)],dl.prototype,"lineDashOffset",2);var Qt=class extends $w{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cap=new mD,this.whisker=new dl,this.tooltip=new qw}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:n}=this,a=super.toJson();return a.whisker=Qw(a.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:n}),a}};k([Bt(Xi)],Qt.prototype,"xKey",2),k([Bt(Xi)],Qt.prototype,"minKey",2),k([Bt(Xi)],Qt.prototype,"q1Key",2),k([Bt(Xi)],Qt.prototype,"medianKey",2),k([Bt(Xi)],Qt.prototype,"q3Key",2),k([Bt(Xi)],Qt.prototype,"maxKey",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"xName",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"yName",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"minName",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"q1Name",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"medianName",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"q3Name",2),k([Bt(Xi,{optional:!0})],Qt.prototype,"maxName",2),k([Bt(sv,{optional:!0})],Qt.prototype,"fill",2),k([Bt(mp)],Qt.prototype,"fillOpacity",2),k([Bt(sv)],Qt.prototype,"stroke",2),k([Bt(fp)],Qt.prototype,"strokeWidth",2),k([Bt(mp)],Qt.prototype,"strokeOpacity",2),k([Bt(fD)],Qt.prototype,"lineDash",2),k([Bt(fp)],Qt.prototype,"lineDashOffset",2),k([Bt(Zw,{optional:!0})],Qt.prototype,"formatter",2),k([Bt(nv)],Qt.prototype,"cap",2),k([Bt(nv)],Qt.prototype,"whisker",2),k([Bt(nv)],Qt.prototype,"tooltip",2);var{extent:Jw,extractDecoratedProperties:yD,fixNumericExtent:av,keyProperty:t1,mergeDefaults:rv,SeriesNodePickMode:e1,SMALLEST_KEY_INTERVAL:i1,valueProperty:hh,diff:s1,animationValidation:n1,ChartAxisDirection:a1}=hn._ModuleSupport,{motion:vD}=hn._Scene,r1=class extends hn._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},xD=class C2 extends hn._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[e1.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new Qt,this.NodeClickEvent=r1,this.groupScale=new hn._Scale.BandScale,this.smallestDataInterval=void 0}processData(t){return Q(this,null,function*(){var i,s,n,a;if(!this.properties.isValid())return;const{xKey:r,minKey:o,q1Key:l,medianKey:c,q3Key:h,maxKey:u}=this.properties,d=!this.ctx.animationManager.isSkipped(),p=((i=this.getCategoryAxis())==null?void 0:i.scale)instanceof hn._Scale.ContinuousScale,g=[];d&&this.processedData&&g.push(s1(this.processedData)),d&&g.push(n1(this));const{processedData:f}=yield this.requestDataModel(t,(s=this.data)!=null?s:[],{props:[t1(this,r,p,{id:"xValue"}),hh(this,o,!0,{id:"minValue"}),hh(this,l,!0,{id:"q1Value"}),hh(this,c,!0,{id:"medianValue"}),hh(this,h,!0,{id:"q3Value"}),hh(this,u,!0,{id:"maxValue"}),...p?[i1]:[],...g],dataVisible:this.visible});this.smallestDataInterval={x:(a=(n=f.reduced)==null?void 0:n.smallestKeyInterval)!=null?a:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var i;const{processedData:s,dataModel:n,smallestDataInterval:a}=this;if(!(s&&n))return[];if(t===this.getBarDirection()){const f=n.getDomain(this,"minValue","value",s),m=n.getDomain(this,"maxValue","value",s);return av([Math.min(...f),Math.max(...m)],this.getValueAxis())}const{index:r,def:o}=n.resolveProcessedDataIndexById(this,"xValue"),l=s.domain.keys[r];if(o.type==="key"&&o.valueType==="category")return l;const c=this.getCategoryAxis(),h=c?.isReversed(),u=(i=Jw(l))!=null?i:[NaN,NaN],d=a&&isFinite(a.x)?a.x:0;if(t===a1.Y){const f=u[0]+(h?0:-d),m=u[1]+(h?d:0);return av([f,m],c)}const p=u[0]+(h?-d:0),g=u[1]+(h?0:d);return av([p,g],c)}createNodeData(){return Q(this,null,function*(){var t;const{visible:i,dataModel:s}=this,n=this.getCategoryAxis(),a=this.getValueAxis();if(!(s&&i&&n&&a))return[];const{xKey:r,fill:o,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:u,lineDash:d,lineDashOffset:p,cap:g,whisker:f}=this.properties,{groupScale:m,smallestDataInterval:v,ctx:{seriesStateManager:y}}=this,b=n.scale instanceof hn._Scale.ContinuousScale?n.scale.calcBandwidth(v?.x):n.scale.bandwidth,_=[],{index:S,visibleGroupCount:D}=y.getVisiblePeerGroupIndex(this);for(let E=0;E<D;E++)_.push(String(E));m.domain=_,m.range=[0,b??0],n instanceof hn._ModuleSupport.CategoryAxis&&(m.paddingInner=n.groupPaddingInner);const A=m.bandwidth>=1?m.bandwidth:m.rawBandwidth,I=[],T=s.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]);return(t=this.processedData)==null||t.data.forEach(({datum:E,keys:C,values:O})=>{const{xValue:N,minValue:w,q1Value:U,medianValue:G,q3Value:F,maxValue:P}=s.resolveProcessedDataDefsValues(T,{keys:C,values:O});if([w,U,G,F,P].some(z=>typeof z!="number")||w>U||U>G||G>F||F>P)return;const j=this.convertValuesToScaleByDefs(T,{xValue:N,minValue:w,q1Value:U,medianValue:G,q3Value:F,maxValue:P});j.xValue+=Math.round(m.convert(String(S))),I.push({series:this,itemId:N,datum:E,xKey:r,bandwidth:Math.round(A),scaledValues:j,cap:g,whisker:f,fill:o,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:u,lineDash:d,lineDashOffset:p})}),[{itemId:r,nodeData:I,labelData:[],scales:Bs(C2.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}getLegendData(t){var i;const{id:s,data:n}=this,{xKey:a,yName:r,fill:o,fillOpacity:l,stroke:c,strokeWidth:h,strokeOpacity:u,showInLegend:d,legendItemName:p,visible:g}=this.properties;return!d||!n?.length||!a||t!=="category"?[]:[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:g,label:{text:(i=p??r)!=null?i:s},marker:{fill:o,fillOpacity:l,stroke:c,strokeOpacity:u,strokeWidth:h},legendItemName:p}]}getTooltipHtml(t){const{xKey:i,minKey:s,q1Key:n,medianKey:a,q3Key:r,maxKey:o,xName:l,yName:c,minName:h,q1Name:u,medianName:d,q3Name:p,maxName:g,tooltip:f}=this.properties,{datum:m}=t,v=this.getCategoryAxis(),y=this.getValueAxis();if(!v||!y||!this.properties.isValid())return"";const b=hn._Util.sanitizeHtml(c),S=[[i,l,v],[s,h,y],[n,u,y],[a,d,y],[r,p,y],[o,g,y]].map(([A,I,T])=>hn._Util.sanitizeHtml(`${I??A}: ${T.formatDatum(m[A])}`)).join(b?"<br/>":", "),{fill:D}=this.getFormattedStyles(t);return f.toTooltipHtml({title:b,content:S,backgroundColor:D},{seriesId:this.id,datum:m,fill:D,xKey:i,minKey:s,q1Key:n,medianKey:a,q3Key:r,maxKey:o,xName:l,minName:h,q1Name:u,medianName:d,q3Name:p,maxName:g})}animateEmptyUpdateReady({datumSelections:t}){const i=this.isVertical(),{from:s,to:n}=Hw(i);vD.resetMotion(t,Kw(i)),vD.staticFromToMotion(this.id,"datums",this.ctx.animationManager,t,s,n,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){return Q(this,null,function*(){var i;const s=(i=t.nodeData)!=null?i:[];return t.datumSelection.update(s)})}updateDatumNodes(t){return Q(this,arguments,function*({datumSelection:i,isHighlight:s}){var n;const a=this.isVertical(),r=(n=this.getValueAxis())==null?void 0:n.isReversed();i.each((o,l)=>{let c=this.getFormattedStyles(l,s);s&&(c=rv(this.properties.highlightStyle.item,c));const{stroke:h,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:g}=c;c.whisker=rv(c.whisker,{stroke:h,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:g}),o.updateDatumStyles(l,c,a,r)})})}updateLabelNodes(t){return Q(this,null,function*(){})}updateLabelSelection(t){return Q(this,null,function*(){const{labelData:i,labelSelection:s}=t;return s.update(i)})}nodeFactory(){return new jw}getFormattedStyles(t,i=!1){const{id:s,ctx:{callbackCache:n}}=this,{xKey:a,minKey:r,q1Key:o,medianKey:l,q3Key:c,maxKey:h,formatter:u}=this.properties,{datum:d,fill:p,fillOpacity:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:b,cap:_,whisker:S}=t,D={fill:p,fillOpacity:g,stroke:f,strokeWidth:m,strokeOpacity:v,lineDash:y,lineDashOffset:b,cap:yD(_),whisker:yD(S)};if(u){const A=n.call(u,bi(At({datum:d,seriesId:s,highlighted:i},D),{xKey:a,minKey:r,q1Key:o,medianKey:l,q3Key:c,maxKey:h}));if(A)return rv(A,D)}return D}convertValuesToScaleByDefs(t,i){const s=this.getCategoryAxis(),n=this.getValueAxis();if(!(s&&n))throw new Error("Axes must be defined");const a={};for(const[r,[{def:o}]]of t)if(Object.hasOwn(i,r)){const{scale:l}=o.type==="key"?s:n;a[r]=Math.round(l.convert(i[r]))}return a}};xD.type="box-plot";var o1=xD,ov=(Y(),W(V)),l1={series:{__extends__:ov._Theme.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[ov._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[ov._Theme.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},c1={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:o1,seriesDefaults:{axes:[{type:ul._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:ul._Theme.POSITION.LEFT},{type:ul._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:ul._Theme.POSITION.BOTTOM}]},themeTemplate:l1,groupable:!0,paletteFactory:({takeColors:e,userPalette:t,themeTemplateParameters:i})=>{var s;const n=i.properties.get(ul._Theme.DEFAULT_BACKGROUND_COLOUR),a=(s=Array.isArray(n)?n[0]:n)!=null?s:"white",{fills:[r],strokes:[o]}=e(1);return{fill:t?r:ul._Util.Color.interpolate(r,a)(.7),stroke:o}},swapDefaultAxesCondition:({direction:e})=>e==="horizontal"},pl=(Y(),W(V)),Ve=(Y(),W(V)),h1=(Y(),W(V)),{AbstractBarSeriesProperties:u1,BaseProperties:lv,PropertiesArray:d1,SeriesTooltip:p1,Validate:Wt,ARRAY:g1,COLOR_STRING:gl,LINE_DASH:bD,OBJECT:cv,POSITIVE_NUMBER:fl,RATIO:ml,STRING:yp}=h1._ModuleSupport,Kn=class extends lv{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};k([Wt(gl)],Kn.prototype,"fill",2),k([Wt(ml)],Kn.prototype,"fillOpacity",2),k([Wt(gl)],Kn.prototype,"stroke",2),k([Wt(fl)],Kn.prototype,"strokeWidth",2),k([Wt(ml)],Kn.prototype,"strokeOpacity",2),k([Wt(bD)],Kn.prototype,"lineDash",2),k([Wt(fl)],Kn.prototype,"lineDashOffset",2),k([Wt(ml)],Kn.prototype,"lengthRatio",2);var SD=class extends lv{};k([Wt(fl,{optional:!0})],SD.prototype,"max",2);var vp=class extends lv{constructor(){super(...arguments),this.color="lightgrey"}};k([Wt(gl)],vp.prototype,"color",2),k([Wt(fl,{optional:!0})],vp.prototype,"stop",2);var Ue=class extends u1{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new d1(vp),this.target=new Kn,this.scale=new SD,this.tooltip=new p1,this.backgroundFill="white"}};k([Wt(yp)],Ue.prototype,"valueKey",2),k([Wt(yp,{optional:!0})],Ue.prototype,"valueName",2),k([Wt(yp,{optional:!0})],Ue.prototype,"targetKey",2),k([Wt(yp,{optional:!0})],Ue.prototype,"targetName",2),k([Wt(gl)],Ue.prototype,"fill",2),k([Wt(ml)],Ue.prototype,"fillOpacity",2),k([Wt(gl)],Ue.prototype,"stroke",2),k([Wt(fl)],Ue.prototype,"strokeWidth",2),k([Wt(ml)],Ue.prototype,"strokeOpacity",2),k([Wt(bD)],Ue.prototype,"lineDash",2),k([Wt(fl)],Ue.prototype,"lineDashOffset",2),k([Wt(ml)],Ue.prototype,"widthRatio",2),k([Wt(g1.restrict({minLength:0}))],Ue.prototype,"colorRanges",2),k([Wt(cv)],Ue.prototype,"target",2),k([Wt(cv)],Ue.prototype,"scale",2),k([Wt(cv)],Ue.prototype,"tooltip",2),k([Wt(gl)],Ue.prototype,"backgroundFill",2);var{animationValidation:f1,collapsedStartingBarPosition:_D,diff:m1,keyProperty:y1,partialAssign:hv,prepareBarAnimationFunctions:MD,resetBarSelectionsFn:v1,seriesLabelFadeInAnimation:xp,valueProperty:kD,createDatumId:x1}=Ve._ModuleSupport,{fromToMotion:DD}=Ve._Scene.motion,{sanitizeHtml:AD}=Ve._Util,LD=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],b1=class ux extends Ve._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[Ve._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:v1}}),this.properties=new Ue,this.normalizedColorRanges=[],this.colorRangesGroup=new Ve._Scene.Group({name:`${this.id}-colorRanges`}),this.colorRangesSelection=Ve._Scene.Selection.select(this.colorRangesGroup,Ve._Scene.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=Ve._Scene.Selection.select(this.annotationGroup,Ve._Scene.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(t){return Q(this,null,function*(){var i,s;if(!this.properties.isValid()||!this.data)return;const{valueKey:n,targetKey:a}=this.properties,r=Ve._Scale.ContinuousScale.is((i=this.getCategoryAxis())==null?void 0:i.scale),o=Ve._Scale.ContinuousScale.is((s=this.getValueAxis())==null?void 0:s.scale),l=[];a!==void 0&&l.push(kD(this,a,o,{id:"target"})),this.ctx.animationManager.isSkipped()||(this.processedData!==void 0&&l.push(m1(this.processedData)),l.push(f1(this))),yield this.requestDataModel(t,this.data.slice(0,1),{props:[y1(this,n,r,{id:"xValue"}),kD(this,n,o,{id:"value"}),...l],groupByKeys:!0,dataVisible:this.visible}),this.animationState.transition("updateData")})}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var t,i;return Math.max(...(i=(t=this.getValueAxis())==null?void 0:t.dataDomain.domain)!=null?i:[0])}getSeriesDomain(t){var i,s;const{dataModel:n,processedData:a}=this;if(!n||!a)return[];const{valueKey:r,targetKey:o,valueName:l,scale:c}=this.properties;if(t===this.getCategoryDirection())return[l??r];if(t==((i=this.getValueAxis())==null?void 0:i.direction)){const h=n.getDomain(this,"value","value",a),u=o===void 0?[]:n.getDomain(this,"target","value",a);return[0,(s=c.max)!=null?s:Math.max(...h,...u)]}throw new Error(`unknown direction ${t}`)}getKeys(t){return t===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(t)}createNodeData(){return Q(this,null,function*(){var t,i,s,n;const{dataModel:a,processedData:r}=this,{valueKey:o,targetKey:l,widthRatio:c,target:{lengthRatio:h}}=this.properties,u=(t=this.getCategoryAxis())==null?void 0:t.scale,d=(i=this.getValueAxis())==null?void 0:i.scale;if(!o||!a||!r||!u||!d)return[];if(c===void 0||h===void 0)return[];const p=(s=u.bandwidth)!=null?s:NaN,g=this.getMaxValue(),f=a.resolveProcessedDataIndexById(this,"value").index,m=l===void 0?NaN:a.resolveProcessedDataIndexById(this,"target").index,v={itemId:o,nodeData:[],labelData:[],scales:Bs(ux.prototype,this,"calculateScaling").call(this),visible:this.visible};for(const{datum:_,values:S}of r.data){if(!Array.isArray(_)||_.length<1)continue;S[0][f]<0&&Ve._Util.Logger.warnOnce("negative values are not supported, clipping to 0.");const D=(n=this.properties.valueName)!=null?n:this.properties.valueKey,A=Math.min(g,Math.max(0,S[0][f])),I=d.convert(A),T=c*p,E=d.convert(0),C=this.getBarDirection()===Ve._ModuleSupport.ChartAxisDirection.X,O={x:p*(1-c)/2,y:Math.min(I,E),width:T,height:Math.abs(E-I)};C&&([O.x,O.y,O.width,O.height]=[O.y,O.x,O.height,O.width]);let N;if(S[0][m]<0&&Ve._Util.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&S[0][m]>=0){const U=h*p,G=Math.min(g,S[0][m]);if(!isNaN(G)&&G!==void 0){const F=d.convert(G);let P=p*(1-h)/2,j=P+U,[z,q]=[F,F];C&&([P,j,z,q]=[z,q,P,j]),N={value:G,x1:P,x2:j,y1:z,y2:q}}}const w=bi(At({series:this,datum:_[0],xKey:o,xValue:D,yKey:o,yValue:A,cumulativeValue:A,target:N},O),{midPoint:{x:O.x+O.width/2,y:O.y+O.height/2},opacity:1});v.nodeData.push(w)}const y=[...this.getColorRanges()].sort((_,S)=>(_.stop||g)-(S.stop||g));let b=0;return this.normalizedColorRanges=y.map(_=>{var S;const D=Math.min(g,(S=_.stop)!=null?S:1/0),A={color:_.color,start:b,stop:D};return b=D,A}),[v]})}getColorRanges(){const{colorRanges:t,fill:i,backgroundFill:s}=this.properties;if(t!==void 0&&t.length>0)return t;const n=new vp;return n.color=Ve._Util.Color.interpolate(i,s)(.7),[n]}getLegendData(t){return[]}getTooltipHtml(t){const{valueKey:i,valueName:s,targetKey:n,targetName:a}=this.properties,r=this.getValueAxis(),{yValue:o,target:{value:l}={value:void 0},datum:c}=t;if(i===void 0||o===void 0||r===void 0)return"";const h=(p,g,f)=>{const m=AD(g??p),v=AD(r.formatDatum(f));return`<b>${m}</b>: ${v}`},u=void 0,d=n===void 0||l===void 0?h(i,s,o):`${h(i,s,o)}<br/>${h(n,a,l)}`;return this.properties.tooltip.toTooltipHtml({title:u,content:d,backgroundColor:this.properties.fill},{datum:c,title:u,seriesId:this.id,valueKey:i,valueName:s,targetKey:n,targetName:a})}isLabelEnabled(){return!1}nodeFactory(){return new Ve._Scene.Rect}updateDatumSelection(t){return Q(this,null,function*(){return this.targetLinesSelection.update(t.nodeData,void 0,void 0),t.datumSelection.update(t.nodeData,void 0,void 0)})}updateDatumNodes(t){return Q(this,null,function*(){for(const{node:i}of t.datumSelection){const s=this.properties;hv(LD,i,s)}for(const{node:i,datum:s}of this.targetLinesSelection)if(s.target!==void 0){const n=this.properties.target;hv(["x1","x2","y1","y2"],i,s.target),hv(LD,i,n)}else i.visible=!1})}updateColorRanges(){return Q(this,null,function*(){const t=this.getValueAxis(),i=this.getCategoryAxis();if(!t||!i)return;const[s,n]=[0,Math.max(...i.scale.range)],a=this.getBarDirection()===Ve._ModuleSupport.ChartAxisDirection.Y?(r,o)=>{r.x=s,r.y=t.scale.convert(o.stop),r.height=t.scale.convert(o.start)-r.y,r.width=n}:(r,o)=>{r.x=t.scale.convert(o.start),r.y=s,r.height=n,r.width=t.scale.convert(o.stop)-r.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:r,datum:o}of this.colorRangesSelection)a(r,o),r.fill=o.color})}updateNodes(t,i,s){return Q(this,null,function*(){Bs(ux.prototype,this,"updateNodes").call(this,t,i,s),yield this.updateColorRanges()})}updateLabelSelection(t){return Q(this,null,function*(){return t.labelSelection})}updateLabelNodes(t){return Q(this,null,function*(){})}animateEmptyUpdateReady(t){const{datumSelections:i,labelSelections:s,annotationSelections:n}=t,a=MD(_D(this.isVertical(),this.axes,"normal"));DD(this.id,"nodes",this.ctx.animationManager,i,a),xp(this,"labels",this.ctx.animationManager,s),xp(this,"annotations",this.ctx.animationManager,n)}animateWaitingUpdateReady(t){var i,s,n;const{datumSelections:a,labelSelections:r,annotationSelections:o}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(s=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:s.diff,c=MD(_D(this.isVertical(),this.axes,"normal"));DD(this.id,"nodes",this.ctx.animationManager,a,c,(u,d)=>x1(d.xValue),l),((n=l?.changed)!=null?n:!0)&&(xp(this,"labels",this.ctx.animationManager,r),xp(this,"annotations",this.ctx.animationManager,o))}},S1=(Y(),W(V)),_1={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[S1._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},M1={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:b1,seriesDefaults:{axes:[{type:pl._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:pl._Theme.POSITION.LEFT},{type:pl._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:pl._Theme.POSITION.BOTTOM}]},themeTemplate:_1,swapDefaultAxesCondition:e=>e?.direction==="horizontal",paletteFactory:({takeColors:e,colorsCount:t,themeTemplateParameters:i})=>{var s;const{properties:n}=i,{fills:[a],strokes:[r]}=e(t),o=i.properties.get(pl._Theme.DEFAULT_BACKGROUND_COLOUR),l=(s=Array.isArray(o)?o[0]:o)!=null?s:"white",c=n.get(pl._Theme.DEFAULT_CROSS_LINES_COLOUR);return{fill:a,stroke:r,target:{stroke:c},backgroundFill:l}}},yl=(Y(),W(V)),vl=(Y(),W(V)),uv=(Y(),W(V)),{Validate:bp,NUMBER:TD,TEXT_WRAP:k1,OVERFLOW_STRATEGY:D1}=uv._ModuleSupport,{Logger:A1}=uv._Util,{Text:Yr,Label:L1}=uv._Scene,uh=class extends L1{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(e){return Math.ceil(e*Yr.defaultLineHeightRatio)}};k([bp(k1)],uh.prototype,"wrapping",2),k([bp(D1)],uh.prototype,"overflowStrategy",2),k([bp(TD,{optional:!0})],uh.prototype,"minimumFontSize",2);var zs=class extends uh{constructor(){super(...arguments),this.spacing=0}};k([bp(TD)],zs.prototype,"spacing",2);var Sp=class extends uh{};function T1(e,t){const{fontSize:i,minimumFontSize:s=i}=e,{fontSize:n,minimumFontSize:a=n}=t,r=i-s,o=n-a;let l=e.fontSize,c=t.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:n}];for(;l>s||c>a;){const u=r>0?(l-s)/r:-1,d=o>0?(c-a)/o:-1;u>d?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function ID(e,t,i){if(e>t)return;let s=e,n=t,a;for(;n>=s;){const r=(n+s)/2|0,o=i(r);o!=null?(a=o,s=r+1):n=r-1}return a}function I1(e,t,i,s,{padding:n},a){var r,o;const{spacing:l}=t,c=2*n,h=2*n+l,u=((r=t.minimumFontSize)!=null?r:t.fontSize)+((o=s.minimumFontSize)!=null?o:s.fontSize);if(u>a(u+h).height-h)return;const d=T1(t,s),p=new Yr;p.setFont(t);const g={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},f=new Yr;f.setFont(s);const m={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let v,y;return ID(0,d.length-1,b=>{const{labelFontSize:_,secondaryLabelFontSize:S}=d[b],D=b===0,A=zs.lineHeight(_),I=Sp.lineHeight(S),T=a(A+I+h),E=T.width-c,C=T.height-h;if(A+I>C)return;if(v==null||v.fontSize!==_){g.fontSize=_;const{lines:N}=Yr.wrapLines(e,E,C,g,t.wrapping,D?t.overflowStrategy:"hide");if(N!=null){const w=N.join(`
`);p.text=w,p.fontSize=_,p.lineHeight=_;const U=p.computeBBox().width,G=N.length*A;v={text:w,fontSize:_,lineHeight:A,width:U,height:G}}else v=void 0}if(v==null||v.width>E||v.height>C)return;if(y==null||y.fontSize!==S){m.fontSize=S;const{lines:N}=Yr.wrapLines(i,E,C,m,s.wrapping,D?s.overflowStrategy:"hide");if(N!=null){const w=N.join(`
`);f.text=w,f.fontSize=S,f.lineHeight=I;const U=f.computeBBox().width,G=N.length*I;y={text:w,fontSize:S,lineHeight:I,width:U,height:G}}else y=void 0}if(y==null)return;const O=v.height+y.height;if(!(y.width>E||O>C))return{width:Math.max(v.width,y.width),height:O+l,meta:T.meta,label:v,secondaryLabel:y}})}function ED(e,t,{padding:i},s){var n;const a=2*i,r=Math.min((n=t.minimumFontSize)!=null?n:t.fontSize,t.fontSize),o=new Yr;o.setFont(t);const l={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return ID(r,t.fontSize,c=>{const h=zs.lineHeight(c),u=s(h+a),d=u.width-a,p=u.height-a;if(h>p)return;const g=c===r;l.fontSize=c;const{lines:f}=Yr.wrapLines(e,d,p,l,t.wrapping,g?t.overflowStrategy:"hide");if(f==null)return;const m=f.join(`
`);o.text=m,o.fontSize=c,o.lineHeight=h;const v=o.computeBBox(),y=o.computeBBox().width,b=h*f.length;if(!(v.width>d||b>p))return[{text:m,fontSize:c,lineHeight:h,width:y,height:b},u.meta]})}function CD(e){return e!=null&&e.minimumFontSize!=null&&e.fontSize&&e.minimumFontSize>e.fontSize}function dv(e,t,i,s,n,a){const r=t.enabled?e:void 0,o=s.enabled?i:void 0;(CD(t)||CD(s))&&A1.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;r!=null&&o!=null&&(l=I1(r,t,o,s,n,a));let c;if(l==null&&r!=null&&(c=ED(r,t,n,a)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let h;if(l==null&&r==null&&o!=null&&(h=ED(o,s,n,a)),h!=null){const[u,d]=h;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}var E1=(Y(),W(V)),{CartesianSeriesProperties:C1,SeriesTooltip:O1,Validate:Ze,AND:N1,ARRAY:R1,COLOR_STRING:w1,COLOR_STRING_ARRAY:P1,FUNCTION:B1,OBJECT:OD,POSITIVE_NUMBER:ND,RATIO:F1,STRING:Hr,TEXT_ALIGN:z1,VERTICAL_ALIGN:G1}=E1._ModuleSupport,We=class extends C1{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new zs,this.tooltip=new O1}};k([Ze(Hr,{optional:!0})],We.prototype,"title",2),k([Ze(Hr)],We.prototype,"xKey",2),k([Ze(Hr)],We.prototype,"yKey",2),k([Ze(Hr,{optional:!0})],We.prototype,"colorKey",2),k([Ze(Hr,{optional:!0})],We.prototype,"xName",2),k([Ze(Hr,{optional:!0})],We.prototype,"yName",2),k([Ze(Hr,{optional:!0})],We.prototype,"colorName",2),k([Ze(N1(P1,R1.restrict({minLength:1})))],We.prototype,"colorRange",2),k([Ze(w1,{optional:!0})],We.prototype,"stroke",2),k([Ze(F1,{optional:!0})],We.prototype,"strokeOpacity",2),k([Ze(ND,{optional:!0})],We.prototype,"strokeWidth",2),k([Ze(z1)],We.prototype,"textAlign",2),k([Ze(G1)],We.prototype,"verticalAlign",2),k([Ze(ND)],We.prototype,"itemPadding",2),k([Ze(B1,{optional:!0})],We.prototype,"formatter",2),k([Ze(OD)],We.prototype,"label",2),k([Ze(OD)],We.prototype,"tooltip",2);var{SeriesNodePickMode:V1,getMissCount:U1,valueProperty:pv,ChartAxisDirection:Pa}=vl._ModuleSupport,{Rect:W1,PointerEvents:Y1}=vl._Scene,{ColorScale:H1}=vl._Scale,{sanitizeHtml:xl,Color:K1,Logger:j1}=vl._Util,X1=class extends vl._ModuleSupport.CartesianSeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.colorKey=s.properties.colorKey}},$1={left:-.5,center:0,right:-.5},q1={top:-.5,middle:0,bottom:-.5},gv=class O2 extends vl._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,pickModes:[V1.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new We,this.NodeClickEvent=X1,this.colorScale=new H1}processData(t){return Q(this,null,function*(){var i;const s=this.axes[Pa.X],n=this.axes[Pa.Y];if(!s||!n||!this.properties.isValid()||!((i=this.data)!=null&&i.length))return;const{xKey:a,yKey:r,colorRange:o,colorKey:l}=this.properties,{isContinuousX:c,isContinuousY:h}=this.isContinuous(),{dataModel:u,processedData:d}=yield this.requestDataModel(t,this.data,{props:[pv(this,a,c,{id:"xValue"}),pv(this,r,h,{id:"yValue"}),...l?[pv(this,l,!0,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const p=u.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=d.domain.values[p],this.colorScale.range=o,this.colorScale.update()}})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:i,processedData:s}=this;if(!i||!s)return!1;const n=i.resolveProcessedDataIndexById(this,"colorValue").index,a=s.data.length,r=U1(this,s.defs.values[n].missing);return!(a===0||a===r)}getSeriesDomain(t){const{dataModel:i,processedData:s}=this;return!i||!s?[]:t===Pa.X?i.getDomain(this,"xValue","value",s):i.getDomain(this,"yValue","value",s)}createNodeData(){return Q(this,null,function*(){var t,i,s,n,a,r,o;const{data:l,visible:c,axes:h,dataModel:u}=this,d=h[Pa.X],p=h[Pa.Y];if(!(l&&u&&c&&d&&p))return[];if(d.type!=="category"||p.type!=="category")return j1.warnOnce(`Heatmap series expected axes to have "category" type, but received "${d.type}" and "${p.type}" instead.`),[];const{xKey:g,xName:f,yKey:m,yName:v,colorKey:y,colorName:b,textAlign:_,verticalAlign:S,itemPadding:D,colorRange:A,label:I}=this.properties,T=u.resolveProcessedDataIndexById(this,"xValue").index,E=u.resolveProcessedDataIndexById(this,"yValue").index,C=y?u.resolveProcessedDataIndexById(this,"colorValue").index:void 0,O=d.scale,N=p.scale,w=((t=O.bandwidth)!=null?t:0)/2,U=((i=N.bandwidth)!=null?i:0)/2,G=this.isColorScaleValid(),F=[],P=[],j=(s=O.bandwidth)!=null?s:10,z=(n=N.bandwidth)!=null?n:10,q=(j-2*D)*$1[_],tt=(z-2*D)*q1[S],it=()=>({width:j,height:z,meta:null});for(const{values:st,datum:vt}of(r=(a=this.processedData)==null?void 0:a.data)!=null?r:[]){const H=st[T],at=st[E],ut=O.convert(H)+w,ct=N.convert(at)+U,dt=C!=null?st[C]:void 0,ot=G&&dt!=null?this.colorScale.convert(dt):A[0],yt=dt!=null?this.getLabelText(I,{value:dt,datum:vt,colorKey:y,colorName:b,xKey:g,yKey:m,xName:f,yName:v}):void 0,xt=dv(yt,this.properties.label,void 0,this.properties.label,{padding:D},it),Ht={x:ut,y:ct,size:0};if(F.push({series:this,itemId:m,yKey:m,xKey:g,xValue:H,yValue:at,colorValue:dt,datum:vt,point:Ht,width:j,height:z,fill:ot,midPoint:{x:ut,y:ct}}),xt?.label!=null){const{text:ae,fontSize:Vt,lineHeight:we,height:Ae}=xt.label,{fontStyle:Pe,fontFamily:ne,fontWeight:qn,color:Zn}=this.properties.label,xs=Ht.x+q*(j-2*D),Ri=Ht.y+tt*(z-2*D)-(xt.height-Ae)*.5;P.push({series:this,itemId:m,datum:vt,text:ae,fontSize:Vt,lineHeight:we,fontStyle:Pe,fontFamily:ne,fontWeight:qn,color:Zn,textAlign:_,verticalAlign:S,x:xs,y:Ri})}}return[{itemId:(o=this.properties.yKey)!=null?o:this.id,nodeData:F,labelData:P,scales:Bs(O2.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}nodeFactory(){return new W1}updateDatumSelection(t){return Q(this,null,function*(){const{nodeData:i,datumSelection:s}=t,n=i??[];return s.update(n)})}updateDatumNodes(t){return Q(this,null,function*(){var i;const{isHighlight:s}=t,{id:n,ctx:{callbackCache:a}}=this,{xKey:r,yKey:o,colorKey:l,formatter:c,highlightStyle:{item:{fill:h,stroke:u,strokeWidth:d,strokeOpacity:p,fillOpacity:g}}}=this.properties,f=this.axes[Pa.X],[m,v]=(i=f?.visibleRange)!=null?i:[],b=!(m!==0||v!==1);t.datumSelection.each((_,S)=>{var D,A,I,T,E;const{point:C,width:O,height:N}=S,w=s&&h!==void 0?K1.interpolate(S.fill,h)(g??1):S.fill,U=s&&u!==void 0?u:this.properties.stroke,G=s&&p!==void 0?p:this.properties.strokeOpacity,F=s&&d!==void 0?d:this.properties.strokeWidth;let P;c&&(P=a.call(c,{datum:S.datum,fill:w,stroke:U,strokeOpacity:G,strokeWidth:F,highlighted:s,xKey:r,yKey:o,colorKey:l,seriesId:n})),_.crisp=b,_.x=Math.floor(C.x-O/2),_.y=Math.floor(C.y-N/2),_.width=Math.ceil(O),_.height=Math.ceil(N),_.fill=(D=P?.fill)!=null?D:w,_.stroke=(A=P?.stroke)!=null?A:U,_.strokeOpacity=(T=(I=P?.strokeOpacity)!=null?I:G)!=null?T:1,_.strokeWidth=(E=P?.strokeWidth)!=null?E:F})})}updateLabelSelection(t){return Q(this,null,function*(){const{labelData:i,labelSelection:s}=t,{enabled:n}=this.properties.label,a=n?i:[];return s.update(a)})}updateLabelNodes(t){return Q(this,null,function*(){t.labelSelection.each((i,s)=>{i.text=s.text,i.fontSize=s.fontSize,i.lineHeight=s.lineHeight,i.fontStyle=s.fontStyle,i.fontFamily=s.fontFamily,i.fontWeight=s.fontWeight,i.fill=s.color,i.textAlign=s.textAlign,i.textBaseline=s.verticalAlign,i.x=s.x,i.y=s.y,i.pointerEvents=Y1.None})})}getTooltipHtml(t){var i,s,n;const a=this.axes[Pa.X],r=this.axes[Pa.Y];if(!this.properties.isValid()||!a||!r)return"";const{xKey:o,yKey:l,colorKey:c,xName:h,yName:u,colorName:d,stroke:p,strokeWidth:g,colorRange:f,formatter:m,tooltip:v}=this.properties,{colorScale:y,id:b,ctx:{callbackCache:_}}=this,{datum:S,xValue:D,yValue:A,colorValue:I}=t,T=this.isColorScaleValid()?y.convert(I):f[0];let E;m&&(E=_.call(m,{datum:t,xKey:o,yKey:l,colorKey:c,fill:T,stroke:p,strokeWidth:g,highlighted:!1,seriesId:b}));const C=(s=(i=E?.fill)!=null?i:T)!=null?s:"gray",O=(n=this.properties.title)!=null?n:u,N=xl(a.formatDatum(D)),w=xl(r.formatDatum(A));let U=`<b>${xl(h||o)}</b>: ${N}<br><b>${xl(u||l)}</b>: ${w}`;return c&&(U=`<b>${xl(d||c)}</b>: ${xl(I)}<br>`+U),v.toTooltipHtml({title:O,content:U,backgroundColor:C},{seriesId:b,datum:S,xKey:o,yKey:l,xName:h,yName:u,title:O,color:C,colorKey:c})}getLegendData(t){var i;return t!=="gradient"||!((i=this.data)!=null&&i.length)||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue").index],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}};gv.className="HeatmapSeries",gv.type="heatmap";var Z1=gv,dh=(Y(),W(V)),Q1={series:{__extends__:dh._Theme.EXTENDS_SERIES_DEFAULTS,label:{__overrides__:dh._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS,enabled:!1,color:dh._Theme.DEFAULT_LABEL_COLOUR,fontSize:dh._Theme.FONT_SIZE.SMALL,fontFamily:dh._Theme.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},J1={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:Z1,seriesDefaults:{axes:[{type:yl._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:yl._Theme.POSITION.LEFT},{type:yl._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:yl._Theme.POSITION.BOTTOM}]},themeTemplate:Q1,paletteFactory:({takeColors:e,colorsCount:t,userPalette:i,themeTemplateParameters:s})=>{var n;const{properties:a}=s,r=a.get(yl._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),o=a.get(yl._Theme.DEFAULT_BACKGROUND_COLOUR),l=(n=Array.isArray(o)?o[0]:o)!=null?n:"white",{fills:c,strokes:h}=e(t);return{stroke:i?h[0]:l,colorRange:i?[c[0],c[1]]:r}}},fv=(Y(),W(V)),tP=(Y(),W(V)),bl=(Y(),W(V)),{isDefined:eP,ChartAxisDirection:Ba,PolarAxis:iP,diff:sP,fixNumericExtent:nP,groupAccumulativeValueProperty:RD,keyProperty:aP,normaliseGroupTo:rP,resetLabelFn:oP,seriesLabelFadeInAnimation:lP,seriesLabelFadeOutAnimation:cP,valueProperty:hP,animationValidation:uP}=bl._ModuleSupport,{BandScale:dP}=bl._Scale,{motion:wD}=bl._Scene,{isNumber:PD,normalizeAngle360:BD,sanitizeHtml:FD}=bl._Util,pP=class extends bl._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},zD=class extends bl._ModuleSupport.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:bi(At({},t),{label:oP})}),this.NodeClickEvent=pP,this.nodeData=[],this.groupScale=new dP,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var e,t;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(e===Ba.X)return i.getDomain(this,"angleValue","key",s);{const n=t[Ba.Y],a=i.getDomain(this,"radiusValue-end","value",s),r=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return nP(r,n)}}processData(e){return Q(this,null,function*(){var t;if(!this.properties.isValid())return;const i=this.getStackId(),s=`${i}-trailing`,{angleKey:n,radiusKey:a,normalizedTo:r,visible:o}=this.properties,l=[];eP(r)&&l.push(rP(this,[i,s],Math.abs(r),"range"));const c=!this.ctx.animationManager.isSkipped();c&&this.processedData&&l.push(sP(this.processedData)),c&&l.push(uP(this));const h=o||!c?{}:{forceValue:0};yield this.requestDataModel(e,(t=this.data)!=null?t:[],{props:[aP(this,n,!1,{id:"angleValue"}),hP(this,a,!0,At({id:"radiusValue-raw",invalidValue:null},h)),...RD(this,a,!0,"normal","current",At({id:"radiusValue-end",invalidValue:null,groupId:i},h)),...RD(this,a,!0,"trailing","current",At({id:"radiusValue-start",invalidValue:null,groupId:s},h)),...l],dataVisible:o||c}),this.animationState.transition("updateData")})}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}isRadiusAxisReversed(){var e;return(e=this.axes[Ba.Y])==null?void 0:e.isReversed()}maybeRefreshNodeData(){return Q(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const e=this.axes[Ba.Y];return e instanceof iP?this.radius*e.innerRadiusRatio:0}createNodeData(){return Q(this,null,function*(){var e;const{processedData:t,dataModel:i,groupScale:s}=this;if(!t||!i||!this.properties.isValid())return[];const n=this.axes[Ba.X],a=this.axes[Ba.Y],r=n?.scale,o=a?.scale;if(!r||!o)return[];const l=i.resolveProcessedDataIndexById(this,"radiusValue-start").index,c=i.resolveProcessedDataIndexById(this,"radiusValue-end").index,h=i.resolveProcessedDataIndexById(this,"radiusValue-raw").index;let u=0,d=0;n instanceof nl&&(u=n.groupPaddingInner,d=n.paddingInner);const g=((e=r.bandwidth)!=null?e:0)*(1-d),{index:f,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);s.domain=Array.from({length:m}).map((O,N)=>String(N)),s.range=[-g/2,g/2],s.paddingInner=m>1?u:0;const v=this.isRadiusAxisReversed(),y=v?this.radius:this.getAxisInnerRadius(),b=v?this.getAxisInnerRadius():this.radius,_=b+y,{angleKey:S,radiusKey:D,angleName:A,radiusName:I,label:T}=this.properties,E=(O,N,w,U)=>{const G=this.getLabelText(T,{value:N,datum:O,angleKey:S,radiusKey:D,angleName:A,radiusName:I},F=>PD(F)?F.toFixed(2):String(F));if(G)return{x:w,y:U,text:G,textAlign:"center",textBaseline:"middle"}},C=t.data.map((O,N,w)=>{const{datum:U,keys:G,values:F}=O,P=G[0],j=F[h],z=F[l],q=F[c];let tt,it;if(w.length===1)tt=-.5*Math.PI,it=1.5*Math.PI;else{const Ht=r.convert(P);tt=BD(Ht+s.convert(String(f))),it=BD(tt+s.bandwidth)}const st=tt+s.bandwidth/2,vt=_-o.convert(z),H=_-o.convert(q),at=(vt+H)/2,ut=Math.cos(st),ct=Math.sin(st),dt=ut*at,ot=ct*at,yt=this.properties.label.enabled?E(U,j,dt,ot):void 0,xt=this.getColumnWidth(tt,it);return{series:this,datum:U,point:{x:dt,y:ot,size:0},midPoint:{x:dt,y:ot},label:yt,angleValue:P,radiusValue:j,innerRadius:vt,outerRadius:H,startAngle:tt,endAngle:it,axisInnerRadius:y,axisOuterRadius:b,columnWidth:xt,index:N}});return[{itemId:D,nodeData:C,labelData:C}]})}getColumnWidth(e,t){return NaN}update(e){return Q(this,arguments,function*({seriesRect:t}){const i=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(e,t){var i,s,n,a,r;let o=[];if(t){const f=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();f?.datum&&f.series===this&&(o=[f])}else o=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,c=(s=l?.fill)!=null?s:this.properties.fill,h=(n=l?.fillOpacity)!=null?n:this.properties.fillOpacity,u=(a=l?.stroke)!=null?a:this.properties.stroke,d=this.properties.strokeOpacity,p=(r=l?.strokeWidth)!=null?r:this.properties.strokeWidth,g=f=>f.angleValue;e.update(o,void 0,g).each((f,m)=>{var v,y,b,_;const S=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:m,fill:c,stroke:u,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(f,m,t,S),f.fill=(v=S?.fill)!=null?v:c,f.fillOpacity=(y=S?.fillOpacity)!=null?y:h,f.stroke=(b=S?.stroke)!=null?b:u,f.strokeOpacity=d,f.strokeWidth=(_=S?.strokeWidth)!=null?_:p,f.lineDash=this.properties.lineDash,f.lineJoin="round"})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();wD.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),lP(this,"labels",this.ctx.animationManager,[e])}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();wD.fromToMotion(this.id,"datums",t,[e],i),cP(this,"labels",t,[this.labelSelection])}getTooltipHtml(e){var t;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,radiusKey:r,angleName:o,radiusName:l,fill:c,stroke:h,strokeWidth:u,formatter:d,tooltip:p}=this.properties,{angleValue:g,radiusValue:f,datum:m}=e,v=s[Ba.X],y=s[Ba.Y];if(!this.properties.isValid()||!(v&&y&&PD(f))||!n)return"";const b=v.formatDatum(g),_=y.formatDatum(f),S=FD(l),D=FD(`${b}: ${_}`),{fill:A}=(t=d&&this.ctx.callbackCache.call(d,{seriesId:i,datum:m,fill:c,stroke:h,strokeWidth:u,highlighted:!1,angleKey:a,radiusKey:r}))!=null?t:{fill:c};return p.toTooltipHtml({title:S,backgroundColor:c,content:D},{seriesId:i,datum:m,color:A,title:S,angleKey:a,radiusKey:r,angleName:o,radiusName:l})}getLegendData(e){var t;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category")return[];const{radiusKey:i,radiusName:s,fill:n,stroke:a,fillOpacity:r,strokeOpacity:o,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:s??i},marker:{fill:n??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:r??1,strokeOpacity:o??1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:s}=e;s.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,r=s.id===this.id||t&&n===1;this.toggleSeriesItem(i,r)}computeLabelsBBox(){return null}},GD=(Y(),W(V)),{Label:gP}=GD._Scene,{SeriesProperties:fP,SeriesTooltip:mP,Validate:Qe,COLOR_STRING:VD,DEGREE:yP,FUNCTION:vP,LINE_DASH:xP,NUMBER:bP,OBJECT:UD,POSITIVE_NUMBER:WD,RATIO:YD,STRING:ph}=GD._ModuleSupport,Re=class extends fP{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new gP,this.tooltip=new mP}};k([Qe(ph)],Re.prototype,"angleKey",2),k([Qe(ph,{optional:!0})],Re.prototype,"angleName",2),k([Qe(ph)],Re.prototype,"radiusKey",2),k([Qe(ph,{optional:!0})],Re.prototype,"radiusName",2),k([Qe(VD)],Re.prototype,"fill",2),k([Qe(YD)],Re.prototype,"fillOpacity",2),k([Qe(VD)],Re.prototype,"stroke",2),k([Qe(WD)],Re.prototype,"strokeWidth",2),k([Qe(YD)],Re.prototype,"strokeOpacity",2),k([Qe(xP)],Re.prototype,"lineDash",2),k([Qe(WD)],Re.prototype,"lineDashOffset",2),k([Qe(vP,{optional:!0})],Re.prototype,"formatter",2),k([Qe(yP)],Re.prototype,"rotation",2),k([Qe(ph,{optional:!0})],Re.prototype,"stackGroup",2),k([Qe(bP,{optional:!0})],Re.prototype,"normalizedTo",2),k([Qe(UD)],Re.prototype,"label",2),k([Qe(UD)],Re.prototype,"tooltip",2);var SP=(Y(),W(V)),_P=(Y(),W(V)),{motion:MP}=_P._Scene;function HD(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(r,o,l)=>{t.forEach(c=>{var h,u;const d=e[c];let p=(l==="removed"||l==="updated"?r:o)[c],g=(l==="removed"?r:o)[c];isNaN(g)&&(g=(u=(h=r.previousDatum)==null?void 0:h[c])!=null?u:NaN);const f=p-g;Math.abs(f)>Math.PI&&(p-=Math.sign(f)*2*Math.PI),d.set(o,{from:p,to:g})})},s=(r,o)=>({startAngle:e.startAngle.get(r)[o],endAngle:e.endAngle.get(r)[o]});return{calculate:i,from:r=>s(r,"from"),to:r=>s(r,"to")}}function KD(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function kP(e){const t=HD();return{toFn:(n,a,r)=>{const{startAngle:o,endAngle:l}=t.to(a);let c,h,u,d,p;return r==="removed"?(c=n.innerRadius,h=n.innerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=isNaN(a.innerRadius)?e:a.innerRadius,h=isNaN(a.outerRadius)?e:a.outerRadius,u=isNaN(a.columnWidth)?n.columnWidth:a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:o,endAngle:l}},fromFn:(n,a,r)=>{r=KD(n,a,r),t.calculate(n,a,r);const{startAngle:o,endAngle:l}=t.from(a);let c,h,u,d,p;r==="removed"||r==="updated"?(c=n.innerRadius,h=n.outerRadius,u=n.columnWidth,d=n.axisInnerRadius,p=n.axisOuterRadius):(c=e,h=e,u=a.columnWidth,d=a.axisInnerRadius,p=a.axisOuterRadius);const g=MP.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:p,startAngle:o,endAngle:l,phase:g}}}}function DP(e,{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:r,endAngle:o}){return{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:n,axisOuterRadius:a,startAngle:r,endAngle:o}}var{motion:AP}=SP._Scene;function LP(e){const t=HD();return{toFn:(n,a,r)=>{const{startAngle:o,endAngle:l}=t.to(a);let c,h;return r==="removed"?(c=e,h=e):(c=isNaN(a.innerRadius)?e:a.innerRadius,h=isNaN(a.outerRadius)?e:a.outerRadius),{innerRadius:c,outerRadius:h,startAngle:o,endAngle:l}},fromFn:(n,a,r)=>{r=KD(n,a,r),t.calculate(n,a,r);const{startAngle:o,endAngle:l}=t.from(a);let c,h;r==="removed"||r==="updated"?(c=n.innerRadius,h=n.outerRadius):(c=e,h=e);const u=AP.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:h,startAngle:o,endAngle:l,phase:u}}}}function TP(e,{innerRadius:t,outerRadius:i,startAngle:s,endAngle:n}){return{innerRadius:t,outerRadius:i,startAngle:s,endAngle:n}}var{Sector:IP}=tP._Scene,mv=class extends zD{constructor(e){super(e,{animationResetFns:{item:TP}}),this.properties=new Re}getStackId(){var e,t;return`nightingale-stack-${(t=(e=this.seriesGrouping)==null?void 0:e.groupIndex)!=null?t:this.id}-yValues`}nodeFactory(){return new IP}updateItemPath(e,t,i,s){e.centerX=0,e.centerY=0,i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle)}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return LP(e)}};mv.className="NightingaleSeries",mv.type="nightingale";var Fa=(Y(),W(V)),EP={series:{__extends__:Fa._Theme.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Fa._Theme.DEFAULT_FONT_FAMILY,color:Fa._Theme.DEFAULT_LABEL_COLOUR,__overrides__:Fa._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[Fa._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:Fa._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[Fa._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:Fa._Theme.POLAR_AXIS_SHAPE.CIRCLE}}},CP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:mv,seriesDefaults:{axes:[{type:fv._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:fv._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:EP,paletteFactory({takeColors:e,userPalette:t}){const{fills:[i],strokes:[s]}=e(1);return{fill:i,stroke:t?s:fv._Theme.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},yv=(Y(),W(V)),Kr=(Y(),W(V)),jD={series:{__extends__:Kr._Theme.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:Kr._Theme.DEFAULT_FONT_FAMILY,color:Kr._Theme.DEFAULT_LABEL_COLOUR,__overrides__:Kr._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[Kr._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},OP=Kr._ModuleSupport.mergeDefaults({series:{strokeWidth:2}},jD),NP=Kr._ModuleSupport.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},jD),vv=(Y(),W(V)),gh=(Y(),W(V)),XD=(Y(),W(V)),{Label:RP}=XD._Scene,{SeriesMarker:wP,SeriesProperties:PP,SeriesTooltip:BP,Validate:Si,BOOLEAN:FP,COLOR_STRING:zP,DEGREE:GP,FUNCTION:VP,LINE_DASH:UP,OBJECT:xv,POSITIVE_NUMBER:$D,RATIO:WP,STRING:_p}=XD._ModuleSupport,Je=class extends PP{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new wP,this.label=new RP,this.tooltip=new BP,this.connectMissingData=!1}};k([Si(_p)],Je.prototype,"angleKey",2),k([Si(_p)],Je.prototype,"radiusKey",2),k([Si(_p,{optional:!0})],Je.prototype,"angleName",2),k([Si(_p,{optional:!0})],Je.prototype,"radiusName",2),k([Si(zP)],Je.prototype,"stroke",2),k([Si($D)],Je.prototype,"strokeWidth",2),k([Si(WP)],Je.prototype,"strokeOpacity",2),k([Si(UP)],Je.prototype,"lineDash",2),k([Si($D)],Je.prototype,"lineDashOffset",2),k([Si(VP,{optional:!0})],Je.prototype,"formatter",2),k([Si(GP)],Je.prototype,"rotation",2),k([Si(xv)],Je.prototype,"marker",2),k([Si(xv)],Je.prototype,"label",2),k([Si(xv)],Je.prototype,"tooltip",2),k([Si(FP)],Je.prototype,"connectMissingData",2);var{ChartAxisDirection:jr,PolarAxis:YP,SeriesNodePickMode:qD,valueProperty:ZD,fixNumericExtent:HP,seriesLabelFadeInAnimation:KP,markerFadeInAnimation:jP,resetMarkerFn:XP,animationValidation:$P}=gh._ModuleSupport,{BBox:qP,Group:ZP,Path:QP,PointerEvents:JP,Selection:QD,Text:tB,getMarker:eB}=gh._Scene,{extent:iB,isNumber:sB,isNumberEqual:JD,sanitizeHtml:tA,toFixed:eA}=gh._Util,nB=class extends gh._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},bv=class extends gh._ModuleSupport.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[qD.NEAREST_NODE,qD.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:XP}}),this.properties=new Je,this.NodeClickEvent=nB,this.nodeData=[],this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const t=new ZP;this.contentGroup.append(t),this.lineSelection=QD.select(t,QP),t.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:e}=this.properties.marker,t=eB(e);return new t}addChartEventListeners(){var e,t;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===jr.X)return t.getDomain(this,"angleValue","value",i);{const s=t.getDomain(this,"radiusValue","value",i),n=iB(s.length===0?s:[0].concat(s));return HP(n)}}processData(e){return Q(this,null,function*(){var t;if(!this.properties.isValid())return;const{angleKey:i,radiusKey:s}=this.properties,n=[];this.ctx.animationManager.isSkipped()||n.push($P(this)),yield this.requestDataModel(e,(t=this.data)!=null?t:[],{props:[ZD(this,i,!1,{id:"angleValue"}),ZD(this,s,!1,{id:"radiusValue",invalidValue:void 0}),...n]}),this.animationState.transition("updateData")})}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[jr.Y];return e instanceof YP?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){return Q(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}createNodeData(){return Q(this,null,function*(){var e,t;const{processedData:i,dataModel:s}=this;if(!i||!s||!this.properties.isValid())return[];const{angleKey:n,radiusKey:a,angleName:r,radiusName:o,marker:l,label:c}=this.properties,h=(e=this.axes[jr.X])==null?void 0:e.scale,u=(t=this.axes[jr.Y])==null?void 0:t.scale;if(!h||!u)return[];const d=s.resolveProcessedDataIndexById(this,"angleValue").index,p=s.resolveProcessedDataIndexById(this,"radiusValue").index,g=this.getAxisInnerRadius(),f=i.data.map(m=>{const{datum:v,values:y}=m,b=y[d],_=y[p],S=h.convert(b),D=this.radius+g-u.convert(_),A=Math.cos(S),I=Math.sin(S),T=A*D,E=I*D;let C;if(c.enabled){const O=this.getLabelText(c,{value:_,datum:v,angleKey:n,radiusKey:a,angleName:r,radiusName:o},N=>sB(N)?N.toFixed(2):String(N));O&&(C={x:T+A*l.size,y:E+I*l.size,text:O,textAlign:JD(A,0)?"center":A>0?"left":"right",textBaseline:JD(I,0)?"middle":I>0?"top":"bottom"})}return{series:this,datum:v,point:{x:T,y:E,size:l.size},midPoint:{x:T,y:E},label:C,angleValue:b,radiusValue:_}});return[{itemId:a,nodeData:f,labelData:f}]})}update(e){return Q(this,arguments,function*({seriesRect:t}){var i,s;const n=this.checkResize(t),a=!this.ctx.animationManager.isSkipped(),{series:r}=(s=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())!=null?s:{};this.highlightGroup.visible=(a||this.visible)&&r===this,yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),n&&this.animationState.transition("resize"),this.animationState.transition("update")})}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=QD.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){var t;return(t=e?.fill)!=null?t:this.properties.marker.fill}updateMarkers(e,t){var i;const{angleKey:s,radiusKey:n,marker:a,visible:r}=this.properties;let o=[];if(r&&a.shape&&a.enabled)if(t){const c=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();c?.datum&&(o=[c])}else o=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0;e.update(o).each((c,h)=>{var u,d,p,g,f,m,v,y,b,_,S,D,A;const I=this.getMarkerFill(l),T=(d=(u=l?.stroke)!=null?u:a.stroke)!=null?d:this.properties.stroke,E=(f=(g=(p=l?.strokeWidth)!=null?p:a.strokeWidth)!=null?g:this.properties.strokeWidth)!=null?f:1,C=a.formatter?this.ctx.callbackCache.call(a.formatter,{datum:h.datum,angleKey:s,radiusKey:n,fill:I,stroke:T,strokeWidth:E,size:a.size,highlighted:t,seriesId:this.id}):void 0;c.fill=(m=C?.fill)!=null?m:I,c.stroke=(v=C?.stroke)!=null?v:T,c.strokeWidth=(y=C?.strokeWidth)!=null?y:E,c.fillOpacity=(_=(b=l?.fillOpacity)!=null?b:a.fillOpacity)!=null?_:1,c.strokeOpacity=(D=(S=a.strokeOpacity)!=null?S:this.properties.strokeOpacity)!=null?D:1,c.size=(A=C?.size)!=null?A:a.size;const{x:O,y:N}=h.point;c.translationX=O,c.translationY=N,c.visible=r&&c.size>0&&!isNaN(O)&&!isNaN(N)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}getTooltipHtml(e){var t;if(!this.properties.isValid())return"";const{id:i}=this,{angleKey:s,radiusKey:n,angleName:a,radiusName:r,marker:o,tooltip:l}=this.properties,{datum:c,angleValue:h,radiusValue:u}=e,d=typeof h=="number"?eA(h):String(h),p=typeof u=="number"?eA(u):String(u),g=tA(r),f=tA(`${d}: ${p}`),{formatter:m,fill:v,stroke:y,strokeWidth:b,size:_}=o,S=b??this.properties.strokeWidth,{fill:D}=(t=m&&this.ctx.callbackCache.call(m,{datum:c,angleKey:s,radiusKey:n,fill:v,stroke:y,strokeWidth:S,size:_,highlighted:!1,seriesId:i}))!=null?t:{fill:v};return l.toTooltipHtml({title:g,content:f,backgroundColor:D},{datum:c,angleKey:s,angleName:a,radiusKey:n,radiusName:r,title:g,color:D,seriesId:i})}getLegendData(e){var t,i,s,n,a,r,o,l,c,h;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category")return[];const{radiusKey:u,radiusName:d,stroke:p,strokeWidth:g,strokeOpacity:f,lineDash:m,visible:v,marker:y}=this.properties;return[{legendType:"category",id:this.id,itemId:u,seriesId:this.id,enabled:v,label:{text:d??u},marker:{shape:y.shape,fill:(n=(s=(i=this.getMarkerFill())!=null?i:y.stroke)!=null?s:p)!=null?n:"rgba(0, 0, 0, 0)",stroke:(r=(a=y.stroke)!=null?a:p)!=null?r:"rgba(0, 0, 0, 0)",fillOpacity:(o=y.fillOpacity)!=null?o:1,strokeOpacity:(c=(l=y.strokeOpacity)!=null?l:f)!=null?c:1,strokeWidth:(h=y.strokeWidth)!=null?h:0,enabled:y.enabled||g<=0},line:{stroke:p,strokeOpacity:f,strokeWidth:g,lineDash:m}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:s}=e;s.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,r=s.id===this.id||t&&n===1;this.toggleSeriesItem(i,r)}pickNodeClosestDatum(e){var t,i;const{x:s,y:n}=e,{rootGroup:a,nodeData:r,centerX:o,centerY:l}=this,c=a.transformPoint(s,n),h=this.radius;if(Math.sqrt(ze(s-o,2)+ze(n-l,2))>h+this.properties.marker.size)return;let d=1/0,p;for(const g of r){const{point:{x:f=NaN,y:m=NaN}={}}=g;if(isNaN(f)||isNaN(m))continue;const v=Math.sqrt(ze(c.x-f-o,2)+ze(c.y-m-l,2));v<d&&(d=v,p=g)}if(p){const g=Math.max(d-((i=(t=p.point)==null?void 0:t.size)!=null?i:0),0);return{datum:p,distance:g}}}computeLabelsBBox(){return Q(this,null,function*(){const{label:e}=this.properties;yield this.maybeRefreshNodeData();const t=[],i=new tB;return this.nodeData.forEach(s=>{if(!e.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(e),i.setAlign(s.label);const n=i.computeBBox();t.push(n)}),t.length===0?null:qP.merge(t)})}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const e=this.getLineNode();e.fill=void 0,e.lineJoin="round",e.lineCap="round",e.pointerEvents=JP.None,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const s=this.axes[jr.Y],n=this.axes[jr.X],a=n?.isReversed(),o=s?.isReversed()&&!a?[...e].reverse():e,l=[];let c=!1,h;return o.forEach((u,d)=>{let{x:p,y:g}=u.point;const f=isNaN(p)||isNaN(g);f||(h??(h=u)),f&&!i&&(p=0,g=0);const m=d===0||!t&&!i&&(f||c);l.push({x:p,y:g,moveTo:m}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:s}=e;s.clear({trackChanges:!0});const n=this.getAxisInnerRadius(),a=this.axes[jr.Y],o=a?.isReversed()?this.radius+n-a?.scale.convert(0):n;t.forEach(l=>{const{x:c,y:h,arc:u,radius:d=0,startAngle:p=0,endAngle:g=0,moveTo:f}=l,m=Math.atan2(h,c),v=o*Math.cos(m),y=o*Math.sin(m),b=i,_=v*(1-b)+c*b,S=y*(1-b)+h*b;u?s.arc(c,h,d,p,g):f?s.moveTo(_,S):s.lineTo(_,S)}),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints();this.animateSinglePath(this.getLineNode(),t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),jP(this,i,[e],"added"),KP(this,"labels",i,[t])}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear({trackChanges:!0}),i.forEach(({x:s,y:n,moveTo:a})=>{a?t.moveTo(s,n):t.lineTo(s,n)}),e.checkPathDirty()}}};bv.className="RadarSeries";var aB=(Y(),W(V)),{RATIO:rB,COLOR_STRING:oB,Validate:iA}=aB._ModuleSupport,Sv=class extends Je{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};k([iA(oB)],Sv.prototype,"fill",2),k([iA(rB)],Sv.prototype,"fillOpacity",2);var{Group:lB,Path:cB,PointerEvents:hB,Selection:uB}=vv._Scene,{ChartAxisDirection:sA}=vv._ModuleSupport,_v=class extends bv{constructor(e){super(e),this.properties=new Sv,this.resetInvalidToZero=!0;const t=new lB;t.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(t),this.areaSelection=uB.select(t,cB)}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(e){var t,i;return(i=(t=e?.fill)!=null?t:this.properties.marker.fill)!=null?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const e=this.getAreaNode();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.pointerEvents=hB.None,e.stroke=void 0}animatePaths(e){super.animatePaths(e),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),e)}getAreaPoints(){var e,t;const i=this.getLinePoints(),s=l=>{const c=this.axes[l];return c instanceof vv._ModuleSupport.PolarAxis?c:void 0},n=s(sA.Y),a=s(sA.X);if(!n?.isReversed())return i;const{points:o=[]}=(t=(e=a?.getAxisLinePoints)==null?void 0:e.call(a))!=null?t:{};return i.concat(...o)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.stroke=void 0,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,e.lineJoin=e.lineCap="round",t.clear({trackChanges:!0}),i.forEach(({x:s,y:n,moveTo:a,arc:r,radius:o=0,startAngle:l=0,endAngle:c=0})=>{r?t.arc(s,n,o,l,c):a?t.moveTo(s,n):t.lineTo(s,n)}),t.closePath(),e.checkPathDirty()}}};_v.className="RadarAreaSeries",_v.type="radar-area";var{markerPaletteFactory:dB}=yv._ModuleSupport,pB={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:_v,seriesDefaults:{axes:[{type:yv._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:yv._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:NP,paletteFactory:e=>{const{marker:t}=dB(e);return{stroke:t.stroke,fill:t.fill,marker:t}}},nA=(Y(),W(V)),Mv=class extends bv{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};Mv.className="RadarLineSeries",Mv.type="radar-line";var gB={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:Mv,seriesDefaults:{axes:[{type:nA._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:nA._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:OP,paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{stroke:t,marker:{fill:t,stroke:i}}}},aA=(Y(),W(V)),Sl=(Y(),W(V)),rA=(Y(),W(V)),{Label:fB}=rA._Scene,{SeriesProperties:mB,SeriesTooltip:yB,Validate:ti,COLOR_STRING:oA,DEGREE:vB,FUNCTION:xB,LINE_DASH:bB,NUMBER:SB,OBJECT:lA,POSITIVE_NUMBER:cA,RATIO:hA,STRING:fh}=rA._ModuleSupport,Ye=class extends mB{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new fB,this.tooltip=new yB}};k([ti(fh)],Ye.prototype,"angleKey",2),k([ti(fh)],Ye.prototype,"radiusKey",2),k([ti(fh,{optional:!0})],Ye.prototype,"angleName",2),k([ti(fh,{optional:!0})],Ye.prototype,"radiusName",2),k([ti(oA)],Ye.prototype,"fill",2),k([ti(hA)],Ye.prototype,"fillOpacity",2),k([ti(oA)],Ye.prototype,"stroke",2),k([ti(cA)],Ye.prototype,"strokeWidth",2),k([ti(hA)],Ye.prototype,"strokeOpacity",2),k([ti(bB)],Ye.prototype,"lineDash",2),k([ti(cA)],Ye.prototype,"lineDashOffset",2),k([ti(xB,{optional:!0})],Ye.prototype,"formatter",2),k([ti(vB)],Ye.prototype,"rotation",2),k([ti(fh,{optional:!0})],Ye.prototype,"stackGroup",2),k([ti(SB,{optional:!0})],Ye.prototype,"normalizedTo",2),k([ti(lA)],Ye.prototype,"label",2),k([ti(lA)],Ye.prototype,"tooltip",2);var _B=(Y(),W(V)),{motion:MB}=_B._Scene;function kB(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function uA(e){return{toFn:(s,n,a)=>{let r,o,l,c;return a==="removed"?(r=e,o=e,l=n.innerRadius,c=n.outerRadius):(r=n.startAngle,o=n.endAngle,l=isNaN(n.innerRadius)?s.innerRadius:n.innerRadius,c=isNaN(n.outerRadius)?s.outerRadius:n.outerRadius),{startAngle:r,endAngle:o,innerRadius:l,outerRadius:c}},fromFn:(s,n,a)=>{a=kB(s,n,a);let r,o,l,c;a==="removed"||a==="updated"?(r=s.startAngle,o=s.endAngle,l=s.innerRadius,c=s.outerRadius):(r=e,o=e,l=n.innerRadius,c=n.outerRadius);const h=MB.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:r,endAngle:o,innerRadius:l,outerRadius:c,phase:h}}}}function DB(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}}var{ChartAxisDirection:jn,PolarAxis:AB,diff:LB,isDefined:TB,groupAccumulativeValueProperty:dA,keyProperty:IB,normaliseGroupTo:EB,valueProperty:CB,fixNumericExtent:OB,resetLabelFn:NB,seriesLabelFadeInAnimation:RB,seriesLabelFadeOutAnimation:wB,animationValidation:PB}=Sl._ModuleSupport,{BandScale:BB}=Sl._Scale,{Sector:FB,motion:pA}=Sl._Scene,{angleBetween:zB,isNumber:gA,sanitizeHtml:fA}=Sl._Util,GB=class extends Sl._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},kv=class extends Sl._ModuleSupport.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:DB,label:NB}}),this.properties=new Ye,this.NodeClickEvent=GB,this.nodeData=[],this.groupScale=new BB,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new FB}addChartEventListeners(){var e,t;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:s}=this;if(!s||!i)return[];if(e===jn.X){const n=t[jn.X],a=i.getDomain(this,"angleValue-end","value",s),r=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return OB(r,n)}else return i.getDomain(this,"radiusValue","key",s)}processData(e){return Q(this,null,function*(){var t;if(!this.properties.isValid())return;const i=this.getStackId(),s=`${i}-trailing`,{angleKey:n,radiusKey:a,normalizedTo:r,visible:o}=this.properties,l=[];TB(r)&&l.push(EB(this,[i,s],Math.abs(r),"range"));const c=!this.ctx.animationManager.isSkipped();c&&(this.processedData&&l.push(LB(this.processedData)),l.push(PB(this)));const h=this.visible||!c?{}:{forceValue:0};yield this.requestDataModel(e,(t=this.data)!=null?t:[],{props:[IB(this,a,!1,{id:"radiusValue"}),CB(this,n,!0,At({id:"angleValue-raw",invalidValue:null},h)),...dA(this,n,!0,"normal","current",At({id:"angleValue-end",invalidValue:null,groupId:i},h)),...dA(this,n,!0,"trailing","current",At({id:"angleValue-start",invalidValue:null,groupId:s},h)),...l],dataVisible:o||c}),this.animationState.transition("updateData")})}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){return Q(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const e=this.axes[jn.Y];return e instanceof AB?this.radius*e.innerRadiusRatio:0}createNodeData(){return Q(this,null,function*(){var e,t;const{processedData:i,dataModel:s}=this;if(!i||!s||!this.properties.isValid())return[];const n=this.axes[jn.X],a=this.axes[jn.Y],r=n?.scale,o=a?.scale;if(!r||!o)return[];const l=s.resolveProcessedDataIndexById(this,"angleValue-start").index,c=s.resolveProcessedDataIndexById(this,"angleValue-end").index,h=s.resolveProcessedDataIndexById(this,"angleValue-raw").index;let u=0;a instanceof wr&&(u=a.groupPaddingInner);const{groupScale:d}=this,{index:p,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:g}).map((C,O)=>String(O)),d.range=[0,Math.abs((e=o.bandwidth)!=null?e:0)],d.paddingInner=g>1?u:0;const f=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,m=(t=this.axes[jn.Y])==null?void 0:t.isReversed(),v=m?this.radius:this.getAxisInnerRadius(),b=(m?this.getAxisInnerRadius():this.radius)+v,{angleKey:_,radiusKey:S,angleName:D,radiusName:A,label:I}=this.properties,T=(C,O,N,w)=>{const U=this.getLabelText(I,{value:O,datum:C,angleKey:_,radiusKey:S,angleName:D,radiusName:A},G=>gA(G)?G.toFixed(2):String(G));if(U)return{x:N,y:w,text:U,textAlign:"center",textBaseline:"middle"}},E=i.data.map((C,O)=>{const{datum:N,keys:w,values:U}=C,G=w[0],F=U[h],P=U[l],j=U[c];let z=Math.max(r.convert(P),r.range[0]),q=Math.min(r.convert(j),r.range[1]);z>q&&([z,q]=[q,z]),F<0&&([z,q]=[q,z]);const it=b-o.convert(G)+d.convert(String(p)),st=it+f,vt=(it+st)/2,H=z+zB(z,q)/2,at=Math.cos(H)*vt,ut=Math.sin(H)*vt,ct=this.properties.label.enabled?T(N,F,at,ut):void 0;return{series:this,datum:N,point:{x:at,y:ut,size:0},midPoint:{x:at,y:ut},label:ct,angleValue:F,radiusValue:G,innerRadius:it,outerRadius:st,startAngle:z,endAngle:q,index:O}});return[{itemId:S,nodeData:E,labelData:E}]})}update(e){return Q(this,arguments,function*({seriesRect:t}){const i=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(e,t){var i,s,n,a,r;let o=[];if(t){const f=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();f?.datum&&f.series===this&&(o=[f])}else o=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,c=(s=l?.fill)!=null?s:this.properties.fill,h=(n=l?.fillOpacity)!=null?n:this.properties.fillOpacity,u=(a=l?.stroke)!=null?a:this.properties.stroke,d=this.properties.strokeOpacity,p=(r=l?.strokeWidth)!=null?r:this.properties.strokeWidth,g=f=>f.radiusValue;e.update(o,void 0,g).each((f,m)=>{var v,y,b,_,S;const D=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:m,fill:c,stroke:u,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;f.fill=(v=D?.fill)!=null?v:c,f.fillOpacity=(y=D?.fillOpacity)!=null?y:h,f.stroke=(b=D?.stroke)!=null?b:u,f.strokeOpacity=d,f.strokeWidth=(_=D?.strokeWidth)!=null?_:p,f.lineDash=this.properties.lineDash,f.lineJoin="round",f.inset=u!=null?((S=D?.strokeWidth)!=null?S:p)/2:0,t&&(f.startAngle=m.startAngle,f.endAngle=m.endAngle,f.innerRadius=m.innerRadius,f.outerRadius=m.outerRadius)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1})}getBarTransitionFunctions(){var e;const t=(e=this.axes[jn.X])==null?void 0:e.scale;let i=0;if(!t)return uA(i);const s=Math.min(t.domain[0],t.domain[1]),n=Math.max(t.domain[0],t.domain[1]);return s<=0&&n>=0&&(i=t.convert(0)),uA(i)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();pA.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),RB(this,"labels",this.ctx.animationManager,[e])}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();pA.fromToMotion(this.id,"datums",t,[e],i),wB(this,"labels",t,[this.labelSelection])}getTooltipHtml(e){var t;const{id:i,axes:s,dataModel:n}=this,{angleKey:a,angleName:r,radiusKey:o,radiusName:l,fill:c,stroke:h,strokeWidth:u,formatter:d,tooltip:p}=this.properties,{angleValue:g,radiusValue:f,datum:m}=e,v=s[jn.X],y=s[jn.Y];if(!this.properties.isValid()||!(v&&y&&gA(g))||!n)return"";const b=v.formatDatum(g),_=y.formatDatum(f),S=fA(r),D=fA(`${_}: ${b}`),{fill:A}=(t=d&&this.ctx.callbackCache.call(d,{datum:m,fill:c,stroke:h,strokeWidth:u,highlighted:!1,angleKey:a,radiusKey:o,seriesId:i}))!=null?t:{fill:c};return p.toTooltipHtml({title:S,backgroundColor:c,content:D},{seriesId:i,datum:m,color:A,title:S,angleKey:a,radiusKey:o,angleName:r,radiusName:l})}getLegendData(e){var t;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||e!=="category")return[];const{angleKey:i,angleName:s,fill:n,stroke:a,fillOpacity:r,strokeOpacity:o,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:s??i},marker:{fill:n??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:r??1,strokeOpacity:o??1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:s}=e;s.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,r=s.id===this.id||t&&n===1;this.toggleSeriesItem(i,r)}computeLabelsBBox(){return null}getStackId(){var e,t;return`radialBar-stack-${(t=(e=this.seriesGrouping)==null?void 0:e.groupIndex)!=null?t:this.id}-xValues`}};kv.className="RadialBarSeries",kv.type="radial-bar";var mh=(Y(),W(V)),VB={series:{__extends__:mh._Theme.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:mh._Theme.DEFAULT_FONT_FAMILY,color:mh._Theme.DEFAULT_INVERTED_LABEL_COLOUR,__overrides__:mh._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[mh._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},UB={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:kv,seriesDefaults:{axes:[{type:aA._Theme.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:aA._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY}]},themeTemplate:VB,paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}},stackable:!0,groupable:!0},mA=(Y(),W(V)),yA=(Y(),W(V)),WB=(Y(),W(V)),{Validate:vA,RATIO:xA}=WB._ModuleSupport,Dv=class extends Re{};k([vA(xA,{optional:!0})],Dv.prototype,"columnWidthRatio",2),k([vA(xA,{optional:!0})],Dv.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:YB,PolarAxis:HB}=yA._ModuleSupport,{RadialColumnShape:KB,getRadialColumnWidth:jB}=yA._Scene,Av=class extends zD{constructor(e){super(e,{animationResetFns:{item:DP}}),this.properties=new Dv}getStackId(){var e,t;return`radarColumn-stack-${(t=(e=this.seriesGrouping)==null?void 0:e.groupIndex)!=null?t:this.id}-yValues`}nodeFactory(){return new KB}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return kP(e)}isRadiusAxisCircle(){const e=this.axes[YB.Y];return e instanceof HB?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return jB(e,t,this.radius,i,s)}};Av.className="RadialColumnSeries",Av.type="radial-column";var za=(Y(),W(V)),XB={series:{__extends__:za._Theme.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:za._Theme.DEFAULT_FONT_FAMILY,color:za._Theme.DEFAULT_LABEL_COLOUR,__overrides__:za._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[za._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:za._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[za._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:za._Theme.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},$B={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:Av,seriesDefaults:{axes:[{type:mA._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:mA._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:XB,paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}},stackable:!0,groupable:!0},yh=(Y(),W(V)),Ga=(Y(),W(V)),bA=(Y(),W(V)),{DropShadow:qB,Label:ZB}=bA._Scene,{CartesianSeriesProperties:QB,SeriesMarker:JB,SeriesTooltip:tF,Validate:ge,BOOLEAN:eF,COLOR_STRING:SA,LINE_DASH:iF,OBJECT:Mp,PLACEMENT:sF,POSITIVE_NUMBER:Lv,RATIO:_A,STRING:Xr}=bA._ModuleSupport,Tv=class extends ZB{constructor(){super(...arguments),this.placement="outside",this.padding=6}};k([ge(sF)],Tv.prototype,"placement",2),k([ge(Lv)],Tv.prototype,"padding",2);var Me=class extends QB{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new qB().set({enabled:!1}),this.marker=new JB,this.label=new Tv,this.tooltip=new tF,this.connectMissingData=!1}};k([ge(Xr)],Me.prototype,"xKey",2),k([ge(Xr)],Me.prototype,"yLowKey",2),k([ge(Xr)],Me.prototype,"yHighKey",2),k([ge(Xr,{optional:!0})],Me.prototype,"xName",2),k([ge(Xr,{optional:!0})],Me.prototype,"yName",2),k([ge(Xr,{optional:!0})],Me.prototype,"yLowName",2),k([ge(Xr,{optional:!0})],Me.prototype,"yHighName",2),k([ge(SA)],Me.prototype,"fill",2),k([ge(_A)],Me.prototype,"fillOpacity",2),k([ge(SA)],Me.prototype,"stroke",2),k([ge(Lv)],Me.prototype,"strokeWidth",2),k([ge(_A)],Me.prototype,"strokeOpacity",2),k([ge(iF)],Me.prototype,"lineDash",2),k([ge(Lv)],Me.prototype,"lineDashOffset",2),k([ge(Mp)],Me.prototype,"shadow",2),k([ge(Mp)],Me.prototype,"marker",2),k([ge(Mp)],Me.prototype,"label",2),k([ge(Mp)],Me.prototype,"tooltip",2),k([ge(eF)],Me.prototype,"connectMissingData",2);var{valueProperty:MA,trailingValueProperty:kA,keyProperty:nF,ChartAxisDirection:Va,mergeDefaults:aF,updateLabelNode:rF,fixNumericExtent:DA,AreaSeriesTag:Iv,buildResetPathFn:oF,resetLabelFn:lF,resetMarkerFn:cF,resetMarkerPositionFn:AA,pathSwipeInAnimation:hF,resetMotion:uF,markerSwipeScaleInAnimation:dF,seriesLabelFadeInAnimation:pF,animationValidation:gF,diff:fF,updateClipPath:LA}=Ga._ModuleSupport,{getMarker:mF,PointerEvents:Ev}=Ga._Scene,{sanitizeHtml:$r,extent:yF,isNumber:vF}=Ga._Util,xF={[Ga._ModuleSupport.ChartAxisDirection.X]:["xKey"],[Ga._ModuleSupport.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},bF={[Va.X]:["xName"],[Va.Y]:["yLowName","yHighName","yName"]},SF=class extends Ga._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},Cv=class N2 extends Ga._ModuleSupport.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:2,directionKeys:xF,directionNames:bF,animationResetFns:{path:oF({getOpacity:()=>this.getOpacity()}),label:lF,marker:(i,s)=>At(At({},cF(i)),AA(i,s))}}),this.properties=new Me,this.NodeClickEvent=SF}processData(t){return Q(this,null,function*(){var i;if(!this.properties.isValid())return;const{xKey:s,yLowKey:n,yHighKey:a}=this.properties,{isContinuousX:r,isContinuousY:o}=this.isContinuous(),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(fF(this.processedData)),c&&l.push(gF(this)),yield this.requestDataModel(t,(i=this.data)!=null?i:[],{props:[nF(this,s,r,{id:"xValue"}),MA(this,n,o,{id:"yLowValue",invalidValue:void 0}),MA(this,a,o,{id:"yHighValue",invalidValue:void 0}),kA(this,n,o,{id:"yLowTrailingValue",invalidValue:void 0}),kA(this,a,o,{id:"yHighTrailingValue",invalidValue:void 0}),...l],dataVisible:this.visible}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:i,dataModel:s,axes:n}=this;if(!(i&&s))return[];const{domain:{keys:[a],values:r}}=i;if(t===Va.X){const o=s.resolveProcessedDataDefById(this,"xValue"),l=n[Va.X];return o?.def.type==="key"&&o.def.valueType==="category"?a:DA(yF(a),l)}else{const o=s.resolveProcessedDataIndexById(this,"yLowValue").index,l=r[o],c=s.resolveProcessedDataIndexById(this,"yHighValue").index,h=r[c],u=[l[0]>h[0]?h[0]:l[0],h[1]<l[1]?l[1]:h[1]];return DA(u)}}createNodeData(){return Q(this,null,function*(){var t,i;const{data:s,dataModel:n,axes:a,visible:r}=this,o=a[Va.X],l=a[Va.Y];if(!(s&&r&&o&&l&&n))return[];const c=o.scale,h=l.scale,{xKey:u,yLowKey:d,yHighKey:p,connectMissingData:g,marker:f}=this.properties,m=`${d}-${p}`,v=((t=c.bandwidth)!=null?t:0)/2,y=n.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue","yHighTrailingValue","yLowTrailingValue"]),b=(F,P,j)=>{const z=c.convert(F)+v,q=h.convert(P),tt=h.convert(j);return[{point:{x:z,y:q},size:f.size,itemId:"high",yValue:P,xValue:F},{point:{x:z,y:tt},size:f.size,itemId:"low",yValue:j,xValue:F}]},_=F=>{const P=F,{point:j}=P,z=BM(P,["point"]);return bi(At({},z),{point:bi(At({},j),{moveTo:!0})})},S=[],D=[],A={itemId:m,points:[]},I={itemId:m,points:[]},T={itemId:m,labelData:S,nodeData:D,fillData:I,strokeData:A,scales:Bs(N2.prototype,this,"calculateScaling").call(this),visible:this.visible},E=I.points,C=[],O=A.points,N=[];let w,U=-1/0,G=-1/0;return(i=this.processedData)==null||i.data.forEach(({keys:F,datum:P,values:j},z)=>{const q=n.resolveProcessedDataDefsValues(y,{keys:F,values:j}),{xValue:tt,yHighValue:it,yLowValue:st}=q,H=it==null||st==null?[]:b(tt,it,st),at=st>it;H.forEach(({point:{x:ae,y:Vt},size:we,itemId:Ae="",yValue:Pe})=>{D.push({index:z,series:this,itemId:Ae,datum:P,midPoint:{x:ae,y:Vt},yHighValue:it,yLowValue:st,xValue:tt,xKey:u,yLowKey:d,yHighKey:p,point:{x:ae,y:Vt,size:we}});const ne=this.createLabelData({point:{x:ae,y:Vt},value:Pe,yLowValue:st,yHighValue:it,itemId:Ae,inverted:at,datum:P,series:this});S.push(ne)});const ut=U!=null&&G!=null,ct=w!=null&&ut,dt=tt!=null,ot=it!=null&&st!=null;let[yt,xt]=b(tt,it??0,st??0);if(!g)if(ot){if(!ut){const[ae,Vt]=b(tt,0,0);E.push(ae),C.push(Vt)}}else{const[ae,Vt]=b(w,0,0);E.push(ae),C.push(Vt)}dt&&ot&&(E.push(yt),C.push(xt)),dt&&ot&&!ct&&!g&&z>0&&(yt=_(yt),xt=_(xt)),dt&&ot&&(O.push(yt),N.push(xt)),w=tt,U=it,G=st}),E.length>0&&(E[0]=_(E[0])),E.push(...C.reverse()),N.length>0&&(N[0]=_(N[0])),O.push(...N),[T]})}createLabelData({point:t,value:i,itemId:s,inverted:n,datum:a,series:r}){const{xKey:o,yLowKey:l,yHighKey:c,xName:h,yName:u,yLowName:d,yHighName:p,label:g}=this.properties,{placement:f,padding:m=10}=g,v=n?s==="low"?"high":"low":s,y=f==="outside"&&v==="high"||f==="inside"&&v==="low"?-1:1;return{x:t.x,y:t.y+m*y,series:r,itemId:s,datum:a,text:this.getLabelText(g,{value:i,datum:a,itemId:s,xKey:o,yLowKey:l,yHighKey:c,xName:h,yLowName:d,yHighName:p,yName:u},b=>vF(b)?b.toFixed(2):String(b)),textAlign:"center",textBaseline:y===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,i=mF(t);return new i}updatePathNodes(t){return Q(this,null,function*(){const{opacity:i,visible:s}=t,[n,a]=t.paths,r=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:Iv.Stroke,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:Ev.None,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:i,visible:s}),n.setProperties({tag:Iv.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Ev.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:r,opacity:i,visible:s}),LA(this,a),LA(this,n)})}updatePaths(t){return Q(this,null,function*(){this.updateAreaPaths([t.paths],[t.contextData])})}updateAreaPaths(t,i){this.updateFillPath(t,i),this.updateStrokePath(t,i)}updateFillPath(t,i){i.forEach(({fillData:s},n)=>{const[a]=t[n],{path:r}=a;r.clear({trackChanges:!0});for(const{point:o}of s.points)o.moveTo?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y);r.closePath(),a.checkPathDirty()})}updateStrokePath(t,i){i.forEach(({strokeData:s},n)=>{const[,a]=t[n],{path:r}=a;r.clear({trackChanges:!0});for(const{point:o}of s.points)o.moveTo?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y);a.checkPathDirty()})}updateMarkerSelection(t){return Q(this,null,function*(){const{nodeData:i,markerSelection:s}=t;return this.properties.marker.isDirty()&&(s.clear(),s.cleanup()),s.update(this.properties.marker.enabled?i:[])})}updateMarkerNodes(t){return Q(this,null,function*(){const{markerSelection:i,isHighlight:s}=t,{xKey:n,yLowKey:a,yHighKey:r,marker:o,fill:l,stroke:c,strokeWidth:h,fillOpacity:u,strokeOpacity:d}=this.properties,p=aF(s&&this.properties.highlightStyle.item,o.getStyle(),{fill:l,fillOpacity:u,stroke:c,strokeWidth:h,strokeOpacity:d});i.each((g,f)=>{this.updateMarkerStyle(g,o,{datum:f,highlighted:s,xKey:n,yHighKey:r,yLowKey:a},p)}),s||this.properties.marker.markClean()})}updateLabelSelection(t){return Q(this,null,function*(){const{labelData:i,labelSelection:s}=t;return s.update(i,n=>{n.tag=Iv.Label,n.pointerEvents=Ev.None})})}updateLabelNodes(t){return Q(this,null,function*(){t.labelSelection.each((i,s)=>{rF(i,this.properties.label,s)})})}getHighlightLabelData(t,i){const s=t.filter(n=>n.datum===i.datum);return s.length>0?s:void 0}getHighlightData(t,i){const s=t.filter(n=>n.datum===i.datum);return s.length>0?s:void 0}getTooltipHtml(t){const i=this.axes[Va.X],s=this.axes[Va.Y];if(!this.properties.isValid()||!i||!s)return"";const{id:n}=this,{xKey:a,yLowKey:r,yHighKey:o,xName:l,yName:c,yLowName:h,yHighName:u,fill:d,tooltip:p}=this.properties,{datum:g,itemId:f,xValue:m,yLowValue:v,yHighValue:y}=t,b=d??"gray",_=$r(i.formatDatum(m)),S=$r(s.formatDatum(v)),D=$r(s.formatDatum(y)),A=l??a,I=h??r,T=u??o,E=$r(c),C=c?`<b>${$r(A)}</b>: ${_}<br><b>${$r(I)}</b>: ${S}<br><b>${$r(T)}</b>: ${D}<br>`:`${_}: ${S} - ${D}`;return p.toTooltipHtml({title:E,content:C,backgroundColor:b},{seriesId:n,itemId:f,datum:g,xKey:a,yLowKey:r,yHighKey:o,xName:l,yLowName:h,yHighName:u,yName:c,color:b})}getLegendData(t){var i,s;if(t!=="category")return[];const{yLowKey:n,yHighKey:a,yName:r,yLowName:o,yHighName:l,fill:c,stroke:h,strokeWidth:u,strokeOpacity:d,lineDash:p,visible:g,marker:f}=this.properties,m=r??`${o??n} - ${l??a}`;return[{legendType:"category",id:this.id,itemId:`${n}-${a}`,seriesId:this.id,enabled:g,label:{text:`${m}`},marker:{shape:f.shape,fill:(i=f.fill)!=null?i:c,stroke:(s=f.stroke)!=null?s:h,fillOpacity:f.fillOpacity,strokeOpacity:f.strokeOpacity,strokeWidth:f.strokeWidth},line:{stroke:h,strokeOpacity:d,strokeWidth:u,lineDash:p}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new Ga._Scene.Group}animateEmptyUpdateReady(t){const{markerSelections:i,labelSelections:s,contextData:n,paths:a}=t,{animationManager:r}=this.ctx;this.updateAreaPaths(a,n),hF(this,r,a.flat()),uF(i,AA),dF(this,r,i),pF(this,"labels",r,s)}animateReadyResize(t){const{contextData:i,paths:s}=t;this.updateAreaPaths(s,i),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:i,paths:s}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(s,i)}};Cv.className="RangeAreaSeries",Cv.type="range-area";var _F=Cv,_l=(Y(),W(V)),MF={series:{__extends__:_l._Theme.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:_l._Theme.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:_l._Theme.DEFAULT_FONT_FAMILY,color:_l._Theme.DEFAULT_LABEL_COLOUR,__overrides__:_l._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[_l._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:kF}=yh._ModuleSupport,DF={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:_F,seriesDefaults:{axes:[{type:yh._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:yh._Theme.POSITION.LEFT,crosshair:{enabled:!0,snap:!1}},{type:yh._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:yh._Theme.POSITION.BOTTOM}]},themeTemplate:MF,paletteFactory:e=>{const{marker:t}=kF(e);return{fill:t.fill,stroke:t.stroke,marker:t}}},kp=(Y(),W(V)),qr=(Y(),W(V)),TA=(Y(),W(V)),{DropShadow:AF,Label:LF}=TA._Scene,{AbstractBarSeriesProperties:TF,SeriesTooltip:IF,Validate:fe,COLOR_STRING:IA,FUNCTION:EF,LINE_DASH:CF,OBJECT:Ov,PLACEMENT:OF,POSITIVE_NUMBER:Dp,RATIO:EA,STRING:Zr}=TA._ModuleSupport,Nv=class extends LF{constructor(){super(...arguments),this.placement="inside",this.padding=6}};k([fe(OF)],Nv.prototype,"placement",2),k([fe(Dp)],Nv.prototype,"padding",2);var ke=class extends TF{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new AF().set({enabled:!1}),this.label=new Nv,this.tooltip=new IF}};k([fe(Zr)],ke.prototype,"xKey",2),k([fe(Zr)],ke.prototype,"yLowKey",2),k([fe(Zr)],ke.prototype,"yHighKey",2),k([fe(Zr,{optional:!0})],ke.prototype,"xName",2),k([fe(Zr,{optional:!0})],ke.prototype,"yName",2),k([fe(Zr,{optional:!0})],ke.prototype,"yLowName",2),k([fe(Zr,{optional:!0})],ke.prototype,"yHighName",2),k([fe(IA)],ke.prototype,"fill",2),k([fe(EA)],ke.prototype,"fillOpacity",2),k([fe(IA)],ke.prototype,"stroke",2),k([fe(Dp)],ke.prototype,"strokeWidth",2),k([fe(EA)],ke.prototype,"strokeOpacity",2),k([fe(CF)],ke.prototype,"lineDash",2),k([fe(Dp)],ke.prototype,"lineDashOffset",2),k([fe(Dp)],ke.prototype,"cornerRadius",2),k([fe(EF,{optional:!0})],ke.prototype,"formatter",2),k([fe(Ov)],ke.prototype,"shadow",2),k([fe(Ov)],ke.prototype,"label",2),k([fe(Ov)],ke.prototype,"tooltip",2);var{SeriesNodePickMode:NF,valueProperty:CA,keyProperty:RF,ChartAxisDirection:un,getRectConfig:wF,updateRect:PF,checkCrisp:BF,updateLabelNode:FF,CategoryAxis:zF,SMALLEST_KEY_INTERVAL:OA,diff:GF,prepareBarAnimationFunctions:NA,midpointStartingBarPosition:RA,resetBarSelectionsFn:VF,fixNumericExtent:Rv,seriesLabelFadeInAnimation:wA,resetLabelFn:UF,animationValidation:WF,createDatumId:YF}=qr._ModuleSupport,{ContinuousScale:wv,BandScale:HF,Rect:KF,PointerEvents:jF,motion:PA}=qr._Scene,{sanitizeHtml:Qr,isNumber:BA,extent:XF}=qr._Util,$F={[qr._ModuleSupport.ChartAxisDirection.X]:["xKey"],[qr._ModuleSupport.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},qF={[un.X]:["xName"],[un.Y]:["yLowName","yHighName","yName"]},ZF=class extends qr._ModuleSupport.SeriesNodeClickEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},Pv=class R2 extends qr._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[NF.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:$F,directionNames:qF,datumSelectionGarbageCollection:!1,animationResetFns:{datum:VF,label:UF}}),this.properties=new ke,this.NodeClickEvent=ZF,this.groupScale=new HF,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===un.X?t===un.X?un.Y:un.X:t}processData(t){return Q(this,null,function*(){var i,s,n,a,r;if(!this.properties.isValid())return;const{xKey:o,yLowKey:l,yHighKey:c}=this.properties,h=wv.is((i=this.getCategoryAxis())==null?void 0:i.scale),u=wv.is((s=this.getValueAxis())==null?void 0:s.scale),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(GF(this.processedData)),d.push(WF(this)));const p=this.visible?{}:{forceValue:0},{processedData:g}=yield this.requestDataModel(t,(n=this.data)!=null?n:[],{props:[RF(this,o,h,{id:"xValue"}),CA(this,l,u,At({id:"yLowValue"},p)),CA(this,c,u,At({id:"yHighValue"},p)),...h?[OA]:[],...d],groupByKeys:!0});this.smallestDataInterval={x:(r=(a=g.reduced)==null?void 0:a.smallestKeyInterval)!=null?r:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var i;const{processedData:s,dataModel:n}=this;if(!(s&&n))return[];const{domain:{keys:[a],values:r}}=s;if(t===this.getCategoryDirection()){const o=n.resolveProcessedDataDefById(this,"xValue");if(o?.def.type==="key"&&o?.def.valueType==="category")return a;const{reduced:{[OA.property]:l}={}}=s,c=l!=null&&isFinite(l)?l:0,h=(i=XF(a))!=null?i:[NaN,NaN],u=this.getCategoryAxis(),d=u?.isReversed();if(t===un.Y){const f=h[0]+(d?0:-c),m=h[1]+(d?c:0);return Rv([f,m],u)}const p=h[0]+(d?-c:0),g=h[1]+(d?0:c);return Rv([p,g],u)}else{const o=n.resolveProcessedDataIndexById(this,"yLowValue").index,l=r[o],c=n.resolveProcessedDataIndexById(this,"yHighValue").index,h=r[c],u=[l[0]>h[0]?h[0]:l[0],h[1]<l[1]?l[1]:h[1]];return Rv(u)}}createNodeData(){return Q(this,null,function*(){const{data:t,dataModel:i,groupScale:s,processedData:n,smallestDataInterval:a,ctx:{seriesStateManager:r},properties:{visible:o}}=this,l=this.getCategoryAxis(),c=this.getValueAxis();if(!(t&&o&&l&&c&&i))return[];const h=l.scale,u=c.scale,d=this.getBarDirection()===un.X,{xKey:p,yLowKey:g,yHighKey:f,fill:m,stroke:v,strokeWidth:y}=this.properties,b=`${g}-${f}`,_=[],S=[],{index:D,visibleGroupCount:A}=r.getVisiblePeerGroupIndex(this);for(let N=0;N<A;N++)S.push(String(N));const I=wv.is(h)?h.calcBandwidth(a?.x):h.bandwidth;s.domain=S,s.range=[0,I??0],l instanceof zF?s.paddingInner=l.groupPaddingInner:s.padding=0,s.round=s.padding!==0;const T=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,E=i.resolveProcessedDataIndexById(this,"yLowValue").index,C=i.resolveProcessedDataIndexById(this,"yHighValue").index,O=i.resolveProcessedDataIndexById(this,"xValue").index;return n?.data.forEach(({keys:N,datum:w,values:U},G)=>{U.forEach((F,P)=>{var j;(j=_[P])!=null||(_[P]={itemId:b,nodeData:[],labelData:[],scales:Bs(R2.prototype,this,"calculateScaling").call(this),visible:this.visible});const z=N[O],q=Math.round(h.convert(z))+s.convert(String(D)),tt=F[E],it=F[C],st=Math.min(tt,it),vt=Math.max(tt,it),H=Math.round(u.convert(st)),ut=Math.round(u.convert(vt)),ct=H,dt=Math.max(y,Math.abs(ct-ut)),ot={x:d?Math.min(ut,ct):q,y:d?q:Math.min(ut,ct),width:d?dt:T,height:d?T:dt},yt={x:ot.x+ot.width/2,y:ot.y+ot.height/2},xt=this.createLabelData({rect:ot,barAlongX:d,yLowValue:st,yHighValue:vt,datum:w[P],series:this}),Ht={index:G,series:this,itemId:b,datum:w[P],xValue:z,yLowValue:tt,yHighValue:it,yLowKey:g,yHighKey:f,xKey:p,x:ot.x,y:ot.y,width:ot.width,height:ot.height,midPoint:yt,fill:m,stroke:v,strokeWidth:y,opacity:1,labels:xt};_[P].nodeData.push(Ht),_[P].labelData.push(...xt)})}),_})}createLabelData({rect:t,barAlongX:i,yLowValue:s,yHighValue:n,datum:a,series:r}){const{xKey:o,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:p,label:g}=this.properties,f={datum:a,xKey:o,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:p},{placement:m,padding:v}=g,b=v*(m==="outside"?1:-1),_={x:t.x+(i?-b:t.width/2),y:t.y+(i?t.height/2:t.height+b),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(g,At({itemId:"low",value:s},f),D=>BA(D)?D.toFixed(2):""),itemId:"low",datum:a,series:r},S={x:t.x+(i?t.width+b:t.width/2),y:t.y+(i?t.height/2:-b),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(g,At({itemId:"high",value:n},f),D=>BA(D)?D.toFixed(2):""),itemId:"high",datum:a,series:r};return m==="outside"&&(_.textAlign=i?"right":"center",_.textBaseline=i?"middle":"top",S.textAlign=i?"left":"center",S.textBaseline=i?"middle":"bottom"),[_,S]}nodeFactory(){return new KF}updateDatumSelection(t){return Q(this,null,function*(){const{nodeData:i,datumSelection:s}=t,n=i??[];return s.update(n,void 0,a=>this.getDatumId(a))})}updateDatumNodes(t){return Q(this,null,function*(){const{datumSelection:i,isHighlight:s}=t,{id:n,ctx:a}=this,{yLowKey:r,yHighKey:o,highlightStyle:{item:l}}=this.properties,c=this.axes[un.X],h=BF(c?.visibleRange),u=this.getCategoryDirection()===un.X;i.each((d,p)=>{const{fillOpacity:g,strokeOpacity:f,strokeWidth:m,lineDash:v,lineDashOffset:y,formatter:b,shadow:_}=this.properties,S={fill:p.fill,stroke:p.stroke,fillOpacity:g,strokeOpacity:f,lineDash:v,lineDashOffset:y,fillShadow:_,strokeWidth:this.getStrokeWidth(m),cornerRadius:this.properties.cornerRadius,cornerRadiusBbox:void 0},D=u?p.width>0:p.height>0,A=wF({datum:p,lowValue:p.yLowValue,highValue:p.yHighValue,isHighlighted:s,style:S,highlightStyle:l,formatter:b,seriesId:n,itemId:p.itemId,ctx:a,yLowKey:r,yHighKey:o});A.crisp=h,A.visible=D,PF({rect:d,config:A})})})}getHighlightLabelData(t,i){const s=t.filter(n=>n.datum===i.datum);return s.length>0?s:void 0}updateLabelSelection(t){return Q(this,null,function*(){const i=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(i,s=>{s.pointerEvents=jF.None})})}updateLabelNodes(t){return Q(this,null,function*(){t.labelSelection.each((i,s)=>{FF(i,this.properties.label,s)})})}getTooltipHtml(t){var i,s;const{id:n,ctx:{callbackCache:a}}=this,r=this.getCategoryAxis(),o=this.getValueAxis();if(!this.properties.isValid()||!r||!o)return"";const{xKey:l,yLowKey:c,yHighKey:h,xName:u,yLowName:d,yHighName:p,yName:g,fill:f,strokeWidth:m,formatter:v,tooltip:y}=this.properties,{datum:b,itemId:_,xValue:S,yLowValue:D,yHighValue:A}=t;let I;v&&(I=a.call(v,{datum:b,xKey:l,yLowKey:c,yHighKey:h,fill:f,strokeWidth:m,highlighted:!1,seriesId:n,itemId:_}));const T=(s=(i=I?.fill)!=null?i:f)!=null?s:"gray",E=Qr(r.formatDatum(S)),C=Qr(o.formatDatum(D)),O=Qr(o.formatDatum(A)),N=u??l,w=d??c,U=p??h,G=Qr(g),F=g?`<b>${Qr(N)}</b>: ${E}<br><b>${Qr(w)}</b>: ${C}<br><b>${Qr(U)}</b>: ${O}<br>`:`${E}: ${C} - ${O}`,P={title:G,content:F,backgroundColor:T};return y.toTooltipHtml(P,{datum:b,xKey:l,xName:u,yLowKey:c,yLowName:d,yHighKey:h,yHighName:p,yName:g,color:T,seriesId:n,itemId:_})}getLegendData(t){const{id:i,visible:s}=this;if(t!=="category")return[];const{fill:n,stroke:a,strokeWidth:r,fillOpacity:o,strokeOpacity:l,yName:c,yLowName:h,yHighName:u,yLowKey:d,yHighKey:p}=this.properties,g=c??`${h??d} - ${u??p}`;return[{legendType:"category",id:i,itemId:`${d}-${p}`,seriesId:i,enabled:s,label:{text:`${g}`},marker:{fill:n,stroke:a,fillOpacity:o,strokeOpacity:l,strokeWidth:r}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:i}){const s=NA(RA(this.isVertical(),"normal"));PA.fromToMotion(this.id,"datums",this.ctx.animationManager,t,s),wA(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var i;const{datumSelections:s,labelSelections:n}=t,{processedData:a}=this,r=(i=a?.reduced)==null?void 0:i.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=NA(RA(this.isVertical(),"fade"));PA.fromToMotion(this.id,"datums",this.ctx.animationManager,s,o,(l,c)=>YF(c.xValue),r),wA(this,"labels",this.ctx.animationManager,n)}getDatumId(t){return`${t.xValue}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}};Pv.className="RangeBarSeries",Pv.type="range-bar";var QF=Pv,vh=(Y(),W(V)),JF={series:{__extends__:vh._Theme.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:vh._Theme.DEFAULT_FONT_FAMILY,color:vh._Theme.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside",__overrides__:vh._Theme.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[vh._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},tz={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:QF,seriesDefaults:{axes:[{type:kp._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:kp._Theme.POSITION.BOTTOM},{type:kp._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:kp._Theme.POSITION.LEFT}]},themeTemplate:JF,paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}},groupable:!0,swapDefaultAxesCondition:({direction:e})=>e==="horizontal"},FA=(Y(),W(V)),Ap=(Y(),W(V)),ez=(Y(),W(V)),{HierarchySeriesProperties:iz,HighlightStyle:sz,SeriesTooltip:nz,Validate:De,COLOR_STRING:az,FUNCTION:rz,NUMBER:zA,OBJECT:Ml,POSITIVE_NUMBER:GA,RATIO:Lp,STRING:Tp}=ez._ModuleSupport,Ua=class extends sz{constructor(){super(...arguments),this.label=new zs,this.secondaryLabel=new zs}};k([De(Tp,{optional:!0})],Ua.prototype,"fill",2),k([De(Lp,{optional:!0})],Ua.prototype,"fillOpacity",2),k([De(az,{optional:!0})],Ua.prototype,"stroke",2),k([De(GA,{optional:!0})],Ua.prototype,"strokeWidth",2),k([De(Lp,{optional:!0})],Ua.prototype,"strokeOpacity",2),k([De(Ml)],Ua.prototype,"label",2),k([De(Ml)],Ua.prototype,"secondaryLabel",2);var Ni=class extends iz{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.highlightStyle=new Ua,this.label=new zs,this.secondaryLabel=new Sp,this.tooltip=new nz}};k([De(Tp,{optional:!0})],Ni.prototype,"sizeName",2),k([De(Tp,{optional:!0})],Ni.prototype,"labelKey",2),k([De(Tp,{optional:!0})],Ni.prototype,"secondaryLabelKey",2),k([De(Lp)],Ni.prototype,"fillOpacity",2),k([De(GA)],Ni.prototype,"strokeWidth",2),k([De(Lp)],Ni.prototype,"strokeOpacity",2),k([De(zA,{optional:!0})],Ni.prototype,"sectorSpacing",2),k([De(zA,{optional:!0})],Ni.prototype,"padding",2),k([De(rz,{optional:!0})],Ni.prototype,"formatter",2),k([De(Ml)],Ni.prototype,"highlightStyle",2),k([De(Ml)],Ni.prototype,"label",2),k([De(Ml)],Ni.prototype,"secondaryLabel",2),k([De(Ml)],Ni.prototype,"tooltip",2);var{fromToMotion:oz}=Ap._ModuleSupport,{Sector:Bv,Group:VA,Selection:UA,Text:xh}=Ap._Scene,{sanitizeHtml:Fv}=Ap._Util,WA=(e,t=0,i=2*Math.PI/e.sumSize,s=Array.from(e,()=>{}))=>{let n=t;for(const a of e.children){const r=n,o=n+a.sumSize*i;s[a.index]={start:r,end:o},WA(a,r,i,s),n=o}return s},zv=class w2 extends Ap._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Ni,this.groupSelection=UA.select(this.contentGroup,VA),this.highlightSelection=UA.select(this.highlightGroup,VA),this.angleData=[]}processData(){return Q(this,null,function*(){const{childrenKey:t,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:o}=this.properties;Bs(w2.prototype,this,"processData").call(this),this.angleData=WA(this.rootNode);const l=c=>typeof c=="number"?c.toFixed(2):typeof c=="string"?c:"";this.labelData=Array.from(this.rootNode,({datum:c,depth:h})=>{let u;if(c!=null&&h!=null&&n!=null){const p=c[n];u=this.getLabelText(this.properties.label,{depth:h,datum:c,childrenKey:t,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:o,value:p},l)}u===""&&(u=void 0);let d;if(c!=null&&h!=null&&a!=null){const p=c[a];d=this.getLabelText(this.properties.secondaryLabel,{depth:h,datum:c,childrenKey:t,colorKey:i,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:o,value:p},l)}return d===""&&(d=void 0),u!=null||d!=null?{label:u,secondaryLabel:d}:void 0})})}updateSelections(){return Q(this,null,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const s=Array.from(this.rootNode),n=a=>{a.append([new Bv,new xh({tag:0}),new xh({tag:1})])};this.groupSelection.update(s,n,a=>this.getDatumId(a)),this.highlightSelection.update(s,n,a=>this.getDatumId(a))})}updateNodes(){return Q(this,null,function*(){var t;const{chart:i,data:s,maxDepth:n,labelData:a}=this;if(i==null||s==null||a==null)return;const{width:r,height:o}=i.seriesRect,{sectorSpacing:l=0,padding:c=0,highlightStyle:h}=this.properties;this.contentGroup.translationX=r/2,this.contentGroup.translationY=o/2,this.highlightGroup.translationX=r/2,this.highlightGroup.translationY=o/2;const u=l*.5,p=Math.min(r,o)/2/(n+1),g=-Math.PI/2,f=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();new xh().setFont(this.properties.label),this.rootNode.walk(_=>{const S=this.angleData[_.index];if(_.depth!=null&&S!=null){const D=S.end-S.start,A=(_.depth+.5)*p;_.midPoint.x=Math.cos(D)*A,_.midPoint.y=Math.sin(D)*A}});const v=(_,S,D)=>{var A,I,T,E,C,O,N,w,U,G;const{depth:F}=_,P=this.angleData[_.index];if(F==null||P==null){S.visible=!1;return}S.visible=!0;let j,z,q,tt,it;D&&(j=h.fill,z=h.fillOpacity,q=h.stroke,tt=h.strokeWidth,it=h.strokeOpacity);const st=this.getSectorFormat(_,D),vt=(I=(A=st?.fill)!=null?A:j)!=null?I:_.fill,H=(E=(T=st?.fillOpacity)!=null?T:z)!=null?E:this.properties.fillOpacity,at=(O=(C=st?.stroke)!=null?C:q)!=null?O:_.stroke,ut=(w=(N=st?.strokeWidth)!=null?N:tt)!=null?w:this.properties.strokeWidth,ct=(G=(U=st?.strokeOpacity)!=null?U:it)!=null?G:this.properties.strokeOpacity;S.fill=vt,S.fillOpacity=H,S.stroke=at,S.strokeWidth=ut,S.strokeOpacity=ct,S.centerX=0,S.centerY=0,S.innerRadius=F*p,S.outerRadius=(F+1)*p,S.angleOffset=g,S.startAngle=P.start,S.endAngle=P.end,S.inset=u+ut*.5};this.groupSelection.selectByClass(Bv).forEach(_=>{v(_.datum,_,!1)}),this.highlightSelection.selectByClass(Bv).forEach(_=>{const S=_.datum,D=f===S;_.visible=D,_.visible&&v(_.datum,_,D)});const y=Array.from(this.rootNode,(_,S)=>{const{depth:D}=_,A=a[S],I=this.angleData[S];if(D==null||I==null)return;const T=D*p+u,E=(D+1)*p-u,C=T>u?u/T:u,O=E>u?u/E:u,N=I.start+C,U=I.end+C-N,G=I.start+O,P=I.end+O-G,j=ot=>{var yt;if(D===0&&((yt=_.parent)==null?void 0:yt.sumSize)===_.sumSize)return{width:2*Math.sqrt(ze(E,2)-ze(ot*.5,2)),height:ot,meta:0};const Ht=ot,ae=2*Math.sqrt(ze(E,2)-ze(T+Ht,2)),Vt=U<Math.PI?2*T*Math.tan(U*.5):1/0,we=Math.min(ae,Vt);let Ae,Pe;return D===0?(Ae=ot,Pe=Math.sqrt(ze(E,2)-ze(Ae/2,2))-ot/(2*Math.tan(P*.5))):(Ae=2*T*Math.tan(U*.5),Pe=Math.sqrt(ze(E,2)-ze(Ae/2,2))-T),we>=Pe?{width:we,height:Ht,meta:1}:{width:Pe,height:Ae,meta:2}},z=dv(A?.label,this.properties.label,A?.secondaryLabel,this.properties.secondaryLabel,{padding:c},j);if(z==null)return;const{width:q,height:tt,meta:it,label:st,secondaryLabel:vt}=z,H=g+(I.start+I.end)/2,at=Math.sin(H)>=0,ut=Math.cos(H)>=0,ct=(at?3:12)&(ut?6:9);let dt;switch(it){case 0:dt=0;break;case 1:{const yt=E-(p-tt)*.58,xt=Math.sqrt(ze(E-c,2)-ze(q/2,2));dt=Math.min(yt,xt);break}case 2:if(D===0){const ot=tt/(2*Math.tan(U*.5))+q*.5,yt=Math.sqrt(ze(E,2)-ze(tt*.5,2))-q*.5;dt=(ot+yt)*.5}else dt=(T+E)*.5;break}return{width:q,height:tt,labelPlacement:it,circleQuarter:ct,radius:dt,theta:H,label:st,secondaryLabel:vt}}),b=(_,S,D,A)=>{const{index:I,depth:T}=_,E=y?.[I],C=D===0?this.properties.label:this.properties.secondaryLabel,O=D===0?E?.label:E?.secondaryLabel;if(T==null||E==null||O==null){S.visible=!1;return}const{height:N,labelPlacement:w,circleQuarter:U,radius:G,theta:F}=E;let P;switch(A&&(P=(D===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),S.text=O.text,S.fontSize=O.fontSize,S.lineHeight=O.lineHeight,S.fontStyle=C.fontStyle,S.fontFamily=C.fontFamily,S.fontWeight=C.fontWeight,S.fill=P??C.color,w){case 0:S.textAlign="center",S.textBaseline="top",S.translationX=0,S.translationY=(D===0?0:N-O.height)-N*.5,S.rotation=0;break;case 1:{const j=(U&3)!==0,z=D===0==!j?G:G-(N-O.height);S.textAlign="center",S.textBaseline=j?"bottom":"top",S.translationX=Math.cos(F)*z,S.translationY=Math.sin(F)*z,S.rotation=j?F-Math.PI*.5:F+Math.PI*.5;break}case 2:{const j=(U&6)!==0,z=D===0==!j?(N-O.height)*.5:(O.height-N)*.5;S.textAlign="center",S.textBaseline="middle",S.translationX=Math.cos(F)*G+Math.cos(F+Math.PI/2)*z,S.translationY=Math.sin(F)*G+Math.sin(F+Math.PI/2)*z,S.rotation=j?F:F+Math.PI;break}}S.visible=!0};this.groupSelection.selectByClass(xh).forEach(_=>{b(_.datum,_,_.tag,!1)}),this.highlightSelection.selectByClass(xh).forEach(_=>{const S=_.datum,D=f===S;_.visible=D,_.visible&&b(_.datum,_,_.tag,D)})})}getSectorFormat(t,i){const{datum:s,fill:n,stroke:a,depth:r}=t,{ctx:{callbackCache:o},properties:{formatter:l}}=this;if(!l||s==null||r==null)return{};const{colorKey:c,labelKey:h,sizeKey:u,strokeWidth:d}=this.properties,p=o.call(l,{seriesId:this.id,depth:r,datum:s,colorKey:c,labelKey:h,sizeKey:u,fill:n,stroke:a,strokeWidth:d,highlighted:i});return p??{}}getTooltipHtml(t){var i;const{id:s}=this,{tooltip:n,colorKey:a,colorName:r=a,labelKey:o,secondaryLabelKey:l,sizeKey:c,sizeName:h=c}=this.properties,{datum:u,depth:d}=t;if(u==null||d==null)return"";const p=o!=null?u[o]:void 0,g=this.getSectorFormat(t,!1),f=(i=g?.fill)!=null?i:t.fill;if(!n.renderer&&!p)return"";const m=[],v=l!=null?u[l]:void 0;v!=null&&l!==a&&l!==c&&m.push(Fv(v));const y=c!=null?u[c]:void 0;y!=null&&m.push(`${h}: ${Fv(y)}`);const b=a!=null?u[a]:void 0;b!=null&&m.push(`${r}: ${Fv(b)}`);const _=m.join("<br>"),S={title:p,color:this.properties.label.color,backgroundColor:f,content:_};return n.toTooltipHtml(S,{depth:d,datum:u,colorKey:a,labelKey:o,secondaryLabelKey:l,sizeKey:c,title:p,color:f,seriesId:s})}createNodeData(){return Q(this,null,function*(){return[]})}animateEmptyUpdateReady({datumSelections:t}){oz(this.id,"nodes",this.ctx.animationManager,t,{toFn(i,s,n){return{scalingX:1,scalingY:1}},fromFn(i,s,n){return n==="unknown"&&s!=null&&i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}};zv.className="SunburstSeries",zv.type="sunburst";var lz=zv,{EXTENDS_SERIES_DEFAULTS:cz,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Ip}=FA._Theme,hz={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:lz,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:cz,label:{fontSize:14,minimumFontSize:9,color:Ip,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:Ip,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:Ip},secondaryLabel:{color:Ip},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:e,colorsCount:t,themeTemplateParameters:i})=>{const{properties:s}=i,{fills:n,strokes:a}=e(t),r=s.get(FA._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE);return{fills:n,strokes:a,colorRange:r}}},uz=(Y(),W(V)),Gv=(Y(),W(V)),YA=(Y(),W(V)),{Label:dz}=YA._Scene,{BaseProperties:Ep,HierarchySeriesProperties:pz,HighlightStyle:gz,SeriesTooltip:fz,Validate:lt,BOOLEAN:mz,COLOR_STRING:Cp,FUNCTION:yz,NUMBER:vz,OBJECT:ys,POSITIVE_NUMBER:Wa,RATIO:Ya,STRING:Jr,STRING_ARRAY:HA,TEXT_ALIGN:KA,VERTICAL_ALIGN:xz}=YA._ModuleSupport,jA=class extends dz{constructor(){super(...arguments),this.spacing=0}};k([lt(vz)],jA.prototype,"spacing",2);var Gs=class extends Ep{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new jA}};k([lt(Jr,{optional:!0})],Gs.prototype,"fill",2),k([lt(Ya)],Gs.prototype,"fillOpacity",2),k([lt(Cp,{optional:!0})],Gs.prototype,"stroke",2),k([lt(Wa)],Gs.prototype,"strokeWidth",2),k([lt(Ya)],Gs.prototype,"strokeOpacity",2),k([lt(KA)],Gs.prototype,"textAlign",2),k([lt(Wa)],Gs.prototype,"gap",2),k([lt(Wa)],Gs.prototype,"padding",2),k([lt(mz)],Gs.prototype,"interactive",2),k([lt(ys)],Gs.prototype,"label",2);var vs=class extends Ep{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new zs,this.secondaryLabel=new Sp}};k([lt(Jr,{optional:!0})],vs.prototype,"fill",2),k([lt(Ya)],vs.prototype,"fillOpacity",2),k([lt(Cp,{optional:!0})],vs.prototype,"stroke",2),k([lt(Wa,{optional:!0})],vs.prototype,"strokeWidth",2),k([lt(Ya)],vs.prototype,"strokeOpacity",2),k([lt(KA)],vs.prototype,"textAlign",2),k([lt(xz)],vs.prototype,"verticalAlign",2),k([lt(Wa)],vs.prototype,"gap",2),k([lt(Wa)],vs.prototype,"padding",2),k([lt(ys)],vs.prototype,"label",2),k([lt(ys)],vs.prototype,"secondaryLabel",2);var to=class extends Ep{constructor(){super(...arguments),this.label=new zs}};k([lt(Jr,{optional:!0})],to.prototype,"fill",2),k([lt(Ya,{optional:!0})],to.prototype,"fillOpacity",2),k([lt(Cp,{optional:!0})],to.prototype,"stroke",2),k([lt(Wa,{optional:!0})],to.prototype,"strokeWidth",2),k([lt(Ya,{optional:!0})],to.prototype,"strokeOpacity",2),k([lt(ys)],to.prototype,"label",2);var Ha=class extends Ep{constructor(){super(...arguments),this.label=new zs,this.secondaryLabel=new Sp}};k([lt(Jr,{optional:!0})],Ha.prototype,"fill",2),k([lt(Ya,{optional:!0})],Ha.prototype,"fillOpacity",2),k([lt(Cp,{optional:!0})],Ha.prototype,"stroke",2),k([lt(Wa,{optional:!0})],Ha.prototype,"strokeWidth",2),k([lt(Ya,{optional:!0})],Ha.prototype,"strokeOpacity",2),k([lt(ys)],Ha.prototype,"label",2),k([lt(ys)],Ha.prototype,"secondaryLabel",2);var Vv=class extends gz{constructor(){super(...arguments),this.group=new to,this.tile=new Ha}};k([lt(ys)],Vv.prototype,"group",2),k([lt(ys)],Vv.prototype,"tile",2);var Vs=class extends pz{constructor(){super(...arguments),this.highlightStyle=new Vv,this.tooltip=new fz,this.group=new Gs,this.tile=new vs,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};k([lt(Jr,{optional:!0})],Vs.prototype,"sizeName",2),k([lt(Jr,{optional:!0})],Vs.prototype,"labelKey",2),k([lt(Jr,{optional:!0})],Vs.prototype,"secondaryLabelKey",2),k([lt(yz,{optional:!0})],Vs.prototype,"formatter",2),k([lt(ys)],Vs.prototype,"highlightStyle",2),k([lt(ys)],Vs.prototype,"tooltip",2),k([lt(ys)],Vs.prototype,"group",2),k([lt(ys)],Vs.prototype,"tile",2),k([lt(HA)],Vs.prototype,"undocumentedGroupFills",2),k([lt(HA)],Vs.prototype,"undocumentedGroupStrokes",2);var{Rect:Uv,Group:XA,BBox:Op,Selection:$A,Text:kl}=Gv._Scene,{Color:bz,Logger:Sz,isEqual:_z,sanitizeHtml:Wv}=Gv._Util,qA=new kl;function Mz(e,t){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a}=t;qA.setProperties({text:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:r,height:o}=qA.computeBBox();return{width:r,height:o}}function ZA(e){if(typeof e=="string"&&!bz.validColorString(e)){const t="black";return Sz.warnOnce(`invalid Treemap tile colour string "${e}". Affected treemap tiles will be coloured ${t}.`),t}return e}function Ka(e){return e.children.length>0?e.sumSize-e.size:e.size}var QA={left:0,center:.5,right:1},kz={top:0,middle:.5,bottom:1},Yv=class P2 extends Gv._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Vs,this.groupSelection=$A.select(this.contentGroup,XA),this.highlightSelection=$A.select(this.highlightGroup,XA)}groupTitleHeight(t,i){var s,n;const a=(n=(s=this.labelData)==null?void 0:s[t.index])==null?void 0:n.label,{label:r}=this.properties.group,o=3;if(a!=null){if(r.fontSize>i.width/o||r.fontSize>i.height/o)return;{const{height:l}=Mz(a,r);return Math.max(l,r.fontSize)}}}getNodePadding(t,i){if(t.index===0)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:o}=this.properties.tile;return{top:o,right:o,bottom:o,left:o}}const{label:{spacing:s},padding:n}=this.properties.group,a=this.groupTitleHeight(t,i),r=a!=null?a+s:0;return{top:n+r,right:n,bottom:n,left:n}}processData(){return Q(this,null,function*(){var t;yield Bs(P2.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:r,sizeKey:o,sizeName:l,tile:c,group:h}=this.properties;if(!((t=this.data)!=null&&t.length)){this.labelData=void 0;return}const u=d=>typeof d=="number"?d.toFixed(2):typeof d=="string"?d:"";this.labelData=Array.from(this.rootNode,({datum:d,depth:p,children:g})=>{const f=g.length===0,m=f?c.label:h.label;let v;if(d!=null&&p!=null&&a!=null){const b=d[a];v=this.getLabelText(m,{depth:p,datum:d,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:r,sizeKey:o,sizeName:l,value:b},u)}v===""&&(v=void 0);let y;if(f&&d!=null&&p!=null&&r!=null){const b=d[r];y=this.getLabelText(c.secondaryLabel,{depth:p,datum:d,childrenKey:i,colorKey:s,colorName:n,labelKey:a,secondaryLabelKey:r,sizeKey:o,sizeName:l,value:b},u)}return y===""&&(y=void 0),v!=null||y!=null?{label:v,secondaryLabel:y}:void 0})})}squarify(t,i,s){const{index:n,datum:a,children:r}=t;if(i.width<=0||i.height<=0){s[n]=void 0;return}s[n]=n!==0?i:void 0;const o=Array.from(r,(A,I)=>I).filter(A=>Ka(r[A])>0).sort((A,I)=>Ka(r[I])-Ka(r[A])),l=A=>{const I=o[A];return r[I]},c=o.every(A=>r[A].children.length===0),h=1,u=a!=null?this.getNodePadding(t,i):{top:0,right:0,bottom:0,left:0},d=i.width-u.left-u.right,p=i.height-u.top-u.bottom;if(d<=0||p<=0)return;const g=o.length;let f=0,m=0,v=1/0,y=o.reduce((A,I)=>A+Ka(r[I]),0);const b=new Op(i.x+u.left,i.y+u.top,d,p),_=b.clone();for(let A=0;A<g;A++){const I=Ka(l(A)),T=Ka(l(m)),E=_.width<_.height;f+=I;const C=E?_.height:_.width,O=E?_.width:_.height,N=O*T/f;let w=C*f/y;const U=Math.max(N,w)/Math.min(N,w),G=Math.abs(h-U);if(G<v){v=G;continue}f-=I,w=C*f/y;let F=E?_.x:_.y;for(let P=m;P<A;P++){const j=l(P),z=Ka(j),q=E?F:_.x,tt=E?_.y:F,it=O*z/f,st=E?it:w,vt=E?w:it,H=new Op(q,tt,st,vt);this.applyGap(b,H,c),this.squarify(j,H,s),y-=z,F+=it}E?(_.y+=w,_.height-=w):(_.x+=w,_.width-=w),m=A,f=0,v=1/0,A--}const S=_.width<_.height;let D=S?_.x:_.y;for(let A=m;A<g;A++){const I=l(A),T=S?D:_.x,E=S?_.y:D,C=Ka(I)/y,O=_.width*(S?C:1),N=_.height*(S?1:C),w=new Op(T,E,O,N);this.applyGap(b,w,c),this.squarify(I,w,s),D+=S?O:N}}applyGap(t,i,s){const n=s?this.properties.tile.gap*.5:this.properties.group.gap*.5,a=c=>({left:c.x,top:c.y,right:c.x+c.width,bottom:c.y+c.height}),r=a(t),o=a(i);["top","right","bottom","left"].forEach(c=>{_z(r[c],o[c])||i.shrink(n,c)})}createNodeData(){return Q(this,null,function*(){return[]})}updateSelections(){return Q(this,null,function*(){var t;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:i}=(t=this.chart)!=null?t:{};if(!i)return;const s=Array.from(this.rootNode),n=a=>{a.append([new Uv,new kl({tag:0}),new kl({tag:1})])};this.groupSelection.update(s,n,a=>this.getDatumId(a)),this.highlightSelection.update(s,n,a=>this.getDatumId(a))})}getTileFormat(t,i){var s,n;const{datum:a,depth:r,children:o}=t,{colorKey:l,labelKey:c,secondaryLabelKey:h,sizeKey:u,tile:d,group:p,formatter:g}=this.properties;if(!g||a==null||r==null)return{};const f=o.length===0,m=(s=f?d.fill:p.fill)!=null?s:t.fill,v=(n=f?d.stroke:p.stroke)!=null?n:t.stroke,y=f?d.strokeWidth:p.strokeWidth,b=this.ctx.callbackCache.call(g,{seriesId:this.id,depth:r,datum:a,colorKey:l,labelKey:c,secondaryLabelKey:h,sizeKey:u,fill:m,stroke:v,strokeWidth:y,highlighted:i});return b??{}}getNodeFill(t){var i,s,n;if(t.children.length===0)return(i=this.properties.tile.fill)!=null?i:t.fill;const{undocumentedGroupFills:r}=this.properties,o=r[Math.min((s=t.depth)!=null?s:0,r.length)];return(n=this.properties.group.fill)!=null?n:o}getNodeStroke(t){var i,s,n;if(t.children.length===0)return(i=this.properties.tile.stroke)!=null?i:t.stroke;const{undocumentedGroupStrokes:r}=this.properties,o=r[Math.min((s=t.depth)!=null?s:0,r.length)];return(n=this.properties.group.stroke)!=null?n:o}updateNodes(){return Q(this,null,function*(){var t,i;const{rootNode:s,data:n}=this,{highlightStyle:a,tile:r,group:o}=this.properties,{seriesRect:l}=(t=this.chart)!=null?t:{};if(!l||!n)return;const{width:c,height:h}=l,u=Array.from(this.rootNode,()=>{});this.squarify(s,new Op(0,0,c,h),u);let d=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();d!=null&&!this.properties.group.interactive&&d.children.length!==0&&(d=void 0),this.updateNodeMidPoint(u);const p=(m,v,y)=>{var b,_,S,D,A,I,T,E,C,O;const N=u[m.index];if(N==null){v.visible=!1;return}const w=m.children.length===0;let U,G,F,P,j;if(y){const{tile:H,group:at}=a;U=w?H.fill:at.fill,G=w?H.fillOpacity:at.fillOpacity,F=w?H.stroke:at.stroke,P=w?H.strokeWidth:at.strokeWidth,j=w?H.strokeOpacity:at.strokeOpacity}const z=this.getTileFormat(m,y),q=(_=(b=z?.fill)!=null?b:U)!=null?_:this.getNodeFill(m),tt=(D=(S=z?.fillOpacity)!=null?S:G)!=null?D:w?r.fillOpacity:o.fillOpacity,it=(I=(A=z?.stroke)!=null?A:F)!=null?I:this.getNodeStroke(m),st=(E=(T=z?.strokeWidth)!=null?T:P)!=null?E:w?r.strokeWidth:o.strokeWidth,vt=(O=(C=z?.strokeOpacity)!=null?C:j)!=null?O:w?r.strokeOpacity:o.strokeOpacity;v.fill=ZA(q),v.fillOpacity=tt,v.stroke=ZA(it),v.strokeWidth=st,v.strokeOpacity=vt,v.crisp=!0,v.x=N.x,v.y=N.y,v.width=N.width,v.height=N.height,v.visible=!0};this.groupSelection.selectByClass(Uv).forEach(m=>p(m.datum,m,!1)),this.highlightSelection.selectByClass(Uv).forEach(m=>{var v;const y=m.datum===d;m.visible=y||((v=d?.contains(m.datum))!=null?v:!1),m.visible&&p(m.datum,m,y)});const g=Array.from(this.rootNode,m=>{var v,y,b,_;const{index:S,children:D}=m,A=u[S],I=(v=this.labelData)==null?void 0:v[S];if(!(A==null||I==null))if(D.length===0){const T={width:A.width,height:A.height,meta:null},E=dv(I.label,this.properties.tile.label,I.secondaryLabel,this.properties.tile.secondaryLabel,{padding:r.padding},()=>T);if(E==null)return;const{height:C,label:O,secondaryLabel:N}=E,{textAlign:w,verticalAlign:U,padding:G}=r,F=(y=QA[w])!=null?y:.5,P=A.x+G+(A.width-2*G)*F,j=(b=kz[U])!=null?b:.5,z=A.y+G+C*.5+(A.height-2*G-C)*j;return{label:O!=null?{text:O.text,fontSize:O.fontSize,lineHeight:O.lineHeight,style:this.properties.tile.label,x:P,y:z-(C-O.height)*.5}:void 0,secondaryLabel:N!=null?{text:N.text,fontSize:N.fontSize,lineHeight:N.fontSize,style:this.properties.tile.secondaryLabel,x:P,y:z+(C-N.height)*.5}:void 0,verticalAlign:"middle",textAlign:w}}else if(I?.label!=null){const{padding:T,textAlign:E}=o,C=this.groupTitleHeight(m,A);if(C==null)return;const O=A.width-2*T,{text:N}=kl.wrap(I.label,A.width-2*T,1/0,o.label,"never"),w=(_=QA[E])!=null?_:.5;return{label:{text:N,fontSize:o.label.fontSize,lineHeight:zs.lineHeight(o.label.fontSize),style:this.properties.group.label,x:A.x+T+O*w,y:A.y+T+C*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:E}}else return}),f=(m,v,y,b)=>{const _=m.children.length===0,S=g[m.index],D=y===0?S?.label:S?.secondaryLabel;if(S==null||D==null){v.visible=!1;return}let A;if(b){const{tile:I,group:T}=a;A=_?y===0?I.label.color:I.secondaryLabel.color:T.label.color}v.text=D.text,v.fontSize=D.fontSize,v.lineHeight=D.lineHeight,v.fontStyle=D.style.fontStyle,v.fontFamily=D.style.fontFamily,v.fontWeight=D.style.fontWeight,v.fill=A??D.style.color,v.textAlign=S.textAlign,v.textBaseline=S.verticalAlign,v.x=D.x,v.y=D.y,v.visible=!0};this.groupSelection.selectByClass(kl).forEach(m=>{f(m.datum,m,m.tag,!1)}),this.highlightSelection.selectByClass(kl).forEach(m=>{var v;const y=m.datum===d;m.visible=y||((v=d?.contains(m.datum))!=null?v:!1),m.visible&&f(m.datum,m,m.tag,y)})})}updateNodeMidPoint(t){this.rootNode.walk(i=>{const s=t[i.index];s!=null&&(i.midPoint.x=s.x+s.width/2,i.midPoint.y=s.y)})}getTooltipHtml(t){var i;const{datum:s,depth:n}=t,{id:a}=this,{tooltip:r,colorKey:o,colorName:l=o,labelKey:c,secondaryLabelKey:h,sizeKey:u,sizeName:d=u}=this.properties,p=t.children.length===0,g=p||this.properties.group.interactive;if(s==null||n==null||!g)return"";const f=c!=null?s[c]:void 0,m=this.getTileFormat(t,!1),v=(i=m?.fill)!=null?i:this.getNodeFill(t);if(!r.renderer&&!f)return"";const y=[],b=h!=null?s[h]:void 0;b!=null&&h!==o&&h!==u&&y.push(Wv(b));const _=u!=null?s[u]:void 0;_!=null&&y.push(`${d}: ${Wv(_)}`);const S=o!=null?s[o]:void 0;S!=null&&y.push(`${l}: ${Wv(S)}`);const D=y.join("<br>"),A={title:f,color:p?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:v,content:D};return r.toTooltipHtml(A,{depth:n,datum:s,colorKey:o,labelKey:c,secondaryLabelKey:h,sizeKey:u,title:f,color:v,seriesId:a})}};Yv.className="TreemapSeries",Yv.type="treemap";var Dz=Yv,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Az,DEFAULT_FONT_FAMILY:Hv,DEFAULT_HIERARCHY_FILLS:Lz,DEFAULT_HIERARCHY_STROKES:Tz,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Np,EXTENDS_SERIES_DEFAULTS:Iz,DEFAULT_LABEL_COLOUR:JA,FONT_WEIGHT:t2}=uz._Theme,Ez={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:Dz,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:Iz,group:{label:{enabled:!0,color:JA,fontStyle:void 0,fontWeight:t2.NORMAL,fontSize:12,fontFamily:Hv,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:Np,fontStyle:void 0,fontWeight:t2.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:Hv,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:Np,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:Hv,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:JA},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:Np},secondaryLabel:{color:Np},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:e,colorsCount:t,themeTemplateParameters:i})=>{const{properties:s}=i,{fills:n,strokes:a}=e(t),r=s.get(Az),o=s.get(Lz),l=s.get(Tz);return{fills:n,strokes:a,colorRange:r,undocumentedGroupFills:o,undocumentedGroupStrokes:l}}},eo=(Y(),W(V)),dn=(Y(),W(V)),e2=(Y(),W(V)),{DropShadow:Cz,Label:Oz}=e2._Scene,{AbstractBarSeriesProperties:Nz,BaseProperties:bh,PropertiesArray:Rz,SeriesTooltip:wz,Validate:Mt,BOOLEAN:Pz,COLOR_STRING:Kv,FUNCTION:i2,LINE_DASH:s2,NUMBER:Bz,OBJECT:Xn,OBJECT_ARRAY:Fz,POSITIVE_NUMBER:Dl,RATIO:jv,STRING:Al,UNION:n2}=e2._ModuleSupport,Rp=class extends bh{};k([Mt(n2(["subtotal","total"],"a total type"))],Rp.prototype,"totalType",2),k([Mt(Bz)],Rp.prototype,"index",2),k([Mt(Al)],Rp.prototype,"axisLabel",2);var a2=class extends bh{};k([Mt(i2,{optional:!0})],a2.prototype,"renderer",2);var Xv=class extends Oz{constructor(){super(...arguments),this.placement="end",this.padding=6}};k([Mt(n2(["start","end","inside"],"a placement"))],Xv.prototype,"placement",2),k([Mt(Dl)],Xv.prototype,"padding",2);var hi=class extends bh{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Cz().set({enabled:!1}),this.label=new Xv,this.tooltip=new a2}};k([Mt(Al,{optional:!0})],hi.prototype,"name",2),k([Mt(Kv)],hi.prototype,"fill",2),k([Mt(Kv)],hi.prototype,"stroke",2),k([Mt(jv)],hi.prototype,"fillOpacity",2),k([Mt(jv)],hi.prototype,"strokeOpacity",2),k([Mt(s2)],hi.prototype,"lineDash",2),k([Mt(Dl)],hi.prototype,"lineDashOffset",2),k([Mt(Dl)],hi.prototype,"strokeWidth",2),k([Mt(Dl)],hi.prototype,"cornerRadius",2),k([Mt(i2,{optional:!0})],hi.prototype,"formatter",2),k([Mt(Xn)],hi.prototype,"shadow",2),k([Mt(Xn)],hi.prototype,"label",2),k([Mt(Xn)],hi.prototype,"tooltip",2);var io=class extends bh{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};k([Mt(Pz)],io.prototype,"enabled",2),k([Mt(Kv)],io.prototype,"stroke",2),k([Mt(jv)],io.prototype,"strokeOpacity",2),k([Mt(s2)],io.prototype,"lineDash",2),k([Mt(Dl)],io.prototype,"lineDashOffset",2),k([Mt(Dl)],io.prototype,"strokeWidth",2);var wp=class extends bh{constructor(){super(...arguments),this.positive=new hi,this.negative=new hi,this.total=new hi}};k([Mt(Xn)],wp.prototype,"positive",2),k([Mt(Xn)],wp.prototype,"negative",2),k([Mt(Xn)],wp.prototype,"total",2);var $n=class extends Nz{constructor(){super(...arguments),this.item=new wp,this.totals=new Rz(Rp),this.line=new io,this.tooltip=new wz}};k([Mt(Al)],$n.prototype,"xKey",2),k([Mt(Al)],$n.prototype,"yKey",2),k([Mt(Al,{optional:!0})],$n.prototype,"xName",2),k([Mt(Al,{optional:!0})],$n.prototype,"yName",2),k([Mt(Xn)],$n.prototype,"item",2),k([Mt(Fz)],$n.prototype,"totals",2),k([Mt(Xn)],$n.prototype,"line",2),k([Mt(Xn)],$n.prototype,"tooltip",2);var{adjustLabelPlacement:zz,SeriesNodePickMode:Gz,fixNumericExtent:$v,valueProperty:r2,keyProperty:Vz,accumulativeValueProperty:Pp,trailingAccumulatedValueProperty:Uz,ChartAxisDirection:so,getRectConfig:Wz,updateRect:Yz,checkCrisp:Hz,updateLabelNode:Kz,prepareBarAnimationFunctions:jz,collapsedStartingBarPosition:Xz,resetBarSelectionsFn:$z,seriesLabelFadeInAnimation:qz,resetLabelFn:Zz,animationValidation:Qz}=dn._ModuleSupport,{ContinuousScale:o2,Rect:Jz,motion:tG}=dn._Scene,{sanitizeHtml:Sh,isContinuous:l2,isNumber:eG}=dn._Util,qv=class B2 extends dn._ModuleSupport.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[Gz.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:$z,label:Zz}}),this.properties=new $n,this.seriesItemTypes=new Set(["positive","negative","total"]),this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===so.X?t===so.X?so.Y:so.X:t}processData(t){return Q(this,null,function*(){var i,s,n;const{xKey:a,yKey:r,totals:o}=this.properties,{data:l=[]}=this;if(!this.properties.isValid())return;const c=y=>l2(y)&&y>=0,h=y=>l2(y)&&y<0,u=y=>y==="total"||y==="subtotal",d={missingValue:void 0,invalidValue:void 0},p=[],g=o.reduce((y,b)=>{const _=y.get(b.index);return _?_.push(b):y.set(b.index,[b]),y},new Map);l.forEach((y,b)=>{var _;p.push(y),(_=g.get(b))==null||_.forEach(S=>p.push(bi(At({},S.toJson()),{[a]:S.axisLabel})))});const f=o2.is((i=this.getCategoryAxis())==null?void 0:i.scale),m=[];this.ctx.animationManager.isSkipped()||m.push(Qz(this));const{processedData:v}=yield this.requestDataModel(t,p,{props:[Vz(this,a,f,{id:"xValue"}),Pp(this,r,!0,bi(At({},d),{id:"yCurrent"})),Pp(this,r,!0,bi(At({},d),{missingValue:0,id:"yCurrentTotal"})),Pp(this,r,!0,bi(At({},d),{id:"yCurrentPositive",validation:c})),Pp(this,r,!0,bi(At({},d),{id:"yCurrentNegative",validation:h})),Uz(this,r,!0,bi(At({},d),{id:"yPrevious"})),r2(this,r,!0,{id:"yRaw"}),r2(this,"totalType",!1,{id:"totalTypeValue",missingValue:void 0,validation:u}),...f?[dn._ModuleSupport.SMALLEST_KEY_INTERVAL]:[],...m],dataVisible:this.visible});this.smallestDataInterval={x:(n=(s=v.reduced)==null?void 0:s.smallestKeyInterval)!=null?n:1/0,y:1/0},this.updateSeriesItemTypes(),this.animationState.transition("updateData")})}getSeriesDomain(t){var i;const{processedData:s,dataModel:n}=this;if(!(s&&n))return[];const{domain:{keys:[a],values:r},reduced:{[dn._ModuleSupport.SMALLEST_KEY_INTERVAL.property]:o}={}}=s,l=n.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if(l?.def.type==="key"&&l?.def.valueType==="category")return a;const c=o!=null&&isFinite(o)?o:0,h=(i=dn._ModuleSupport.extent(a))!=null?i:[NaN,NaN],u=this.getCategoryAxis(),d=u?.isReversed();if(t===so.Y){const f=h[0]+(d?0:-c),m=h[1]+(d?c:0);return $v([f,m],u)}const p=h[0]+(d?-c:0),g=h[1]+(d?0:c);return $v([p,g],u)}else{const c=n.resolveProcessedDataIndexById(this,"yCurrent").index,h=r[c],u=[h[0]>0?0:h[0],h[1]<0?0:h[1]];return $v(u)}}createNodeData(){return Q(this,null,function*(){var t,i,s;const{data:n,dataModel:a,smallestDataInterval:r}=this,{visible:o,line:l}=this.properties,c=this.getCategoryAxis(),h=this.getValueAxis();if(!(n&&o&&c&&h&&a))return[];const u=c.scale,d=h.scale,p=c.isReversed(),g=this.getBarDirection()===so.X,f=(t=o2.is(u)?u.calcBandwidth(r?.x):u.bandwidth)!=null?t:10;if(((i=this.processedData)==null?void 0:i.type)!=="ungrouped")return[];const m=[],v=a.resolveProcessedDataIndexById(this,"yRaw").index,y=a.resolveProcessedDataIndexById(this,"xValue").index,b=a.resolveProcessedDataIndexById(this,"totalTypeValue").index,_=new Map,S=[],D=a.resolveProcessedDataIndexById(this,"yCurrent").index,A=a.resolveProcessedDataIndexById(this,"yPrevious").index,I=a.resolveProcessedDataIndexById(this,"yCurrentTotal").index;function T(F,P,j){return F||P?{cumulativeValue:j[I],trailingValue:P?C:0}:{cumulativeValue:j[D],trailingValue:j[A]}}function E(F,P,j,z,q){return F?z:P?(z??0)-(q??0):j}let C=0;const{xKey:O,yKey:N,xName:w,yName:U}=this.properties;(s=this.processedData)==null||s.data.forEach(({keys:F,datum:P,values:j},z)=>{var q;const tt=j[b],it=this.isSubtotal(tt),st=this.isTotal(tt),vt=st||it,H=F[y],at=Math.round(u.convert(H)),ut=j[v],{cumulativeValue:ct,trailingValue:dt}=T(st,it,j);vt&&(C=ct??0);const ot=Math.round(d.convert(ct)),yt=Math.round(d.convert(dt)),xt=E(st,it,ut,ct,dt),Ht=(xt??0)>=0,ae=this.getSeriesItemType(Ht,tt),{fill:Vt,stroke:we,strokeWidth:Ae,label:Pe}=this.getItemConfig(ae),ne=Ht?ot:yt,qn=Ht?yt:ot,Zn=Math.max(Ae,Math.abs(qn-ne)),xs=ae;let Ri=_.get(xs);Ri===void 0&&(Ri=m.length,_.set(xs,Ri)),(q=m[Ri])!=null||(m[Ri]={itemId:xs,nodeData:[],labelData:[],pointData:[],scales:Bs(B2.prototype,this,"calculateScaling").call(this),visible:this.visible});const me={x:g?Math.min(ne,qn):at,y:g?at:Math.min(ne,qn),width:g?Zn:f,height:g?f:Zn},Zv={x:me.x+me.width/2,y:me.y+me.height/2},_h=vt?ot:yt,Ll=Math.floor(l.strokeWidth)%2/2,Mh=p?ot:_h,kh=p?_h:ot;let Qn,Tl;g?(Qn={x:Mh+Ll,y:me.y},Tl={x:kh+Ll,y:me.y+me.height}):(Qn={x:me.x,y:Mh+Ll},Tl={x:me.x+me.width,y:kh+Ll});const lG={x:p?Tl.x:Qn.x,y:p?Tl.y:Qn.y,x2:p?Qn.x:Tl.x,y2:p?Qn.y:Tl.y,size:0};S.push(lG);const cG=this.getLabelText(Pe,{itemId:xs==="subtotal"?"total":xs,value:xt,datum:P,xKey:O,yKey:N,xName:w,yName:U},Qv=>eG(Qv)?Qv.toFixed(2):String(Qv)),h2={index:z,series:this,itemId:xs,datum:P,cumulativeValue:ct??0,xValue:H,yValue:xt,yKey:N,xKey:O,x:me.x,y:me.y,width:me.width,height:me.height,midPoint:Zv,fill:Vt,stroke:we,strokeWidth:Ae,opacity:1,label:At({text:cG},zz({isPositive:(xt??-1)>=0,isVertical:!g,placement:Pe.placement,padding:Pe.padding,rect:me}))};m[Ri].nodeData.push(h2),m[Ri].labelData.push(h2)});const G=this.properties.line.enabled;return m.length>0&&D!==void 0&&G&&(m[0].pointData=S),m})}updateSeriesItemTypes(){var t,i;const{dataModel:s,seriesItemTypes:n,processedData:a}=this;if(!s||!a)return;n.clear();const r=s.resolveProcessedDataIndexById(this,"yCurrentPositive").index,o=s.resolveProcessedDataIndexById(this,"yCurrentNegative").index,l=s.resolveProcessedDataIndexById(this,"totalTypeValue").index,c=(t=a.domain.values[r])!=null?t:[],h=(i=a.domain.values[o])!=null?i:[];c.length>0&&n.add("positive"),h.length>0&&n.add("negative");const u=a?.domain.values[l];u&&u.forEach(d=>{(d==="total"||d==="subtotal")&&n.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new Jz}getSeriesItemType(t,i){return i??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){return Q(this,null,function*(){const{nodeData:i,datumSelection:s}=t,n=i??[];return s.update(n)})}updateDatumNodes(t){return Q(this,null,function*(){const{datumSelection:i,isHighlight:s}=t,{id:n,ctx:a}=this,{yKey:r,highlightStyle:{item:o}}=this.properties,l=this.getCategoryAxis(),c=Hz(l?.visibleRange),h=this.getCategoryDirection()===so.X;i.each((u,d)=>{const p=d.itemId,{fillOpacity:g,strokeOpacity:f,strokeWidth:m,lineDash:v,lineDashOffset:y,cornerRadius:b,formatter:_,shadow:S}=this.getItemConfig(p),D={fill:d.fill,stroke:d.stroke,fillOpacity:g,strokeOpacity:f,lineDash:v,lineDashOffset:y,fillShadow:S,strokeWidth:this.getStrokeWidth(m),cornerRadius:b,cornerRadiusBbox:void 0},A=h?d.width>0:d.height>0,I=Wz({datum:d,isHighlighted:s,style:D,highlightStyle:o,formatter:_,seriesId:n,itemId:d.itemId,ctx:a,value:d.yValue,yKey:r});I.crisp=c,I.visible=A,Yz({rect:u,config:I})})})}updateLabelSelection(t){return Q(this,null,function*(){const{labelData:i,labelSelection:s}=t;if(i.length===0)return s.update([]);const n=i[0].itemId,{label:a}=this.getItemConfig(n),r=a.enabled?i:[];return s.update(r)})}updateLabelNodes(t){return Q(this,null,function*(){t.labelSelection.each((i,s)=>{Kz(i,this.getItemConfig(s.itemId).label,s.label)})})}getTooltipHtml(t){var i,s,n;const a=this.getCategoryAxis(),r=this.getValueAxis();if(!this.properties.isValid()||!a||!r)return"";const{id:o}=this,{xKey:l,yKey:c,xName:h,yName:u,tooltip:d}=this.properties,{datum:p,itemId:g,xValue:f,yValue:m}=t,{fill:v,strokeWidth:y,name:b,formatter:_}=this.getItemConfig(g);let S;_&&(S=this.ctx.callbackCache.call(_,{datum:p,value:m,xKey:l,yKey:c,fill:v,strokeWidth:y,highlighted:!1,seriesId:o,itemId:t.itemId}));const D=(s=(i=S?.fill)!=null?i:v)!=null?s:"gray",A=Sh(a.formatDatum(f)),I=Sh(r.formatDatum(m)),T=this.isTotal(g),E=this.isSubtotal(g),C=T?"Total":E?"Subtotal":(n=b??u)!=null?n:c,O=Sh(u),N=`<b>${Sh(h??l)}</b>: ${A}<br/><b>${Sh(C)}</b>: ${I}`;return d.toTooltipHtml({title:O,content:N,backgroundColor:D},{seriesId:o,itemId:g,datum:p,xKey:l,yKey:c,xName:h,yName:u,color:D})}getLegendData(t){if(t!=="category")return[];const{id:i,seriesItemTypes:s}=this,n=[],a=r=>r.charAt(0).toUpperCase()+r.substring(1);return s.forEach(r=>{const{fill:o,stroke:l,fillOpacity:c,strokeOpacity:h,strokeWidth:u,name:d}=this.getItemConfig(r);n.push({legendType:"category",id:i,itemId:r,seriesId:i,enabled:!0,label:{text:d??a(r)},marker:{fill:o,stroke:l,fillOpacity:c,strokeOpacity:h,strokeWidth:u}})}),n}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelections:t,labelSelections:i,contextData:s,paths:n}){const a=jz(Xz(this.isVertical(),this.axes,"normal"));tG.fromToMotion(this.id,"datums",this.ctx.animationManager,t,a),qz(this,"labels",this.ctx.animationManager,i),s.forEach(({pointData:r},o)=>{if(o!==0||!r)return;const[l]=n[o];this.isVertical()?this.animateConnectorLinesVertical(l,r):this.animateConnectorLinesHorizontal(l,r)})}animateConnectorLinesHorizontal(t,i){const{path:s}=t;this.updateLineNode(t);const n=this.getValueAxis(),a=n?.isReversed(),r=a?(h,u)=>h<u:(h,u)=>h>u,o=n?.scale.convert(0),l=i.reduce((h,u)=>(r(u.x,h)&&(h=u.x),h),a?1/0:0),c=(h,u,d,p,g)=>(h-u)/(d-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_datums`,groupId:this.id,phase:"initial",from:o,to:l,ease:dn._ModuleSupport.Motion.easeOut,onUpdate(h){s.clear({trackChanges:!0}),i.forEach((u,d)=>{const p=c(h,o,l,o,u.x),g=c(h,o,l,o,u.x2);d!==0&&s.lineTo(p,u.y),s.moveTo(g,u.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,i){const{path:s}=t;this.updateLineNode(t);const n=this.getValueAxis(),a=n?.isReversed(),r=a?(h,u)=>h>u:(h,u)=>h<u,o=n?.scale.convert(0),l=i.reduce((h,u)=>(r(u.y,h)&&(h=u.y),h),a?0:1/0),c=(h,u,d,p,g)=>(h-u)/(d-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_datums`,groupId:this.id,phase:"initial",from:o,to:l,ease:dn._ModuleSupport.Motion.easeOut,onUpdate(h){s.clear({trackChanges:!0}),i.forEach((u,d)=>{const p=c(h,o,l,o,u.y),g=c(h,o,l,o,u.y2);d!==0&&s.lineTo(u.x,p),s.moveTo(u.x2,g)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){return Q(this,null,function*(){this.resetConnectorLinesPath({contextData:[t.contextData],paths:[t.paths]})})}resetConnectorLinesPath({contextData:t,paths:i}){if(i.length===0)return;const[s]=i[0];this.updateLineNode(s);const{path:n}=s;n.clear({trackChanges:!0});const{pointData:a}=t[0];a&&(a.forEach((r,o)=>{o!==0&&n.lineTo(r.x,r.y),n.moveTo(r.x2,r.y2)}),s.checkPathDirty())}updateLineNode(t){const{stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}=this.properties.line;t.setProperties({fill:void 0,stroke:i,strokeWidth:this.getStrokeWidth(s),strokeOpacity:n,lineDash:a,lineDashOffset:r,lineJoin:"round",pointerEvents:dn._Scene.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:i,total:s}=this.properties.item;return t.label.enabled||i.label.enabled||s.label.enabled}onDataChange(){}};qv.className="WaterfallSeries",qv.type="waterfall";var iG=qv,c2=(Y(),W(V)),sG={series:{__extends__:c2._Theme.EXTENDS_SERIES_DEFAULTS,item:{positive:{strokeWidth:0,label:{enabled:!1}},negative:{strokeWidth:0,label:{enabled:!1}},total:{strokeWidth:0,label:{enabled:!1}}},line:{stroke:c2._Theme.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},nG={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:iG,seriesDefaults:{axes:[{type:eo._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:eo._Theme.POSITION.BOTTOM},{type:eo._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:eo._Theme.POSITION.LEFT}]},themeTemplate:sG,swapDefaultAxesCondition:({direction:e})=>e==="horizontal",paletteFactory:({takeColors:e,colorsCount:t,userPalette:i,themeTemplateParameters:s})=>{const{properties:n}=s,{fills:a,strokes:r}=e(t);return i?{item:{positive:{fill:a[0],stroke:r[0]},negative:{fill:a[1],stroke:r[1]},total:{fill:a[2],stroke:r[2]}}}:{item:{positive:n.get(eo._Theme.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:n.get(eo._Theme.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:n.get(eo._Theme.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};function aG(){Pt._ModuleSupport.registerModule(pN),Pt._ModuleSupport.registerModule(_N),Pt._ModuleSupport.registerModule(JN),Pt._ModuleSupport.registerModule(lR),Pt._ModuleSupport.registerModule(c1),Pt._ModuleSupport.registerModule(M1),Pt._ModuleSupport.registerModule(dR),Pt._ModuleSupport.registerModule(TR),Pt._ModuleSupport.registerModule(CR),Pt._ModuleSupport.registerModule(KR),Pt._ModuleSupport.registerModule(ew),Pt._ModuleSupport.registerModule(Fw),Pt._ModuleSupport.registerModule(J1),Pt._ModuleSupport.registerModule(CP),Pt._ModuleSupport.registerModule(pB),Pt._ModuleSupport.registerModule(gB),Pt._ModuleSupport.registerModule(UB),Pt._ModuleSupport.registerModule($B),Pt._ModuleSupport.registerModule(HN),Pt._ModuleSupport.registerModule(qN),Pt._ModuleSupport.registerModule(tz),Pt._ModuleSupport.registerModule(DF),Pt._ModuleSupport.registerModule(hz),Pt._ModuleSupport.registerModule(ow),Pt._ModuleSupport.registerModule(Ez),Pt._ModuleSupport.registerModule(nG),Pt._ModuleSupport.registerModule(Mw),Pt._ModuleSupport.enterpriseModule.isEnterprise=!0,Pt._ModuleSupport.enterpriseModule.licenseManager=e=>{var t,i;return new Gw((i=(t=e.container)==null?void 0:t.ownerDocument)!=null?i:typeof document<"u"?document:void 0)},Pt._ModuleSupport.enterpriseModule.injectWatermark=Yw}if(WO(by,(Y(),W(V)),Ss.exports),aG(),typeof Ss.exports=="object"&&typeof El=="object"){var rG=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Object.getOwnPropertyNames(t))!Object.prototype.hasOwnProperty.call(e,n)&&n!==i&&Object.defineProperty(e,n,{get:()=>t[n],enumerable:!(s=Object.getOwnPropertyDescriptor(t,n))||s.enumerable});return e};Ss.exports=rG(Ss.exports,El)}return Ss.exports});
