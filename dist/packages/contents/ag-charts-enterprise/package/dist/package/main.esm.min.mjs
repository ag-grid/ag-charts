var Br=Object.defineProperty,op=Object.defineProperties,sp=Object.getOwnPropertyDescriptor,np=Object.getOwnPropertyDescriptors,Go=Object.getOwnPropertySymbols,ap=Object.getPrototypeOf,zr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,rp=Reflect.get,Mt=Math.pow,Fr=(t,e,i)=>e in t?Br(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,U=(t,e)=>{for(var i in e||(e={}))zr.call(e,i)&&Fr(t,i,e[i]);if(Go)for(var i of Go(e))Vr.call(e,i)&&Fr(t,i,e[i]);return t},X=(t,e)=>op(t,np(e)),Ur=(t,e)=>{var i={};for(var o in t)zr.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&Go)for(var o of Go(t))e.indexOf(o)<0&&Vr.call(t,o)&&(i[o]=t[o]);return i},d=(t,e,i,o)=>{for(var s=o>1?void 0:o?sp(e,i):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(s=(o?a(e,i,s):a(s))||s);return o&&s&&Br(e,i,s),s},oo=(t,e,i)=>rp(ap(t),i,e),P=(t,e,i)=>new Promise((o,s)=>{var n=l=>{try{r(i.next(l))}catch(c){s(c)}},a=l=>{try{r(i.throw(l))}catch(c){s(c)}},r=l=>l.done?o(l.value):Promise.resolve(l.value).then(n,a);r((i=i.apply(t,e)).next())});import{AgCharts as lp,time as cp}from"ag-charts-community";import{_ModuleSupport as Ho}from"ag-charts-community";import{_Theme as Kr}from"ag-charts-community";var jr={__extends__:Kr.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:Kr.EXTENDS_AXES_GRID_LINE_DEFAULTS}};import{_ModuleSupport as Gr,_Scale as up,_Util as dp}from"ag-charts-community";function pn(t,e,i){const o=(n,a,r,l)=>{let c=t[0];for(let u=n;r>0?u<=a:u>a;u+=r){const h=t[u];if(l(c,h))return!0;c=h}return!1},s=Math.floor(t.length/2);return o(e,s,e,i)?!0:o(t.length-e,s,-e,i)}import{_ModuleSupport as gn,_Scene as Hr,_Util as hp}from"ag-charts-community";import{_ModuleSupport as pp,_Scale as Yr,_Scene as gp,_Util as yp}from"ag-charts-community";import{_ModuleSupport as mp,_Scene as fp,_Util as Sp}from"ag-charts-community";var{ChartAxisDirection:xp,Layers:yn,ARRAY:vp,BOOLEAN:mn,COLOR_STRING:fn,FONT_STYLE:Mp,FONT_WEIGHT:Dp,LINE_DASH:Np,NUMBER:Wr,POSITIVE_NUMBER:Ip,RATIO:Xr,STRING:Qr,UNION:_p,AND:bp,Validate:It,MATCHING_CROSSLINE_TYPE:$r}=mp,{Group:Zr}=fp,{createId:Tp}=Sp,ce=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};d([It(mn,{optional:!0})],ce.prototype,"enabled",2),d([It(Qr,{optional:!0})],ce.prototype,"text",2),d([It(Mp,{optional:!0})],ce.prototype,"fontStyle",2),d([It(Dp,{optional:!0})],ce.prototype,"fontWeight",2),d([It(Ip)],ce.prototype,"fontSize",2),d([It(Qr)],ce.prototype,"fontFamily",2),d([It(Wr)],ce.prototype,"padding",2),d([It(fn,{optional:!0})],ce.prototype,"color",2),d([It(mn,{optional:!0})],ce.prototype,"parallel",2);var Wt=class Rr{constructor(){this.id=Tp(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new ce,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=xp.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new Zr({name:`${this.id}`,layer:!0,zIndex:Rr.LINE_LAYER_ZINDEX}),this.labelGroup=new Zr({name:`${this.id}`,layer:!0,zIndex:Rr.LABEL_LAYER_ZINDEX})}setSectorNodeProps(e){var i,o,s;e.fill=this.fill,e.fillOpacity=(i=this.fillOpacity)!=null?i:1,e.stroke=this.stroke,e.strokeOpacity=(o=this.strokeOpacity)!=null?o:1,e.strokeWidth=(s=this.strokeWidth)!=null?s:1,e.lineDash=this.lineDash}setLabelNodeProps(e,i,o,s,n){const{label:a}=this;e.x=i,e.y=o,e.text=a.text,e.textAlign="center",e.textBaseline=s,e.rotation=n,e.rotationCenterX=i,e.rotationCenterY=o,e.fill=a.color,e.fontFamily=a.fontFamily,e.fontSize=a.fontSize,e.fontStyle=a.fontStyle,e.visible=!0}calculateLayout(e){}};Wt.LINE_LAYER_ZINDEX=yn.SERIES_CROSSLINE_LINE_ZINDEX,Wt.RANGE_LAYER_ZINDEX=yn.SERIES_CROSSLINE_RANGE_ZINDEX,Wt.LABEL_LAYER_ZINDEX=yn.SERIES_LABEL_ZINDEX,d([It(mn,{optional:!0})],Wt.prototype,"enabled",2),d([It(_p(["range","line"],"a crossLine type"),{optional:!0})],Wt.prototype,"type",2),d([It(bp($r("range"),vp.restrict({length:2})),{optional:!0})],Wt.prototype,"range",2),d([It($r("value"),{optional:!0})],Wt.prototype,"value",2),d([It(fn,{optional:!0})],Wt.prototype,"fill",2),d([It(Xr,{optional:!0})],Wt.prototype,"fillOpacity",2),d([It(fn,{optional:!0})],Wt.prototype,"stroke",2),d([It(Wr,{optional:!0})],Wt.prototype,"strokeWidth",2),d([It(Xr,{optional:!0})],Wt.prototype,"strokeOpacity",2),d([It(Np,{optional:!0})],Wt.prototype,"lineDash",2);var qr=Wt,{ChartAxisDirection:Ap,validateCrossLineValues:Ep}=pp,{Path:Jr,Sector:Op,Text:Lp}=gp,{normalizeAngle360:Sn,isNumberEqual:tl}=yp,el=class dn extends qr{constructor(){super(),this.direction=Ap.X,this.polygonNode=new Jr,this.sectorNode=new Op,this.lineNode=new Jr,this.labelNode=new Lp,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,shape:o,type:s,value:n,range:a}=this;if(!i||!s||!Ep(s,n,a,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=e,this.labelGroup.visible=e,s==="line"&&o==="circle"&&i instanceof Yr.BandScale&&(this.type="range",this.range=[n,n]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){var i,o;const{scale:s,type:n,value:a,lineNode:r}=this;let l;if(!e||n!=="line"||!s||isNaN(l=s.convert(a))){r.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:u}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=(i=this.strokeOpacity)!=null?i:1,r.strokeWidth=(o=this.strokeWidth)!=null?o:1,r.fill=void 0,r.lineDash=this.lineDash;const h=u*Math.cos(l),p=u*Math.sin(l),g=c*Math.cos(l),m=c*Math.sin(l);r.path.clear(!0),r.path.moveTo(g,m),r.path.lineTo(h,p),this.group.zIndex=dn.LINE_LAYER_ZINDEX}updatePolygonNode(e){var i;const{polygonNode:o,range:s,scale:n,shape:a,type:r}=this;let l;if(!e||r!=="range"||a!=="polygon"||!n||!s||!(l=(i=n.ticks)==null?void 0:i.call(n))){o.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:u}=this,h=l.indexOf(s[0]),p=l.indexOf(s[1]),m=(h<=p?l.slice(h,p+1):l.slice(h).concat(l.slice(0,p+1))).map(S=>n.convert(S));o.visible=!0,this.setSectorNodeProps(o);const{path:y}=o;y.clear(!0),m.forEach((S,f)=>{const x=u*Math.cos(S),M=u*Math.sin(S);f===0?y.moveTo(x,M):y.lineTo(x,M)}),c===0?y.lineTo(0,0):m.slice().reverse().forEach(S=>{const f=c*Math.cos(S),x=c*Math.sin(S);y.lineTo(f,x)}),o.path.closePath(),this.group.zIndex=dn.RANGE_LAYER_ZINDEX}updateSectorNode(e){var i;const{sectorNode:o,range:s,scale:n,shape:a,type:r}=this;if(!e||r!=="range"||a!=="circle"||!n||!s){o.visible=!1;return}const{axisInnerRadius:l,axisOuterRadius:c}=this,u=s.map(g=>n.convert(g)),h=(i=n.step)!=null?i:0,p=n instanceof Yr.BandScale?h/2:0;o.visible=!0,this.setSectorNodeProps(o),o.centerX=0,o.centerY=0,o.innerRadius=l,o.outerRadius=c,o.startAngle=u[0]-p,o.endAngle=u[1]+p,this.group.zIndex=dn.RANGE_LAYER_ZINDEX}updateLabelNode(e){var i,o;const{label:s,labelNode:n,range:a,scale:r,type:l}=this;if(!e||s.enabled===!1||!s.text||!r||l==="range"&&!a){n.visible=!0;return}const{axisInnerRadius:c,axisOuterRadius:u}=this;let h,p,g,m;if(l==="line"){const y=Sn(r.convert(this.value)),S=1.5*Math.PI,f=tl(y,S)||y>S||y<Math.PI/2,x=(c+u)/2*Math.cos(y),M=(c+u)/2*Math.sin(y);h=x+s.padding*Math.cos(y+Math.PI/2),p=M+s.padding*Math.sin(y+Math.PI/2),m=f?"top":"bottom",g=f?y:y-Math.PI}else{const[y,S]=a.map(v=>Sn(r.convert(v)));let f=(y+S)/2;y>S&&(f-=Math.PI),f=Sn(f);const x=(tl(f,0)||f>0)&&f<Math.PI;let M;const N=(o=(i=r.ticks)==null?void 0:i.call(r))!=null?o:[];this.shape==="circle"||N.length<3?M=u-s.padding:M=u*Math.cos(Math.PI/N.length)-s.padding,h=M*Math.cos(f),p=M*Math.sin(f),m=x?"bottom":"top",g=x?f-Math.PI/2:f+Math.PI/2}this.setLabelNodeProps(n,h,p,m,g)}};el.className="AngleCrossLine";var il=el,{AND:kp,assignJsonApplyConstructedArray:Rp,ChartAxisDirection:Cp,GREATER_THAN:Pp,NUMBER:ol,UNION:wp,ProxyOnWrite:Bp,Validate:xn}=gn,{Path:zp,Text:sl}=Hr,{angleBetween:Vp,isNumberEqual:Ai,toRadians:vn,normalizeAngle360:Ei}=hp,Mn=class extends gn.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};d([xn(wp(["fixed","parallel","perpendicular"],"a label orientation"))],Mn.prototype,"orientation",2);var Yo=class extends gn.PolarAxis{constructor(t,e){super(t,e),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new zp),this.computeRange=()=>{const i=Ei(-Math.PI/2+vn(this.startAngle));let o=this.endAngle==null?i+Math.PI*2:-Math.PI/2+vn(this.endAngle);o<i&&(o+=2*Math.PI),this.range=[i,o]},this.includeInvisibleDomains=!0}get direction(){return Cp.X}assignCrossLineArrayConstructor(t){Rp(t,il)}createLabel(){return new Mn}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:t,gridLength:e}=this;return Vp(t[0],t[1])*e}updatePosition(){const{translation:t,axisGroup:e,gridGroup:i,crossLineGroup:o}=this,s=Math.floor(t.x),n=Math.floor(t.y);e.translationX=s,e.translationY=n,i.translationX=s,i.translationY=n,o.translationX=s,o.translationY=n}updateRadiusLine(){const t=this.radiusLine,{path:e}=t;e.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach(({x:s,y:n,moveTo:a,arc:r,radius:l=0,startAngle:c=0,endAngle:u=0})=>{r?e.arc(s,n,l,c,u):a?e.moveTo(s,n):e.lineTo(s,n)}),o&&e.closePath(),t.visible=this.line.enabled,t.stroke=this.line.color,t.strokeWidth=this.line.width,t.fill=void 0}getAxisLinePoints(){var t,e;const{scale:i,shape:o,gridLength:s}=this,[n,a]=this.range,r=Ai(a-n,2*Math.PI),l=[];if(o==="circle")r?(l.push({x:s,y:0,moveTo:!0}),l.push({x:0,y:0,radius:s,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(l.push({x:s*Math.cos(n),y:s*Math.sin(n),moveTo:!0}),l.push({x:0,y:0,radius:s,startAngle:Ei(n),endAngle:Ei(a),arc:!0,moveTo:!1}));else if(o==="polygon"){const c=((e=(t=i.ticks)==null?void 0:t.call(i))!=null?e:[]).map(u=>i.convert(u));c.length>2&&c.forEach((u,h)=>{const p=s*Math.cos(u),g=s*Math.sin(u),m=h===0;l.push({x:p,y:g,moveTo:m})})}return{points:l,closePath:r}}updateGridLines(){const{scale:t,gridLength:e,gridLine:{enabled:i,style:o,width:s},innerRadiusRatio:n}=this;if(!(o&&e>0))return;const a=this.tickData,r=e*n,l=o.length,c=u=>u.value;this.gridLineGroupSelection.update(i?a:[],void 0,c).each((u,h,p)=>{const{value:g}=h,{stroke:m,lineDash:y}=o[p%l],S=t.convert(g);u.x1=r*Math.cos(S),u.y1=r*Math.sin(S),u.x2=e*Math.cos(S),u.y2=e*Math.sin(S),u.stroke=m,u.strokeWidth=s,u.lineDash=y,u.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:t,tickLabelGroupSelection:e}=this,i=this.tickData;e.update(t.enabled?i:[]).each((o,s,n)=>{const a=this.labelData[n];if(!a||a.hidden){o.visible=!1;return}o.text=a.text,o.setFont(t),o.fill=t.color,o.x=a.x,o.y=a.y,o.textAlign=a.textAlign,o.textBaseline=a.textBaseline,o.visible=!0,a.rotation?(o.rotation=a.rotation,o.rotationCenterX=a.x,o.rotationCenterY=a.y):o.rotation=0})}updateTickLines(){const{scale:t,gridLength:e,tick:i,tickLineGroupSelection:o}=this,s=this.tickData;o.update(i.enabled?s:[]).each((n,a)=>{const{value:r}=a,l=t.convert(r),c=Math.cos(l),u=Math.sin(l);n.x1=e*c,n.y1=e*u,n.x2=(e+i.size)*c,n.y2=(e+i.size)*u,n.stroke=i.color,n.strokeWidth=i.width})}createLabelNodeData(t,e,i){const{label:o,gridLength:s,scale:n,tick:a}=this;if(!o.enabled)return[];const r=new sl,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,u=t.map((h,p)=>{var g;const{value:m}=h,y=s+o.padding+a.size,S=n.convert(m),f=Math.cos(S),x=Math.sin(S),M=y*f,N=y*x,{textAlign:v,textBaseline:D}=this.getLabelAlign(S),I=p===t.length-1&&m!==t[0]&&Ai(Ei(S),Ei(n.convert(t[0]))),b=this.getLabelRotation(S);let T=String(m);if(o.formatter){const{callbackCache:A}=this.moduleCtx;T=(g=A.call(o.formatter,{value:m,index:p}))!=null?g:""}r.text=T,r.x=M,r.y=N,r.setFont(o),r.textAlign=v,r.textBaseline=D,r.rotation=b,b&&(r.rotationCenterX=M,r.rotationCenterY=N);let _=b?r.computeTransformedBBox():r.computeBBox();if(_&&e.hideWhenNecessary&&!b){const A=l-_.x,E=_.x+_.width-c,O=1;if(A>O||E>O){const k=_.width-Math.max(A,E);({text:T}=sl.wrap(T,k,1/0,o,"never")),T==="\u2026"&&(T="",_=void 0),r.text=T,_=r.computeBBox()}}return{text:T,x:M,y:N,textAlign:v,textBaseline:D,hidden:T===""||h.hidden||I,rotation:b,box:_}});return o.avoidCollisions&&this.avoidLabelCollisions(u),u}computeLabelsBBox(t,e){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,t,e);const i=this.labelData.map(({box:o})=>o).filter(o=>o!=null);return!this.label.enabled||i.length===0?null:Hr.BBox.merge(i)}getLabelOrientation(){const{label:t}=this;return t instanceof Mn?t.orientation:"fixed"}getLabelRotation(t){var e;let i=vn((e=this.label.rotation)!=null?e:0);t=Ei(t);const o=this.getLabelOrientation();return o==="parallel"?(i+=t,t>=0&&t<Math.PI?i-=Math.PI/2:i+=Math.PI/2):o==="perpendicular"&&(i+=t,t>=Math.PI/2&&t<1.5*Math.PI&&(i+=Math.PI)),i}getLabelAlign(t){const e=Math.cos(t),i=Math.sin(t);let o,s;const n=this.getLabelOrientation(),a=Ai(e,0),r=Ai(i,0),l=Ai(e,1),c=Ai(i,-1),u=e>0&&!a,h=i>0&&!r;return n==="parallel"?(o="center",s=l&&r||h?"top":"bottom"):n==="perpendicular"?(o=c||u?"left":"right",s="middle"):(o="right",a?o="center":u&&(o="left"),s="bottom",r?s="middle":h&&(s="top")),{textAlign:o,textBaseline:s}}updateCrossLines(){var t;(t=this.crossLines)==null||t.forEach(e=>{if(e instanceof il){const{shape:i,gridLength:o,innerRadiusRatio:s}=this;e.shape=i,e.axisOuterRadius=o,e.axisInnerRadius=o*s}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};d([Bp("rotation"),xn(ol.restrict({min:0,max:360}))],Yo.prototype,"startAngle",2),d([xn(kp(ol.restrict({min:0,max:720}),Pp("startAngle")),{optional:!0})],Yo.prototype,"endAngle",2);var{RATIO:nl,OR:Fp,POSITIVE_NUMBER:Up,NAN:Kp,Validate:Dn}=Gr,{BandScale:jp}=up,{isNumberEqual:al}=dp,rl=class extends Gr.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN}};d([Dn(Fp(Up,Kp))],rl.prototype,"minSpacing",2);var Oi=class extends Yo{constructor(t){super(t,new jp),this.groupPaddingInner=0,this.paddingInner=0}createTick(){return new rl}generateAngleTicks(){var t,e;const{scale:i,tick:o,gridLength:s}=this,n=(e=(t=o.values)!=null?t:i.ticks())!=null?e:[];if(n.length<2||isNaN(o.minSpacing))return n.map(u=>({value:u,visible:!0}));const a=n[0],r=i.convert(a),l=s*Math.cos(r),c=s*Math.sin(r);for(let u=1;u<n.length-1;u++){const h=n[u],p=i.convert(h);if(p-r>Math.PI)break;const g=s*Math.cos(p),m=s*Math.sin(p);if(Math.sqrt(Mt(g-l,2)+Mt(m-c,2))>o.minSpacing){const S=new Set([a]);return pn(n,u,(f,x)=>{S.add(x)}),n.map(f=>{const x=S.has(f);return{value:f,visible:x}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(t){let{minSpacing:e}=this.label;if(Number.isFinite(e)||(e=0),t.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;const u=l.box.clone().grow(e/2),h=c.box.clone().grow(e/2);return u.collidesBBox(h)},o=t[0],s=t.at(-1),n=new Set([o]),a=al(o.x,s.x)&&al(o.y,s.y),r=Math.floor(t.length/2);for(let l=1;l<=r;l++){const c=a?t.slice(0,-1):t;if(!pn(c,l,i)){pn(c,l,(h,p)=>{n.add(p)});break}}t.forEach(l=>{n.has(l)||(l.hidden=!0,l.box=void 0)})}};Oi.className="AngleCategoryAxis",Oi.type="angle-category",d([Dn(nl)],Oi.prototype,"groupPaddingInner",2),d([Dn(nl)],Oi.prototype,"paddingInner",2);var Gp={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:Oi,themeTemplate:jr};import{_ModuleSupport as ll,_Util as Hp}from"ag-charts-community";import{_Scale as Yp,_Util as Wp}from"ag-charts-community";var{LinearScale:Xp,Invalidating:Qp}=Yp,{isNumberEqual:$p,range:cl,isDenseInterval:Zp}=Wp,ul=class extends Xp{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(s=>!isFinite(s))||this.arcLength<=0)return[];this.refresh();const[t,e]=this.getDomain(),{interval:i}=this;if(i){const s=Math.abs(i),n=this.getPixelRange();if(!Zp({start:t,stop:e,interval:s,availableRange:n}))return cl(t,e,s)}const o=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(t,e);return cl(t,e,o)}hasNiceRange(){const t=this.range.slice().sort((i,o)=>i-o);return[Math.PI,2*Math.PI].some(i=>$p(i,t[1]-t[0]))}getNiceStepAndTickCount(){const[t,e]=this.niceDomain;let i=this.getTickStep(t,e);const o=isNaN(this.maxTickCount)?1/0:this.maxTickCount,s=Math.abs(e-t)/i;let n=Math.pow(2,Math.ceil(Math.log(s)/Math.log(2)));return n>o&&(n/=2,i*=2),{count:n,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const t=this.niceDomain[0]>this.niceDomain[1],e=t?this.niceDomain[1]:this.niceDomain[0],{step:i,count:o}=this.getNiceStepAndTickCount(),s=1/i,n=i>=1?Math.ceil(e/i+o)*i:Math.ceil((e+o*i)*s)/s;this.niceDomain=t?[n,e]:[e,n],this.niceTickStep=i}getPixelRange(){return this.arcLength}};d([Qp],ul.prototype,"arcLength",2);var{AND:dl,Default:Nn,GREATER_THAN:qp,LESS_THAN:Jp,OR:tg,POSITIVE_NUMBER:eg,NAN:ig,NUMBER_OR_NAN:hl,MIN_SPACING:og,Validate:Wo}=ll,{angleBetween:sg,isNumberEqual:pl,normalisedExtentWithMetadata:ng}=Hp,In=class extends ll.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};d([Wo(tg(eg,ig))],In.prototype,"minSpacing",2),d([Wo(og),Nn(NaN)],In.prototype,"maxSpacing",2);var so=class extends Yo{constructor(t){super(t,new ul),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=ng(t,e,i);return{domain:o,clipped:s}}createTick(){return new In}getRangeArcLength(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),o=sg(e,i)||2*Math.PI,s=this.gridLength;return o*s}generateAngleTicks(){var t;const e=this.getRangeArcLength(),{scale:i,tick:o,range:s}=this,{minSpacing:n=NaN,maxSpacing:a=NaN}=o,r=a?Math.floor(e/a):1,l=n?Math.floor(e/n):1/0,c=Math.floor(4/Math.PI*Math.abs(s[0]-s[1]));return i.tickCount=Math.max(r,Math.min(l,c)),i.minTickCount=r,i.maxTickCount=l,i.arcLength=e,((t=o.values)!=null?t:i.ticks()).map(h=>({value:h,visible:!0}))}avoidLabelCollisions(t){let{minSpacing:e}=this.label;Number.isFinite(e)||(e=0);const i=(n,a)=>{if(n.hidden||a.hidden)return!1;const r=n.box.clone().grow(e/2),l=a.box.clone().grow(e/2);return r.collidesBBox(l)},o=t[0],s=t.at(-1);o!==s&&pl(o.x,s.x)&&pl(o.y,s.y)&&(s.hidden=!0);for(let n=1;n<t.length;n*=2){let a=!1;for(let r=n;r<t.length;r+=n){const l=t[r],c=t[r-n];if(i(c,l)){a=!0;break}}if(!a){t.forEach((r,l)=>{l%n>0&&(r.hidden=!0,r.box=void 0)});return}}t.forEach((n,a)=>{a>0&&(n.hidden=!0,n.box=void 0)})}};so.className="AngleNumberAxis",so.type="angle-number",d([Wo(dl(hl,Jp("max"))),Nn(NaN)],so.prototype,"min",2),d([Wo(dl(hl,qp("min"))),Nn(NaN)],so.prototype,"max",2);var ag={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:so,themeTemplate:jr};import{_ModuleSupport as _n,_Scale as rg}from"ag-charts-community";var{OrdinalTimeScale:lg}=rg,{dateToNumber:bn,Validate:gl,Default:cg,MAX_SPACING:ug,MIN_SPACING:dg}=_n,Tn=class extends _n.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};d([gl(dg)],Tn.prototype,"minSpacing",2),d([gl(ug),cg(NaN)],Tn.prototype,"maxSpacing",2);var An=class extends _n.CategoryAxis{constructor(t){super(t,new lg)}createTick(){return new Tn}normaliseDataDomain(t){const e=[],i=new Set;for(let o of t){typeof o=="number"&&(o=new Date(o));const s=bn(o);i.has(s)||(i.add(s),e.push(o))}return e.sort((o,s)=>bn(o)-bn(s)),{domain:e,clipped:!1}}onLabelFormatChange(t,e,i){i?super.onLabelFormatChange(t,e,i):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:e})}};An.className="OrdinalTimeAxis",An.type="ordinal-time";import{_Theme as En}from"ag-charts-community";var hg={__extends__:En.EXTENDS_AXES_DEFAULTS,groupPaddingInner:0,label:{autoRotate:!1},gridLine:{__extends__:En.EXTENDS_AXES_GRID_LINE_DEFAULTS,enabled:!1},crosshair:{enabled:!0,snap:!0,stroke:En.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}},pg={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",instanceConstructor:An,themeTemplate:hg};import{_Theme as On}from"ag-charts-community";var yl={__extends__:On.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:On.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:On.EXTENDS_AXES_TICK_DEFAULTS}};import{_ModuleSupport as gg,_Scale as yg}from"ag-charts-community";import{_ModuleSupport as Xo,_Scene as mg,_Util as fg}from"ag-charts-community";import{_ModuleSupport as Sg,_Scale as ml,_Scene as xg,_Util as Ln}from"ag-charts-community";var{ChartAxisDirection:vg,Validate:Mg,DEGREE:Dg,validateCrossLineValues:Ng}=Sg,{Path:Ig,Sector:_g,Text:bg}=xg,{normalizeAngle360:Tg,toRadians:Ag,isNumberEqual:Eg}=Ln,fl=class extends ce{constructor(){super(...arguments),this.positionAngle=void 0}};d([Mg(Dg,{optional:!0})],fl.prototype,"positionAngle",2);var Sl=class Cr extends qr{constructor(){super(),this.direction=vg.Y,this.label=new fl,this.polygonNode=new Ig,this.sectorNode=new _g,this.labelNode=new bg,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:i,type:o,value:s,range:n}=this;if(!i||!o||!Ng(o,s,n,i)){this.group.visible=!1,this.labelGroup.visible=!1;return}o==="line"&&i instanceof ml.BandScale&&(this.type="range",this.range=[s,s]),this.updateRadii();const{innerRadius:a,outerRadius:r}=this;e&&(e=a>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.group.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.group.zIndex=this.type==="line"?Cr.LINE_LAYER_ZINDEX:Cr.RANGE_LAYER_ZINDEX}updateRadii(){var e;const{range:i,scale:o,type:s,axisInnerRadius:n,axisOuterRadius:a}=this;if(!o)return{innerRadius:0,outerRadius:0};const r=u=>a+n-u;let l=0,c=0;if(s==="line")l=r(o.convert(this.value)),c=l;else{const u=Math.abs((e=o?.bandwidth)!=null?e:0),h=i.map(p=>o.convert(p));l=r(Math.max(...h)),c=r(Math.min(...h))+u}this.outerRadius=l,this.innerRadius=c}drawPolygon(e,i,o){i.forEach((s,n)=>{const a=e*Math.cos(s),r=e*Math.sin(s);n===0?o.path.moveTo(a,r):o.path.lineTo(a,r)}),o.path.closePath()}updatePolygonNode(e){const{gridAngles:i,polygonNode:o,scale:s,shape:n,type:a,innerRadius:r,outerRadius:l}=this;if(!e||n!=="polygon"||!s||!i){o.visible=!1;return}o.visible=!0;const c=this.getPadding();o.path.clear(!0),this.drawPolygon(l-c,i,o);const u=i.slice().reverse(),h=a==="line"?l-c:r+c;this.drawPolygon(h,u,o),this.setSectorNodeProps(o)}updateSectorNode(e){const{axisInnerRadius:i,axisOuterRadius:o,scale:s,sectorNode:n,shape:a,innerRadius:r,outerRadius:l}=this;if(!e||a!=="circle"||!s){n.visible=!1;return}n.visible=!0,n.startAngle=0,n.endAngle=2*Math.PI;const c=this.getPadding();n.innerRadius=Ln.clamp(i,r+c,o),n.outerRadius=Ln.clamp(i,l-c,o),this.setSectorNodeProps(n)}updateLabelNode(e){var i,o;const{innerRadius:s,label:n,labelNode:a,scale:r,shape:l,type:c}=this;if(!e||n.enabled===!1||!n.text||!r){a.visible=!1;return}const u=Tg(Ag(((i=n.positionAngle)!=null?i:0)-90)),h=(Eg(u,0)||u>0)&&u<Math.PI,p=h?u-Math.PI/2:u+Math.PI/2;let g=0;const m=(o=this.gridAngles)!=null?o:[];c==="line"?g=s+n.padding:l==="circle"||m.length<3?g=s-n.padding:g=s*Math.cos(Math.PI/m.length)-n.padding;const y=g*Math.cos(u),S=g*Math.sin(u);let f;c==="line"?f=h?"top":"bottom":f=h?"bottom":"top",this.setLabelNodeProps(a,y,S,f,p)}getPadding(){var e,i;const{scale:o}=this;if(!o)return 0;const s=Math.abs((e=o.bandwidth)!=null?e:0),n=Math.abs((i=o.step)!=null?i:0);return o instanceof ml.BandScale?(n-s)/2:0}};Sl.className="RadiusCrossLine";var xl=Sl,{assignJsonApplyConstructedArray:Og,ChartAxisDirection:Lg,Default:kn,Layers:kg,DEGREE:vl,MIN_SPACING:Rg,MAX_SPACING:Cg,BOOLEAN:Pg,Validate:no}=Xo,{Caption:wg,Group:Bg,Path:zg,Selection:Vg}=mg,{isNumberEqual:Fg,normalizeAngle360:Ml,toRadians:Ug}=fg,Rn=class extends Xo.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};d([no(Rg),kn(NaN)],Rn.prototype,"minSpacing",2),d([no(Cg),kn(NaN)],Rn.prototype,"maxSpacing",2);var Cn=class extends Xo.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};d([no(Pg,{optional:!0})],Cn.prototype,"autoRotate",2),d([no(vl)],Cn.prototype,"autoRotateAngle",2);var Pn=class extends Xo.PolarAxis{constructor(t,e){super(t,e),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new Bg({name:`${this.id}-gridPaths`,zIndex:kg.AXIS_GRID_ZINDEX})),this.gridPathSelection=Vg.select(this.gridPathGroup,zg)}get direction(){return Lg.Y}assignCrossLineArrayConstructor(t){Og(t,xl)}getAxisTransform(){const t=this.scale.range[0],{translation:e,positionAngle:i,innerRadiusRatio:o}=this,s=t*o,n=Ug(i);return{translationX:e.x,translationY:e.y-t-s,rotation:n,rotationCenterX:0,rotationCenterY:t+s}}updateSelections(t,e,i){var o;super.updateSelections(t,e,i);const{gridLine:{enabled:s,style:n,width:a},shape:r}=this;if(!n)return;const l=this.prepareTickData(e),c=n.length,u=(S,f)=>{const{stroke:x,lineDash:M}=n[f%c];S.stroke=x,S.strokeWidth=a,S.lineDash=M,S.fill=void 0},[h,p]=(o=this.gridRange)!=null?o:[0,2*Math.PI],g=Fg(p-h,2*Math.PI),m=(S,f)=>{const{path:x}=S;x.clear(!0);const M=this.getTickRadius(f);g?(x.moveTo(M,0),x.arc(0,0,M,0,2*Math.PI)):(x.moveTo(M*Math.cos(h),M*Math.sin(h)),x.arc(0,0,M,Ml(h),Ml(p))),g&&x.closePath()},y=(S,f)=>{const{path:x}=S,M=this.gridAngles;if(x.clear(!0),!M||M.length<3)return;const N=this.getTickRadius(f);M.forEach((v,D)=>{const I=N*Math.cos(v),b=N*Math.sin(v);D===0?x.moveTo(I,b):x.lineTo(I,b),M.forEach((T,_)=>{const A=N*Math.cos(T),E=N*Math.sin(T);_===0?x.moveTo(A,E):x.lineTo(A,E)}),x.closePath()}),x.closePath()};this.gridPathSelection.update(s?l:[]).each((S,f,x)=>{u(S,x),r==="circle"?m(S,f):y(S,f)})}updateTitle(){var t;const e=c=>c.defaultValue,{title:i,_titleCaption:o,range:s,moduleCtx:{callbackCache:n}}=this,{formatter:a=e}=(t=this.title)!=null?t:{};if(!i){o.enabled=!1;return}o.enabled=i.enabled,o.fontFamily=i.fontFamily,o.fontSize=i.fontSize,o.fontStyle=i.fontStyle,o.fontWeight=i.fontWeight,o.color=i.color,o.wrapping=i.wrapping;let r=!1;const l=o.node;i.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((s[0]+s[1])/2),l.y=-wg.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=n.call(a,this.getTitleFormatterParams())),l.visible=r}createTick(){return new Rn}updateCrossLines(){var t;(t=this.crossLines)==null||t.forEach(e=>{if(e instanceof xl){const{shape:i,gridAngles:o,range:s,innerRadiusRatio:n}=this,a=s[0];e.shape=i,e.gridAngles=o,e.axisOuterRadius=a,e.axisInnerRadius=a*n}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new Cn}};d([no(vl),kn(0)],Pn.prototype,"positionAngle",2);var{RATIO:wn,ProxyPropertyOnWrite:Dl,Validate:Bn}=gg,{BandScale:Kg}=yg,Ze=class extends Pn{constructor(t){super(t,new Kg),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(t){return t.slice().reverse()}getTickRadius(t){const{scale:e}=this,i=e.range[0],o=i*this.innerRadiusRatio,s=(i-o)/e.domain.length;return i-t.translationY+o-s/2}};Ze.className="RadiusCategoryAxis",Ze.type="radius-category",d([Bn(wn)],Ze.prototype,"groupPaddingInner",2),d([Dl("scale","paddingInner"),Bn(wn)],Ze.prototype,"paddingInner",2),d([Dl("scale","paddingOuter"),Bn(wn)],Ze.prototype,"paddingOuter",2);var jg={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:Ze,themeTemplate:yl};import{_ModuleSupport as Gg,_Scale as Hg,_Util as Yg}from"ag-charts-community";var{AND:Nl,Default:Il,GREATER_THAN:Wg,LESS_THAN:Xg,NUMBER_OR_NAN:_l,Validate:bl}=Gg,{LinearScale:Qg}=Hg,{normalisedExtentWithMetadata:$g}=Yg,ao=class extends Pn{constructor(t){super(t,new Qg),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(t){var e;const{scale:i}=this,o=(e=i.getDomain)==null?void 0:e.call(i)[1];return t.filter(({tick:s})=>s!==o).sort((s,n)=>n.tick-s.tick)}getTickRadius(t){const{scale:e}=this,i=e.range[0],o=i*this.innerRadiusRatio;return i-t.translationY+o}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:s}=$g(t,e,i);return{domain:o,clipped:s}}};ao.className="RadiusNumberAxis",ao.type="radius-number",d([bl(Nl(_l,Xg("max"))),Il(NaN)],ao.prototype,"min",2),d([bl(Nl(_l,Wg("min"))),Il(NaN)],ao.prototype,"max",2);var Zg={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:ao,themeTemplate:yl};import{_ModuleSupport as Tl}from"ag-charts-community";var{BOOLEAN:qg,POSITIVE_NUMBER:Jg,ObserveChanges:Al,Validate:El}=Tl,zn=class extends Tl.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,t.animationManager.skip(!1)}};d([Al((t,e)=>{t.ctx.animationManager.skip(!e)}),El(qg)],zn.prototype,"enabled",2),d([Al((t,e)=>{t.ctx.animationManager.defaultDuration=e}),El(Jg,{optional:!0})],zn.prototype,"duration",2);var ty={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:zn,themeTemplate:{animation:{enabled:!0}}};import{_Theme as ro}from"ag-charts-community";import{_ModuleSupport as Ie,_Scene as qe,_Util as Vn}from"ag-charts-community";import{_ModuleSupport as ey}from"ag-charts-community";var{BOOLEAN:Ol,COLOR_STRING:Qo,DATE:Ll,LINE_DASH:kl,NUMBER:lo,RATIO:Fn,STRING:Rl,OBJECT:ue,OR:Cl,UNION:iy,BaseProperties:co,Validate:rt}=ey,_e=class extends co{};d([rt(Qo,{optional:!0})],_e.prototype,"stroke",2),d([rt(Fn,{optional:!0})],_e.prototype,"strokeOpacity",2),d([rt(lo,{optional:!0})],_e.prototype,"strokeWidth",2),d([rt(kl,{optional:!0})],_e.prototype,"lineDash",2),d([rt(lo,{optional:!0})],_e.prototype,"lineDashOffset",2);var Pl=class extends _e{constructor(){super(...arguments),this.middle=new _e,this.background=new Zo}};d([rt(ue,{optional:!0})],Pl.prototype,"middle",2),d([rt(ue,{optional:!0})],Pl.prototype,"background",2);var Jt=class extends _e{constructor(){super(...arguments),this.type="line",this.handle=new Li,this.start=new ki,this.end=new ki,this.top=new $o,this.bottom=new $o,this.middle=new _e,this.background=new Zo}};d([rt(iy(["line","parallel-channel"]))],Jt.prototype,"type",2),d([rt(Ol,{optional:!0})],Jt.prototype,"locked",2),d([rt(Ol,{optional:!0})],Jt.prototype,"visible",2),d([rt(ue,{optional:!0})],Jt.prototype,"handle",2),d([rt(ue,{optional:!0})],Jt.prototype,"start",2),d([rt(ue,{optional:!0})],Jt.prototype,"end",2),d([rt(ue,{optional:!0})],Jt.prototype,"top",2),d([rt(ue,{optional:!0})],Jt.prototype,"bottom",2),d([rt(ue,{optional:!0})],Jt.prototype,"middle",2),d([rt(ue,{optional:!0})],Jt.prototype,"background",2);var $o=class extends co{constructor(){super(...arguments),this.start=new ki,this.end=new ki}};d([rt(ue,{optional:!0})],$o.prototype,"start",2),d([rt(ue,{optional:!0})],$o.prototype,"end",2);var Li=class extends co{};d([rt(Qo,{optional:!0})],Li.prototype,"fill",2),d([rt(Qo,{optional:!0})],Li.prototype,"stroke",2),d([rt(Fn,{optional:!0})],Li.prototype,"strokeOpacity",2),d([rt(kl,{optional:!0})],Li.prototype,"lineDash",2),d([rt(lo,{optional:!0})],Li.prototype,"lineDashOffset",2);var ki=class extends co{};d([rt(Cl(Rl,lo,Ll))],ki.prototype,"x",2),d([rt(Cl(Rl,lo,Ll))],ki.prototype,"y",2);var Zo=class extends co{};d([rt(Qo,{optional:!0})],Zo.prototype,"fill",2),d([rt(Fn,{optional:!0})],Zo.prototype,"fillOpacity",2);var wl=(t=>(t.Line="line",t.ParallelChannel="parallel-channel",t))(wl||{});import{_Scene as Bl}from"ag-charts-community";import{_Scene as oy}from"ag-charts-community";var zl=class extends oy.Group{constructor(){super(...arguments),this.locked=!1}};import{_Scene as uo}from"ag-charts-community";var Vl=class extends uo.Group{constructor(){super(...arguments),this.visible=!1}drag(t){return{point:t,offset:{x:t.x-this.handle.x,y:t.y-this.handle.y}}}toggleActive(t){this.handle.strokeWidth=t?1.5:1,this.handle.dirtyPath=!0}toggleHovered(t){this.glow.visible=t,this.glow.dirtyPath=!0}toggleDragging(t){this.handle.visible=!t,this.glow.visible=this.glow.visible&&!t,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0}getCursor(){return"default"}containsPoint(t,e){return this.handle.containsPoint(t,e)}},Fl=class extends Vl{constructor(){super(),this.handle=new uo.Rect,this.glow=new uo.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=4,this.handle.width=12,this.handle.height=12,this.handle.strokeWidth=1,this.handle.zIndex=2,this.glow.cornerRadius=4,this.glow.width=16,this.glow.height=16,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}update(t){var e,i,o;this.handle.setProperties(t),this.glow.setProperties(X(U({},t),{x:((e=t.x)!=null?e:this.glow.x)-2,y:((i=t.y)!=null?i:this.glow.y)-2,fill:(o=t.stroke)!=null?o:t.fill}))}drag(t){return this.gradient==="vertical"?{point:{x:t.x,y:this.handle.y},offset:{x:t.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:t.y},offset:{x:0,y:t.y-this.handle.y}}}getCursor(){return this.gradient==="vertical"?"col-resize":"row-resize"}},Ri=class extends Vl{constructor(){super(),this.handle=new uo.Circle,this.glow=new uo.Circle,this.append([this.glow,this.handle]),this.handle.size=11,this.handle.strokeWidth=1,this.handle.zIndex=2,this.glow.size=17,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}update(t){this.handle.setProperties(t),this.glow.setProperties(X(U({},t),{fill:t.stroke}))}};import{_Scene as Ul}from"ag-charts-community";var Kl=(t,e)=>Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),Un=class extends Ul.Line{constructor(){super(...arguments),this.growCollisionBox=2}updateCollisionBBox(){const t=this.x1,e=this.strokeWidth+this.growCollisionBox,i=this.y1-Math.floor(e/2),o=Kl(this.x2-t,this.y2-i);this.collisionBBox=new Ul.BBox(t,i,o,e)}isPointInPath(t,e){var i,o;const{collisionBBox:s,x1:n,y1:a,x2:r,y2:l}=this;if(!s)return!1;t-=n,e-=a;const c=r-n,u=l-a,h=Math.atan2(e,t)-Math.atan2(u,c),p=Kl(t,e),g=n+p*Math.cos(h),m=a+p*Math.sin(h);return(o=(i=this.collisionBBox)==null?void 0:i.containsPoint(g,m))!=null?o:!1}},sy=class extends zl{constructor(){super(),this.type="channel",this.topLine=new Un,this.middleLine=new Bl.Line,this.bottomLine=new Un,this.background=new Bl.Path,this.handles={topLeft:new Ri,topMiddle:new Fl,topRight:new Ri,bottomLeft:new Ri,bottomMiddle:new Fl,bottomRight:new Ri},this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}update(t,e,i,o){const{locked:s,visible:n}=t;if(this.locked=s??!1,this.seriesRect=e,i==null||o==null){this.visible=!1;return}else this.visible=n??!0;this.updateLines(t,i,o),this.updateHandles(t,i,o),this.updateBackground(t,i,o)}toggleHandles(t){var e;typeof t=="boolean"&&(t={topLeft:t,topMiddle:t,topRight:t,bottomLeft:t,bottomMiddle:t,bottomRight:t});for(const[i,o]of Object.entries(this.handles))o.visible=(e=t[i])!=null?e:!0,o.toggleHovered(this.activeHandle===i)}toggleActive(t){this.toggleHandles(t);for(const e of Object.values(this.handles))e.toggleActive(t)}dragHandle(t,e,i){const{activeHandle:o,handles:s}=this;if(o==null)return;const{offset:n}=s[o].drag(e);s[o].toggleDragging(!0);let a=[];switch(o){case"topLeft":case"bottomLeft":a=["topLeft","bottomLeft"];break;case"topMiddle":a=["topLeft","topRight"],n.y-=6;break;case"topRight":case"bottomRight":a=["topRight","bottomRight"];break;case"bottomMiddle":a=["bottomLeft","bottomRight"],n.y-=6;break}const r=a.map(l=>i({x:s[l].handle.x+n.x,y:s[l].handle.y+n.y}));if(!r.some(l=>l===void 0))for(const[l,c]of r.entries()){const u=this.getHandleDatumPoint(a[l],t);u.x=c.x,u.y=c.y}}stopDragging(){const{activeHandle:t,handles:e}=this;t!=null&&e[t].toggleDragging(!1)}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(t,e){var i,o;const{handles:s,seriesRect:n,topLine:a,bottomLine:r}=this;this.activeHandle=void 0;for(const[l,c]of Object.entries(s))if(c.containsPoint(t,e))return this.activeHandle=l,!0;return t-=(i=n?.x)!=null?i:0,e-=(o=n?.y)!=null?o:0,a.containsPoint(t,e)||r.containsPoint(t,e)}updateLines(t,e,i){var o,s,n,a,r;const{topLine:l,middleLine:c,bottomLine:u}=this,{lineDash:h,lineDashOffset:p,stroke:g,strokeOpacity:m,strokeWidth:y}=t,S={lineDash:h,lineDashOffset:p,stroke:g,strokeOpacity:m,strokeWidth:y};l.setProperties(U({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},S)),u.setProperties(U({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},S)),l.updateCollisionBBox(),u.updateCollisionBBox(),t.type==="parallel-channel"?c.setProperties({x1:e.x1,y1:i.y1+(e.y1-i.y1)/2,x2:e.x2,y2:i.y2+(e.y2-i.y2)/2,lineDash:(o=t.middle.lineDash)!=null?o:h,lineDashOffset:(s=t.middle.lineDashOffset)!=null?s:p,stroke:(n=t.middle.stroke)!=null?n:g,strokeOpacity:(a=t.middle.strokeOpacity)!=null?a:m,strokeWidth:(r=t.middle.strokeWidth)!=null?r:y}):c.visible=!1}updateHandles(t,e,i){var o,s;const{handles:{topLeft:n,topMiddle:a,topRight:r,bottomLeft:l,bottomMiddle:c,bottomRight:u}}=this,h={fill:t.handle.fill,stroke:(o=t.handle.stroke)!=null?o:t.stroke,strokeOpacity:(s=t.handle.strokeOpacity)!=null?s:t.strokeOpacity};n.update(X(U({},h),{x:e.x1,y:e.y1})),r.update(X(U({},h),{x:e.x2,y:e.y2})),l.update(X(U({},h),{x:i.x1,y:i.y1})),u.update(X(U({},h),{x:i.x2,y:i.y2})),a.update(X(U({},h),{x:e.x1+(e.x2-e.x1)/2-a.handle.width/2,y:e.y1+(e.y2-e.y1)/2-a.handle.height/2})),c.update(X(U({},h),{x:i.x1+(i.x2-i.x1)/2-c.handle.width/2,y:i.y1+(i.y2-i.y1)/2-c.handle.height/2}))}updateBackground(t,e,i){const{background:o}=this;o.path.clear(),o.path.moveTo(e.x1,e.y1),o.path.lineTo(e.x2,e.y2),o.path.lineTo(i.x2,i.y2),o.path.lineTo(i.x1,i.y1),o.path.closePath(),o.checkPathDirty(),o.setProperties({fill:t.background.fill,fillOpacity:t.background.fillOpacity})}getHandleDatumPoint(t,e){switch(t){case"topLeft":return e.top.start;case"topRight":return e.top.end;case"bottomLeft":return e.bottom.start;case"bottomRight":default:return e.bottom.end}}},ny=class extends zl{constructor(){super(),this.type="line",this.line=new Un,this.start=new Ri,this.end=new Ri,this.append([this.line,this.start,this.end])}update(t,e,i){var o,s;const{line:n,start:a,end:r}=this,{locked:l,visible:c,lineDash:u,lineDashOffset:h,stroke:p,strokeWidth:g,strokeOpacity:m}=t;if(this.locked=l??!1,this.seriesRect=e,i==null){this.visible=!1;return}else this.visible=c??!0;const{x1:y,y1:S,x2:f,y2:x}=i;n.setProperties({x1:y,y1:S,x2:f,y2:x,lineDash:u,lineDashOffset:h,stroke:p,strokeWidth:g,strokeOpacity:m,fillOpacity:0}),n.updateCollisionBBox();const M={fill:t.handle.fill,stroke:(o=t.handle.stroke)!=null?o:p,strokeOpacity:(s=t.handle.strokeOpacity)!=null?s:m};a.update(X(U({},M),{x:y,y:S})),r.update(X(U({},M),{x:f,y:x}))}toggleHandles(t){var e,i;typeof t=="boolean"&&(t={start:t,end:t}),this.start.visible=(e=t.start)!=null?e:!0,this.end.visible=(i=t.end)!=null?i:!0,this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(t){this.toggleHandles(t),this.start.toggleActive(t),this.end.toggleActive(t)}dragHandle(t,e,i){const{activeHandle:o}=this;if(!o||t.start==null||t.end==null)return;this[o].toggleDragging(!0);const s=i(this[o].drag(e).point);s&&(t[o].x=s.x,t[o].y=s.y)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getCursor(){return this.activeHandle==null?"pointer":"default"}containsPoint(t,e){var i,o;const{start:s,end:n,seriesRect:a,line:r}=this;return this.activeHandle=void 0,s.containsPoint(t,e)?(this.activeHandle="start",!0):n.containsPoint(t,e)?(this.activeHandle="end",!0):(t-=(i=a?.x)!=null?i:0,e-=(o=a?.y)!=null?o:0,r.isPointInPath(t,e))}},{BOOLEAN:ay,OBJECT_ARRAY:ry,InteractionState:Ci,PropertiesArray:ly,Validate:jl}=Ie,Kn=class extends Ie.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.initial=new ly(Jt),this.container=new qe.Group({name:"static-annotations"}),this.annotations=new qe.Selection(this.container,this.createAnnotation.bind(this)),this.hoverAddingFns={line:{end:(a,r,l)=>{a.set({end:l}),r.toggleHandles({end:!1})}},"parallel-channel":{end:(a,r,l)=>{a.set({top:{end:l},bottom:{end:l}}),r.toggleHandles(!1)},height:(a,r,l,c)=>{const u=this.convertPoint(a.bottom.start),h=this.convertPoint(a.bottom.end);if(!u||!h)return;const p=c.y-h.y,g=this.invertY(u.y+p),m=l.y;!this.validateDatumPoint({x:u.x,y:g})||!this.validateDatumPoint({x:h.x,y:m})||(r.toggleHandles({topMiddle:!1,bottomMiddle:!1}),a.set({bottom:{start:{y:g},end:{y:m}}}))}}},this.clickAddingFns={line:{start:(a,r)=>{var l;const c=this.createDatum("line",r);(l=this.annotationData)==null||l.push(c),this.addingStep="end"},end:(a,r)=>{var l,c;(c=(l=this.annotationData)==null?void 0:l.at(-1))==null||c.set({end:r}),a?.toggleHandles(!0),this.addingStep=void 0,this.ctx.cursorManager.updateCursor("annotations"),this.ctx.interactionManager.popState(Ci.Annotations)}},"parallel-channel":{start:(a,r)=>{var l;const c=this.createDatum("parallel-channel",r);(l=this.annotationData)==null||l.push(c),this.addingStep="end"},end:(a,r)=>{var l,c;(c=(l=this.annotationData)==null?void 0:l.at(-1))==null||c.set({top:{end:r},bottom:{end:r}}),a?.toggleHandles({topMiddle:!1,bottomMiddle:!1}),this.addingStep="height"},height:(a,r,l)=>{var c;const u=(c=this.annotationData)==null?void 0:c.at(-1),h=this.convertPoint(u.bottom.start),p=this.convertPoint(u.bottom.end);if(!h||!p)return;const g=l.y-p.y,m=this.invertY(h.y+g),y=r.y;u&&this.validateDatumPoint({x:h.x,y:m})&&this.validateDatumPoint({x:p.x,y})&&u.set({bottom:{start:{y:m},end:{y}}}),a?.toggleHandles(!0),this.addingStep=void 0,this.ctx.cursorManager.updateCursor("annotations"),this.ctx.interactionManager.popState(Ci.Annotations)}}};const{All:e,Default:i,Annotations:o,ZoomDrag:s}=Ci,n=t.regionManager.getRegion("series");this.destroyFns.push(t.annotationManager.attachNode(this.container),n.addListener("hover",this.onHover.bind(this),e),n.addListener("click",this.onClick.bind(this),e),n.addListener("drag",this.onDrag.bind(this),i|s|o),n.addListener("drag-end",this.onDragEnd.bind(this),e),t.toolbarManager.addListener("button-pressed",a=>this.onToolbarButtonPress(a)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)))}onToolbarButtonPress(t){this.active!=null&&(this.annotations.nodes()[this.active].toggleActive(!1),this.active=void 0),!(t.group!=="annotations"||!Object.values(wl).includes(t.value))&&(this.ctx.interactionManager.pushState(Ci.Annotations),this.addingStep="start",this.addingType=t.value)}createAnnotation(t){switch(t.type){case"parallel-channel":return new sy;case"line":default:return new ny}}createDatum(t,e){const i=new Jt;switch(i.set(Ie.mergeDefaults({type:t},this.ctx.annotationManager.getAnnotationTypeStyles(t))),t){case"line":i.set({start:e,end:e});break;case"parallel-channel":i.set({top:{start:e,end:e},bottom:{start:e,end:e}});break}return i}onLayoutComplete(t){var e,i,o,s,n;const{annotationData:a,annotations:r}=this;this.seriesRect=t.series.rect;for(const l of(e=t.axes)!=null?e:[])l.direction===Ie.ChartAxisDirection.X?((i=this.scaleX)!=null||(this.scaleX=l.scale),(o=this.domainX)!=null||(this.domainX=l.domain)):((s=this.scaleY)!=null||(this.scaleY=l.scale),(n=this.domainY)!=null||(this.domainY=l.domain));r.update(a??[]).each((l,c)=>{if(this.validateDatum(c))switch(c.type){case"line":l.update(c,t.series.rect,this.convertLine(c));break;case"parallel-channel":l.update(c,t.series.rect,this.convertLine(c.top),this.convertLine(c.bottom));break}})}validateDatum(t){let e=!0;switch(t.type){case"line":e=this.validateDatumLine(t,`Annotation [${t.type}]`);break;case"parallel-channel":e=this.validateDatumLine(t.top,`Annotation [${t.type}] [top]`),e&&(e=this.validateDatumLine(t.bottom,`Annotation [${t.type}] [bottom]`));break}return e}validateDatumLine(t,e){let i=!0;return t.start==null||t.end==null?(Vn.Logger.warnOnce(`${e} requires both a [start] and [end] property, ignoring.`),i=!1):(i&&(i=this.validateDatumPoint(t.start,`${e} [start]`)),i&&(i=this.validateDatumPoint(t.end,`${e} [end]`))),i}validateDatumPoint(t,e){const{domainX:i,domainY:o,scaleX:s,scaleY:n}=this;if(t.x==null||t.y==null)return e&&Vn.Logger.warnOnce(`${e} requires both an [x] and [y] property, ignoring.`),!1;if(!i||!o||!s||!n)return!0;const a=this.validateDatumPointDirection(i,s,t.x),r=this.validateDatumPointDirection(o,n,t.y);if(!a||!r){let l="x & y domains";return a&&(l="y domain"),r&&(l="x domain"),e&&Vn.Logger.warnOnce(`${e} is outside the ${l}, ignoring. - x: [${t.x}], y: ${t.y}]`),!1}return!0}validateDatumPointDirection(t,e,i){return qe.ContinuousScale.is(e)?i>=t[0]&&i<=t[1]:!0}onHover(t){const{addingStep:e}=this;e==null?this.onHoverSelecting(t):this.onHoverEditing(t)}onHoverSelecting(t){const{active:e,annotations:i,ctx:{cursorManager:o}}=this;this.hovered=void 0,i.each((s,n,a)=>{var r;if(s.locked)return;const l=s.containsPoint(t.offsetX,t.offsetY);l&&((r=this.hovered)!=null||(this.hovered=a)),s.toggleHandles(l||e===a)}),o.updateCursor("annotations",this.hovered==null?void 0:i.nodes()[this.hovered].getCursor())}onHoverEditing(t){var e,i,o,s,n;const{annotationData:a,annotations:r,addingStep:l,addingType:c,ctx:{cursorManager:u,updateService:h}}=this;if(!a||!c||!l)return;const p={x:t.offsetX-((i=(e=this.seriesRect)==null?void 0:e.x)!=null?i:0),y:t.offsetY-((s=(o=this.seriesRect)==null?void 0:o.y)!=null?s:0)},g=this.invertPoint(p),m=this.validateDatumPoint(g);if(u.updateCursor("annotations",m?void 0:"not-allowed"),!m||l==="start")return;const y=a.at(-1);this.active=a.length-1;const S=r.nodes()[this.active];if(!y||!S)return;S.toggleActive(!0);const f=(n=this.hoverAddingFns[c])==null?void 0:n[l];f&&f(y,S,g,p),h.update()}onClick(t){this.addingStep==null?this.onClickSelecting():this.onClickAdding(t)}onClickSelecting(){this.active!=null&&this.annotations.nodes()[this.active].toggleActive(!1),this.active=this.hovered,this.active!=null&&this.annotations.nodes()[this.active].toggleActive(!0)}onClickAdding(t){var e,i,o,s,n;const{active:a,annotationData:r,annotations:l,addingStep:c,addingType:u,ctx:{updateService:h}}=this;if(!r||!c||!u)return;const p={x:t.offsetX-((i=(e=this.seriesRect)==null?void 0:e.x)!=null?i:0),y:t.offsetY-((s=(o=this.seriesRect)==null?void 0:o.y)!=null?s:0)},g=this.invertPoint(p),m=a?l.nodes()[a]:void 0;if(!this.validateDatumPoint(g))return;const y=(n=this.clickAddingFns[u])==null?void 0:n[c];y&&y(m,g,p),h.update(Ie.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})}onDrag(t){var e,i;const{active:o,annotationData:s,annotations:n,addingStep:a,seriesRect:r,ctx:{cursorManager:l,interactionManager:c,updateService:u}}=this;if(o==null||s==null||a!=null)return;c.pushState(Ci.Annotations);const{offsetX:h,offsetY:p}=t,g=s[o],m=n.nodes()[o],y={x:h-((e=r?.x)!=null?e:0),y:p-((i=r?.y)!=null?i:0)};l.updateCursor("annotations"),m.dragHandle(g,y,this.onDragNodeHandle.bind(this)),u.update(Ie.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})}onDragNodeHandle(t){const e=this.invertPoint(t);if(!this.validateDatumPoint(e)){this.ctx.cursorManager.updateCursor("annotations","not-allowed");return}return e}onDragEnd(t){const{active:e,annotations:i,addingStep:o,ctx:{cursorManager:s,interactionManager:n,updateService:a}}=this;o==null&&(n.popState(Ci.Annotations),s.updateCursor("annotations"),e!=null&&(i.nodes()[e].stopDragging(),a.update(Ie.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})))}convertLine(t){if(t.start==null||t.end==null)return;const e=this.convertPoint(t.start),i=this.convertPoint(t.end);if(!(e==null||i==null))return{x1:e.x,y1:e.y,x2:i.x,y2:i.y}}convertPoint(t){const{scaleX:e,scaleY:i}=this;let o=0,s=0;return!e||!i||t.x==null||t.y==null?{x:o,y:s}:(o=e.convert(t.x),s=i.convert(t.y),{x:o,y:s})}invertPoint(t){return{x:this.invertX(t.x),y:this.invertY(t.y)}}invertX(t){const{scaleX:e}=this;return qe.ContinuousScale.is(e)?t=e.invert(t):qe.BandScale.is(e)&&(t=e.invertNearest(t)),t}invertY(t){const{scaleY:e}=this;return qe.ContinuousScale.is(e)?t=e.invert(t):qe.BandScale.is(e)&&(t=e.invertNearest(t)),t}};d([Ie.ObserveChanges((t,e)=>{t.ctx.toolbarManager.toggleGroup("annotations",!!e)}),jl(ay)],Kn.prototype,"enabled",2),d([Ie.ObserveChanges((t,e)=>{var i;(i=t.annotationData)!=null||(t.annotationData=e)}),jl(ry,{optional:!0})],Kn.prototype,"initial",2);var cy={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],instanceConstructor:Kn,themeTemplate:{annotations:{line:{stroke:ro.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,handle:{fill:ro.DEFAULT_ANNOTATION_HANDLE_FILL}},"parallel-channel":{stroke:ro.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:ro.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:ro.DEFAULT_ANNOTATION_HANDLE_FILL}}}}};import{_ModuleSupport as jn}from"ag-charts-community";import{_ModuleSupport as uy,_Scene as dy}from"ag-charts-community";var{Image:hy}=dy,{BaseProperties:py,ObserveChanges:gy,ProxyProperty:yy,Validate:Je,NUMBER:qo,POSITIVE_NUMBER:Gl,RATIO:my,createElement:fy,calculatePlacement:Sy}=uy,be=class extends py{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var t;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),(t=this.onLoad)==null||t.call(this))},this.imageElement=fy("img"),this.imageElement.onload=this.onImageLoad,this.node=new hy(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,e){this.containerWidth=t,this.containerHeight=e,this.node.setProperties(this.complete?U({visible:!0,opacity:this.opacity},Sy(this.imageElement.width,this.imageElement.height,this.containerWidth,this.containerHeight,this)):{visible:!1})}};d([Je(qo,{optional:!0})],be.prototype,"top",2),d([Je(qo,{optional:!0})],be.prototype,"right",2),d([Je(qo,{optional:!0})],be.prototype,"bottom",2),d([Je(qo,{optional:!0})],be.prototype,"left",2),d([Je(Gl,{optional:!0})],be.prototype,"width",2),d([Je(Gl,{optional:!0})],be.prototype,"height",2),d([Je(my)],be.prototype,"opacity",2),d([yy("imageElement.src"),gy(t=>t.loadedSynchronously=t.complete)],be.prototype,"url",2);var{ActionOnSet:xy,OBJECT:vy,Validate:My}=jn,Hl=class extends jn.Background{constructor(t){super(t),this.ctx=t,this.image=new be}onLayoutComplete(t){if(super.onLayoutComplete(t),this.image){const{width:e,height:i}=t.chart;this.image.performLayout(e,i)}}onImageLoad(){this.ctx.updateService.update(jn.ChartUpdateType.SCENE_RENDER)}};d([My(vy,{optional:!0}),xy({newValue(t){this.node.appendChild(t.node),t.onLoad=()=>this.onImageLoad()},oldValue(t){this.node.removeChild(t.node),t.onLoad=void 0}})],Hl.prototype,"image",2);var Dy={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Hl};import{_Theme as Ny}from"ag-charts-community";import{_ModuleSupport as ho,_Util as Iy}from"ag-charts-community";var _t="ag-chart-context-menu",ye="ag-charts-dark-context-menu",_y=`
.${_t} {
    background: rgb(248, 248, 248);
    border: 1px solid #babfc7;
    border-radius: 5px;
    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);
    color: rgb(24, 29, 31);
    font: 13px Verdana, sans-serif;
    position: fixed;
    transition: transform 0.1s ease;
    white-space: nowrap;
    z-index: 99999;
}

.${_t}.${ye} {
    color: white;
    background: #15181c;
}

.${_t}__cover {
    position: fixed;
    left: 0px;
    top: 0px;
}

.${_t}__menu {
    display: flex;
    flex-direction: column;
    padding: 0.5em 0;
}

.${_t}__item {
    background: none;
    border: none;
    box-sizing: border-box;
    font: inherit;
    padding: 0.5em 1em;
    text-align: left;
    -webkit-appearance: none;
    -moz-appearance: none;
}

.${_t}__item.${ye} {
    color: white;
}

.${_t}__item:hover {
    background: rgb(33, 150, 243, 0.1);
}

.${_t}__item:hover.${ye} {
    background: rgb(33, 150, 243, 0.1);
}

.${_t}__item:active {
    background: rgb(33, 150, 243, 0.2);
}

.${_t}__item:active.${ye} {
    background: rgb(33, 150, 243, 0.1);
}

.${_t}__item[disabled] {
    border: none;
    opacity: 0.5;
    text-align: left;
}

.${_t}__item[disabled]:hover {
    background: inherit;
    cursor: inherit;
}

.${_t}__divider {
    margin: 5px 0;
    background: #babfc7;
    height: 1px;
}

.${_t}__divider.${ye} {
    background: rgb(33, 150, 243, 0.1);
}
`,{BOOLEAN:Yl,Validate:Wl,createElement:po,getDocument:by,getWindow:Xl,injectStyle:Ty}=ho,Gn=class extends ho.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=t.highlightManager,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.scene=t.scene;const{Default:e,ContextMenu:i,All:o}=ho.InteractionState,s=e|i;if(this.destroyFns.push(t.interactionManager.addListener("contextmenu",n=>this.onContextMenu(n),s),t.interactionManager.addListener("click",()=>this.onClick(),o)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=t.scene.canvas.element,this.container=by("body"),this.element=this.container.appendChild(po("div")),this.element.classList.add(_t),this.element.addEventListener("contextmenu",n=>n.preventDefault()),this.destroyFns.push(()=>{var n;return(n=this.element.parentNode)==null?void 0:n.removeChild(this.element)}),this.hide(),typeof IntersectionObserver<"u"){const n=new IntersectionObserver(a=>{for(const r of a)r.target===this.canvasElement&&r.intersectionRatio===0&&this.hide()},{root:this.container});n.observe(this.canvasElement),this.intersectionObserver=n}if(typeof MutationObserver<"u"){const n=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});n.observe(this.element,{childList:!0}),this.mutationObserver=n}Ty(_y,"contextMenu"),this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const n=t.chartService.title;let a="image";n?.enabled&&n?.text!==void 0&&(a=n.text),this.scene.download(a)}})}isShown(){return this.menuElement!==void 0}onClick(){this.isShown()&&this.hide()}onContextMenu(t){if(!this.enabled)return;this.showEvent=t.sourceEvent,this.x=t.pageX,this.y=t.pageY,this.groups.default=this.registry.copyDefaultActions(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:e,node:i,extra:o,extraNode:s}=this.groups;e.length+i.length+o.length+s.length!==0&&(t.consume(),t.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(ho.InteractionState.ContextMenu),this.element.classList.toggle(ye,this.darkTheme);const t=this.renderMenu();this.menuElement?this.element.replaceChild(t,this.menuElement):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block"}hide(){this.interactionManager.popState(ho.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const t=po("div");return t.classList.add(`${_t}__menu`),t.classList.toggle(ye,this.darkTheme),this.appendMenuGroup(t,this.groups.default,!1),this.pickedNode&&this.appendMenuGroup(t,this.groups.node),this.appendMenuGroup(t,this.groups.extra),this.pickedNode&&this.appendMenuGroup(t,this.groups.extraNode),t}appendMenuGroup(t,e,i=!0){e.length!==0&&(i&&t.appendChild(this.createDividerElement()),e.forEach(o=>{const s=this.renderItem(o);s&&t.appendChild(s)}))}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=po("div");return t.classList.add(`${_t}__divider`),t.classList.toggle(ye,this.darkTheme),t}createActionElement({id:t,label:e,action:i}){return t&&this.registry.isDisabled(t)?this.createDisabledElement(e):this.createButtonElement(e,i)}createButtonElement(t,e){const i=po("button");return i.classList.add(`${_t}__item`),i.classList.toggle(ye,this.darkTheme),i.innerHTML=t,i.onclick=()=>{var o;const s=(o=this.pickedNode)==null?void 0:o.series.createNodeContextMenuActionEvent(this.showEvent,this.pickedNode);s?(Object.defineProperty(s,"itemId",{enumerable:!1,get:()=>{var n;return Iy.Logger.warnOnce("Property [AgNodeContextMenuActionEvent.itemId] is deprecated. Use [yKey], [angleKey] and others instead."),(n=this.pickedNode)==null?void 0:n.itemId}}),e(s)):e({event:this.showEvent}),this.hide()},i}createDisabledElement(t){const e=po("button");return e.classList.add(`${_t}__item`),e.classList.toggle(ye,this.darkTheme),e.disabled=!0,e.innerHTML=t,e}reposition(){const{x:t,y:e}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",t+this.element.offsetWidth>Xl("innerWidth")?this.element.style.right=`calc(100% - ${t-1}px)`:this.element.style.left=`${t+1}px`,e+this.element.offsetHeight>Xl("innerHeight")?this.element.style.bottom=`calc(100% - ${e}px - 0.5em)`:this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){var t,e;super.destroy(),(t=this.intersectionObserver)==null||t.unobserve(this.canvasElement),(e=this.mutationObserver)==null||e.disconnect()}};d([Wl(Yl)],Gn.prototype,"enabled",2),d([Wl(Yl)],Gn.prototype,"darkTheme",2);var Ay={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],optionsKey:"contextMenu",instanceConstructor:Gn,themeTemplate:{contextMenu:{enabled:!0,darkTheme:Ny.IS_DARK_THEME}}};import{_ModuleSupport as Ql,_Scene as $l,_Util as Ey}from"ag-charts-community";import{_ModuleSupport as Oy,_Scene as Hn,_Util as Ly}from"ag-charts-community";var{ActionOnSet:ky,BaseProperties:Ry,BOOLEAN:Zl,FUNCTION:ql,NUMBER:Jo,STRING:ts,Validate:te,createElement:Cy,injectStyle:Py}=Oy,{setAttribute:wy}=Ly,{BBox:By}=Hn,Pi="ag-crosshair-label",zy=`
.${Pi} {
    position: absolute;
    left: 0px;
    top: 0px;
    user-select: none;
    pointer-events: none;
    font: 12px Verdana, sans-serif;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    box-sizing: border-box;
}

.${Pi}-content {
    padding: 0 7px;
    border-radius: 2px;
    line-height: 1.7em;
    background-color: rgb(71,71,71);
    color: rgb(255, 255, 255);
}

.${Pi}-hidden {
    top: -10000px !important;
}
`,ti=class extends Hn.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};d([te(Zl)],ti.prototype,"enabled",2),d([te(ts,{optional:!0})],ti.prototype,"className",2),d([te(Jo)],ti.prototype,"xOffset",2),d([te(Jo)],ti.prototype,"yOffset",2),d([te(ts,{optional:!0})],ti.prototype,"format",2),d([te(ql,{optional:!0})],ti.prototype,"renderer",2);var ei=class extends Ry{constructor(t){super(),this.labelRoot=t,this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=Cy("div"),this.element.classList.add(Pi),wy(this.element,"aria-hidden",!0),t.appendChild(this.element),Py(zy,"crosshairLabel")}show(t){const{element:e}=this;let i=t.x+this.xOffset,o=t.y+this.yOffset;const s=(l,c,u)=>Math.max(Math.min(c,u),l),n=this.getContainerBoundingBox(),a=n.x+n.width-e.clientWidth-1,r=n.y+n.height-e.clientHeight;i=s(n.x+1,i,a),o=s(n.y,o,r),e.style.top=`${Math.round(o)}px`,e.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}computeBBox(){const{element:t}=this;return new Hn.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}getContainerBoundingBox(){const{width:t,height:e}=this.labelRoot.getBoundingClientRect();return new By(0,0,t,e)}toggle(t){this.element.classList.toggle(`${Pi}-hidden`,!t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}toLabelHtml(t,e){var i,o;if(typeof t=="string")return t;e=e??{};const{text:s=(i=e.text)!=null?i:"",color:n=e.color,backgroundColor:a=e.backgroundColor,opacity:r=(o=e.opacity)!=null?o:1}=t,l=`opacity: ${r}; background-color: ${a?.toLowerCase()}; color: ${n}`;return`<div class="${Pi}-content" style="${l}">
                    <span>${s}</span>
                </div>`}};d([te(Zl)],ei.prototype,"enabled",2),d([te(ts,{optional:!0}),ky({changeValue(t,e){t!==e&&(e&&this.element.classList.remove(e),t&&this.element.classList.add(t))}})],ei.prototype,"className",2),d([te(Jo)],ei.prototype,"xOffset",2),d([te(Jo)],ei.prototype,"yOffset",2),d([te(ts,{optional:!0})],ei.prototype,"format",2),d([te(ql,{optional:!0})],ei.prototype,"renderer",2);var{Group:Jl,Line:tc,BBox:Yn}=$l,{createId:Vy}=Ey,{POSITIVE_NUMBER:ec,RATIO:Fy,BOOLEAN:ic,COLOR_STRING:Uy,LINE_DASH:Ky,OBJECT:jy,Validate:Be,Layers:oc,getDocument:Gy}=Ql,Te=class extends Ql.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.id=Vy(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new ti,this.seriesRect=new Yn(0,0,0,0),this.hoverRect=new Yn(0,0,0,0),this.bounds=new Yn(0,0,0,0),this.visible=!1,this.crosshairGroup=new Jl({layer:!0,zIndex:oc.SERIES_CROSSHAIR_ZINDEX}),this.lineGroup=this.crosshairGroup.appendChild(new Jl({name:`${this.id}-crosshair-lines`,zIndex:oc.SERIES_CROSSHAIR_ZINDEX})),this.lineGroupSelection=$l.Selection.select(this.lineGroup,tc,!1),this.activeHighlight=void 0,this.axisCtx=t.parent,this.crosshairGroup.visible=!1,this.labels={};const e=t.regionManager.getRegion("series");this.destroyFns.push(t.scene.attachNode(this.crosshairGroup),e.addListener("hover",i=>this.onMouseMove(i)),e.addListener("leave",()=>this.onMouseOut()),t.highlightManager.addListener("highlight-change",i=>this.onHighlightChange(i)),t.layoutService.addListener("layout-complete",i=>this.layout(i)),()=>Object.entries(this.labels).forEach(([i,o])=>o.destroy()))}layout({series:{rect:t,paddedRect:e,visible:i},axes:o}){if(this.hideCrosshairs(),!(i&&o&&this.enabled)){this.visible=!1;return}this.visible=!0,this.seriesRect=t,this.hoverRect=e;const{position:s="left",axisId:n}=this.axisCtx,a=o.find(h=>h.id===n);if(!a)return;this.axisLayout=a;const r=a.gridPadding+a.seriesAreaPadding;this.bounds=this.buildBounds(t,s,r);const{crosshairGroup:l,bounds:c}=this;l.translationX=Math.round(c.x),l.translationY=Math.round(c.y);const u=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(u),this.updateLines(),this.updateLabels(u)}buildBounds(t,e,i){const o=t.clone();return o.x+=e==="left"?-i:0,o.y+=e==="top"?-i:0,o.width+=e==="left"||e==="right"?i:0,o.height+=e==="top"||e==="bottom"?i:0,o}updateSelections(t){this.lineGroupSelection.update(t,e=>e.append(new tc),e=>e)}updateLabels(t){var e;const{labels:i,ctx:o,axisLayout:s}=this;t.forEach(a=>{var r,l;(l=i[a])!=null||(i[a]=new ei((r=o.scene.canvas.container)!=null?r:Gy("body"))),this.updateLabel(i[a])});const n=(e=this.label.format)!=null?e:s?.label.format;this.labelFormatter=n?this.axisCtx.scaleValueFormatter(n):void 0}updateLabel(t){const{enabled:e,className:i,xOffset:o,yOffset:s,format:n,renderer:a}=this.label;t.enabled=e,t.className=i,t.xOffset=o,t.yOffset=s,t.format=n,t.renderer=a}updateLines(){const{lineGroupSelection:t,bounds:e,stroke:i,strokeWidth:o,strokeOpacity:s,lineDash:n,lineDashOffset:a,axisLayout:r}=this;if(!r)return;const l=this.isVertical();t.each(c=>{c.stroke=i,c.strokeWidth=o,c.strokeOpacity=s,c.lineDash=n,c.lineDashOffset=a,c.y1=0,c.y2=l?e.height:0,c.x1=0,c.x2=l?0:e.width})}isVertical(){return this.axisCtx.direction==="x"}formatValue(t){var e;const{labelFormatter:i,axisLayout:o,ctx:{callbackCache:s}}=this;if(i){const r=s.call(i,t);if(r!==void 0)return r}const n=t%1===0,a=((e=o?.label.fractionDigits)!=null?e:0)+(n?0:1);return typeof t=="number"?t.toFixed(a):String(t)}onMouseMove(t){if(!this.enabled||this.snap)return;const{crosshairGroup:e,hoverRect:i}=this,{offsetX:o,offsetY:s}=t;if(this.visible&&i.containsPoint(o,s)){e.visible=!0;const n=this.getData(t);this.updatePositions(n)}else this.hideCrosshairs()}onMouseOut(){this.hideCrosshairs()}onHighlightChange(t){var e,i,o;if(!this.enabled)return;const{crosshairGroup:s,axisCtx:n}=this,{datum:a,series:r}=(e=t.currentHighlight)!=null?e:{},l=a&&(((i=r?.axes.x)==null?void 0:i.id)===n.axisId||((o=r?.axes.y)==null?void 0:o.id)===n.axisId);if(this.activeHighlight=l?t.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight){this.hideCrosshairs();return}const c=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(c),s.visible=!0}}updatePositions(t){const{seriesRect:e,lineGroupSelection:i}=this;i.each((o,s)=>{const n=t[s];if(!n){o.visible=!1;return}o.visible=!0;const{value:a,position:r}=n;let l=0,c=0;this.isVertical()?(l=r,o.translationX=Math.round(l)):(c=r,o.translationY=Math.round(c)),this.label.enabled?this.showLabel(l+e.x,c+e.y,a,s):this.hideLabel(s)})}getData(t){var e,i;const{seriesRect:o,axisCtx:s}=this,n="pointer",{datum:a,xKey:r="",yKey:l=""}=(e=this.activeHighlight)!=null?e:{},{offsetX:c,offsetY:u}=t,h=c-o.x,p=u-o.y,g=this.isVertical();return{[n]:{position:g?h:p,value:s.continuous?s.scaleInvert(g?h:p):(i=a?.[g?r:l])!=null?i:""}}}getActiveHighlightData(t){var e,i;const{axisCtx:o}=this,{datum:s,series:n,xKey:a="",aggregatedValue:r,cumulativeValue:l,midPoint:c}=t,u=n.getKeyProperties(o.direction),h=o.scaleBandwidth()/2,p=((e=n.axes[o.direction])==null?void 0:e.id)===o.axisId,g=u.indexOf("yKey")>-1&&p,m=u.indexOf("xKey")>-1&&p;if(g&&r!==void 0)return{yKey:{value:r,position:o.scaleConvert(r)+h}};if(g&&l!==void 0)return{yKey:{value:l,position:o.scaleConvert(l)+h}};if(m){const S=(i=this.isVertical()?c?.x:c?.y)!=null?i:0;return{xKey:{value:o.continuous?o.scaleInvert(S):s[a],position:S}}}const y={};return u.forEach(S=>{const f=n.properties[S],x=s[f],M=o.scaleConvert(x)+h;y[S]={value:x,position:M}}),y}getLabelHtml(t,e){const{label:{renderer:i},axisLayout:{label:{fractionDigits:o=0}={}}={}}=this,s={text:this.formatValue(t)};if(i){const n={value:t,fractionDigits:o};return e.toLabelHtml(i(n),s)}return e.toLabelHtml(s)}showLabel(t,e,i,o){const{axisCtx:s,bounds:n,axisLayout:a}=this;if(!a)return;const{label:{padding:r},tickSize:l}=a,c=r+l,u=this.labels[o],h=this.getLabelHtml(i,u);u.setLabelHtml(h);const p=u.computeBBox();let g;if(this.isVertical()){const m=-p.width/2,y=s.position==="bottom"?0:-p.height,S=s.position==="bottom"?n.y+n.height+c:n.y-c;g={x:t+m,y:S+y}}else{const m=-p.height/2,y=s.position==="right"?0:-p.width;g={x:(s.position==="right"?n.x+n.width+c:n.x-c)+y,y:e+m}}u.show(g)}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const t in this.labels)this.hideLabel(t)}hideLabel(t){this.labels[t].toggle(!1)}};d([Be(ic)],Te.prototype,"enabled",2),d([Be(Uy,{optional:!0})],Te.prototype,"stroke",2),d([Be(Ky,{optional:!0})],Te.prototype,"lineDash",2),d([Be(ec)],Te.prototype,"lineDashOffset",2),d([Be(ec)],Te.prototype,"strokeWidth",2),d([Be(Fy)],Te.prototype,"strokeOpacity",2),d([Be(ic)],Te.prototype,"snap",2),d([Be(jy)],Te.prototype,"label",2);import{_Theme as sc}from"ag-charts-community";var Hy={crosshair:{enabled:!0,snap:!0,stroke:sc.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:sc.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},Yy={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],instanceConstructor:Te,themeTemplate:Hy};import{_ModuleSupport as nc}from"ag-charts-community";var{BOOLEAN:Wy,FUNCTION:Xy,ActionOnSet:go,Validate:ac}=nc,wi=class extends nc.BaseModuleInstance{constructor(t){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=t.dataService}updateCallback(t,e){this.dataService&&(t&&e!=null?this.dataService.updateCallback(e):this.dataService.clearCallback())}};d([go({newValue(t){this.updateCallback(t,this.getData)}}),ac(Wy)],wi.prototype,"enabled",2),d([go({newValue(t){this.updateCallback(this.enabled,t)}}),ac(Xy)],wi.prototype,"getData",2),d([go({newValue(t){this.dataService.requestThrottle=t}})],wi.prototype,"requestThrottle",2),d([go({newValue(t){this.dataService.dispatchThrottle=t}})],wi.prototype,"updateThrottle",2),d([go({newValue(t){this.dataService.dispatchOnlyLatest=!t}})],wi.prototype,"updateDuringInteraction",2);var Qy={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology"],instanceConstructor:wi,themeTemplate:{dataSource:{enabled:!1}}};import{AgErrorBarSupportedSeriesTypes as $y}from"ag-charts-community";import{AgErrorBarSupportedSeriesTypes as rc,_ModuleSupport as Wn,_Scene as Zy,_Util as qy}from"ag-charts-community";import{_ModuleSupport as Jy,_Scene as Bi}from"ag-charts-community";var{partialAssign:tm,mergeDefaults:es}=Jy,{BBox:Ae}=Bi,em=class{constructor(t){this.components=t,this.union=Ae.merge(t)}containsPoint(t,e){if(!this.union.containsPoint(t,e))return!1;for(const i of this.components)if(i.containsPoint(t,e))return!0;return!1}},im=class extends Bi.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new Bi.Path,this.capsPath=new Bi.Path,this.bboxes=new em([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(t){this._datum=t}calculateCapLength(t,e){const{lengthRatio:i=1,length:o}=t,{lengthRatioMultiplier:s,lengthMax:n}=e,a=o??i*s;return Math.min(a,n)}getFormatterParams(t,e){const{datum:i}=this;if(i===void 0||t.formatter===void 0&&t.cap.formatter===void 0)return;const{xLowerKey:o,xLowerName:s,xUpperKey:n,xUpperName:a,yLowerKey:r,yLowerName:l,yUpperKey:c,yUpperName:u}=t;return{datum:i.datum,seriesId:i.datum.seriesId,xKey:i.xKey,yKey:i.yKey,xLowerKey:o,xLowerName:s,xUpperKey:n,xUpperName:a,yLowerKey:r,yLowerName:l,yUpperKey:c,yUpperName:u,highlighted:e}}formatStyles(t,e,i){let o=t,{cap:s}=o,n=Ur(o,["cap"]);const a=this.getFormatterParams(e,i);if(a!==void 0){if(e.formatter!==void 0){const r=e.formatter(a);n=es(r,n),s=es(r,s),s=es(r?.cap,s)}if(e.cap.formatter!==void 0){const r=e.cap.formatter(a);s=es(r,s)}}return{whiskerStyle:n,capsStyle:s}}applyStyling(t,e){tm(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],t,e)}update(t,e,i){if(this.datum===void 0)return;const{whiskerStyle:o,capsStyle:s}=this.formatStyles(t,e,i),{xBar:n,yBar:a,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,o),l.path.clear(),a!==void 0&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),n!==void 0&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(s??{},r);const c=this.capLength/2,u=this.capsPath;this.applyStyling(u,s),u.path.clear(),a!==void 0&&(u.path.moveTo(a.lowerPoint.x-c,a.lowerPoint.y),u.path.lineTo(a.lowerPoint.x+c,a.lowerPoint.y),u.path.moveTo(a.upperPoint.x-c,a.upperPoint.y),u.path.lineTo(a.upperPoint.x+c,a.upperPoint.y)),n!==void 0&&(u.path.moveTo(n.lowerPoint.x,n.lowerPoint.y-c),u.path.lineTo(n.lowerPoint.x,n.lowerPoint.y+c),u.path.moveTo(n.upperPoint.x,n.upperPoint.y-c),u.path.lineTo(n.upperPoint.x,n.upperPoint.y+c)),u.path.closePath(),u.markDirtyTransform()}updateBBoxes(){var t;const{capLength:e,whiskerPath:i,capsPath:o}=this,{yBar:s,xBar:n}=(t=this.datum)!=null?t:{},a=e/2,r=[];if(s!==void 0){const l=s.lowerPoint.y-s.upperPoint.y;r.push(new Ae(s.lowerPoint.x,s.upperPoint.y,i.strokeWidth,l),new Ae(s.lowerPoint.x-a,s.lowerPoint.y,e,o.strokeWidth),new Ae(s.upperPoint.x-a,s.upperPoint.y,e,o.strokeWidth))}if(n!==void 0){const l=n.upperPoint.x-n.lowerPoint.x;r.push(new Ae(n.lowerPoint.x,n.upperPoint.y,l,i.strokeWidth),new Ae(n.lowerPoint.x,n.lowerPoint.y-a,o.strokeWidth,e),new Ae(n.upperPoint.x,n.upperPoint.y-a,o.strokeWidth,e))}this.bboxes.components=r,this.bboxes.union=Ae.merge(r)}containsPoint(t,e){return this.bboxes.containsPoint(t,e)}pickNode(t,e){return this.containsPoint(t,e)?this:void 0}nearestSquared(t,e,i){const{bboxes:o}=this;if(o.union.distanceSquared(t,e)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=Ae.nearestBox(t,e,o.components);return{nearest:this,distanceSquared:s}}},om=class extends Bi.Group{get children(){return super.children}nearestSquared(t,e){const{nearest:i,distanceSquared:o}=Bi.nearestSquaredInContainer(t,e,this);if(i!==void 0&&!isNaN(o))return{datum:i.datum,distanceSquared:o}}};import{_ModuleSupport as sm}from"ag-charts-community";var{BaseProperties:lc,Validate:ut,BOOLEAN:cc,COLOR_STRING:uc,FUNCTION:dc,LINE_DASH:hc,NUMBER:nm,OBJECT:am,POSITIVE_NUMBER:is,RATIO:Xn,STRING:ze}=sm,me=class extends lc{};d([ut(cc,{optional:!0})],me.prototype,"visible",2),d([ut(uc,{optional:!0})],me.prototype,"stroke",2),d([ut(is,{optional:!0})],me.prototype,"strokeWidth",2),d([ut(Xn,{optional:!0})],me.prototype,"strokeOpacity",2),d([ut(hc,{optional:!0})],me.prototype,"lineDash",2),d([ut(is,{optional:!0})],me.prototype,"lineDashOffset",2),d([ut(nm,{optional:!0})],me.prototype,"length",2),d([ut(Xn,{optional:!0})],me.prototype,"lengthRatio",2),d([ut(dc,{optional:!0})],me.prototype,"formatter",2);var Rt=class extends lc{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new me}};d([ut(ze,{optional:!0})],Rt.prototype,"yLowerKey",2),d([ut(ze,{optional:!0})],Rt.prototype,"yLowerName",2),d([ut(ze,{optional:!0})],Rt.prototype,"yUpperKey",2),d([ut(ze,{optional:!0})],Rt.prototype,"yUpperName",2),d([ut(ze,{optional:!0})],Rt.prototype,"xLowerKey",2),d([ut(ze,{optional:!0})],Rt.prototype,"xLowerName",2),d([ut(ze,{optional:!0})],Rt.prototype,"xUpperKey",2),d([ut(ze,{optional:!0})],Rt.prototype,"xUpperName",2),d([ut(cc,{optional:!0})],Rt.prototype,"visible",2),d([ut(uc,{optional:!0})],Rt.prototype,"stroke",2),d([ut(is,{optional:!0})],Rt.prototype,"strokeWidth",2),d([ut(Xn,{optional:!0})],Rt.prototype,"strokeOpacity",2),d([ut(hc,{optional:!0})],Rt.prototype,"lineDash",2),d([ut(is,{optional:!0})],Rt.prototype,"lineDashOffset",2),d([ut(dc,{optional:!0})],Rt.prototype,"formatter",2),d([ut(am)],Rt.prototype,"cap",2);var{fixNumericExtent:rm,groupAccumulativeValueProperty:lm,isDefined:Xt,mergeDefaults:cm,valueProperty:os,ChartAxisDirection:Qn}=Wn;function um(t){for(const e of rc)if(e===t.series.type)return t.series;throw new Error(`AG Charts - unsupported series type '${t.series.type}', error bars supported series types: ${rc.join(", ")}`)}var dm=class Uo extends Wn.BaseModuleInstance{constructor(e){super(),this.properties=new Rt;const i=um(e),{annotationGroup:o,annotationSelections:s}=i;this.cartesianSeries=i,this.groupNode=new om({name:`${o.id}-errorBars`,zIndex:Wn.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:i.getGroupZIndexSubOrder("annotation")}),o.appendChild(this.groupNode),this.selection=Zy.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),this.destroyFns.push(i.addListener("data-processed",n=>this.onDataProcessed(n)),i.addListener("data-update",n=>this.onDataUpdate(n)),i.addListener("visibility-changed",n=>this.onToggleSeriesItem(n)),e.highlightManager.addListener("highlight-change",n=>this.onHighlightChange(n)),()=>o.removeChild(this.groupNode),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties;return Xt(e)&&Xt(i)||Xt(o)&&Xt(s)}isStacked(){var e;const i=(e=this.cartesianSeries.seriesGrouping)==null?void 0:e.stackCount;return i==null?!1:i>0}getUnstackPropertyDefinition(e){const i=[],{xLowerKey:o,xUpperKey:s,yLowerKey:n,yUpperKey:a,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:u}=e;return n!=null&&a!=null&&i.push(os(n,u,{id:`${l}-lower`}),os(a,u,{id:`${l}-upper`})),o!=null&&s!=null&&i.push(os(o,c,{id:`${r}-lower`}),os(s,c,{id:`${r}-upper`})),i}getStackPropertyDefinition(e){var i,o;const s=[],{cartesianSeries:n}=this,{xLowerKey:a,xUpperKey:r,yLowerKey:l,yUpperKey:c,xErrorsID:u,yErrorsID:h}=this.getMaybeFlippedKeys(),{xScaleType:p,yScaleType:g}=e,m=(o=(i=n.seriesGrouping)==null?void 0:i.groupIndex)!=null?o:n.id,y=U({invalidValue:null,missingValue:0,separateNegative:!0},n.visible?{}:{forceValue:0}),S=(x,M,N,v)=>lm(x,"normal","current",U({id:`${M}-${N}`,groupId:`errorGroup-${m}-${N}`},y),v),f=(x,M,N,v)=>{s.push(...S(x,N,"lower",v),...S(M,N,"upper",v))};return l!=null&&c!=null&&f(l,c,h,g),a!=null&&r!=null&&f(a,r,u,p),s}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:i,xUpperKey:o,xErrorsID:s,yLowerKey:n,yUpperKey:a,yErrorsID:r}=this.getMaybeFlippedKeys();if(e===Qn.X?Xt(i)&&Xt(o):Xt(n)&&Xt(a)){const{dataModel:c,processedData:u,cartesianSeries:h}=this;if(c!=null&&u!=null){const p=h.axes[e],g={x:s,y:r}[e],m=c.getDomain(h,`${g}-lower`,"value",u),y=c.getDomain(h,`${g}-upper`,"value",u),S=[Math.min(...m,...y),Math.max(...m,...y)];return rm(S,p)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,Xt(e.dataModel)&&Xt(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){var e;return(e=this.cartesianSeries.contextNodeData)==null?void 0:e.nodeData}createNodeData(){var e,i;const o=this.getNodeData(),s=(e=this.cartesianSeries.axes[Qn.X])==null?void 0:e.scale,n=(i=this.cartesianSeries.axes[Qn.Y])==null?void 0:i.scale;if(!(!this.hasErrorBars()||!s||!n||!o))for(let a=0;a<o.length;a++){const{midPoint:r,xLower:l,xUpper:c,yLower:u,yUpper:h}=this.getDatum(o,a);if(r!=null){let p,g;Xt(l)&&Xt(c)&&(p={lowerPoint:{x:this.convert(s,l),y:r.y},upperPoint:{x:this.convert(s,c),y:r.y}}),Xt(u)&&Xt(h)&&(g={lowerPoint:{x:r.x,y:this.convert(n,u)},upperPoint:{x:r.x,y:this.convert(n,h)}}),o[a].xBar=p,o[a].yBar=g}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s}=this.properties,[n,a]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,o]=[o,e],[i,s]=[s,i],[n,a]=[a,n]),{xLowerKey:e,xUpperKey:i,xErrorsID:n,yLowerKey:o,yUpperKey:s,yErrorsID:a}}static getDatumKey(e,i,o){if(i==null)return;const s=e.datum[i];if(s!=null){if(typeof s!="number"){qy.Logger.warnOnce(`Found [${i}] error value of type ${typeof s}. Expected number type`);return}return s+o}}getDatum(e,i){const{xLowerKey:o,xUpperKey:s,yLowerKey:n,yUpperKey:a}=this.getMaybeFlippedKeys(),r=e[i],l=r.cumulativeValue==null||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,u]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:Uo.getDatumKey(r,o,c),xUpper:Uo.getDatumKey(r,s,c),yLower:Uo.getDatumKey(r,n,u),yUpper:Uo.getDatumKey(r,a,u)}}convert(e,i){var o;const s=((o=e.bandwidth)!=null?o:0)/2;return e.convert(i)+s}update(){const e=this.getNodeData();e!=null&&(this.selection.update(e),this.selection.each((i,o,s)=>this.updateNode(i,o,s)))}updateNode(e,i,o){e.datum=i,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:i,y:o}=this.groupNode.transformPoint(e.x,e.y),s=this.groupNode.pickNode(i,o);if(s!=null)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:i,yLowerKey:o,yUpperKey:s,xLowerName:n=e,xUpperName:a=i,yLowerName:r=o,yUpperName:l=s}=this.properties;return{xLowerKey:e,xLowerName:n,xUpperKey:i,xUpperName:a,yLowerKey:o,yLowerName:r,yUpperKey:s,yUpperName:l}}onToggleSeriesItem(e){this.groupNode.visible=e.enabled}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:cm(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,i,o){const s=this.getNodeData();if(s!=null){for(let n=0;n<s.length;n++)if(e===s[n]){this.selection.nodes()[n].update(i,this.properties,o);break}}}onHighlightChange(e){const{previousHighlight:i,currentHighlight:o}=e;o?.series===this.cartesianSeries&&this.restyleHighlightChange(o,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new im}getWhiskerProperties(){const{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:n,lineDashOffset:a}=this.properties;return{stroke:e,strokeWidth:i,visible:o,strokeOpacity:s,lineDash:n,lineDashOffset:a}}};import{_Theme as hm}from"ag-charts-community";var pm={series:{errorBar:{visible:!0,stroke:hm.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},gm={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:$y,instanceConstructor:dm,themeTemplate:pm};import{_ModuleSupport as pc,_Theme as gc}from"ag-charts-community";import{_ModuleSupport as yc}from"ag-charts-community";import{_ModuleSupport as mc,_Scene as ym,_Util as mm}from"ag-charts-community";var{Validate:$n,BOOLEAN:fm,POSITIVE_NUMBER:fc,Layers:Zn,ActionOnSet:Sc,CategoryAxis:Sm,GroupedCategoryAxis:xm}=mc,{toRadians:vm,Padding:Mm,Logger:xc}=mm,{Text:Dm,Group:ss,BBox:vc}=ym,qn=class{constructor(){this.top=0,this.bottom=0}};d([$n(fc)],qn.prototype,"top",2),d([$n(fc)],qn.prototype,"bottom",2);var ns=class extends mc.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.padding=new qn,this.root=new ss({name:"root"}),this.seriesRoot=this.root.appendChild(new ss({name:"Series-root",layer:!0,zIndex:Zn.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new ss({name:"Axes-Grids",layer:!0,zIndex:Zn.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new ss({name:"Axes-Grids",layer:!0,zIndex:Zn.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(t=>t.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(t,e){var i;const o=(i=e?.filter(s=>!t.includes(s)))!=null?i:[];this.destroySeries(o);for(const s of t){if(e?.includes(s))continue;s.rootGroup.parent==null&&this.seriesRoot.appendChild(s.rootGroup);const n=this;s.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return n.seriesRect},placeLabels(){return new Map}},s.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled")}}destroySeries(t){t?.forEach(e=>{e.destroy(),e.rootGroup!=null&&this.seriesRoot.removeChild(e.rootGroup),e.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)})}assignAxesToSeries(){const t={};this.axes.forEach(e=>{var i;const o=e.direction;((i=t[o])!=null?i:t[o]=[]).push(e)}),this.series.forEach(e=>{e.directions.forEach(i=>{const o=t[i];if(!o){xc.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}const s=e.getKeys(i),n=this.findMatchingAxis(o,s);if(!n){xc.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);return}e.axes[i]=n})})}findMatchingAxis(t,e){for(const i of t){if(!i.keys.length)return i;if(e){for(const o of e)if(i.keys.includes(o))return i}}}updateData(t){return P(this,null,function*(){this.series.forEach(e=>e.setChartData(t.data)),this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready",this.series.forEach(e=>e.resetAnimation("disabled"))})})}processData(t){return P(this,null,function*(){this.series.some(i=>i.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=this.series.map(i=>i.processData(t.dataController));yield Promise.all(e)})}computeAxisPadding(){const t=new Mm;return this.enabled&&this.axes.forEach(e=>{var i;const{position:o,thickness:s=0,line:n,label:a}=e;if(o==null)return;let r;s>0?r=s:r=(n.enabled?n.width:0)+(a.enabled?((i=a.fontSize)!=null?i:0)*Dm.defaultLineHeightRatio+a.padding:0),t[o]=Math.ceil(r)}),t}layout(t,e){return P(this,null,function*(){const{padding:i}=this,o=this.seriesRect!=null,s=new vc(0,0,t,e-(i.top+i.bottom));this.seriesRect=s,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new vc(0,-i.top,t,e)));const n=a=>a instanceof Sm||a instanceof xm?[0,s.height]:[s.height,0];this.axes.forEach(a=>{const{position:r="left"}=a;switch(r){case"top":case"bottom":a.range=[0,s.width],a.gridLength=s.height;break;case"right":case"left":a.range=n(a),a.gridLength=s.width;break}switch(r){case"top":case"left":a.translation.x=0,a.translation.y=0;break;case"bottom":a.translation.x=0,a.translation.y=e;break;case"right":a.translation.x=t,a.translation.y=0;break}a.gridPadding=0,a.calculateLayout(),a.updatePosition({rotation:vm(a.rotation),sideFlag:a.label.getSideFlag()}),a.update(void 0,o)}),yield Promise.all(this.series.map(a=>a.update({seriesRect:s})))})}};d([$n(fm)],ns.prototype,"enabled",2),d([Sc({changeValue(t,e=[]){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)e?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],ns.prototype,"axes",2),d([Sc({changeValue(t,e){this.onSeriesChange(t,e)}})],ns.prototype,"series",2);var{ObserveChanges:Nm}=yc,Mc=class Pr extends yc.Navigator{constructor(e){super(e),this.miniChart=new ns(e)}updateData(e){return P(this,null,function*(){yield this.miniChart.updateData(e)})}processData(e){return P(this,null,function*(){yield this.miniChart.processData(e)})}performLayout(e){return P(this,null,function*(){const{shrinkRect:i}=yield oo(Pr.prototype,this,"performLayout").call(this,e);if(this.enabled){const{top:o,bottom:s}=this.miniChart.computeAxisPadding();i.shrink(o+s,"bottom"),this.y-=s}return{shrinkRect:i}})}performCartesianLayout(e){return P(this,null,function*(){yield oo(Pr.prototype,this,"performCartesianLayout").call(this,e),yield this.miniChart.layout(this.width,this.height)})}};d([Nm((t,e,i)=>{t.updateBackground(i?.root,e?.root)})],Mc.prototype,"miniChart",2);var Im=Mc,Dc,_m={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Im,themeTemplate:X(U({},pc.NavigatorModule.themeTemplate),{navigator:X(U({},(Dc=pc.NavigatorModule.themeTemplate)==null?void 0:Dc.navigator),{miniChart:{enabled:!1,label:{color:gc.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:gc.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})};import{_ModuleSupport as bm,_Util as Tm}from"ag-charts-community";var{BOOLEAN:Jn,STRING:Am,UNION:Em,BaseProperties:Om,CartesianAxis:Nc,ChartUpdateType:Ic,arraysEqual:Lm,isDate:km,isDefined:Rm,isFiniteNumber:as,ObserveChanges:yo,TooltipManager:Cm,Validate:mo}=bm,{Logger:_c}=Tm,ii=class extends Om{constructor(t){super(),this.moduleContext=t,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(t,e=Ic.UPDATE_DATA){t.ctx.updateService.update(e,{skipSync:!0})}updateSiblings(t){const{syncManager:e}=this.moduleContext;P(this,null,function*(){for(const o of e.getGroupSiblings(t))yield o.waitForDataProcess(120),this.updateChart(o)}).catch(o=>{_c.warnOnce("Error updating sibling chart",o)})}enabledZoomSync(){const{syncManager:t,zoomManager:e}=this.moduleContext;this.disableZoomSync=e.addListener("zoom-change",()=>{var i;for(const o of t.getGroupSiblings(this.groupId))(i=o.modulesManager.getModule("sync"))!=null&&i.zoom&&o.ctx.zoomManager.updateZoom("sync",this.mergeZoom(o))})}enabledNodeInteractionSync(){const{highlightManager:t,syncManager:e}=this.moduleContext;this.disableNodeInteractionSync=t.addListener("highlight-change",i=>{var o,s,n,a,r,l,c,u,h,p,g,m;for(const y of e.getGroupSiblings(this.groupId))if((o=y.modulesManager.getModule("sync"))!=null&&o.nodeInteraction){if(!((s=i.currentHighlight)!=null&&s.datum)){y.ctx.highlightManager.updateHighlight(y.id),y.ctx.tooltipManager.removeTooltip(y.id);continue}for(const S of y.axes){const f=this.axes==="xy"?"x":this.axes;if(!Nc.is(S)||S.direction!==f)continue;const x=y.series.map(M=>{const N=M.getKeys(S.direction);if(S.keys.length&&!S.keys.some(_=>N.includes(_)))return;const{nodeData:v}=M.contextNodeData;if(!v?.length)return;const D=v[0][`${S.direction}Key`];let I=i.currentHighlight.datum[D];const b=km(I);b&&(I=I.getTime());const T=v.find(_=>{const A=_.datum[D];return b?A.getTime()===I:A===I});return T?{series:M,nodeDatum:T}:null}).filter(Rm);if(x.length<2&&((n=x[0])==null?void 0:n.nodeDatum)!==y.ctx.highlightManager.getActiveHighlight()){const{series:M,nodeDatum:N}=(a=x[0])!=null?a:{};if(y.ctx.highlightManager.updateHighlight(y.id,N),N){const v=(u=(c=(r=N.midPoint)==null?void 0:r.x)!=null?c:(l=N.point)==null?void 0:l.x)!=null?u:0,D=(m=(g=(h=N.midPoint)==null?void 0:h.y)!=null?g:(p=N.point)==null?void 0:p.y)!=null?m:0,I=Cm.makeTooltipMeta({type:"hover",offsetX:v,offsetY:D},N);delete I.lastPointerEvent,y.ctx.tooltipManager.updateTooltip(y.id,I,M.getTooltipHtml(N))}else y.ctx.tooltipManager.removeTooltip(y.id);this.updateChart(y,Ic.SERIES_UPDATE)}}}})}syncAxes(t=!1){const{syncManager:e}=this.moduleContext,i=e.getChart(),o=e.getGroup(this.groupId),s=o.flatMap(r=>r.series),n=o[0].axes;let a=!1;i.axes.forEach(r=>{if(!Nc.is(r)||this.axes!=="xy"&&this.axes!==r.direction){r.boundSeries=i.series.filter(m=>m.axes[r.direction]===r);return}const{direction:l,min:c,max:u,nice:h,reverse:p}=r;for(const m of n)if(l===m.direction&&(h!==m.nice||p!==m.reverse||c!==m.min&&(as(c)||as(m.min))||u!==m.max&&(as(u)||as(m.max)))){_c.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),r.boundSeries=i.series.filter(y=>y.axes[r.direction]===r),this.enabled=!1;return}const g=s.filter(m=>{if(m.visible){const y=m.getKeys(r.direction);return r.keys.length?r.keys.some(S=>y.includes(S)):!0}});Lm(r.boundSeries,g)||(r.boundSeries=g,a=!0)}),a&&!t&&this.updateSiblings(this.groupId)}mergeZoom(t){var e,i;const{zoomManager:o}=this.moduleContext;if(this.axes==="xy")return o.getZoom();const s=(e=t.zoomManager.getZoom())!=null?e:{};return s[this.axes]=(i=o.getZoom())==null?void 0:i[this.axes],s}onEnabledChange(){const{syncManager:t}=this.moduleContext;this.enabled?t.subscribe(this.groupId):t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(t,e){if(!this.enabled||t===e)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(e),i.subscribe(t),this.updateSiblings(e),this.updateSiblings(t)}onAxesChange(){if(!this.enabled)return;const{syncManager:t}=this.moduleContext;this.updateChart(t.getChart())}onNodeInteractionChange(){var t;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():(t=this.disableNodeInteractionSync)==null||t.call(this)}onZoomChange(){var t;this.enabled&&this.zoom?this.enabledZoomSync():(t=this.disableZoomSync)==null||t.call(this)}destroy(){var t;const{syncManager:e}=this.moduleContext;e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),(t=this.disableZoomSync)==null||t.call(this)}};ii.className="Sync",d([mo(Jn),yo(t=>t.onEnabledChange())],ii.prototype,"enabled",2),d([mo(Am,{optional:!0}),yo((t,e,i)=>t.onGroupIdChange(e,i))],ii.prototype,"groupId",2),d([mo(Em(["x","y","xy"],"an axis")),yo(t=>t.onAxesChange())],ii.prototype,"axes",2),d([mo(Jn),yo(t=>t.onNodeInteractionChange())],ii.prototype,"nodeInteraction",2),d([mo(Jn),yo(t=>t.onZoomChange())],ii.prototype,"zoom",2);var Pm={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:ii,themeTemplate:{sync:{enabled:!1}}};import{_ModuleSupport as fe,_Util as wm}from"ag-charts-community";import{_ModuleSupport as Bm,_Scene as zm}from"ag-charts-community";var{COLOR_STRING:Vm,RATIO:Fm,Validate:bc}=Bm,rs=class extends zm.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};rs.className="ZoomRect",d([bc(Vm)],rs.prototype,"fill",2),d([bc(Fm)],rs.prototype,"fillOpacity",2);import{_ModuleSupport as ta}from"ag-charts-community";import{_ModuleSupport as Um}from"ag-charts-community";var{clamp:Km,isEqual:ls,round:Tc}=Um,nt={min:0,max:1},Ac="end",Ec="middle",cs=(t,e=nt.min,i=nt.max)=>Km(e,t,i);function ea(){return{x:U({},nt),y:U({},nt)}}function Ct(t){return t.x.max-t.x.min}function de(t){return t.y.max-t.y.min}function ia(t,e,i=1e-10){return ls(t.x.min,e.x.min,i)&&ls(t.x.max,e.x.max,i)&&ls(t.y.min,e.y.min,i)&&ls(t.y.max,e.y.max,i)}function oa(t,e,i){const o=Tc(Ct(t),10)<=e,s=Tc(de(t),10)<=i;return o||s}function zt(t){var e,i,o,s,n,a,r,l;return{x:{min:(i=(e=t?.x)==null?void 0:e.min)!=null?i:nt.min,max:(s=(o=t?.x)==null?void 0:o.max)!=null?s:nt.max},y:{min:(a=(n=t?.y)==null?void 0:n.min)!=null?a:nt.min,max:(l=(r=t?.y)==null?void 0:r.max)!=null?l:nt.max}}}function Ee(t,e,i){if(!t)return{x:0,y:0};const o=cs(e-t.x,0,t.x+t.width),s=cs(i-t.y,0,t.y+t.height),n=1/t.width*o,a=1-1/t.height*s;return{x:cs(n),y:cs(a)}}function zi(t,e,i){return{x:{min:t.x.min+e,max:t.x.max+e},y:{min:t.y.min+i,max:t.y.max+i}}}function Oc(t,e,i){return{x:{min:t.x.min,max:t.x.min+Ct(t)*e},y:{min:t.y.min,max:t.y.min+de(t)*i}}}function Lc(t,e,i){const o=Ct(t),s=de(t),n=t.x.min+o/2,a=t.y.min+s/2;return{x:{min:n-o*e/2,max:n+o*e/2},y:{min:a-s*i/2,max:a+s*i/2}}}function Vi(t,e,i,o){const{min:s,max:n}=e,a=s+(n-s)/2,r=t.max-t.min;switch(i){case"start":return{min:s,max:e.min+r};case"end":return{min:e.max-r,max:n};case"middle":return{min:a-r/2,max:a+r/2};case"pointer":return fo(t,e,o??a);default:return{min:s,max:n}}}function fo(t,e,i){const o=i*(1-(e.max-e.min-(t.max-t.min))),s=i-o,n=t.min+s,a=t.max+s;return{min:n,max:a}}function jm(t,e,i){return{x:{min:t.x.min*e,max:t.x.max*e},y:{min:t.y.min*i,max:t.y.max*i}}}function Qt(t){const e=ea();return e.x=kc(t.x),e.y=kc(t.y),e}function kc(t){const e=t.max-t.min;let i=t.max>nt.max?nt.max-e:t.min,o=t.min<nt.min?e:t.max;return i=Math.max(nt.min,i),o=Math.min(nt.max,o),{min:i,max:o}}function Rc({min:t,max:e},i,o){if(e===i.max)t=e-o;else if(t===i.min)e=t+o;else{const s=i.min+(i.max-i.min)/2;t=s-o/2,e=s+o/2}return{min:t,max:e}}var Gm=class{update(t,e,i,o,s,n){var a;return(a=this.oldZoom)!=null||(this.oldZoom=zt(e===ta.ChartAxisDirection.X?X(U({},s),{x:n}):X(U({},s),{y:n}))),this.updateCoords(t.offsetX,t.offsetY),this.updateZoom(e,i,o)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(t,e){this.coords?(this.coords.x2=t,this.coords.y2=e):this.coords={x1:t,y1:e,x2:t,y2:e}}updateZoom(t,e,i){const{coords:o,oldZoom:s}=this;let n=zt(s);if(!o||!s)return t===ta.ChartAxisDirection.X?n.x:n.y;const a=Ee(i,o.x1,o.y1),r=Ee(i,o.x2,o.y2);if(t===ta.ChartAxisDirection.X){const c=(r.x-a.x)*Ct(s);return n.x.max+=c,n.x=Vi(n.x,s.x,e,a.x),n=Qt(n),n.x}const l=(r.y-a.y)*de(s);return n.y.max-=l,n.y=Vi(n.y,s.y,e,a.y),n=Qt(n),n.y}},sa="zoom-action",na="pan-action",Hm=class{constructor(t,e,i){this.contextMenuRegistry=t,this.zoomManager=e,this.updateZoom=i}registerActions(t,e,i){if(!t)return;const{contextMenuRegistry:o}=this;o.registerDefaultAction({id:sa,label:"Zoom to here",action:s=>this.onZoomToHere(s,i)}),o.registerDefaultAction({id:na,label:"Pan to here",action:s=>this.onPanToHere(s,i)}),this.toggleActions(e,i)}toggleActions(t,e){const{contextMenuRegistry:i}=this;oa(t,e.minRatioX,e.minRatioY)?i.disableAction(sa):i.enableAction(sa),ia(t,ea())?i.disableAction(na):i.enableAction(na)}onZoomToHere({event:t},e){const{rect:i}=this,{enabled:o,isScalingX:s,isScalingY:n,minRatioX:a,minRatioY:r}=e;if(!o||!i||!t||!t.target)return;const l=zt(this.zoomManager.getZoom()),c=Ee(i,t.clientX,t.clientY),u=c.x*Ct(l),h=c.y*de(l),p=nt.max-nt.min,g=p/2;let m={x:{min:c.x-g,max:c.x+g},y:{min:c.y-g,max:c.y+g}};m=Lc(m,s?a:p,n?r:p),m=zi(m,l.x.min-c.x+u,l.y.min-c.y+h),this.updateZoom(Qt(m))}onPanToHere({event:t},e){const{rect:i}=this,{enabled:o}=e;if(!o||!i||!t||!t.target)return;const s=zt(this.zoomManager.getZoom()),n=Ee(i,t.clientX,t.clientY),a=Ct(s),r=de(s),l=n.x*a,c=n.y*r,u=(nt.max-nt.min)/2;let h={x:{min:n.x-u,max:n.x+u},y:{min:n.y-u,max:n.y+u}};h=Lc(h,a,r),h=zi(h,s.x.min-n.x+l,s.y.min-n.y+c),this.updateZoom(Qt(h))}};import{_ModuleSupport as Cc}from"ag-charts-community";var Pc=16,Ym=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}addListener(t,e){return this.onUpdate=e,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(t){var e,i;this.updateCoords(t.offsetX,t.offsetY);const{x1:o=0,y1:s=0,x2:n=0,y2:a=0}=(e=this.coords)!=null?e:{};(i=this.onUpdate)==null||i.call(this,{type:"update",deltaX:o-n,deltaY:s-a})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:t}=this;let e=0,i=0,o=0;if(t.length>0){const s=this.zoomCoordsHistoryIndex%Pc;let n=s-1;n<0&&(n=t.length-1);let a=s;a>=t.length&&(a=0);const r=t[n],l=t[a];e=r.x-l.x,i=r.y-l.y,o=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,o>0&&this.deceleration<1){const s=e/o,n=i/o,a=Math.hypot(s,n),r=Math.atan2(n,s),l=performance.now();this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,c,l,a,r)})}}recordCurrentZoomCoords(){const{coords:t,coordsHistory:e,zoomCoordsHistoryIndex:i}=this;if(!t)return;const{x2:o,y2:s}=t,n=Date.now();e[i%Pc]={x:o,y:s,t:n},this.zoomCoordsHistoryIndex+=1}animateInertia(t,e,i,o,s){var n;const a=1-this.deceleration,r=-o/Math.log(a),l=o*(Mt(a,e-i)-1)/Math.log(a),c=o*(Mt(a,t-i)-1)/Math.log(a);(n=this.onUpdate)==null||n.call(this,{type:"update",deltaX:-Math.cos(s)*(c-l),deltaY:-Math.sin(s)*(c-l)}),!(c>=r-1)&&(this.inertiaHandle=requestAnimationFrame(u=>{this.animateInertia(u,t,i,o,s)}))}updateCoords(t,e){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:t,y2:e}:this.coords={x1:t,y1:e,x2:t,y2:e}}translateZooms(t,e,i,o){const s=Ee(t,t.x+Math.abs(i),t.y+t.height-Math.abs(o)),n=Math.sign(i)*s.x,a=-Math.sign(o)*s.y,r={};for(const[l,{direction:c,zoom:u}]of Object.entries(e)){let h;c===Cc.ChartAxisDirection.X?h=zt({x:u}):h=zt({y:u}),h=Qt(zi(h,n*Ct(h),a*de(h))),c===Cc.ChartAxisDirection.X?r[l]={direction:c,zoom:h.x}:r[l]={direction:c,zoom:h.y}}return r}};import{_ModuleSupport as Wm,_Util as Xm}from"ag-charts-community";var{AND:wc,DATE:Bc,NUMBER:zc,OR:Vc,ActionOnSet:Fc,isFiniteNumber:Uc,isValidDate:Kc,Validate:jc}=Wm,us=class{constructor(t){this.onChange=t}getRange(){return this.getRangeWithValues(this.start,this.end)}getInitialRange(){return this.getRangeWithValues(this.initialStart,this.initialEnd)}extendToEnd(t){return this.extendWith(e=>Number(e)-t)}extendWith(t){var e;if(!this.domain)return;const[,i]=this.domain;if(i==null)return;const o=t(i),s=this.start!==o||this.end!==i;this.end=i,this.start=o,s||(e=this.onChange)==null||e.call(this,this.getRange())}updateWith(t){var e;if(!this.domain)return;let[i,o]=this.domain;[i,o]=t(i,o);const s=this.start!==i||this.end!==o;this.end=o,this.start=i,s||(e=this.onChange)==null||e.call(this,this.getRange())}extendAll(){var t;if(!this.domain)return;const[e,i]=this.domain,o=this.start!==e||this.end!==i;this.start=e,this.end=i,o||(t=this.onChange)==null||t.call(this,this.getRange())}updateAxis(t){const e=t.find(({domain:s})=>{const n=!Uc(s[0])||!Uc(s.at(-1)),a=!Kc(s[0])||!Kc(s.at(-1));return n||a});if(!e)return this.domain!=null;let i=e.domain;i!=null&&(i=[i[0],i.at(-1)],i[0]instanceof Date&&i[1]instanceof Date&&(i=[i[0].getTime(),i[1].getTime()]));const o=this.domain==null||!Xm.areArrayItemsStrictlyEqual(this.domain,i);return o&&(this.domain=i),o}getRangeWithValues(t,e){var i;let[o,s]=(i=this.domain)!=null?i:[];if(t==null&&e==null||o==null||s==null)return;o=Number(o),s=Number(s);let n=0,a=1;return t!=null&&(n=(Number(t)-o)/(s-o)),e!=null&&(a=(Number(e)-o)/(s-o)),{min:n,max:a}}};d([Fc({changeValue(t){var e,i;(e=this.initialStart)!=null||(this.initialStart=t),(i=this.onChange)==null||i.call(this,this.getRangeWithValues(t,this.end))}}),jc(wc(Vc(Bc,zc)),{optional:!0})],us.prototype,"start",2),d([Fc({changeValue(t){var e,i;(e=this.initialEnd)!=null||(this.initialEnd=t),(i=this.onChange)==null||i.call(this,this.getRangeWithValues(this.start,t))}}),jc(wc(Vc(Bc,zc)),{optional:!0})],us.prototype,"end",2);import{_ModuleSupport as Qm}from"ag-charts-community";var{AND:Gc,GREATER_THAN:$m,LESS_THAN:Zm,RATIO:Hc,ActionOnSet:Yc,Validate:Wc}=Qm,ds=class{constructor(t){this.onChange=t}getRatio(){return this.getRatioWithValues(this.start,this.end)}getInitialRatio(){return this.getRatioWithValues(this.initialStart,this.initialEnd)}getRatioWithValues(t,e){if(!(t==null&&e==null))return{min:t??nt.min,max:e??nt.max}}};d([Yc({changeValue(t){var e,i;(e=this.initialStart)!=null||(this.initialStart=t),(i=this.onChange)==null||i.call(this,this.getRatioWithValues(t,this.end))}}),Wc(Gc(Hc,Zm("end")),{optional:!0})],ds.prototype,"start",2),d([Yc({changeValue(t){var e,i;(e=this.initialEnd)!=null||(this.initialEnd=t),(i=this.onChange)==null||i.call(this,this.getRatioWithValues(this.start,t))}}),Wc(Gc(Hc,$m("start")),{optional:!0})],ds.prototype,"end",2);import{_ModuleSupport as qm}from"ag-charts-community";var Jm=200,tf=class{update(t,e,i,o){const s=t.deltaX*e*Jm;return this.translateZooms(i,o,s)}translateZooms(t,e,i){const o={},s=Ee(t,t.x+Math.abs(i),0),n=i<0?-s.x:s.x;for(const[a,{direction:r,zoom:l}]of Object.entries(e)){if(r!==qm.ChartAxisDirection.X)continue;let c=zt({x:l});c=Qt(zi(c,n*Ct(c),0)),o[a]={direction:r,zoom:c.x}}return o}},ef=class{update(t,e,i,o){const s=t.sourceEvent,{anchorPointX:n,anchorPointY:a,isScalingX:r,isScalingY:l,scrollingStep:c}=e,u=t.deltaY;let h=zt(o);return h.x.max+=r?c*u*Ct(o):0,h.y.max+=l?c*u*de(o):0,n==="pointer"&&r||a==="pointer"&&l?h=this.scaleZoomToPointer(s,r,l,i,o,h):(r&&(h.x=Vi(h.x,o.x,n)),l&&(h.y=Vi(h.y,o.y,a))),h=Qt(h),h}scaleZoomToPointer(t,e,i,o,s,n){var a,r;const l=Ee(o,(a=t.offsetX)!=null?a:t.clientX,(r=t.offsetY)!=null?r:t.clientY);return n.x=e?fo(n.x,s.x,l.x):n.x,n.y=i?fo(n.y,s.y,l.y):n.y,n}},of=class{constructor(t){this.rect=t,this.rect.visible=!1}update(t,e,i,o){this.rect.visible=!0,this.updateCoords(t.offsetX,t.offsetY,e,i,o),this.updateRect(i)}stop(t,e,i){let o=zt();if(!t||!e)return o;this.coords&&(o=this.createZoomFromCoords(e,i));const s=e.width/t.width,n=e.height/t.height;return o=Qt(jm(o,s,n)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible}updateCoords(t,e,i,o,s){if(!this.coords){this.coords={x1:t,y1:e,x2:t,y2:e};return}if(this.coords.x2=t,this.coords.y2=e,!o)return;const{isScalingX:n,isScalingY:a,minRatioX:r,minRatioY:l}=i,c=zt(s),u=this.getNormalisedDimensions(),h=o.width/o.height,p=c.x.max-c.x.min,g=c.y.max-c.y.min,m=r/p,y=l/g;u.width/o.width<m&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-o.width*m:this.coords.x2=this.coords.x1+o.width*m),a&&!n?u.height/o.height<y&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-o.width*m:this.coords.y2=this.coords.y1+o.height*y):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-u.width/h,this.coords.y1-o.height*y):this.coords.y2=Math.max(this.coords.y1+u.width/h,this.coords.y1+o.height*y),n||(this.coords.x1=o.x,this.coords.x2=o.x+o.width),a||(this.coords.y1=o.y,this.coords.y2=o.y+o.height)}updateRect(t){if(!t)return;const{rect:e}=this,i=this.getNormalisedDimensions(),{width:o,height:s}=i;let{x:n,y:a}=i;n=Math.max(n,t.x),n-=Math.max(0,n+o-(t.x+t.width)),a=Math.max(a,t.y),a-=Math.max(0,a+s-(t.y+t.height)),e.x=n,e.y=a,e.width=o,e.height=s}createZoomFromCoords(t,e){const i=zt(e),o=this.getNormalisedDimensions(),s=Ee(t,o.x,o.y+o.height),n=o.width/t.width,a=o.height/t.height;let r=Oc(i,n,a);const l=s.x*(i.x.max-i.x.min),c=s.y*(i.y.max-i.y.min);return r=zi(r,l,c),r=Qt(r),r}getNormalisedDimensions(){var t;const{x1:e=0,y1:i=0,x2:o=0,y2:s=0}=(t=this.coords)!=null?t:{},n=e<=o?e:o,a=i<=s?i:s,r=e<=o?o-e:e-o,l=i<=s?s-i:i-s;return{x:n,y:a,width:r,height:l}}};import{_ModuleSupport as sf}from"ag-charts-community";var{ToolbarManager:Xc}=sf,nf=class{constructor(t,e,i,o){this.toolbarManager=t,this.zoomManager=e,this.getResetZoom=i,this.updateZoom=o}toggle(t,e,i){this.toggleGroups(t),t&&this.toggleButtons(e,i)}toggleButtons(t,e){const{toolbarManager:i}=this,o=ia(t,ea()),s=oa(t,e.minRatioX,e.minRatioY),n=ia(t,this.getResetZoom());i.toggleButton("zoom","pan-start",t.x.min>nt.min),i.toggleButton("zoom","pan-end",t.x.max<nt.max),i.toggleButton("zoom","pan-left",t.x.min>nt.min),i.toggleButton("zoom","pan-right",t.x.max<nt.max),i.toggleButton("zoom","zoom-out",!o),i.toggleButton("zoom","zoom-in",!s),i.toggleButton("zoom","reset",!n)}onButtonPress(t,e){this.onButtonPressRanges(t,e),this.onButtonPressZoom(t,e)}toggleGroups(t){var e,i;(e=this.toolbarManager)==null||e.toggleGroup("ranges",!!t),(i=this.toolbarManager)==null||i.toggleGroup("zoom",!!t)}onButtonPressRanges(t,e){if(!Xc.isGroup("ranges",t))return;const{rangeX:i}=e,o=t.value;typeof o=="number"?i.extendToEnd(o):Array.isArray(o)?i.updateWith(()=>o):typeof o=="function"&&i.updateWith(o)}onButtonPressZoom(t,e){if(!Xc.isGroup("zoom",t))return;const{anchorPointX:i,anchorPointY:o,isScalingX:s,isScalingY:n,scrollingStep:a}=e,r=zt(this.zoomManager.getZoom());let l=zt(r);switch(t.value){case"reset":l=this.getResetZoom();break;case"pan-start":l.x.max=Ct(l),l.x.min=0;break;case"pan-end":l.x.min=nt.max-Ct(l),l.x.max=nt.max;break;case"pan-left":case"pan-right":l=zi(l,t.value==="pan-left"?-Ct(l):Ct(l),0);break;case"zoom-in":case"zoom-out":const c=t.value==="zoom-in"?1-a:1+a,u=i==="pointer"?Ac:i,h=o==="pointer"?Ec:o;l=Oc(l,s?c:1,n?c:1),l.x=Vi(l.x,r.x,u),l.y=Vi(l.y,r.y,h);break}this.updateZoom(Qt(l))}},{ARRAY:af,BOOLEAN:oi,NUMBER:aa,RATIO:rf,STRING:Qc,UNION:ra,ActionOnSet:lf,ChartAxisDirection:Ve,ChartUpdateType:$c,Validate:Et,ProxyProperty:cf,round:uf}=fe,Zc=t=>uf(t,10),qc=ra(["pointer","start","middle","end"],"an anchor cord"),hs="zoom-cursor",la="zoom-tooltip",So=class extends fe.BaseProperties{constructor(t){super(),this.onChange=t,this.enabled=!1,this.position="floating-bottom",this.align="center"}};d([fe.ObserveChanges(t=>{t.onChange()}),Et(oi)],So.prototype,"enabled",2),d([fe.ObserveChanges(t=>{t.onChange()}),Et(af,{optional:!0})],So.prototype,"buttons",2),d([Et(Qc)],So.prototype,"position",2),d([Et(Qc)],So.prototype,"align",2);var Gt=class extends fe.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new So(()=>this.onZoomButtonsChange(this.enabled)),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(nt.max-nt.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX=Ac,this.anchorPointY=Ec,this.rangeX=new us(this.onRangeChange.bind(this,Ve.X)),this.rangeY=new us(this.onRangeChange.bind(this,Ve.Y)),this.ratioX=new ds(this.onRatioChange.bind(this,Ve.X)),this.ratioY=new ds(this.onRatioChange.bind(this,Ve.Y)),this.axisDragger=new Gm,this.contextMenu=new Hm(this.ctx.contextMenuRegistry,this.ctx.zoomManager,this.updateZoom.bind(this)),this.panner=new Ym,this.scroller=new ef,this.scrollPanner=new tf,this.toolbar=new nf(this.ctx.toolbarManager,this.ctx.zoomManager,this.getResetZoom.bind(this),this.updateZoom.bind(this)),this.deceleration=1,this.dragState=0,this.minRatioX=0,this.minRatioY=0;const e=new rs;this.selector=new of(e);const{Default:i,ZoomDrag:o,Animation:s}=fe.InteractionState,n=i|s|o,a=i|s,r=t.regionManager.getRegion("series");this.destroyFns.push(t.scene.attachNode(e),r.addListener("dblclick",l=>this.onDoubleClick(l),a),r.addListener("drag",l=>this.onDrag(l),n),r.addListener("drag-start",l=>this.onDragStart(l),n),r.addListener("drag-end",()=>this.onDragEnd(),n),r.addListener("wheel",l=>this.onWheel(l),a),r.addListener("hover",()=>this.onAxisLeave(),a),r.addListener("leave",()=>this.onAxisLeave(),a),t.chartEventManager.addListener("axis-hover",l=>this.onAxisHover(l)),t.gestureDetector.addListener("pinch-move",l=>this.onPinchMove(l)),t.toolbarManager.addListener("button-pressed",l=>this.toolbar.onButtonPress(l,this.getModuleProperties())),t.layoutService.addListener("layout-complete",l=>this.onLayoutComplete(l)),t.updateService.addListener("update-complete",l=>this.onUpdateComplete(l)),t.zoomManager.addListener("zoom-change",l=>this.onZoomChange(l)),t.zoomManager.addListener("zoom-pan-start",l=>this.onZoomPanStart(l)),this.panner.addListener("update",l=>this.onPanUpdate(l)))}onEnabledChange(t){if(!this.contextMenu||!this.toolbar)return;const e=this.getZoom(),i=this.getModuleProperties({enabled:t});this.contextMenu.registerActions(t,e,i),this.onZoomButtonsChange(t),this.toolbar.toggle(t,e,i)}onZoomButtonsChange(t){if(!this.buttons)return;const e=this.buttons.toJson();e.enabled&&(e.enabled=t),this.ctx.toolbarManager.proxyGroupOptions("zoom",e)}onRangeChange(t,e){if(!e)return;const i=this.getZoom();i[t]=e,this.updateZoom(Qt(i))}onRatioChange(t,e){if(!e)return;let i=this.ratioX.getRatio(),o=this.ratioY.getRatio();t===Ve.X?i=e:o=e;const s=Qt(zt({x:i,y:o}));this.updateZoom(s)}onDoubleClick(t){const{enabled:e,enableDoubleClickToReset:i,hoveredAxis:o,paddedRect:s,ctx:{highlightManager:n}}=this;if(!e||!i)return;const{x:a,y:r}=this.getResetZoom();if(o){const{direction:l}=o,c=l===Ve.X?a:r;this.updateAxisZoom(l,c)}else s?.containsPoint(t.offsetX,t.offsetY)&&n.getActivePicked()==null&&this.updateZoom({x:a,y:r})}onDragStart(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableSelecting:s,hoveredAxis:n,paddedRect:a,ctx:{cursorManager:r,zoomManager:l}}=this;if(!e||!a)return;this.panner.stopInteractions();let c=0;if(i&&n)c=1;else if(a.containsPoint(t.offsetX,t.offsetY)){const u=this.isPanningKeyPressed(t.sourceEvent);o&&(!s||u)?(r.updateCursor(hs,"grabbing"),c=2,this.panner.start()):s&&!this.isMinZoom(this.getZoom())&&!u&&(c=3)}(this.dragState=c)!==0&&l.fireZoomPanStartEvent("zoom")}onDrag(t){const{anchorPointX:e,anchorPointY:i,axisDragger:o,dragState:s,enabled:n,paddedRect:a,panner:r,selector:l,seriesRect:c,hoveredAxis:u,ctx:{interactionManager:h,tooltipManager:p,updateService:g,zoomManager:m}}=this;if(!n||!a||!c)return;h.pushState(fe.InteractionState.ZoomDrag);const y=this.getZoom();switch(s){case 1:if(!u)break;const{id:S,direction:f}=u,x=f===fe.ChartAxisDirection.X?e:i,M=m.getAxisZoom(S),N=o.update(t,f,x,c,y,M);this.updateAxisZoom(f,N);break;case 2:r.update(t);break;case 3:l.update(t,this.getModuleProperties(),a,y);break;case 0:return}p.updateTooltip(la),g.update($c.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:t,dragState:e,enabled:i,panner:o,selector:s,ctx:{cursorManager:n,interactionManager:a,tooltipManager:r}}=this;if(a.popState(fe.InteractionState.ZoomDrag),!(!i||e===0)){switch(e){case 1:t.stop();break;case 2:o.stop();break;case 3:if(!s.didUpdate())break;const l=this.getZoom();if(this.isMinZoom(l))break;const c=s.stop(this.seriesRect,this.paddedRect,l);this.updateZoom(c);break}this.dragState=0,n.updateCursor(hs),r.removeTooltip(la)}}onWheel(t){const{enabled:e,enableAxisDragging:i,enablePanning:o,enableScrolling:s,hoveredAxis:n,paddedRect:a,scroller:r,scrollingStep:l,scrollPanner:c,seriesRect:u,ctx:{zoomManager:h}}=this;if(!e||!s||!a||!u)return;const p=a.containsPoint(t.offsetX,t.offsetY),g=i&&n!=null;let m=this.isScalingX(),y=this.isScalingY();g&&(m=n.direction===fe.ChartAxisDirection.X,y=!m);const S=t.sourceEvent,{deltaX:f,deltaY:x}=S,M=f!=null&&x!=null&&Math.abs(f)>Math.abs(x);if(o&&M){t.consume(),t.sourceEvent.preventDefault();const v=c.update(t,l,u,h.getAxisZooms());for(const{direction:D,zoom:I}of Object.values(v))this.updateAxisZoom(D,I);return}if(!p&&!g)return;t.consume(),t.sourceEvent.preventDefault();const N=r.update(t,this.getModuleProperties({isScalingX:m,isScalingY:y}),u,this.getZoom());this.updateZoom(N)}onAxisLeave(){const{enabled:t,ctx:{cursorManager:e}}=this;t&&(this.hoveredAxis=void 0,e.updateCursor(hs))}onAxisHover(t){const{enabled:e,enableAxisDragging:i,ctx:{cursorManager:o}}=this;e&&(this.hoveredAxis={id:t.axisId,direction:t.direction},i&&o.updateCursor(hs,t.direction===Ve.X?"ew-resize":"ns-resize"))}onPinchMove(t){const{enabled:e,enableScrolling:i,paddedRect:o,seriesRect:s}=this;if(!e||!i||!o||!s)return;const n=this.getZoom(),a=this.getZoom(),r=t.deltaDistance*-.01,l=Ee(s,t.origin.x,t.origin.y);this.isScalingX()&&(a.x.max+=r*Ct(n),a.x=fo(a.x,n.x,l.x)),this.isScalingY()&&(a.y.max+=r*(n.y.max-n.y.min),a.y=fo(a.y,n.y,l.y)),this.updateZoom(Qt(a))}onLayoutComplete(t){const{enabled:e,rangeX:i,rangeY:o}=this;if(!e)return;const{series:{rect:s,paddedRect:n,shouldFlipXY:a},axes:r}=t;if(this.seriesRect=s,this.paddedRect=n,this.contextMenu.rect=n,this.shouldFlipXY=a,!r)return;const[l,c]=wm.bifurcate(g=>g.direction===Ve.X,r),u=i.updateAxis(l),h=o.updateAxis(c);if(!u&&!h)return;const p={};p.x=i.getRange(),p.y=o.getRange(),(p.x!=null||p.y!=null)&&this.updateZoom(Qt(zt(p)))}onUpdateComplete({minRect:t,minVisibleRect:e}){const{enabled:i,minVisibleItemsX:o,minVisibleItemsY:s,paddedRect:n,shouldFlipXY:a}=this;if(!i||!n||!t||!e)return;const r=this.getZoom(),l=a?s:o,c=a?o:s,u=e.width*l/n.width,h=e.height*c/n.height,p=Zc(u*Ct(r)),g=Zc(h*de(r));this.isScalingX()&&(this.minRatioX=Math.min(1,p)),this.isScalingY()&&(this.minRatioY=Math.min(1,g)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(t){t.callerId!=="zoom"&&this.panner.stopInteractions();const e=this.getZoom(),i=this.getModuleProperties();this.contextMenu.toggleActions(e,i),this.toolbar.toggleButtons(e,i)}onZoomPanStart(t){t.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(t){const{panner:e,seriesRect:i,ctx:{tooltipManager:o,updateService:s,zoomManager:n}}=this;if(!i)return;const a=e.translateZooms(i,n.getAxisZooms(),t.deltaX,t.deltaY);for(const{direction:r,zoom:l}of Object.values(a))this.updateAxisZoom(r,l);o.updateTooltip(la),s.update($c.PERFORM_LAYOUT,{skipAnimations:!0})}isPanningKeyPressed(t){switch(this.panKey){case"alt":return t.altKey;case"ctrl":return t.ctrlKey;case"shift":return t.shiftKey;case"meta":return t.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(t){return oa(t,this.minRatioX,this.minRatioY)}updateZoom(t){const{minRatioX:e,minRatioY:i,ctx:{zoomManager:o}}=this,s=Ct(t),n=de(t),a=this.getZoom(),r=s<=Ct(a)&&s<e,l=n<=de(a)&&n<i;r&&(t.x=Rc(t.x,a.x,e)),l&&(t.y=Rc(t.y,a.y,i)),o.updateZoom("zoom",t)}updateAxisZoom(t,e){if(!e)return;const i=this.getZoom();i[t]=e,this.updateZoom(i)}getZoom(){return zt(this.ctx.zoomManager.getZoom())}getResetZoom(){var t,e,i,o;const s=(e=(t=this.rangeX.getInitialRange())!=null?t:this.ratioX.getInitialRatio())!=null?e:nt,n=(o=(i=this.rangeY.getInitialRange())!=null?i:this.ratioY.getInitialRatio())!=null?o:nt;return{x:s,y:n}}getModuleProperties(t){var e,i,o,s,n,a,r,l,c;return{anchorPointX:(e=t?.anchorPointX)!=null?e:this.getAnchorPointX(),anchorPointY:(i=t?.anchorPointY)!=null?i:this.getAnchorPointY(),enabled:(o=t?.enabled)!=null?o:this.enabled,isScalingX:(s=t?.isScalingX)!=null?s:this.isScalingX(),isScalingY:(n=t?.isScalingY)!=null?n:this.isScalingY(),minRatioX:(a=t?.minRatioX)!=null?a:this.minRatioX,minRatioY:(r=t?.minRatioY)!=null?r:this.minRatioY,rangeX:(l=t?.rangeX)!=null?l:this.rangeX,scrollingStep:(c=t?.scrollingStep)!=null?c:this.scrollingStep}}};d([lf({newValue(t){this.onEnabledChange(t)}}),Et(oi)],Gt.prototype,"enabled",2),d([Et(oi)],Gt.prototype,"enableAxisDragging",2),d([Et(oi)],Gt.prototype,"enableDoubleClickToReset",2),d([Et(oi)],Gt.prototype,"enablePanning",2),d([Et(oi)],Gt.prototype,"enableScrolling",2),d([Et(oi)],Gt.prototype,"enableSelecting",2),d([Et(ra(["alt","ctrl","meta","shift"],"a pan key"))],Gt.prototype,"panKey",2),d([Et(ra(["x","y","xy"],"an axis"))],Gt.prototype,"axes",2),d([Et(rf)],Gt.prototype,"scrollingStep",2),d([Et(aa.restrict({min:1}))],Gt.prototype,"minVisibleItemsX",2),d([Et(aa.restrict({min:1}))],Gt.prototype,"minVisibleItemsY",2),d([Et(qc)],Gt.prototype,"anchorPointX",2),d([Et(qc)],Gt.prototype,"anchorPointY",2),d([cf("panner.deceleration"),Et(aa.restrict({min:1e-4,max:1}))],Gt.prototype,"deceleration",2);var df={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],instanceConstructor:Gt,themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:{enabled:!0,buttons:[{icon:"zoom-out",tooltip:"Zoom out",value:"zoom-out"},{icon:"zoom-in",tooltip:"Zoom in",value:"zoom-in"},{icon:"pan-left",tooltip:"Pan left",value:"pan-left"},{icon:"pan-right",tooltip:"Pan right",value:"pan-right"},{icon:"reset",tooltip:"Reset the zoom",value:"reset"}]},enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1}}};import{_Theme as Jc}from"ag-charts-community";import{_ModuleSupport as ca,_Scale as hf,_Scene as pf,_Util as gf}from"ag-charts-community";var{BOOLEAN:tu,Layers:yf,POSITION:mf,Validate:Fe,Default:eu,MIN_SPACING:ff,MAX_SPACING:Sf,POSITIVE_NUMBER:ua,ProxyProperty:ee,DeprecatedAndRenamedTo:xf}=ca,{BBox:vf,Group:da,Rect:Mf,LinearGradientFill:Df,Triangle:Nf}=pf,{createId:If}=gf,ha=class{constructor(){this.thickness=16,this.preferredLength=100}};d([Fe(ua)],ha.prototype,"thickness",2),d([Fe(ua)],ha.prototype,"preferredLength",2);var pa=class extends ca.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.minSpacing=NaN,this.maxSpacing=NaN}};d([Fe(ff),eu(NaN)],pa.prototype,"minSpacing",2),d([Fe(Sf),eu(NaN)],pa.prototype,"maxSpacing",2);var _f=class extends ca.CartesianAxis{constructor(t){super(t,new hf.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}createTick(){return new pa}},Ue=class{constructor(t){this.label=t}};d([ee("label.fontStyle")],Ue.prototype,"fontStyle",2),d([ee("label.fontWeight")],Ue.prototype,"fontWeight",2),d([ee("label.fontSize")],Ue.prototype,"fontSize",2),d([ee("label.fontFamily")],Ue.prototype,"fontFamily",2),d([ee("label.color")],Ue.prototype,"color",2),d([ee("label.format")],Ue.prototype,"format",2),d([ee("label.formatter")],Ue.prototype,"formatter",2);var xo=class{constructor(t){this.tick=t}};d([ee("tick.values")],xo.prototype,"values",2),d([ee("tick.minSpacing")],xo.prototype,"minSpacing",2),d([ee("tick.maxSpacing")],xo.prototype,"maxSpacing",2),d([ee("tick.interval")],xo.prototype,"step",2);var iu=class{constructor(t){this.axis=t,this.label=new Ue(t.label),this.interval=new xo(t.tick)}};d([ee("axis.seriesAreaPadding")],iu.prototype,"padding",2);var si=class{constructor(t){this.ctx=t,this.id=If(this),this.group=new da({name:"legend",layer:!0,zIndex:yf.LEGEND_ZINDEX}),this.gradient=new ha,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=t.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",e=>this.update(e.shrinkRect))),this.highlightManager=t.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange())),this.gradientRect=new Mf,this.gradientFill=new Df,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Nf,this.group.append(this.arrow),this.axisGridGroup=new da({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new da({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new _f(t),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new iu(this.axis),this.stop=this.scale,this.destroyFns.push(()=>this.detachLegend())}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;(t=this.group.parent)==null||t.removeChild(this.group)}update(t){const e=this.data[0];if(!this.enabled||!e||!e.enabled)return this.group.visible=!1,{shrinkRect:t.clone()};const{colorRange:i}=this.normalizeColorArrays(e),o=this.updateGradientRect(t,i),s=this.updateAxis(e,o),{newShrinkRect:n,translateX:a,translateY:r}=this.getMeasurements(t,o,s);return this.updateArrow(o),this.group.visible=!0,this.group.translationX=a,this.group.translationY=r,this.latestGradientBox=o,{shrinkRect:n}}normalizeColorArrays(t){let e=t.colorDomain.slice();const i=t.colorRange.slice();if(e.length===i.length)return{colorDomain:e,colorRange:i};e.length>i.length&&i.splice(e.length);const o=i.length;return e=i.map((s,n)=>{const[a,r]=e;return n===0?a:n===o-1?r:a+(r-a)*n/(o-1)}),{colorDomain:e,colorRange:i}}updateGradientRect(t,e){const{preferredLength:i,thickness:o}=this.gradient,s=new vf(0,0,0,0),n=this.getOrientation()==="vertical";if(n){const a=t.height,r=i;s.x=0,s.y=0,s.width=o,s.height=Math.min(a,r)}else{const a=t.width,r=i;s.x=0,s.y=0,s.width=Math.min(a,r),s.height=o}return this.reverseOrder&&(e=e.slice().reverse()),this.gradientFill.stops=e,this.gradientFill.direction=n?"to-bottom":"to-right",this.gradientRect.x=s.x,this.gradientRect.y=s.y,this.gradientRect.width=s.width,this.gradientRect.height=s.height,s}updateAxis(t,e){const{reverseOrder:i,axis:o}=this,s=this.getOrientation()==="vertical";o.position=s?"right":"bottom",o.colorDomain=i?t.colorDomain.slice().reverse():t.colorDomain,o.calculateDomain(),o.range=s?[0,e.height]:[0,e.width],o.gridLength=0,o.translation.x=e.x+(s?e.width:0),o.translation.y=e.y+(s?0:e.height);const n=o.calculateLayout().bbox;return o.update(),n}updateArrow(t){var e;const{arrow:i,axis:{label:o,scale:s}}=this,n=this.highlightManager.getActiveHighlight(),a=n?.colorValue;if(n==null||a==null){i.visible=!1;return}const r=this.getOrientation()==="vertical",l=(e=o.fontSize)!=null?e:0,c=s.convert(a);let u,h,p;r?(u=t.x-l/2,h=t.y+c,p=Math.PI/2):(u=t.x+c,h=t.y-l/2,p=Math.PI),i.fill=o.color,i.size=l,i.translationX=u,i.translationY=h,i.rotation=p,i.visible=!0}getMeasurements(t,e,i){let o,s;this.getOrientation()==="vertical"?(o=e.width+i.width,s=e.height):(o=e.width,s=e.height+i.height);const{spacing:a}=this,r=t.clone();let l,c;return this.position==="left"?(l=t.x,c=t.y+t.height/2-s/2,r.shrink(o+a,"left")):this.position==="right"?(l=t.x+t.width-o,c=t.y+t.height/2-s/2,r.shrink(o+a,"right")):this.position==="top"?(l=t.x+t.width/2-o/2,c=t.y,r.shrink(s+a,"top")):(l=t.x+t.width/2-o/2,c=t.y+t.height-s,r.shrink(s+a,"bottom")),{translateX:l,translateY:c,gradientBox:e,newShrinkRect:r}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&this.latestGradientBox!=null&&this.updateArrow(this.latestGradientBox)}};si.className="GradientLegend",d([Fe(tu)],si.prototype,"enabled",2),d([Fe(mf)],si.prototype,"position",2),d([Fe(tu,{optional:!0})],si.prototype,"reverseOrder",2),d([Fe(ua)],si.prototype,"spacing",2),d([xf("scale")],si.prototype,"stop",2);var bf={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient",instanceConstructor:si,themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:8,label:{color:Jc.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Jc.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}},Tf=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(t,e){let i=t[0],o=t[1],s=t[2],n=t[3];i=this.ff(i,o,s,n,e[0],7,-680876936),n=this.ff(n,i,o,s,e[1],12,-389564586),s=this.ff(s,n,i,o,e[2],17,606105819),o=this.ff(o,s,n,i,e[3],22,-1044525330),i=this.ff(i,o,s,n,e[4],7,-176418897),n=this.ff(n,i,o,s,e[5],12,1200080426),s=this.ff(s,n,i,o,e[6],17,-1473231341),o=this.ff(o,s,n,i,e[7],22,-45705983),i=this.ff(i,o,s,n,e[8],7,1770035416),n=this.ff(n,i,o,s,e[9],12,-1958414417),s=this.ff(s,n,i,o,e[10],17,-42063),o=this.ff(o,s,n,i,e[11],22,-1990404162),i=this.ff(i,o,s,n,e[12],7,1804603682),n=this.ff(n,i,o,s,e[13],12,-40341101),s=this.ff(s,n,i,o,e[14],17,-1502002290),o=this.ff(o,s,n,i,e[15],22,1236535329),i=this.gg(i,o,s,n,e[1],5,-165796510),n=this.gg(n,i,o,s,e[6],9,-1069501632),s=this.gg(s,n,i,o,e[11],14,643717713),o=this.gg(o,s,n,i,e[0],20,-373897302),i=this.gg(i,o,s,n,e[5],5,-701558691),n=this.gg(n,i,o,s,e[10],9,38016083),s=this.gg(s,n,i,o,e[15],14,-660478335),o=this.gg(o,s,n,i,e[4],20,-405537848),i=this.gg(i,o,s,n,e[9],5,568446438),n=this.gg(n,i,o,s,e[14],9,-1019803690),s=this.gg(s,n,i,o,e[3],14,-187363961),o=this.gg(o,s,n,i,e[8],20,1163531501),i=this.gg(i,o,s,n,e[13],5,-1444681467),n=this.gg(n,i,o,s,e[2],9,-51403784),s=this.gg(s,n,i,o,e[7],14,1735328473),o=this.gg(o,s,n,i,e[12],20,-1926607734),i=this.hh(i,o,s,n,e[5],4,-378558),n=this.hh(n,i,o,s,e[8],11,-2022574463),s=this.hh(s,n,i,o,e[11],16,1839030562),o=this.hh(o,s,n,i,e[14],23,-35309556),i=this.hh(i,o,s,n,e[1],4,-1530992060),n=this.hh(n,i,o,s,e[4],11,1272893353),s=this.hh(s,n,i,o,e[7],16,-155497632),o=this.hh(o,s,n,i,e[10],23,-1094730640),i=this.hh(i,o,s,n,e[13],4,681279174),n=this.hh(n,i,o,s,e[0],11,-358537222),s=this.hh(s,n,i,o,e[3],16,-722521979),o=this.hh(o,s,n,i,e[6],23,76029189),i=this.hh(i,o,s,n,e[9],4,-640364487),n=this.hh(n,i,o,s,e[12],11,-421815835),s=this.hh(s,n,i,o,e[15],16,530742520),o=this.hh(o,s,n,i,e[2],23,-995338651),i=this.ii(i,o,s,n,e[0],6,-198630844),n=this.ii(n,i,o,s,e[7],10,1126891415),s=this.ii(s,n,i,o,e[14],15,-1416354905),o=this.ii(o,s,n,i,e[5],21,-57434055),i=this.ii(i,o,s,n,e[12],6,1700485571),n=this.ii(n,i,o,s,e[3],10,-1894986606),s=this.ii(s,n,i,o,e[10],15,-1051523),o=this.ii(o,s,n,i,e[1],21,-2054922799),i=this.ii(i,o,s,n,e[8],6,1873313359),n=this.ii(n,i,o,s,e[15],10,-30611744),s=this.ii(s,n,i,o,e[6],15,-1560198380),o=this.ii(o,s,n,i,e[13],21,1309151649),i=this.ii(i,o,s,n,e[4],6,-145523070),n=this.ii(n,i,o,s,e[11],10,-1120210379),s=this.ii(s,n,i,o,e[2],15,718787259),o=this.ii(o,s,n,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(o,t[1]),t[2]=this.add32(s,t[2]),t[3]=this.add32(n,t[3])}cmn(t,e,i,o,s,n){return e=this.add32(this.add32(e,t),this.add32(o,n)),this.add32(e<<s|e>>>32-s,i)}ff(t,e,i,o,s,n,a){return this.cmn(e&i|~e&o,t,e,s,n,a)}gg(t,e,i,o,s,n,a){return this.cmn(e&o|i&~o,t,e,s,n,a)}hh(t,e,i,o,s,n,a){return this.cmn(e^i^o,t,e,s,n,a)}ii(t,e,i,o,s,n,a){return this.cmn(i^(e|~o),t,e,s,n,a)}md51(t){const e=t.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=t.length;o+=64)this.md5cycle(i,this.md5blk(t.substring(o-64,o)));t=t.substring(o-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<t.length;o++)s[o>>2]|=t.charCodeAt(o)<<(o%4<<3);if(s[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,s),o=0;o<16;o++)s[o]=0;return s[14]=e*8,this.md5cycle(i,s),i}md5blk(t){const e=[];for(let i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e}rhex(t){const e="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=e[t>>o*8+4&15]+e[t>>o*8&15];return i}hex(t){for(let e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")}md5(t){return this.hex(this.md51(t))}add32(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)}add32Std(t,e){return t+e&4294967295}add32Compat(t,e){const i=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(i>>16)<<16|i&65535}};function ga(t){return t==null||t.length===0}var ps={"01":"GRID","02":"CHARTS","0102":"BOTH"},ou=class le{constructor(e){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new Tf,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(this.licenseKey,this.gridContext),i=`AG ${e.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`,o=e.suppliedLicenseType===void 0?"":`AG ${e.suppliedLicenseType==="BOTH"?"Grid and AG Charts":e.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(e.expired){const s=le.getChartsReleaseDate(),n=le.formatDate(s);this.outputExpiredKey(e.expiry,n,o)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,i,o):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,i,o)}static extractExpiry(e){const i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(le.decode(i),10))}static extractLicenseComponents(e){let i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const o=i.length-32,s=i.substring(o),n=i.substring(0,o),[a,r,l]=le.extractBracketedInformation(i);return{md5:s,license:n,version:a,isTrial:r,type:l}}getLicenseDetails(e,i=!1){const o="CHARTS";if(ga(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:o};const s=le.getChartsReleaseDate(),{md5:n,license:a,version:r,isTrial:l,type:c}=le.extractLicenseComponents(e);let u=n===this.md5.md5(a)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,h,p,g=null,m=!1,y;function S(){h=g<new Date,p=void 0}if(u&&(g=le.extractExpiry(a),u=!isNaN(g.getTime()),u))switch(p=s>g,r){case"legacy":case"2":{u=!1;break}case"3":ga(c)?u=!1:(y=c,c!==ps["02"]&&c!==ps["0102"]?(u=!1,m=!0):l&&S())}return u?{licenseKey:e,valid:u,expiry:le.formatDate(g),expired:p,version:r,isTrial:l,trialExpired:h,invalidLicenseTypeForCombo:i?y!=="BOTH":void 0,incorrectLicenseType:m,currentLicenseType:o,suppliedLicenseType:y}:{licenseKey:e,valid:u,incorrectLicenseType:m,currentLicenseType:o,suppliedLicenseType:y}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!ga(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView||window;if(!e)return"localhost";const i=e.location,{hostname:o=""}=i;return o}isForceWatermark(){var e,i;if(!this.document)return!1;const o=((i=(e=this.document)==null?void 0:e.defaultView)!=null?i:typeof window<"u")?window:void 0;if(!o)return!1;const{pathname:s}=o.location;return s?s.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=e.getDate(),s=e.getMonth(),n=e.getFullYear();return o+" "+i[s]+" "+n}static getChartsReleaseDate(){return new Date(parseInt(le.decode(le.RELEASE_INFORMATION),10))}static decode(e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o="",s,n,a,r,l,c,u,h=0;const p=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;h<p.length;)r=i.indexOf(p.charAt(h++)),l=i.indexOf(p.charAt(h++)),c=i.indexOf(p.charAt(h++)),u=i.indexOf(p.charAt(h++)),s=r<<2|l>>4,n=(l&15)<<4|c>>2,a=(c&3)<<6|u,o=o+String.fromCharCode(s),c!=64&&(o=o+String.fromCharCode(n)),u!=64&&(o=o+String.fromCharCode(a));return o=le.utf8_decode(o),o}static utf8_decode(e){e=e.replace(/rn/g,"n");let i="";for(let o=0;o<e.length;o++){const s=e.charCodeAt(o);s<128?i+=String.fromCharCode(s):s>127&&s<2048?(i+=String.fromCharCode(s>>6|192),i+=String.fromCharCode(s&63|128)):(i+=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(s&63|128))}return i}setLicenseKey(e,i=!1){this.gridContext=i,this.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const i=e.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const o=i.filter(r=>r==="TRIAL").length===1,s=i.filter(r=>r.indexOf("v")===0)[0],n=s?s.replace("v",""):"legacy",a=ps[i.filter(r=>ps[r])[0]];return[n,o,a]}centerPadAndOutput(e){const i=this.totalMessageLength-e.length;console.error(e.padStart(i/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,i="*",o=""){console.error(e.padEnd(this.totalMessageLength-o.length,i)+o)}outputInvalidLicenseKey(e,i,o){this.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${o} only and does not cover you for ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,i,o){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${o} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,i,o){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${o} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${o} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};ou.RELEASE_INFORMATION="MTcxMzg5MTcwNTkzNw==";var Af=ou;import{_ModuleSupport as Ef}from"ag-charts-community";var{createElement:su,injectStyle:Of}=Ef,Lf=`
.ag-watermark {
    position: absolute;
    bottom: 20px;
    right: 25px;
    font-weight: bold;
    font-family: Impact, sans-serif;
    font-size: 19px;
    opacity: 0.7;
    animation: 1s ease-out 3s ag-watermark-fadeout;
    color: #9B9B9B;
    pointer-events: none;

    &::before {
        content: '';
        display: block;
        height: 40px;
        width: 170px;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);
        background-repeat: no-repeat;
        background-size: 170px 40px;
    }

    > span {
        padding-left: 0.7rem;
    }
}

@keyframes ag-watermark-fadeout {
    from { opacity: 0.5; }
    to { opacity: 0; }
}
`;function kf(t,e){Of(Lf,"watermark");const i=su("div"),o=su("span");o.innerText=e,i.addEventListener("animationend",()=>t.removeChild(i)),i.classList.add("ag-watermark"),i.appendChild(o),t.appendChild(i)}import{_Theme as vo,_Util as Rf}from"ag-charts-community";import{_ModuleSupport as gs,_Scale as Cf,_Scene as Pf,_Util as nu}from"ag-charts-community";function wf(t){return{from:t?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function Bf(t){return(e,i)=>t?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_Scene as au,_Util as zf}from"ag-charts-community";var{Group:Vf,Rect:Fi,Line:Mo,BBox:Ff,Selection:ru}=au,{Logger:Uf}=zf,Kf=class extends Vf{constructor(){super(),this.append([new Fi({tag:0}),new Fi({tag:0}),new Fi({tag:2}),new Fi({tag:1}),new Mo({tag:3}),new Mo({tag:3}),new Mo({tag:4}),new Mo({tag:4})])}updateDatumStyles(t,e,i,o,s){const{bandwidth:n,scaledValues:{xValue:a,medianValue:r}}=t;let{minValue:l,q1Value:c,q3Value:u,maxValue:h}=t.scaledValues;(i&&!o||!i&&o)&&([h,u,c,l]=[l,c,u,h]);const p=(z,V,F,K)=>i?{y:z,x:V,width:K,height:F}:{x:z,y:V,width:F,height:K},g=(z,V,F)=>i?{y1:z,y2:V,x:F}:{x1:z,x2:V,y:F},m=(z,V,F)=>i?{x1:V,x2:F,y:z}:{x:z,y1:V,y2:F},y=(z,V,F,K)=>({x:z,y:V,width:F,height:K}=p(z,V,F,K),new Ff(z,V,F,K)),{fill:S,fillOpacity:f,stroke:x,strokeWidth:M,strokeOpacity:N,lineDash:v,lineDashOffset:D,cap:I,whisker:b}=e,T=ru.select(this,Fi),_=T.selectByTag(0),[A]=T.selectByTag(2),[E]=T.selectByTag(1),O=T.selectByTag(3),k=T.selectByTag(4);b.strokeWidth>n&&(b.strokeWidth=n);const R=p(c,a,u-c,n);A.setProperties(R),_[0].setProperties(R),_[0].setProperties({cornerRadius:s,clipBBox:y(c,a,Math.round(r-c+M/2),n)}),_[1].setProperties(R),_[1].setProperties({cornerRadius:s,clipBBox:y(Math.round(r-M/2),a,Math.floor(u-r+M/2),n)});const L=Math.max(Math.round(r-M/2),c+M),w=Math.min(Math.round(r+M/2),u-M);E.setProperties(R),E.setProperties({visible:L<w,cornerRadius:s,clipBBox:y(L,a+M,w-L,Math.max(0,n-M*2))});const C=Math.floor(a+n*(1-I.lengthRatio)/2),B=Math.ceil(a+n*(1+I.lengthRatio)/2);k[0].setProperties(m(l,C,B)),k[1].setProperties(m(h,C,B)),O[0].setProperties(g(Math.round(l+b.strokeWidth/2),c,Math.floor(a+n/2))),O[1].setProperties(g(u,Math.round(h-b.strokeWidth/2),Math.floor(a+n/2)));for(const z of _)z.setProperties({fill:S,fillOpacity:f,strokeWidth:M*2,strokeOpacity:0});E.setProperties({fill:x,fillOpacity:N,strokeWidth:0});for(const z of[...O,...k])z.setProperties(b);A.setProperties({stroke:x,strokeWidth:M,strokeOpacity:N,lineDash:v,lineDashOffset:D,cornerRadius:s,fillOpacity:0})}distanceSquared(t,e){const i=ru.selectByClass(this,Fi,Mo);return au.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(Uf.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}};import{_ModuleSupport as jf}from"ag-charts-community";var{BaseProperties:lu,AbstractBarSeriesProperties:Gf,SeriesTooltip:Hf,Validate:tt,COLOR_STRING:ya,FUNCTION:Yf,LINE_DASH:cu,OBJECT:ma,POSITIVE_NUMBER:Do,RATIO:ys,STRING:$t,mergeDefaults:Wf}=jf,uu=class extends lu{constructor(){super(...arguments),this.lengthRatio=.5}};d([tt(ys)],uu.prototype,"lengthRatio",2);var Ui=class extends lu{};d([tt(ya,{optional:!0})],Ui.prototype,"stroke",2),d([tt(Do)],Ui.prototype,"strokeWidth",2),d([tt(ys)],Ui.prototype,"strokeOpacity",2),d([tt(cu,{optional:!0})],Ui.prototype,"lineDash",2),d([tt(Do)],Ui.prototype,"lineDashOffset",2);var ct=class extends Gf{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new uu,this.whisker=new Ui,this.tooltip=new Hf}toJson(){const{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}=this,n=super.toJson();return n.whisker=Wf(n.whisker,{stroke:t,strokeWidth:e,strokeOpacity:i,lineDash:o,lineDashOffset:s}),n}};d([tt($t)],ct.prototype,"xKey",2),d([tt($t)],ct.prototype,"minKey",2),d([tt($t)],ct.prototype,"q1Key",2),d([tt($t)],ct.prototype,"medianKey",2),d([tt($t)],ct.prototype,"q3Key",2),d([tt($t)],ct.prototype,"maxKey",2),d([tt($t,{optional:!0})],ct.prototype,"xName",2),d([tt($t,{optional:!0})],ct.prototype,"yName",2),d([tt($t,{optional:!0})],ct.prototype,"minName",2),d([tt($t,{optional:!0})],ct.prototype,"q1Name",2),d([tt($t,{optional:!0})],ct.prototype,"medianName",2),d([tt($t,{optional:!0})],ct.prototype,"q3Name",2),d([tt($t,{optional:!0})],ct.prototype,"maxName",2),d([tt(ya,{optional:!0})],ct.prototype,"fill",2),d([tt(ys)],ct.prototype,"fillOpacity",2),d([tt(ya)],ct.prototype,"stroke",2),d([tt(Do)],ct.prototype,"strokeWidth",2),d([tt(ys)],ct.prototype,"strokeOpacity",2),d([tt(cu)],ct.prototype,"lineDash",2),d([tt(Do)],ct.prototype,"lineDashOffset",2),d([tt(Do)],ct.prototype,"cornerRadius",2),d([tt(Yf,{optional:!0})],ct.prototype,"formatter",2),d([tt(ma)],ct.prototype,"cap",2),d([tt(ma)],ct.prototype,"whisker",2),d([tt(ma)],ct.prototype,"tooltip",2);var{extent:Xf,extractDecoratedProperties:du,fixNumericExtent:hu,keyProperty:Qf,mergeDefaults:fa,SeriesNodePickMode:$f,SMALLEST_KEY_INTERVAL:Zf,valueProperty:No,diff:qf,animationValidation:Jf,convertValuesToScaleByDefs:tS,isFiniteNumber:eS,computeBarFocusBounds:iS}=gs,{motion:pu}=Pf,{ContinuousScale:oS}=Cf,sS=class extends gs.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},Sa=class extends gs.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[$f.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new ct,this.NodeEvent=sS}processData(t){return P(this,null,function*(){var e,i,o;if(!this.properties.isValid()||!this.visible)return;const{xKey:s,minKey:n,q1Key:a,medianKey:r,q3Key:l,maxKey:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),h=(e=this.getCategoryAxis())==null?void 0:e.scale,p=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:g,xScaleType:m,yScaleType:y}=this.getScaleInformation({xScale:h,yScale:p}),S=[];u&&this.processedData&&S.push(qf(this.processedData)),u&&S.push(Jf());const{processedData:f}=yield this.requestDataModel(t,this.data,{props:[Qf(s,m,{id:"xValue"}),No(n,y,{id:"minValue"}),No(a,y,{id:"q1Value"}),No(r,y,{id:"medianValue"}),No(l,y,{id:"q3Value"}),No(c,y,{id:"maxValue"}),...g?[Zf]:[],...S]});this.smallestDataInterval=(o=f.reduced)==null?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o,smallestDataInterval:s}=this;if(!(i&&o))return[];if(t===this.getBarDirection()){const g=o.getDomain(this,"minValue","value",i),m=o.getDomain(this,"maxValue","value",i);return hu([Math.min(...g),Math.max(...m)],this.getValueAxis())}const{index:n,def:a}=o.resolveProcessedDataDefById(this,"xValue"),r=i.domain.keys[n];if(a.type==="key"&&a.valueType==="category")return r;const l=this.getCategoryAxis(),c=(e=Xf(r))!=null?e:[NaN,NaN],u=eS(s)?s*.5:0,h=c[0]+-u,p=c[1]+u;return hu([h,p],l)}createNodeData(){return P(this,null,function*(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return;const{xKey:s,fill:n,fillOpacity:a,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:h,cap:p,whisker:g}=this.properties,m=[],y=e.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]),{barWidth:S,groupIndex:f}=this.updateGroupScale(i),x=oS.is(i.scale)?S*-.5:0,{groupScale:M,processedData:N}=this,v=this.isVertical(),D={itemId:s,nodeData:m,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&N?.data.forEach(({datum:I,keys:b,values:T})=>{const{xValue:_,minValue:A,q1Value:E,medianValue:O,q3Value:k,maxValue:R}=e.resolveProcessedDataDefsValues(y,{keys:b,values:T});if([A,E,O,k,R].some($=>typeof $!="number")||A>E||E>O||O>k||k>R)return;const L=tS({defs:y,values:{xValue:_,minValue:A,q1Value:E,medianValue:O,q3Value:k,maxValue:R},xAxis:i,yAxis:o});L.xValue+=Math.round(M.convert(String(f)))+x;const w=Math.round(S),C=Math.abs(L.q3Value-L.q1Value),B=L.xValue+w/2,z=Math.min(L.q3Value,L.q1Value)+C/2,V={x:v?B:z,y:v?z:B},F=v?w:C,K=v?C:w;m.push({series:this,itemId:_,datum:I,xKey:s,bandwidth:w,scaledValues:L,cap:p,whisker:g,fill:n,fillOpacity:a,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:h,midPoint:V,focusRect:{x:V.x-F/2,y:V.y-K/2,width:F,height:K}})}),D})}getLegendData(t){var e;const{id:i,data:o}=this,{xKey:s,yName:n,fill:a,fillOpacity:r,stroke:l,strokeWidth:c,strokeOpacity:u,showInLegend:h,legendItemName:p,visible:g}=this.properties;return!h||!o?.length||!s||t!=="category"?[]:[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:g,label:{text:(e=p??n)!=null?e:i},marker:{fill:a,fillOpacity:r,stroke:l,strokeOpacity:u,strokeWidth:c},legendItemName:p}]}getTooltipHtml(t){const{xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:n,maxKey:a,xName:r,yName:l,minName:c,q1Name:u,medianName:h,q3Name:p,maxName:g,tooltip:m,fill:y}=this.properties,{datum:S,itemId:f}=t,x=this.getCategoryAxis(),M=this.getValueAxis();if(!x||!M||!this.properties.isValid())return gs.EMPTY_TOOLTIP_CONTENT;const N=nu.sanitizeHtml(l),D=[[e,r,x],[i,c,M],[o,u,M],[s,h,M],[n,p,M],[a,g,M]].map(([b,T,_])=>nu.sanitizeHtml(`${T??b}: ${_.formatDatum(S[b])}`)).join(N?"<br/>":", "),{fill:I}=this.getFormattedStyles(t);return m.toTooltipHtml({title:N,content:D,backgroundColor:y},{seriesId:this.id,itemId:f,datum:S,fill:y,xKey:e,minKey:i,q1Key:o,medianKey:s,q3Key:n,maxKey:a,xName:r,minName:c,q1Name:u,medianName:h,q3Name:p,maxName:g,yName:l,title:N,color:y??I})}animateEmptyUpdateReady({datumSelection:t}){const e=this.isVertical(),{from:i,to:o}=wf(e);pu.resetMotion([t],Bf(e)),pu.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],i,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){return P(this,null,function*(){var e;const i=(e=t.nodeData)!=null?e:[];return t.datumSelection.update(i)})}updateDatumNodes(t){return P(this,arguments,function*({datumSelection:e,isHighlight:i}){var o;const s=this.isVertical(),n=(o=this.getValueAxis())==null?void 0:o.isReversed(),{cornerRadius:a}=this.properties;e.each((r,l)=>{let c=this.getFormattedStyles(l,i);i&&(c=fa(this.properties.highlightStyle.item,c));const{stroke:u,strokeWidth:h,strokeOpacity:p,lineDash:g,lineDashOffset:m}=c;c.whisker=fa(c.whisker,{stroke:u,strokeWidth:h,strokeOpacity:p,lineDash:g,lineDashOffset:m}),r.updateDatumStyles(l,c,s,n,a)})})}updateLabelNodes(t){return P(this,null,function*(){})}updateLabelSelection(t){return P(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)})}nodeFactory(){return new Kf}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o}}=this,{xKey:s,minKey:n,q1Key:a,medianKey:r,q3Key:l,maxKey:c,formatter:u}=this.properties,{datum:h,fill:p,fillOpacity:g,stroke:m,strokeWidth:y,strokeOpacity:S,lineDash:f,lineDashOffset:x,cap:M,whisker:N}=t,v={fill:p,fillOpacity:g,stroke:m,strokeWidth:y,strokeOpacity:S,lineDash:f,lineDashOffset:x,cap:du(M),whisker:du(N)};if(u){const D=o.call(u,X(U({datum:h,seriesId:i,highlighted:e},v),{xKey:s,minKey:n,q1Key:a,medianKey:r,q3Key:l,maxKey:c}));if(D)return fa(D,v)}return v}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return iS((i=this.contextNodeData)==null?void 0:i.nodeData[t].focusRect,this.contentGroup,e)}};Sa.className="BoxPlotSeries",Sa.type="box-plot";import{_Theme as xa}from"ag-charts-community";var nS={series:{__extends__:xa.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[xa.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[xa.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},aS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:Sa,defaultAxes:[{type:vo.CARTESIAN_AXIS_TYPE.NUMBER,position:vo.POSITION.LEFT},{type:vo.CARTESIAN_AXIS_TYPE.CATEGORY,position:vo.POSITION.BOTTOM}],themeTemplate:nS,groupable:!0,paletteFactory:({takeColors:t,userPalette:e,themeTemplateParameters:i})=>{var o;const s=i.properties.get(vo.DEFAULT_BACKGROUND_COLOUR),n=(o=Array.isArray(s)?s[0]:s)!=null?o:"white",{fills:[a],strokes:[r]}=t(1);return{fill:e?a:Rf.Color.interpolate(a,n)(.7),stroke:r}},swapDefaultAxesCondition:({direction:t})=>t==="horizontal"};import{_Theme as Ki}from"ag-charts-community";import{_ModuleSupport as ji,_Scene as ni,_Util as ms}from"ag-charts-community";import{_ModuleSupport as rS}from"ag-charts-community";var{AbstractBarSeriesProperties:lS,BaseProperties:va,PropertiesArray:cS,SeriesTooltip:uS,Validate:lt,ARRAY:dS,COLOR_STRING:Gi,LINE_DASH:gu,OBJECT:Ma,POSITIVE_NUMBER:Hi,RATIO:Yi,STRING:fs}=rS,Oe=class extends va{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};d([lt(Gi)],Oe.prototype,"fill",2),d([lt(Yi)],Oe.prototype,"fillOpacity",2),d([lt(Gi)],Oe.prototype,"stroke",2),d([lt(Hi)],Oe.prototype,"strokeWidth",2),d([lt(Yi)],Oe.prototype,"strokeOpacity",2),d([lt(gu)],Oe.prototype,"lineDash",2),d([lt(Hi)],Oe.prototype,"lineDashOffset",2),d([lt(Yi)],Oe.prototype,"lengthRatio",2);var yu=class extends va{};d([lt(Hi,{optional:!0})],yu.prototype,"max",2);var Ss=class extends va{constructor(){super(...arguments),this.color="lightgrey"}};d([lt(Gi)],Ss.prototype,"color",2),d([lt(Hi,{optional:!0})],Ss.prototype,"stop",2);var Ot=class extends lS{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new cS(Ss),this.target=new Oe,this.scale=new yu,this.tooltip=new uS,this.backgroundFill="white"}};d([lt(fs)],Ot.prototype,"valueKey",2),d([lt(fs,{optional:!0})],Ot.prototype,"valueName",2),d([lt(fs,{optional:!0})],Ot.prototype,"targetKey",2),d([lt(fs,{optional:!0})],Ot.prototype,"targetName",2),d([lt(Gi)],Ot.prototype,"fill",2),d([lt(Yi)],Ot.prototype,"fillOpacity",2),d([lt(Gi)],Ot.prototype,"stroke",2),d([lt(Hi)],Ot.prototype,"strokeWidth",2),d([lt(Yi)],Ot.prototype,"strokeOpacity",2),d([lt(gu)],Ot.prototype,"lineDash",2),d([lt(Hi)],Ot.prototype,"lineDashOffset",2),d([lt(Yi)],Ot.prototype,"widthRatio",2),d([lt(dS.restrict({minLength:0}))],Ot.prototype,"colorRanges",2),d([lt(Ma)],Ot.prototype,"target",2),d([lt(Ma)],Ot.prototype,"scale",2),d([lt(Ma)],Ot.prototype,"tooltip",2),d([lt(Gi)],Ot.prototype,"backgroundFill",2);var{animationValidation:hS,collapsedStartingBarPosition:mu,diff:pS,keyProperty:gS,partialAssign:Da,prepareBarAnimationFunctions:fu,resetBarSelectionsFn:yS,seriesLabelFadeInAnimation:Su,valueProperty:xu,createDatumId:mS,computeBarFocusBounds:fS}=ji,{fromToMotion:vu}=ni.motion,{sanitizeHtml:Mu}=ms,Du=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],SS=class qh extends ji.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:{y:["targetKey","valueKey"]},directionNames:{y:["targetName","valueName"]},pickModes:[ji.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:yS}}),this.properties=new Ot,this.normalizedColorRanges=[],this.colorRangesGroup=new ni.Group({name:`${this.id}-colorRanges`}),this.colorRangesSelection=ni.Selection.select(this.colorRangesGroup,ni.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=ni.Selection.select(this.annotationGroup,ni.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(e){return P(this,null,function*(){var i,o;if(!this.properties.isValid()||!this.data||!this.visible)return;const{valueKey:s,targetKey:n}=this.properties,a=(i=this.getCategoryAxis())==null?void 0:i.scale,r=(o=this.getValueAxis())==null?void 0:o.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({xScale:a,yScale:r}),u=[];n!==void 0&&u.push(xu(n,c,{id:"target"})),this.ctx.animationManager.isSkipped()||(this.processedData!==void 0&&u.push(pS(this.processedData)),u.push(hS())),yield this.requestDataModel(e,this.data.slice(0,1),{props:[gS(s,l,{id:"xValue"}),xu(s,c,{id:"value"}),...u],groupByKeys:!0}),this.animationState.transition("updateData")})}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var e,i;return Math.max(...(i=(e=this.getValueAxis())==null?void 0:e.dataDomain.domain)!=null?i:[0])}getSeriesDomain(e){var i,o;const{dataModel:s,processedData:n}=this;if(!s||!n)return[];const{valueKey:a,targetKey:r,valueName:l,scale:c}=this.properties;if(e===this.getCategoryDirection())return[l??a];if(e==((i=this.getValueAxis())==null?void 0:i.direction)){const u=s.getDomain(this,"value","value",n),h=r===void 0?[]:s.getDomain(this,"target","value",n);return[0,(o=c.max)!=null?o:Math.max(...u,...h)]}throw new Error(`unknown direction ${e}`)}getKeys(e){return e===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(e)}createNodeData(){return P(this,null,function*(){var e,i,o,s;const{dataModel:n,processedData:a}=this,{valueKey:r,targetKey:l,widthRatio:c,target:{lengthRatio:u}}=this.properties,h=(e=this.getCategoryAxis())==null?void 0:e.scale,p=(i=this.getValueAxis())==null?void 0:i.scale;if(!r||!n||!a||!h||!p||c===void 0||u===void 0)return;const g=(o=h.bandwidth)!=null?o:NaN,m=this.getMaxValue(),y=n.resolveProcessedDataIndexById(this,"value"),S=l===void 0?NaN:n.resolveProcessedDataIndexById(this,"target"),f={itemId:r,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return f;for(const{datum:N,values:v}of a.data){if(!Array.isArray(N)||N.length<1)continue;v[0][y]<0&&ms.Logger.warnOnce("negative values are not supported, clipping to 0.");const D=(s=this.properties.valueName)!=null?s:this.properties.valueKey,I=Math.min(m,Math.max(0,v[0][y])),b=p.convert(I),T=c*g,_=p.convert(0),A=this.getBarDirection()===ji.ChartAxisDirection.X,E={x:g*(1-c)/2,y:Math.min(b,_),width:T,height:Math.abs(_-b)};A&&([E.x,E.y,E.width,E.height]=[E.y,E.x,E.height,E.width]);let O;if(v[0][S]<0&&ms.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&v[0][S]>=0){const R=u*g,L=Math.min(m,v[0][S]);if(!isNaN(L)&&L!==void 0){const w=p.convert(L);let C=g*(1-u)/2,B=C+R,[z,V]=[w,w];A&&([C,B,z,V]=[z,V,C,B]),O={value:L,x1:C,x2:B,y1:z,y2:V}}}const k=X(U({series:this,datum:N[0],xKey:r,xValue:D,yKey:r,yValue:I,cumulativeValue:I,target:O},E),{midPoint:{x:E.x+E.width/2,y:E.y+E.height/2},opacity:1});f.nodeData.push(k)}const x=[...this.getColorRanges()].sort((N,v)=>{var D,I;return((D=N.stop)!=null?D:m)-((I=v.stop)!=null?I:m)});let M=0;return this.normalizedColorRanges=x.map(N=>{var v;const D=Math.min(m,(v=N.stop)!=null?v:1/0),I={color:N.color,start:M,stop:D};return M=D,I}),f})}getColorRanges(){const{colorRanges:e,fill:i,backgroundFill:o}=this.properties;if(e!==void 0&&e.length>0)return e;const s=new Ss;return s.color=ms.Color.interpolate(i,o)(.7),[s]}getLegendData(e){return[]}getTooltipHtml(e){const{valueKey:i,valueName:o,targetKey:s,targetName:n}=this.properties,a=this.getValueAxis(),{yValue:r,target:{value:l}={value:void 0},datum:c,itemId:u}=e;if(i===void 0||r===void 0||a===void 0)return ji.EMPTY_TOOLTIP_CONTENT;const h=(m,y,S)=>{const f=Mu(y??m),x=Mu(a.formatDatum(S));return`<b>${f}</b>: ${x}`},p=void 0,g=s===void 0||l===void 0?h(i,o,r):`${h(i,o,r)}<br/>${h(s,n,l)}`;return this.properties.tooltip.toTooltipHtml({title:p,content:g,backgroundColor:this.properties.fill},{datum:c,itemId:u,title:p,seriesId:this.id,valueKey:i,valueName:o,targetKey:s,targetName:n,color:void 0})}isLabelEnabled(){return!1}nodeFactory(){return new ni.Rect}updateDatumSelection(e){return P(this,null,function*(){return this.targetLinesSelection.update(e.nodeData,void 0,void 0),e.datumSelection.update(e.nodeData,void 0,void 0)})}updateDatumNodes(e){return P(this,null,function*(){for(const{node:i}of e.datumSelection){const o=this.properties;Da(Du,i,o)}for(const{node:i,datum:o}of this.targetLinesSelection)if(o.target===void 0)i.visible=!1;else{const s=this.properties.target;Da(["x1","x2","y1","y2"],i,o.target),Da(Du,i,s)}})}updateColorRanges(){return P(this,null,function*(){const e=this.getValueAxis(),i=this.getCategoryAxis();if(!e||!i)return;const[o,s]=[0,Math.max(...i.scale.range)],n=this.getBarDirection()===ji.ChartAxisDirection.Y?(a,r)=>{a.x=o,a.y=e.scale.convert(r.stop),a.height=e.scale.convert(r.start)-a.y,a.width=s}:(a,r)=>{a.x=e.scale.convert(r.start),a.y=o,a.height=s,a.width=e.scale.convert(r.stop)-a.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:a,datum:r}of this.colorRangesSelection)n(a,r),a.fill=r.color})}updateNodes(e,i,o){return P(this,null,function*(){yield oo(qh.prototype,this,"updateNodes").call(this,e,i,o),yield this.updateColorRanges()})}updateLabelSelection(e){return P(this,null,function*(){return e.labelSelection})}updateLabelNodes(e){return P(this,null,function*(){})}animateEmptyUpdateReady(e){const{datumSelection:i,annotationSelections:o}=e,s=fu(mu(this.isVertical(),this.axes,"normal"));vu(this.id,"nodes",this.ctx.animationManager,[i],s),Su(this,"annotations",this.ctx.animationManager,...o)}animateWaitingUpdateReady(e){var i,o,s;const{datumSelection:n,annotationSelections:a}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=(o=(i=this.processedData)==null?void 0:i.reduced)==null?void 0:o.diff,l=fu(mu(this.isVertical(),this.axes,"normal"));vu(this.id,"nodes",this.ctx.animationManager,[n],l,(u,h)=>mS(h.xValue),r),((s=r?.changed)!=null?s:!0)&&Su(this,"annotations",this.ctx.animationManager,...a)}computeFocusBounds({datumIndex:e,seriesRect:i}){var o;return fS((o=this.contextNodeData)==null?void 0:o.nodeData[e],this.contentGroup,i)}};import{_Theme as xS}from"ag-charts-community";var vS={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[xS.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},MS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:SS,defaultAxes:[{type:Ki.CARTESIAN_AXIS_TYPE.NUMBER,position:Ki.POSITION.LEFT},{type:Ki.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ki.POSITION.BOTTOM}],themeTemplate:vS,swapDefaultAxesCondition:t=>t?.direction==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{var o;const{properties:s}=i,{fills:[n],strokes:[a]}=t(e),r=i.properties.get(Ki.DEFAULT_BACKGROUND_COLOUR),l=(o=Array.isArray(r)?r[0]:r)!=null?o:"white",c=s.get(Ki.DEFAULT_CROSS_LINES_COLOUR);return{fill:n,stroke:a,target:{stroke:c},backgroundFill:l}}};import{_Theme as Io}from"ag-charts-community";import{_ModuleSupport as DS}from"ag-charts-community";import{_Scene as Zt,_Util as NS}from"ag-charts-community";var{SceneChangeDetection:ai,BBox:IS,RedrawType:ri}=Zt,Le=class extends Zt.Group{constructor(){super(...arguments),this.x=0,this.y=0,this.yBottom=0,this.yHigh=0,this.yLow=0,this.width=0,this.height=0}distanceSquared(t,e){const i=Zt.Selection.selectByClass(this,Zt.Rect,Zt.Line);return Zt.nearestSquared(t,e,i).distanceSquared}get midPoint(){const t=this.datum;return t.midPoint===void 0?(NS.Logger.error("CandlestickBaseGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):t.midPoint}render(t){this.updateCoordinates(),super.render(t)}};d([ai({redraw:ri.MAJOR})],Le.prototype,"x",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"y",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"yBottom",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"yHigh",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"yLow",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"width",2),d([ai({redraw:ri.MAJOR})],Le.prototype,"height",2);var _S=class extends Le{constructor(){super(),this.append([new Zt.Rect({tag:0}),new Zt.Line({tag:1}),new Zt.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:o,yLow:s,width:n,height:a}=this,r=Zt.Selection.select(this,Zt.Rect),[l]=r.selectByTag(0),[c]=r.selectByTag(1),[u]=r.selectByTag(2);if(n===0||a===0){l.visible=!1,c.visible=!1,u.visible=!1;return}l.visible=!0,c.visible=!0,u.visible=!0,l.setProperties({x:t,y:e,width:n,height:a,crisp:!0,clipBBox:new IS(t,e,n,a)});const h=n/2;c.setProperties({y1:Math.round(s+c.strokeWidth/2),y2:i,x:t+h}),u.setProperties({y1:Math.round(o+u.strokeWidth/2),y2:e,x:t+h})}updateDatumStyles(t,e){var i;const{bandwidth:o}=t,{fill:s,fillOpacity:n,stroke:a,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:u,wick:h={},cornerRadius:p}=e;(i=h.strokeWidth)!=null||(h.strokeWidth=1);const g=Zt.Selection.select(this,Zt.Rect),[m]=g.selectByTag(0),[y]=g.selectByTag(1),[S]=g.selectByTag(2);h.strokeWidth>o&&(h.strokeWidth=o),m.setProperties({fill:s,fillOpacity:n,strokeWidth:r,strokeOpacity:l,stroke:a,lineDash:c,lineDashOffset:u,cornerRadius:p}),y.setProperties(h),S.setProperties(h)}};import{_ModuleSupport as xs,_Scale as bS,_Scene as TS,_Util as AS}from"ag-charts-community";import{_ModuleSupport as ES}from"ag-charts-community";var{computeBarFocusBounds:OS,NODE_UPDATE_STATE_TO_PHASE_MAPPING:LS}=ES;function Nu(t,e){return vs(e)}function Iu(t){return{toFn:(o,s,n)=>{if(n==="removed"){const{x:a,yLow:r,yHigh:l,width:c}=vs(s),u=s.itemId==="up"?r:l;return{x:a,y:u,yBottom:u,yHigh:u,yLow:u,width:c,height:0}}return vs(s)},fromFn:(o,s,n)=>{const a=t?"initial":LS[n];if(n==="unknown"||n==="added"&&s!=null){const{x:r,y:l,yLow:c,yHigh:u,width:h,height:p}=vs(s);let g=s.itemId==="up"?c:u;return n==="unknown"&&(g=l+p/2),{x:r,y:g,yBottom:g,yHigh:g,yLow:g,width:h,height:0,phase:a}}return{x:o.x,y:o.y,yBottom:o.yBottom,yHigh:o.yHigh,yLow:o.yLow,width:o.width,height:o.height,phase:a}}}}function vs(t){const{bandwidth:e,scaledValues:{xValue:i,openValue:o,closeValue:s,highValue:n,lowValue:a}}=t,r=Math.min(o,s),l=isNaN(o)?s:Math.max(o,s),c=Math.min(n,a),u=Math.max(n,a);return{x:i,y:r,yBottom:l,yHigh:c,yLow:u,width:e,height:Math.max(l-r,.001)}}function _u(t,e){var i;const o=(i=t.getNodeData())==null?void 0:i.at(e.datumIndex),s=o?{x:o.scaledValues.xValue,y:o.scaledValues.highValue,width:o.bandwidth,height:o.scaledValues.lowValue-o.scaledValues.highValue}:void 0;return OS(s,t.contentGroup,e.seriesRect)}var{motion:bu}=TS,{extent:kS,fixNumericExtent:Tu,keyProperty:RS,SeriesNodePickMode:Au,SMALLEST_KEY_INTERVAL:CS,valueProperty:Ms,diff:PS,animationValidation:wS,convertValuesToScaleByDefs:BS,mergeDefaults:zS,isFiniteNumber:VS}=xs,{sanitizeHtml:Eu,Logger:Ou}=AS,{ContinuousScale:FS}=bS,US=class extends xs.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},Lu=class extends xs.AbstractBarSeries{constructor(t,e){super({moduleCtx:t,pickModes:[Au.NEAREST_BY_MAIN_AXIS_FIRST,Au.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:1,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:e}}),this.NodeEvent=US}animateEmptyUpdateReady({datumSelection:t}){const e=Iu(!0);bu.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],e)}animateWaitingUpdateReady({datumSelection:t}){var e;const{processedData:i}=this,o=(e=i?.reduced)==null?void 0:e.diff,s=Iu(!1);bu.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s,(n,a)=>String(a.xValue),o)}processData(t){return P(this,null,function*(){var e,i,o;if(!this.properties.isValid()||!this.visible)return;const{xKey:s,openKey:n,closeKey:a,highKey:r,lowKey:l}=this.properties,c=!this.ctx.animationManager.isSkipped(),u=(e=this.getCategoryAxis())==null?void 0:e.scale,h=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:u,yScale:h}),y=[];c&&(this.processedData&&y.push(PS(this.processedData)),y.push(wS())),n&&y.push(Ms(n,m,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{processedData:S}=yield this.requestDataModel(t,this.data,{props:[RS(s,g,{id:"xValue"}),Ms(a,m,{id:"closeValue"}),Ms(r,m,{id:"highValue"}),Ms(l,m,{id:"lowValue"}),...p?[CS]:[],...y]});this.smallestDataInterval=(o=S.reduced)==null?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o,smallestDataInterval:s}=this;if(!(i&&o))return[];const{openKey:n}=this.properties;if(t===this.getBarDirection()){const m=o.getDomain(this,"lowValue","value",i),y=o.getDomain(this,"highValue","value",i),S=n?o.getDomain(this,"openValue","value",i):[],f=o.getDomain(this,"closeValue","value",i);return Tu([Math.min(...m,...y,...S,...f),Math.max(...y,...m,...S,...f)],this.getValueAxis())}const{index:a,def:r}=o.resolveProcessedDataDefById(this,"xValue"),l=i.domain.keys[a];if(r.type==="key"&&r.valueType==="category")return l;const c=this.getCategoryAxis(),u=(e=kS(l))!=null?e:[NaN,NaN],h=VS(s)?s:0,p=u[0]+-h,g=u[1]+h;return Tu([p,g],c)}createBaseNodeData(){const{visible:t,dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return;const{xKey:s,openKey:n,closeKey:a,highKey:r,lowKey:l}=this.properties,c=[],u=["xValue","closeValue","highValue","lowValue"];n&&u.push("openValue");const h=e.resolveProcessedDataDefsByIds(this,u),{barWidth:p,groupIndex:g}=this.updateGroupScale(i),m=FS.is(i.scale)?p*-.5:0,{groupScale:y,processedData:S}=this,f={itemId:s,nodeData:c,labelData:[],scales:this.calculateScaling(),visible:this.visible};return t&&S?.data.forEach(({datum:x,keys:M,values:N})=>{const{xValue:v,openValue:D,closeValue:I,highValue:b,lowValue:T}=e.resolveProcessedDataDefsValues(h,{keys:M,values:N}),_=D!==void 0,A=T!==void 0&&(!_||T<=D)&&T<=I,E=b!==void 0&&(!_||b>=D)&&b>=I;if(!A){Ou.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);return}if(!E){Ou.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);return}const O=BS({defs:h,values:{xValue:v,openValue:D,closeValue:I,highValue:b,lowValue:T},xAxis:i,yAxis:o});O.xValue+=Math.round(y.convert(String(g)))+m;const k=!_||I>D,R=this.getSeriesItemType(k),[L,w]=_?[O.openValue,O.closeValue]:[O.lowValue,O.highValue],C=Math.min(L,w),z=Math.max(L,w)-C,V={x:O.xValue+Math.round(p)/2,y:C+z/2};c.push({series:this,itemId:R,datum:x,xKey:s,xValue:v,openKey:n,closeKey:a,highKey:r,lowKey:l,openValue:D,closeValue:I,highValue:b,lowValue:T,bandwidth:Math.round(p),scaledValues:O,midPoint:V,aggregatedValue:I})}),f}getSeriesItemType(t){return t?"up":"down"}getItemConfig(t){return this.properties.item[t]}getLegendData(t){return[]}getTooltipHtml(t){const{xKey:e,openKey:i,closeKey:o,highKey:s,lowKey:n,xName:a,yName:r,openName:l,closeName:c,highName:u,lowName:h,tooltip:p}=this.properties,{datum:g,itemId:m}=t,y=this.getCategoryAxis(),S=this.getValueAxis();if(!y||!S||!this.properties.isValid())return xs.EMPTY_TOOLTIP_CONTENT;const f=D=>D.charAt(0).toUpperCase()+D.substring(1),x=Eu(r),M=[[e,a,y],[s,u,S],[n,h,S],[o,c,S]];i&&M.splice(1,0,[i,l,S]);const N=M.map(([D,I,b])=>Eu(`${I??f(D)}: ${b.formatDatum(g[D])}`)).join("<br/>"),v=this.getFormattedStyles(t);return p.toTooltipHtml({title:x,content:N,backgroundColor:v.stroke},X(U({seriesId:this.id,datum:g},v),{xKey:e,openKey:i??"",closeKey:o,highKey:s,lowKey:n,xName:a,yName:r,openName:l,closeName:c,highName:u,lowName:h,title:x,color:v.fill,fill:v.fill,itemId:m}))}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(t){return P(this,null,function*(){var e;const i=(e=t.nodeData)!=null?e:[];return t.datumSelection.update(i)})}updateDatumNodes(t){return P(this,arguments,function*({datumSelection:e,isHighlight:i}){e.each((o,s)=>{const n=this.getActiveStyles(s,i);o.updateDatumStyles(s,n)})})}updateLabelNodes(t){return P(this,null,function*(){})}updateLabelSelection(t){return P(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)})}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o}}=this,{xKey:s,openKey:n="",closeKey:a,highKey:r,lowKey:l,formatter:c}=this.properties;if(c){const u=o.call(c,this.getFormatterParams(X(U({},t),{seriesId:i,highlighted:e,xKey:s,openKey:n,closeKey:a,highKey:r,lowKey:l})));if(u)return zS(u,this.getSeriesStyles(t))}return this.getSeriesStyles(t)}};import{_ModuleSupport as KS}from"ag-charts-community";var{BaseProperties:Na,AbstractBarSeriesProperties:jS,SeriesTooltip:GS,Validate:Z,COLOR_STRING:Ia,FUNCTION:ku,LINE_DASH:Ru,OBJECT:_o,POSITIVE_NUMBER:bo,RATIO:_a,STRING:ie}=KS,Wi=class extends Na{};d([Z(Ia,{optional:!0})],Wi.prototype,"stroke",2),d([Z(bo)],Wi.prototype,"strokeWidth",2),d([Z(_a)],Wi.prototype,"strokeOpacity",2),d([Z(Ru,{optional:!0})],Wi.prototype,"lineDash",2),d([Z(bo)],Wi.prototype,"lineDashOffset",2);var oe=class extends Na{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Wi}};d([Z(Ia,{optional:!0})],oe.prototype,"fill",2),d([Z(_a)],oe.prototype,"fillOpacity",2),d([Z(Ia)],oe.prototype,"stroke",2),d([Z(bo)],oe.prototype,"strokeWidth",2),d([Z(_a)],oe.prototype,"strokeOpacity",2),d([Z(Ru)],oe.prototype,"lineDash",2),d([Z(bo)],oe.prototype,"lineDashOffset",2),d([Z(bo)],oe.prototype,"cornerRadius",2),d([Z(ku,{optional:!0})],oe.prototype,"formatter",2),d([Z(_o)],oe.prototype,"wick",2);var ba=class extends Na{constructor(){super(...arguments),this.up=new oe,this.down=new oe}};d([Z(_o)],ba.prototype,"up",2),d([Z(_o)],ba.prototype,"down",2);var Vt=class extends jS{constructor(t,e){super(),this.tooltip=new GS,this.item=t,this.formatter=e}};d([Z(ie)],Vt.prototype,"xKey",2),d([Z(ie)],Vt.prototype,"openKey",2),d([Z(ie)],Vt.prototype,"closeKey",2),d([Z(ie)],Vt.prototype,"highKey",2),d([Z(ie)],Vt.prototype,"lowKey",2),d([Z(ie,{optional:!0})],Vt.prototype,"xName",2),d([Z(ie,{optional:!0})],Vt.prototype,"yName",2),d([Z(ie,{optional:!0})],Vt.prototype,"openName",2),d([Z(ie,{optional:!0})],Vt.prototype,"closeName",2),d([Z(ie,{optional:!0})],Vt.prototype,"highName",2),d([Z(ie,{optional:!0})],Vt.prototype,"lowName",2),d([Z(_o)],Vt.prototype,"tooltip",2),d([Z(_o)],Vt.prototype,"item",2),d([Z(ku,{optional:!0})],Vt.prototype,"formatter",2);var Cu=class extends Vt{constructor(){super(new ba)}};d([Z(ie)],Cu.prototype,"openKey",2);var{extractDecoratedProperties:HS,mergeDefaults:Pu}=DS,Ta=class extends Lu{constructor(t){super(t,Nu),this.properties=new Cu}createNodeData(){return P(this,null,function*(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{fill:o,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:u,cornerRadius:h}=this.getItemConfig(i.itemId);return X(U({},i),{fill:o,fillOpacity:s,stroke:n,strokeWidth:a,strokeOpacity:r,lineDash:l,lineDashOffset:c,wick:u,cornerRadius:h})});return X(U({},t),{nodeData:e})})}nodeFactory(){return new _S}getSeriesStyles(t){const{fill:e,fillOpacity:i,stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r,wick:l,cornerRadius:c}=t;return{fill:e,fillOpacity:i,stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r,wick:HS(l),cornerRadius:c}}getActiveStyles(t,e){let i=this.getFormattedStyles(t,e);e&&(i=Pu(this.properties.highlightStyle.item,i));const{stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}=i;return i.wick=Pu(i.wick,{stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}),i}getFormatterParams(t){return t}computeFocusBounds(t){return _u(this,t)}};Ta.className="CandleStickSeries",Ta.type="candlestick";import{_Theme as Aa}from"ag-charts-community";var YS={series:{__extends__:Aa.EXTENDS_SERIES_DEFAULTS,highlightStyle:{item:{strokeWidth:3}},direction:"vertical"},animation:{enabled:!1},axes:{[Aa.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[Aa.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},WS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",instanceConstructor:Ta,defaultAxes:[{type:Io.CARTESIAN_AXIS_TYPE.NUMBER,position:Io.POSITION.LEFT},{type:Io.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:Io.POSITION.BOTTOM}],themeTemplate:YS,groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:o})=>{const{properties:s}=o,{fills:n,strokes:a}=t(e),{fills:r,strokes:l}=s.get(Io.DEFAULT_COLOURS);return{item:{up:{fill:i?"transparent":r.GREEN,stroke:i?a[0]:l.GREEN},down:{fill:i?n[0]:r.RED,stroke:i?a[0]:l.RED}}}}};import{_Theme as Xi}from"ag-charts-community";import{_ModuleSupport as Ds,_Scale as XS,_Scene as QS,_Util as $S}from"ag-charts-community";import{_ModuleSupport as ZS,_Scene as qS,_Util as JS}from"ag-charts-community";var{Validate:Ns,NUMBER:wu,TEXT_WRAP:tx,OVERFLOW_STRATEGY:ex}=ZS,{Logger:ix}=JS,{Text:li,Label:ox}=qS,To=class extends ox{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(t){return Math.ceil(t*li.defaultLineHeightRatio)}};d([Ns(tx)],To.prototype,"wrapping",2),d([Ns(ex)],To.prototype,"overflowStrategy",2),d([Ns(wu,{optional:!0})],To.prototype,"minimumFontSize",2);var se=class extends To{constructor(){super(...arguments),this.spacing=0}};d([Ns(wu)],se.prototype,"spacing",2);var Ao=class extends To{};function sx(t,e){const{fontSize:i,minimumFontSize:o=i}=t,{fontSize:s,minimumFontSize:n=s}=e,a=i-o,r=s-n;let l=t.fontSize,c=e.fontSize;const u=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>o||c>n;){const h=a>0?(l-o)/a:-1,p=r>0?(c-n)/r:-1;h>p?l--:c--,u.push({labelFontSize:l,secondaryLabelFontSize:c})}return u.reverse(),u}function Bu(t,e,i){if(t>e)return;let o=t,s=e,n;for(;s>=o;){const a=(s+o)/2|0,r=i(a);r==null?s=a-1:(n=r,o=a+1)}return n}function nx(t,e,i,o,{padding:s},n){var a,r;const{spacing:l}=e,c=2*s,u=2*s+l,h=((a=e.minimumFontSize)!=null?a:e.fontSize)+((r=o.minimumFontSize)!=null?r:o.fontSize);if(h>n(h+u,!1).height-u)return;const p=sx(e,o),g=new li;g.setFont(e);const m={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight},y=new li;y.setFont(o);const S={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let f,x;return Bu(0,p.length-1,M=>{const{labelFontSize:N,secondaryLabelFontSize:v}=p[M],D=M===0,I=se.lineHeight(N),b=Ao.lineHeight(v),T=n(I+b+u,D),_=T.width-c,A=T.height-u;if(I+b>A)return;if(f==null||f.fontSize!==N){m.fontSize=N;const{lines:O}=li.wrapLines(t,_,A,m,e.wrapping,D?e.overflowStrategy:"hide");if(O==null)f=void 0;else{const k=O.join(`
`);g.text=k,g.fontSize=N,g.lineHeight=N;const R=g.computeBBox().width,L=O.length*I;f={text:k,fontSize:N,lineHeight:I,width:R,height:L}}}if(f==null||f.width>_||f.height>A)return;if(x==null||x.fontSize!==v){S.fontSize=v;const{lines:O}=li.wrapLines(i,_,A,S,o.wrapping,D?o.overflowStrategy:"hide");if(O==null)x=void 0;else{const k=O.join(`
`);y.text=k,y.fontSize=v,y.lineHeight=b;const R=y.computeBBox().width,L=O.length*b;x={text:k,fontSize:v,lineHeight:b,width:R,height:L}}}if(x==null)return;const E=f.height+x.height;if(!(x.width>_||E>A))return{width:Math.max(f.width,x.width),height:E+l,meta:T.meta,label:f,secondaryLabel:x}})}function Ea(t,e,{padding:i},o){var s;const n=2*i,a=Math.min((s=e.minimumFontSize)!=null?s:e.fontSize,e.fontSize),r=new li;r.setFont(e);const l={fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight};return Bu(a,e.fontSize,c=>{const u=se.lineHeight(c),h=c===a,p=o(u+n,h),g=p.width-n,m=p.height-n;if(u>m)return;l.fontSize=c;const{lines:y}=li.wrapLines(t,g,m,l,e.wrapping,h?e.overflowStrategy:"hide");if(y==null)return;const S=y.join(`
`);r.text=S,r.fontSize=c,r.lineHeight=u;const f=r.computeBBox(),x=r.computeBBox().width,M=u*y.length;if(!(f.width>g||M>m))return[{text:S,fontSize:c,lineHeight:u,width:x,height:M},p.meta]})}function zu(t){return t?.minimumFontSize!=null&&t?.fontSize&&t?.minimumFontSize>t?.fontSize}function Oa(t,e,i,o,s,n){const a=e.enabled?t:void 0,r=o.enabled?i:void 0;(zu(e)||zu(o))&&ix.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;a!=null&&r!=null&&(l=nx(a,e,r,o,s,n));let c;if(l==null&&a!=null&&(c=Ea(a,e,s,n)),c!=null){const[h,p]=c;l={width:h.width,height:h.height,meta:p,label:h,secondaryLabel:void 0}}let u;if(l==null&&a==null&&r!=null&&(u=Ea(r,o,s,n)),u!=null){const[h,p]=u;l={width:h.width,height:h.height,meta:p,label:void 0,secondaryLabel:h}}return l}import{_ModuleSupport as ax}from"ag-charts-community";var{CartesianSeriesProperties:rx,SeriesTooltip:lx,Validate:Pt,AND:cx,ARRAY:ux,COLOR_STRING:dx,COLOR_STRING_ARRAY:hx,FUNCTION:px,OBJECT:Vu,POSITIVE_NUMBER:Fu,RATIO:gx,STRING:ci,TEXT_ALIGN:yx,VERTICAL_ALIGN:mx}=ax,Lt=class extends rx{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new se,this.tooltip=new lx}};d([Pt(ci,{optional:!0})],Lt.prototype,"title",2),d([Pt(ci)],Lt.prototype,"xKey",2),d([Pt(ci)],Lt.prototype,"yKey",2),d([Pt(ci,{optional:!0})],Lt.prototype,"colorKey",2),d([Pt(ci,{optional:!0})],Lt.prototype,"xName",2),d([Pt(ci,{optional:!0})],Lt.prototype,"yName",2),d([Pt(ci,{optional:!0})],Lt.prototype,"colorName",2),d([Pt(cx(hx,ux.restrict({minLength:1})))],Lt.prototype,"colorRange",2),d([Pt(dx,{optional:!0})],Lt.prototype,"stroke",2),d([Pt(gx,{optional:!0})],Lt.prototype,"strokeOpacity",2),d([Pt(Fu,{optional:!0})],Lt.prototype,"strokeWidth",2),d([Pt(yx)],Lt.prototype,"textAlign",2),d([Pt(mx)],Lt.prototype,"verticalAlign",2),d([Pt(Fu)],Lt.prototype,"itemPadding",2),d([Pt(px,{optional:!0})],Lt.prototype,"formatter",2),d([Pt(Vu)],Lt.prototype,"label",2),d([Pt(Vu)],Lt.prototype,"tooltip",2);var{SeriesNodePickMode:fx,computeBarFocusBounds:Sx,getMissCount:xx,valueProperty:La,ChartAxisDirection:Se,DEFAULT_CARTESIAN_DIRECTION_KEYS:vx,DEFAULT_CARTESIAN_DIRECTION_NAMES:Mx}=Ds,{Rect:Dx,PointerEvents:Nx}=QS,{ColorScale:Ix}=XS,{sanitizeHtml:Qi,Color:_x,Logger:bx}=$S,Tx=class extends Ds.CartesianSeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.colorKey=o.properties.colorKey}},Ax={left:-.5,center:0,right:-.5},Ex={top:-.5,middle:0,bottom:-.5},ka=class extends Ds.CartesianSeries{constructor(t){super({moduleCtx:t,directionKeys:vx,directionNames:Mx,pickModes:[fx.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Lt,this.NodeEvent=Tx,this.colorScale=new Ix,this.seriesItemEnabled=[]}processData(t){return P(this,null,function*(){var e,i,o;const s=this.axes[Se.X],n=this.axes[Se.Y];if(!s||!n||!this.properties.isValid()||!((e=this.data)!=null&&e.length))return;const{xKey:a,yKey:r,colorRange:l,colorKey:c}=this.properties,u=(i=this.axes[Se.X])==null?void 0:i.scale,h=(o=this.axes[Se.Y])==null?void 0:o.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:u,yScale:h}),m=this.colorScale.type,{dataModel:y,processedData:S}=yield this.requestDataModel(t,this.data,{props:[La(a,p,{id:"xValue"}),La(r,g,{id:"yValue"}),...c?[La(c,m,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const f=y.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=S.domain.values[f],this.colorScale.range=l,this.colorScale.update()}})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,n=xx(this,i.defs.values[o].missing);return!(s===0||s===n)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===Se.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}createNodeData(){return P(this,null,function*(){var t,e,i,o,s,n,a;const{data:r,visible:l,axes:c,dataModel:u}=this,h=c[Se.X],p=c[Se.Y];if(!(r&&u&&l&&h&&p))return;if(h.type!=="category"||p.type!=="category"){bx.warnOnce(`Heatmap series expected axes to have "category" type, but received "${h.type}" and "${p.type}" instead.`);return}const{xKey:g,xName:m,yKey:y,yName:S,colorKey:f,colorName:x,textAlign:M,verticalAlign:N,itemPadding:v,colorRange:D,label:I}=this.properties,b=u.resolveProcessedDataIndexById(this,"xValue"),T=u.resolveProcessedDataIndexById(this,"yValue"),_=f?u.resolveProcessedDataIndexById(this,"colorValue"):void 0,A=h.scale,E=p.scale,O=((t=A.bandwidth)!=null?t:0)/2,k=((e=E.bandwidth)!=null?e:0)/2,R=this.isColorScaleValid(),L=[],w=[],C=(i=A.bandwidth)!=null?i:10,B=(o=E.bandwidth)!=null?o:10,z=(C-2*v)*Ax[M],V=(B-2*v)*Ex[N],F=()=>({width:C,height:B,meta:null}),{seriesItemEnabled:K}=this;K.length=0;for(const{values:$,datum:G}of(n=(s=this.processedData)==null?void 0:s.data)!=null?n:[]){const q=$[b],H=$[T],at=A.convert(q)+O,Y=E.convert(H)+k,W=$[_??-1],ot=R&&W!=null?this.colorScale.convert(W):D[0];K.push(W!=null);const J=W==null?void 0:this.getLabelText(I,{value:W,datum:G,colorKey:f,colorName:x,xKey:g,yKey:y,xName:m,yName:S}),mt=Oa(J,this.properties.label,void 0,this.properties.label,{padding:v},F),ht={x:at,y:Y,size:0};if(L.push({series:this,itemId:y,yKey:y,xKey:g,xValue:q,yValue:H,colorValue:W,datum:G,point:ht,width:C,height:B,fill:ot,midPoint:{x:at,y:Y}}),mt?.label!=null){const{text:ft,fontSize:Kt,lineHeight:At,height:jt}=mt.label,{fontStyle:st,fontFamily:ge,fontWeight:$e,color:_i}=this.properties.label,Ko=ht.x+z*(C-2*v),jo=ht.y+V*(B-2*v)-(mt.height-jt)*.5;w.push({series:this,itemId:y,datum:G,text:ft,fontSize:Kt,lineHeight:At,fontStyle:st,fontFamily:ge,fontWeight:$e,color:_i,textAlign:M,verticalAlign:N,x:Ko,y:jo})}}return{itemId:(a=this.properties.yKey)!=null?a:this.id,nodeData:L,labelData:w,scales:this.calculateScaling(),visible:this.visible}})}nodeFactory(){return new Dx}updateDatumSelection(t){return P(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)})}updateDatumNodes(t){return P(this,null,function*(){var e;const{isHighlight:i}=t,{id:o,ctx:{callbackCache:s}}=this,{xKey:n,yKey:a,colorKey:r,formatter:l,highlightStyle:{item:{fill:c,stroke:u,strokeWidth:h,strokeOpacity:p,fillOpacity:g}}}=this.properties,m=this.axes[Se.X],[y,S]=(e=m?.visibleRange)!=null?e:[],x=!(y!==0||S!==1);t.datumSelection.each((M,N)=>{var v,D,I,b,T;const{point:_,width:A,height:E}=N,O=i&&c!==void 0?_x.interpolate(N.fill,c)(g??1):N.fill,k=i&&u!==void 0?u:this.properties.stroke,R=i&&p!==void 0?p:this.properties.strokeOpacity,L=i&&h!==void 0?h:this.properties.strokeWidth;let w;l&&(w=s.call(l,{datum:N.datum,fill:O,stroke:k,strokeOpacity:R,strokeWidth:L,highlighted:i,xKey:n,yKey:a,colorKey:r,seriesId:o})),M.crisp=x,M.x=Math.floor(_.x-A/2),M.y=Math.floor(_.y-E/2),M.width=Math.ceil(A),M.height=Math.ceil(E),M.fill=(v=w?.fill)!=null?v:O,M.stroke=(D=w?.stroke)!=null?D:k,M.strokeOpacity=(b=(I=w?.strokeOpacity)!=null?I:R)!=null?b:1,M.strokeWidth=(T=w?.strokeWidth)!=null?T:L})})}updateLabelSelection(t){return P(this,null,function*(){const{labelData:e,labelSelection:i}=t,{enabled:o}=this.properties.label,s=o?e:[];return i.update(s)})}updateLabelNodes(t){return P(this,null,function*(){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=Nx.None})})}getTooltipHtml(t){var e,i,o;const s=this.axes[Se.X],n=this.axes[Se.Y];if(!this.properties.isValid()||!s||!n)return Ds.EMPTY_TOOLTIP_CONTENT;const{xKey:a,yKey:r,colorKey:l,xName:c,yName:u,colorName:h,stroke:p,strokeWidth:g,colorRange:m,formatter:y,tooltip:S}=this.properties,{colorScale:f,id:x,ctx:{callbackCache:M}}=this,{datum:N,xValue:v,yValue:D,colorValue:I,itemId:b}=t,T=this.isColorScaleValid()?f.convert(I):m[0];let _;y&&(_=M.call(y,{datum:t,xKey:a,yKey:r,colorKey:l,fill:T,stroke:p,strokeWidth:g,highlighted:!1,seriesId:x}));const A=(i=(e=_?.fill)!=null?e:T)!=null?i:"gray",E=(o=this.properties.title)!=null?o:u,O=Qi(s.formatDatum(v)),k=Qi(n.formatDatum(D));let R=`<b>${Qi(c??a)}</b>: ${O}<br><b>${Qi(u??r)}</b>: ${k}`;return l&&(R=`<b>${Qi(h??l)}</b>: ${Qi(I)}<br>`+R),S.toTooltipHtml({title:E,content:R,backgroundColor:A},{seriesId:x,datum:N,xKey:a,yKey:r,xName:c,yName:u,title:E,color:A,colorKey:l,colorName:h,itemId:b})}getLegendData(t){var e;return t!=="gradient"||!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;const o=(i=this.contextNodeData)==null?void 0:i.nodeData[t];if(o===void 0)return;const{width:s,height:n,midPoint:a}=o,r={x:a.x-s/2,y:a.y-n/2,width:s,height:n};return Sx(r,this.contentGroup,e)}};ka.className="HeatmapSeries",ka.type="heatmap";import{_Theme as Is}from"ag-charts-community";var Ox={series:{__extends__:Is.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,color:Is.DEFAULT_LABEL_COLOUR,fontSize:Is.FONT_SIZE.SMALL,fontFamily:Is.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},Lx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:ka,defaultAxes:[{type:Xi.CARTESIAN_AXIS_TYPE.CATEGORY,position:Xi.POSITION.LEFT},{type:Xi.CARTESIAN_AXIS_TYPE.CATEGORY,position:Xi.POSITION.BOTTOM}],themeTemplate:Ox,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:o})=>{var s;const{properties:n}=o,a=n.get(Xi.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),r=n.get(Xi.DEFAULT_BACKGROUND_COLOUR),l=(s=Array.isArray(r)?r[0]:r)!=null?s:"white",{fills:c,strokes:u}=t(e);return{stroke:i?u[0]:l,colorRange:i?[c[0],c[1]]:a}}};import{_Theme as kx}from"ag-charts-community";var Eo={legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}};import{_ModuleSupport as Uu,_Scene as Rx,_Util as Cx}from"ag-charts-community";import{_Scene as Px}from"ag-charts-community";var wx=1e-9;function Ku(t,e,i,o){const[s,n]=t,[a,r]=e,l=a-s,c=r-n,u=l*l+c*c;let h,p;if(Math.abs(u)<wx)h=s,p=n;else{let y=((i-s)*l+(o-n)*c)/u;y=Math.max(0,Math.min(1,y)),h=s+y*(a-s),p=n+y*(r-n)}const g=i-h,m=o-p;return g*g+m*m}function ju(t,e,i){let o=1/0,s=t[t.length-1];for(const n of t)o=Math.min(o,Ku(s,n,e,i)),s=n;return Math.sqrt(o)}function Ra(t){let[e,i]=t[0],o=0;for(let s=1;s<t.length;s+=1){const[n,a]=t[s],r=Math.hypot(n-e,a-i);o+=r,e=n,i=a}return o}function _s(t){if(t.length===0)return;const e=Ra(t)/2;let[i,o]=t[0],s=0;for(let n=1;n<t.length;n+=1){const[a,r]=t[n],l=Math.hypot(a-i,r-o),c=s+l;if(c>e){const u=(e-s)/l,h=[i+(a-i)*u,o+(r-o)*u],p=Math.atan2(r-o,a-i);return{point:h,angle:p}}s=c,i=a,o=r}}import{_ModuleSupport as Bx}from"ag-charts-community";var{LonLatBBox:zx}=Bx;function Oo(t,e,i,o,s){return t==null?t=new zx(e,i,o,s):(t.lon0=Math.min(t.lon0,e),t.lat0=Math.min(t.lat0,i),t.lon1=Math.max(t.lon1,o),t.lat1=Math.max(t.lat1,s)),t}var Vx=(t,e,i)=>{let o=t,s=o;for(const n of e)if(o==null||i(o.value,n)>0)o={value:n,next:o},s=o;else{for(s=s;s.next!=null&&i(s.next.value,n)<=0;)s=s.next;s.next={value:n,next:s.next}}return o};function ui(t,e){return t.forEach(i=>{const[o,s]=i;e=Oo(e,o,s,o,s)}),e}function Fx(t){if(t.length===0)return;let e=0,i=0,o=0,[s,n]=t[t.length-1];for(const[a,r]of t){const l=s*r-a*n;o+=l,e+=(s+a)*l,i+=(n+r)*l,s=a,n=r}return o*=3,[e/o,i/o]}function bs(t,e,i){let o=!1,s=1/0;for(const n of t){let a=n[n.length-1],[r,l]=a;for(const c of n){const[u,h]=c;h>i!=l>i&&e<(r-u)*(i-h)/(l-h)+u&&(o=!o),s=Math.min(s,Ku(a,c,e,i)),a=c,r=u,l=h}}return(o?-1:1)*Math.sqrt(s)}var{Path:Ux,ExtendedPath2D:Kx,BBox:jx,ScenePathChangeDetection:Gu}=Px,$i=class extends Ux{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new Kx}computeBBox(){var t;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),(t=this.bbox)==null?void 0:t.clone()}updatePath(){const{projectedGeometry:t}=this;this.strokePath.clear(),this.path.clear(),this.bbox=t!=null?this.drawGeometry(t,void 0):void 0}drawPath(t){super.drawPath(t),this.renderStroke(t,this.strokePath.getPath2D())}containsPoint(t,e){const{projectedGeometry:i}=this;return i==null||({x:t,y:e}=this.transformPoint(t,e),!this.getCachedBBox().containsPoint(t,e))?!1:this.geometryDistance(i,t,e)<=0}distanceToPoint(t,e){const{projectedGeometry:i}=this;return{x:t,y:e}=this.transformPoint(t,e),i!=null?this.geometryDistance(i,t,e):1/0}geometryDistance(t,e,i){const{renderMode:o,strokeWidth:s}=this,n=(o&1)!==0,a=(o&2)!==0,r=Math.max(s/2,1)+1;switch(t.type){case"GeometryCollection":return t.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,e,i)),1/0);case"MultiPolygon":return n?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(bs(c,e,i),0)),1/0):1/0;case"Polygon":return n?Math.max(bs(t.coordinates,e,i),0):1/0;case"MultiLineString":return a?t.coordinates.reduce((l,c)=>Math.min(l,Math.max(ju(c,e,i)-r,0)),1/0):1/0;case"LineString":return a?Math.max(ju(t.coordinates,e,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(t,e){const{renderMode:i,path:o,strokePath:s}=this,n=(i&1)!==0,a=(i&2)!==0;switch(t.type){case"GeometryCollection":t.geometries.forEach(r=>{e=this.drawGeometry(r,e)});break;case"MultiPolygon":n&&t.coordinates.forEach(r=>{e=this.drawPolygon(o,r,e)});break;case"Polygon":n&&(e=this.drawPolygon(o,t.coordinates,e));break;case"LineString":a&&(e=this.drawLineString(s,t.coordinates,e,!1));break;case"MultiLineString":a&&t.coordinates.forEach(r=>{e=this.drawLineString(s,r,e,!1)});break;case"Point":case"MultiPoint":break}return e}drawPolygon(t,e,i){if(e.length<1)return i;i=this.drawLineString(t,e[0],i,!0);for(let o=1;o<e.length;o+=1){const s=e[o];this.drawLineString(t,s,void 0,!0)}return i}drawLineString(t,e,i,o){if(e.length<2)return i;const s=o?e.length-1:e.length;for(let n=0;n<s;n+=1){const[a,r]=e[n];if(n===0?t.moveTo(a,r):t.lineTo(a,r),i==null)i=new jx(a,r,0,0);else{const{x:l,y:c}=i,u=l+i.width,h=c+i.height;i.x=Math.min(l,a),i.y=Math.min(c,r),i.width=Math.max(u,a)-i.x,i.height=Math.max(h,r)-i.y}}return o&&t.closePath(),i}};d([Gu()],$i.prototype,"projectedGeometry",2),d([Gu()],$i.prototype,"renderMode",2);function Zi(t,e){if(t.bbox!=null){const[i,o,s,n]=t.bbox;return e=Oo(e,i,o,s,n),e}switch(t.type){case"GeometryCollection":t.geometries.forEach(i=>{e=Zi(i,e)});break;case"MultiPolygon":t.coordinates.forEach(i=>{i.length>0&&(e=ui(i[0],e))});break;case"Polygon":t.coordinates.length>0&&(e=ui(t.coordinates[0],e));break;case"MultiLineString":t.coordinates.forEach(i=>{e=ui(i,e)});break;case"LineString":e=ui(t.coordinates,e);break;case"MultiPoint":t.coordinates.forEach(i=>{const[o,s]=i;e=Oo(e,o,s,o,s)});break;case"Point":{const[i,o]=t.coordinates;e=Oo(e,i,o,i,o);break}}return e}function Ts(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(o=>{const s=Ts(o);if(s==null)return;const n=ui(s[0],void 0);if(n==null)return;const a=Math.abs(n.lat1-n.lat0)*Math.abs(n.lon1-n.lon0);(e==null||a>e)&&(e=a,i=s)}),i}case"MultiPolygon":{let e,i;return t.coordinates.forEach(o=>{const s=ui(o[0],void 0);if(s==null)return;const n=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(e==null||n>e)&&(e=n,i=o)}),i}case"Polygon":return t.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function As(t){switch(t.type){case"GeometryCollection":{let e,i;return t.geometries.map(o=>{const s=As(o);if(s==null)return;const n=Ra(s);n!=null&&(e==null||n>e)&&(e=n,i=s)}),i}case"MultiLineString":{let e=0,i;return t.coordinates.forEach(o=>{const s=Ra(o);s>e&&(e=s,i=o)}),i}case"LineString":return t.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Ca(t,e){if(t==null)return!1;switch(t.type){case"GeometryCollection":return t.geometries.some(i=>Ca(i,e));case"MultiPolygon":case"Polygon":return(e&1)!==0;case"MultiLineString":case"LineString":return(e&2)!==0;case"MultiPoint":case"Point":return(e&4)!==0}}function Ke(t,e){switch(t.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:t.geometries.map(i=>Ke(i,e))};case"Polygon":return{type:"Polygon",coordinates:Pa(t.coordinates,e)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:Gx(t.coordinates,e)};case"MultiLineString":return{type:"MultiLineString",coordinates:Pa(t.coordinates,e)};case"LineString":return{type:"LineString",coordinates:wa(t.coordinates,e)};case"MultiPoint":return{type:"MultiPoint",coordinates:wa(t.coordinates,e)};case"Point":return{type:"Point",coordinates:e.convert(t.coordinates)}}}function Gx(t,e){return t.map(i=>Pa(i,e))}function Pa(t,e){return t.map(i=>wa(i,e))}function wa(t,e){return t.map(i=>e.convert(i))}import{_ModuleSupport as Hu}from"ag-charts-community";function Yu(t){return Array.isArray(t)&&t.length>=2&&t.every(Hu.isFiniteNumber)}function Es(t){return Array.isArray(t)&&t.length>=2&&t.every(Yu)}var Wu=.001;function Hx(t){return Math.abs(t[0][0]-t[t.length-1][0])<Wu&&Math.abs(t[0][1]-t[t.length-1][1])<Wu}function Xu(t){return Array.isArray(t)&&t.every(Es)&&t.every(Hx)}function Qu(t){if(t===null)return!0;if(typeof t!="object"||t.type==null)return!1;const{type:e,coordinates:i}=t;switch(e){case"GeometryCollection":return Array.isArray(t.geometries)&&t.geometries.every(Qu);case"MultiPolygon":return Array.isArray(i)&&i.every(Xu);case"Polygon":return Xu(i);case"MultiLineString":return Array.isArray(i)&&i.every(Es);case"LineString":return Es(i);case"MultiPoint":return Es(i);case"Point":return Yu(i)}}function Yx(t){return t!==null&&typeof t=="object"&&t.type==="Feature"&&Qu(t.geometry)}function Wx(t){return t!==null&&typeof t=="object"&&t.type==="FeatureCollection"&&Array.isArray(t.features)&&t.features.every(Yx)}var xe=Hu.predicateWithMessage(Wx,"a GeoJSON object");import{_ModuleSupport as Xx}from"ag-charts-community";var{COLOR_STRING:Qx,LINE_DASH:$x,OBJECT:Zx,POSITIVE_NUMBER:$u,RATIO:qx,Validate:di,SeriesProperties:Jx,SeriesTooltip:tv}=Xx,je=class extends Jx{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new tv}};d([di(xe,{optional:!0})],je.prototype,"topology",2),d([di(Qx)],je.prototype,"stroke",2),d([di(qx)],je.prototype,"strokeOpacity",2),d([di($u)],je.prototype,"strokeWidth",2),d([di($x)],je.prototype,"lineDash",2),d([di($u)],je.prototype,"lineDashOffset",2),d([di(Zx)],je.prototype,"tooltip",2);var{createDatumId:ev,DataModelSeries:iv,SeriesNodePickMode:ov,Validate:sv}=Uu,{Group:nv,Selection:av,PointerEvents:rv}=Rx,{Logger:lv}=Cx,Os=class extends iv{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[ov.EXACT_SHAPE_MATCH]}),this.properties=new je,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new nv({name:"itemGroup"})),this.datumSelection=av.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new $i;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t.pointerEvents=rv.None,t}processData(){return P(this,null,function*(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:Zi(o,e)},void 0),t==null&&lv.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")})}createNodeData(){return P(this,null,function*(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((n,a)=>{const{geometry:r}=n,l=r!=null&&i!=null?Ke(r,i):void 0;l!=null&&o.push({series:this,itemId:a,datum:n,index:a,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}})}updateSelections(){return P(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return P(this,null,function*(){var t;const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=(t=this.contextNodeData)!=null?t:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})})}updateDatumSelection(t){return P(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>ev(e.index))})}updateDatumNodes(t){return P(this,null,function*(){const{properties:e}=this,{datumSelection:i}=t,{stroke:o,strokeOpacity:s,lineDash:n,lineDashOffset:a}=e,r=this.getStrokeWidth(e.strokeWidth);i.each((l,c)=>{const{projectedGeometry:u}=c;if(u==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=u,l.stroke=o,l.strokeWidth=r,l.strokeOpacity=s,l.lineDash=n,l.lineDashOffset=a})})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return Uu.EMPTY_TOOLTIP_CONTENT}computeFocusBounds(t){}};Os.className="MapLineBackgroundSeries",Os.type="map-line-background",d([sv(xe,{optional:!0,property:"topology"})],Os.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:cv,DEFAULT_HIERARCHY_STROKES:uv}=kx,dv={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",instanceConstructor:Os,themeTemplate:X(U({},Eo),{series:{__extends__:cv,strokeWidth:1,lineDash:[0],lineDashOffset:0}}),paletteFactory:({themeTemplateParameters:t})=>{var e;const{properties:i}=t;return{stroke:(e=i.get(uv))==null?void 0:e[1]}}};import{_Theme as hv}from"ag-charts-community";import{_ModuleSupport as Zu,_Scale as pv,_Scene as gv,_Util as yv}from"ag-charts-community";function mv(){return{fromFn:(i,o,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,o,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function qu(t,e){var i;const o=(i=t.contextNodeData)==null?void 0:i.nodeData[e.datumIndex];if(o!==void 0){for(const s of t.datumSelection.nodes())if(s.datum===o)return s.computeTransformedBBox()}}import{_ModuleSupport as fv,_Scene as Sv}from"ag-charts-community";var{AND:xv,ARRAY:vv,COLOR_STRING:Mv,COLOR_STRING_ARRAY:Dv,FUNCTION:Nv,LINE_DASH:Iv,NUMBER_ARRAY:_v,OBJECT:Ju,POSITIVE_NUMBER:Ba,RATIO:bv,STRING:he,Validate:pt,SeriesProperties:Tv,SeriesTooltip:Av}=fv,{Label:Ev}=Sv,dt=class extends Tv{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Ev,this.tooltip=new Av}};d([pt(xe,{optional:!0})],dt.prototype,"topology",2),d([pt(he,{optional:!0})],dt.prototype,"title",2),d([pt(he,{optional:!0})],dt.prototype,"legendItemName",2),d([pt(he)],dt.prototype,"idKey",2),d([pt(he)],dt.prototype,"topologyIdKey",2),d([pt(he,{optional:!0})],dt.prototype,"idName",2),d([pt(he,{optional:!0})],dt.prototype,"labelKey",2),d([pt(he,{optional:!0})],dt.prototype,"labelName",2),d([pt(he,{optional:!0})],dt.prototype,"sizeKey",2),d([pt(he,{optional:!0})],dt.prototype,"sizeName",2),d([pt(he,{optional:!0})],dt.prototype,"colorKey",2),d([pt(he,{optional:!0})],dt.prototype,"colorName",2),d([pt(_v,{optional:!0})],dt.prototype,"sizeDomain",2),d([pt(xv(Dv,vv.restrict({minLength:1})),{optional:!0})],dt.prototype,"colorRange",2),d([pt(Ba,{optional:!0})],dt.prototype,"maxStrokeWidth",2),d([pt(Mv)],dt.prototype,"stroke",2),d([pt(bv)],dt.prototype,"strokeOpacity",2),d([pt(Ba)],dt.prototype,"strokeWidth",2),d([pt(Iv)],dt.prototype,"lineDash",2),d([pt(Ba)],dt.prototype,"lineDashOffset",2),d([pt(Nv,{optional:!0})],dt.prototype,"formatter",2),d([pt(Ju)],dt.prototype,"label",2),d([pt(Ju)],dt.prototype,"tooltip",2);var{getMissCount:Ov,createDatumId:Lv,DataModelSeries:kv,SeriesNodePickMode:td,valueProperty:Lo,Validate:Rv}=Zu,{ColorScale:Cv,LinearScale:Pv}=pv,{Selection:za,Text:ed}=gv,{sanitizeHtml:ko,Logger:id}=yv,Ls=class extends kv{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[td.EXACT_SHAPE_MATCH,td.NEAREST_NODE]}),this.properties=new dt,this._chartTopology=void 0,this.colorScale=new Cv,this.sizeScale=new Pv,this.datumSelection=za.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=za.select(this.labelGroup,ed),this.highlightDatumSelection=za.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new $i;return t.renderMode=2,t.lineJoin="round",t.lineCap="round",t}processData(t){return P(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:o,topology:s,sizeScale:n,colorScale:a}=this,{topologyIdKey:r,idKey:l,sizeKey:c,colorKey:u,labelKey:h,sizeDomain:p,colorRange:g}=this.properties,m=new Map;s?.features.forEach(v=>{var D;const I=(D=v.properties)==null?void 0:D[r];I==null||!Ca(v.geometry,2)||m.set(I,v)});const y=this.sizeScale.type,S=this.colorScale.type,f=(e=this.scale)==null?void 0:e.type,{dataModel:x,processedData:M}=yield this.requestDataModel(t,o,{props:[Lo(l,f,{id:"idValue",includeProperty:!1}),Lo(l,f,{id:"featureValue",includeProperty:!1,processor:()=>v=>m.get(v)}),...h!=null?[Lo(h,"band",{id:"labelValue"})]:[],...c!=null?[Lo(c,y,{id:"sizeValue"})]:[],...u!=null?[Lo(u,S,{id:"colorValue"})]:[]]}),N=x.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=M.data.reduce((v,{values:D})=>{const I=D[N],b=I?.geometry;return b==null?v:Zi(b,v)},void 0),c!=null){const v=x.resolveProcessedDataIndexById(this,"sizeValue"),D=(i=M.domain.values[v])!=null?i:[];n.domain=p??D}if(g!=null&&this.isColorScaleValid()){const v=x.resolveProcessedDataIndexById(this,"colorValue");a.domain=M.domain.values[v],a.range=g,a.update()}s==null&&id.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,n=Ov(this,i.defs.values[o].missing);return!(s===0||s===n)}getLabelDatum(t,e,i,o){if(e==null||i==null)return;const s=As(i);if(s==null)return;const{idKey:n,idName:a,sizeKey:r,sizeName:l,colorKey:c,colorName:u,labelKey:h,labelName:p,label:g}=this.properties,m=this.getLabelText(g,{value:e,datum:t,idKey:n,idName:a,sizeKey:r,sizeName:l,colorKey:c,colorName:u,labelKey:h,labelName:p});if(m==null)return;const y=ed.getTextSize(String(m),o),S=_s(s);if(S==null)return;const[f,x]=S.point,{width:M,height:N}=y;return{point:{x:f,y:x,size:0},label:{width:M,height:N,text:m},marker:void 0,placement:void 0}}createNodeData(){return P(this,null,function*(){var t;const{id:e,dataModel:i,processedData:o,sizeScale:s,colorScale:n,properties:a,scale:r}=this,{idKey:l,sizeKey:c,colorKey:u,labelKey:h,label:p}=a;if(i==null||o==null)return;const g=this.isColorScaleValid(),m=i.resolveProcessedDataIndexById(this,"idValue"),y=i.resolveProcessedDataIndexById(this,"featureValue"),S=h!=null?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,f=c!=null?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,x=u!=null?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,M=(t=a.maxStrokeWidth)!=null?t:a.strokeWidth;s.range=[Math.min(a.strokeWidth,M),M];const N=p.getFont(),v=new Map;o.data.forEach(({values:_})=>{var A;const E=_[m],O=(A=_[y])==null?void 0:A.geometry,k=O!=null&&r!=null?Ke(O,r):void 0;E!=null&&k!=null&&v.set(E,k)});const D=[],I=[],b=[];o.data.forEach(({datum:_,values:A})=>{const E=A[m],O=x!=null?A[x]:void 0,k=f!=null?A[f]:void 0,R=S!=null?A[S]:void 0,L=g&&O!=null?n.convert(O):void 0,w=k!=null?s.convert(k,{clampMode:"clamped"}):void 0,C=v.get(E);C==null&&b.push(E);const B=this.getLabelDatum(_,R,C,N);B!=null&&I.push(B),D.push({series:this,itemId:l,datum:_,stroke:L,strokeWidth:w,idValue:E,labelValue:R,colorValue:O,sizeValue:k,projectedGeometry:C})});const T=10;if(b.length>T){const _=b.length-T;b.length=T,b.push(`(+${_} more)`)}return b.length>0&&id.warnOnce("some data items do not have matches in the provided topology",b),{itemId:e,nodeData:D,labelData:I}})}updateSelections(){return P(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return P(this,null,function*(){var t,e,i;const{datumSelection:o,labelSelection:s,highlightDatumSelection:n}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=(i=(e=this.contextNodeData)==null?void 0:e.nodeData)!=null?i:[];this.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:o}),yield this.updateDatumNodes({datumSelection:o,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelSelection:s}),yield this.updateLabelNodes({labelSelection:s}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:n}),yield this.updateDatumNodes({datumSelection:n,isHighlight:!0})})}updateDatumSelection(t){return P(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>Lv(e.idValue))})}updateDatumNodes(t){return P(this,null,function*(){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:s,isHighlight:n}=t,{idKey:a,labelKey:r,sizeKey:l,colorKey:c,stroke:u,strokeOpacity:h,lineDash:p,lineDashOffset:g,formatter:m}=i,y=n?i.highlightStyle.item:void 0,S=this.getStrokeWidth(i.strokeWidth);s.each((f,x)=>{var M,N,v,D,I,b,T,_,A,E,O,k;const{projectedGeometry:R}=x;if(R==null){f.visible=!1,f.projectedGeometry=void 0;return}let L;if(m!=null){const w={seriesId:e,datum:x.datum,itemId:x.itemId,idKey:a,labelKey:r,sizeKey:l,colorKey:c,strokeOpacity:h,stroke:u,strokeWidth:S,lineDash:p,lineDashOffset:g,highlighted:n};L=o.call(m,w)}f.visible=!0,f.projectedGeometry=R,f.stroke=(v=(N=(M=y?.stroke)!=null?M:L?.stroke)!=null?N:x.stroke)!=null?v:u,f.strokeWidth=Math.max((D=y?.strokeWidth)!=null?D:0,(b=(I=L?.strokeWidth)!=null?I:x.strokeWidth)!=null?b:S),f.strokeOpacity=(_=(T=y?.strokeOpacity)!=null?T:L?.strokeOpacity)!=null?_:h,f.lineDash=(E=(A=y?.lineDash)!=null?A:L?.lineDash)!=null?E:p,f.lineDashOffset=(k=(O=y?.lineDashOffset)!=null?O:L?.lineDashOffset)!=null?k:g})})}updateLabelSelection(t){return P(this,null,function*(){var e,i;const o=(i=this.isLabelEnabled()?(e=this.chart)==null?void 0:e.placeLabels().get(this):void 0)!=null?i:[];return t.labelSelection.update(o)})}updateLabelNodes(t){return P(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:n,fontFamily:a}=this.properties.label;e.each((r,{x:l,y:c,width:u,height:h,text:p})=>{r.visible=!0,r.x=l+u/2,r.y=c+h/2,r.text=p,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=n,r.fontFamily=a,r.textAlign="center",r.textBaseline="middle"})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,n=e!=null&&e===t.legendItemName;(s.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:n}=this.properties,a=n!=null&&n===t.legendItemName;o.id===this.id||a?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,n)=>{const a=s.distanceToPoint(t,e);a<i&&(i=a,o=n)}),o!=null?{datum:o,distance:i}:void 0}datumMidPoint(t){var e;const{_previousDatumMidPoint:i}=this;if(i?.datum===t)return i.point;const o=t.projectedGeometry,s=o!=null?As(o):void 0,n=s!=null?(e=_s(s))==null?void 0:e.point:void 0,a=n!=null?{x:n[0],y:n[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:a},a}getLegendData(t){var e,i,o,s;const{processedData:n,dataModel:a}=this;if(n==null||a==null)return[];const{title:r,legendItemName:l,idKey:c,idName:u,colorKey:h,colorName:p,colorRange:g,stroke:m,strokeWidth:y,strokeOpacity:S,lineDash:f,visible:x}=this.properties;if(t==="gradient"&&h!=null&&g!=null){const M=n.domain.values[a.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:x,seriesId:this.id,colorName:p,colorRange:g,colorDomain:M}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(i=(e=l??r)!=null?e:u)!=null?i:c,seriesId:this.id,enabled:x,label:{text:(s=(o=l??r)!=null?o:u)!=null?s:c},marker:{fill:m,fillOpacity:S,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:m,strokeOpacity:S,strokeWidth:y,lineDash:f},legendItemName:l}]:[]}getTooltipHtml(t){var e,i,o,s,n;const{id:a,processedData:r,properties:l,ctx:{callbackCache:c}}=this;if(!r||!l.isValid())return Zu.EMPTY_TOOLTIP_CONTENT;const{legendItemName:u,idKey:h,idName:p,colorKey:g,colorName:m,sizeKey:y,sizeName:S,labelKey:f,labelName:x,formatter:M,tooltip:N}=l,{datum:v,stroke:D,idValue:I,colorValue:b,sizeValue:T,labelValue:_,itemId:A}=t,E=(i=ko((e=l.title)!=null?e:u))!=null?i:"",O=[];O.push(ko((p!=null?`${p}: `:"")+I)),b!=null&&O.push(ko((m??g)+": "+b)),T!=null&&O.push(ko((S??y)+": "+T)),_!=null&&f!==h&&O.push(ko((x??f)+": "+_));const k=O.join("<br>");let R;M&&(R=c.call(M,{seriesId:a,datum:v,idKey:h,stroke:D,strokeWidth:this.getStrokeWidth((o=t.strokeWidth)!=null?o:l.strokeWidth),highlighted:!1}));const L=(n=(s=R?.stroke)!=null?s:D)!=null?n:l.stroke;return N.toTooltipHtml({title:E,content:k,backgroundColor:L},U({seriesId:a,datum:v,idKey:h,title:E,color:L,itemId:A,sizeKey:y,colorKey:g,colorName:m,idName:p,labelKey:f,labelName:x,sizeName:S},this.getModuleTooltipParams()))}computeFocusBounds(t){return qu(this,t)}};Ls.className="MapLineSeries",Ls.type="map-line",d([Rv(xe,{optional:!0,property:"topology"})],Ls.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:wv,EXTENDS_SERIES_DEFAULTS:Bv,DEFAULT_FONT_FAMILY:zv,DEFAULT_LABEL_COLOUR:Vv,singleSeriesPaletteFactory:Fv}=hv,Uv={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",instanceConstructor:Ls,themeTemplate:X(U({},Eo),{series:{__extends__:Bv,strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zv,color:Vv}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:n}=Fv(t),{properties:a}=s,r=a.get(wv),{fills:l}=e(i);return{colorRange:o?[l[0],l[1]]:r,stroke:n}}};import{_Theme as Kv}from"ag-charts-community";import{_ModuleSupport as od,_Scale as jv,_Scene as Gv,_Util as Hv}from"ag-charts-community";function sd(t,e,i){const o=ui(t[0],void 0);if(o==null)return;const s=(o.lon0+o.lon1)/2,n=(o.lat0+o.lat1)/2,a=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=Fx(t[0]),[c,u]=l,h=-bs(t,c,u);let p;const g=(v,D)=>{const b=Math.max(D-h,0);return v-.5*b},m=(v,D,I)=>{const{distance:b,maxDistance:T}=i(t,v,D,I),_=Math.hypot(c-v,u-D),A=Math.min(Math.max(c,v-I/2),v+I/2),E=Math.min(Math.max(u,D-I/2),D+I/2),O=Math.hypot(c-A,u-E),k=g(b,_),R=g(T,O);return{distance:b,maxDistance:T,value:k,maxValue:R,x:v,y:D,stride:I}},y=(v,D,I,b)=>{const T=m(D,I,b);T.maxDistance>=0&&v.push(T)},S=Math.min(a,r)/2;let f={value:m(s,n,S),next:null};for(;f!=null;){const v=f.value,{distance:D,value:I,maxValue:b,x:T,y:_,stride:A}=v;if(f=f.next,D>0&&(p==null||I>p.value)&&(p=v),p!=null&&b-p.value<=e)continue;const E=A/2,O=[];y(O,T-E,_-E,E),y(O,T+E,_-E,E),y(O,T-E,_+E,E),y(O,T+E,_+E,E),O.sort(nd),f=Vx(f,O,nd)}if(p==null)return;const{distance:x,x:M,y:N}=p;return{x:M,y:N,distance:x}}var nd=(t,e)=>e.maxValue-t.maxValue;function Va(t,e){const i=sd(t,e,(n,a,r,l)=>{const c=-bs(n,a,r),u=c+l*Math.SQRT2;return{distance:c,maxDistance:u}});if(i==null)return;const{x:o,y:s}=i;return[o,s]}function ad(t,e){var i,o;let s;switch(t.type){case"GeometryCollection":return t.geometries.flatMap(n=>ad(n,e));case"MultiPoint":return t.coordinates;case"Point":return[t.coordinates];case"MultiPolygon":{const n=Ts(t);s=n!=null?Va(n,e):void 0;break}case"Polygon":{const n=t.coordinates;s=n!=null?Va(n,e):void 0;break}case"MultiLineString":{const n=As(t);s=n!=null?(i=_s(n))==null?void 0:i.point:void 0;break}case"LineString":{const n=t.coordinates;s=(o=_s(n))==null?void 0:o.point;break}}return s!=null?[s]:[]}import{_ModuleSupport as Yv,_Scene as Wv,_Util as Xv}from"ag-charts-community";var{AND:Qv,ARRAY:$v,COLOR_STRING:rd,COLOR_STRING_ARRAY:Zv,FUNCTION:qv,NUMBER_ARRAY:Jv,OBJECT:ld,POSITIVE_NUMBER:Fa,RATIO:cd,STRING:Ft,MARKER_SHAPE:tM,Validate:et,SeriesProperties:eM,SeriesTooltip:iM}=Yv,{Label:oM,Circle:sM}=Wv,{Logger:nM}=Xv,ud=class extends oM{constructor(){super(...arguments),this.placement="bottom"}};d([et(Ft)],ud.prototype,"placement",2);var it=class extends eM{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape=sM,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.label=new ud,this.tooltip=new iM}isValid(){const t=super.isValid(),e=this.idKey!=null,i=this.latitudeKey!=null&&this.longitudeKey!=null;return!e&&!i?(nM.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1):t}};d([et(xe,{optional:!0})],it.prototype,"topology",2),d([et(Ft,{optional:!0})],it.prototype,"title",2),d([et(Ft,{optional:!0})],it.prototype,"legendItemName",2),d([et(Ft,{optional:!0})],it.prototype,"idKey",2),d([et(Ft)],it.prototype,"topologyIdKey",2),d([et(Ft,{optional:!0})],it.prototype,"idName",2),d([et(Ft,{optional:!0})],it.prototype,"latitudeKey",2),d([et(Ft,{optional:!0})],it.prototype,"latitudeName",2),d([et(Ft,{optional:!0})],it.prototype,"longitudeKey",2),d([et(Ft,{optional:!0})],it.prototype,"longitudeName",2),d([et(Ft,{optional:!0})],it.prototype,"labelKey",2),d([et(Ft,{optional:!0})],it.prototype,"labelName",2),d([et(Ft,{optional:!0})],it.prototype,"sizeKey",2),d([et(Ft,{optional:!0})],it.prototype,"sizeName",2),d([et(Ft,{optional:!0})],it.prototype,"colorKey",2),d([et(Ft,{optional:!0})],it.prototype,"colorName",2),d([et(Qv(Zv,$v.restrict({minLength:1})),{optional:!0})],it.prototype,"colorRange",2),d([et(tM)],it.prototype,"shape",2),d([et(Fa)],it.prototype,"size",2),d([et(Fa,{optional:!0})],it.prototype,"maxSize",2),d([et(Jv,{optional:!0})],it.prototype,"sizeDomain",2),d([et(rd,{optional:!0})],it.prototype,"fill",2),d([et(cd)],it.prototype,"fillOpacity",2),d([et(rd,{optional:!0})],it.prototype,"stroke",2),d([et(Fa)],it.prototype,"strokeWidth",2),d([et(cd)],it.prototype,"strokeOpacity",2),d([et(qv,{optional:!0})],it.prototype,"formatter",2),d([et(ld)],it.prototype,"label",2),d([et(ld)],it.prototype,"tooltip",2);var{Validate:aM,fromToMotion:rM,StateMachine:lM,getMissCount:cM,createDatumId:uM,DataModelSeries:dM,SeriesNodePickMode:dd,Layers:hM,valueProperty:hi,computeMarkerFocusBounds:pM}=od,{ColorScale:gM,LinearScale:yM}=jv,{Group:mM,Selection:Ua,Text:hd,getMarker:pd}=Gv,{sanitizeHtml:qi,Logger:fM}=Hv,ks=class extends dM{constructor(t){super({moduleCtx:t,contentGroupVirtual:!0,useLabelLayer:!0,pickModes:[dd.EXACT_SHAPE_MATCH,dd.NEAREST_NODE]}),this.properties=new it,this._chartTopology=void 0,this.colorScale=new gM,this.sizeScale=new yM,this.markerGroup=this.contentGroup.appendChild(new mM({name:"markerGroup",layer:!0,isVirtual:!1,zIndex:hM.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelSelection=Ua.select(this.labelGroup,hd,!1),this.markerSelection=Ua.select(this.markerGroup,()=>this.markerFactory(),!1),this.highlightMarkerSelection=Ua.select(this.highlightNode,()=>this.markerFactory()),this.animationState=new lM("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){const t=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||t)}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}markerFactory(){const{shape:t}=this.properties,e=pd(t);return new e}processData(t){return P(this,null,function*(){var e,i;if(this.data==null||!this.properties.isValid())return;const{data:o,topology:s,sizeScale:n,colorScale:a}=this,{topologyIdKey:r,idKey:l,latitudeKey:c,longitudeKey:u,sizeKey:h,colorKey:p,labelKey:g,sizeDomain:m,colorRange:y}=this.properties,S=new Map;s?.features.forEach(_=>{var A;const E=(A=_.properties)==null?void 0:A[r];E!=null&&S.set(E,_)});const f=this.sizeScale.type,x=this.colorScale.type,M=(e=this.scale)==null?void 0:e.type,N=c!=null&&u!=null,{dataModel:v,processedData:D}=yield this.requestDataModel(t,o,{props:[...l!=null?[hi(l,M,{id:"idValue",includeProperty:!1}),hi(l,M,{id:"featureValue",includeProperty:!1,processor:()=>_=>S.get(_)})]:[],...N?[hi(c,M,{id:"latValue"}),hi(u,M,{id:"lonValue"})]:[],...g?[hi(g,"band",{id:"labelValue"})]:[],...h?[hi(h,f,{id:"sizeValue"})]:[],...p?[hi(p,x,{id:"colorValue"})]:[]]}),I=l!=null?v.resolveProcessedDataIndexById(this,"featureValue"):void 0,b=N?v.resolveProcessedDataIndexById(this,"latValue"):void 0,T=N?v.resolveProcessedDataIndexById(this,"lonValue"):void 0;if(this.topologyBounds=D.data.reduce((_,{values:A})=>{const E=I!=null?A[I]:void 0,O=E?.geometry;if(O!=null&&(_=Zi(O,_)),b!=null&&T!=null){const k=A[T],R=A[b];_=Oo(_,k,R,k,R)}return _},void 0),h!=null){const _=v.resolveProcessedDataIndexById(this,"sizeValue"),A=(i=D.domain.values[_])!=null?i:[];n.domain=m??A}if(y!=null&&this.isColorScaleValid()){const _=v.resolveProcessedDataIndexById(this,"colorValue");a.domain=D.domain.values[_],a.range=y,a.update()}this.animationState.transition("updateData")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,n=cM(this,i.defs.values[o].missing);return!(s===0||s===n)}getLabelDatum(t,e,i,o,s,n){if(e==null)return;const{idKey:a,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:h,sizeKey:p,sizeName:g,colorKey:m,colorName:y,labelKey:S,labelName:f,label:x}=this.properties,{placement:M}=x,N=this.getLabelText(x,{value:e,datum:t,idKey:a,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:h,sizeKey:p,sizeName:g,colorKey:m,colorName:y,labelKey:S,labelName:f});if(N==null)return;const{width:v,height:D}=hd.getTextSize(String(N),n);return{point:{x:i,y:o,size:s},label:{width:v,height:D,text:N},marker:pd(this.properties.shape),placement:M}}createNodeData(){return P(this,null,function*(){var t;const{id:e,dataModel:i,processedData:o,colorScale:s,sizeScale:n,properties:a,scale:r}=this,{idKey:l,latitudeKey:c,longitudeKey:u,sizeKey:h,colorKey:p,labelKey:g,label:m}=a;if(i==null||o==null||r==null)return;const y=this.isColorScaleValid(),S=c!=null&&u!=null,f=l!=null?i.resolveProcessedDataIndexById(this,"idValue"):void 0,x=l!=null?i.resolveProcessedDataIndexById(this,"featureValue"):void 0,M=S?i.resolveProcessedDataIndexById(this,"latValue"):void 0,N=S?i.resolveProcessedDataIndexById(this,"lonValue"):void 0,v=g!=null?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,D=h!=null?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,I=p!=null?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,b=(t=a.maxSize)!=null?t:a.size;n.range=[Math.min(a.size,b),b];const T=m.getFont();let _;f!=null&&x!=null&&(_=new Map,o.data.forEach(({values:R})=>{var L;const w=R[f],C=(L=R[x])==null?void 0:L.geometry,B=C!=null&&r!=null?Ke(C,r):void 0;w!=null&&B!=null&&_.set(w,B)}));const A=[],E=[],O=[];o.data.forEach(({datum:R,values:L})=>{const w=f!=null?L[f]:void 0,C=N!=null?L[N]:void 0,B=M!=null?L[M]:void 0,z=I!=null?L[I]:void 0,V=D!=null?L[D]:void 0,F=v!=null?L[v]:void 0,K=y&&z!=null?s.convert(z):void 0,$=V!=null?n.convert(V,{clampMode:"clamped"}):a.size,G=w!=null?_?.get(w):void 0;if(w!=null&&Ke==null&&O.push(w),C!=null&&B!=null){const[q,H]=r.convert([C,B]),at=this.getLabelDatum(R,F,q,H,$,T);at&&E.push(at),A.push({series:this,itemId:c,datum:R,index:-1,fill:K,idValue:w,lonValue:C,latValue:B,labelValue:F,sizeValue:V,colorValue:z,point:{x:q,y:H,size:$},midPoint:{x:q,y:H}})}else G!=null&&ad(G,1).forEach(([q,H],at)=>{const Y=this.getLabelDatum(R,F,q,H,$,T);Y&&E.push(Y),A.push({series:this,itemId:c,datum:R,index:at,fill:K,idValue:w,lonValue:C,latValue:B,labelValue:F,sizeValue:V,colorValue:z,point:{x:q,y:H,size:$},midPoint:{x:q,y:H}})})});const k=10;if(O.length>k){const R=O.length-k;O.length=k,O.push(`(+${R} more)`)}return O.length>0&&fM.warnOnce("some data items do not have matches in the provided topology",O),{itemId:e,nodeData:A,labelData:E}})}updateSelections(){return P(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(t){return P(this,arguments,function*({seriesRect:e}){var i,o,s;const{labelSelection:n,markerSelection:a,highlightMarkerSelection:r}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();l!=null&&(l.series!==this||l.datum==null)&&(l=void 0);const c=(s=(o=this.contextNodeData)==null?void 0:o.nodeData)!=null?s:[];this.labelSelection=yield this.updateLabelSelection({labelSelection:n}),yield this.updateLabelNodes({labelSelection:n}),this.markerSelection=yield this.updateMarkerSelection({markerData:c,markerSelection:a}),yield this.updateMarkerNodes({markerSelection:a,isHighlight:!1,highlightedDatum:l}),this.highlightMarkerSelection=yield this.updateMarkerSelection({markerData:l!=null?[l]:[],markerSelection:r}),yield this.updateMarkerNodes({markerSelection:r,isHighlight:!0,highlightedDatum:l}),this.checkResize(e)&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateLabelSelection(t){return P(this,null,function*(){var e,i;const o=(i=this.isLabelEnabled()?(e=this.chart)==null?void 0:e.placeLabels().get(this):void 0)!=null?i:[];return t.labelSelection.update(o)})}updateLabelNodes(t){return P(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontSize:n,fontFamily:a}=this.properties.label;e.each((r,{x:l,y:c,width:u,height:h,text:p})=>{r.visible=!0,r.x=l+u/2,r.y=c+h/2,r.text=p,r.fill=i,r.fontStyle=o,r.fontWeight=s,r.fontSize=n,r.fontFamily=a,r.textAlign="center",r.textBaseline="middle"})})}updateMarkerSelection(t){return P(this,null,function*(){const{markerData:e,markerSelection:i}=t;return i.update(e,void 0,o=>uM([o.index,o.idValue,o.lonValue,o.latValue]))})}updateMarkerNodes(t){return P(this,null,function*(){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{markerSelection:s,isHighlight:n,highlightedDatum:a}=t,{idKey:r,latitudeKey:l,longitudeKey:c,labelKey:u,sizeKey:h,colorKey:p,fill:g,fillOpacity:m,stroke:y,strokeOpacity:S,formatter:f}=i,x=n?i.highlightStyle.item:void 0,M=this.getStrokeWidth(i.strokeWidth);s.each((N,v)=>{var D,I,b,T,_,A,E,O,k,R,L;const{datum:w,point:C}=v;let B;if(f!=null){const z={seriesId:e,datum:v.datum,itemId:v.itemId,size:C.size,idKey:r,latitudeKey:l,longitudeKey:c,labelKey:u,sizeKey:h,colorKey:p,fill:g,fillOpacity:m,stroke:y,strokeWidth:M,strokeOpacity:S,highlighted:n};B=o.call(f,z)}N.size=C.size,N.fill=(b=(I=(D=x?.fill)!=null?D:B?.fill)!=null?I:v.fill)!=null?b:g,N.fillOpacity=(_=(T=x?.fillOpacity)!=null?T:B?.fillOpacity)!=null?_:m,N.stroke=(E=(A=x?.stroke)!=null?A:B?.stroke)!=null?E:y,N.strokeWidth=(k=(O=x?.strokeWidth)!=null?O:B?.strokeWidth)!=null?k:M,N.strokeOpacity=(L=(R=x?.strokeOpacity)!=null?R:B?.strokeOpacity)!=null?L:S,N.translationX=C.x,N.translationY=C.y,N.zIndex=!n&&a!=null&&w===a.datum?1:0})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,n=e!=null&&e===t.legendItemName;(s.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:n}=this.properties,a=n!=null&&n===t.legendItemName;o.id===this.id||a?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isProcessedDataAnimatable(){return!0}resetAnimation(t){t==="initial"?this.animationState.transition("reset"):t==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:t}=this.ctx,e=mv();rM(this.id,"markers",t,[this.markerSelection,this.highlightMarkerSelection],e)}getLabelData(){var t,e;return(e=(t=this.contextNodeData)==null?void 0:t.labelData)!=null?e:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(t){var e;const{x:i,y:o}=this.rootGroup.transformPoint(t.x,t.y);let s=1/0,n;return(e=this.contextNodeData)==null||e.nodeData.forEach(a=>{const{x:r,y:l,size:c}=a.point,u=Math.max(Math.abs(r-i)-c,0),h=Math.max(Math.abs(l-o)-c,0),p=u*u+h*h;p<s&&(s=p,n=a)}),n!=null?{datum:n,distance:Math.sqrt(s)}:void 0}getLegendData(t){var e,i,o,s,n,a;const{processedData:r,dataModel:l}=this;if(r==null||l==null)return[];const{title:c,legendItemName:u,idName:h,idKey:p,colorKey:g,colorName:m,colorRange:y,visible:S,shape:f,fill:x,stroke:M,fillOpacity:N,strokeOpacity:v,strokeWidth:D}=this.properties;if(t==="gradient"&&g!=null&&y!=null){const I=r.domain.values[l.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:S,seriesId:this.id,colorName:m,colorRange:y,colorDomain:I}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(o=(i=(e=u??c)!=null?e:h)!=null?i:p)!=null?o:this.id,seriesId:this.id,enabled:S,label:{text:(a=(n=(s=u??c)!=null?s:h)!=null?n:p)!=null?a:this.id},marker:{shape:f,fill:x,fillOpacity:N,stroke:M,strokeWidth:D,strokeOpacity:v},legendItemName:u}]:[]}getTooltipHtml(t){var e,i,o,s;const{id:n,processedData:a,ctx:{callbackCache:r},properties:l}=this;if(!a||!this.properties.isValid())return od.EMPTY_TOOLTIP_CONTENT;const{legendItemName:c,idKey:u,idName:h,latitudeKey:p,longitudeKey:g,sizeKey:m,sizeName:y,colorKey:S,colorName:f,labelKey:x,labelName:M,formatter:N,tooltip:v,latitudeName:D,longitudeName:I}=l,{datum:b,fill:T,idValue:_,latValue:A,lonValue:E,sizeValue:O,colorValue:k,labelValue:R,itemId:L}=t,w=(i=qi((e=l.title)!=null?e:c))!=null?i:"",C=[];_!=null&&C.push(qi((h!=null?`${h}: `:"")+_)),k!=null&&C.push(qi((f??S)+": "+k)),O!=null&&C.push(qi((y??m)+": "+O)),R!=null&&(u==null||u!==x)&&C.push(qi((M??x)+": "+R)),A!=null&&E!=null&&C.push(qi(`${Math.abs(A).toFixed(4)}\xB0 ${A>=0?"N":"S"}, ${Math.abs(E).toFixed(4)}\xB0 ${A>=0?"W":"E"}`));const B=C.join("<br>");let z;N&&(z=r.call(N,{seriesId:n,datum:b,latitudeKey:p,longitudeKey:g,fill:T,highlighted:!1}));const V=(s=(o=z?.fill)!=null?o:T)!=null?s:l.fill;return v.toTooltipHtml({title:w,content:B,backgroundColor:V},U({seriesId:n,datum:b,idKey:u,latitudeKey:p,longitudeKey:g,title:w,color:V,colorKey:S,colorName:f,idName:h,itemId:L,labelKey:x,labelName:M,latitudeName:D,longitudeName:I,sizeKey:m,sizeName:y},this.getModuleTooltipParams()))}getFormattedMarkerStyle(t){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{datum:s,point:n}=t,{idKey:a,latitudeKey:r,longitudeKey:l,labelKey:c,sizeKey:u,colorKey:h,fill:p,fillOpacity:g,stroke:m,strokeOpacity:y,formatter:S}=i,f=this.getStrokeWidth(i.strokeWidth),x={seriesId:e,datum:s.datum,itemId:s.itemId,size:n.size,idKey:a,latitudeKey:r,longitudeKey:l,labelKey:c,sizeKey:u,colorKey:h,fill:p,fillOpacity:g,stroke:m,strokeWidth:f,strokeOpacity:y,highlighted:!0};if(S!==void 0){const M=o.call(S,x);if(M?.size!==void 0)return{size:M.size}}return{size:t.point.size}}computeFocusBounds(t){return pM(this,t)}};ks.className="MapMarkerSeries",ks.type="map-marker",d([aM(xe,{optional:!0,property:"topology"})],ks.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:SM,DEFAULT_LABEL_COLOUR:xM,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:vM,singleSeriesPaletteFactory:MM}=Kv,DM={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",instanceConstructor:ks,themeTemplate:X(U({},Eo),{series:{__extends__:SM,maxSize:30,fillOpacity:.5,label:{color:xM}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:n,stroke:a}=MM(t),{properties:r}=s,l=r.get(vM),{fills:c}=e(i);return{fill:n,stroke:a,colorRange:o?[c[0],c[1]]:l}}};import{_Theme as NM}from"ag-charts-community";import{_ModuleSupport as gd,_Scene as IM,_Util as _M}from"ag-charts-community";import{_ModuleSupport as bM}from"ag-charts-community";var{COLOR_STRING:yd,LINE_DASH:TM,OBJECT:AM,POSITIVE_NUMBER:md,RATIO:fd,Validate:ke,SeriesProperties:EM,SeriesTooltip:OM}=bM,ve=class extends EM{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new OM}};d([ke(xe,{optional:!0})],ve.prototype,"topology",2),d([ke(yd)],ve.prototype,"fill",2),d([ke(fd)],ve.prototype,"fillOpacity",2),d([ke(yd)],ve.prototype,"stroke",2),d([ke(fd)],ve.prototype,"strokeOpacity",2),d([ke(md)],ve.prototype,"strokeWidth",2),d([ke(TM)],ve.prototype,"lineDash",2),d([ke(md)],ve.prototype,"lineDashOffset",2),d([ke(AM)],ve.prototype,"tooltip",2);var{createDatumId:LM,Series:kM,SeriesNodePickMode:RM,Validate:CM}=gd,{Selection:PM,Group:wM,PointerEvents:BM}=IM,{Logger:zM}=_M,Rs=class extends kM{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[RM.EXACT_SHAPE_MATCH]}),this.properties=new ve,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new wM({name:"itemGroup"})),this.datumSelection=PM.select(this.itemGroup,()=>this.nodeFactory())}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}nodeFactory(){const t=new $i;return t.renderMode=1,t.lineJoin="round",t.pointerEvents=BM.None,t}processData(){return P(this,null,function*(){const{topology:t}=this;this.topologyBounds=t?.features.reduce((e,i)=>{const o=i.geometry;return o==null?e:Zi(o,e)},void 0),t==null&&zM.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")})}createNodeData(){return P(this,null,function*(){const{id:t,topology:e,scale:i}=this;if(e==null)return;const o=[],s=[];return e.features.forEach((n,a)=>{const{geometry:r}=n,l=r!=null&&i!=null?Ke(r,i):void 0;l!=null&&o.push({series:this,itemId:a,datum:n,index:a,projectedGeometry:l})}),{itemId:t,nodeData:o,labelData:s}})}updateSelections(){return P(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return P(this,null,function*(){var t;const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=(t=this.contextNodeData)!=null?t:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})})}updateDatumSelection(t){return P(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>LM(e.index))})}updateDatumNodes(t){return P(this,null,function*(){const{properties:e}=this,{datumSelection:i}=t,{fill:o,fillOpacity:s,stroke:n,strokeOpacity:a,lineDash:r,lineDashOffset:l}=e,c=this.getStrokeWidth(e.strokeWidth);i.each((u,h)=>{const{projectedGeometry:p}=h;if(p==null){u.visible=!1,u.projectedGeometry=void 0;return}u.visible=!0,u.projectedGeometry=p,u.fill=o,u.fillOpacity=s,u.stroke=n,u.strokeWidth=c,u.strokeOpacity=a,u.lineDash=r,u.lineDashOffset=l})})}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return gd.EMPTY_TOOLTIP_CONTENT}pickFocus(t){}};Rs.className="MapShapeBackgroundSeries",Rs.type="map-shape-background",d([CM(xe,{optional:!0,property:"topology"})],Rs.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:VM,DEFAULT_HIERARCHY_FILLS:FM}=NM,UM={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",instanceConstructor:Rs,themeTemplate:X(U({},Eo),{series:{stroke:VM,strokeWidth:1}}),paletteFactory:({themeTemplateParameters:t})=>{var e;const{properties:i}=t;return{fill:(e=i.get(FM))==null?void 0:e[1]}}};import{_Theme as KM}from"ag-charts-community";import{_ModuleSupport as Ka,_Scale as jM,_Scene as GM,_Util as HM}from"ag-charts-community";function YM(t,{aspectRatio:e,precision:i}){const o=sd(t,i,(l,c,u,h)=>{const p=XM(l,c,u,e),g=p+2*h*e,m=p*Math.SQRT2,y=g*Math.SQRT2;return{distance:m,maxDistance:y}});if(o==null)return;const{x:s,y:n,distance:a}=o,r=a/Math.SQRT2;return{x:s,y:n,maxWidth:r}}function WM(t,e,i,o,s){const[n,a]=t,[r,l]=e,c=1/s,u=r-n,h=l-a,[p,g]=a<=l?t:e,[m,y]=n<=r?t:e,[S,f]=a<=l?e:t,[x,M]=n<=r?e:t;let N=1/0;if(u!==0){const _=h/u;for(let A=0;A<=1;A+=1){const E=A===0?c:-c,O=(_*n-a-E*i+o)/(_-E);if(O>=m&&O<=x){const k=Math.abs(i-O)*2;N=Math.min(N,k)}}}else for(let _=0;_<=1;_+=1){const E=(_===0?c:-c)*(n-i)+o;if(E>=g&&E<=f){const k=Math.abs(o-E)*2*s;N=Math.min(N,k)}}const v=s,D=Math.abs((p-i)/(g-o)),I=Math.abs((S-i)/(f-o));if(f<o&&I<v){const A=Math.abs(o-f)*2*s;N=Math.min(N,A)}else if(g>o&&D<v){const A=Math.abs(o-g)*2*s;N=Math.min(N,A)}const b=Math.abs((y-o)/(m-i)),T=Math.abs((M-o)/(x-i));if(x<i&&T<c){const _=Math.abs(i-x)*2;N=Math.min(N,_)}else if(m>i&&b<c){const _=Math.abs(i-m)*2;N=Math.min(N,_)}return N}function XM(t,e,i,o){let s=!1,n=1/0;for(const a of t){let r=a[a.length-1],[l,c]=r;for(const u of a){const[h,p]=u;p>i!=c>i&&e<(l-h)*(i-p)/(c-p)+h&&(s=!s);const g=WM(r,u,e,i,o);n=Math.min(n,g),r=u,l=h,c=p}}return(s?1:-1)*n}function Cs(t,e,i){i>=e&&(t.maxX=Math.min(t.maxX,i-e)),i<=e&&(t.minX=Math.max(t.minX,i-e))}function QM(t,e,i,o,s,n){const a=s-n/2,r=s+n/2,[l,c]=e,[u,h]=i,p=u-l,g=h-c,[m,y]=l<=u?e:i,[S,f]=l<=u?i:e;if(p!==0){const x=g/p;for(let M=0;M<=1;M+=1){const v=((M===0?a:r)-c)/x+l;v>=m&&v<=S&&Cs(t,o,v)}}else Math.max(a,Math.min(c,h))<=Math.min(r,Math.max(c,h))&&Cs(t,o,l);return S<o&&f>=a&&f<=r?Cs(t,o,S):m>o&&y>=a&&y<=r&&Cs(t,o,m),t}function $M(t,e,i,o){const s={minX:-1/0,maxX:1/0};for(const r of t){let l=r[r.length-1];for(const c of r)QM(s,l,c,e,i,o),l=c}const{minX:n,maxX:a}=s;return Number.isFinite(n)&&Number.isFinite(a)?{x:e+(n+a)/2,width:a-n}:{x:e,width:0}}import{_ModuleSupport as ZM}from"ag-charts-community";var{AND:qM,ARRAY:JM,COLOR_STRING:Sd,COLOR_STRING_ARRAY:tD,FUNCTION:eD,LINE_DASH:iD,OBJECT:xd,POSITIVE_NUMBER:ja,RATIO:vd,STRING:Re,Validate:yt,SeriesProperties:oD,SeriesTooltip:sD}=ZM,gt=class extends oD{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Ao,this.tooltip=new sD}};d([yt(xe,{optional:!0})],gt.prototype,"topology",2),d([yt(Re,{optional:!0})],gt.prototype,"title",2),d([yt(Re,{optional:!0})],gt.prototype,"legendItemName",2),d([yt(Re)],gt.prototype,"idKey",2),d([yt(Re,{optional:!0})],gt.prototype,"idName",2),d([yt(Re)],gt.prototype,"topologyIdKey",2),d([yt(Re,{optional:!0})],gt.prototype,"labelKey",2),d([yt(Re,{optional:!0})],gt.prototype,"labelName",2),d([yt(Re,{optional:!0})],gt.prototype,"colorKey",2),d([yt(Re,{optional:!0})],gt.prototype,"colorName",2),d([yt(qM(tD,JM.restrict({minLength:1})),{optional:!0})],gt.prototype,"colorRange",2),d([yt(Sd)],gt.prototype,"fill",2),d([yt(vd)],gt.prototype,"fillOpacity",2),d([yt(Sd)],gt.prototype,"stroke",2),d([yt(vd)],gt.prototype,"strokeOpacity",2),d([yt(ja)],gt.prototype,"strokeWidth",2),d([yt(iD)],gt.prototype,"lineDash",2),d([yt(ja)],gt.prototype,"lineDashOffset",2),d([yt(ja)],gt.prototype,"padding",2),d([yt(eD,{optional:!0})],gt.prototype,"formatter",2),d([yt(xd)],gt.prototype,"label",2),d([yt(xd)],gt.prototype,"tooltip",2);var{getMissCount:nD,createDatumId:aD,DataModelSeries:rD,SeriesNodePickMode:Md,valueProperty:Ps,Validate:lD}=Ka,{ColorScale:cD}=jM,{Group:Dd,Selection:Ga,Text:Ha,PointerEvents:uD}=GM,{sanitizeHtml:ws,Logger:Nd}=HM,Id=Ka.MercatorScale.fixedScale(),Bs=class extends rD{constructor(t){super({moduleCtx:t,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Md.EXACT_SHAPE_MATCH,Md.NEAREST_NODE]}),this.properties=new gt,this._chartTopology=void 0,this.colorScale=new cD,this.itemGroup=this.contentGroup.appendChild(new Dd({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Dd({name:"itemLabelGroup"})),this.datumSelection=Ga.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Ga.select(this.itemLabelGroup,Ha),this.highlightDatumSelection=Ga.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=uD.None,this.showFocusBox=!1}getNodeData(){var t;return(t=this.contextNodeData)==null?void 0:t.nodeData}get topology(){var t;return(t=this.properties.topology)!=null?t:this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}setChartTopology(t){this._chartTopology=t,this.topology===t&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>{this.onLegendItemClick(t)}),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>{this.onLegendItemDoubleClick(t)}))}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const t=new $i;return t.renderMode=1,t.lineJoin="round",t}processData(t){return P(this,null,function*(){var e;if(this.data==null||!this.properties.isValid())return;const{data:i,topology:o,colorScale:s}=this,{topologyIdKey:n,idKey:a,colorKey:r,labelKey:l,colorRange:c}=this.properties,u=new Map;o?.features.forEach(S=>{var f;const x=(f=S.properties)==null?void 0:f[n];x==null||!Ca(S.geometry,1)||u.set(x,S)});const h=this.colorScale.type,p=(e=this.scale)==null?void 0:e.type,{dataModel:g,processedData:m}=yield this.requestDataModel(t,i,{props:[Ps(a,p,{id:"idValue",includeProperty:!1}),Ps(a,p,{id:"featureValue",includeProperty:!1,processor:()=>S=>u.get(S)}),...l?[Ps(l,"band",{id:"labelValue"})]:[],...r?[Ps(r,h,{id:"colorValue"})]:[]]}),y=g.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=m.data.reduce((S,{values:f})=>{const x=f[y],M=x?.geometry;return M==null?S:Zi(M,S)},void 0),c!=null&&this.isColorScaleValid()){const S=g.resolveProcessedDataIndexById(this,"colorValue");s.domain=m.domain.values[S],s.range=c,s.update()}o==null&&Nd.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue"),s=i.data.length,n=nD(this,i.defs.values[o].missing);return!(s===0||s===n)}getLabelLayout(t,e,i,o,s){if(e==null||o==null)return;const{idKey:n,idName:a,colorKey:r,colorName:l,labelKey:c,labelName:u,padding:h,label:p}=this.properties,g=this.getLabelText(p,{value:e,datum:t,idKey:n,idName:a,colorKey:r,colorName:l,labelKey:c,labelName:u});if(g==null)return;const m=Ha.getTextSize(String(g),i),y=g.split(`
`).length,S=(m.width+2*h)/(y*se.lineHeight(p.fontSize)+2*h);if(s?.geometry===o&&s?.labelText===g&&s?.aspectRatio===S)return s;const f=Ke(o,Id),x=Ts(f);if(x==null)return;const M=YM(x,{aspectRatio:S,precision:.001});if(M==null)return;const{x:N,y:v,maxWidth:D}=M;return{geometry:o,labelText:g,aspectRatio:S,x:N,y:v,maxWidth:D,fixedPolygon:x}}getLabelDatum(t,e){const{scale:i}=this;if(i==null)return;const{padding:o,label:s}=this.properties,{labelText:n,aspectRatio:a,x:r,y:l,maxWidth:c,fixedPolygon:u}=t,h={width:Math.ceil(c*e),height:Math.ceil(c*e/a),meta:r},p=Ea(n,s,{padding:o},(N,v)=>{if(!v)return h;const D=$M(u,r,l,N/e);return{width:D.width*e,height:N,meta:D.x}});if(p==null)return;const[{text:g,fontSize:m,lineHeight:y,width:S},f]=p;if(g===Ha.ellipsis)return;const x=S<h.width?r:f,M=this.scale.convert(Id.invert([x,l]));return{x:M[0],y:M[1],text:g,fontSize:m,lineHeight:y}}createNodeData(){return P(this,null,function*(){const{id:t,dataModel:e,processedData:i,colorScale:o,properties:s,scale:n,previousLabelLayouts:a}=this,{idKey:r,colorKey:l,labelKey:c,label:u,fill:h}=s;if(e==null||i==null)return;const p=n!=null?(n.range[1][0]-n.range[0][0])/n.bounds.width:NaN,g=this.isColorScaleValid(),m=e.resolveProcessedDataIndexById(this,"idValue"),y=e.resolveProcessedDataIndexById(this,"featureValue"),S=c!=null?e.resolveProcessedDataIndexById(this,"labelValue"):void 0,f=l!=null?e.resolveProcessedDataIndexById(this,"colorValue"):void 0,x=u.getFont(),M=new Map;this.previousLabelLayouts=M;const N=[],v=[],D=[];i.data.forEach(({datum:b,values:T})=>{var _;const A=T[m],E=f!=null?T[f]:void 0,O=S!=null?T[S]:void 0,k=(_=T[y])==null?void 0:_.geometry;k==null&&D.push(A);const R=g&&E!=null?o.convert(E):void 0,L=this.getLabelLayout(b,O,x,k,a?.get(A));L!=null&&M.set(A,L);const w=L!=null&&n!=null?this.getLabelDatum(L,p):void 0;w!=null&&v.push(w);const C=k!=null&&n!=null?Ke(k,n):void 0;N.push({series:this,itemId:r,datum:b,idValue:A,colorValue:E,labelValue:O,fill:R??h,projectedGeometry:C})});const I=10;if(D.length>I){const b=D.length-I;D.length=I,D.push(`(+${b} more)`)}return D.length>0&&Nd.warnOnce("some data items do not have matches in the provided topology",D),{itemId:t,nodeData:N,labelData:v}})}updateSelections(){return P(this,null,function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)})}update(){return P(this,null,function*(){var t,e,i,o,s;const{datumSelection:n,labelSelection:a,highlightDatumSelection:r}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();l!=null&&(l.series!==this||l.datum==null)&&(l=void 0);const c=(i=(e=this.contextNodeData)==null?void 0:e.nodeData)!=null?i:[],u=(s=(o=this.contextNodeData)==null?void 0:o.labelData)!=null?s:[];this.datumSelection=yield this.updateDatumSelection({nodeData:c,datumSelection:n}),yield this.updateDatumNodes({datumSelection:n,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelData:u,labelSelection:a}),yield this.updateLabelNodes({labelSelection:a}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:l!=null?[l]:[],datumSelection:r}),yield this.updateDatumNodes({datumSelection:r,isHighlight:!0})})}updateDatumSelection(t){return P(this,null,function*(){return t.datumSelection.update(t.nodeData,void 0,e=>aD(e.idValue))})}updateDatumNodes(t){return P(this,null,function*(){const{id:e,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:s,isHighlight:n}=t,{idKey:a,colorKey:r,labelKey:l,fillOpacity:c,stroke:u,strokeOpacity:h,lineDash:p,lineDashOffset:g,formatter:m}=i,y=n?i.highlightStyle.item:void 0,S=this.getStrokeWidth(i.strokeWidth);s.each((f,x)=>{var M,N,v,D,I,b,T,_,A,E,O,k,R,L;const{projectedGeometry:w}=x;if(w==null){f.visible=!1,f.projectedGeometry=void 0;return}let C;if(m!=null){const B={seriesId:e,datum:x.datum,itemId:x.itemId,idKey:a,colorKey:r,labelKey:l,fill:x.fill,fillOpacity:c,strokeOpacity:h,stroke:u,strokeWidth:S,lineDash:p,lineDashOffset:g,highlighted:n};C=o.call(m,B)}f.visible=!0,f.projectedGeometry=w,f.fill=(N=(M=y?.fill)!=null?M:C?.fill)!=null?N:x.fill,f.fillOpacity=(D=(v=y?.fillOpacity)!=null?v:C?.fillOpacity)!=null?D:c,f.stroke=(b=(I=y?.stroke)!=null?I:C?.stroke)!=null?b:u,f.strokeWidth=(_=(T=y?.strokeWidth)!=null?T:C?.strokeWidth)!=null?_:S,f.strokeOpacity=(E=(A=y?.strokeOpacity)!=null?A:C?.strokeOpacity)!=null?E:h,f.lineDash=(k=(O=y?.lineDash)!=null?O:C?.lineDash)!=null?k:p,f.lineDashOffset=(L=(R=y?.lineDashOffset)!=null?R:C?.lineDashOffset)!=null?L:g})})}updateLabelSelection(t){return P(this,null,function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e)})}updateLabelNodes(t){return P(this,null,function*(){const{labelSelection:e}=t,{color:i,fontStyle:o,fontWeight:s,fontFamily:n}=this.properties.label;e.each((a,{x:r,y:l,text:c,fontSize:u,lineHeight:h})=>{a.visible=!0,a.x=r,a.y=l,a.text=c,a.fill=i,a.fontStyle=o,a.fontWeight=s,a.fontSize=u,a.lineHeight=h,a.fontFamily=n,a.textAlign="center",a.textBaseline="middle"})})}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:o,series:s}=t,n=e!=null&&e===t.legendItemName;(s.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,{legendItemName:n}=this.properties,a=n!=null&&n===t.legendItemName;o.id===this.id||a?this.toggleSeriesItem(i,!0):e&&s===1?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum({x:t,y:e}){let i=1/0,o;return this.datumSelection.each((s,n)=>{const a=s.distanceToPoint(t,e);a<i&&(i=a,o=n)}),o!=null?{datum:o,distance:i}:void 0}datumMidPoint(t){const{_previousDatumMidPoint:e}=this;if(e?.datum===t)return e.point;const i=t.projectedGeometry,o=i!=null?Ts(i):void 0,s=o!=null?Va(o,2):void 0,n=s!=null?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:t,point:n},n}getLegendData(t){var e,i,o,s;const{processedData:n,dataModel:a}=this;if(n==null||a==null)return[];const{title:r,legendItemName:l,idKey:c,idName:u,fill:h,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,colorKey:S,colorName:f,colorRange:x,visible:M}=this.properties;if(t==="gradient"&&S!=null&&x!=null){const N=n.domain.values[a.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:M,seriesId:this.id,colorName:f,colorRange:x,colorDomain:N}]}else return t==="category"?[{legendType:"category",id:this.id,itemId:(i=(e=l??r)!=null?e:u)!=null?i:c,seriesId:this.id,enabled:M,label:{text:(s=(o=l??r)!=null?o:u)!=null?s:c},marker:{fill:h,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y},legendItemName:l}]:[]}getTooltipHtml(t){var e,i,o;const{id:s,processedData:n,ctx:{callbackCache:a},properties:r}=this;if(!n||!r.isValid())return Ka.EMPTY_TOOLTIP_CONTENT;const{legendItemName:l,idKey:c,idName:u,colorKey:h,colorName:p,labelKey:g,labelName:m,stroke:y,strokeWidth:S,formatter:f,tooltip:x}=r,{datum:M,fill:N,idValue:v,colorValue:D,labelValue:I,itemId:b}=t,T=(i=ws((e=r.title)!=null?e:l))!=null?i:"",_=[];_.push(ws((u!=null?`${u}: `:"")+v)),D!=null&&_.push(ws((p??h)+": "+D)),I!=null&&g!==c&&_.push(ws((m??g)+": "+I));const A=_.join("<br>");let E;f&&(E=a.call(f,{seriesId:s,datum:M,idKey:c,fill:N,stroke:y,strokeWidth:this.getStrokeWidth(S),highlighted:!1}));const O=(o=E?.fill)!=null?o:N;return x.toTooltipHtml({title:T,content:A,backgroundColor:O},U({seriesId:s,datum:M,idKey:c,title:T,color:O,colorKey:h,colorName:p,idName:u,itemId:b,labelKey:g,labelName:m},this.getModuleTooltipParams()))}computeFocusBounds(t){return qu(this,t)}};Bs.className="MapShapeSeries",Bs.type="map-shape",d([lD(xe,{optional:!0,property:"topology"})],Bs.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:dD,DEFAULT_INVERTED_LABEL_COLOUR:hD,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:pD,DEFAULT_BACKGROUND_COLOUR:gD,singleSeriesPaletteFactory:yD}=KM,mD={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",instanceConstructor:Bs,themeTemplate:X(U({},Eo),{series:{__extends__:dD,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:hD,fontWeight:"bold",overflowStrategy:"hide"}}}),paletteFactory:t=>{const{takeColors:e,colorsCount:i,userPalette:o,themeTemplateParameters:s}=t,{fill:n}=yD(t),{properties:a}=s,r=a.get(pD),{fills:l}=e(i);return{fill:n,stroke:a.get(gD),colorRange:o?[l[0],l[1]]:r}}};import{_Theme as Ya}from"ag-charts-community";import{_Scene as fD}from"ag-charts-community";import{_ModuleSupport as zs,_Scale as SD,_Scene as xD,_Util as vD}from"ag-charts-community";var{isDefined:MD,ChartAxisDirection:Me,PolarAxis:DD,diff:ND,fixNumericExtent:ID,groupAccumulativeValueProperty:_d,keyProperty:_D,normaliseGroupTo:bD,resetLabelFn:TD,seriesLabelFadeInAnimation:AD,seriesLabelFadeOutAnimation:ED,valueProperty:OD,animationValidation:LD,isFiniteNumber:kD,SeriesNodePickMode:RD,computeSectorFocusBounds:CD}=zs,{BandScale:PD}=SD,{motion:bd}=xD,{isNumber:wD,normalizeAngle360:Td,sanitizeHtml:Ad}=vD,BD=class extends zs.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},Ed=class extends zs.PolarSeries{constructor(t,{animationResetFns:e}){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,pickModes:[RD.EXACT_SHAPE_MATCH],animationResetFns:X(U({},e),{label:TD})}),this.NodeEvent=BD,this.groupScale=new PD,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(t===Me.X)return i.getDomain(this,"angleValue","key",o);{const s=e[Me.Y],n=i.getDomain(this,"radiusValue-end","value",o),a=[n[0]>0?0:n[0],n[1]<0?0:n[1]];return ID(a,s)}}processData(t){return P(this,null,function*(){var e,i;const{angleKey:o,radiusKey:s,normalizedTo:n,visible:a}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(a||r))return;const l=this.getStackId(),c=`${l}-trailing`,u=[];MD(n)&&u.push(bD([l,c],Math.abs(n),"range")),r&&this.processedData&&u.push(ND(this.processedData)),r&&u.push(LD());const h=a||!r?{}:{forceValue:0},p=(e=this.axes[Me.Y])==null?void 0:e.scale.type,g=(i=this.axes[Me.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[_D(o,g,{id:"angleValue"}),OD(s,p,U({id:"radiusValue-raw",invalidValue:null},h)),..._d(s,"normal","current",U({id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:l,separateNegative:!0},h),p),..._d(s,"trailing","current",U({id:"radiusValue-start",invalidValue:null,groupId:c,separateNegative:!0},h),p),...u]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}isRadiusAxisReversed(){var t;return(t=this.axes[Me.Y])==null?void 0:t.isReversed()}maybeRefreshNodeData(){return P(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const t=this.axes[Me.Y];return t instanceof DD?this.radius*t.innerRadiusRatio:0}createNodeData(){return P(this,null,function*(){var t;const{processedData:e,dataModel:i,groupScale:o}=this;if(!e||!i||!this.properties.isValid())return;const s=this.axes[Me.X],n=this.axes[Me.Y],a=s?.scale,r=n?.scale;if(!a||!r)return;const l=i.resolveProcessedDataIndexById(this,"radiusValue-start"),c=i.resolveProcessedDataIndexById(this,"radiusValue-end"),u=i.resolveProcessedDataIndexById(this,"radiusValue-range"),h=i.resolveProcessedDataIndexById(this,"radiusValue-raw");let p=0,g=0;s instanceof Oi&&(p=s.groupPaddingInner,g=s.paddingInner);const y=((t=a.bandwidth)!=null?t:0)*(1-g),{index:S,visibleGroupCount:f}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);o.domain=Array.from({length:f}).map((k,R)=>String(R)),o.range=[-y/2,y/2],o.paddingInner=f>1?p:0;const x=this.isRadiusAxisReversed(),M=x?this.radius:this.getAxisInnerRadius(),N=x?this.getAxisInnerRadius():this.radius,v=N+M,{angleKey:D,radiusKey:I,angleName:b,radiusName:T,label:_}=this.properties,A=(k,R,L,w)=>{const C=this.getLabelText(_,{value:R,datum:k,angleKey:D,radiusKey:I,angleName:b,radiusName:T},B=>kD(B)?B.toFixed(2):String(B));if(C)return{x:L,y:w,text:C,textAlign:"center",textBaseline:"middle"}},E=[],O={itemId:I,nodeData:E,labelData:E};return this.visible?(e.data.forEach((k,R,L)=>{var w;const{datum:C,keys:B,values:z,aggValues:V}=k,F=B[0],K=z[h],$=K>=0&&!Object.is(K,-0),G=z[l],q=z[c],H=(w=V?.[u][$?1:0])!=null?w:0,at=$===x;if(G===void 0||q===void 0)return;let Y,W;if(L.length===1)Y=-.5*Math.PI,W=1.5*Math.PI;else{const $e=a.convert(F);Y=Td($e+o.convert(String(S))),W=Td(Y+o.bandwidth)}const ot=Y+o.bandwidth/2,J=v-r.convert(G),mt=v-r.convert(q),ht=(J+mt)/2,ft=v-r.convert(0),Kt=v-r.convert(H),At=Math.cos(ot)*ht,jt=Math.sin(ot)*ht,st=this.properties.label.enabled?A(C,K,At,jt):void 0,ge=this.getColumnWidth(Y,W);E.push({series:this,datum:C,point:{x:At,y:jt,size:0},midPoint:{x:At,y:jt},label:st,angleValue:F,radiusValue:K,negative:at,innerRadius:J,outerRadius:mt,stackInnerRadius:ft,stackOuterRadius:Kt,startAngle:Y,endAngle:W,axisInnerRadius:M,axisOuterRadius:N,columnWidth:ge,index:R})}),{itemId:I,nodeData:E,labelData:E}):O})}getColumnWidth(t,e){return NaN}update(t){return P(this,arguments,function*({seriesRect:e}){const i=this.checkResize(e);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(t,e){var i,o,s,n,a;let r=[];if(e){const y=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();y?.datum&&y.series===this&&(r=[y])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0,c=(o=l?.fill)!=null?o:this.properties.fill,u=(s=l?.fillOpacity)!=null?s:this.properties.fillOpacity,h=(n=l?.stroke)!=null?n:this.properties.stroke,p=this.properties.strokeOpacity,g=(a=l?.strokeWidth)!=null?a:this.properties.strokeWidth,m=y=>y.angleValue;t.update(r,void 0,m).each((y,S)=>{var f,x,M,N;const v=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:S,fill:c,stroke:h,strokeWidth:g,highlighted:e,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(y,S,e,v),y.fill=(f=v?.fill)!=null?f:c,y.fillOpacity=(x=v?.fillOpacity)!=null?x:u,y.stroke=(M=v?.stroke)!=null?M:h,y.strokeOpacity=p,y.strokeWidth=(N=v?.strokeWidth)!=null?N:g,y.lineDash=this.properties.lineDash,y.lineJoin="round"})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getColumnTransitionFunctions();bd.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),AD(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getColumnTransitionFunctions();bd.fromToMotion(this.id,"datums",e,[t],i),ED(this,"labels",e,this.labelSelection)}getTooltipHtml(t){var e;const{id:i,axes:o,dataModel:s}=this,{angleKey:n,radiusKey:a,angleName:r,radiusName:l,fill:c,stroke:u,strokeWidth:h,formatter:p,tooltip:g}=this.properties,{angleValue:m,radiusValue:y,datum:S,itemId:f}=t,x=o[Me.X],M=o[Me.Y];if(!this.properties.isValid()||!(x&&M&&wD(y))||!s)return zs.EMPTY_TOOLTIP_CONTENT;const N=x.formatDatum(m),v=M.formatDatum(y),D=Ad(l),I=Ad(`${N}: ${v}`),{fill:b}=(e=p&&this.ctx.callbackCache.call(p,{seriesId:i,datum:S,fill:c,stroke:u,strokeWidth:h,highlighted:!1,angleKey:n,radiusKey:a}))!=null?e:{fill:c};return g.toTooltipHtml({title:D,backgroundColor:c,content:I},{seriesId:i,datum:S,color:b,title:D,angleKey:n,radiusKey:a,angleName:r,radiusName:l,angleValue:m,itemId:f,radiusValue:y})}pickNodeClosestDatum(t){return this.pickNodeNearestDistantObject(t,this.itemSelection.nodes())}getLegendData(t){var e;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{radiusKey:i,radiusName:o,fill:s,stroke:n,fillOpacity:a,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:o??i},marker:{fill:s??"rgba(0, 0, 0, 0)",stroke:n??"rgba(0, 0, 0, 0)",fillOpacity:a??1,strokeOpacity:r??1,strokeWidth:l}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,a=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,a)}computeLabelsBBox(){return null}computeFocusBounds(t){return CD(this,t)}};import{_ModuleSupport as zD}from"ag-charts-community";import{_ModuleSupport as VD,_Scene as FD}from"ag-charts-community";var{Label:UD}=FD,{SeriesProperties:KD,SeriesTooltip:jD,Validate:wt,COLOR_STRING:Od,DEGREE:GD,FUNCTION:HD,LINE_DASH:YD,NUMBER:WD,OBJECT:Ld,POSITIVE_NUMBER:kd,RATIO:Rd,STRING:Ro}=VD,bt=class extends KD{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new UD,this.tooltip=new jD}};d([wt(Ro)],bt.prototype,"angleKey",2),d([wt(Ro,{optional:!0})],bt.prototype,"angleName",2),d([wt(Ro)],bt.prototype,"radiusKey",2),d([wt(Ro,{optional:!0})],bt.prototype,"radiusName",2),d([wt(Od)],bt.prototype,"fill",2),d([wt(Rd)],bt.prototype,"fillOpacity",2),d([wt(Od)],bt.prototype,"stroke",2),d([wt(kd)],bt.prototype,"strokeWidth",2),d([wt(Rd)],bt.prototype,"strokeOpacity",2),d([wt(YD)],bt.prototype,"lineDash",2),d([wt(kd)],bt.prototype,"lineDashOffset",2),d([wt(HD,{optional:!0})],bt.prototype,"formatter",2),d([wt(GD)],bt.prototype,"rotation",2),d([wt(Ro,{optional:!0})],bt.prototype,"stackGroup",2),d([wt(WD,{optional:!0})],bt.prototype,"normalizedTo",2),d([wt(Ld)],bt.prototype,"label",2),d([wt(Ld)],bt.prototype,"tooltip",2);var{Validate:XD,POSITIVE_NUMBER:QD}=zD,Cd=class extends bt{constructor(){super(...arguments),this.cornerRadius=0}};d([XD(QD)],Cd.prototype,"cornerRadius",2);import{_Scene as $D}from"ag-charts-community";import{_Scene as ZD}from"ag-charts-community";var{motion:qD}=ZD;function Pd(){const t={startAngle:new Map,endAngle:new Map},e=["startAngle","endAngle"],i=(a,r,l)=>{e.forEach(c=>{var u,h;const p=t[c];let g=(l==="removed"||l==="updated"?a:r)[c],m=(l==="removed"?a:r)[c];isNaN(m)&&(m=(h=(u=a.previousDatum)==null?void 0:u[c])!=null?h:NaN);const y=g-m;Math.abs(y)>Math.PI&&(g-=Math.sign(y)*2*Math.PI),p.set(r,{from:g,to:m})})},o=(a,r)=>({startAngle:t.startAngle.get(a)[r],endAngle:t.endAngle.get(a)[r]});return{calculate:i,from:a=>o(a,"from"),to:a=>o(a,"to")}}function wd(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.startAngle)||isNaN(t.previousDatum.endAngle))return"added";if(isNaN(e.startAngle)||isNaN(e.endAngle))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function JD(t){const e=Pd();return{toFn:(s,n,a)=>{const{startAngle:r,endAngle:l}=e.to(n);let c,u,h,p,g;return a==="removed"?(c=s.innerRadius,u=s.innerRadius,h=s.columnWidth,p=s.axisInnerRadius,g=s.axisOuterRadius):(c=isNaN(n.innerRadius)?t:n.innerRadius,u=isNaN(n.outerRadius)?t:n.outerRadius,h=isNaN(n.columnWidth)?s.columnWidth:n.columnWidth,p=n.axisInnerRadius,g=n.axisOuterRadius),{innerRadius:c,outerRadius:u,columnWidth:h,axisInnerRadius:p,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(s,n,a)=>{a=wd(s,n,a),e.calculate(s,n,a);const{startAngle:r,endAngle:l}=e.from(n);let c,u,h,p,g;a==="removed"||a==="updated"?(c=s.innerRadius,u=s.outerRadius,h=s.columnWidth,p=s.axisInnerRadius,g=s.axisOuterRadius):(c=t,u=t,h=n.columnWidth,p=n.axisInnerRadius,g=n.axisOuterRadius);const m=qD.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{innerRadius:c,outerRadius:u,columnWidth:h,axisInnerRadius:p,axisOuterRadius:g,startAngle:r,endAngle:l,phase:m}}}}function tN(t,{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:n,startAngle:a,endAngle:r}){return{innerRadius:e,outerRadius:i,columnWidth:o,axisInnerRadius:s,axisOuterRadius:n,startAngle:a,endAngle:r}}var{SectorBox:Vs,motion:eN}=$D;function Wa(t){const{negative:e,innerRadius:i,outerRadius:o,stackInnerRadius:s,stackOuterRadius:n}=t;return{innerRadius:e?n:s,outerRadius:e?s:n,clipInnerRadius:e?o:i,clipOuterRadius:e?i:o}}function iN(t){const e=Pd();return{toFn:(s,n,a)=>{const{startAngle:r,endAngle:l}=e.to(n);let c,u,h;if(a==="removed")c=t,u=t,h=new Vs(r,l,c,u);else{let p,g;({innerRadius:c,outerRadius:u,clipInnerRadius:p,clipOuterRadius:g}=Wa(n)),isNaN(c)&&(c=t),isNaN(u)&&(u=t),isNaN(p)&&(p=t),isNaN(g)&&(g=t),h=new Vs(r,l,p,g)}return{innerRadius:c,outerRadius:u,startAngle:r,endAngle:l,clipSector:h}},fromFn:(s,n,a)=>{a=wd(s,n,a),e.calculate(s,n,a);const{startAngle:r,endAngle:l}=e.from(n);let c,u,h;a==="removed"||a==="updated"?(c=s.innerRadius,u=s.outerRadius,h=s.clipSector):(c=t,u=t),h??(h=new Vs(r,l,c,u));const p=eN.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{innerRadius:c,outerRadius:u,startAngle:r,endAngle:l,clipSector:h,phase:p}}}}function oN(t,e){const{startAngle:i,endAngle:o}=e,{innerRadius:s,outerRadius:n,clipInnerRadius:a,clipOuterRadius:r}=Wa(e),l=new Vs(i,o,a,r);return{innerRadius:s,outerRadius:n,startAngle:i,endAngle:o,clipSector:l}}var{Sector:sN,SectorBox:nN}=fD,Xa=class extends Ed{constructor(t){super(t,{animationResetFns:{item:oN}}),this.properties=new Cd}getStackId(){var t,e;return`nightingale-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-yValues`}nodeFactory(){return new sN}updateItemPath(t,e,i,o){const{negative:s}=e;if(t.centerX=0,t.centerY=0,t.startOuterCornerRadius=s?0:this.properties.cornerRadius,t.endOuterCornerRadius=s?0:this.properties.cornerRadius,t.startInnerCornerRadius=s?this.properties.cornerRadius:0,t.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:n,endAngle:a}=e,{innerRadius:r,outerRadius:l,clipInnerRadius:c,clipOuterRadius:u}=Wa(e);t.innerRadius=r,t.outerRadius=l,t.startAngle=n,t.endAngle=a,t.clipSector=new nN(n,a,c,u)}}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return iN(t)}};Xa.className="NightingaleSeries",Xa.type="nightingale";import{_Theme as pi}from"ag-charts-community";var aN={series:{__extends__:pi.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:pi.DEFAULT_FONT_FAMILY,color:pi.DEFAULT_LABEL_COLOUR}},axes:{[pi.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:pi.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[pi.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:pi.POLAR_AXIS_SHAPE.CIRCLE}}},rN={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:Xa,defaultAxes:[{type:Ya.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:Ya.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:aN,paletteFactory({takeColors:t,userPalette:e}){const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:e?o:Ya.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0};import{_Theme as Co}from"ag-charts-community";import{_ModuleSupport as lN}from"ag-charts-community";import{_Scene as gi}from"ag-charts-community";var cN=class extends Le{constructor(){super(),this.append([new gi.Line({tag:0}),new gi.Line({tag:1}),new gi.Line({tag:2})])}updateCoordinates(){const{x:t,y:e,yBottom:i,yHigh:o,yLow:s,width:n,height:a,datum:{itemId:r}}=this,l=gi.Selection.select(this,gi.Rect),[c]=l.selectByTag(0),[u]=l.selectByTag(1),[h]=l.selectByTag(2);if(n===0||a===0){c.visible=!1,u.visible=!1,h.visible=!1;return}c.visible=!0,u.visible=!0,h.visible=!0;const p=n/2;c.setProperties({x1:Math.floor(t+p),x2:Math.floor(t+p),y1:o,y2:s});const g=r==="up",m=g?i:e,y=g?e:i;u.setProperties({x1:Math.floor(t),x2:Math.floor(t+p),y:Math.round(m)}),h.setProperties({x1:Math.floor(t+p),x2:Math.floor(t+n),y:Math.round(y)})}updateDatumStyles(t,e){const i=gi.Selection.select(this,gi.Rect),[o]=i.selectByTag(0),[s]=i.selectByTag(1),[n]=i.selectByTag(2);o.setProperties(e),s.setProperties(e),n.setProperties(e)}};import{_ModuleSupport as uN}from"ag-charts-community";var{BaseProperties:Bd,Validate:Ge,COLOR_STRING:dN,FUNCTION:hN,LINE_DASH:pN,OBJECT:zd,POSITIVE_NUMBER:Vd,RATIO:gN}=uN,He=class extends Bd{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};d([Ge(dN)],He.prototype,"stroke",2),d([Ge(Vd)],He.prototype,"strokeWidth",2),d([Ge(gN)],He.prototype,"strokeOpacity",2),d([Ge(pN)],He.prototype,"lineDash",2),d([Ge(Vd)],He.prototype,"lineDashOffset",2),d([Ge(hN,{optional:!0})],He.prototype,"formatter",2);var Qa=class extends Bd{constructor(){super(...arguments),this.up=new He,this.down=new He}};d([Ge(zd)],Qa.prototype,"up",2),d([Ge(zd)],Qa.prototype,"down",2);var yN=class extends Vt{constructor(){super(new Qa)}},{mergeDefaults:mN}=lN,$a=class extends Lu{constructor(t){super(t,Nu),this.properties=new yN}createNodeData(){return P(this,null,function*(){const t=this.createBaseNodeData();if(!t)return;const e=t.nodeData.map(i=>{const{stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r}=this.getItemConfig(i.itemId);return X(U({},i),{stroke:o,strokeWidth:s,strokeOpacity:n,lineDash:a,lineDashOffset:r})});return X(U({},t),{nodeData:e})})}nodeFactory(){return new cN}getFormatterParams(t){return t}getSeriesStyles(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:n}=t;return{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:n}}getActiveStyles(t,e){const i=this.getFormattedStyles(t,e);return e?mN(this.properties.highlightStyle.item,i):i}computeFocusBounds(t){return _u(this,t)}};$a.className="ohlc",$a.type="ohlc";import{_Theme as Za}from"ag-charts-community";var fN={series:{__extends__:Za.EXTENDS_SERIES_DEFAULTS,direction:"vertical"},animation:{enabled:!1},axes:{[Za.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[Za.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},SN={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",instanceConstructor:$a,defaultAxes:[{type:Co.CARTESIAN_AXIS_TYPE.NUMBER,position:Co.POSITION.LEFT},{type:Co.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:Co.POSITION.BOTTOM}],themeTemplate:fN,groupable:!1,paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:o})=>{const{strokes:[s]}=t(e),{strokes:n}=o.properties.get(Co.DEFAULT_COLOURS);return{item:{up:{stroke:i?s:n.GREEN},down:{stroke:i?s:n.RED}}}}};import{_ModuleSupport as xN,_Theme as Fd}from"ag-charts-community";import{_ModuleSupport as Ud,_Theme as Fs}from"ag-charts-community";var Kd={series:{__extends__:Fs.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:Fs.DEFAULT_FONT_FAMILY,color:Fs.DEFAULT_LABEL_COLOUR},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[Fs.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},vN=Ud.mergeDefaults({series:{strokeWidth:2}},Kd),MN=Ud.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Kd);import{_ModuleSupport as jd,_Scene as DN}from"ag-charts-community";import{_ModuleSupport as Us,_Scene as NN,_Util as qa}from"ag-charts-community";import{_ModuleSupport as IN,_Scene as _N}from"ag-charts-community";var{Label:bN}=_N,{SeriesMarker:TN,SeriesProperties:AN,SeriesTooltip:EN,Validate:Ht,BOOLEAN:ON,COLOR_STRING:LN,DEGREE:kN,FUNCTION:RN,LINE_DASH:CN,OBJECT:Ja,POSITIVE_NUMBER:Gd,RATIO:PN,STRING:Ks}=IN,Bt=class extends AN{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new TN,this.label=new bN,this.tooltip=new EN,this.connectMissingData=!1}};d([Ht(Ks)],Bt.prototype,"angleKey",2),d([Ht(Ks)],Bt.prototype,"radiusKey",2),d([Ht(Ks,{optional:!0})],Bt.prototype,"angleName",2),d([Ht(Ks,{optional:!0})],Bt.prototype,"radiusName",2),d([Ht(LN)],Bt.prototype,"stroke",2),d([Ht(Gd)],Bt.prototype,"strokeWidth",2),d([Ht(PN)],Bt.prototype,"strokeOpacity",2),d([Ht(CN)],Bt.prototype,"lineDash",2),d([Ht(Gd)],Bt.prototype,"lineDashOffset",2),d([Ht(RN,{optional:!0})],Bt.prototype,"formatter",2),d([Ht(kN)],Bt.prototype,"rotation",2),d([Ht(Ja)],Bt.prototype,"marker",2),d([Ht(Ja)],Bt.prototype,"label",2),d([Ht(Ja)],Bt.prototype,"tooltip",2),d([Ht(ON)],Bt.prototype,"connectMissingData",2);var{ChartAxisDirection:Ce,PolarAxis:wN,SeriesNodePickMode:Hd,valueProperty:Yd,fixNumericExtent:BN,seriesLabelFadeInAnimation:zN,markerFadeInAnimation:VN,resetMarkerFn:FN,animationValidation:UN,isFiniteNumber:KN,computeMarkerFocusBounds:jN}=Us,{BBox:GN,Group:HN,Path:YN,PointerEvents:WN,Selection:Wd,Text:XN,getMarker:QN}=NN,{extent:$N,isNumberEqual:Xd,sanitizeHtml:Qd,toFixed:$d}=qa,ZN=class extends Us.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},tr=class extends Us.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,pickModes:[Hd.NEAREST_NODE,Hd.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:FN}}),this.properties=new Bt,this.NodeEvent=ZN,this.resetInvalidToZero=!1,this.seriesItemEnabled=[],this.circleCache={r:0,cx:0,cy:0};const e=new HN;this.contentGroup.append(e),this.lineSelection=Wd.select(e,YN),e.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:t}=this.properties.marker,e=QN(t);return new e}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];if(t===Ce.X)return e.getDomain(this,"angleValue","value",i);{const o=e.getDomain(this,"radiusValue","value",i),s=$N(o.length===0?o:[0].concat(o));return BN(s)}}processData(t){return P(this,null,function*(){var e,i;if(!this.properties.isValid())return;const{angleKey:o,radiusKey:s}=this.properties,n=[];this.ctx.animationManager.isSkipped()||n.push(UN());const a=(e=this.axes[Ce.Y])==null?void 0:e.scale.type,r=(i=this.axes[Ce.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[Yd(o,r,{id:"angleValue"}),Yd(s,a,{id:"radiusValue",invalidValue:void 0}),...n]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}getAxisInnerRadius(){const t=this.axes[Ce.Y];return t instanceof wN?this.radius*t.innerRadiusRatio:0}maybeRefreshNodeData(){return P(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}createNodeData(){return P(this,null,function*(){var t,e;const{processedData:i,dataModel:o}=this;if(!i||!o||!this.properties.isValid())return;const{angleKey:s,radiusKey:n,angleName:a,radiusName:r,marker:l,label:c}=this.properties,u=(t=this.axes[Ce.X])==null?void 0:t.scale,h=(e=this.axes[Ce.Y])==null?void 0:e.scale;if(!u||!h)return;const p=o.resolveProcessedDataIndexById(this,"angleValue"),g=o.resolveProcessedDataIndexById(this,"radiusValue"),m=this.getAxisInnerRadius(),{seriesItemEnabled:y}=this;y.length=0;const S=i.data.map(f=>{const{datum:x,values:M}=f,N=M[p],v=M[g],D=u.convert(N),I=this.radius+m-h.convert(v);qa.isNumber(D)&&qa.isNumber(I)?y.push(!0):y.push(!1);const b=Math.cos(D),T=Math.sin(D),_=b*I,A=T*I;let E;if(c.enabled){const O=this.getLabelText(c,{value:v,datum:x,angleKey:s,radiusKey:n,angleName:a,radiusName:r},k=>KN(k)?k.toFixed(2):String(k));if(O){let k="right";Xd(b,0)?k="center":b>0&&(k="left");let R="bottom";Xd(T,0)?R="middle":T>0&&(R="top"),E={x:_+b*l.size,y:A+T*l.size,text:O,textAlign:k,textBaseline:R}}}return{series:this,datum:x,point:{x:_,y:A,size:l.size},midPoint:{x:_,y:A},label:E,angleValue:N,radiusValue:v}});return{itemId:n,nodeData:S,labelData:S}})}update(t){return P(this,arguments,function*({seriesRect:e}){var i,o;const s=this.checkResize(e),n=!this.ctx.animationManager.isSkipped(),{series:a}=(o=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight())!=null?o:{};this.highlightGroup.visible=(n||this.visible)&&a===this,yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),s&&this.animationState.transition("resize"),this.animationState.transition("update")})}updatePathSelections(){const t=this.visible?[!0]:[];this.lineSelection.update(t)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Wd.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(t){var e;return(e=t?.fill)!=null?e:this.properties.marker.fill}updateMarkers(t,e){var i;const{angleKey:o,radiusKey:s,marker:n,visible:a}=this.properties;let r=[];if(a&&n.shape&&n.enabled)if(e){const c=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();c?.datum&&(r=[c])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0;t.update(r).each((c,u)=>{var h,p,g,m,y,S,f,x,M,N,v,D,I;const b=this.getMarkerFill(l),T=(p=(h=l?.stroke)!=null?h:n.stroke)!=null?p:this.properties.stroke,_=(y=(m=(g=l?.strokeWidth)!=null?g:n.strokeWidth)!=null?m:this.properties.strokeWidth)!=null?y:1,A=n.formatter?this.ctx.callbackCache.call(n.formatter,{datum:u.datum,angleKey:o,radiusKey:s,fill:b,stroke:T,strokeWidth:_,size:n.size,highlighted:e,seriesId:this.id}):void 0;c.fill=(S=A?.fill)!=null?S:b,c.stroke=(f=A?.stroke)!=null?f:T,c.strokeWidth=(x=A?.strokeWidth)!=null?x:_,c.fillOpacity=(N=(M=l?.fillOpacity)!=null?M:n.fillOpacity)!=null?N:1,c.strokeOpacity=(D=(v=n.strokeOpacity)!=null?v:this.properties.strokeOpacity)!=null?D:1,c.size=(I=A?.size)!=null?I:n.size;const{x:E,y:O}=u.point;c.translationX=E,c.translationY=O,c.visible=a&&c.size>0&&!isNaN(E)&&!isNaN(O)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getTooltipHtml(t){var e;if(!this.properties.isValid())return Us.EMPTY_TOOLTIP_CONTENT;const{id:i}=this,{angleKey:o,radiusKey:s,angleName:n,radiusName:a,marker:r,tooltip:l}=this.properties,{datum:c,angleValue:u,radiusValue:h,itemId:p}=t,g=typeof u=="number"?$d(u):String(u),m=typeof h=="number"?$d(h):String(h),y=Qd(a),S=Qd(`${g}: ${m}`),{formatter:f,fill:x,stroke:M,strokeWidth:N,size:v}=r,D=N??this.properties.strokeWidth,{fill:I}=(e=f&&this.ctx.callbackCache.call(f,{datum:c,angleKey:o,radiusKey:s,fill:x,stroke:M,strokeWidth:D,size:v,highlighted:!1,seriesId:i}))!=null?e:{fill:x};return l.toTooltipHtml({title:y,content:S,backgroundColor:I},{datum:c,angleKey:o,angleName:n,radiusKey:s,radiusName:a,title:y,color:I,seriesId:i,itemId:p})}getLegendData(t){var e,i,o,s,n,a,r,l,c,u;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{radiusKey:h,radiusName:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:S,visible:f,marker:x}=this.properties;return[{legendType:"category",id:this.id,itemId:h,seriesId:this.id,enabled:f,label:{text:p??h},marker:{shape:x.shape,fill:(s=(o=(i=this.getMarkerFill())!=null?i:x.stroke)!=null?o:g)!=null?s:"rgba(0, 0, 0, 0)",stroke:(a=(n=x.stroke)!=null?n:g)!=null?a:"rgba(0, 0, 0, 0)",fillOpacity:(r=x.fillOpacity)!=null?r:1,strokeOpacity:(c=(l=x.strokeOpacity)!=null?l:y)!=null?c:1,strokeWidth:(u=x.strokeWidth)!=null?u:0,enabled:x.enabled||m<=0},line:{stroke:g,strokeOpacity:y,strokeWidth:m,lineDash:S}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,a=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,a)}pickNodeClosestDatum(t){var e,i;const{x:o,y:s}=t,{rootGroup:n,nodeData:a,centerX:r,centerY:l}=this,c=n.transformPoint(o,s),u=this.radius;if(Math.sqrt(Mt(o-r,2)+Mt(s-l,2))>u+this.properties.marker.size)return;let p=1/0,g;for(const m of a){const{point:{x:y=NaN,y:S=NaN}={}}=m;if(isNaN(y)||isNaN(S))continue;const f=Math.sqrt(Mt(c.x-y-r,2)+Mt(c.y-S-l,2));f<p&&(p=f,g=m)}if(g){const m=Math.max(p-((i=(e=g.point)==null?void 0:e.size)!=null?i:0),0);return{datum:g,distance:m}}}computeLabelsBBox(){return P(this,null,function*(){const{label:t}=this.properties;yield this.maybeRefreshNodeData();const e=[],i=new XN;return this.nodeData.forEach(o=>{if(!t.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(t),i.setAlign(o.label);const s=i.computeBBox();e.push(s)}),e.length===0?null:GN.merge(e)})}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const t=this.getLineNode();t.fill=void 0,t.lineJoin="round",t.lineCap="round",t.pointerEvents=WN.None,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:t,resetInvalidToZero:e}=this,{connectMissingData:i}=this.properties;if(t.length===0)return[];const o=this.axes[Ce.Y],s=this.axes[Ce.X],n=s?.isReversed(),r=o?.isReversed()&&!n?[...t].reverse():t,l=[];let c=!1,u;return r.forEach((h,p)=>{let{x:g,y:m}=h.point;const y=isNaN(g)||isNaN(m);y||(u??(u=h)),y&&!i&&(g=0,m=0);const S=p===0||!e&&!i&&(y||c);l.push({x:g,y:m,moveTo:S}),c=y}),u!==void 0&&l.push({x:u.point.x,y:u.point.y,moveTo:!1}),l}animateSinglePath(t,e,i){const{path:o}=t;o.clear(!0);const s=this.getAxisInnerRadius(),n=this.axes[Ce.Y],r=n?.isReversed()?this.radius+s-n?.scale.convert(0):s;e.forEach(l=>{const{x:c,y:u,arc:h,radius:p=0,startAngle:g=0,endAngle:m=0,moveTo:y}=l,S=Math.atan2(u,c),f=r*Math.cos(S),x=r*Math.sin(S),M=i,N=f*(1-M)+c*M,v=x*(1-M)+u*M;h?o.arc(c,u,p,g,m):y?o.moveTo(N,v):o.lineTo(N,v)}),t.checkPathDirty()}animatePaths(t){const e=this.getLinePoints();this.animateSinglePath(this.getLineNode(),e,t)}animateEmptyUpdateReady(){const{itemSelection:t,labelSelection:e}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:o=>this.animatePaths(o),onStop:()=>this.animatePaths(1)}),VN(this,i,"added",t),zN(this,"labels",i,e)}animateWaitingUpdateReady(t){super.animateWaitingUpdateReady(t),this.resetPaths()}animateReadyResize(t){super.animateReadyResize(t),this.resetPaths()}resetPaths(){const t=this.getLineNode();if(t){const{path:e}=t,i=this.getLinePoints();t.fill=void 0,t.stroke=this.properties.stroke,t.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,e.clear(!0),i.forEach(({x:o,y:s,moveTo:n})=>{n?e.moveTo(o,s):e.lineTo(o,s)}),t.checkPathDirty()}}getFormattedMarkerStyle(t){const{angleKey:e,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,angleKey:e,radiusKey:i,highlighted:!0})}computeFocusBounds(t){return jN(this,t)}};tr.className="RadarSeries";import{_ModuleSupport as qN}from"ag-charts-community";var{RATIO:JN,COLOR_STRING:tI,Validate:Zd}=qN,er=class extends Bt{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};d([Zd(tI)],er.prototype,"fill",2),d([Zd(JN)],er.prototype,"fillOpacity",2);var{Group:eI,Path:iI,PointerEvents:oI,Selection:sI}=DN,{ChartAxisDirection:qd}=jd,ir=class extends tr{constructor(t){super(t),this.properties=new er,this.resetInvalidToZero=!0;const e=new eI;e.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(e),this.areaSelection=sI.select(e,iI)}updatePathSelections(){const t=this.visible?[!0]:[];this.areaSelection.update(t),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(t){var e,i;return(i=(e=t?.fill)!=null?e:this.properties.marker.fill)!=null?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const t=this.getAreaNode();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.pointerEvents=oI.None,t.stroke=void 0}animatePaths(t){super.animatePaths(t),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),t)}getAreaPoints(){var t,e;const i=this.getLinePoints(),o=l=>{const c=this.axes[l];return c instanceof jd.PolarAxis?c:void 0},s=o(qd.Y),n=o(qd.X);if(!s?.isReversed())return i;const{points:r=[]}=(e=(t=n?.getAxisLinePoints)==null?void 0:t.call(n))!=null?e:{};return i.concat(...r)}resetPaths(){super.resetPaths();const t=this.getAreaNode();if(t){const{path:e}=t,i=this.getAreaPoints();t.fill=this.properties.fill,t.fillOpacity=this.properties.fillOpacity,t.stroke=void 0,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.lineJoin=t.lineCap="round",e.clear(!0),i.forEach(({x:o,y:s,moveTo:n,arc:a,radius:r=0,startAngle:l=0,endAngle:c=0})=>{a?e.arc(o,s,r,l,c):n?e.moveTo(o,s):e.lineTo(o,s)}),e.closePath(),t.checkPathDirty()}}};ir.className="RadarAreaSeries",ir.type="radar-area";var{markerPaletteFactory:nI}=xN,aI={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:ir,defaultAxes:[{type:Fd.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:Fd.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:MN,paletteFactory:t=>{const{marker:e}=nI(t);return{stroke:e.stroke,fill:e.fill,marker:e}}};import{_Theme as Jd}from"ag-charts-community";var or=class extends tr{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};or.className="RadarLineSeries",or.type="radar-line";var rI={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:or,defaultAxes:[{type:Jd.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:Jd.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:vN,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{stroke:e,marker:{fill:e,stroke:i}}}};import{_Theme as th}from"ag-charts-community";import{_ModuleSupport as js,_Scale as lI,_Scene as cI,_Util as uI}from"ag-charts-community";import{_ModuleSupport as dI,_Scene as hI}from"ag-charts-community";var{Label:pI}=hI,{SeriesProperties:gI,SeriesTooltip:yI,Validate:kt,COLOR_STRING:eh,DEGREE:mI,FUNCTION:fI,LINE_DASH:SI,NUMBER:xI,OBJECT:ih,POSITIVE_NUMBER:sr,RATIO:oh,STRING:Po}=dI,Tt=class extends gI{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new pI,this.tooltip=new yI}};d([kt(Po)],Tt.prototype,"angleKey",2),d([kt(Po)],Tt.prototype,"radiusKey",2),d([kt(Po,{optional:!0})],Tt.prototype,"angleName",2),d([kt(Po,{optional:!0})],Tt.prototype,"radiusName",2),d([kt(eh)],Tt.prototype,"fill",2),d([kt(oh)],Tt.prototype,"fillOpacity",2),d([kt(eh)],Tt.prototype,"stroke",2),d([kt(sr)],Tt.prototype,"strokeWidth",2),d([kt(oh)],Tt.prototype,"strokeOpacity",2),d([kt(SI)],Tt.prototype,"lineDash",2),d([kt(sr)],Tt.prototype,"lineDashOffset",2),d([kt(sr)],Tt.prototype,"cornerRadius",2),d([kt(fI,{optional:!0})],Tt.prototype,"formatter",2),d([kt(mI)],Tt.prototype,"rotation",2),d([kt(Po,{optional:!0})],Tt.prototype,"stackGroup",2),d([kt(xI,{optional:!0})],Tt.prototype,"normalizedTo",2),d([kt(ih)],Tt.prototype,"label",2),d([kt(ih)],Tt.prototype,"tooltip",2);import{_Scene as vI}from"ag-charts-community";var{SectorBox:sh,motion:MI}=vI;function DI(t,e,i){if(i==="updated"){if(t.previousDatum==null||isNaN(t.previousDatum.innerRadius)||isNaN(t.previousDatum.outerRadius))return"added";if(isNaN(e.innerRadius)||isNaN(e.outerRadius))return"removed"}return i==="added"&&t.previousDatum!=null?"updated":i}function nh(t){return{toFn:(o,s,n)=>{let a,r,l,c,u;return n==="removed"?(a=t,r=t,l=s.innerRadius,c=s.outerRadius,u=new sh(a,r,l,c)):(a=s.startAngle,r=s.endAngle,l=isNaN(s.innerRadius)?o.innerRadius:s.innerRadius,c=isNaN(s.outerRadius)?o.outerRadius:s.outerRadius,u=s.clipSector),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:c,clipSector:u}},fromFn:(o,s,n)=>{n=DI(o,s,n);let a,r,l,c,u;n==="removed"||n==="updated"?(a=o.startAngle,r=o.endAngle,l=o.innerRadius,c=o.outerRadius,u=o.clipSector):(a=t,r=t,l=s.innerRadius,c=s.outerRadius),u??(u=new sh(a,r,l,c));const h=MI.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{startAngle:a,endAngle:r,innerRadius:l,outerRadius:c,clipSector:u,phase:h}}}}function NI(t,e){return{centerX:0,centerY:0,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clipSector:e.clipSector}}var{ChartAxisDirection:De,PolarAxis:II,diff:_I,isDefined:bI,groupAccumulativeValueProperty:ah,keyProperty:TI,normaliseGroupTo:AI,valueProperty:EI,fixNumericExtent:OI,resetLabelFn:LI,seriesLabelFadeInAnimation:kI,seriesLabelFadeOutAnimation:RI,animationValidation:CI,isFiniteNumber:PI,computeSectorFocusBounds:wI}=js,{BandScale:BI}=lI,{Sector:zI,SectorBox:VI,motion:rh}=cI,{angleBetween:FI,isNumber:UI,sanitizeHtml:lh}=uI,KI=class extends js.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},nr=class extends js.PolarSeries{constructor(t){super({moduleCtx:t,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:NI,label:LI}}),this.properties=new Tt,this.NodeEvent=KI,this.groupScale=new BI,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new zI}addChartEventListeners(){var t,e;this.destroyFns.push((t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(t===De.X){const s=e[De.X],n=i.getDomain(this,"angleValue-end","value",o),a=[n[0]>0?0:n[0],n[1]<0?0:n[1]];return OI(a,s)}else return i.getDomain(this,"radiusValue","key",o)}processData(t){return P(this,null,function*(){var e,i;const{angleKey:o,radiusKey:s,normalizedTo:n,visible:a}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!(a||r))return;const l=this.getStackId(),c=`${l}-trailing`,u=[];bI(n)&&u.push(AI([l,c],Math.abs(n),"range")),r&&(this.processedData&&u.push(_I(this.processedData)),u.push(CI()));const h=this.visible||!r?{}:{forceValue:0},p=(e=this.axes[De.Y])==null?void 0:e.scale.type,g=(i=this.axes[De.X])==null?void 0:i.scale.type;yield this.requestDataModel(t,this.data,{props:[TI(s,p,{id:"radiusValue"}),EI(o,g,U({id:"angleValue-raw",invalidValue:null},h)),...ah(o,"normal","current",U({id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:l,separateNegative:!0},h),g),...ah(o,"trailing","current",U({id:"angleValue-start",invalidValue:null,groupId:c,separateNegative:!0},h),g),...u]}),this.animationState.transition("updateData")})}didCircleChange(){const t=this.radius,e=this.centerX,i=this.centerY,o=this.circleCache;return t===o.r&&e===o.cx&&i===o.cy?!1:(this.circleCache={r:t,cx:e,cy:i},!0)}maybeRefreshNodeData(){return P(this,null,function*(){var t;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:i=[]}=(t=yield this.createNodeData())!=null?t:{};this.nodeData=i,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const t=this.axes[De.Y];return t instanceof II?this.radius*t.innerRadiusRatio:0}createNodeData(){return P(this,null,function*(){var t;const{processedData:e,dataModel:i}=this;if(!e||!i||!this.properties.isValid())return;const o=this.axes[De.X],s=this.axes[De.Y],n=o?.scale,a=s?.scale;if(!n||!a)return;const r=i.resolveProcessedDataIndexById(this,"angleValue-start"),l=i.resolveProcessedDataIndexById(this,"angleValue-end"),c=i.resolveProcessedDataIndexById(this,"angleValue-range"),u=i.resolveProcessedDataIndexById(this,"angleValue-raw");let h=0;s instanceof Ze&&(h=s.groupPaddingInner);const{groupScale:p}=this,{index:g,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);p.domain=Array.from({length:m}).map((O,k)=>String(k)),p.range=[0,Math.abs((t=a.bandwidth)!=null?t:0)],p.paddingInner=m>1?h:0;const y=p.bandwidth>=1?p.bandwidth:p.rawBandwidth,S=o.isReversed(),f=s.isReversed(),x=f?this.radius:this.getAxisInnerRadius(),N=(f?this.getAxisInnerRadius():this.radius)+x,{angleKey:v,radiusKey:D,angleName:I,radiusName:b,label:T}=this.properties,_=(O,k,R,L)=>{const w=this.getLabelText(T,{value:k,datum:O,angleKey:v,radiusKey:D,angleName:I,radiusName:b},C=>PI(C)?C.toFixed(2):String(C));if(w)return{x:R,y:L,text:w,textAlign:"center",textBaseline:"middle"}},A=[],E={itemId:D,nodeData:A,labelData:A};return this.visible&&e.data.forEach((O,k)=>{var R;const{datum:L,keys:w,values:C,aggValues:B}=O,z=w[0],V=C[u],F=V>=0&&!Object.is(V,-0),K=C[r],$=C[l],G=(R=B?.[c][F?1:0])!=null?R:0,q=F===S;let H=n.convert(K,{clampMode:"clamped"}),at=n.convert($,{clampMode:"clamped"}),Y=n.convert(0,{clampMode:"clamped"}),W=n.convert(G,{clampMode:"clamped"});q&&([Y,W]=[W,Y],[H,at]=[at,H]);const J=N-a.convert(z)+p.convert(String(g)),mt=J+y,ht=(J+mt)/2,ft=H+FI(H,at)/2,Kt=Math.cos(ft)*ht,At=Math.sin(ft)*ht,jt=this.properties.label.enabled?_(L,V,Kt,At):void 0,st=new VI(H,at,J,mt);A.push({series:this,datum:L,point:{x:Kt,y:At,size:0},midPoint:{x:Kt,y:At},label:jt,angleValue:V,radiusValue:z,innerRadius:J,outerRadius:mt,startAngle:Y,endAngle:W,clipSector:st,reversed:q,index:k})}),E})}update(t){return P(this,arguments,function*({seriesRect:e}){const i=this.checkResize(e);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),i&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(t,e){var i,o,s,n,a;let r=[];if(e){const S=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();S?.datum&&S.series===this&&(r=[S])}else r=this.nodeData;const l=e?this.properties.highlightStyle.item:void 0,c=(o=l?.fill)!=null?o:this.properties.fill,u=(s=l?.fillOpacity)!=null?s:this.properties.fillOpacity,h=(n=l?.stroke)!=null?n:this.properties.stroke,p=this.properties.strokeOpacity,g=(a=l?.strokeWidth)!=null?a:this.properties.strokeWidth,m=this.properties.cornerRadius,y=S=>S.radiusValue;t.update(r,void 0,y).each((S,f)=>{var x,M,N,v,D;const I=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:f,fill:c,stroke:h,strokeWidth:g,highlighted:e,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;S.fill=(x=I?.fill)!=null?x:c,S.fillOpacity=(M=I?.fillOpacity)!=null?M:u,S.stroke=(N=I?.stroke)!=null?N:h,S.strokeOpacity=p,S.strokeWidth=(v=I?.strokeWidth)!=null?v:g,S.lineDash=this.properties.lineDash,S.lineJoin="round",S.inset=h!=null?((D=I?.strokeWidth)!=null?D:g)/2:0,S.startInnerCornerRadius=f.reversed?m:0,S.startOuterCornerRadius=f.reversed?m:0,S.endInnerCornerRadius=f.reversed?0:m,S.endOuterCornerRadius=f.reversed?0:m,e&&(S.startAngle=f.startAngle,S.endAngle=f.endAngle,S.clipSector=f.clipSector,S.innerRadius=f.innerRadius,S.outerRadius=f.outerRadius)})}updateLabels(){const{label:t}=this.properties;this.labelSelection.update(this.nodeData).each((e,i)=>{t.enabled&&i.label?(e.x=i.label.x,e.y=i.label.y,e.fill=t.color,e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=i.label.text,e.textAlign=i.label.textAlign,e.textBaseline=i.label.textBaseline,e.visible=!0):e.visible=!1})}getBarTransitionFunctions(){var t;const e=(t=this.axes[De.X])==null?void 0:t.scale;let i=0;if(!e)return nh(i);const o=Math.min(e.domain[0],e.domain[1]),s=Math.max(e.domain[0],e.domain[1]);return o<=0&&s>=0&&(i=e.convert(0)),nh(i)}animateEmptyUpdateReady(){const{labelSelection:t}=this,e=this.getBarTransitionFunctions();rh.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],e),kI(this,"labels",this.ctx.animationManager,t)}animateClearingUpdateEmpty(){const{itemSelection:t}=this,{animationManager:e}=this.ctx,i=this.getBarTransitionFunctions();rh.fromToMotion(this.id,"datums",e,[t],i),RI(this,"labels",e,this.labelSelection)}getTooltipHtml(t){var e;const{id:i,axes:o,dataModel:s}=this,{angleKey:n,angleName:a,radiusKey:r,radiusName:l,fill:c,stroke:u,strokeWidth:h,formatter:p,tooltip:g}=this.properties,{angleValue:m,radiusValue:y,datum:S,itemId:f}=t,x=o[De.X],M=o[De.Y];if(!this.properties.isValid()||!(x&&M&&UI(m))||!s)return js.EMPTY_TOOLTIP_CONTENT;const N=x.formatDatum(m),v=M.formatDatum(y),D=lh(a),I=lh(`${v}: ${N}`),{fill:b}=(e=p&&this.ctx.callbackCache.call(p,{datum:S,fill:c,stroke:u,strokeWidth:h,highlighted:!1,angleKey:n,radiusKey:r,seriesId:i}))!=null?e:{fill:c};return g.toTooltipHtml({title:D,backgroundColor:c,content:I},{seriesId:i,datum:S,color:b,title:D,angleKey:n,radiusKey:r,angleName:a,radiusName:l,angleValue:m,itemId:f,radiusValue:y})}getLegendData(t){var e;if(!((e=this.data)!=null&&e.length)||!this.properties.isValid()||t!=="category")return[];const{angleKey:i,angleName:o,fill:s,stroke:n,fillOpacity:a,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:c,label:{text:o??i},marker:{fill:s??"rgba(0, 0, 0, 0)",stroke:n??"rgba(0, 0, 0, 0)",fillOpacity:a??1,strokeOpacity:r??1,strokeWidth:l}}]}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:s}=t,a=o.id===this.id||e&&s===1;this.toggleSeriesItem(i,a)}computeLabelsBBox(){return null}getStackId(){var t,e;return`radialBar-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-xValues`}computeFocusBounds(t){return wI(this,t)}};nr.className="RadialBarSeries",nr.type="radial-bar";import{_Theme as Gs}from"ag-charts-community";var jI={series:{__extends__:Gs.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Gs.DEFAULT_FONT_FAMILY,color:Gs.DEFAULT_INVERTED_LABEL_COLOUR}},axes:{[Gs.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},GI={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:nr,defaultAxes:[{type:th.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:th.POLAR_AXIS_TYPE.RADIUS_CATEGORY}],themeTemplate:jI,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0};import{_Theme as ch}from"ag-charts-community";import{_ModuleSupport as HI,_Scene as YI}from"ag-charts-community";import{_ModuleSupport as WI}from"ag-charts-community";var{Validate:uh,RATIO:dh}=WI,ar=class extends bt{};d([uh(dh,{optional:!0})],ar.prototype,"columnWidthRatio",2),d([uh(dh,{optional:!0})],ar.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:XI,PolarAxis:QI}=HI,{RadialColumnShape:$I,getRadialColumnWidth:ZI}=YI,rr=class extends Ed{constructor(t){super(t,{animationResetFns:{item:tN}}),this.properties=new ar}getStackId(){var t,e;return`radarColumn-stack-${(e=(t=this.seriesGrouping)==null?void 0:t.groupIndex)!=null?e:this.id}-yValues`}nodeFactory(){return new $I}getColumnTransitionFunctions(){const t=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return JD(t)}isRadiusAxisCircle(){const t=this.axes[XI.Y];return t instanceof QI?t.shape==="circle":!1}updateItemPath(t,e,i){t.isBeveled=this.isRadiusAxisCircle(),t.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius,t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.columnWidth=e.columnWidth,t.axisInnerRadius=e.axisInnerRadius,t.axisOuterRadius=e.axisOuterRadius)}getColumnWidth(t,e){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return ZI(t,e,this.radius,i,o)}};rr.className="RadialColumnSeries",rr.type="radial-column";import{_Theme as yi}from"ag-charts-community";var qI={series:{__extends__:yi.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:yi.DEFAULT_FONT_FAMILY,color:yi.DEFAULT_LABEL_COLOUR}},axes:{[yi.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:yi.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[yi.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:yi.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},JI={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:rr,defaultAxes:[{type:ch.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:ch.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:qI,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},stackable:!0,groupable:!0};import{_ModuleSupport as t0,_Theme as Hs}from"ag-charts-community";import{_ModuleSupport as Ys,_Scene as hh,_Util as e0}from"ag-charts-community";import{_ModuleSupport as i0,_Scene as o0}from"ag-charts-community";var{DropShadow:s0,Label:n0}=o0,{CartesianSeriesProperties:a0,SeriesMarker:r0,SeriesTooltip:l0,Validate:St,BOOLEAN:c0,COLOR_STRING:ph,LINE_DASH:u0,OBJECT:Ws,PLACEMENT:d0,POSITIVE_NUMBER:lr,RATIO:gh,STRING:mi}=i0,cr=class extends n0{constructor(){super(...arguments),this.placement="outside",this.padding=6}};d([St(d0)],cr.prototype,"placement",2),d([St(lr)],cr.prototype,"padding",2);var Dt=class extends a0{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new s0().set({enabled:!1}),this.marker=new r0,this.label=new cr,this.tooltip=new l0,this.connectMissingData=!1}};d([St(mi)],Dt.prototype,"xKey",2),d([St(mi)],Dt.prototype,"yLowKey",2),d([St(mi)],Dt.prototype,"yHighKey",2),d([St(mi,{optional:!0})],Dt.prototype,"xName",2),d([St(mi,{optional:!0})],Dt.prototype,"yName",2),d([St(mi,{optional:!0})],Dt.prototype,"yLowName",2),d([St(mi,{optional:!0})],Dt.prototype,"yHighName",2),d([St(ph)],Dt.prototype,"fill",2),d([St(gh)],Dt.prototype,"fillOpacity",2),d([St(ph)],Dt.prototype,"stroke",2),d([St(lr)],Dt.prototype,"strokeWidth",2),d([St(gh)],Dt.prototype,"strokeOpacity",2),d([St(u0)],Dt.prototype,"lineDash",2),d([St(lr)],Dt.prototype,"lineDashOffset",2),d([St(Ws)],Dt.prototype,"shadow",2),d([St(Ws)],Dt.prototype,"marker",2),d([St(Ws)],Dt.prototype,"label",2),d([St(Ws)],Dt.prototype,"tooltip",2),d([St(c0)],Dt.prototype,"connectMissingData",2);var{valueProperty:yh,keyProperty:h0,ChartAxisDirection:ne,mergeDefaults:p0,updateLabelNode:g0,fixNumericExtent:mh,AreaSeriesTag:ur,buildResetPathFn:y0,resetLabelFn:m0,resetMarkerFn:f0,resetMarkerPositionFn:fh,pathSwipeInAnimation:S0,resetMotion:x0,markerSwipeScaleInAnimation:v0,seriesLabelFadeInAnimation:M0,animationValidation:D0,diff:N0,updateClipPath:Sh,isFiniteNumber:I0,computeMarkerFocusBounds:_0}=Ys,{getMarker:b0,PointerEvents:dr}=hh,{sanitizeHtml:fi,extent:T0}=e0,A0=class extends Ys.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},hr=class extends Ys.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:2,directionKeys:{[ne.X]:["xKey"],[ne.Y]:["yLowKey","yHighKey"]},directionNames:{[ne.X]:["xName"],[ne.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:y0({getOpacity:()=>this.getOpacity()}),label:m0,marker:(e,i)=>U(U({},f0(e)),fh(e,i))}}),this.properties=new Dt,this.NodeEvent=A0}processData(t){return P(this,null,function*(){var e,i;if(!this.properties.isValid()||!this.visible)return;const{xKey:o,yLowKey:s,yHighKey:n}=this.properties,a=(e=this.axes[ne.X])==null?void 0:e.scale,r=(i=this.axes[ne.Y])==null?void 0:i.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({xScale:a,yScale:r}),u=[],h=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&u.push(N0(this.processedData)),h&&u.push(D0()),yield this.requestDataModel(t,this.data,{props:[h0(o,l,{id:"xValue"}),yh(s,c,{id:"yLowValue",invalidValue:void 0}),yh(n,c,{id:"yHighValue",invalidValue:void 0}),...u]}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:o}=this;if(!(e&&i))return[];const{domain:{keys:[s],values:n}}=e;if(t===ne.X){const a=i.resolveProcessedDataDefById(this,"xValue"),r=o[ne.X];return a?.def.type==="key"&&a.def.valueType==="category"?s:mh(T0(s),r)}else{const a=i.resolveProcessedDataIndexById(this,"yLowValue"),r=n[a],l=i.resolveProcessedDataIndexById(this,"yHighValue"),c=n[l],u=[r[0]>c[0]?c[0]:r[0],c[1]<r[1]?r[1]:c[1]];return mh(u)}}createNodeData(){return P(this,null,function*(){var t,e;const{data:i,dataModel:o,axes:s,visible:n}=this,a=s[ne.X],r=s[ne.Y];if(!(i&&n&&a&&r&&o))return;const l=a.scale,c=r.scale,{xKey:u,yLowKey:h,yHighKey:p,connectMissingData:g,marker:m}=this.properties,y=`${h}-${p}`,S=((t=l.bandwidth)!=null?t:0)/2,f=o.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue"]),x=(L,w,C)=>{const B=l.convert(L)+S,z=c.convert(w),V=c.convert(C);return[{point:{x:B,y:z},size:m.size,itemId:"high",yValue:w,xValue:L},{point:{x:B,y:V},size:m.size,itemId:"low",yValue:C,xValue:L}]},M=L=>{const w=L,{point:C}=w,B=Ur(w,["point"]);return X(U({},B),{point:X(U({},C),{moveTo:!0})})},N=[],v=[],D={itemId:y,points:[]},I={itemId:y,points:[]},b={itemId:y,labelData:N,nodeData:v,fillData:I,strokeData:D,scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return b;const T=I.points,_=[],A=D.points,E=[];let O,k=-1/0,R=-1/0;return(e=this.processedData)==null||e.data.forEach(({keys:L,datum:w,values:C},B)=>{const z=o.resolveProcessedDataDefsValues(f,{keys:L,values:C}),{xValue:V,yHighValue:F,yLowValue:K}=z,G=F==null||K==null?[]:x(V,F,K),q=K>F;G.forEach(({point:{x:ht,y:ft},size:Kt,itemId:At="",yValue:jt})=>{v.push({index:B,series:this,itemId:At,datum:w,midPoint:{x:ht,y:ft},yHighValue:F,yLowValue:K,xValue:V,xKey:u,yLowKey:h,yHighKey:p,point:{x:ht,y:ft,size:Kt}});const st=this.createLabelData({point:{x:ht,y:ft},value:jt,yLowValue:K,yHighValue:F,itemId:At,inverted:q,datum:w,series:this});N.push(st)});const H=k!=null&&R!=null,at=O!=null&&H,Y=V!=null,W=F!=null&&K!=null;let[ot,J]=x(V,F??0,K??0);if(!g)if(W){if(!H){const[ht,ft]=x(V,0,0);T.push(ht),_.push(ft)}}else{const[ht,ft]=x(O,0,0);T.push(ht),_.push(ft)}Y&&W&&(T.push(ot),_.push(J)),Y&&W&&!at&&!g&&B>0&&(ot=M(ot),J=M(J)),Y&&W&&(A.push(ot),E.push(J)),O=V,k=F,R=K}),T.length>0&&(T[0]=M(T[0])),T.push(..._.reverse()),E.length>0&&(E[0]=M(E[0])),A.push(...E),b})}createLabelData({point:t,value:e,itemId:i,inverted:o,datum:s,series:n}){const{xKey:a,yLowKey:r,yHighKey:l,xName:c,yName:u,yLowName:h,yHighName:p,label:g}=this.properties,{placement:m,padding:y=10}=g;let S=i;o&&(S=i==="low"?"high":"low");const f=m==="outside"&&S==="high"||m==="inside"&&S==="low"?-1:1;return{x:t.x,y:t.y+y*f,series:n,itemId:i,datum:s,text:this.getLabelText(g,{value:e,datum:s,itemId:i,xKey:a,yLowKey:r,yHighKey:l,xName:c,yLowName:h,yHighName:p,yName:u},x=>I0(x)?x.toFixed(2):String(x)),textAlign:"center",textBaseline:f===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=b0(t);return new e}updatePathNodes(t){return P(this,null,function*(){const{opacity:e,visible:i}=t,[o,s]=t.paths,n=this.getStrokeWidth(this.properties.strokeWidth);s.setProperties({tag:ur.Stroke,fill:void 0,lineJoin:s.lineCap="round",pointerEvents:dr.None,stroke:this.properties.stroke,strokeWidth:n,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:ur.Fill,stroke:void 0,lineJoin:"round",pointerEvents:dr.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:n,opacity:e,visible:i}),Sh(this,s),Sh(this,o)})}updatePaths(t){return P(this,null,function*(){this.updateAreaPaths(t.paths,t.contextData)})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{fillData:i}=e,[o]=t,{path:s}=o;s.clear(!0);for(const{point:n}of i.points)n.moveTo?s.moveTo(n.x,n.y):s.lineTo(n.x,n.y);s.closePath(),o.checkPathDirty()}updateStrokePath(t,e){const{strokeData:i}=e,[,o]=t,{path:s}=o;s.clear(!0);for(const{point:n}of i.points)n.moveTo?s.moveTo(n.x,n.y):s.lineTo(n.x,n.y);o.checkPathDirty()}updateMarkerSelection(t){return P(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return P(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o,yLowKey:s,yHighKey:n,marker:a,fill:r,stroke:l,strokeWidth:c,fillOpacity:u,strokeOpacity:h}=this.properties,p=p0(i&&this.properties.highlightStyle.item,a.getStyle(),{fill:r,fillOpacity:u,stroke:l,strokeWidth:c,strokeOpacity:h});e.each((g,m)=>{this.updateMarkerStyle(g,a,{datum:m,highlighted:i,xKey:o,yHighKey:n,yLowKey:s},p)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return P(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,o=>{o.tag=ur.Label,o.pointerEvents=dr.None})})}updateLabelNodes(t){return P(this,null,function*(){t.labelSelection.each((e,i)=>{g0(e,this.properties.label,i)})})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getTooltipHtml(t){const e=this.axes[ne.X],i=this.axes[ne.Y];if(!this.properties.isValid()||!e||!i)return Ys.EMPTY_TOOLTIP_CONTENT;const{id:o}=this,{xKey:s,yLowKey:n,yHighKey:a,xName:r,yName:l,yLowName:c,yHighName:u,fill:h,tooltip:p}=this.properties,{datum:g,itemId:m,xValue:y,yLowValue:S,yHighValue:f}=t,x=h??"gray",M=fi(e.formatDatum(y)),N=fi(i.formatDatum(S)),v=fi(i.formatDatum(f)),D=r??s,I=c??n,b=u??a,T=fi(l),_=l?`<b>${fi(D)}</b>: ${M}<br><b>${fi(I)}</b>: ${N}<br><b>${fi(b)}</b>: ${v}<br>`:`${M}: ${N} - ${v}`;return p.toTooltipHtml({title:T,content:_,backgroundColor:x},{seriesId:o,itemId:m,datum:g,xKey:s,yLowKey:n,yHighKey:a,xName:r,yLowName:c,yHighName:u,yName:l,color:x,title:T,yHighValue:f,yLowValue:S})}getLegendData(t){var e,i;if(t!=="category")return[];const{yLowKey:o,yHighKey:s,yName:n,yLowName:a,yHighName:r,fill:l,stroke:c,strokeWidth:u,strokeOpacity:h,lineDash:p,visible:g,marker:m}=this.properties,y=n??`${a??o} - ${r??s}`;return[{legendType:"category",id:this.id,itemId:`${o}-${s}`,seriesId:this.id,enabled:g,label:{text:`${y}`},marker:{shape:m.shape,fill:(e=m.fill)!=null?e:l,stroke:(i=m.stroke)!=null?i:c,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,strokeWidth:m.strokeWidth},line:{stroke:c,strokeOpacity:h,strokeWidth:u,lineDash:p}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new hh.Group}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:o,paths:s}=t,{animationManager:n}=this.ctx;this.updateAreaPaths(s,o),S0(this,n,...s),x0([e],fh),v0(this,n,e),M0(this,"labels",n,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:e,paths:i}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(i,e)}getFormattedMarkerStyle(t){const{xKey:e,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yLowKey:i,yHighKey:o,highlighted:!0})}computeFocusBounds(t){return _0(this,t)}};hr.className="RangeAreaSeries",hr.type="range-area";import{_Theme as wo}from"ag-charts-community";var E0={series:{__extends__:wo.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:wo.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:wo.DEFAULT_FONT_FAMILY,color:wo.DEFAULT_LABEL_COLOUR}},axes:{[wo.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:O0}=t0,L0={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:hr,defaultAxes:[{type:Hs.CARTESIAN_AXIS_TYPE.NUMBER,position:Hs.POSITION.LEFT},{type:Hs.CARTESIAN_AXIS_TYPE.CATEGORY,position:Hs.POSITION.BOTTOM}],themeTemplate:E0,paletteFactory:t=>{const{marker:e}=O0(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};import{_Theme as Xs}from"ag-charts-community";import{_ModuleSupport as Qs,_Scale as k0,_Scene as R0,_Util as pr}from"ag-charts-community";import{_ModuleSupport as C0,_Scene as P0}from"ag-charts-community";var{DropShadow:w0,Label:B0}=P0,{AbstractBarSeriesProperties:z0,SeriesTooltip:V0,Validate:xt,COLOR_STRING:xh,FUNCTION:F0,LINE_DASH:U0,OBJECT:gr,PLACEMENT:K0,POSITIVE_NUMBER:$s,RATIO:vh,STRING:Si}=C0,yr=class extends B0{constructor(){super(...arguments),this.placement="inside",this.padding=6}};d([xt(K0)],yr.prototype,"placement",2),d([xt($s)],yr.prototype,"padding",2);var Nt=class extends z0{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new w0().set({enabled:!1}),this.label=new yr,this.tooltip=new V0}};d([xt(Si)],Nt.prototype,"xKey",2),d([xt(Si)],Nt.prototype,"yLowKey",2),d([xt(Si)],Nt.prototype,"yHighKey",2),d([xt(Si,{optional:!0})],Nt.prototype,"xName",2),d([xt(Si,{optional:!0})],Nt.prototype,"yName",2),d([xt(Si,{optional:!0})],Nt.prototype,"yLowName",2),d([xt(Si,{optional:!0})],Nt.prototype,"yHighName",2),d([xt(xh)],Nt.prototype,"fill",2),d([xt(vh)],Nt.prototype,"fillOpacity",2),d([xt(xh)],Nt.prototype,"stroke",2),d([xt($s)],Nt.prototype,"strokeWidth",2),d([xt(vh)],Nt.prototype,"strokeOpacity",2),d([xt(U0)],Nt.prototype,"lineDash",2),d([xt($s)],Nt.prototype,"lineDashOffset",2),d([xt($s)],Nt.prototype,"cornerRadius",2),d([xt(F0,{optional:!0})],Nt.prototype,"formatter",2),d([xt(gr)],Nt.prototype,"shadow",2),d([xt(gr)],Nt.prototype,"label",2),d([xt(gr)],Nt.prototype,"tooltip",2);var{SeriesNodePickMode:j0,valueProperty:Mh,keyProperty:G0,ChartAxisDirection:mr,getRectConfig:H0,updateRect:Y0,checkCrisp:W0,updateLabelNode:X0,SMALLEST_KEY_INTERVAL:Q0,diff:$0,prepareBarAnimationFunctions:Dh,midpointStartingBarPosition:Nh,resetBarSelectionsFn:Z0,fixNumericExtent:Ih,seriesLabelFadeInAnimation:_h,resetLabelFn:q0,animationValidation:J0,createDatumId:t_,isFiniteNumber:bh,computeBarFocusBounds:e_}=Qs,{Rect:i_,PointerEvents:o_,motion:Th}=R0,{sanitizeHtml:xi,isNumber:s_,extent:n_}=pr,{ContinuousScale:a_}=k0,r_=class extends Qs.SeriesNodeEvent{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},fr=class extends Qs.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[j0.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:Z0,label:q0}}),this.properties=new Nt,this.NodeEvent=r_}processData(t){return P(this,null,function*(){var e,i,o;if(!this.properties.isValid())return;const{xKey:s,yLowKey:n,yHighKey:a}=this.properties,r=(e=this.getCategoryAxis())==null?void 0:e.scale,l=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:c,xScaleType:u,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),p=[];this.ctx.animationManager.isSkipped()||(this.processedData&&p.push($0(this.processedData)),p.push(J0()));const g=this.visible?{}:{forceValue:0},{processedData:m}=yield this.requestDataModel(t,this.data,{props:[G0(s,u,{id:"xValue"}),Mh(n,h,U({id:"yLowValue"},g)),Mh(a,h,U({id:"yHighValue"},g)),...c?[Q0]:[],...p],groupByKeys:!0});this.smallestDataInterval=(o=m.reduced)==null?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o,smallestDataInterval:s}=this;if(!(i&&o))return[];const{domain:{keys:[n],values:a}}=i;if(t===this.getCategoryDirection()){const r=o.resolveProcessedDataDefById(this,"xValue");if(r?.def.type==="key"&&r?.def.valueType==="category")return n;const l=bh(s)?s:0,c=(e=n_(n))!=null?e:[NaN,NaN],u=this.getCategoryAxis(),h=c[0]+-l,p=c[1]+l;return Ih([h,p],u)}else{const r=o.resolveProcessedDataIndexById(this,"yLowValue"),l=a[r],c=o.resolveProcessedDataIndexById(this,"yHighValue"),u=a[c],h=[l[0]>u[0]?u[0]:l[0],u[1]<l[1]?l[1]:u[1]];return Ih(h)}}createNodeData(){return P(this,null,function*(){const{data:t,dataModel:e,groupScale:i,processedData:o,properties:{visible:s}}=this,n=this.getCategoryAxis(),a=this.getValueAxis();if(!(t&&n&&a&&e))return;const r=n.scale,l=a.scale,c=this.getBarDirection()===mr.X,{xKey:u,yLowKey:h,yHighKey:p,fill:g,stroke:m,strokeWidth:y}=this.properties,S=`${h}-${p}`,f={itemId:S,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!s)return f;const x=e.resolveProcessedDataIndexById(this,"yLowValue"),M=e.resolveProcessedDataIndexById(this,"yHighValue"),N=e.resolveProcessedDataIndexById(this,"xValue"),{barWidth:v,groupIndex:D}=this.updateGroupScale(n),I=a_.is(r)?v*-.5:0;return o?.data.forEach(({keys:b,datum:T,values:_},A)=>{_.forEach((E,O)=>{const k=b[N],R=Math.round(r.convert(k))+i.convert(String(D))+I,L=E[x],w=E[M];if(!pr.isNumber(w)||!pr.isNumber(L))return;const C=Math.min(L,w),B=Math.max(L,w),z=Math.round(l.convert(C)),F=Math.round(l.convert(B)),K=z,$=Math.max(y,Math.abs(K-F)),G={x:c?Math.min(F,K):R,y:c?R:Math.min(F,K),width:c?$:v,height:c?v:$},q={x:G.x+G.width/2,y:G.y+G.height/2},H=this.createLabelData({rect:G,barAlongX:c,yLowValue:C,yHighValue:B,datum:T[O],series:this}),at={index:A,valueIndex:O,series:this,itemId:S,datum:T[O],xValue:k,yLowValue:L,yHighValue:w,yLowKey:h,yHighKey:p,xKey:u,x:G.x,y:G.y,width:G.width,height:G.height,midPoint:q,fill:g,stroke:m,strokeWidth:y,opacity:1,labels:H};f.nodeData.push(at),f.labelData.push(...H)})}),f})}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:o,datum:s,series:n}){const{xKey:a,yLowKey:r,yHighKey:l,xName:c,yLowName:u,yHighName:h,yName:p,label:g}=this.properties,m={datum:s,xKey:a,yLowKey:r,yHighKey:l,xName:c,yLowName:u,yHighName:h,yName:p},{placement:y,padding:S}=g,x=S*(y==="outside"?1:-1),M={x:t.x+(e?-x:t.width/2),y:t.y+(e?t.height/2:t.height+x),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(g,U({itemId:"low",value:i},m),v=>bh(v)?v.toFixed(2):String(v)),itemId:"low",datum:s,series:n},N={x:t.x+(e?t.width+x:t.width/2),y:t.y+(e?t.height/2:-x),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(g,U({itemId:"high",value:o},m),v=>s_(v)?v.toFixed(2):""),itemId:"high",datum:s,series:n};return y==="outside"&&(M.textAlign=e?"right":"center",M.textBaseline=e?"middle":"top",N.textAlign=e?"left":"center",N.textBaseline=e?"middle":"bottom"),[M,N]}nodeFactory(){return new i_}updateDatumSelection(t){return P(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,s=>this.getDatumId(s))})}updateDatumNodes(t){return P(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:s}=this,{yLowKey:n,yHighKey:a,highlightStyle:{item:r}}=this.properties,l=this.axes[mr.X],c=W0(l?.visibleRange),u=this.getCategoryDirection()===mr.X;e.each((h,p)=>{const{fillOpacity:g,strokeOpacity:m,strokeWidth:y,lineDash:S,lineDashOffset:f,formatter:x,shadow:M}=this.properties,N={fill:p.fill,stroke:p.stroke,fillOpacity:g,strokeOpacity:m,lineDash:S,lineDashOffset:f,fillShadow:M,strokeWidth:this.getStrokeWidth(y),cornerRadius:this.properties.cornerRadius},v=u?p.width>0:p.height>0,D=H0({datum:p,lowValue:p.yLowValue,highValue:p.yHighValue,isHighlighted:i,style:N,highlightStyle:r,formatter:x,seriesId:o,itemId:p.itemId,ctx:s,yLowKey:n,yHighKey:a});D.crisp=c,D.visible=v,Y0({rect:h,config:D})})})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){return P(this,null,function*(){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=o_.None})})}updateLabelNodes(t){return P(this,null,function*(){t.labelSelection.each((e,i)=>{X0(e,this.properties.label,i)})})}getTooltipHtml(t){var e,i;const{id:o,ctx:{callbackCache:s}}=this,n=this.getCategoryAxis(),a=this.getValueAxis();if(!this.properties.isValid()||!n||!a)return Qs.EMPTY_TOOLTIP_CONTENT;const{xKey:r,yLowKey:l,yHighKey:c,xName:u,yLowName:h,yHighName:p,yName:g,fill:m,strokeWidth:y,formatter:S,tooltip:f}=this.properties,{datum:x,itemId:M,xValue:N,yLowValue:v,yHighValue:D}=t;let I;S&&(I=s.call(S,{datum:x,xKey:r,yLowKey:l,yHighKey:c,fill:m,strokeWidth:y,highlighted:!1,seriesId:o,itemId:M}));const b=(i=(e=I?.fill)!=null?e:m)!=null?i:"gray",T=xi(n.formatDatum(N)),_=xi(a.formatDatum(v)),A=xi(a.formatDatum(D)),E=u??r,O=h??l,k=p??c,R=xi(g),L=g?`<b>${xi(E)}</b>: ${T}<br><b>${xi(O)}</b>: ${_}<br><b>${xi(k)}</b>: ${A}<br>`:`${T}: ${_} - ${A}`,w={title:R,content:L,backgroundColor:b};return f.toTooltipHtml(w,{datum:x,xKey:r,xName:u,yLowKey:l,yLowName:h,yHighKey:c,yHighName:p,yName:g,color:b,seriesId:o,itemId:M,title:R,yHighValue:D,yLowValue:v})}getLegendData(t){const{id:e,visible:i}=this;if(t!=="category")return[];const{fill:o,stroke:s,strokeWidth:n,fillOpacity:a,strokeOpacity:r,yName:l,yLowName:c,yHighName:u,yLowKey:h,yHighKey:p}=this.properties,g=l??`${c??h} - ${u??p}`;return[{legendType:"category",id:e,itemId:`${h}-${p}`,seriesId:e,enabled:i,label:{text:`${g}`},marker:{fill:o,stroke:s,fillOpacity:a,strokeOpacity:r,strokeWidth:n}}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){const i=Dh(Nh(this.isVertical(),"normal"));Th.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i),_h(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e;const{datumSelection:i,labelSelection:o}=t,{processedData:s}=this,n=(e=s?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const a=Dh(Nh(this.isVertical(),"fade"));Th.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],a,(r,l)=>t_(l.xValue,l.valueIndex),n),_h(this,"labels",this.ctx.animationManager,o)}getDatumId(t){return`${t.xValue}-${t.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return e_((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}};fr.className="RangeBarSeries",fr.type="range-bar";import{_Theme as Zs}from"ag-charts-community";var l_={series:{__extends__:Zs.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Zs.DEFAULT_FONT_FAMILY,color:Zs.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[Zs.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},c_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:fr,defaultAxes:[{type:Xs.CARTESIAN_AXIS_TYPE.CATEGORY,position:Xs.POSITION.BOTTOM},{type:Xs.CARTESIAN_AXIS_TYPE.NUMBER,position:Xs.POSITION.LEFT}],themeTemplate:l_,paletteFactory:({takeColors:t})=>{const{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}},groupable:!0,swapDefaultAxesCondition:({direction:t})=>t==="horizontal"};import{_Theme as Ah}from"ag-charts-community";import{_ModuleSupport as qs,_Scene as u_,_Util as d_}from"ag-charts-community";import{_ModuleSupport as h_}from"ag-charts-community";var{HierarchySeriesProperties:p_,HighlightStyle:g_,SeriesTooltip:y_,Validate:vt,COLOR_STRING:m_,FUNCTION:f_,NUMBER:Eh,OBJECT:Ji,POSITIVE_NUMBER:Sr,RATIO:Js,STRING:tn}=h_,Ye=class extends g_{constructor(){super(...arguments),this.label=new se,this.secondaryLabel=new se}};d([vt(tn,{optional:!0})],Ye.prototype,"fill",2),d([vt(Js,{optional:!0})],Ye.prototype,"fillOpacity",2),d([vt(m_,{optional:!0})],Ye.prototype,"stroke",2),d([vt(Sr,{optional:!0})],Ye.prototype,"strokeWidth",2),d([vt(Js,{optional:!0})],Ye.prototype,"strokeOpacity",2),d([vt(Ji)],Ye.prototype,"label",2),d([vt(Ji)],Ye.prototype,"secondaryLabel",2);var Yt=class extends p_{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new Ye,this.label=new se,this.secondaryLabel=new Ao,this.tooltip=new y_}};d([vt(tn,{optional:!0})],Yt.prototype,"sizeName",2),d([vt(tn,{optional:!0})],Yt.prototype,"labelKey",2),d([vt(tn,{optional:!0})],Yt.prototype,"secondaryLabelKey",2),d([vt(Js)],Yt.prototype,"fillOpacity",2),d([vt(Sr)],Yt.prototype,"strokeWidth",2),d([vt(Js)],Yt.prototype,"strokeOpacity",2),d([vt(Sr)],Yt.prototype,"cornerRadius",2),d([vt(Eh,{optional:!0})],Yt.prototype,"sectorSpacing",2),d([vt(Eh,{optional:!0})],Yt.prototype,"padding",2),d([vt(f_,{optional:!0})],Yt.prototype,"formatter",2),d([vt(Ji)],Yt.prototype,"highlightStyle",2),d([vt(Ji)],Yt.prototype,"label",2),d([vt(Ji)],Yt.prototype,"secondaryLabel",2),d([vt(Ji)],Yt.prototype,"tooltip",2);var{fromToMotion:S_}=qs,{Sector:en,Group:Oh,Selection:Lh,Text:Bo}=u_,{sanitizeHtml:xr}=d_,kh=(t,e=0,i=2*Math.PI/t.sumSize,o=Array.from(t,()=>{}))=>{let s=e;for(const n of t.children){const a=s,r=s+n.sumSize*i;o[n.index]={start:a,end:r},kh(n,a,i,o),s=r}return o},vr=class Jh extends qs.HierarchySeries{constructor(){super(...arguments),this.properties=new Yt,this.groupSelection=Lh.select(this.contentGroup,Oh),this.highlightSelection=Lh.select(this.highlightGroup,Oh),this.angleData=[]}processData(){return P(this,null,function*(){const{childrenKey:e,colorKey:i,colorName:o,labelKey:s,secondaryLabelKey:n,sizeKey:a,sizeName:r}=this.properties;yield oo(Jh.prototype,this,"processData").call(this),this.angleData=kh(this.rootNode);const l=c=>typeof c=="number"?c.toFixed(2):typeof c=="string"?c:"";this.labelData=Array.from(this.rootNode,({datum:c,depth:u})=>{let h;if(c!=null&&u!=null&&s!=null){const g=c[s];h=this.getLabelText(this.properties.label,{depth:u,datum:c,childrenKey:e,colorKey:i,colorName:o,labelKey:s,secondaryLabelKey:n,sizeKey:a,sizeName:r,value:g},l)}h===""&&(h=void 0);let p;if(c!=null&&u!=null&&n!=null){const g=c[n];p=this.getLabelText(this.properties.secondaryLabel,{depth:u,datum:c,childrenKey:e,colorKey:i,colorName:o,labelKey:s,secondaryLabelKey:n,sizeKey:a,sizeName:r,value:g},l)}return p===""&&(p=void 0),h!=null||p!=null?{label:h,secondaryLabel:p}:void 0})})}updateSelections(){return P(this,null,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(e==null||e.seriesRect==null)return;const o=Array.from(this.rootNode),s=n=>{n.append([new en,new Bo({tag:0}),new Bo({tag:1})])};this.groupSelection.update(o,s,n=>this.getDatumId(n)),this.highlightSelection.update(o,s,n=>this.getDatumId(n))})}updateNodes(){return P(this,null,function*(){var e;const{chart:i,data:o,maxDepth:s,labelData:n}=this;if(i==null||o==null||n==null)return;const{width:a,height:r}=i.seriesRect,{sectorSpacing:l=0,padding:c=0,cornerRadius:u,highlightStyle:h}=this.properties;this.contentGroup.translationX=a/2,this.contentGroup.translationY=r/2,this.highlightGroup.translationX=a/2,this.highlightGroup.translationY=r/2;const p=l*.5,m=Math.min(a,r)/2/(s+1),y=-Math.PI/2,S=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();new Bo().setFont(this.properties.label),this.rootNode.walk(v=>{const D=this.angleData[v.index];if(v.depth!=null&&D!=null){const I=D.end-D.start,b=(v.depth+.5)*m;v.midPoint.x=Math.cos(I)*b,v.midPoint.y=Math.sin(I)*b}});const x=(v,D,I)=>{var b,T,_,A,E,O,k,R,L,w;const{depth:C}=v,B=this.angleData[v.index];if(C==null||B==null){D.visible=!1;return}D.visible=!0;let z,V,F,K,$;I&&(z=h.fill,V=h.fillOpacity,F=h.stroke,K=h.strokeWidth,$=h.strokeOpacity);const G=this.getSectorFormat(v,I),q=(T=(b=G?.fill)!=null?b:z)!=null?T:v.fill,H=(A=(_=G?.fillOpacity)!=null?_:V)!=null?A:this.properties.fillOpacity,at=(O=(E=G?.stroke)!=null?E:F)!=null?O:v.stroke,Y=(R=(k=G?.strokeWidth)!=null?k:K)!=null?R:this.properties.strokeWidth,W=(w=(L=G?.strokeOpacity)!=null?L:$)!=null?w:this.properties.strokeOpacity;D.fill=q,D.fillOpacity=H,D.stroke=at,D.strokeWidth=Y,D.strokeOpacity=W,D.centerX=0,D.centerY=0,D.innerRadius=C*m,D.outerRadius=(C+1)*m,D.startAngle=B.start+y,D.endAngle=B.end+y,D.inset=p+Y*.5,D.cornerRadius=u};this.groupSelection.selectByClass(en).forEach(v=>{x(v.datum,v,!1)}),this.highlightSelection.selectByClass(en).forEach(v=>{const D=v.datum,I=S===D;v.visible=I,v.visible&&x(v.datum,v,I)});const M=Array.from(this.rootNode,(v,D)=>{const{depth:I}=v,b=n[D],T=this.angleData[D];if(I==null||T==null)return;const _=I*m+p,A=(I+1)*m-p,E=_>p?p/_:p,O=A>p?p/A:p,k=T.start+E,L=T.end+E-k,w=T.start+O,B=T.end+O-w,z=J=>{var mt;if(I===0&&((mt=v.parent)==null?void 0:mt.sumSize)===v.sumSize)return{width:2*Math.sqrt(Mt(A,2)-Mt(J*.5,2)),height:J,meta:0};const ft=J,Kt=2*Math.sqrt(Mt(A,2)-Mt(_+ft,2)),At=L<Math.PI?2*_*Math.tan(L*.5):1/0,jt=Math.min(Kt,At);let st,ge;return I===0?(st=J,ge=Math.sqrt(Mt(A,2)-Mt(st/2,2))-J/(2*Math.tan(B*.5))):(st=2*_*Math.tan(L*.5),ge=Math.sqrt(Mt(A,2)-Mt(st/2,2))-_),jt>=ge?{width:jt,height:ft,meta:1}:{width:ge,height:st,meta:2}},V=Oa(b?.label,this.properties.label,b?.secondaryLabel,this.properties.secondaryLabel,{padding:c},z);if(V==null)return;const{width:F,height:K,meta:$,label:G,secondaryLabel:q}=V,H=y+(T.start+T.end)/2,at=Math.sin(H)>=0,Y=Math.cos(H)>=0,W=(at?3:12)&(Y?6:9);let ot;switch($){case 0:ot=0;break;case 1:{const mt=A-(m-K)*.58,ht=Math.sqrt(Mt(A-c,2)-Mt(F/2,2));ot=Math.min(mt,ht);break}case 2:if(I===0){const J=K/(2*Math.tan(L*.5))+F*.5,mt=Math.sqrt(Mt(A,2)-Mt(K*.5,2))-F*.5;ot=(J+mt)*.5}else ot=(_+A)*.5;break}return{width:F,height:K,labelPlacement:$,circleQuarter:W,radius:ot,theta:H,label:G,secondaryLabel:q}}),N=(v,D,I,b)=>{const{index:T,depth:_}=v,A=M?.[T],E=I===0?this.properties.label:this.properties.secondaryLabel,O=I===0?A?.label:A?.secondaryLabel;if(_==null||A==null||O==null){D.visible=!1;return}const{height:k,labelPlacement:R,circleQuarter:L,radius:w,theta:C}=A;let B;switch(b&&(B=(I===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),D.text=O.text,D.fontSize=O.fontSize,D.lineHeight=O.lineHeight,D.fontStyle=E.fontStyle,D.fontFamily=E.fontFamily,D.fontWeight=E.fontWeight,D.fill=B??E.color,R){case 0:D.textAlign="center",D.textBaseline="top",D.translationX=0,D.translationY=(I===0?0:k-O.height)-k*.5,D.rotation=0;break;case 1:{const z=(L&3)!==0,V=I===0==!z?w:w-(k-O.height);D.textAlign="center",D.textBaseline=z?"bottom":"top",D.translationX=Math.cos(C)*V,D.translationY=Math.sin(C)*V,D.rotation=z?C-Math.PI*.5:C+Math.PI*.5;break}case 2:{const z=(L&6)!==0,V=I===0==!z?(k-O.height)*.5:(O.height-k)*.5;D.textAlign="center",D.textBaseline="middle",D.translationX=Math.cos(C)*w+Math.cos(C+Math.PI/2)*V,D.translationY=Math.sin(C)*w+Math.sin(C+Math.PI/2)*V,D.rotation=z?C:C+Math.PI;break}}D.visible=!0};this.groupSelection.selectByClass(Bo).forEach(v=>{N(v.datum,v,v.tag,!1)}),this.highlightSelection.selectByClass(Bo).forEach(v=>{const D=v.datum,I=S===D;v.visible=I,v.visible&&N(v.datum,v,v.tag,I)})})}getSectorFormat(e,i){const{datum:o,fill:s,stroke:n,depth:a}=e,{ctx:{callbackCache:r},properties:{formatter:l}}=this;if(!l||o==null||a==null)return{};const{colorKey:c,labelKey:u,sizeKey:h,strokeWidth:p}=this.properties,g=r.call(l,{seriesId:this.id,depth:a,datum:o,colorKey:c,labelKey:u,sizeKey:h,fill:s,stroke:n,strokeWidth:p,highlighted:i});return g??{}}getTooltipHtml(e){var i;const{id:o}=this,{tooltip:s,colorKey:n,colorName:a=n,labelKey:r,secondaryLabelKey:l,sizeKey:c,sizeName:u=c,childrenKey:h}=this.properties,{datum:p,depth:g}=e;if(p==null||g==null)return qs.EMPTY_TOOLTIP_CONTENT;const m=r!=null?p[r]:void 0,y=this.getSectorFormat(e,!1),S=(i=y?.fill)!=null?i:e.fill;if(!s.renderer&&!m)return qs.EMPTY_TOOLTIP_CONTENT;const f=[],x=l!=null?p[l]:void 0;x!=null&&l!==n&&l!==c&&f.push(xr(x));const M=c!=null?p[c]:void 0;M!=null&&f.push(`${u}: ${xr(M)}`);const N=n!=null?p[n]:void 0;N!=null&&f.push(`${a}: ${xr(N)}`);const v=f.join("<br>"),D={title:m,color:this.properties.label.color,backgroundColor:S,content:v};return s.toTooltipHtml(D,{depth:g,datum:p,colorKey:n,labelKey:r,secondaryLabelKey:l,sizeKey:c,title:m,color:S,seriesId:o,childrenKey:h,colorName:a,itemId:void 0,sizeName:u})}createNodeData(){return P(this,null,function*(){})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.selectByClass(en))}animateEmptyUpdateReady({datumSelections:e}){S_(this.id,"nodes",this.ctx.animationManager,e,{toFn(i,o,s){return{scalingX:1,scalingY:1}},fromFn(i,o,s){return s==="unknown"&&o!=null&&i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}};vr.className="SunburstSeries",vr.type="sunburst";var x_=vr,{EXTENDS_SERIES_DEFAULTS:v_,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:on}=Ah,M_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:x_,solo:!0,themeTemplate:{series:{__extends__:v_,label:{fontSize:14,minimumFontSize:9,color:on,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:on,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:on},secondaryLabel:{color:on},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{properties:o}=i,{fills:s,strokes:n}=t(e),a=o.get(Ah.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE);return{fills:s,strokes:n,colorRange:a}}};import{_Theme as D_}from"ag-charts-community";import{_ModuleSupport as Mr,_Scene as Rh,_Util as N_}from"ag-charts-community";import{_ModuleSupport as I_,_Scene as __}from"ag-charts-community";var{Label:b_}=__,{BaseProperties:sn,HierarchySeriesProperties:T_,HighlightStyle:A_,SeriesTooltip:E_,Validate:j,BOOLEAN:O_,COLOR_STRING:nn,FUNCTION:L_,NUMBER:k_,OBJECT:ae,POSITIVE_NUMBER:Ne,RATIO:We,STRING:vi,STRING_ARRAY:Ch,TEXT_ALIGN:Ph,VERTICAL_ALIGN:R_}=I_,wh=class extends b_{constructor(){super(...arguments),this.spacing=0}};d([j(k_)],wh.prototype,"spacing",2);var re=class extends sn{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new wh}};d([j(vi,{optional:!0})],re.prototype,"fill",2),d([j(We)],re.prototype,"fillOpacity",2),d([j(nn,{optional:!0})],re.prototype,"stroke",2),d([j(Ne)],re.prototype,"strokeWidth",2),d([j(We)],re.prototype,"strokeOpacity",2),d([j(Ne)],re.prototype,"cornerRadius",2),d([j(Ph)],re.prototype,"textAlign",2),d([j(Ne)],re.prototype,"gap",2),d([j(Ne)],re.prototype,"padding",2),d([j(O_)],re.prototype,"interactive",2),d([j(ae)],re.prototype,"label",2);var qt=class extends sn{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new se,this.secondaryLabel=new Ao}};d([j(vi,{optional:!0})],qt.prototype,"fill",2),d([j(We)],qt.prototype,"fillOpacity",2),d([j(nn,{optional:!0})],qt.prototype,"stroke",2),d([j(Ne,{optional:!0})],qt.prototype,"strokeWidth",2),d([j(We)],qt.prototype,"strokeOpacity",2),d([j(Ne)],qt.prototype,"cornerRadius",2),d([j(Ph)],qt.prototype,"textAlign",2),d([j(R_)],qt.prototype,"verticalAlign",2),d([j(Ne)],qt.prototype,"gap",2),d([j(Ne)],qt.prototype,"padding",2),d([j(ae)],qt.prototype,"label",2),d([j(ae)],qt.prototype,"secondaryLabel",2);var Mi=class extends sn{constructor(){super(...arguments),this.label=new se}};d([j(vi,{optional:!0})],Mi.prototype,"fill",2),d([j(We,{optional:!0})],Mi.prototype,"fillOpacity",2),d([j(nn,{optional:!0})],Mi.prototype,"stroke",2),d([j(Ne,{optional:!0})],Mi.prototype,"strokeWidth",2),d([j(We,{optional:!0})],Mi.prototype,"strokeOpacity",2),d([j(ae)],Mi.prototype,"label",2);var Xe=class extends sn{constructor(){super(...arguments),this.label=new se,this.secondaryLabel=new Ao}};d([j(vi,{optional:!0})],Xe.prototype,"fill",2),d([j(We,{optional:!0})],Xe.prototype,"fillOpacity",2),d([j(nn,{optional:!0})],Xe.prototype,"stroke",2),d([j(Ne,{optional:!0})],Xe.prototype,"strokeWidth",2),d([j(We,{optional:!0})],Xe.prototype,"strokeOpacity",2),d([j(ae)],Xe.prototype,"label",2),d([j(ae)],Xe.prototype,"secondaryLabel",2);var Dr=class extends A_{constructor(){super(...arguments),this.group=new Mi,this.tile=new Xe}};d([j(ae)],Dr.prototype,"group",2),d([j(ae)],Dr.prototype,"tile",2);var pe=class extends T_{constructor(){super(...arguments),this.highlightStyle=new Dr,this.tooltip=new E_,this.group=new re,this.tile=new qt,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};d([j(vi,{optional:!0})],pe.prototype,"sizeName",2),d([j(vi,{optional:!0})],pe.prototype,"labelKey",2),d([j(vi,{optional:!0})],pe.prototype,"secondaryLabelKey",2),d([j(L_,{optional:!0})],pe.prototype,"formatter",2),d([j(ae)],pe.prototype,"highlightStyle",2),d([j(ae)],pe.prototype,"tooltip",2),d([j(ae)],pe.prototype,"group",2),d([j(ae)],pe.prototype,"tile",2),d([j(Ch)],pe.prototype,"undocumentedGroupFills",2),d([j(Ch)],pe.prototype,"undocumentedGroupStrokes",2);var{Rect:Nr,Group:C_,BBox:an,Selection:Bh,Text:to}=Rh,{Color:P_,Logger:w_,isEqual:B_,sanitizeHtml:Ir}=N_,zh=new to;function z_(t,e){const{fontStyle:i,fontWeight:o,fontSize:s,fontFamily:n}=e;zh.setProperties({text:t,fontStyle:i,fontWeight:o,fontSize:s,fontFamily:n,textAlign:"left",textBaseline:"top"});const{width:a,height:r}=zh.computeBBox();return{width:a,height:r}}function Vh(t){if(typeof t=="string"&&!P_.validColorString(t)){const e="black";return w_.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),e}return t}function Qe(t){return t.children.length>0?t.sumSize-t.size:t.size}var Fh={left:0,center:.5,right:1},V_={top:0,middle:.5,bottom:1},F_=class extends Rh.Group{distanceSquared(t,e){return this.computeBBox().distanceSquared(t,e)}},_r=class tp extends Mr.HierarchySeries{constructor(){super(...arguments),this.properties=new pe,this.groupSelection=Bh.select(this.contentGroup,F_),this.highlightSelection=Bh.select(this.highlightGroup,C_)}groupTitleHeight(e,i){var o,s;const n=(s=(o=this.labelData)==null?void 0:o[e.index])==null?void 0:s.label,{label:a}=this.properties.group,r=3;if(n!=null){if(a.fontSize>i.width/r||a.fontSize>i.height/r)return;{const{height:l}=z_(n,a);return Math.max(l,a.fontSize)}}}getNodePadding(e,i){if(e.index===0)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:o},padding:s}=this.properties.group,n=this.groupTitleHeight(e,i),a=n!=null?n+o:0;return{top:s+a,right:s,bottom:s,left:s}}processData(){return P(this,null,function*(){var e;yield oo(tp.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:o,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:l,tile:c,group:u}=this.properties;if(!((e=this.data)!=null&&e.length)){this.labelData=void 0;return}const h=p=>typeof p=="number"?p.toFixed(2):typeof p=="string"?p:"";this.labelData=Array.from(this.rootNode,({datum:p,depth:g,children:m})=>{const y=m.length===0,S=y?c.label:u.label;let f;if(p!=null&&g!=null&&n!=null){const M=p[n];f=this.getLabelText(S,{depth:g,datum:p,childrenKey:i,colorKey:o,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:l,value:M},h)}f===""&&(f=void 0);let x;if(y&&p!=null&&g!=null&&a!=null){const M=p[a];x=this.getLabelText(c.secondaryLabel,{depth:g,datum:p,childrenKey:i,colorKey:o,colorName:s,labelKey:n,secondaryLabelKey:a,sizeKey:r,sizeName:l,value:M},h)}return x===""&&(x=void 0),f!=null||x!=null?{label:f,secondaryLabel:x}:void 0})})}squarify(e,i,o,s){const{index:n,datum:a,children:r}=e;if(i.width<=0||i.height<=0){o[n]=void 0,s[n]=void 0;return}const l=a!=null?this.getNodePadding(e,i):{top:0,right:0,bottom:0,left:0};o[n]=n===0?void 0:i,s[n]=n===0?void 0:l;const c=Array.from(r,(T,_)=>_).filter(T=>Qe(r[T])>0).sort((T,_)=>Qe(r[_])-Qe(r[T])),u=T=>{const _=c[T];return r[_]},h=c.every(T=>r[T].children.length===0),p=1,g=i.width-l.left-l.right,m=i.height-l.top-l.bottom;if(g<=0||m<=0)return;const y=c.length;let S=0,f=0,x=1/0,M=c.reduce((T,_)=>T+Qe(r[_]),0);const N=new an(i.x+l.left,i.y+l.top,g,m),v=N.clone();let D=0;for(;D<y;){const T=Qe(u(D)),_=Qe(u(f)),A=v.width<v.height;S+=T;const E=A?v.height:v.width,O=A?v.width:v.height,k=O*_/S;let R=E*S/M;const L=Math.max(k,R)/Math.min(k,R),w=Math.abs(p-L);if(w<x){x=w,D++;continue}S-=T,R=E*S/M;let C=A?v.x:v.y;for(let B=f;B<D;B++){const z=u(B),V=Qe(z),F=A?C:v.x,K=A?v.y:C,$=O*V/S,G=A?$:R,q=A?R:$,H=new an(F,K,G,q);this.applyGap(N,H,h),this.squarify(z,H,o,s),M-=V,C+=$}A?(v.y+=R,v.height-=R):(v.x+=R,v.width-=R),f=D,S=0,x=1/0}const I=v.width<v.height;let b=I?v.x:v.y;for(let T=f;T<y;T++){const _=u(T),A=I?b:v.x,E=I?v.y:b,O=Qe(_)/M,k=v.width*(I?O:1),R=v.height*(I?1:O),L=new an(A,E,k,R);this.applyGap(N,L,h),this.squarify(_,L,o,s),b+=I?k:R}}applyGap(e,i,o){const s=o?this.properties.tile.gap*.5:this.properties.group.gap*.5,n=c=>({left:c.x,top:c.y,right:c.x+c.width,bottom:c.y+c.height}),a=n(e),r=n(i);["top","right","bottom","left"].forEach(c=>{B_(a[c],r[c])||i.shrink(s,c)})}createNodeData(){return P(this,null,function*(){})}updateSelections(){return P(this,null,function*(){var e;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:i}=(e=this.chart)!=null?e:{};if(!i)return;const o=Array.from(this.rootNode),s=n=>{n.append([new Nr,new to({tag:0}),new to({tag:1})])};this.groupSelection.update(o,s,n=>this.getDatumId(n)),this.highlightSelection.update(o,s,n=>this.getDatumId(n))})}getTileFormat(e,i){const{datum:o,depth:s,children:n}=e,{colorKey:a,labelKey:r,secondaryLabelKey:l,sizeKey:c,tile:u,group:h,formatter:p}=this.properties;if(!p||o==null||s==null)return{};const g=n.length===0,m=this.getNodeFill(e),y=this.getNodeStroke(e),S=g?u.strokeWidth:h.strokeWidth,f=this.ctx.callbackCache.call(p,{seriesId:this.id,depth:s,datum:o,colorKey:a,labelKey:r,secondaryLabelKey:l,sizeKey:c,fill:m,stroke:y,strokeWidth:S,highlighted:i});return f??{}}getNodeFill(e){var i,o,s;if(e.children.length===0)return(i=this.properties.tile.fill)!=null?i:e.fill;const{undocumentedGroupFills:a}=this.properties,r=a[Math.min((o=e.depth)!=null?o:0,a.length)];return(s=this.properties.group.fill)!=null?s:r}getNodeStroke(e){var i,o,s;if(e.children.length===0)return(i=this.properties.tile.stroke)!=null?i:e.stroke;const{undocumentedGroupStrokes:a}=this.properties,r=a[Math.min((o=e.depth)!=null?o:0,a.length)];return(s=this.properties.group.stroke)!=null?s:r}updateNodes(){return P(this,null,function*(){var e,i;const{rootNode:o,data:s}=this,{highlightStyle:n,tile:a,group:r}=this.properties,{seriesRect:l}=(e=this.chart)!=null?e:{};if(!l||!s)return;const{width:c,height:u}=l,h=Array.from(this.rootNode,()=>{}),p=Array.from(this.rootNode,()=>{});this.squarify(o,new an(0,0,c,u),h,p);let g=(i=this.ctx.highlightManager)==null?void 0:i.getActiveHighlight();g!=null&&!this.properties.group.interactive&&g.children.length!==0&&(g=void 0),this.updateNodeMidPoint(h);const m=(f,x,M)=>{var N,v,D,I,b,T,_,A,E,O,k;const R=h[f.index];if(R==null){x.visible=!1;return}const L=f.children.length===0;let w,C,B,z,V;if(M){const{tile:ot,group:J}=n;w=L?ot.fill:J.fill,C=L?ot.fillOpacity:J.fillOpacity,B=L?ot.stroke:J.stroke,z=L?ot.strokeWidth:J.strokeWidth,V=L?ot.strokeOpacity:J.strokeOpacity}const F=this.getTileFormat(f,M),K=(v=(N=F?.fill)!=null?N:w)!=null?v:this.getNodeFill(f),$=(I=(D=F?.fillOpacity)!=null?D:C)!=null?I:L?a.fillOpacity:r.fillOpacity,G=(T=(b=F?.stroke)!=null?b:B)!=null?T:this.getNodeStroke(f),q=(A=(_=F?.strokeWidth)!=null?_:z)!=null?A:L?a.strokeWidth:r.strokeWidth,H=(O=(E=F?.strokeOpacity)!=null?E:V)!=null?O:L?a.strokeOpacity:r.strokeOpacity;x.crisp=!0,x.fill=Vh(K),x.fillOpacity=$,x.stroke=Vh(G),x.strokeWidth=q,x.strokeOpacity=H,x.cornerRadius=L?a.cornerRadius:r.cornerRadius;const at=(k=f.parent)==null?void 0:k.children.every(ot=>ot.children.length===0),Y=f.parent!=null?h[f.parent.index]:void 0,W=f.parent!=null?p[f.parent.index]:void 0;at===!0&&Y!=null&&W!=null?(x.clipBBox=R,x.x=Y.x+W.left,x.y=Y.y+W.top,x.width=Y.width-(W.left+W.right),x.height=Y.height-(W.top+W.bottom)):(x.clipBBox=void 0,x.x=R.x,x.y=R.y,x.width=R.width,x.height=R.height),x.visible=!0};this.groupSelection.selectByClass(Nr).forEach(f=>m(f.datum,f,!1)),this.highlightSelection.selectByClass(Nr).forEach(f=>{var x;const M=f.datum===g;f.visible=M||((x=g?.contains(f.datum))!=null?x:!1),f.visible&&m(f.datum,f,M)});const y=Array.from(this.rootNode,f=>{var x,M,N,v;const{index:D,children:I}=f,b=h[D],T=(x=this.labelData)==null?void 0:x[D];if(!(b==null||T==null))if(I.length===0){const _={width:b.width,height:b.height,meta:null},A=Oa(T.label,this.properties.tile.label,T.secondaryLabel,this.properties.tile.secondaryLabel,{padding:a.padding},()=>_);if(A==null)return;const{height:E,label:O,secondaryLabel:k}=A,{textAlign:R,verticalAlign:L,padding:w}=a,C=(M=Fh[R])!=null?M:.5,B=b.x+w+(b.width-2*w)*C,z=(N=V_[L])!=null?N:.5,V=b.y+w+E*.5+(b.height-2*w-E)*z;return{label:O!=null?{text:O.text,fontSize:O.fontSize,lineHeight:O.lineHeight,style:this.properties.tile.label,x:B,y:V-(E-O.height)*.5}:void 0,secondaryLabel:k!=null?{text:k.text,fontSize:k.fontSize,lineHeight:k.fontSize,style:this.properties.tile.secondaryLabel,x:B,y:V+(E-k.height)*.5}:void 0,verticalAlign:"middle",textAlign:R}}else{if(T?.label==null)return;{const{padding:_,textAlign:A}=r,E=this.groupTitleHeight(f,b);if(E==null)return;const O=b.width-2*_,{text:k}=to.wrap(T.label,b.width-2*_,1/0,r.label,"never"),R=(v=Fh[A])!=null?v:.5;return{label:{text:k,fontSize:r.label.fontSize,lineHeight:se.lineHeight(r.label.fontSize),style:this.properties.group.label,x:b.x+_+O*R,y:b.y+_+E*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:A}}}}),S=(f,x,M,N)=>{const v=f.children.length===0,D=y[f.index],I=M===0?D?.label:D?.secondaryLabel;if(D==null||I==null){x.visible=!1;return}let b;if(N){const{tile:T,group:_}=n;b=T.secondaryLabel.color,v?M===0&&(b=T.label.color):b=_.label.color}x.text=I.text,x.fontSize=I.fontSize,x.lineHeight=I.lineHeight,x.fontStyle=I.style.fontStyle,x.fontFamily=I.style.fontFamily,x.fontWeight=I.style.fontWeight,x.fill=b??I.style.color,x.textAlign=D.textAlign,x.textBaseline=D.verticalAlign,x.x=I.x,x.y=I.y,x.visible=!0};this.groupSelection.selectByClass(to).forEach(f=>{S(f.datum,f,f.tag,!1)}),this.highlightSelection.selectByClass(to).forEach(f=>{var x;const M=f.datum===g;f.visible=M||((x=g?.contains(f.datum))!=null?x:!1),f.visible&&S(f.datum,f,f.tag,M)})})}updateNodeMidPoint(e){this.rootNode.walk(i=>{const o=e[i.index];o!=null&&(i.midPoint.x=o.x+o.width/2,i.midPoint.y=o.y)})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.nodes())}getTooltipHtml(e){var i;const{datum:o,depth:s}=e,{id:n}=this,{tooltip:a,colorKey:r,colorName:l=r,labelKey:c,secondaryLabelKey:u,sizeKey:h,sizeName:p=h,childrenKey:g}=this.properties,m=e.children.length===0,y=m||this.properties.group.interactive;if(o==null||s==null||!y)return Mr.EMPTY_TOOLTIP_CONTENT;const S=c!=null?o[c]:void 0,f=this.getTileFormat(e,!1),x=(i=f?.fill)!=null?i:this.getNodeFill(e);if(!a.renderer&&!S)return Mr.EMPTY_TOOLTIP_CONTENT;const M=[],N=u!=null?o[u]:void 0;N!=null&&u!==r&&u!==h&&M.push(Ir(N));const v=h!=null?o[h]:void 0;v!=null&&M.push(`${p}: ${Ir(v)}`);const D=r!=null?o[r]:void 0;D!=null&&M.push(`${l}: ${Ir(D)}`);const I=M.join("<br>"),b={title:S,color:m?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:x,content:I};return a.toTooltipHtml(b,{depth:s,datum:o,colorKey:r,labelKey:c,secondaryLabelKey:u,sizeKey:h,title:S,color:x,seriesId:n,childrenKey:g,colorName:l,itemId:void 0,sizeName:p})}};_r.className="TreemapSeries",_r.type="treemap";var U_=_r,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:K_,DEFAULT_FONT_FAMILY:br,DEFAULT_HIERARCHY_FILLS:j_,DEFAULT_HIERARCHY_STROKES:G_,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:rn,EXTENDS_SERIES_DEFAULTS:H_,DEFAULT_LABEL_COLOUR:Uh,FONT_WEIGHT:Kh}=D_,Y_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:U_,solo:!0,themeTemplate:{series:{__extends__:H_,group:{label:{enabled:!0,color:Uh,fontStyle:void 0,fontWeight:Kh.NORMAL,fontSize:12,fontFamily:br,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:rn,fontStyle:void 0,fontWeight:Kh.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:br,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:rn,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:br,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:Uh},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:rn},secondaryLabel:{color:rn},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:t,colorsCount:e,themeTemplateParameters:i})=>{const{properties:o}=i,{fills:s,strokes:n}=t(e),a=o.get(K_),r=o.get(j_),l=o.get(G_);return{fills:s,strokes:n,colorRange:a,undocumentedGroupFills:r,undocumentedGroupStrokes:l}}};import{_Theme as Di}from"ag-charts-community";import{_ModuleSupport as Ni,_Scale as W_,_Scene as jh,_Util as X_}from"ag-charts-community";import{_ModuleSupport as Q_,_Scene as $_}from"ag-charts-community";var{DropShadow:Z_,Label:q_}=$_,{AbstractBarSeriesProperties:J_,BaseProperties:zo,PropertiesArray:tb,SeriesTooltip:eb,Validate:Q,BOOLEAN:ib,COLOR_STRING:Tr,FUNCTION:Gh,LINE_DASH:Hh,NUMBER:ob,OBJECT:Pe,OBJECT_ARRAY:sb,POSITIVE_NUMBER:eo,RATIO:Ar,STRING:io,UNION:Yh}=Q_,ln=class extends zo{};d([Q(Yh(["subtotal","total"],"a total type"))],ln.prototype,"totalType",2),d([Q(ob)],ln.prototype,"index",2),d([Q(io)],ln.prototype,"axisLabel",2);var Wh=class extends zo{};d([Q(Gh,{optional:!0})],Wh.prototype,"renderer",2);var Er=class extends q_{constructor(){super(...arguments),this.placement="end",this.padding=6}};d([Q(Yh(["start","end","inside"],"a placement"))],Er.prototype,"placement",2),d([Q(eo)],Er.prototype,"padding",2);var Ut=class extends zo{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Z_().set({enabled:!1}),this.label=new Er,this.tooltip=new Wh}};d([Q(io,{optional:!0})],Ut.prototype,"name",2),d([Q(Tr)],Ut.prototype,"fill",2),d([Q(Tr)],Ut.prototype,"stroke",2),d([Q(Ar)],Ut.prototype,"fillOpacity",2),d([Q(Ar)],Ut.prototype,"strokeOpacity",2),d([Q(Hh)],Ut.prototype,"lineDash",2),d([Q(eo)],Ut.prototype,"lineDashOffset",2),d([Q(eo)],Ut.prototype,"strokeWidth",2),d([Q(eo)],Ut.prototype,"cornerRadius",2),d([Q(Gh,{optional:!0})],Ut.prototype,"formatter",2),d([Q(Pe)],Ut.prototype,"shadow",2),d([Q(Pe)],Ut.prototype,"label",2),d([Q(Pe)],Ut.prototype,"tooltip",2);var Ii=class extends zo{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};d([Q(ib)],Ii.prototype,"enabled",2),d([Q(Tr)],Ii.prototype,"stroke",2),d([Q(Ar)],Ii.prototype,"strokeOpacity",2),d([Q(Hh)],Ii.prototype,"lineDash",2),d([Q(eo)],Ii.prototype,"lineDashOffset",2),d([Q(eo)],Ii.prototype,"strokeWidth",2);var cn=class extends zo{constructor(){super(...arguments),this.positive=new Ut,this.negative=new Ut,this.total=new Ut}};d([Q(Pe)],cn.prototype,"positive",2),d([Q(Pe)],cn.prototype,"negative",2),d([Q(Pe)],cn.prototype,"total",2);var we=class extends J_{constructor(){super(...arguments),this.item=new cn,this.totals=new tb(ln),this.line=new Ii,this.tooltip=new eb}};d([Q(io)],we.prototype,"xKey",2),d([Q(io)],we.prototype,"yKey",2),d([Q(io,{optional:!0})],we.prototype,"xName",2),d([Q(io,{optional:!0})],we.prototype,"yName",2),d([Q(Pe)],we.prototype,"item",2),d([Q(sb)],we.prototype,"totals",2),d([Q(Pe)],we.prototype,"line",2),d([Q(Pe)],we.prototype,"tooltip",2);var{adjustLabelPlacement:nb,SeriesNodePickMode:ab,fixNumericExtent:Xh,valueProperty:Qh,keyProperty:rb,accumulativeValueProperty:un,trailingAccumulatedValueProperty:lb,ChartAxisDirection:Or,getRectConfig:cb,updateRect:ub,checkCrisp:db,updateLabelNode:hb,prepareBarAnimationFunctions:pb,collapsedStartingBarPosition:gb,resetBarSelectionsFn:yb,seriesLabelFadeInAnimation:mb,resetLabelFn:fb,animationValidation:Sb,DEFAULT_CARTESIAN_DIRECTION_KEYS:xb,DEFAULT_CARTESIAN_DIRECTION_NAMES:vb,isFiniteNumber:$h,computeBarFocusBounds:Mb}=Ni,{Rect:Db,motion:Nb}=jh,{sanitizeHtml:Vo,isContinuous:Zh}=X_,{ContinuousScale:Ib}=W_,Lr=class extends Ni.AbstractBarSeries{constructor(t){super({moduleCtx:t,directionKeys:xb,directionNames:vb,pickModes:[ab.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:yb,label:fb}}),this.properties=new we,this.seriesItemTypes=new Set(["positive","negative","total"])}processData(t){return P(this,null,function*(){var e,i,o;const{xKey:s,yKey:n,totals:a}=this.properties,{data:r=[]}=this;if(!this.properties.isValid()||!this.visible)return;const l=v=>Zh(v)&&Number(v)>=0,c=v=>Zh(v)&&Number(v)<0,u=v=>v==="total"||v==="subtotal",h={missingValue:void 0,invalidValue:void 0},p=[],g=a.reduce((v,D)=>{const I=v.get(D.index);return I?I.push(D):v.set(D.index,[D]),v},new Map);r.forEach((v,D)=>{var I;p.push(v),(I=g.get(D))==null||I.forEach(b=>p.push(X(U({},b.toJson()),{[s]:b.axisLabel})))});const m=[];this.ctx.animationManager.isSkipped()||m.push(Sb());const y=(e=this.getCategoryAxis())==null?void 0:e.scale,S=(i=this.getValueAxis())==null?void 0:i.scale,{isContinuousX:f,xScaleType:x,yScaleType:M}=this.getScaleInformation({xScale:y,yScale:S}),{processedData:N}=yield this.requestDataModel(t,p,{props:[rb(s,x,{id:"xValue"}),un(n,M,X(U({},h),{id:"yCurrent"})),un(n,M,X(U({},h),{missingValue:0,id:"yCurrentTotal"})),un(n,M,X(U({},h),{id:"yCurrentPositive",validation:l})),un(n,M,X(U({},h),{id:"yCurrentNegative",validation:c})),lb(n,M,X(U({},h),{id:"yPrevious"})),Qh(n,M,{id:"yRaw"}),Qh("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:u}),...f?[Ni.SMALLEST_KEY_INTERVAL]:[],...m]});this.smallestDataInterval=(o=N.reduced)==null?void 0:o.smallestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o,smallestDataInterval:s}=this;if(!i||!o)return[];const{keys:[n],values:a}=i.domain,r=o.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if(r?.def.type==="key"&&r?.def.valueType==="category")return n;const l=$h(s)?s:0,c=(e=Ni.extent(n))!=null?e:[NaN,NaN],u=this.getCategoryAxis(),h=!!u?.isReversed(),p=t===Or.Y,g=h===p?0:-l,m=h===p?l:0,y=c[0]+g,S=c[1]+m;return Xh([y,S],u)}else{const l=o.resolveProcessedDataIndexById(this,"yCurrent"),c=a[l],u=[Math.min(0,c[0]),Math.max(0,c[1])];return Xh(u)}}createNodeData(){return P(this,null,function*(){var t,e,i;const{data:o,dataModel:s,smallestDataInterval:n}=this,{line:a}=this.properties,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(o&&r&&l&&s))return;const c=r.scale,u=l.scale,h=r.isReversed(),p=this.getBarDirection()===Or.X,g=(t=Ib.is(c)?c.calcBandwidth(n):c.bandwidth)!=null?t:10;if(((e=this.processedData)==null?void 0:e.type)!=="ungrouped")return;const m={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return m;const y=s.resolveProcessedDataIndexById(this,"yRaw"),S=s.resolveProcessedDataIndexById(this,"xValue"),f=s.resolveProcessedDataIndexById(this,"totalTypeValue"),x=[],M=s.resolveProcessedDataIndexById(this,"yCurrent"),N=s.resolveProcessedDataIndexById(this,"yPrevious"),v=s.resolveProcessedDataIndexById(this,"yCurrentTotal");function D(k,R,L){return k||R?{cumulativeValue:L[v],trailingValue:R?b:0}:{cumulativeValue:L[M],trailingValue:L[N]}}function I(k,R,L,w,C){return k?w:R?(w??0)-(C??0):L}let b=0;const{xKey:T,yKey:_,xName:A,yName:E}=this.properties;(i=this.processedData)==null||i.data.forEach(({keys:k,datum:R,values:L},w)=>{const C=L[f],B=this.isSubtotal(C),z=this.isTotal(C),V=z||B,F=k[S],K=Math.round(c.convert(F)),$=L[y],{cumulativeValue:G,trailingValue:q}=D(z,B,L);V&&(b=G??0);const H=Math.round(u.convert(G)),at=Math.round(u.convert(q)),Y=I(z,B,$,G,q),W=(Y??0)>=0,ot=this.getSeriesItemType(W,C),{fill:J,stroke:mt,strokeWidth:ht,label:ft}=this.getItemConfig(ot),Kt=W?H:at,At=W?at:H,jt=Math.max(ht,Math.abs(At-Kt)),st={x:p?Math.min(Kt,At):K,y:p?K:Math.min(Kt,At),width:p?jt:g,height:p?g:jt},ge={x:st.x+st.width/2,y:st.y+st.height/2},$e=V?H:at,_i=Math.floor(a.strokeWidth)%2/2,Ko=h?H:$e,jo=h?$e:H;let bi,Ti;p?(bi={x:Ko+_i,y:st.y},Ti={x:jo+_i,y:st.y+st.height}):(bi={x:st.x,y:Ko+_i},Ti={x:st.x+st.width,y:jo+_i});const ep={x:h?Ti.x:bi.x,y:h?Ti.y:bi.y,x2:h?bi.x:Ti.x,y2:h?bi.y:Ti.y,size:0};x.push(ep);const ip=this.getLabelText(ft,{itemId:ot==="subtotal"?"total":ot,value:Y,datum:R,xKey:T,yKey:_,xName:A,yName:E},hn=>$h(hn)?hn.toFixed(2):String(hn)),wr={index:w,series:this,itemId:ot,datum:R,cumulativeValue:G??0,xValue:F,yValue:Y,yKey:_,xKey:T,x:st.x,y:st.y,width:st.width,height:st.height,midPoint:ge,fill:J,stroke:mt,strokeWidth:ht,opacity:1,label:U({text:ip},nb({isPositive:(Y??-1)>=0,isVertical:!p,placement:ft.placement,padding:ft.padding,rect:st}))};m.nodeData.push(wr),m.labelData.push(wr)});const O=this.properties.line.enabled;return M!==void 0&&O&&(m.pointData=x),m})}updateSeriesItemTypes(){var t,e;const{dataModel:i,seriesItemTypes:o,processedData:s}=this;if(!i||!s)return;o.clear();const n=i.resolveProcessedDataIndexById(this,"yCurrentPositive"),a=i.resolveProcessedDataIndexById(this,"yCurrentNegative"),r=i.resolveProcessedDataIndexById(this,"totalTypeValue"),l=(t=s.domain.values[n])!=null?t:[],c=(e=s.domain.values[a])!=null?e:[];l.length>0&&o.add("positive"),c.length>0&&o.add("negative");const u=s?.domain.values[r];u&&u.forEach(h=>{(h==="total"||h==="subtotal")&&o.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new Db}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){return P(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)})}updateDatumNodes(t){return P(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:s}=this,{yKey:n,highlightStyle:{item:a}}=this.properties,r=this.getCategoryAxis(),l=db(r?.visibleRange),c=this.getCategoryDirection()===Or.X;e.each((u,h)=>{const p=h.itemId,{fillOpacity:g,strokeOpacity:m,strokeWidth:y,lineDash:S,lineDashOffset:f,cornerRadius:x,formatter:M,shadow:N}=this.getItemConfig(p),v={fill:h.fill,stroke:h.stroke,fillOpacity:g,strokeOpacity:m,lineDash:S,lineDashOffset:f,fillShadow:N,strokeWidth:this.getStrokeWidth(y),cornerRadius:x},D=c?h.width>0:h.height>0,I=cb({datum:h,isHighlighted:i,style:v,highlightStyle:a,formatter:M,seriesId:o,itemId:h.itemId,ctx:s,value:h.yValue,yKey:n});I.crisp=l,I.visible=D,ub({rect:u,config:I})})})}updateLabelSelection(t){return P(this,null,function*(){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const o=e[0].itemId,{label:s}=this.getItemConfig(o),n=s.enabled?e:[];return i.update(n)})}updateLabelNodes(t){return P(this,null,function*(){t.labelSelection.each((e,i)=>{hb(e,this.getItemConfig(i.itemId).label,i.label)})})}getTooltipHtml(t){var e,i,o;const s=this.getCategoryAxis(),n=this.getValueAxis();if(!this.properties.isValid()||!s||!n)return Ni.EMPTY_TOOLTIP_CONTENT;const{id:a}=this,{xKey:r,yKey:l,xName:c,yName:u,tooltip:h}=this.properties,{datum:p,itemId:g,xValue:m,yValue:y}=t,{fill:S,strokeWidth:f,name:x,formatter:M}=this.getItemConfig(g);let N;M&&(N=this.ctx.callbackCache.call(M,{datum:p,value:y,xKey:r,yKey:l,fill:S,strokeWidth:f,highlighted:!1,seriesId:a,itemId:t.itemId}));const v=(i=(e=N?.fill)!=null?e:S)!=null?i:"gray",D=Vo(s.formatDatum(m)),I=Vo(n.formatDatum(y)),b=this.isTotal(g),T=this.isSubtotal(g);let _;b?_="Total":T?_="Subtotal":_=(o=x??u)!=null?o:l;const A=Vo(u),E=`<b>${Vo(c??r)}</b>: ${D}<br/><b>${Vo(_)}</b>: ${I}`;return h.toTooltipHtml({title:A,content:E,backgroundColor:v},{seriesId:a,itemId:g,datum:p,xKey:r,yKey:l,xName:c,yName:u,color:v,title:A})}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,o=[],s=n=>n.charAt(0).toUpperCase()+n.substring(1);return i.forEach(n=>{const{fill:a,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:u,name:h}=this.getItemConfig(n);o.push({legendType:"category",id:e,itemId:n,seriesId:e,enabled:!0,label:{text:h??s(n)},marker:{fill:a,stroke:r,fillOpacity:l,strokeOpacity:c,strokeWidth:u}})}),o}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,contextData:i,paths:o}){const s=pb(gb(this.isVertical(),this.axes,"normal"));Nb.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s),mb(this,"labels",this.ctx.animationManager,e);const{pointData:n}=i;if(!n)return;const[a]=o;this.isVertical()?this.animateConnectorLinesVertical(a,n):this.animateConnectorLinesHorizontal(a,n)}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),s=o?.isReversed(),n=s?(c,u)=>c<u:(c,u)=>c>u,a=o?.scale.convert(0),r=e.reduce((c,u)=>(n(u.x,c)&&(c=u.x),c),s?1/0:0),l=(c,u,h,p,g)=>(c-u)/(h-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:a,to:r,ease:Ni.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((u,h)=>{const p=l(c,a,r,a,u.x),g=l(c,a,r,a,u.x2);h!==0&&i.lineTo(p,u.y),i.moveTo(g,u.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),s=o?.isReversed(),n=s?(c,u)=>c>u:(c,u)=>c<u,a=o?.scale.convert(0),r=e.reduce((c,u)=>(n(u.y,c)&&(c=u.y),c),s?0:1/0),l=(c,u,h,p,g)=>(c-u)/(h-u)*(g-p)+p;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:a,to:r,ease:Ni.Motion.easeOut,collapsable:!1,onUpdate(c){i.clear(!0),e.forEach((u,h)=>{const p=l(c,a,r,a,u.y),g=l(c,a,r,a,u.y2);h!==0&&i.lineTo(u.x,p),i.moveTo(u.x2,g)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){return P(this,null,function*(){this.resetConnectorLinesPath({contextData:t.contextData,paths:t.paths})})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e;this.updateLineNode(i);const{path:o}=i;o.clear(!0);const{pointData:s}=t;s&&(s.forEach((n,a)=>{a!==0&&o.lineTo(n.x,n.y),o.moveTo(n.x2,n.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:s,lineDashOffset:n}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:o,lineDash:s,lineDashOffset:n,lineJoin:"round",pointerEvents:jh.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:t,seriesRect:e}){var i;return Mb((i=this.contextNodeData)==null?void 0:i.nodeData[t],this.contentGroup,e)}};Lr.className="WaterfallSeries",Lr.type="waterfall";import{_Theme as Fo}from"ag-charts-community";var kr={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:Fo.FONT_WEIGHT.NORMAL,fontSize:12,fontFamily:Fo.DEFAULT_FONT_FAMILY,color:Fo.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"end"}},_b={series:{__extends__:Fo.EXTENDS_SERIES_DEFAULTS,item:{positive:kr,negative:kr,total:kr},line:{stroke:Fo.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},bb={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:Lr,defaultAxes:[{type:Di.CARTESIAN_AXIS_TYPE.CATEGORY,position:Di.POSITION.BOTTOM},{type:Di.CARTESIAN_AXIS_TYPE.NUMBER,position:Di.POSITION.LEFT}],themeTemplate:_b,swapDefaultAxesCondition:({direction:t})=>t==="horizontal",paletteFactory:({takeColors:t,colorsCount:e,userPalette:i,themeTemplateParameters:o})=>{const{properties:s}=o,{fills:n,strokes:a}=t(e);return i?{item:{positive:{fill:n[0],stroke:a[0]},negative:{fill:n[1],stroke:a[1]},total:{fill:n[2],stroke:a[2]}}}:{item:{positive:s.get(Di.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:s.get(Di.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:s.get(Di.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};function Tb(){Ho.moduleRegistry.register(Gp,ag,ty,cy,Dy,aS,WS,SN,MS,Ay,Yy,Qy,gm,Uv,dv,DM,mD,UM,_m,bf,Lx,rN,pg,aI,rI,GI,JI,jg,Zg,c_,L0,M_,Pm,Y_,bb,df),Ho.enterpriseModule.isEnterprise=!0,Ho.enterpriseModule.licenseManager=t=>{var e,i;return new Af((i=(e=t.container)==null?void 0:e.ownerDocument)!=null?i:typeof document>"u"?void 0:document)},Ho.enterpriseModule.injectWatermark=kf}export*from"ag-charts-community";Tb();export{lp as AgCharts,cp as time};
