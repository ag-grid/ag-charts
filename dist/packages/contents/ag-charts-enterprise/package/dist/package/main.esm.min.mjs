var va=Object.defineProperty,pc=Object.defineProperties,gc=Object.getOwnPropertyDescriptor,yc=Object.getOwnPropertyDescriptors,Vi=Object.getOwnPropertySymbols,mc=Object.getPrototypeOf,Aa=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,fc=Reflect.get,yt=Math.pow,Da=(s,t,e)=>t in s?va(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,K=(s,t)=>{for(var e in t||(t={}))Aa.call(t,e)&&Da(s,e,t[e]);if(Vi)for(var e of Vi(t))Ia.call(t,e)&&Da(s,e,t[e]);return s},_t=(s,t)=>pc(s,yc(t)),Na=(s,t)=>{var e={};for(var i in s)Aa.call(s,i)&&t.indexOf(i)<0&&(e[i]=s[i]);if(s!=null&&Vi)for(var i of Vi(s))t.indexOf(i)<0&&Ia.call(s,i)&&(e[i]=s[i]);return e},h=(s,t,e,i)=>{for(var o=i>1?void 0:i?gc(t,e):t,a=s.length-1,n;a>=0;a--)(n=s[a])&&(o=(i?n(t,e,o):n(o))||o);return i&&o&&va(t,e,o),o},Ht=(s,t,e)=>fc(mc(s),e,t),C=(s,t,e)=>new Promise((i,o)=>{var a=l=>{try{r(e.next(l))}catch(c){o(c)}},n=l=>{try{r(e.throw(l))}catch(c){o(c)}},r=l=>l.done?i(l.value):Promise.resolve(l.value).then(a,n);r((e=e.apply(s,t)).next())});import"ag-charts-community";import{AgCharts as xc,time as Sc}from"ag-charts-community";import{_ModuleSupport as X}from"ag-charts-community";import{_Theme as ba}from"ag-charts-community";var Ta={__extends__:ba.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:ba.EXTENDS_AXES_GRID_LINE_DEFAULTS}};import{_ModuleSupport as Mc,_Scale as vc,_Util as Ac}from"ag-charts-community";function ws(s,t,e){const i=(a,n,r,l)=>{let c=s[0];for(let d=a;r>0?d<=n:d>n;d+=r){const u=s[d];if(l(c,u))return!0;c=u}return!1},o=Math.floor(s.length/2);return i(t,o,t,e)?!0:i(s.length-t,o,-t,e)}import{_ModuleSupport as Ps,_Scene as _a,_Util as Ic}from"ag-charts-community";import{_ModuleSupport as Dc,_Scale as Ea,_Scene as Nc,_Util as bc}from"ag-charts-community";import{_ModuleSupport as Tc,_Scene as _c,_Util as Ec}from"ag-charts-community";var{ChartAxisDirection:Lc,Layers:zs,ARRAY:Oc,BOOLEAN:Bs,COLOR_STRING:js,FONT_STYLE:Rc,FONT_WEIGHT:kc,LINE_DASH:Cc,NUMBER:La,POSITIVE_NUMBER:wc,RATIO:Oa,STRING:Ra,UNION:Pc,AND:zc,Validate:ut,MATCHING_CROSSLINE_TYPE:ka}=Tc,{Group:Ca}=_c,{createId:Bc}=Ec,Gt=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};h([ut(Bs,{optional:!0})],Gt.prototype,"enabled",2),h([ut(Ra,{optional:!0})],Gt.prototype,"text",2),h([ut(Rc,{optional:!0})],Gt.prototype,"fontStyle",2),h([ut(kc,{optional:!0})],Gt.prototype,"fontWeight",2),h([ut(wc)],Gt.prototype,"fontSize",2),h([ut(Ra)],Gt.prototype,"fontFamily",2),h([ut(La)],Gt.prototype,"padding",2),h([ut(js,{optional:!0})],Gt.prototype,"color",2),h([ut(Bs,{optional:!0})],Gt.prototype,"parallel",2);var Ot=class da{constructor(){this.id=Bc(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new Gt,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Lc.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new Ca({name:`${this.id}`,layer:!0,zIndex:da.LINE_LAYER_ZINDEX}),this.labelGroup=new Ca({name:`${this.id}`,layer:!0,zIndex:da.LABEL_LAYER_ZINDEX})}calculatePadding(){}setSectorNodeProps(t){var e,i,o;t.fill=this.fill,t.fillOpacity=(e=this.fillOpacity)!=null?e:1,t.stroke=this.stroke,t.strokeOpacity=(i=this.strokeOpacity)!=null?i:1,t.strokeWidth=(o=this.strokeWidth)!=null?o:1,t.lineDash=this.lineDash}setLabelNodeProps(t,e,i,o,a){const{label:n}=this;t.x=e,t.y=i,t.text=n.text,t.textAlign="center",t.textBaseline=o,t.rotation=a,t.rotationCenterX=e,t.rotationCenterY=i,t.fill=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.visible=!0}calculateLayout(t){}};Ot.LINE_LAYER_ZINDEX=zs.SERIES_CROSSLINE_LINE_ZINDEX,Ot.RANGE_LAYER_ZINDEX=zs.SERIES_CROSSLINE_RANGE_ZINDEX,Ot.LABEL_LAYER_ZINDEX=zs.SERIES_LABEL_ZINDEX,h([ut(Bs,{optional:!0})],Ot.prototype,"enabled",2),h([ut(Pc(["range","line"],"a crossLine type"),{optional:!0})],Ot.prototype,"type",2),h([ut(zc(ka("range"),Oc.restrict({length:2})),{optional:!0})],Ot.prototype,"range",2),h([ut(ka("value"),{optional:!0})],Ot.prototype,"value",2),h([ut(js,{optional:!0})],Ot.prototype,"fill",2),h([ut(Oa,{optional:!0})],Ot.prototype,"fillOpacity",2),h([ut(js,{optional:!0})],Ot.prototype,"stroke",2),h([ut(La,{optional:!0})],Ot.prototype,"strokeWidth",2),h([ut(Oa,{optional:!0})],Ot.prototype,"strokeOpacity",2),h([ut(Cc,{optional:!0})],Ot.prototype,"lineDash",2);var wa=Ot,{ChartAxisDirection:jc,validateCrossLineValues:Fc}=Dc,{Path:Pa,Sector:Uc,Text:Vc}=Nc,{normalizeAngle360:Fs,isNumberEqual:za}=bc,Ba=class ks extends wa{constructor(){super(),this.direction=jc.X,this.polygonNode=new Pa,this.sectorNode=new Uc,this.lineNode=new Pa,this.labelNode=new Vc,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e,shape:i,type:o,value:a,range:n}=this;if(!e||!o||!Fc(o,a,n,e)){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=t,this.labelGroup.visible=t,o==="line"&&i==="circle"&&e instanceof Ea.BandScale&&(this.type="range",this.range=[a,a]),this.updateLineNode(t),this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t)}updateLineNode(t){var e,i;const{scale:o,type:a,value:n,lineNode:r}=this;let l;if(!t||a!=="line"||!o||isNaN(l=o.convert(n))){r.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:d}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=(e=this.strokeOpacity)!=null?e:1,r.strokeWidth=(i=this.strokeWidth)!=null?i:1,r.fill=void 0,r.lineDash=this.lineDash;const u=d*Math.cos(l),p=d*Math.sin(l),g=c*Math.cos(l),f=c*Math.sin(l);r.path.clear({trackChanges:!0}),r.path.moveTo(g,f),r.path.lineTo(u,p),this.group.zIndex=ks.LINE_LAYER_ZINDEX}updatePolygonNode(t){var e;const{polygonNode:i,range:o,scale:a,shape:n,type:r}=this;let l;if(!t||r!=="range"||n!=="polygon"||!a||!o||!(l=(e=a.ticks)==null?void 0:e.call(a))){i.visible=!1;return}const{axisInnerRadius:c,axisOuterRadius:d}=this,u=l.indexOf(o[0]),p=l.indexOf(o[1]),f=(u<=p?l.slice(u,p+1):l.slice(u).concat(l.slice(0,p+1))).map(y=>a.convert(y));i.visible=!0,this.setSectorNodeProps(i);const{path:m}=i;m.clear({trackChanges:!0}),f.forEach((y,M)=>{const v=d*Math.cos(y),A=d*Math.sin(y);M===0?m.moveTo(v,A):m.lineTo(v,A)}),c===0?m.lineTo(0,0):f.slice().reverse().forEach(y=>{const M=c*Math.cos(y),v=c*Math.sin(y);m.lineTo(M,v)}),i.path.closePath(),this.group.zIndex=ks.RANGE_LAYER_ZINDEX}updateSectorNode(t){var e;const{sectorNode:i,range:o,scale:a,shape:n,type:r}=this;if(!t||r!=="range"||n!=="circle"||!a||!o){i.visible=!1;return}const{axisInnerRadius:l,axisOuterRadius:c}=this,d=o.map(g=>a.convert(g)),u=(e=a.step)!=null?e:0,p=a instanceof Ea.BandScale?u/2:0;i.visible=!0,this.setSectorNodeProps(i),i.centerX=0,i.centerY=0,i.innerRadius=l,i.outerRadius=c,i.startAngle=d[0]-p,i.endAngle=d[1]+p,this.group.zIndex=ks.RANGE_LAYER_ZINDEX}updateLabelNode(t){var e,i;const{label:o,labelNode:a,range:n,scale:r,type:l}=this;if(!t||o.enabled===!1||!o.text||!r||l==="range"&&!n){a.visible=!0;return}const{axisInnerRadius:c,axisOuterRadius:d}=this;let u,p,g,f;if(l==="line"){const m=Fs(r.convert(this.value)),y=3*Math.PI/2,M=za(m,y)||m>y||m<Math.PI/2,v=(c+d)/2*Math.cos(m),A=(c+d)/2*Math.sin(m);u=v+o.padding*Math.cos(m+Math.PI/2),p=A+o.padding*Math.sin(m+Math.PI/2),f=M?"top":"bottom",g=M?m:m-Math.PI}else{const[m,y]=n.map(S=>Fs(r.convert(S)));let M=(m+y)/2;m>y&&(M-=Math.PI),M=Fs(M);const v=(za(M,0)||M>0)&&M<Math.PI;let A;const x=(i=(e=r.ticks)==null?void 0:e.call(r))!=null?i:[];this.shape==="circle"||x.length<3?A=d-o.padding:A=d*Math.cos(Math.PI/x.length)-o.padding,u=A*Math.cos(M),p=A*Math.sin(M),f=v?"bottom":"top",g=v?M-Math.PI/2:M+Math.PI/2}this.setLabelNodeProps(a,u,p,f,g)}};Ba.className="AngleCrossLine";var ja=Ba,{AND:Yc,assignJsonApplyConstructedArray:Hc,ChartAxisDirection:Gc,GREATER_THAN:Kc,NUMBER:Fa,UNION:Wc,ProxyOnWrite:Xc,Validate:Us}=Ps,{Path:Qc,Text:Ua}=_a,{angleBetween:$c,isNumberEqual:Qe,toRadians:Vs,normalizeAngle360:$e}=Ic,Ys=class extends Ps.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};h([Us(Wc(["fixed","parallel","perpendicular"],"a label orientation"))],Ys.prototype,"orientation",2);var Yi=class extends Ps.PolarAxis{constructor(s,t){super(s,t),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new Qc),this.computeRange=()=>{const e=$e(-Math.PI/2+Vs(this.startAngle));let i=this.endAngle==null?e+Math.PI*2:-Math.PI/2+Vs(this.endAngle);i<e&&(i+=2*Math.PI),this.range=[e,i]},this.includeInvisibleDomains=!0}get direction(){return Gc.X}assignCrossLineArrayConstructor(s){Hc(s,ja)}createLabel(){return new Ys}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:s,gridLength:t}=this;return $c(s[0],s[1])*t}updatePosition(){const{translation:s,axisGroup:t,gridGroup:e,crossLineGroup:i}=this,o=Math.floor(s.x),a=Math.floor(s.y);t.translationX=o,t.translationY=a,e.translationX=o,e.translationY=a,i.translationX=o,i.translationY=a}updateRadiusLine(){const s=this.radiusLine,{path:t}=s;t.clear({trackChanges:!0});const{points:e,closePath:i}=this.getAxisLinePoints();e.forEach(({x:o,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:d=0})=>{r?t.arc(o,a,l,c,d):n?t.moveTo(o,a):t.lineTo(o,a)}),i&&t.closePath(),s.visible=this.line.enabled,s.stroke=this.line.color,s.strokeWidth=this.line.width,s.fill=void 0}getAxisLinePoints(){var s;const{scale:t,shape:e,gridLength:i}=this,[o,a]=this.range,n=Qe(a-o,2*Math.PI),r=[];if(e==="circle")n?(r.push({x:i,y:0,moveTo:!0}),r.push({x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(r.push({x:i*Math.cos(o),y:i*Math.sin(o),moveTo:!0}),r.push({x:0,y:0,radius:i,startAngle:$e(o),endAngle:$e(a),arc:!0,moveTo:!1}));else if(e==="polygon"){const l=(((s=t.ticks)==null?void 0:s.call(t))||[]).map(c=>t.convert(c));l.length>2&&l.forEach((c,d)=>{const u=i*Math.cos(c),p=i*Math.sin(c),g=d===0;r.push({x:u,y:p,moveTo:g})})}return{points:r,closePath:n}}updateGridLines(){const{scale:s,gridLength:t,gridLine:{enabled:e,style:i,width:o},innerRadiusRatio:a}=this;if(!(i&&t>0))return;const n=this.tickData,r=t*a,l=i.length,c=d=>d.value;this.gridLineGroupSelection.update(e?n:[],void 0,c).each((d,u,p)=>{const{value:g}=u,{stroke:f,lineDash:m}=i[p%l],y=s.convert(g);d.x1=r*Math.cos(y),d.y1=r*Math.sin(y),d.x2=t*Math.cos(y),d.y2=t*Math.sin(y),d.stroke=f,d.strokeWidth=o,d.lineDash=m,d.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:s,tickLabelGroupSelection:t}=this,e=this.tickData;t.update(s.enabled?e:[]).each((i,o,a)=>{const n=this.labelData[a];if(!n||n.hidden){i.visible=!1;return}i.text=n.text,i.setFont(s),i.fill=s.color,i.x=n.x,i.y=n.y,i.textAlign=n.textAlign,i.textBaseline=n.textBaseline,i.visible=!0,n.rotation?(i.rotation=n.rotation,i.rotationCenterX=n.x,i.rotationCenterY=n.y):i.rotation=0})}updateTickLines(){const{scale:s,gridLength:t,tick:e,tickLineGroupSelection:i}=this,o=this.tickData;i.update(e.enabled?o:[]).each((a,n)=>{const{value:r}=n,l=s.convert(r),c=Math.cos(l),d=Math.sin(l);a.x1=t*c,a.y1=t*d,a.x2=(t+e.size)*c,a.y2=(t+e.size)*d,a.stroke=e.color,a.strokeWidth=e.width})}createLabelNodeData(s,t,e){const{label:i,gridLength:o,scale:a,tick:n}=this;if(!i.enabled)return[];const r=new Ua,l=e.x-this.translation.x,c=e.x+e.width-this.translation.x,d=s.map((u,p)=>{var g;const{value:f}=u,m=o+i.padding+n.size,y=a.convert(f),M=Math.cos(y),v=Math.sin(y),A=m*M,x=m*v,{textAlign:S,textBaseline:I}=this.getLabelAlign(y),D=p===s.length-1&&f!==s[0]&&Qe($e(y),$e(a.convert(s[0]))),b=this.getLabelRotation(y);let L=String(f);if(i.formatter){const{callbackCache:E}=this.moduleCtx;L=(g=E.call(i.formatter,{value:f,index:p}))!=null?g:""}r.text=L,r.x=A,r.y=x,r.setFont(i),r.textAlign=S,r.textBaseline=I,r.rotation=b,b&&(r.rotationCenterX=A,r.rotationCenterY=x);let N=b?r.computeTransformedBBox():r.computeBBox();if(N&&t.hideWhenNecessary&&!b){const E=l-N.x,T=N.x+N.width-c,_=1;if(E>_||T>_){const O=N.width-Math.max(E,T);({text:L}=Ua.wrap(L,O,1/0,i,"never")),L==="\u2026"&&(L="",N=void 0),r.text=L,N=r.computeBBox()}}return{text:L,x:A,y:x,textAlign:S,textBaseline:I,hidden:L===""||u.hidden||D,rotation:b,box:N}});return i.avoidCollisions&&this.avoidLabelCollisions(d),d}computeLabelsBBox(s,t){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,s,t);const e=this.labelData.map(({box:i})=>i).filter(i=>i!=null);return!this.label.enabled||e.length===0?null:_a.BBox.merge(e)}getLabelOrientation(){const{label:s}=this;return s instanceof Ys?s.orientation:"fixed"}getLabelRotation(s){var t;let e=Vs((t=this.label.rotation)!=null?t:0);s=$e(s);const i=this.getLabelOrientation();return i==="parallel"?(e+=s,s>=0&&s<Math.PI?e-=Math.PI/2:e+=Math.PI/2):i==="perpendicular"&&(e+=s,s>=Math.PI/2&&s<3*Math.PI/2&&(e+=Math.PI)),e}getLabelAlign(s){const t=Math.cos(s),e=Math.sin(s);let i,o;const a=this.getLabelOrientation(),n=Qe(t,0),r=Qe(e,0),l=Qe(t,1),c=Qe(e,-1),d=t>0&&!n,u=e>0&&!r;return a==="parallel"?(i="center",o=l&&r||u?"top":"bottom"):a==="perpendicular"?(i=c||d?"left":"right",o="middle"):(i=n?"center":d?"left":"right",o=r?"middle":u?"top":"bottom"),{textAlign:i,textBaseline:o}}updateCrossLines(){var s;(s=this.crossLines)==null||s.forEach(t=>{if(t instanceof ja){const{shape:e,gridLength:i,innerRadiusRatio:o}=this;t.shape=e,t.axisOuterRadius=i,t.axisInnerRadius=i*o}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};h([Xc("rotation"),Us(Fa.restrict({min:0,max:360}))],Yi.prototype,"startAngle",2),h([Us(Yc(Fa.restrict({min:0,max:720}),Kc("startAngle")),{optional:!0})],Yi.prototype,"endAngle",2);var{RATIO:Va,Validate:Ya}=Mc,{BandScale:Zc}=vc,{isNumberEqual:Ha}=Ac,Ze=class extends Yi{constructor(s){super(s,new Zc),this.groupPaddingInner=0,this.paddingInner=0}generateAngleTicks(){var s,t;const{scale:e,tick:i,gridLength:o}=this,a=(t=(s=i.values)!=null?s:e.ticks())!=null?t:[];if(a.length<2||isNaN(i.minSpacing))return a.map(d=>({value:d,visible:!0}));const n=a[0],r=e.convert(n),l=o*Math.cos(r),c=o*Math.sin(r);for(let d=1;d<a.length-1;d++){const u=a[d],p=e.convert(u);if(p-r>Math.PI)break;const g=o*Math.cos(p),f=o*Math.sin(p);if(Math.sqrt(yt(g-l,2)+yt(f-c,2))>i.minSpacing){const y=new Set([n]);return ws(a,d,(M,v)=>{y.add(v)}),a.map(M=>{const v=y.has(M);return{value:M,visible:v}})}}return[{value:n,visible:!0}]}avoidLabelCollisions(s){let{minSpacing:t}=this.label;if(Number.isFinite(t)||(t=0),s.length<3)return;const e=(l,c)=>{if(l.hidden||c.hidden)return!1;const d=l.box.clone().grow(t/2),u=c.box.clone().grow(t/2);return d.collidesBBox(u)},i=s[0],o=s.at(-1),a=new Set([i]),n=Ha(i.x,o.x)&&Ha(i.y,o.y),r=Math.floor(s.length/2);for(let l=1;l<=r;l++){const c=n?s.slice(0,-1):s;if(!ws(c,l,e)){ws(c,l,(u,p)=>{a.add(p)});break}}s.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}};Ze.className="AngleCategoryAxis",Ze.type="angle-category",h([Ya(Va)],Ze.prototype,"groupPaddingInner",2),h([Ya(Va)],Ze.prototype,"paddingInner",2);var qc={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:Ze,themeTemplate:Ta};import{_ModuleSupport as Ga,_Util as Jc}from"ag-charts-community";import{_Scale as th,_Util as eh}from"ag-charts-community";var{LinearScale:ih,Invalidating:sh}=th,{isNumberEqual:oh,range:Ka}=eh,Wa=class extends ih{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some(o=>!isFinite(o)))return[];this.refresh();const[s,t]=this.getDomain(),{interval:e}=this;if(e){const o=Math.abs(e);if(!this.isDenseInterval({start:s,stop:t,interval:o}))return Ka(s,t,o)}const i=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(s,t);return Ka(s,t,i)}hasNiceRange(){const s=this.range.slice().sort((e,i)=>e-i);return[Math.PI,2*Math.PI].some(e=>oh(e,s[1]-s[0]))}getNiceStepAndTickCount(){const[s,t]=this.niceDomain;let e=this.getTickStep(s,t);const i=isNaN(this.maxTickCount)?1/0:this.maxTickCount,o=Math.abs(t-s)/e;let a=Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)));return a>i&&(a/=2,e*=2),{count:a,step:e}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const s=this.niceDomain[0]>this.niceDomain[1],t=s?this.niceDomain[1]:this.niceDomain[0],{step:e,count:i}=this.getNiceStepAndTickCount(),o=1/e,a=e>=1?Math.ceil(t/e+i)*e:Math.ceil((t+i*e)*o)/o;this.niceDomain=s?[a,t]:[t,a],this.niceTickStep=e}getPixelRange(){return this.arcLength}};h([sh],Wa.prototype,"arcLength",2);var{AND:Xa,Default:Hs,GREATER_THAN:ah,LESS_THAN:nh,NUMBER_OR_NAN:Qa,MIN_SPACING:rh,Validate:Gs}=Ga,{angleBetween:lh,isNumberEqual:$a,normalisedExtentWithMetadata:ch}=Jc,Za=class extends Ga.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};h([Gs(rh),Hs(NaN)],Za.prototype,"maxSpacing",2);var mi=class extends Yi{constructor(s){super(s,new Wa),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(s){const{min:t,max:e}=this,{extent:i,clipped:o}=ch(s,t,e);return{domain:i,clipped:o}}createTick(){return new Za}getRangeArcLength(){const{range:s}=this,t=Math.min(...s),e=Math.max(...s),i=lh(t,e)||2*Math.PI,o=this.gridLength;return i*o}generateAngleTicks(){var s;const t=this.getRangeArcLength(),{scale:e,tick:i,range:o}=this,{minSpacing:a=NaN,maxSpacing:n=NaN}=i,r=n?Math.floor(t/n):1,l=a?Math.floor(t/a):1/0,c=Math.floor(4/Math.PI*Math.abs(o[0]-o[1]));return e.tickCount=Math.max(r,Math.min(l,c)),e.minTickCount=r,e.maxTickCount=l,e.arcLength=t,((s=i.values)!=null?s:e.ticks()).map(u=>({value:u,visible:!0}))}avoidLabelCollisions(s){let{minSpacing:t}=this.label;Number.isFinite(t)||(t=0);const e=(a,n)=>{if(a.hidden||n.hidden)return!1;const r=a.box.clone().grow(t/2),l=n.box.clone().grow(t/2);return r.collidesBBox(l)},i=s[0],o=s.at(-1);i!==o&&$a(i.x,o.x)&&$a(i.y,o.y)&&(o.hidden=!0);for(let a=1;a<s.length;a*=2){let n=!1;for(let r=a;r<s.length;r+=a){const l=s[r],c=s[r-a];if(e(c,l)){n=!0;break}}if(!n){s.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}s.forEach((a,n)=>{n>0&&(a.hidden=!0,a.box=void 0)})}};mi.className="AngleNumberAxis",mi.type="angle-number",h([Gs(Xa(Qa,nh("max"))),Hs(NaN)],mi.prototype,"min",2),h([Gs(Xa(Qa,ah("min"))),Hs(NaN)],mi.prototype,"max",2);var hh={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:mi,themeTemplate:Ta};import{_Theme as Ks}from"ag-charts-community";var qa={__extends__:Ks.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:Ks.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:Ks.EXTENDS_AXES_TICK_DEFAULTS}};import{_ModuleSupport as dh,_Scale as uh}from"ag-charts-community";import{_ModuleSupport as Hi,_Scene as ph,_Util as gh}from"ag-charts-community";import{_ModuleSupport as yh,_Scale as Ja,_Scene as mh,_Util as Ws}from"ag-charts-community";var{ChartAxisDirection:fh,Validate:xh,DEGREE:Sh,validateCrossLineValues:Mh}=yh,{Path:vh,Sector:Ah,Text:Ih}=mh,{normalizeAngle360:Dh,toRadians:Nh,isNumberEqual:bh}=Ws,tn=class extends Gt{constructor(){super(...arguments),this.positionAngle=void 0}};h([xh(Sh,{optional:!0})],tn.prototype,"positionAngle",2);var en=class ua extends wa{constructor(){super(),this.direction=fh.Y,this.label=new tn,this.polygonNode=new vh,this.sectorNode=new Ah,this.labelNode=new Ih,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:e,type:i,value:o,range:a}=this;if(!e||!i||!Mh(i,o,a,e)){this.group.visible=!1,this.labelGroup.visible=!1;return}i==="line"&&e instanceof Ja.BandScale&&(this.type="range",this.range=[o,o]),this.updateRadii();const{innerRadius:n,outerRadius:r}=this;t&&(t=n>=this.axisInnerRadius&&r<=this.axisOuterRadius),this.group.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.group.zIndex=this.type==="line"?ua.LINE_LAYER_ZINDEX:ua.RANGE_LAYER_ZINDEX}updateRadii(){var t;const{range:e,scale:i,type:o,axisInnerRadius:a,axisOuterRadius:n}=this;if(!i)return{innerRadius:0,outerRadius:0};const r=d=>n+a-d;let l=0,c=0;if(o==="line")l=r(i.convert(this.value)),c=l;else{const d=Math.abs((t=i?.bandwidth)!=null?t:0),u=e.map(p=>i.convert(p));l=r(Math.max(...u)),c=r(Math.min(...u))+d}this.outerRadius=l,this.innerRadius=c}drawPolygon(t,e,i){e.forEach((o,a)=>{const n=t*Math.cos(o),r=t*Math.sin(o);a===0?i.path.moveTo(n,r):i.path.lineTo(n,r)}),i.path.closePath()}updatePolygonNode(t){const{gridAngles:e,polygonNode:i,scale:o,shape:a,type:n,innerRadius:r,outerRadius:l}=this;if(!t||a!=="polygon"||!o||!e){i.visible=!1;return}i.visible=!0;const c=this.getPadding();i.path.clear({trackChanges:!0}),this.drawPolygon(l-c,e,i);const d=e.slice().reverse(),u=n==="line"?l-c:r+c;this.drawPolygon(u,d,i),this.setSectorNodeProps(i)}updateSectorNode(t){const{axisInnerRadius:e,axisOuterRadius:i,scale:o,sectorNode:a,shape:n,innerRadius:r,outerRadius:l}=this;if(!t||n!=="circle"||!o){a.visible=!1;return}a.visible=!0,a.startAngle=0,a.endAngle=2*Math.PI;const c=this.getPadding();a.innerRadius=Ws.clamp(e,r+c,i),a.outerRadius=Ws.clamp(e,l-c,i),this.setSectorNodeProps(a)}updateLabelNode(t){var e,i;const{innerRadius:o,label:a,labelNode:n,scale:r,shape:l,type:c}=this;if(!t||a.enabled===!1||!a.text||!r){n.visible=!1;return}const d=Dh(Nh(((e=a.positionAngle)!=null?e:0)-90)),u=(bh(d,0)||d>0)&&d<Math.PI,p=u?d-Math.PI/2:d+Math.PI/2;let g=0;const f=(i=this.gridAngles)!=null?i:[];c==="line"?g=o+a.padding:l==="circle"||f.length<3?g=o-a.padding:g=o*Math.cos(Math.PI/f.length)-a.padding;const m=g*Math.cos(d),y=g*Math.sin(d);let M;c==="line"?M=u?"top":"bottom":M=u?"bottom":"top",this.setLabelNodeProps(n,m,y,M,p)}getPadding(){var t,e;const{scale:i}=this;if(!i)return 0;const o=Math.abs((t=i.bandwidth)!=null?t:0),a=Math.abs((e=i.step)!=null?e:0);return i instanceof Ja.BandScale?(a-o)/2:0}};en.className="RadiusCrossLine";var sn=en,{assignJsonApplyConstructedArray:Th,ChartAxisDirection:_h,Default:on,Layers:Eh,DEGREE:an,MIN_SPACING:Lh,BOOLEAN:Oh,Validate:Gi}=Hi,{Caption:Rh,Group:kh,Path:Ch,Selection:wh}=ph,{isNumberEqual:Ph,normalizeAngle360:nn,toRadians:zh}=gh,rn=class extends Hi.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};h([Gi(Lh),on(NaN)],rn.prototype,"maxSpacing",2);var Xs=class extends Hi.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};h([Gi(Oh,{optional:!0})],Xs.prototype,"autoRotate",2),h([Gi(an)],Xs.prototype,"autoRotateAngle",2);var Qs=class extends Hi.PolarAxis{constructor(s,t){super(s,t),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new kh({name:`${this.id}-gridPaths`,zIndex:Eh.AXIS_GRID_ZINDEX})),this.gridPathSelection=wh.select(this.gridPathGroup,Ch)}get direction(){return _h.Y}assignCrossLineArrayConstructor(s){Th(s,sn)}getAxisTransform(){const s=this.scale.range[0],{translation:t,positionAngle:e,innerRadiusRatio:i}=this,o=s*i,a=zh(e);return{translationX:t.x,translationY:t.y-s-o,rotation:a,rotationCenterX:0,rotationCenterY:s+o}}updateSelections(s,t,e){var i;super.updateSelections(s,t,e);const{gridLine:{enabled:o,style:a,width:n},shape:r}=this;if(!a)return;const l=this.prepareTickData(t),c=a.length,d=(y,M)=>{const{stroke:v,lineDash:A}=a[M%c];y.stroke=v,y.strokeWidth=n,y.lineDash=A,y.fill=void 0},[u,p]=(i=this.gridRange)!=null?i:[0,2*Math.PI],g=Ph(p-u,2*Math.PI),f=(y,M)=>{const{path:v}=y;v.clear({trackChanges:!0});const A=this.getTickRadius(M);g?(v.moveTo(A,0),v.arc(0,0,A,0,2*Math.PI)):(v.moveTo(A*Math.cos(u),A*Math.sin(u)),v.arc(0,0,A,nn(u),nn(p))),g&&v.closePath()},m=(y,M)=>{const{path:v}=y,A=this.gridAngles;if(v.clear({trackChanges:!0}),!A||A.length<3)return;const x=this.getTickRadius(M);A.forEach((S,I)=>{const D=x*Math.cos(S),b=x*Math.sin(S);I===0?v.moveTo(D,b):v.lineTo(D,b),A.forEach((L,N)=>{const E=x*Math.cos(L),T=x*Math.sin(L);N===0?v.moveTo(E,T):v.lineTo(E,T)}),v.closePath()}),v.closePath()};this.gridPathSelection.update(o?l:[]).each((y,M,v)=>{d(y,v),r==="circle"?f(y,M):m(y,M)})}updateTitle(){var s;const t=c=>c.defaultValue,{title:e,_titleCaption:i,range:o,moduleCtx:{callbackCache:a}}=this,{formatter:n=t}=(s=this.title)!=null?s:{};if(!e){i.enabled=!1;return}i.enabled=e.enabled,i.fontFamily=e.fontFamily,i.fontSize=e.fontSize,i.fontStyle=e.fontStyle,i.fontWeight=e.fontWeight,i.color=e.color,i.wrapping=e.wrapping;let r=!1;const l=i.node;e.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((o[0]+o[1])/2),l.y=-Rh.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=a.call(n,this.getTitleFormatterParams())),l.visible=r}createTick(){return new rn}updateCrossLines(){var s;(s=this.crossLines)==null||s.forEach(t=>{if(t instanceof sn){const{shape:e,gridAngles:i,range:o,innerRadiusRatio:a}=this,n=o[0];t.shape=e,t.gridAngles=i,t.axisOuterRadius=n,t.axisInnerRadius=n*a}}),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new Xs}};h([Gi(an),on(0)],Qs.prototype,"positionAngle",2);var{RATIO:$s,ProxyPropertyOnWrite:ln,Validate:Zs}=dh,{BandScale:Bh}=uh,be=class extends Qs{constructor(s){super(s,new Bh),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(s){return s.slice().reverse()}getTickRadius(s){const{scale:t}=this,e=t.range[0],i=e*this.innerRadiusRatio,o=(e-i)/t.domain.length;return e-s.translationY+i-o/2}};be.className="RadiusCategoryAxis",be.type="radius-category",h([Zs($s)],be.prototype,"groupPaddingInner",2),h([ln("scale","paddingInner"),Zs($s)],be.prototype,"paddingInner",2),h([ln("scale","paddingOuter"),Zs($s)],be.prototype,"paddingOuter",2);var jh={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:be,themeTemplate:qa};import{_ModuleSupport as Fh,_Scale as Uh,_Util as Vh}from"ag-charts-community";var{AND:cn,Default:hn,GREATER_THAN:Yh,LESS_THAN:Hh,NUMBER_OR_NAN:dn,Validate:un}=Fh,{LinearScale:Gh}=Uh,{normalisedExtentWithMetadata:Kh}=Vh,fi=class extends Qs{constructor(s){super(s,new Gh),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(s){var t;const{scale:e}=this,i=(t=e.getDomain)==null?void 0:t.call(e)[1];return s.filter(({tick:o})=>o!==i).sort((o,a)=>a.tick-o.tick)}getTickRadius(s){const{scale:t}=this,e=t.range[0],i=e*this.innerRadiusRatio;return e-s.translationY+i}normaliseDataDomain(s){const{min:t,max:e}=this,{extent:i,clipped:o}=Kh(s,t,e);return{domain:i,clipped:o}}};fi.className="RadiusNumberAxis",fi.type="radius-number",h([un(cn(dn,Hh("max"))),hn(NaN)],fi.prototype,"min",2),h([un(cn(dn,Yh("min"))),hn(NaN)],fi.prototype,"max",2);var Wh={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:fi,themeTemplate:qa};import{_ModuleSupport as pn}from"ag-charts-community";var{BOOLEAN:Xh,POSITIVE_NUMBER:Qh,ActionOnSet:gn,Validate:yn}=pn,qs=class extends pn.BaseModuleInstance{constructor(s){super(),this.ctx=s,this.enabled=!0,this.animationManager=s.animationManager,this.animationManager.skip(!1)}};h([gn({newValue(s){this.animationManager&&this.animationManager.skip(!s)}}),yn(Xh)],qs.prototype,"enabled",2),h([gn({newValue(s){this.animationManager&&(this.animationManager.defaultDuration=s)}}),yn(Qh)],qs.prototype,"duration",2);var $h={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:qs,themeTemplate:{animation:{enabled:!0}}};import{_ModuleSupport as Js}from"ag-charts-community";import{_ModuleSupport as Zh,_Scene as qh}from"ag-charts-community";var{Image:Jh}=qh,{BaseProperties:td,ObserveChanges:ed,ProxyProperty:id,Validate:Te,NUMBER:Ki,POSITIVE_NUMBER:mn,RATIO:sd}=Zh,te=class extends td{constructor(s){super(),this.loadedSynchronously=!0,this.opacity=1,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var t;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),(t=this.onLoad)==null||t.call(this))},this.imageElement=s.document.createElement("img"),this.imageElement.onload=this.onImageLoad,this.node=new Jh(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(s,t){this.containerWidth=s,this.containerHeight=t,this.node.setProperties(this.complete?K({visible:!0,opacity:this.opacity},this.calculatePosition(this.imageElement.width,this.imageElement.height)):{visible:!1})}calculatePosition(s,t){let{top:e,right:i,bottom:o,left:a,width:n,height:r}=this;return a!=null?n!=null?i=this.containerWidth-a+n:i!=null&&(n=this.containerWidth-a-i):i!=null&&n!=null&&(a=this.containerWidth-i-n),e!=null?r!=null?o=this.containerHeight-e-r:o!=null&&(r=this.containerHeight-o-e):o!=null&&r!=null&&(e=this.containerHeight-o-r),n==null?r==null?(n=s,r=t):n=Math.ceil(s*r/t):r==null&&(r=Math.ceil(t*n/s)),a==null&&(i==null?a=Math.floor((this.containerWidth-n)/2):a=this.containerWidth-i-n),e==null&&(o==null?e=Math.floor((this.containerHeight-r)/2):e=this.containerHeight-r-o),{x:a,y:e,width:n,height:r}}};h([Te(Ki,{optional:!0})],te.prototype,"top",2),h([Te(Ki,{optional:!0})],te.prototype,"right",2),h([Te(Ki,{optional:!0})],te.prototype,"bottom",2),h([Te(Ki,{optional:!0})],te.prototype,"left",2),h([Te(mn,{optional:!0})],te.prototype,"width",2),h([Te(mn,{optional:!0})],te.prototype,"height",2),h([Te(sd)],te.prototype,"opacity",2),h([id("imageElement.src"),ed(s=>s.loadedSynchronously=s.complete)],te.prototype,"url",2);var{ActionOnSet:od,OBJECT:ad,Validate:nd}=Js,fn=class extends Js.Background{constructor(s){super(s),this.image=new te(s),this.updateService=s.updateService}onLayoutComplete(s){if(super.onLayoutComplete(s),this.image){const{width:t,height:e}=s.chart;this.image.performLayout(t,e)}}onImageLoad(){this.updateService.update(Js.ChartUpdateType.SCENE_RENDER)}};h([nd(ad,{optional:!0}),od({newValue(s){this.node.appendChild(s.node),s.onLoad=()=>this.onImageLoad()},oldValue(s){this.node.removeChild(s.node),s.onLoad=void 0}})],fn.prototype,"image",2);var rd={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:fn};import{_Theme as ld}from"ag-charts-community";import{_ModuleSupport as xi}from"ag-charts-community";var pt="ag-chart-context-menu",$t="ag-charts-dark-context-menu",cd=`
.${pt} {
    background: rgb(248, 248, 248);
    border: 1px solid #babfc7;
    border-radius: 5px;
    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);
    color: rgb(24, 29, 31);
    font: 13px Verdana, sans-serif;
    position: fixed;
    transition: transform 0.1s ease;
    white-space: nowrap;
    z-index: 99999;
}

.${pt}.${$t} {
    color: white;
    background: #15181c;
}

.${pt}__cover {
    position: fixed;
    left: 0px;
    top: 0px;
}

.${pt}__menu {
    display: flex;
    flex-direction: column;
    padding: 0.5em 0;
}

.${pt}__item {
    background: none;
    border: none;
    box-sizing: border-box;
    font: inherit;
    padding: 0.5em 1em;
    text-align: left;
    -webkit-appearance: none;
    -moz-appearance: none;
}

.${pt}__item.${$t} {
    color: white;
}

.${pt}__item:hover {
    background: rgb(33, 150, 243, 0.1);
}

.${pt}__item:hover.${$t} {
    background: rgb(33, 150, 243, 0.1);
}

.${pt}__item:active {
    background: rgb(33, 150, 243, 0.2);
}

.${pt}__item:active.${$t} {
    background: rgb(33, 150, 243, 0.1);
}

.${pt}__item[disabled] {
    border: none;
    opacity: 0.5;
    text-align: left;
}

.${pt}__item[disabled]:hover {
    background: inherit;
    cursor: inherit;
}

.${pt}__divider {
    margin: 5px 0;
    background: #babfc7;
    height: 1px;
}

.${pt}__divider.${$t} {
    background: rgb(33, 150, 243, 0.1);
}
`,{BOOLEAN:xn,Validate:Sn}=xi,Wi=class pa extends xi.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=t.highlightManager,this.interactionManager=t.interactionManager,this.registry=t.contextMenuRegistry,this.scene=t.scene;const{Default:e,ContextMenu:i,All:o}=xi.InteractionState,a=e|i;if(this.destroyFns.push(t.interactionManager.addListener("contextmenu",n=>this.onContextMenu(n),a),t.interactionManager.addListener("click",()=>this.onClick(),o)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=t.scene.canvas.element,this.container=t.document.body,this.element=this.container.appendChild(t.document.createElement("div")),this.element.classList.add(pt),this.element.addEventListener("contextmenu",n=>n.preventDefault()),this.destroyFns.push(()=>{var n;return(n=this.element.parentNode)==null?void 0:n.removeChild(this.element)}),this.hide(),typeof IntersectionObserver<"u"){const n=new IntersectionObserver(r=>{for(const l of r)l.target===this.canvasElement&&l.intersectionRatio===0&&this.hide()},{root:this.container});n.observe(this.canvasElement),this.intersectionObserver=n}if(typeof MutationObserver<"u"){const n=new MutationObserver(()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()});n.observe(this.element,{childList:!0}),this.mutationObserver=n}if(pa.contextMenuDocuments.indexOf(t.document)<0){const n=t.document.createElement("style");n.innerHTML=cd,t.document.head.insertBefore(n,t.document.head.querySelector("style")),pa.contextMenuDocuments.push(t.document)}this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const n=t.chartService.title;let r="image";n!==void 0&&n.enabled&&n.text!==void 0&&(r=n.text),this.scene.download(r)}})}isShown(){return this.menuElement!==void 0}onClick(){this.isShown()&&this.hide()}onContextMenu(t){if(!this.enabled)return;this.showEvent=t.sourceEvent,this.x=t.pageX,this.y=t.pageY,this.groups.default=this.registry.copyDefaultAction(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:e,node:i,extra:o,extraNode:a}=this.groups;e.length+i.length+o.length+a.length!==0&&(t.consume(),t.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(xi.InteractionState.ContextMenu),this.element.classList.toggle($t,this.darkTheme);const t=this.renderMenu();this.menuElement?this.element.replaceChild(t,this.menuElement):this.element.appendChild(t),this.menuElement=t,this.element.style.display="block"}hide(){this.interactionManager.popState(xi.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const t=this.ctx.document.createElement("div");return t.classList.add(`${pt}__menu`),t.classList.toggle($t,this.darkTheme),this.groups.default.forEach(e=>{const i=this.renderItem(e);i&&t.appendChild(i)}),["node","extra","extraNode"].forEach(e=>{this.groups[e].length===0||["node","extraNode"].includes(e)&&!this.pickedNode||(t.appendChild(this.createDividerElement()),this.groups[e].forEach(i=>{const o=this.renderItem(i);o&&t.appendChild(o)}))}),t}renderItem(t){if(t&&typeof t=="object"&&t.constructor===Object)return this.createActionElement(t)}createDividerElement(){const t=this.ctx.document.createElement("div");return t.classList.add(`${pt}__divider`),t.classList.toggle($t,this.darkTheme),t}createActionElement({id:t,label:e,action:i}){return t&&this.registry.isDisabled(t)?this.createDisabledElement(e):this.createButtonElement(e,i)}createButtonElement(t,e){const i=this.ctx.document.createElement("button");return i.classList.add(`${pt}__item`),i.classList.toggle($t,this.darkTheme),i.innerHTML=t,i.onclick=()=>{var o,a,n;const r={event:this.showEvent,datum:(o=this.pickedNode)==null?void 0:o.datum,itemId:(a=this.pickedNode)==null?void 0:a.itemId,seriesId:(n=this.pickedNode)==null?void 0:n.series.id};e(r),this.hide()},i}createDisabledElement(t){const e=this.ctx.document.createElement("button");return e.classList.add(`${pt}__item`),e.classList.toggle($t,this.darkTheme),e.disabled=!0,e.innerHTML=t,e}reposition(){const{x:t,y:e,ctx:{window:i}}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",t+this.element.offsetWidth>i.innerWidth?this.element.style.right=`calc(100% - ${t-1}px)`:this.element.style.left=`${t+1}px`,e+this.element.offsetHeight>i.innerHeight?this.element.style.bottom=`calc(100% - ${e}px - 0.5em)`:this.element.style.top=`calc(${e}px - 0.5em)`}destroy(){var t,e;super.destroy(),this.destroyFns.forEach(i=>i()),(t=this.intersectionObserver)==null||t.unobserve(this.canvasElement),(e=this.mutationObserver)==null||e.disconnect()}};Wi.contextMenuDocuments=[],h([Sn(xn)],Wi.prototype,"enabled",2),h([Sn(xn)],Wi.prototype,"darkTheme",2);var hd=Wi,dd={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],optionsKey:"contextMenu",instanceConstructor:hd,themeTemplate:{contextMenu:{enabled:!0,darkTheme:ld.IS_DARK_THEME}}};import{_ModuleSupport as Mn,_Scene as ud}from"ag-charts-community";import{_ModuleSupport as pd,_Scene as vn}from"ag-charts-community";var{ActionOnSet:gd,BaseProperties:yd,BOOLEAN:md,FUNCTION:fd,NUMBER:An,STRING:In,Validate:qe}=pd,{BBox:xd}=vn,Je="ag-crosshair-label",Sd=`
.${Je} {
    position: absolute;
    left: 0px;
    top: 0px;
    user-select: none;
    pointer-events: none;
    font: 12px Verdana, sans-serif;
    overflow: hidden;
    white-space: nowrap;
    z-index: 99999;
    box-sizing: border-box;
}

.${Je}-content {
    padding: 0 7px;
    border-radius: 2px;
    line-height: 1.7em;
    background-color: rgb(71,71,71);
    color: rgb(255, 255, 255);
}

.${Je}-hidden {
    top: -10000px !important;
}
`,de=class ga extends yd{constructor(t,e){if(super(),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0,this.element=e.appendChild(t.createElement("div")),this.element.classList.add(Je),this.labelRoot=e,ga.labelDocuments.indexOf(t)<0){const i=t.createElement("style");i.innerHTML=Sd,t.head.insertBefore(i,t.head.querySelector("style")),ga.labelDocuments.push(t)}}show(t){const{element:e}=this;let i=t.x+this.xOffset,o=t.y+this.yOffset;const a=(c,d,u)=>Math.max(Math.min(d,u),c),n=this.getContainerBoundingBox(),r=n.x+n.width-e.clientWidth-1,l=n.y+n.height-e.clientHeight;i=a(n.x+1,i,r),o=a(n.y,o,l),e.style.transform=`translate(${Math.round(i)}px, ${Math.round(o)}px)`,this.toggle(!0)}setLabelHtml(t){t!==void 0&&(this.element.innerHTML=t)}computeBBox(){const{element:t}=this;return new vn.BBox(t.clientLeft,t.clientTop,t.clientWidth,t.clientHeight)}getContainerBoundingBox(){const{width:t,height:e}=this.labelRoot.getBoundingClientRect();return new xd(0,0,t,e)}toggle(t){this.element.classList.toggle(`${Je}-hidden`,!t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}toLabelHtml(t,e){var i,o;if(typeof t=="string")return t;e=e??{};const{text:a=(i=e.text)!=null?i:"",color:n=e.color,backgroundColor:r=e.backgroundColor,opacity:l=(o=e.opacity)!=null?o:1}=t,c=`opacity: ${l}; background-color: ${r?.toLowerCase()}; color: ${n}`;return`<div class="${Je}-content" style="${c}">
                    <span>${a}</span>
                </div>`}};de.labelDocuments=[],h([qe(md)],de.prototype,"enabled",2),h([qe(In,{optional:!0}),gd({changeValue(s,t){s!==t&&(t&&this.element.classList.remove(t),s&&this.element.classList.add(s))}})],de.prototype,"className",2),h([qe(An)],de.prototype,"xOffset",2),h([qe(An)],de.prototype,"yOffset",2),h([qe(In,{optional:!0})],de.prototype,"format",2),h([qe(fd,{optional:!0})],de.prototype,"renderer",2);var Md=de,{Group:vd,Line:Ad,BBox:to}=ud,{POSITIVE_NUMBER:Dn,RATIO:Id,BOOLEAN:Nn,COLOR_STRING:Dd,LINE_DASH:Nd,OBJECT:bd,Validate:ue,Layers:Td}=Mn,ee=class extends Mn.BaseModuleInstance{constructor(s){var t,e;super(),this.ctx=s,this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.seriesRect=new to(0,0,0,0),this.hoverRect=new to(0,0,0,0),this.bounds=new to(0,0,0,0),this.visible=!1,this.crosshairGroup=new vd({layer:!0,zIndex:Td.SERIES_CROSSHAIR_ZINDEX}),this.lineNode=this.crosshairGroup.appendChild(new Ad),this.activeHighlight=void 0,(t=s.scene.root)==null||t.appendChild(this.crosshairGroup),this.axisCtx=s.parent,this.crosshairGroup.visible=!1,this.label=new Md(s.document,(e=s.scene.canvas.container)!=null?e:s.document.body),this.destroyFns.push(s.interactionManager.addListener("hover",i=>this.onMouseMove(i)),s.interactionManager.addListener("leave",()=>this.onMouseOut()),s.highlightManager.addListener("highlight-change",i=>this.onHighlightChange(i)),s.layoutService.addListener("layout-complete",i=>this.layout(i)),()=>{var i;return(i=s.scene.root)==null?void 0:i.removeChild(this.crosshairGroup)},()=>this.label.destroy())}layout({series:{rect:s,paddedRect:t,visible:e},axes:i}){var o;if(this.hideCrosshair(),!(e&&i&&this.enabled)){this.visible=!1;return}this.visible=!0,this.seriesRect=s,this.hoverRect=t;const{position:a="left",axisId:n}=this.axisCtx,r=i.find(g=>g.id===n);if(!r)return;this.axisLayout=r;const l=r.gridPadding+r.seriesAreaPadding;this.bounds=this.buildBounds(s,a,l);const{crosshairGroup:c,bounds:d}=this;c.translationX=Math.round(d.x),c.translationY=Math.round(a==="top"||a==="bottom"?d.y+d.height:d.y);const u=a==="top"||a==="bottom"?-Math.PI/2:0;c.rotation=u,this.updateLine();const p=(o=this.label.format)!=null?o:r.label.format;this.labelFormatter=p?this.axisCtx.scaleValueFormatter(p):void 0}buildBounds(s,t,e){const i=s.clone();return i.x+=t==="left"?-e:0,i.y+=t==="top"?-e:0,i.width+=t==="left"||t==="right"?e:0,i.height+=t==="top"||t==="bottom"?e:0,i}updateLine(){const{lineNode:s,bounds:t,stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n,axisCtx:r,axisLayout:l}=this;l&&(s.stroke=e,s.strokeWidth=i,s.strokeOpacity=o,s.lineDash=a,s.lineDashOffset=n,s.y1=s.y2=0,s.x1=0,s.x2=r.direction==="x"?t.height:t.width)}formatValue(s){var t;const{labelFormatter:e,axisLayout:i,ctx:{callbackCache:o}}=this;if(e){const r=o.call(e,s);if(r!==void 0)return r}const a=s%1===0,n=((t=i?.label.fractionDigits)!=null?t:0)+(a?0:1);return typeof s=="number"?s.toFixed(n):String(s)}onMouseMove(s){if(!this.enabled||this.snap)return;const{crosshairGroup:t,seriesRect:e,hoverRect:i,axisCtx:o,activeHighlight:a}=this,{offsetX:n,offsetY:r}=s;if(this.visible&&i.containsPoint(n,r)){t.visible=!0;const l=a?this.getActiveHighlight(a):void 0;let c,d=0,u=0;o.direction==="x"?(d=Math.max(Math.min(e.x+e.width,n),e.x),t.translationX=Math.round(d),c=o.continuous?o.scaleInvert(n-e.x):l?.value):(u=Math.max(Math.min(e.y+e.height,r),e.y),t.translationY=Math.round(u),c=o.continuous?o.scaleInvert(r-e.y):l?.value),c&&this.label.enabled?this.showLabel(d,u,c):this.hideLabel()}else this.hideCrosshair()}onMouseOut(){this.hideCrosshair()}onHighlightChange(s){var t,e,i;if(!this.enabled)return;const{crosshairGroup:o,seriesRect:a,axisCtx:n}=this,{datum:r,series:l}=(t=s.currentHighlight)!=null?t:{},c=r&&(((e=l?.axes.x)==null?void 0:e.id)===n.axisId||((i=l?.axes.y)==null?void 0:i.id)===n.axisId);if(this.activeHighlight=c?s.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight){this.hideCrosshair();return}const{value:d,position:u}=this.getActiveHighlight(this.activeHighlight);o.visible=!0;let p=0,g=0;n.direction==="x"?(p=u,o.translationX=Math.round(p+a.x)):(g=u,o.translationY=Math.round(g+a.y)),this.label.enabled?this.showLabel(p+a.x,g+a.y,d):this.hideLabel()}}getActiveHighlight(s){var t,e;const{axisCtx:i}=this,{datum:o,xKey:a="",yKey:n="",aggregatedValue:r,series:l,cumulativeValue:c,midPoint:d}=s,u=i.scaleBandwidth()/2;if(r!==void 0&&((t=l.axes.y)==null?void 0:t.id)===i.axisId)return{value:r,position:i.scaleConvert(r)+u};const p=i.keys().indexOf(n)>=0;if(c!==void 0&&p)return{value:c,position:i.scaleConvert(c)+u};const g=p?n:a,f=(e=i.direction==="x"?d?.x:d?.y)!=null?e:0;return{value:i.continuous?i.scaleInvert(f):o[g],position:f}}getLabelHtml(s){const{label:t,axisLayout:{label:{fractionDigits:e=0}={}}={}}=this,{renderer:i}=t,o={text:this.formatValue(s)};if(i){const a={value:s,fractionDigits:e};return t.toLabelHtml(i(a),o)}return t.toLabelHtml(o)}showLabel(s,t,e){const{axisCtx:i,bounds:o,label:a,axisLayout:n}=this;if(!n)return;const{label:{padding:r},tickSize:l}=n,c=r+l,d=this.getLabelHtml(e);a.setLabelHtml(d);const u=a.computeBBox();let p;if(i.direction==="x"){const g=-u.width/2,f=i.position==="bottom"?0:-u.height,m=i.position==="bottom"?o.y+o.height+c:o.y-c;p={x:s+g,y:m+f}}else{const g=-u.height/2,f=i.position==="right"?0:-u.width;p={x:(i.position==="right"?o.x+o.width+c:o.x-c)+f,y:t+g}}a.show(p)}hideCrosshair(){this.crosshairGroup.visible=!1,this.hideLabel()}hideLabel(){this.label.toggle(!1)}};h([ue(Nn)],ee.prototype,"enabled",2),h([ue(Dd,{optional:!0})],ee.prototype,"stroke",2),h([ue(Nd,{optional:!0})],ee.prototype,"lineDash",2),h([ue(Dn)],ee.prototype,"lineDashOffset",2),h([ue(Dn)],ee.prototype,"strokeWidth",2),h([ue(Id)],ee.prototype,"strokeOpacity",2),h([ue(Nn)],ee.prototype,"snap",2),h([ue(bd)],ee.prototype,"label",2);import{_Theme as bn}from"ag-charts-community";var _d={crosshair:{enabled:!0,snap:!0,stroke:bn.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:bn.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},Ed={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","number","log","time"],instanceConstructor:ee,themeTemplate:_d};import{_ModuleSupport as Tn}from"ag-charts-community";var{BOOLEAN:Ld,FUNCTION:Od,ActionOnSet:Si,Validate:_n}=Tn,ti=class extends Tn.BaseModuleInstance{constructor(s){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=s.dataService}updateCallback(s,t){this.dataService&&(s&&t!=null?this.dataService.updateCallback(t):this.dataService.clearCallback())}};h([Si({newValue(s){this.updateCallback(s,this.getData)}}),_n(Ld)],ti.prototype,"enabled",2),h([Si({newValue(s){this.updateCallback(this.enabled,s)}}),_n(Od)],ti.prototype,"getData",2),h([Si({newValue(s){this.dataService.requestThrottle=s}})],ti.prototype,"requestThrottle",2),h([Si({newValue(s){this.dataService.dispatchThrottle=s}})],ti.prototype,"updateThrottle",2),h([Si({newValue(s){this.dataService.dispatchOnlyLatest=!s}})],ti.prototype,"updateDuringInteraction",2);var Rd={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar"],instanceConstructor:ti,themeTemplate:{dataSource:{enabled:!1}}};import{AgErrorBarSupportedSeriesTypes as kd}from"ag-charts-community";import{AgErrorBarSupportedSeriesTypes as En,_ModuleSupport as eo,_Scene as Cd,_Util as wd}from"ag-charts-community";import{_ModuleSupport as Pd,_Scene as ei}from"ag-charts-community";var{partialAssign:zd,mergeDefaults:Xi}=Pd,{BBox:ie}=ei,Bd=class{constructor(s){this.components=s,this.union=ie.merge(s)}containsPoint(s,t){if(!this.union.containsPoint(s,t))return!1;for(const e of this.components)if(e.containsPoint(s,t))return!0;return!1}},jd=class extends ei.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new ei.Path,this.capsPath=new ei.Path,this.bboxes=new Bd([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(s){this._datum=s}calculateCapLength(s,t){const{lengthRatio:e=1,length:i}=s,{lengthRatioMultiplier:o,lengthMax:a}=t,n=i??e*o;return Math.min(n,a)}getFormatterParams(s,t){const{datum:e}=this;if(e===void 0||s.formatter===void 0&&s.cap.formatter===void 0)return;const{xLowerKey:i,xLowerName:o,xUpperKey:a,xUpperName:n,yLowerKey:r,yLowerName:l,yUpperKey:c,yUpperName:d}=s;return{datum:e.datum,seriesId:e.datum.seriesId,xKey:e.xKey,yKey:e.yKey,xLowerKey:i,xLowerName:o,xUpperKey:a,xUpperName:n,yLowerKey:r,yLowerName:l,yUpperKey:c,yUpperName:d,highlighted:t}}formatStyles(s,t,e){let i=s,{cap:o}=i,a=Na(i,["cap"]);const n=this.getFormatterParams(t,e);if(n!==void 0){if(t.formatter!==void 0){const r=t.formatter(n);a=Xi(r,a),o=Xi(r,o),o=Xi(r?.cap,o)}if(t.cap.formatter!==void 0){const r=t.cap.formatter(n);o=Xi(r,o)}}return{whiskerStyle:a,capsStyle:o}}applyStyling(s,t){zd(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],s,t)}update(s,t,e){if(this.datum===void 0)return;const{whiskerStyle:i,capsStyle:o}=this.formatStyles(s,t,e),{xBar:a,yBar:n,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,i),l.path.clear(),n!==void 0&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),a!==void 0&&(l.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),l.path.lineTo(a.upperPoint.x,a.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(o??{},r);const c=this.capLength/2,d=this.capsPath;this.applyStyling(d,o),d.path.clear(),n!==void 0&&(d.path.moveTo(n.lowerPoint.x-c,n.lowerPoint.y),d.path.lineTo(n.lowerPoint.x+c,n.lowerPoint.y),d.path.moveTo(n.upperPoint.x-c,n.upperPoint.y),d.path.lineTo(n.upperPoint.x+c,n.upperPoint.y)),a!==void 0&&(d.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-c),d.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+c),d.path.moveTo(a.upperPoint.x,a.upperPoint.y-c),d.path.lineTo(a.upperPoint.x,a.upperPoint.y+c)),d.path.closePath(),d.markDirtyTransform()}updateBBoxes(){var s;const{capLength:t,whiskerPath:e,capsPath:i}=this,{yBar:o,xBar:a}=(s=this.datum)!=null?s:{},n=t/2,r=[];if(o!==void 0){const l=o.lowerPoint.y-o.upperPoint.y;r.push(new ie(o.lowerPoint.x,o.upperPoint.y,e.strokeWidth,l),new ie(o.lowerPoint.x-n,o.lowerPoint.y,t,i.strokeWidth),new ie(o.upperPoint.x-n,o.upperPoint.y,t,i.strokeWidth))}if(a!==void 0){const l=a.upperPoint.x-a.lowerPoint.x;r.push(new ie(a.lowerPoint.x,a.upperPoint.y,l,e.strokeWidth),new ie(a.lowerPoint.x,a.lowerPoint.y-n,i.strokeWidth,t),new ie(a.upperPoint.x,a.upperPoint.y-n,i.strokeWidth,t))}this.bboxes.components=r,this.bboxes.union=ie.merge(r)}containsPoint(s,t){return this.bboxes.containsPoint(s,t)}pickNode(s,t){return this.containsPoint(s,t)?this:void 0}nearestSquared(s,t){const{bboxes:e}=this;if(e.union.distanceSquared(s)>t)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:i}=ie.nearestBox(s,e.components);return{nearest:this,distanceSquared:i}}},Fd=class extends ei.Group{get children(){return super.children}nearestSquared(s){const{nearest:t,distanceSquared:e}=ei.nearestSquaredInContainer(s,this);if(t!==void 0&&!isNaN(e))return{datum:t.datum,distanceSquared:e}}};import{_ModuleSupport as Ud}from"ag-charts-community";var{BaseProperties:Ln,Validate:J,BOOLEAN:On,COLOR_STRING:Rn,FUNCTION:kn,LINE_DASH:Cn,NUMBER:Vd,OBJECT:Yd,POSITIVE_NUMBER:Qi,RATIO:io,STRING:pe}=Ud,Zt=class extends Ln{};h([J(On,{optional:!0})],Zt.prototype,"visible",2),h([J(Rn,{optional:!0})],Zt.prototype,"stroke",2),h([J(Qi,{optional:!0})],Zt.prototype,"strokeWidth",2),h([J(io,{optional:!0})],Zt.prototype,"strokeOpacity",2),h([J(Cn,{optional:!0})],Zt.prototype,"lineDash",2),h([J(Qi,{optional:!0})],Zt.prototype,"lineDashOffset",2),h([J(Vd,{optional:!0})],Zt.prototype,"length",2),h([J(io,{optional:!0})],Zt.prototype,"lengthRatio",2),h([J(kn,{optional:!0})],Zt.prototype,"formatter",2);var Mt=class extends Ln{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new Zt}};h([J(pe,{optional:!0})],Mt.prototype,"yLowerKey",2),h([J(pe,{optional:!0})],Mt.prototype,"yLowerName",2),h([J(pe,{optional:!0})],Mt.prototype,"yUpperKey",2),h([J(pe,{optional:!0})],Mt.prototype,"yUpperName",2),h([J(pe,{optional:!0})],Mt.prototype,"xLowerKey",2),h([J(pe,{optional:!0})],Mt.prototype,"xLowerName",2),h([J(pe,{optional:!0})],Mt.prototype,"xUpperKey",2),h([J(pe,{optional:!0})],Mt.prototype,"xUpperName",2),h([J(On,{optional:!0})],Mt.prototype,"visible",2),h([J(Rn,{optional:!0})],Mt.prototype,"stroke",2),h([J(Qi,{optional:!0})],Mt.prototype,"strokeWidth",2),h([J(io,{optional:!0})],Mt.prototype,"strokeOpacity",2),h([J(Cn,{optional:!0})],Mt.prototype,"lineDash",2),h([J(Qi,{optional:!0})],Mt.prototype,"lineDashOffset",2),h([J(kn,{optional:!0})],Mt.prototype,"formatter",2),h([J(Yd)],Mt.prototype,"cap",2);var{fixNumericExtent:wn,groupAccumulativeValueProperty:Hd,isDefined:Rt,mergeDefaults:Gd,valueProperty:$i,ChartAxisDirection:so}=eo;function Kd(s){for(const t of En)if(t==s.series.type)return s.series;throw new Error(`AG Charts - unsupported series type '${s.series.type}', error bars supported series types: ${En.join(", ")}`)}var Wd=class ji extends eo.BaseModuleInstance{constructor(t){super(),this.properties=new Mt;const e=Kd(t),{annotationGroup:i,annotationSelections:o}=e;this.cartesianSeries=e,this.groupNode=new Fd({name:`${i.id}-errorBars`,zIndex:eo.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:e.getGroupZIndexSubOrder("annotation")}),i.appendChild(this.groupNode),this.selection=Cd.Selection.select(this.groupNode,()=>this.errorBarFactory()),o.add(this.selection),this.destroyFns.push(e.addListener("data-processed",a=>this.onDataProcessed(a)),e.addListener("data-update",a=>this.onDataUpdate(a)),e.addListener("visibility-changed",a=>this.onToggleSeriesItem(a)),t.highlightManager.addListener("highlight-change",a=>this.onHighlightChange(a)),()=>i.removeChild(this.groupNode),()=>o.delete(this.selection))}hasErrorBars(){const{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:o}=this.properties;return Rt(t)&&Rt(e)||Rt(i)&&Rt(o)}isStacked(){var t;const e=(t=this.cartesianSeries.seriesGrouping)==null?void 0:t.stackCount;return e===void 0?!1:e>0}getUnstackPropertyDefinition(t){const e=[],{cartesianSeries:i}=this,{xLowerKey:o,xUpperKey:a,yLowerKey:n,yUpperKey:r,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{isContinuousX:d,isContinuousY:u}=t;return n!==void 0&&r!==void 0&&e.push($i(i,n,u,{id:c}),$i(i,r,u,{id:c})),o!==void 0&&a!==void 0&&e.push($i(i,o,d,{id:l}),$i(i,a,d,{id:l})),e}getStackPropertyDefinition(t){var e,i;const o=[],{cartesianSeries:a}=this,{xLowerKey:n,xUpperKey:r,yLowerKey:l,yUpperKey:c,xErrorsID:d,yErrorsID:u}=this.getMaybeFlippedKeys(),{isContinuousX:p,isContinuousY:g}=t,f=(i=(e=a.seriesGrouping)==null?void 0:e.groupIndex)!=null?i:a.id,m=K({invalidValue:null,missingValue:0,separateNegative:!0},a.visible?{}:{forceValue:0}),y=(v,A,x,S)=>Hd(a,v,A,"normal","current",K({id:`${x}-${S}`,groupId:`errorGroup-${f}-${S}`},m)),M=(v,A,x,S)=>{o.push(...y(v,x,S,"lower"),...y(A,x,S,"upper"))};return l!==void 0&&c!==void 0&&M(l,c,g,u),n!==void 0&&r!==void 0&&M(n,r,p,d),o}getPropertyDefinitions(t){return this.isStacked()?this.getStackPropertyDefinition(t):this.getUnstackPropertyDefinition(t)}onDataProcessed(t){this.dataModel=t.dataModel,this.processedData=t.processedData}getDomain(t){const{xLowerKey:e,xUpperKey:i,xErrorsID:o,yLowerKey:a,yUpperKey:n,yErrorsID:r}=this.getMaybeFlippedKeys();if(t===so.X?Rt(e)&&Rt(i):Rt(a)&&Rt(n)){const{dataModel:c,processedData:d,cartesianSeries:u}=this,p=u.axes[t],g={x:o,y:r}[t];if(c!==void 0&&d!==void 0)if(this.isStacked()){const f=c.getDomain(u,`${g}-lower`,"value",d),m=c.getDomain(u,`${g}-upper`,"value",d),y=[Math.min(...f,...m),Math.max(...f,...m)];return wn(y,p)}else{const f=c.getDomain(u,g,"value",d);return wn(f,p)}}return[]}onDataUpdate(t){this.dataModel=t.dataModel,this.processedData=t.processedData,Rt(t.dataModel)&&Rt(t.processedData)&&(this.createNodeData(),this.update())}getNodeData(){const{contextNodeData:t}=this.cartesianSeries;if(t.length>0)return t[0].nodeData}createNodeData(){var t,e;const i=this.getNodeData(),o=(t=this.cartesianSeries.axes[so.X])==null?void 0:t.scale,a=(e=this.cartesianSeries.axes[so.Y])==null?void 0:e.scale;if(!(!this.hasErrorBars()||!o||!a||!i))for(let n=0;n<i.length;n++){const{midPoint:r,xLower:l,xUpper:c,yLower:d,yUpper:u}=this.getDatum(i,n);if(r!==void 0){let p,g;Rt(l)&&Rt(c)&&(p={lowerPoint:{x:this.convert(o,l),y:r.y},upperPoint:{x:this.convert(o,c),y:r.y}}),Rt(d)&&Rt(u)&&(g={lowerPoint:{x:r.x,y:this.convert(a,d)},upperPoint:{x:r.x,y:this.convert(a,u)}}),i[n].xBar=p,i[n].yBar=g}}}getMaybeFlippedKeys(){let{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:o}=this.properties,[a,n]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([t,i]=[i,t],[e,o]=[o,e],[a,n]=[n,a]),{xLowerKey:t,xUpperKey:e,xErrorsID:a,yLowerKey:i,yUpperKey:o,yErrorsID:n}}static getDatumKey(t,e,i){if(e===void 0)return;const o=t.datum[e];if(o!==void 0){if(typeof o!="number"){wd.Logger.warnOnce(`Found [${e}] error value of type ${typeof o}. Expected number type`);return}return o+i}}getDatum(t,e){const{xLowerKey:i,xUpperKey:o,yLowerKey:a,yUpperKey:n}=this.getMaybeFlippedKeys(),r=t[e],l=r.cumulativeValue===void 0||!this.isStacked()?0:r.cumulativeValue-r.yValue,[c,d]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:ji.getDatumKey(r,i,c),xUpper:ji.getDatumKey(r,o,c),yLower:ji.getDatumKey(r,a,d),yUpper:ji.getDatumKey(r,n,d)}}convert(t,e){var i;const o=((i=t.bandwidth)!=null?i:0)/2;return t.convert(e)+o}update(){const t=this.getNodeData();t!==void 0&&(this.selection.update(t),this.selection.each((e,i,o)=>this.updateNode(e,i,o)))}updateNode(t,e,i){t.datum=e,t.update(this.getDefaultStyle(),this.properties,!1),t.updateBBoxes()}pickNodeExact(t){const{x:e,y:i}=this.groupNode.transformPoint(t.x,t.y),o=this.groupNode.pickNode(e,i);if(o!==void 0)return{datum:o.datum,distanceSquared:0}}pickNodeNearest(t){return this.groupNode.nearestSquared(t)}pickNodeMainAxisFirst(t){return this.groupNode.nearestSquared(t)}getTooltipParams(){const{xLowerKey:t,xUpperKey:e,yLowerKey:i,yUpperKey:o,xLowerName:a=t,xUpperName:n=e,yLowerName:r=i,yUpperName:l=o}=this.properties;return{xLowerKey:t,xLowerName:a,xUpperKey:e,xUpperName:n,yLowerKey:i,yLowerName:r,yUpperKey:o,yUpperName:l}}onToggleSeriesItem(t){this.groupNode.visible=t.enabled}makeStyle(t){return{visible:t.visible,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,cap:Gd(this.properties.cap,t)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(t,e,i){const o=this.getNodeData();if(o!==void 0){for(let a=0;a<o.length;a++)if(t===o[a]){this.selection.nodes()[a].update(e,this.properties,i);break}}}onHighlightChange(t){const{previousHighlight:e,currentHighlight:i}=t;i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),e?.series===this.cartesianSeries&&this.restyleHighlightChange(e,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new jd}getWhiskerProperties(){const{stroke:t,strokeWidth:e,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}=this.properties;return{stroke:t,strokeWidth:e,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}}};import{_Theme as Xd}from"ag-charts-community";var Qd={series:{errorBar:{visible:!0,stroke:Xd.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},$d={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:kd,instanceConstructor:Wd,themeTemplate:Qd};import{_ModuleSupport as Pn,_Theme as zn}from"ag-charts-community";import{_ModuleSupport as Bn}from"ag-charts-community";import{_ModuleSupport as jn,_Scene as Zd,_Util as qd}from"ag-charts-community";var{Validate:oo,BOOLEAN:Jd,POSITIVE_NUMBER:Fn,Layers:ao,ActionOnSet:Un,CategoryAxis:tu,GroupedCategoryAxis:eu}=jn,{toRadians:iu,Padding:su,Logger:Vn}=qd,{Text:ou,Group:Zi,BBox:Yn}=Zd,no=class{constructor(){this.top=0,this.bottom=0}};h([oo(Fn)],no.prototype,"top",2),h([oo(Fn)],no.prototype,"bottom",2);var qi=class extends jn.BaseModuleInstance{constructor(){super(...arguments),this.enabled=!1,this.padding=new no,this.root=new Zi({name:"root"}),this.seriesRoot=this.root.appendChild(new Zi({name:"Series-root",layer:!0,zIndex:ao.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Zi({name:"Axes-Grids",layer:!0,zIndex:ao.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Zi({name:"Axes-Grids",layer:!0,zIndex:ao.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach(s=>s.destroy()),this.axes=[],this._destroyed=!0)}onSeriesChange(s,t){var e;const i=(e=t?.filter(o=>!s.includes(o)))!=null?e:[];this.destroySeries(i);for(const o of s){if(t?.includes(o))continue;o.rootGroup.parent==null&&this.seriesRoot.appendChild(o.rootGroup);const a=this;o.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return a.seriesRect},placeLabels(){return new Map}},o.resetAnimation("initial")}}destroySeries(s){s?.forEach(t=>{t.destroy(),t.rootGroup!=null&&this.seriesRoot.removeChild(t.rootGroup),t.chart=void 0})}assignSeriesToAxes(){this.axes.forEach(s=>{s.boundSeries=this.series.filter(t=>t.axes[s.direction]===s)})}assignAxesToSeries(){const s={};this.axes.forEach(t=>{var e;const i=t.direction;((e=s[i])!=null?e:s[i]=[]).push(t)}),this.series.forEach(t=>{t.directions.forEach(e=>{const i=s[e];if(!i){Vn.warnOnce(`no available axis for direction [${e}]; check series and axes configuration.`);return}const o=t.getKeys(e),a=this.findMatchingAxis(i,o);if(!a){Vn.warnOnce(`no matching axis for direction [${e}] and keys [${o}]; check series and axes configuration.`);return}t.axes[e]=a})})}findMatchingAxis(s,t){for(const e of s){if(!e.keys.length)return e;if(t){for(const i of t)if(e.keys.includes(i))return e}}}updateData(s){return C(this,null,function*(){this.series.forEach(t=>t.setChartData(s.data))})}processData(s){return C(this,null,function*(){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=this.series.map(e=>e.processData(s.dataController));yield Promise.all(t)})}computeAxisPadding(){const s=new su;return this.axes.forEach(t=>{var e;const{position:i,thickness:o=0,line:a,label:n}=t;if(i==null)return;let r;o>0?r=o:r=(a.enabled?a.width:0)+(n.enabled?((e=n.fontSize)!=null?e:0)*ou.defaultLineHeightRatio+n.padding:0),s[i]=Math.ceil(r)}),s}layout(s,t){return C(this,null,function*(){const{padding:e}=this,i=this.seriesRect!=null,o=new Yn(0,0,s,t-(e.top+e.bottom));this.seriesRect=o,this.seriesRoot.translationY=e.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new Yn(0,-e.top,s,t)));const a=n=>n instanceof tu||n instanceof eu?[0,o.height]:[o.height,0];this.axes.forEach(n=>{const{position:r="left"}=n;switch(r){case"top":case"bottom":n.range=[0,o.width],n.gridLength=o.height;break;case"right":case"left":n.range=a(n),n.gridLength=o.width;break}switch(r){case"top":case"left":n.translation.x=0,n.translation.y=0;break;case"bottom":n.translation.x=0,n.translation.y=t;break;case"right":n.translation.x=s,n.translation.y=0;break}n.gridPadding=0,n.calculateLayout(),n.updatePosition({rotation:iu(n.rotation),sideFlag:n.label.getSideFlag()}),n.update(void 0,i)}),yield Promise.all(this.series.map(n=>n.update({seriesRect:o})))})}};h([oo(Jd)],qi.prototype,"enabled",2),h([Un({changeValue(s,t=[]){for(const e of t)s.includes(e)||(e.detachAxis(this.axisGroup,this.axisGridGroup),e.destroy());for(const e of s)t?.includes(e)||e.attachAxis(this.axisGroup,this.axisGridGroup)}})],qi.prototype,"axes",2),h([Un({changeValue(s,t){this.onSeriesChange(s,t)}})],qi.prototype,"series",2);var{ObserveChanges:au}=Bn,Hn=class ya extends Bn.Navigator{constructor(){super(...arguments),this.miniChart=new qi}updateData(t){return C(this,null,function*(){yield this.miniChart.updateData(t)})}processData(t){return C(this,null,function*(){yield this.miniChart.processData(t)})}performLayout(t){return C(this,null,function*(){const{shrinkRect:e}=yield Ht(ya.prototype,this,"performLayout").call(this,t);if(this.enabled){const{top:i,bottom:o}=this.miniChart.computeAxisPadding();e.shrink(i+o,"bottom"),this.y-=o}return{shrinkRect:e}})}performCartesianLayout(t){return C(this,null,function*(){yield Ht(ya.prototype,this,"performCartesianLayout").call(this,t),yield this.miniChart.layout(this.width,this.height)})}};h([au((s,t,e)=>{e!=null&&s.rs.background.removeChild(e.root),t!=null&&s.rs.background.appendChild(t.root)})],Hn.prototype,"miniChart",2);var nu=Hn,Gn,ru={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:nu,themeTemplate:_t(K({},Pn.NavigatorModule.themeTemplate),{navigator:_t(K({},(Gn=Pn.NavigatorModule.themeTemplate)==null?void 0:Gn.navigator),{miniChart:{enabled:!1,label:{color:zn.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:zn.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})};import{_ModuleSupport as lu,_Util as cu}from"ag-charts-community";var{BOOLEAN:ro,STRING:hu,UNION:du,BaseProperties:uu,CartesianAxis:Kn,ChartUpdateType:Wn,isDate:pu,isFiniteNumber:Ji,ObserveChanges:Mi,Validate:vi}=lu,{Logger:gu}=cu,_e=class extends uu{constructor(s){super(),this.moduleContext=s,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(s,t=Wn.UPDATE_DATA){s.updateService.update(t,{skipSync:!0})}updateSiblings(s){const{syncManager:t}=this.moduleContext;for(const e of t.getGroupSiblings(s))this.updateChart(e)}enabledZoomSync(){const{syncManager:s,zoomManager:t}=this.moduleContext;this.disableZoomSync=t.addListener("zoom-change",()=>{var e;for(const i of s.getGroupSiblings(this.groupId))(e=i.modules.get("sync"))!=null&&e.zoom&&i.zoomManager.updateZoom(this.mergeZoom(i))})}enabledNodeInteractionSync(){const{highlightManager:s,syncManager:t}=this.moduleContext;this.disableNodeInteractionSync=s.addListener("highlight-change",e=>{var i,o;for(const a of t.getGroupSiblings(this.groupId))if((i=a.modules.get("sync"))!=null&&i.nodeInteraction){if(!((o=e.currentHighlight)!=null&&o.datum)){a.highlightManager.updateHighlight(a.id);continue}for(const n of a.axes){const r=this.axes==="xy"?"x":this.axes;if(!Kn.is(n)||n.direction!==r)continue;const l=a.series.map(c=>{const d=c.getKeys(n.direction);if(n.keys.length&&!n.keys.some(m=>d.includes(m)))return;const[{nodeData:u}]=c.contextNodeData;if(!u?.length)return;const p=u[0][`${n.direction}Key`];let g=e.currentHighlight.datum[p];const f=pu(g);return f&&(g=g.getTime()),u.find(m=>{const y=m.datum[p];return f?y.getTime()===g:y===g})}).filter(Boolean);l.length<2&&l[0]!==a.highlightManager.getActiveHighlight()&&(a.highlightManager.updateHighlight(a.id,l[0]),this.updateChart(a,Wn.SERIES_UPDATE))}}})}syncAxes(s=!1){const{syncManager:t}=this.moduleContext,e=t.getChart(),i=t.getGroup(this.groupId).flatMap(a=>a.series),o=t.getGroupSiblings(this.groupId).flatMap(a=>a.axes);e.axes.forEach(a=>{if(!Kn.is(a)||this.axes!=="xy"&&this.axes!==a.direction)return;const{direction:n,min:r,max:l,nice:c,reverse:d}=a;for(const u of o)if(n===u.direction&&(c!==u.nice||d!==u.reverse||r!==u.min&&(Ji(r)||Ji(u.min))||l!==u.max&&(Ji(l)||Ji(u.max)))){gu.warnOnce("For axes sync, ensure matching `min`, `max`, `nice`, and `reverse` properties.");return}a.boundSeries=i.filter(u=>{const p=u.getKeys(a.direction);return a.keys.length?a.keys.some(g=>p.includes(g)):!0})}),s||setTimeout(()=>this.updateSiblings(this.groupId))}mergeZoom(s){var t,e;const{zoomManager:i}=this.moduleContext;if(this.axes==="xy")return i.getZoom();const o=(t=s.zoomManager.getZoom())!=null?t:{};return o[this.axes]=(e=i.getZoom())==null?void 0:e[this.axes],o}onEnabledChange(){const{syncManager:s}=this.moduleContext;this.enabled?s.subscribe(this.groupId):s.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(s,t){if(!this.enabled||s===t)return;const{syncManager:e}=this.moduleContext;e.unsubscribe(t),e.subscribe(s),this.updateSiblings(t),this.updateSiblings(s)}onAxesChange(){if(!this.enabled)return;const{syncManager:s}=this.moduleContext;this.updateChart(s.getChart())}onNodeInteractionChange(){var s;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():(s=this.disableNodeInteractionSync)==null||s.call(this)}onZoomChange(){var s;this.enabled&&this.zoom?this.enabledZoomSync():(s=this.disableZoomSync)==null||s.call(this)}destroy(){var s;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),(s=this.disableZoomSync)==null||s.call(this)}};_e.className="Sync",h([vi(ro),Mi(s=>s.onEnabledChange())],_e.prototype,"enabled",2),h([vi(hu,{optional:!0}),Mi((s,t,e)=>s.onGroupIdChange(t,e))],_e.prototype,"groupId",2),h([vi(du(["x","y","xy"],"an axis")),Mi(s=>s.onAxesChange())],_e.prototype,"axes",2),h([vi(ro),Mi(s=>s.onNodeInteractionChange())],_e.prototype,"nodeInteraction",2),h([vi(ro),Mi(s=>s.onZoomChange())],_e.prototype,"zoom",2);var yu={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:_e,themeTemplate:{sync:{enabled:!1}}};import{_ModuleSupport as Ee}from"ag-charts-community";import{_ModuleSupport as mu,_Scene as fu}from"ag-charts-community";var{COLOR_STRING:xu,RATIO:Su,Validate:Xn}=mu,ts=class extends fu.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};ts.className="ZoomRect",h([Xn(xu)],ts.prototype,"fill",2),h([Xn(Su)],ts.prototype,"fillOpacity",2);import{_ModuleSupport as lo}from"ag-charts-community";import{_ModuleSupport as Mu}from"ag-charts-community";var{clamp:vu}=Mu,st={min:0,max:1},es=(s,t=st.min,e=st.max)=>vu(t,s,e);function Qn(){return{x:K({},st),y:K({},st)}}function mt(s){var t,e,i,o,a,n,r,l;return{x:{min:(e=(t=s?.x)==null?void 0:t.min)!=null?e:st.min,max:(o=(i=s?.x)==null?void 0:i.max)!=null?o:st.max},y:{min:(n=(a=s?.y)==null?void 0:a.min)!=null?n:st.min,max:(l=(r=s?.y)==null?void 0:r.max)!=null?l:st.max}}}function ge(s,t,e){if(!s)return{x:0,y:0};const i=es(t-s.x,0,s.x+s.width),o=es(e-s.y,0,s.y+s.height),a=1/s.width*i,n=1-1/s.height*o;return{x:es(a),y:es(n)}}function is(s,t,e){return{x:{min:s.x.min+t,max:s.x.max+t},y:{min:s.y.min+e,max:s.y.max+e}}}function Au(s,t,e){const i=s.x.max-s.x.min,o=s.y.max-s.y.min;return{x:{min:s.x.min,max:s.x.min+i*t},y:{min:s.y.min,max:s.y.min+o*e}}}function $n(s,t,e){const i=s.x.max-s.x.min,o=s.y.max-s.y.min,a=s.x.min+i/2,n=s.y.min+o/2;return{x:{min:a-i*t/2,max:a+i*t/2},y:{min:n-o*e/2,max:n+o*e/2}}}function ss(s,t,e,i){const{min:o,max:a}=t,n=o+(a-o)/2,r=s.max-s.min;switch(e){case"start":return{min:o,max:t.min+r};case"end":return{min:t.max-r,max:a};case"middle":return{min:n-r/2,max:n+r/2};case"pointer":return Ai(s,t,i??n);default:return{min:o,max:a}}}function Ai(s,t,e){const i=e*(1-(t.max-t.min-(s.max-s.min))),o=e-i,a=s.min+o,n=s.max+o;return{min:a,max:n}}function Iu(s,t,e){return{x:{min:s.x.min*t,max:s.x.max*t},y:{min:s.y.min*e,max:s.y.max*e}}}function se(s){const t=Qn();return t.x=Zn(s.x),t.y=Zn(s.y),t}function Zn(s){const t=s.max-s.min;let e=s.max>st.max?st.max-t:s.min,i=s.min<st.min?t:s.max;return e=Math.max(st.min,e),i=Math.min(st.max,i),{min:e,max:i}}var Du=class{constructor(){this.isAxisDragging=!1}update(s,t,e,i,o,a){var n;return this.isAxisDragging=!0,(n=this.oldZoom)!=null||(this.oldZoom=mt(t===lo.ChartAxisDirection.X?_t(K({},o),{x:a}):_t(K({},o),{y:a}))),this.updateCoords(s.offsetX,s.offsetY),this.updateZoom(t,e,i)}stop(){this.isAxisDragging=!1,this.coords=void 0,this.oldZoom=void 0}updateCoords(s,t){this.coords?(this.coords.x2=s,this.coords.y2=t):this.coords={x1:s,y1:t,x2:s,y2:t}}updateZoom(s,t,e){const{coords:i,oldZoom:o}=this;let a=mt(o);if(!i||!o)return s===lo.ChartAxisDirection.X?a.x:a.y;const n=ge(e,i.x1,i.y1),r=ge(e,i.x2,i.y2);if(s===lo.ChartAxisDirection.X){const c=(r.x-n.x)*(o.x.max-o.x.min);return a.x.max+=c,a.x=ss(a.x,o.x,t,n.x),a=se(a),a.x}const l=(r.y-n.y)*(o.y.max-o.y.min);return a.y.max-=l,a.y=ss(a.y,o.y,t,n.y),a=se(a),a.y}};import{_ModuleSupport as qn}from"ag-charts-community";var Nu=class{constructor(){this.isPanning=!1,this.hscrollCoords={x1:0,x2:0,y1:0,y2:0}}updateDrag(s,t,e){this.isPanning=!0;const{offsetX:i,offsetY:o}=s;return this.dragCoords?(this.dragCoords.x1=this.dragCoords.x2,this.dragCoords.y1=this.dragCoords.y2,this.dragCoords.x2=i,this.dragCoords.y2=o):this.dragCoords={x1:i,y1:o,x2:i,y2:o},this.translateZooms(t,e,this.dragCoords)}updateHScroll(s,t,e){return this.isPanning=!0,this.hscrollCoords.x1=s*5,this.translateZooms(t,e,this.hscrollCoords)}stop(){this.isPanning=!1,this.dragCoords=void 0}translateZooms(s,t,e){const{x1:i,y1:o,x2:a,y2:n}=e,r=i<=a?a-i:i-a,l=o<=n?n-o:o-n,c=ge(s,s.x+r,s.y+s.height-l),d=i<=a?-c.x:c.x,u=o<=n?c.y:-c.y,p={};for(const[g,{direction:f,zoom:m}]of Object.entries(t)){let y;f===qn.ChartAxisDirection.X?y=mt({x:m}):y=mt({y:m});const M=y.x.max-y.x.min,v=y.y.max-y.y.min;y=se(is(y,d*M,u*v)),f===qn.ChartAxisDirection.X?p[g]={direction:f,zoom:y.x}:p[g]={direction:f,zoom:y.y}}return p}},bu=class{update(s,t,e,i,o,a,n,r){const l=mt(r),c=s.sourceEvent,d=s.deltaY;let u=mt(l);return u.x.max+=o?t*d*(l.x.max-l.x.min):0,u.y.max+=a?t*d*(l.y.max-l.y.min):0,e==="pointer"&&o||i==="pointer"&&a?u=this.scaleZoomToPointer(c,o,a,n,l,u):(o&&(u.x=ss(u.x,l.x,e)),a&&(u.y=ss(u.y,l.y,i))),u=se(u),u}scaleZoomToPointer(s,t,e,i,o,a){var n,r;const l=ge(i,(n=s.offsetX)!=null?n:s.clientX,(r=s.offsetY)!=null?r:s.clientY);return a.x=t?Ai(a.x,o.x,l.x):a.x,a.y=e?Ai(a.y,o.y,l.y):a.y,a}},Tu=class{constructor(s){this.rect=s,this.rect.visible=!1}update(s,t,e,i,o,a,n){this.rect.visible=!0,this.updateCoords(s.offsetX,s.offsetY,t,e,i,o,a,n),this.updateRect(a)}stop(s,t,e){let i=mt();if(!s||!t)return i;this.coords&&(i=this.createZoomFromCoords(t,e));const o=t.width/s.width,a=t.height/s.height;return i=se(Iu(i,o,a)),this.reset(),i}reset(){this.coords=void 0,this.rect.visible=!1}updateCoords(s,t,e,i,o,a,n,r){if(!this.coords){this.coords={x1:s,y1:t,x2:s,y2:t};return}if(this.coords.x2=s,this.coords.y2=t,!n)return;const l=mt(r),c=this.getNormalisedDimensions(),d=n.width/n.height,u=l.x.max-l.x.min,p=l.y.max-l.y.min,g=e/u,f=i/p;c.width/n.width<g&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-n.width*g:this.coords.x2=this.coords.x1+n.width*g),a&&!o?c.height/n.height<f&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-n.width*g:this.coords.y2=this.coords.y1+n.height*f):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-c.width/d,this.coords.y1-n.height*f):this.coords.y2=Math.max(this.coords.y1+c.width/d,this.coords.y1+n.height*f),o||(this.coords.x1=n.x,this.coords.x2=n.x+n.width),a||(this.coords.y1=n.y,this.coords.y2=n.y+n.height)}updateRect(s){if(!s)return;const{rect:t}=this,e=this.getNormalisedDimensions(),{width:i,height:o}=e;let{x:a,y:n}=e;a=Math.max(a,s.x),a-=Math.max(0,a+i-(s.x+s.width)),n=Math.max(n,s.y),n-=Math.max(0,n+o-(s.y+s.height)),t.x=a,t.y=n,t.width=i,t.height=o}createZoomFromCoords(s,t){const e=mt(t),i=this.getNormalisedDimensions(),o=ge(s,i.x,i.y+i.height),a=i.width/s.width,n=i.height/s.height;let r=Au(e,a,n);const l=o.x*(e.x.max-e.x.min),c=o.y*(e.y.max-e.y.min);return r=is(r,l,c),r=se(r),r}getNormalisedDimensions(){var s;const{x1:t=0,y1:e=0,x2:i=0,y2:o=0}=(s=this.coords)!=null?s:{},a=t<=i?t:i,n=e<=o?e:o,r=t<=i?i-t:t-i,l=e<=o?o-e:e-o;return{x:a,y:n,width:r,height:l}}},{BOOLEAN:ii,NUMBER:Jn,RATIO:_u,UNION:co,ActionOnSet:Eu,ChartAxisDirection:os,ChartUpdateType:Lu,Validate:zt,round:Ou}=Ee,tr=co(["pointer","start","middle","end"],"an anchor cord"),as="zoom-action",ns="pan-action",rs="zoom-cursor",er="zoom-tooltip",Ru=3,Le=s=>Ou(s,Ru),kt=class extends Ee.BaseModuleInstance{constructor(s){var t;super(),this.ctx=s,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(st.max-st.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX="end",this.anchorPointY="middle",this.axisDragger=new Du,this.panner=new Nu,this.scroller=new bu,this.isDragging=!1,this.minRatioX=0,this.minRatioY=0,this.enableSecondaryAxis=!1,this.scene=s.scene,this.cursorManager=s.cursorManager,this.highlightManager=s.highlightManager,this.tooltipManager=s.tooltipManager,this.zoomManager=s.zoomManager,this.dataService=s.dataService,this.updateService=s.updateService,this.contextMenuRegistry=s.contextMenuRegistry;const{Default:e,ZoomDrag:i,Animation:o}=Ee.InteractionState,a=e|o|i,n=e|o;this.destroyFns.push(s.interactionManager.addListener("dblclick",l=>this.onDoubleClick(l),n),s.interactionManager.addListener("drag",l=>this.onDrag(l),a),s.interactionManager.addListener("drag-start",l=>this.onDragStart(l),a),s.interactionManager.addListener("drag-end",()=>this.onDragEnd(),a),s.interactionManager.addListener("wheel",l=>this.onWheel(l),n),s.interactionManager.addListener("hover",()=>this.onHover(),n),s.chartEventManager.addListener("axis-hover",l=>this.onAxisHover(l)),s.gestureDetector.addListener("pinch-move",l=>this.onPinchMove(l)),s.layoutService.addListener("layout-complete",l=>this.onLayoutComplete(l)),s.updateService.addListener("update-complete",l=>this.onUpdateComplete(l)));const r=new ts;this.selector=new Tu(r),(t=this.scene.root)==null||t.appendChild(r),this.destroyFns.push(()=>{var l;return(l=this.scene.root)==null?void 0:l.removeChild(r)})}registerContextMenuActions(){this.contextMenuRegistry.registerDefaultAction({id:as,label:"Zoom to here",action:t=>this.onContextMenuZoomToHere(t)}),this.contextMenuRegistry.registerDefaultAction({id:ns,label:"Pan to here",action:t=>this.onContextMenuPanToHere(t)});const s=mt(this.zoomManager.getZoom());this.toggleContextMenuActions(s)}toggleContextMenuActions(s){this.isMinZoom(s)?this.contextMenuRegistry.disableAction(as):this.contextMenuRegistry.enableAction(as),this.isMaxZoom(s)?this.contextMenuRegistry.disableAction(ns):this.contextMenuRegistry.enableAction(ns)}onDoubleClick(s){var t;if(!(!this.enabled||!this.enableDoubleClickToReset))if(this.hoveredAxis){const{id:e,direction:i}=this.hoveredAxis;this.updateAxisZoom(e,i,K({},st))}else(t=this.paddedRect)!=null&&t.containsPoint(s.offsetX,s.offsetY)&&this.highlightManager.getActivePicked()===void 0&&this.updateZoom(Qn())}onDragStart(s){var t;this.canDragSelection=(t=this.paddedRect)==null?void 0:t.containsPoint(s.offsetX,s.offsetY)}onDrag(s){if(!this.enabled||!this.paddedRect||!this.seriesRect)return;this.ctx.interactionManager.pushState(Ee.InteractionState.ZoomDrag);const t=s.sourceEvent;if(!(t.button===0))return;this.isDragging=!0,this.tooltipManager.updateTooltip(er);const i=mt(this.zoomManager.getZoom());if(this.enableAxisDragging&&this.hoveredAxis){const{id:o,direction:a}=this.hoveredAxis,n=a===Ee.ChartAxisDirection.X?this.anchorPointX:this.anchorPointY,r=this.zoomManager.getAxisZoom(o),l=this.axisDragger.update(s,a,n,this.seriesRect,i,r);this.updateAxisZoom(o,a,l);return}if(this.paddedRect.containsPoint(s.offsetX,s.offsetY)){if(this.enablePanning&&(!this.enableSelecting||this.isPanningKeyPressed(t))){const o=this.panner.updateDrag(s,this.seriesRect,this.zoomManager.getAxisZooms());for(const[a,{direction:n,zoom:r}]of Object.entries(o))this.updateAxisZoom(a,n,r);this.cursorManager.updateCursor(rs,"grabbing");return}!this.enableSelecting||!this.canDragSelection||this.isPanningKeyPressed(t)||this.panner.isPanning||this.isMinZoom(i)||(this.selector.update(s,this.minRatioX,this.minRatioY,this.isScalingX(),this.isScalingY(),this.paddedRect,i),this.updateService.update(Lu.PERFORM_LAYOUT,{skipAnimations:!0}))}}onDragEnd(){if(this.ctx.interactionManager.popState(Ee.InteractionState.ZoomDrag),!this.enabled||!this.isDragging)return;const s=mt(this.zoomManager.getZoom());if(this.cursorManager.updateCursor(rs),this.enableAxisDragging&&this.axisDragger.isAxisDragging)this.axisDragger.stop();else if(this.enablePanning&&this.panner.isPanning)this.panner.stop();else if(this.enableSelecting&&!this.isMinZoom(s)&&this.canDragSelection){const t=this.selector.stop(this.seriesRect,this.paddedRect,s);this.updateZoom(t)}this.isDragging=!1,this.tooltipManager.removeTooltip(er)}onWheel(s){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),e=this.paddedRect.containsPoint(s.offsetX,s.offsetY),i=this.enableAxisDragging&&this.hoveredAxis!=null;let o=this.isScalingX(),a=this.isScalingY();i&&(o=this.hoveredAxis.direction===Ee.ChartAxisDirection.X,a=!o);const n=s.sourceEvent,{deltaX:r,deltaY:l}=n;if(this.enablePanning&&r!==void 0&&l!==void 0&&Math.abs(r)>Math.abs(l)){s.consume(),s.sourceEvent.preventDefault();const c=this.panner.updateHScroll(s.deltaX,this.seriesRect,this.zoomManager.getAxisZooms());for(const[d,{direction:u,zoom:p}]of Object.entries(c))this.updateAxisZoom(d,u,p);return}if(e||i){s.consume(),s.sourceEvent.preventDefault();const c=this.scroller.update(s,this.scrollingStep,this.getAnchorPointX(),this.getAnchorPointY(),o,a,this.seriesRect,t);this.updateZoom(c)}}onHover(){this.enabled&&(this.hoveredAxis=void 0,this.cursorManager.updateCursor(rs))}onAxisHover(s){this.enabled&&(this.hoveredAxis={id:s.axisId,direction:s.direction},this.enableAxisDragging&&this.cursorManager.updateCursor(rs,s.direction===os.X?"ew-resize":"ns-resize"))}onPinchMove(s){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),e=mt(t),i=mt(t),o=s.deltaDistance*-.01,a=ge(this.seriesRect,s.origin.x,s.origin.y);this.isScalingX()&&(i.x.max+=o*(e.x.max-e.x.min),i.x=Ai(i.x,e.x,a.x)),this.isScalingY()&&(i.y.max+=o*(e.y.max-e.y.min),i.y=Ai(i.y,e.y,a.y)),this.updateZoom(se(i))}onLayoutComplete(s){if(!this.enabled)return;const{series:{rect:t,paddedRect:e,shouldFlipXY:i}}=s;this.seriesRect=t,this.paddedRect=e,this.shouldFlipXY=i}onUpdateComplete({minRect:s}){if(!this.enabled||!this.paddedRect||!s)return;if(this.dataService.isLazy()){this.minRatioX=0,this.minRatioY=0;return}const t=mt(this.zoomManager.getZoom()),e=this.shouldFlipXY?this.minVisibleItemsY:this.minVisibleItemsX,i=this.shouldFlipXY?this.minVisibleItemsX:this.minVisibleItemsY,o=s.width*e/this.paddedRect.width,a=s.height*i/this.paddedRect.height,n=o*(t.x.max-t.x.min),r=a*(t.y.max-t.y.min);this.isScalingX()&&(this.minRatioX=Math.min(1,Le(n))),this.isScalingY()&&(this.minRatioY=Math.min(1,Le(r))),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onContextMenuZoomToHere({event:s}){if(!this.enabled||!this.paddedRect||!s||!s.target)return;const t=mt(this.zoomManager.getZoom()),e=ge(this.paddedRect,s.clientX,s.clientY),i=e.x*(t.x.max-t.x.min),o=e.y*(t.y.max-t.y.min),a=st.max-st.min,n=a/2;let r={x:{min:e.x-n,max:e.x+n},y:{min:e.y-n,max:e.y+n}};r=$n(r,this.isScalingX()?this.minRatioX:a,this.isScalingY()?this.minRatioY:a),r=is(r,t.x.min-e.x+i,t.y.min-e.y+o),this.updateZoom(se(r))}onContextMenuPanToHere({event:s}){if(!this.enabled||!this.paddedRect||!s||!s.target)return;const t=mt(this.zoomManager.getZoom()),e=ge(this.paddedRect,s.clientX,s.clientY),i=t.x.max-t.x.min,o=t.y.max-t.y.min,a=e.x*i,n=e.y*o,r=(st.max-st.min)/2;let l={x:{min:e.x-r,max:e.x+r},y:{min:e.y-r,max:e.y+r}};l=$n(l,i,o),l=is(l,t.x.min-e.x+a,t.y.min-e.y+n),this.updateZoom(se(l))}isPanningKeyPressed(s){switch(this.panKey){case"alt":return s.altKey;case"ctrl":return s.ctrlKey;case"shift":return s.shiftKey;case"meta":return s.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(s){const t=this.enableScrolling?(s.x.max-s.x.min)*(1-this.scrollingStep):Le(s.x.max-s.x.min),e=this.enableScrolling?(s.y.max-s.y.min)*(1-this.scrollingStep):Le(s.y.max-s.y.min),i=!this.isScalingX()||t<=this.minRatioX,o=!this.isScalingY()||e<=this.minRatioX;return i&&o}isMaxZoom(s){return s.x.min===st.min&&s.x.max===st.max&&s.y.min===st.min&&s.y.max===st.max}updateZoom(s){const t=Le(s.x.max-s.x.min),e=Le(s.y.max-s.y.min);if(t<this.minRatioX||e<this.minRatioY){this.contextMenuRegistry.disableAction(as),this.contextMenuRegistry.enableAction(ns);return}this.toggleContextMenuActions(s),this.zoomManager.updateZoom(s)}updateAxisZoom(s,t,e){if(!e)return;if(!this.enableSecondaryAxis){const o=mt(this.zoomManager.getZoom());t===os.X?o.x=e:o.y=e,this.updateZoom(o);return}const i=Le(e.max-e.min);t===os.X&&i<this.minRatioX||t===os.Y&&i<this.minRatioY||this.zoomManager.updateAxisZoom(s,e)}};h([Eu({newValue(s){s&&this.registerContextMenuActions()}}),zt(ii)],kt.prototype,"enabled",2),h([zt(ii)],kt.prototype,"enableAxisDragging",2),h([zt(ii)],kt.prototype,"enableDoubleClickToReset",2),h([zt(ii)],kt.prototype,"enablePanning",2),h([zt(ii)],kt.prototype,"enableScrolling",2),h([zt(ii)],kt.prototype,"enableSelecting",2),h([zt(co(["alt","ctrl","meta","shift"],"a pan key"))],kt.prototype,"panKey",2),h([zt(co(["x","y","xy"],"an axis"))],kt.prototype,"axes",2),h([zt(_u)],kt.prototype,"scrollingStep",2),h([zt(Jn.restrict({min:1}))],kt.prototype,"minVisibleItemsX",2),h([zt(Jn.restrict({min:1}))],kt.prototype,"minVisibleItemsY",2),h([zt(tr)],kt.prototype,"anchorPointX",2),h([zt(tr)],kt.prototype,"anchorPointY",2);var ku={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:kt,themeTemplate:{zoom:{enabled:!1}}};import{_ModuleSupport as ho,_Scale as Cu,_Scene as wu,_Util as Pu}from"ag-charts-community";var{BOOLEAN:ir,Layers:zu,POSITION:Bu,Validate:Oe,Default:ju,MIN_SPACING:Fu,POSITIVE_NUMBER:uo,ProxyProperty:Ft,DeprecatedAndRenamedTo:Uu}=ho,{BBox:Vu,Group:po,Rect:Yu,LinearGradientFill:Hu,Triangle:Gu}=wu,{createId:Ku,Logger:Wu}=Pu,go=class{constructor(){this.thickness=16,this.preferredLength=100}};h([Oe(uo)],go.prototype,"thickness",2),h([Oe(uo)],go.prototype,"preferredLength",2);var sr=class extends ho.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.maxSpacing=NaN}};h([Oe(Fu),ju(NaN)],sr.prototype,"maxSpacing",2);var Xu=class extends ho.CartesianAxis{constructor(s){super(s,new Cu.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}formatDatum(s){return typeof s=="number"?s.toFixed(2):(Wu.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(s))}createTick(){return new sr}},ye=class{constructor(s){this.label=s}};h([Ft("label.fontStyle")],ye.prototype,"fontStyle",2),h([Ft("label.fontWeight")],ye.prototype,"fontWeight",2),h([Ft("label.fontSize")],ye.prototype,"fontSize",2),h([Ft("label.fontFamily")],ye.prototype,"fontFamily",2),h([Ft("label.color")],ye.prototype,"color",2),h([Ft("label.format")],ye.prototype,"format",2),h([Ft("label.formatter")],ye.prototype,"formatter",2);var Ii=class{constructor(s){this.tick=s}};h([Ft("tick.values")],Ii.prototype,"values",2),h([Ft("tick.minSpacing")],Ii.prototype,"minSpacing",2),h([Ft("tick.maxSpacing")],Ii.prototype,"maxSpacing",2),h([Ft("tick.interval")],Ii.prototype,"step",2);var or=class{constructor(s){this.axis=s,this.label=new ye(s.label),this.interval=new Ii(s.tick)}};h([Ft("axis.seriesAreaPadding")],or.prototype,"padding",2);var Re=class{constructor(s){this.ctx=s,this.id=Ku(this),this.group=new po({name:"legend",layer:!0,zIndex:zu.LEGEND_ZINDEX}),this.gradient=new go,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=s.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",t=>this.update(t.shrinkRect))),this.highlightManager=s.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",()=>this.onChartHoverChange())),this.gradientRect=new Yu,this.gradientFill=new Hu,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Gu,this.group.append(this.arrow),this.axisGridGroup=new po({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new po({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new Xu(s),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new or(this.axis),this.stop=this.scale,this.destroyFns.push(()=>this.detachLegend())}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(s=>s())}attachLegend(s){s.append(this.group)}detachLegend(){var s;(s=this.group.parent)==null||s.removeChild(this.group)}update(s){const t=this.data[0];if(!this.enabled||!t||!t.enabled)return this.group.visible=!1,{shrinkRect:s.clone()};const{colorRange:e}=this.normalizeColorArrays(t),i=this.updateGradientRect(s,e),o=this.updateAxis(t,i),{newShrinkRect:a,translateX:n,translateY:r}=this.getMeasurements(s,i,o);return this.updateArrow(i),this.group.visible=!0,this.group.translationX=n,this.group.translationY=r,this.latestGradientBox=i,{shrinkRect:a}}normalizeColorArrays(s){let t=s.colorDomain.slice();const e=s.colorRange.slice();if(t.length===e.length)return{colorDomain:t,colorRange:e};t.length>e.length&&e.splice(t.length);const i=e.length;return t=e.map((o,a)=>{const[n,r]=t;return a===0?n:a===i-1?r:n+(r-n)*a/(i-1)}),{colorDomain:t,colorRange:e}}updateGradientRect(s,t){const{preferredLength:e,thickness:i}=this.gradient,o=new Vu(0,0,0,0),a=this.getOrientation()==="vertical";if(a){const n=s.height,r=e;o.x=0,o.y=0,o.width=i,o.height=Math.min(n,r)}else{const n=s.width,r=e;o.x=0,o.y=0,o.width=Math.min(n,r),o.height=i}return this.reverseOrder&&(t=t.slice().reverse()),this.gradientFill.stops=t,this.gradientFill.direction=a?"to-bottom":"to-right",this.gradientRect.x=o.x,this.gradientRect.y=o.y,this.gradientRect.width=o.width,this.gradientRect.height=o.height,o}updateAxis(s,t){const{reverseOrder:e,axis:i}=this,o=this.getOrientation()==="vertical";i.position=o?"right":"bottom",i.colorDomain=e?s.colorDomain.slice().reverse():s.colorDomain,i.calculateDomain(),i.range=o?[0,t.height]:[0,t.width],i.gridLength=0,i.translation.x=t.x+(o?t.width:0),i.translation.y=t.y+(o?0:t.height);const a=i.calculateLayout().bbox;return i.update(),a}updateArrow(s){var t;const{arrow:e,axis:{label:i,scale:o}}=this,a=this.highlightManager.getActiveHighlight(),n=a?.colorValue;if(a==null||n==null){e.visible=!1;return}const r=this.getOrientation()==="vertical",l=(t=i.fontSize)!=null?t:0,c=o.convert(n);let d,u,p;r?(d=s.x-l/2,u=s.y+c,p=Math.PI/2):(d=s.x+c,u=s.y-l/2,p=Math.PI),e.fill=i.color,e.size=l,e.translationX=d,e.translationY=u,e.rotation=p,e.visible=!0}getMeasurements(s,t,e){let i,o;this.getOrientation()==="vertical"?(i=t.width+e.width,o=t.height):(i=t.width,o=t.height+e.height);const{spacing:n}=this,r=s.clone();let l,c;return this.position==="left"?(l=s.x,c=s.y+s.height/2-o/2,r.shrink(i+n,"left")):this.position==="right"?(l=s.x+s.width-i,c=s.y+s.height/2-o/2,r.shrink(i+n,"right")):this.position==="top"?(l=s.x+s.width/2-i/2,c=s.y,r.shrink(o+n,"top")):(l=s.x+s.width/2-i/2,c=s.y+s.height-o,r.shrink(o+n,"bottom")),{translateX:l,translateY:c,gradientBox:t,newShrinkRect:r}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&this.latestGradientBox!=null&&this.updateArrow(this.latestGradientBox)}};Re.className="GradientLegend",h([Oe(ir)],Re.prototype,"enabled",2),h([Oe(Bu)],Re.prototype,"position",2),h([Oe(ir,{optional:!0})],Re.prototype,"reverseOrder",2),h([Oe(uo)],Re.prototype,"spacing",2),h([Uu("scale")],Re.prototype,"stop",2);import{_Theme as ar}from"ag-charts-community";var Qu="bottom",$u={position:Qu,spacing:20,scale:{padding:8,label:{color:ar.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ar.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1},Zu={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient",instanceConstructor:Re,themeTemplate:$u},qu=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(s,t){let e=s[0],i=s[1],o=s[2],a=s[3];e=this.ff(e,i,o,a,t[0],7,-680876936),a=this.ff(a,e,i,o,t[1],12,-389564586),o=this.ff(o,a,e,i,t[2],17,606105819),i=this.ff(i,o,a,e,t[3],22,-1044525330),e=this.ff(e,i,o,a,t[4],7,-176418897),a=this.ff(a,e,i,o,t[5],12,1200080426),o=this.ff(o,a,e,i,t[6],17,-1473231341),i=this.ff(i,o,a,e,t[7],22,-45705983),e=this.ff(e,i,o,a,t[8],7,1770035416),a=this.ff(a,e,i,o,t[9],12,-1958414417),o=this.ff(o,a,e,i,t[10],17,-42063),i=this.ff(i,o,a,e,t[11],22,-1990404162),e=this.ff(e,i,o,a,t[12],7,1804603682),a=this.ff(a,e,i,o,t[13],12,-40341101),o=this.ff(o,a,e,i,t[14],17,-1502002290),i=this.ff(i,o,a,e,t[15],22,1236535329),e=this.gg(e,i,o,a,t[1],5,-165796510),a=this.gg(a,e,i,o,t[6],9,-1069501632),o=this.gg(o,a,e,i,t[11],14,643717713),i=this.gg(i,o,a,e,t[0],20,-373897302),e=this.gg(e,i,o,a,t[5],5,-701558691),a=this.gg(a,e,i,o,t[10],9,38016083),o=this.gg(o,a,e,i,t[15],14,-660478335),i=this.gg(i,o,a,e,t[4],20,-405537848),e=this.gg(e,i,o,a,t[9],5,568446438),a=this.gg(a,e,i,o,t[14],9,-1019803690),o=this.gg(o,a,e,i,t[3],14,-187363961),i=this.gg(i,o,a,e,t[8],20,1163531501),e=this.gg(e,i,o,a,t[13],5,-1444681467),a=this.gg(a,e,i,o,t[2],9,-51403784),o=this.gg(o,a,e,i,t[7],14,1735328473),i=this.gg(i,o,a,e,t[12],20,-1926607734),e=this.hh(e,i,o,a,t[5],4,-378558),a=this.hh(a,e,i,o,t[8],11,-2022574463),o=this.hh(o,a,e,i,t[11],16,1839030562),i=this.hh(i,o,a,e,t[14],23,-35309556),e=this.hh(e,i,o,a,t[1],4,-1530992060),a=this.hh(a,e,i,o,t[4],11,1272893353),o=this.hh(o,a,e,i,t[7],16,-155497632),i=this.hh(i,o,a,e,t[10],23,-1094730640),e=this.hh(e,i,o,a,t[13],4,681279174),a=this.hh(a,e,i,o,t[0],11,-358537222),o=this.hh(o,a,e,i,t[3],16,-722521979),i=this.hh(i,o,a,e,t[6],23,76029189),e=this.hh(e,i,o,a,t[9],4,-640364487),a=this.hh(a,e,i,o,t[12],11,-421815835),o=this.hh(o,a,e,i,t[15],16,530742520),i=this.hh(i,o,a,e,t[2],23,-995338651),e=this.ii(e,i,o,a,t[0],6,-198630844),a=this.ii(a,e,i,o,t[7],10,1126891415),o=this.ii(o,a,e,i,t[14],15,-1416354905),i=this.ii(i,o,a,e,t[5],21,-57434055),e=this.ii(e,i,o,a,t[12],6,1700485571),a=this.ii(a,e,i,o,t[3],10,-1894986606),o=this.ii(o,a,e,i,t[10],15,-1051523),i=this.ii(i,o,a,e,t[1],21,-2054922799),e=this.ii(e,i,o,a,t[8],6,1873313359),a=this.ii(a,e,i,o,t[15],10,-30611744),o=this.ii(o,a,e,i,t[6],15,-1560198380),i=this.ii(i,o,a,e,t[13],21,1309151649),e=this.ii(e,i,o,a,t[4],6,-145523070),a=this.ii(a,e,i,o,t[11],10,-1120210379),o=this.ii(o,a,e,i,t[2],15,718787259),i=this.ii(i,o,a,e,t[9],21,-343485551),s[0]=this.add32(e,s[0]),s[1]=this.add32(i,s[1]),s[2]=this.add32(o,s[2]),s[3]=this.add32(a,s[3])}cmn(s,t,e,i,o,a){return t=this.add32(this.add32(t,s),this.add32(i,a)),this.add32(t<<o|t>>>32-o,e)}ff(s,t,e,i,o,a,n){return this.cmn(t&e|~t&i,s,t,o,a,n)}gg(s,t,e,i,o,a,n){return this.cmn(t&i|e&~i,s,t,o,a,n)}hh(s,t,e,i,o,a,n){return this.cmn(t^e^i,s,t,o,a,n)}ii(s,t,e,i,o,a,n){return this.cmn(e^(t|~i),s,t,o,a,n)}md51(s){const t=s.length,e=[1732584193,-271733879,-1732584194,271733878];let i;for(i=64;i<=s.length;i+=64)this.md5cycle(e,this.md5blk(s.substring(i-64,i)));s=s.substring(i-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)o[i>>2]|=s.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(e,o),i=0;i<16;i++)o[i]=0;return o[14]=t*8,this.md5cycle(e,o),e}md5blk(s){const t=[];for(let e=0;e<64;e+=4)t[e>>2]=s.charCodeAt(e)+(s.charCodeAt(e+1)<<8)+(s.charCodeAt(e+2)<<16)+(s.charCodeAt(e+3)<<24);return t}rhex(s){const t="0123456789abcdef".split("");let e="",i=0;for(;i<4;i++)e+=t[s>>i*8+4&15]+t[s>>i*8&15];return e}hex(s){for(let t=0;t<s.length;t++)s[t]=this.rhex(s[t]);return s.join("")}md5(s){return this.hex(this.md51(s))}add32(s,t){return this.ieCompatibility?this.add32Compat(s,t):this.add32Std(s,t)}add32Std(s,t){return s+t&4294967295}add32Compat(s,t){const e=(s&65535)+(t&65535);return(s>>16)+(t>>16)+(e>>16)<<16|e&65535}};function yo(s){return s==null||s.length===0}var ls={"01":"GRID","02":"CHARTS","0102":"BOTH"},nr=class Yt{constructor(t){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new qu,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(this.licenseKey,this.gridContext),e=`AG ${t.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`,i=t.suppliedLicenseType===void 0?"":`AG ${t.suppliedLicenseType==="BOTH"?"Grid and AG Charts":t.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(e);else if(t.expired){const o=Yt.getChartsReleaseDate(),a=Yt.formatDate(o);this.outputExpiredKey(t.expiry,a,i)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,e,i):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,e,i)}static extractExpiry(t){const e=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(Yt.decode(e),10))}static extractLicenseComponents(t){let e=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(e=e.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const i=e.length-32,o=e.substring(i),a=e.substring(0,i),[n,r,l]=Yt.extractBracketedInformation(e);return{md5:o,license:a,version:n,isTrial:r,type:l}}getLicenseDetails(t,e=!1){const i="CHARTS";if(yo(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const o=Yt.getChartsReleaseDate(),{md5:a,license:n,version:r,isTrial:l,type:c}=Yt.extractLicenseComponents(t);let d=a===this.md5.md5(n)&&t.indexOf("For_Trialing_ag-Grid_Only")===-1,u,p,g=null,f=!1,m;function y(){u=g<new Date,p=void 0}if(d&&(g=Yt.extractExpiry(n),d=!isNaN(g.getTime()),d))switch(p=o>g,r){case"legacy":case"2":{d=!1;break}case"3":yo(c)?d=!1:(m=c,c!==ls["02"]&&c!==ls["0102"]?(d=!1,f=!0):l&&y())}return d?{licenseKey:t,valid:d,expiry:Yt.formatDate(g),expired:p,version:r,isTrial:l,trialExpired:u,invalidLicenseTypeForCombo:e?m!=="BOTH":void 0,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:m}:{licenseKey:t,valid:d,incorrectLicenseType:f,currentLicenseType:i,suppliedLicenseType:m}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!yo(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const t=this.document.defaultView||window;if(!t)return"localhost";const e=t.location,{hostname:i=""}=e;return i}isForceWatermark(){var t,e;if(!this.document)return!1;const i=((e=(t=this.document)==null?void 0:t.defaultView)!=null?e:typeof window<"u")?window:void 0;if(!i)return!1;const{pathname:o}=i.location;return o?o.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(t){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],i=t.getDate(),o=t.getMonth(),a=t.getFullYear();return i+" "+e[o]+" "+a}static getChartsReleaseDate(){return new Date(parseInt(Yt.decode(Yt.RELEASE_INFORMATION),10))}static decode(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i="",o,a,n,r,l,c,d,u=0;const p=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<p.length;)r=e.indexOf(p.charAt(u++)),l=e.indexOf(p.charAt(u++)),c=e.indexOf(p.charAt(u++)),d=e.indexOf(p.charAt(u++)),o=r<<2|l>>4,a=(l&15)<<4|c>>2,n=(c&3)<<6|d,i=i+String.fromCharCode(o),c!=64&&(i=i+String.fromCharCode(a)),d!=64&&(i=i+String.fromCharCode(n));return i=Yt.utf8_decode(i),i}static utf8_decode(t){t=t.replace(/rn/g,"n");let e="";for(let i=0;i<t.length;i++){const o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(o&63|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(o&63|128))}return e}setLicenseKey(t,e=!1){this.gridContext=e,this.licenseKey=t}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const e=t.match(/\[(.*?)\]/g).map(r=>r.replace("[","").replace("]",""));if(!e||e.length===0)return["legacy",!1,void 0];const i=e.filter(r=>r==="TRIAL").length===1,o=e.filter(r=>r.indexOf("v")===0)[0],a=o?o.replace("v",""):"legacy",n=ls[e.filter(r=>ls[r])[0]];return[a,i,n]}centerPadAndOutput(t){const e=this.totalMessageLength-t.length;console.error(t.padStart(e/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,e="*",i=""){console.error(t.padEnd(this.totalMessageLength-i.length,e)+i)}outputInvalidLicenseKey(t,e,i){this.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${i} only and does not cover you for ${e}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,e,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${i} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,e,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${i} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${e}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};nr.RELEASE_INFORMATION="MTcwODMyOTU2Mjk0OA==";var Ju=nr;import{_ModuleSupport as tp}from"ag-charts-community";var{injectStyle:ep}=tp,ip=`
.ag-watermark {
    position: absolute;
    bottom: 20px;
    right: 25px;
    font-weight: bold;
    font-family: Impact, sans-serif;
    font-size: 19px;
    opacity: 0.7;
    animation: 1s ease-out 3s ag-watermark-fadeout;
    color: #9B9B9B;

    &::before {
        content: '';
        display: block;
        height: 40px;
        width: 170px;
        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);
        background-repeat: no-repeat;
        background-size: 170px 40px;
    }

    > span {
        padding-left: 0.7rem;
    }
}

@keyframes ag-watermark-fadeout {
    from { opacity: 0.5; }
    to { opacity: 0; }
}
`;function sp(s,t,e){ep(s,ip);const i=s.createElement("div"),o=s.createElement("span");o.innerText=e,i.addEventListener("animationend",()=>t.removeChild(i)),i.classList.add("ag-watermark"),i.appendChild(o),t.appendChild(i)}import{_Theme as Di,_Util as op}from"ag-charts-community";import{_ModuleSupport as cs,_Scale as mo,_Scene as ap,_Util as rr}from"ag-charts-community";function np(s){return{from:s?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function rp(s){return(t,e)=>s?{scalingCenterY:e.scaledValues.medianValue}:{scalingCenterX:e.scaledValues.medianValue}}import{_ModuleSupport as lp,_Scene as Kt}from"ag-charts-community";var cp=class extends Kt.Group{constructor(){super(),this.append([new Kt.Rect({tag:0}),new Kt.Rect({tag:0}),new Kt.Rect({tag:2}),new Kt.Rect({tag:1}),new Kt.Line({tag:3}),new Kt.Line({tag:3}),new Kt.Line({tag:4}),new Kt.Line({tag:4})])}updateDatumStyles(s,t,e,i){const{bandwidth:o,scaledValues:{xValue:a,medianValue:n}}=s;let{minValue:r,q1Value:l,q3Value:c,maxValue:d}=s.scaledValues;(e&&!i||!e&&i)&&([d,c,l,r]=[r,l,c,d]);const{fill:u,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:m,lineDash:y,lineDashOffset:M,cap:v,whisker:A}=t,x=Kt.Selection.select(this,Kt.Rect),S=x.selectByTag(0),[I]=x.selectByTag(2),[D]=x.selectByTag(1),b=x.selectByTag(3),L=x.selectByTag(4);A.strokeWidth>o&&(A.strokeWidth=o),I.setProperties({x:l,y:a,width:c-l,height:o}),S[0].setProperties({x:l,y:a,width:Math.round(n-l+f/2),height:o}),S[1].setProperties({x:Math.round(n-f/2),y:a,width:Math.floor(c-n+f/2),height:o});const N=Math.max(Math.round(n-f/2),l+f),E=Math.min(Math.round(n+f/2),c-f);D.setProperties({visible:N<E,x:N,y:a+f,width:E-N,height:Math.max(0,o-f*2)});const T=Math.floor(a+o*(1-v.lengthRatio)/2),_=Math.ceil(a+o*(1+v.lengthRatio)/2);L[0].setProperties({x:r,y1:T,y2:_}),L[1].setProperties({x:d,y1:T,y2:_}),b[0].setProperties({x1:Math.round(r+A.strokeWidth/2),x2:l,y:Math.floor(a+o/2)}),b[1].setProperties({x1:c,x2:Math.round(d-A.strokeWidth/2),y:Math.floor(a+o/2)}),e&&lp.invertShapeDirection(I,D,...S,...L,...b);for(const O of S)O.setProperties({fill:u,fillOpacity:p,strokeWidth:f*2,strokeOpacity:0});D.setProperties({fill:g,fillOpacity:m,strokeWidth:0});for(const O of[...b,...L])O.setProperties(A);I.setProperties({stroke:g,strokeWidth:f,strokeOpacity:m,lineDash:y,lineDashOffset:M,fillOpacity:0})}};import{_ModuleSupport as hp}from"ag-charts-community";var{BaseProperties:lr,AbstractBarSeriesProperties:dp,SeriesTooltip:up,Validate:Q,COLOR_STRING:fo,FUNCTION:pp,LINE_DASH:cr,OBJECT:xo,POSITIVE_NUMBER:hs,RATIO:ds,STRING:Bt,mergeDefaults:gp}=hp,hr=class extends lr{constructor(){super(...arguments),this.lengthRatio=.5}};h([Q(ds)],hr.prototype,"lengthRatio",2);var si=class extends lr{};h([Q(fo,{optional:!0})],si.prototype,"stroke",2),h([Q(hs)],si.prototype,"strokeWidth",2),h([Q(ds)],si.prototype,"strokeOpacity",2),h([Q(cr,{optional:!0})],si.prototype,"lineDash",2),h([Q(hs)],si.prototype,"lineDashOffset",2);var tt=class extends dp{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cap=new hr,this.whisker=new si,this.tooltip=new up}toJson(){const{stroke:s,strokeWidth:t,strokeOpacity:e,lineDash:i,lineDashOffset:o}=this,a=super.toJson();return a.whisker=gp(a.whisker,{stroke:s,strokeWidth:t,strokeOpacity:e,lineDash:i,lineDashOffset:o}),a}};h([Q(Bt)],tt.prototype,"xKey",2),h([Q(Bt)],tt.prototype,"minKey",2),h([Q(Bt)],tt.prototype,"q1Key",2),h([Q(Bt)],tt.prototype,"medianKey",2),h([Q(Bt)],tt.prototype,"q3Key",2),h([Q(Bt)],tt.prototype,"maxKey",2),h([Q(Bt,{optional:!0})],tt.prototype,"xName",2),h([Q(Bt,{optional:!0})],tt.prototype,"yName",2),h([Q(Bt,{optional:!0})],tt.prototype,"minName",2),h([Q(Bt,{optional:!0})],tt.prototype,"q1Name",2),h([Q(Bt,{optional:!0})],tt.prototype,"medianName",2),h([Q(Bt,{optional:!0})],tt.prototype,"q3Name",2),h([Q(Bt,{optional:!0})],tt.prototype,"maxName",2),h([Q(fo,{optional:!0})],tt.prototype,"fill",2),h([Q(ds)],tt.prototype,"fillOpacity",2),h([Q(fo)],tt.prototype,"stroke",2),h([Q(hs)],tt.prototype,"strokeWidth",2),h([Q(ds)],tt.prototype,"strokeOpacity",2),h([Q(cr)],tt.prototype,"lineDash",2),h([Q(hs)],tt.prototype,"lineDashOffset",2),h([Q(pp,{optional:!0})],tt.prototype,"formatter",2),h([Q(xo)],tt.prototype,"cap",2),h([Q(xo)],tt.prototype,"whisker",2),h([Q(xo)],tt.prototype,"tooltip",2);var{extent:yp,extractDecoratedProperties:dr,fixNumericExtent:So,keyProperty:mp,mergeDefaults:Mo,SeriesNodePickMode:fp,SMALLEST_KEY_INTERVAL:xp,valueProperty:Ni,diff:Sp,animationValidation:Mp,ChartAxisDirection:vp}=cs,{motion:ur}=ap,Ap=class extends cs.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.xKey=i.properties.xKey,this.minKey=i.properties.minKey,this.q1Key=i.properties.q1Key,this.medianKey=i.properties.medianKey,this.q3Key=i.properties.q3Key,this.maxKey=i.properties.maxKey}},pr=class sc extends cs.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[fp.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new tt,this.NodeClickEvent=Ap,this.groupScale=new mo.BandScale,this.smallestDataInterval=void 0}processData(t){return C(this,null,function*(){var e,i,o,a;if(!this.properties.isValid())return;const{xKey:n,minKey:r,q1Key:l,medianKey:c,q3Key:d,maxKey:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=((e=this.getCategoryAxis())==null?void 0:e.scale)instanceof mo.ContinuousScale,f=[];p&&this.processedData&&f.push(Sp(this.processedData)),p&&f.push(Mp(this));const{processedData:m}=yield this.requestDataModel(t,(i=this.data)!=null?i:[],{props:[mp(this,n,g,{id:"xValue"}),Ni(this,r,!0,{id:"minValue"}),Ni(this,l,!0,{id:"q1Value"}),Ni(this,c,!0,{id:"medianValue"}),Ni(this,d,!0,{id:"q3Value"}),Ni(this,u,!0,{id:"maxValue"}),...g?[xp]:[],...f],dataVisible:this.visible});this.smallestDataInterval={x:(a=(o=m.reduced)==null?void 0:o.smallestKeyInterval)!=null?a:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!(i&&o))return[];if(t===this.getBarDirection()){const m=o.getDomain(this,"minValue","value",i),y=o.getDomain(this,"maxValue","value",i);return So([Math.min(...m),Math.max(...y)],this.getValueAxis())}const{index:n,def:r}=o.resolveProcessedDataIndexById(this,"xValue"),l=i.domain.keys[n];if(r.type==="key"&&r.valueType==="category")return l;const c=this.getCategoryAxis(),d=c?.isReversed(),u=(e=yp(l))!=null?e:[NaN,NaN],p=a&&isFinite(a.x)?a.x:0;if(t===vp.Y){const m=u[0]+(d?0:-p),y=u[1]+(d?p:0);return So([m,y],c)}const g=u[0]+(d?-p:0),f=u[1]+(d?0:p);return So([g,f],c)}createNodeData(){return C(this,null,function*(){var t;const{visible:e,dataModel:i}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!(i&&e&&o&&a))return[];const{xKey:n,fill:r,fillOpacity:l,stroke:c,strokeWidth:d,strokeOpacity:u,lineDash:p,lineDashOffset:g,cap:f,whisker:m}=this.properties,{groupScale:y,smallestDataInterval:M,ctx:{seriesStateManager:v}}=this,A=o.scale instanceof mo.ContinuousScale?o.scale.calcBandwidth(M?.x):o.scale.bandwidth,x=[],{index:S,visibleGroupCount:I}=v.getVisiblePeerGroupIndex(this);for(let N=0;N<I;N++)x.push(String(N));y.domain=x,y.range=[0,A??0],o instanceof cs.CategoryAxis&&(y.paddingInner=o.groupPaddingInner);const D=y.bandwidth>=1?y.bandwidth:y.rawBandwidth,b=[],L=i.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]);return(t=this.processedData)==null||t.data.forEach(({datum:N,keys:E,values:T})=>{const{xValue:_,minValue:O,q1Value:z,medianValue:P,q3Value:k,maxValue:R}=i.resolveProcessedDataDefsValues(L,{keys:E,values:T});if([O,z,P,k,R].some(w=>typeof w!="number")||O>z||z>P||P>k||k>R)return;const B=this.convertValuesToScaleByDefs(L,{xValue:_,minValue:O,q1Value:z,medianValue:P,q3Value:k,maxValue:R});B.xValue+=Math.round(y.convert(String(S))),b.push({series:this,itemId:_,datum:N,xKey:n,bandwidth:Math.round(D),scaledValues:B,cap:f,whisker:m,fill:r,fillOpacity:l,stroke:c,strokeWidth:d,strokeOpacity:u,lineDash:p,lineDashOffset:g})}),[{itemId:n,nodeData:b,labelData:[],scales:Ht(sc.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}getLegendData(t){var e;const{id:i,data:o}=this,{xKey:a,yName:n,fill:r,fillOpacity:l,stroke:c,strokeWidth:d,strokeOpacity:u,showInLegend:p,legendItemName:g,visible:f}=this.properties;return!p||!o?.length||!a||t!=="category"?[]:[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:f,label:{text:(e=g??n)!=null?e:i},marker:{fill:r,fillOpacity:l,stroke:c,strokeOpacity:u,strokeWidth:d},legendItemName:g}]}getTooltipHtml(t){const{xKey:e,minKey:i,q1Key:o,medianKey:a,q3Key:n,maxKey:r,xName:l,yName:c,minName:d,q1Name:u,medianName:p,q3Name:g,maxName:f,tooltip:m}=this.properties,{datum:y}=t,M=this.getCategoryAxis(),v=this.getValueAxis();if(!M||!v||!this.properties.isValid())return"";const A=rr.sanitizeHtml(c),S=[[e,l,M],[i,d,v],[o,u,v],[a,p,v],[n,g,v],[r,f,v]].map(([D,b,L])=>rr.sanitizeHtml(`${b??D}: ${L.formatDatum(y[D])}`)).join(A?"<br/>":", "),{fill:I}=this.getFormattedStyles(t);return m.toTooltipHtml({title:A,content:S,backgroundColor:I},{seriesId:this.id,datum:y,fill:I,xKey:e,minKey:i,q1Key:o,medianKey:a,q3Key:n,maxKey:r,xName:l,minName:d,q1Name:u,medianName:p,q3Name:g,maxName:f})}animateEmptyUpdateReady({datumSelections:t}){const e=this.isVertical(),{from:i,to:o}=np(e);ur.resetMotion(t,rp(e)),ur.staticFromToMotion(this.id,"datums",this.ctx.animationManager,t,i,o,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(t){return C(this,null,function*(){var e;const i=(e=t.nodeData)!=null?e:[];return t.datumSelection.update(i)})}updateDatumNodes(t){return C(this,arguments,function*({datumSelection:e,isHighlight:i}){var o;const a=this.isVertical(),n=(o=this.getValueAxis())==null?void 0:o.isReversed();e.each((r,l)=>{let c=this.getFormattedStyles(l,i);i&&(c=Mo(this.properties.highlightStyle.item,c));const{stroke:d,strokeWidth:u,strokeOpacity:p,lineDash:g,lineDashOffset:f}=c;c.whisker=Mo(c.whisker,{stroke:d,strokeWidth:u,strokeOpacity:p,lineDash:g,lineDashOffset:f}),r.updateDatumStyles(l,c,a,n)})})}updateLabelNodes(t){return C(this,null,function*(){})}updateLabelSelection(t){return C(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e)})}nodeFactory(){return new cp}getFormattedStyles(t,e=!1){const{id:i,ctx:{callbackCache:o}}=this,{xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:d,formatter:u}=this.properties,{datum:p,fill:g,fillOpacity:f,stroke:m,strokeWidth:y,strokeOpacity:M,lineDash:v,lineDashOffset:A,cap:x,whisker:S}=t,I={fill:g,fillOpacity:f,stroke:m,strokeWidth:y,strokeOpacity:M,lineDash:v,lineDashOffset:A,cap:dr(x),whisker:dr(S)};if(u){const D=o.call(u,_t(K({datum:p,seriesId:i,highlighted:e},I),{xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:d}));if(D)return Mo(D,I)}return I}convertValuesToScaleByDefs(t,e){const i=this.getCategoryAxis(),o=this.getValueAxis();if(!(i&&o))throw new Error("Axes must be defined");const a={};for(const[n,[{def:r}]]of t)if(Object.hasOwn(e,n)){const{scale:l}=r.type==="key"?i:o;a[n]=Math.round(l.convert(e[n]))}return a}};pr.type="box-plot";var Ip=pr;import{_Theme as vo}from"ag-charts-community";var Dp={series:{__extends__:vo.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[vo.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[vo.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},Np={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:Ip,seriesDefaults:{axes:[{type:Di.CARTESIAN_AXIS_TYPE.NUMBER,position:Di.POSITION.LEFT},{type:Di.CARTESIAN_AXIS_TYPE.CATEGORY,position:Di.POSITION.BOTTOM}]},themeTemplate:Dp,groupable:!0,paletteFactory:({takeColors:s,userPalette:t,themeTemplateParameters:e})=>{var i;const o=e.properties.get(Di.DEFAULT_BACKGROUND_COLOUR),a=(i=Array.isArray(o)?o[0]:o)!=null?i:"white",{fills:[n],strokes:[r]}=s(1);return{fill:t?n:op.Color.interpolate(n,a)(.7),stroke:r}},swapDefaultAxesCondition:({direction:s})=>s==="horizontal"};import{_Theme as oi}from"ag-charts-community";import{_ModuleSupport as bi,_Scale as gr,_Scene as ke,_Util as us}from"ag-charts-community";import{_ModuleSupport as bp}from"ag-charts-community";var{AbstractBarSeriesProperties:Tp,BaseProperties:Ao,PropertiesArray:_p,SeriesTooltip:Ep,Validate:$,ARRAY:Lp,COLOR_STRING:ai,LINE_DASH:yr,OBJECT:Io,POSITIVE_NUMBER:ni,RATIO:ri,STRING:ps}=bp,oe=class extends Ao{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};h([$(ai)],oe.prototype,"fill",2),h([$(ri)],oe.prototype,"fillOpacity",2),h([$(ai)],oe.prototype,"stroke",2),h([$(ni)],oe.prototype,"strokeWidth",2),h([$(ri)],oe.prototype,"strokeOpacity",2),h([$(yr)],oe.prototype,"lineDash",2),h([$(ni)],oe.prototype,"lineDashOffset",2),h([$(ri)],oe.prototype,"lengthRatio",2);var mr=class extends Ao{};h([$(ni,{optional:!0})],mr.prototype,"max",2);var gs=class extends Ao{constructor(){super(...arguments),this.color="lightgrey"}};h([$(ai)],gs.prototype,"color",2),h([$(ni,{optional:!0})],gs.prototype,"stop",2);var ft=class extends Tp{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new _p(gs),this.target=new oe,this.scale=new mr,this.tooltip=new Ep,this.backgroundFill="white"}};h([$(ps)],ft.prototype,"valueKey",2),h([$(ps,{optional:!0})],ft.prototype,"valueName",2),h([$(ps,{optional:!0})],ft.prototype,"targetKey",2),h([$(ps,{optional:!0})],ft.prototype,"targetName",2),h([$(ai)],ft.prototype,"fill",2),h([$(ri)],ft.prototype,"fillOpacity",2),h([$(ai)],ft.prototype,"stroke",2),h([$(ni)],ft.prototype,"strokeWidth",2),h([$(ri)],ft.prototype,"strokeOpacity",2),h([$(yr)],ft.prototype,"lineDash",2),h([$(ni)],ft.prototype,"lineDashOffset",2),h([$(ri)],ft.prototype,"widthRatio",2),h([$(Lp.restrict({minLength:0}))],ft.prototype,"colorRanges",2),h([$(Io)],ft.prototype,"target",2),h([$(Io)],ft.prototype,"scale",2),h([$(Io)],ft.prototype,"tooltip",2),h([$(ai)],ft.prototype,"backgroundFill",2);var{animationValidation:Op,collapsedStartingBarPosition:fr,diff:Rp,keyProperty:kp,partialAssign:Do,prepareBarAnimationFunctions:xr,resetBarSelectionsFn:Cp,seriesLabelFadeInAnimation:ys,valueProperty:Sr,createDatumId:wp}=bi,{fromToMotion:Mr}=ke.motion,{sanitizeHtml:vr}=us,Ar=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],Pp=class ma extends bi.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[bi.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:Cp}}),this.properties=new ft,this.normalizedColorRanges=[],this.colorRangesGroup=new ke.Group({name:`${this.id}-colorRanges`}),this.colorRangesSelection=ke.Selection.select(this.colorRangesGroup,ke.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=ke.Selection.select(this.annotationGroup,ke.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(t){return C(this,null,function*(){var e,i;if(!this.properties.isValid()||!this.data)return;const{valueKey:o,targetKey:a}=this.properties,n=gr.ContinuousScale.is((e=this.getCategoryAxis())==null?void 0:e.scale),r=gr.ContinuousScale.is((i=this.getValueAxis())==null?void 0:i.scale),l=[];a!==void 0&&l.push(Sr(this,a,r,{id:"target"})),this.ctx.animationManager.isSkipped()||(this.processedData!==void 0&&l.push(Rp(this.processedData)),l.push(Op(this))),yield this.requestDataModel(t,this.data.slice(0,1),{props:[kp(this,o,n,{id:"xValue"}),Sr(this,o,r,{id:"value"}),...l],groupByKeys:!0,dataVisible:this.visible}),this.animationState.transition("updateData")})}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var t,e;return Math.max(...(e=(t=this.getValueAxis())==null?void 0:t.dataDomain.domain)!=null?e:[0])}getSeriesDomain(t){var e,i;const{dataModel:o,processedData:a}=this;if(!o||!a)return[];const{valueKey:n,targetKey:r,valueName:l,scale:c}=this.properties;if(t===this.getCategoryDirection())return[l??n];if(t==((e=this.getValueAxis())==null?void 0:e.direction)){const d=o.getDomain(this,"value","value",a),u=r===void 0?[]:o.getDomain(this,"target","value",a);return[0,(i=c.max)!=null?i:Math.max(...d,...u)]}throw new Error(`unknown direction ${t}`)}getKeys(t){return t===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(t)}createNodeData(){return C(this,null,function*(){var t,e,i,o;const{dataModel:a,processedData:n}=this,{valueKey:r,targetKey:l,widthRatio:c,target:{lengthRatio:d}}=this.properties,u=(t=this.getCategoryAxis())==null?void 0:t.scale,p=(e=this.getValueAxis())==null?void 0:e.scale;if(!r||!a||!n||!u||!p)return[];if(c===void 0||d===void 0)return[];const g=(i=u.bandwidth)!=null?i:NaN,f=this.getMaxValue(),m=a.resolveProcessedDataIndexById(this,"value").index,y=l===void 0?NaN:a.resolveProcessedDataIndexById(this,"target").index,M={itemId:r,nodeData:[],labelData:[],scales:Ht(ma.prototype,this,"calculateScaling").call(this),visible:this.visible};for(const{datum:x,values:S}of n.data){if(!Array.isArray(x)||x.length<1)continue;S[0][m]<0&&us.Logger.warnOnce("negative values are not supported, clipping to 0.");const I=(o=this.properties.valueName)!=null?o:this.properties.valueKey,D=Math.min(f,Math.max(0,S[0][m])),b=p.convert(D),L=c*g,N=p.convert(0),E=this.getBarDirection()===bi.ChartAxisDirection.X,T={x:g*(1-c)/2,y:Math.min(b,N),width:L,height:Math.abs(N-b)};E&&([T.x,T.y,T.width,T.height]=[T.y,T.x,T.height,T.width]);let _;if(S[0][y]<0&&us.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&S[0][y]>=0){const z=d*g,P=Math.min(f,S[0][y]);if(!isNaN(P)&&P!==void 0){const k=p.convert(P);let R=g*(1-d)/2,B=R+z,[w,U]=[k,k];E&&([R,B,w,U]=[w,U,R,B]),_={value:P,x1:R,x2:B,y1:w,y2:U}}}const O=_t(K({series:this,datum:x[0],xKey:r,xValue:I,yKey:r,yValue:D,cumulativeValue:D,target:_},T),{midPoint:{x:T.x+T.width/2,y:T.y+T.height/2},opacity:1});M.nodeData.push(O)}const v=[...this.getColorRanges()].sort((x,S)=>(x.stop||f)-(S.stop||f));let A=0;return this.normalizedColorRanges=v.map(x=>{var S;const I=Math.min(f,(S=x.stop)!=null?S:1/0),D={color:x.color,start:A,stop:I};return A=I,D}),[M]})}getColorRanges(){const{colorRanges:t,fill:e,backgroundFill:i}=this.properties;if(t!==void 0&&t.length>0)return t;const o=new gs;return o.color=us.Color.interpolate(e,i)(.7),[o]}getLegendData(t){return[]}getTooltipHtml(t){const{valueKey:e,valueName:i,targetKey:o,targetName:a}=this.properties,n=this.getValueAxis(),{yValue:r,target:{value:l}={value:void 0},datum:c}=t;if(e===void 0||r===void 0||n===void 0)return"";const d=(g,f,m)=>{const y=vr(f??g),M=vr(n.formatDatum(m));return`<b>${y}</b>: ${M}`},u=void 0,p=o===void 0||l===void 0?d(e,i,r):`${d(e,i,r)}<br/>${d(o,a,l)}`;return this.properties.tooltip.toTooltipHtml({title:u,content:p,backgroundColor:this.properties.fill},{datum:c,title:u,seriesId:this.id,valueKey:e,valueName:i,targetKey:o,targetName:a})}isLabelEnabled(){return!1}nodeFactory(){return new ke.Rect}updateDatumSelection(t){return C(this,null,function*(){return this.targetLinesSelection.update(t.nodeData,void 0,void 0),t.datumSelection.update(t.nodeData,void 0,void 0)})}updateDatumNodes(t){return C(this,null,function*(){for(const{node:e}of t.datumSelection){const i=this.properties;Do(Ar,e,i)}for(const{node:e,datum:i}of this.targetLinesSelection)if(i.target!==void 0){const o=this.properties.target;Do(["x1","x2","y1","y2"],e,i.target),Do(Ar,e,o)}else e.visible=!1})}updateColorRanges(){return C(this,null,function*(){const t=this.getValueAxis(),e=this.getCategoryAxis();if(!t||!e)return;const[i,o]=[0,Math.max(...e.scale.range)],a=this.getBarDirection()===bi.ChartAxisDirection.Y?(n,r)=>{n.x=i,n.y=t.scale.convert(r.stop),n.height=t.scale.convert(r.start)-n.y,n.width=o}:(n,r)=>{n.x=t.scale.convert(r.start),n.y=i,n.height=o,n.width=t.scale.convert(r.stop)-n.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:n,datum:r}of this.colorRangesSelection)a(n,r),n.fill=r.color})}updateNodes(t,e,i){return C(this,null,function*(){Ht(ma.prototype,this,"updateNodes").call(this,t,e,i),yield this.updateColorRanges()})}updateLabelSelection(t){return C(this,null,function*(){return t.labelSelection})}updateLabelNodes(t){return C(this,null,function*(){})}animateEmptyUpdateReady(t){const{datumSelections:e,labelSelections:i,annotationSelections:o}=t,a=xr(fr(this.isVertical(),this.axes,"normal"));Mr(this.id,"nodes",this.ctx.animationManager,e,a),ys(this,"labels",this.ctx.animationManager,i),ys(this,"annotations",this.ctx.animationManager,o)}animateWaitingUpdateReady(t){var e,i,o;const{datumSelections:a,labelSelections:n,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(i=(e=this.processedData)==null?void 0:e.reduced)==null?void 0:i.diff,c=xr(fr(this.isVertical(),this.axes,"normal"));Mr(this.id,"nodes",this.ctx.animationManager,a,c,(u,p)=>wp(p.xValue),l),((o=l?.changed)!=null?o:!0)&&(ys(this,"labels",this.ctx.animationManager,n),ys(this,"annotations",this.ctx.animationManager,r))}};import{_Theme as zp}from"ag-charts-community";var Bp={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[zp.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},jp={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:Pp,seriesDefaults:{axes:[{type:oi.CARTESIAN_AXIS_TYPE.NUMBER,position:oi.POSITION.LEFT},{type:oi.CARTESIAN_AXIS_TYPE.CATEGORY,position:oi.POSITION.BOTTOM}]},themeTemplate:Bp,swapDefaultAxesCondition:s=>s?.direction==="horizontal",paletteFactory:({takeColors:s,colorsCount:t,themeTemplateParameters:e})=>{var i;const{properties:o}=e,{fills:[a],strokes:[n]}=s(t),r=e.properties.get(oi.DEFAULT_BACKGROUND_COLOUR),l=(i=Array.isArray(r)?r[0]:r)!=null?i:"white",c=o.get(oi.DEFAULT_CROSS_LINES_COLOUR);return{fill:a,stroke:n,target:{stroke:c},backgroundFill:l}}};import{_Theme as li}from"ag-charts-community";import{_ModuleSupport as No,_Scale as Fp,_Scene as Up,_Util as Vp}from"ag-charts-community";import{_ModuleSupport as Yp,_Scene as Hp,_Util as Gp}from"ag-charts-community";var{Validate:ms,NUMBER:Ir,TEXT_WRAP:Kp,OVERFLOW_STRATEGY:Wp}=Yp,{Logger:Xp}=Gp,{Text:Ce,Label:Qp}=Hp,Ti=class extends Qp{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(s){return Math.ceil(s*Ce.defaultLineHeightRatio)}};h([ms(Kp)],Ti.prototype,"wrapping",2),h([ms(Wp)],Ti.prototype,"overflowStrategy",2),h([ms(Ir,{optional:!0})],Ti.prototype,"minimumFontSize",2);var Wt=class extends Ti{constructor(){super(...arguments),this.spacing=0}};h([ms(Ir)],Wt.prototype,"spacing",2);var fs=class extends Ti{};function $p(s,t){const{fontSize:e,minimumFontSize:i=e}=s,{fontSize:o,minimumFontSize:a=o}=t,n=e-i,r=o-a;let l=s.fontSize,c=t.fontSize;const d=[{labelFontSize:e,secondaryLabelFontSize:o}];for(;l>i||c>a;){const u=n>0?(l-i)/n:-1,p=r>0?(c-a)/r:-1;u>p?l--:c--,d.push({labelFontSize:l,secondaryLabelFontSize:c})}return d.reverse(),d}function Dr(s,t,e){if(s>t)return;let i=s,o=t,a;for(;o>=i;){const n=(o+i)/2|0,r=e(n);r!=null?(a=r,i=n+1):o=n-1}return a}function Zp(s,t,e,i,{padding:o},a){var n,r;const{spacing:l}=t,c=2*o,d=2*o+l,u=((n=t.minimumFontSize)!=null?n:t.fontSize)+((r=i.minimumFontSize)!=null?r:i.fontSize);if(u>a(u+d).height-d)return;const p=$p(t,i),g=new Ce;g.setFont(t);const f={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},m=new Ce;m.setFont(i);const y={fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight};let M,v;return Dr(0,p.length-1,A=>{const{labelFontSize:x,secondaryLabelFontSize:S}=p[A],I=A===0,D=Wt.lineHeight(x),b=fs.lineHeight(S),L=a(D+b+d),N=L.width-c,E=L.height-d;if(D+b>E)return;if(M==null||M.fontSize!==x){f.fontSize=x;const{lines:_}=Ce.wrapLines(s,N,E,f,t.wrapping,I?t.overflowStrategy:"hide");if(_!=null){const O=_.join(`
`);g.text=O,g.fontSize=x,g.lineHeight=x;const z=g.computeBBox().width,P=_.length*D;M={text:O,fontSize:x,lineHeight:D,width:z,height:P}}else M=void 0}if(M==null||M.width>N||M.height>E)return;if(v==null||v.fontSize!==S){y.fontSize=S;const{lines:_}=Ce.wrapLines(e,N,E,y,i.wrapping,I?i.overflowStrategy:"hide");if(_!=null){const O=_.join(`
`);m.text=O,m.fontSize=S,m.lineHeight=b;const z=m.computeBBox().width,P=_.length*b;v={text:O,fontSize:S,lineHeight:b,width:z,height:P}}else v=void 0}if(v==null)return;const T=M.height+v.height;if(!(v.width>N||T>E))return{width:Math.max(M.width,v.width),height:T+l,meta:L.meta,label:M,secondaryLabel:v}})}function Nr(s,t,{padding:e},i){var o;const a=2*e,n=Math.min((o=t.minimumFontSize)!=null?o:t.fontSize,t.fontSize),r=new Ce;r.setFont(t);const l={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return Dr(n,t.fontSize,c=>{const d=Wt.lineHeight(c),u=i(d+a),p=u.width-a,g=u.height-a;if(d>g)return;const f=c===n;l.fontSize=c;const{lines:m}=Ce.wrapLines(s,p,g,l,t.wrapping,f?t.overflowStrategy:"hide");if(m==null)return;const y=m.join(`
`);r.text=y,r.fontSize=c,r.lineHeight=d;const M=r.computeBBox(),v=r.computeBBox().width,A=d*m.length;if(!(M.width>p||A>g))return[{text:y,fontSize:c,lineHeight:d,width:v,height:A},u.meta]})}function br(s){return s!=null&&s.minimumFontSize!=null&&s.fontSize&&s.minimumFontSize>s.fontSize}function bo(s,t,e,i,o,a){const n=t.enabled?s:void 0,r=i.enabled?e:void 0;(br(t)||br(i))&&Xp.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;n!=null&&r!=null&&(l=Zp(n,t,r,i,o,a));let c;if(l==null&&n!=null&&(c=Nr(n,t,o,a)),c!=null){const[u,p]=c;l={width:u.width,height:u.height,meta:p,label:u,secondaryLabel:void 0}}let d;if(l==null&&n==null&&r!=null&&(d=Nr(r,i,o,a)),d!=null){const[u,p]=d;l={width:u.width,height:u.height,meta:p,label:void 0,secondaryLabel:u}}return l}import{_ModuleSupport as qp}from"ag-charts-community";var{CartesianSeriesProperties:Jp,SeriesTooltip:tg,Validate:vt,AND:eg,ARRAY:ig,COLOR_STRING:sg,COLOR_STRING_ARRAY:og,FUNCTION:ag,OBJECT:Tr,POSITIVE_NUMBER:_r,RATIO:ng,STRING:we,TEXT_ALIGN:rg,VERTICAL_ALIGN:lg}=qp,xt=class extends Jp{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Wt,this.tooltip=new tg}};h([vt(we,{optional:!0})],xt.prototype,"title",2),h([vt(we)],xt.prototype,"xKey",2),h([vt(we)],xt.prototype,"yKey",2),h([vt(we,{optional:!0})],xt.prototype,"colorKey",2),h([vt(we,{optional:!0})],xt.prototype,"xName",2),h([vt(we,{optional:!0})],xt.prototype,"yName",2),h([vt(we,{optional:!0})],xt.prototype,"colorName",2),h([vt(eg(og,ig.restrict({minLength:1})))],xt.prototype,"colorRange",2),h([vt(sg,{optional:!0})],xt.prototype,"stroke",2),h([vt(ng,{optional:!0})],xt.prototype,"strokeOpacity",2),h([vt(_r,{optional:!0})],xt.prototype,"strokeWidth",2),h([vt(rg)],xt.prototype,"textAlign",2),h([vt(lg)],xt.prototype,"verticalAlign",2),h([vt(_r)],xt.prototype,"itemPadding",2),h([vt(ag,{optional:!0})],xt.prototype,"formatter",2),h([vt(Tr)],xt.prototype,"label",2),h([vt(Tr)],xt.prototype,"tooltip",2);var{SeriesNodePickMode:cg,getMissCount:hg,valueProperty:To,ChartAxisDirection:me}=No,{Rect:dg,PointerEvents:ug}=Up,{ColorScale:pg}=Fp,{sanitizeHtml:ci,Color:gg,Logger:yg}=Vp,mg=class extends No.CartesianSeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.colorKey=i.properties.colorKey}},fg={left:-.5,center:0,right:-.5},xg={top:-.5,middle:0,bottom:-.5},_o=class oc extends No.CartesianSeries{constructor(t){super({moduleCtx:t,pickModes:[cg.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new xt,this.NodeClickEvent=mg,this.colorScale=new pg}processData(t){return C(this,null,function*(){var e;const i=this.axes[me.X],o=this.axes[me.Y];if(!i||!o||!this.properties.isValid()||!((e=this.data)!=null&&e.length))return;const{xKey:a,yKey:n,colorRange:r,colorKey:l}=this.properties,{isContinuousX:c,isContinuousY:d}=this.isContinuous(),{dataModel:u,processedData:p}=yield this.requestDataModel(t,this.data,{props:[To(this,a,c,{id:"xValue"}),To(this,n,d,{id:"yValue"}),...l?[To(this,l,!0,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const g=u.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=p.domain.values[g],this.colorScale.range=r,this.colorScale.update()}})}isColorScaleValid(){const{colorKey:t}=this.properties;if(!t)return!1;const{dataModel:e,processedData:i}=this;if(!e||!i)return!1;const o=e.resolveProcessedDataIndexById(this,"colorValue").index,a=i.data.length,n=hg(this,i.defs.values[o].missing);return!(a===0||a===n)}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;return!e||!i?[]:t===me.X?e.getDomain(this,"xValue","value",i):e.getDomain(this,"yValue","value",i)}createNodeData(){return C(this,null,function*(){var t,e,i,o,a,n,r;const{data:l,visible:c,axes:d,dataModel:u}=this,p=d[me.X],g=d[me.Y];if(!(l&&u&&c&&p&&g))return[];if(p.type!=="category"||g.type!=="category")return yg.warnOnce(`Heatmap series expected axes to have "category" type, but received "${p.type}" and "${g.type}" instead.`),[];const{xKey:f,xName:m,yKey:y,yName:M,colorKey:v,colorName:A,textAlign:x,verticalAlign:S,itemPadding:I,colorRange:D,label:b}=this.properties,L=u.resolveProcessedDataIndexById(this,"xValue").index,N=u.resolveProcessedDataIndexById(this,"yValue").index,E=v?u.resolveProcessedDataIndexById(this,"colorValue").index:void 0,T=p.scale,_=g.scale,O=((t=T.bandwidth)!=null?t:0)/2,z=((e=_.bandwidth)!=null?e:0)/2,P=this.isColorScaleValid(),k=[],R=[],B=(i=T.bandwidth)!=null?i:10,w=(o=_.bandwidth)!=null?o:10,U=(B-2*I)*fg[x],Y=(w-2*I)*xg[S],V=()=>({width:B,height:w,meta:null});for(const{values:F,datum:et}of(n=(a=this.processedData)==null?void 0:a.data)!=null?n:[]){const W=F[L],Z=F[N],at=T.convert(W)+O,ot=_.convert(Z)+z,q=E!=null?F[E]:void 0,G=P&&q!=null?this.colorScale.convert(q):D[0],nt=q!=null?this.getLabelText(b,{value:q,datum:et,colorKey:v,colorName:A,xKey:f,yKey:y,xName:m,yName:M}):void 0,it=bo(nt,this.properties.label,void 0,this.properties.label,{padding:I},V),bt={x:at,y:ot,size:0};if(k.push({series:this,itemId:y,yKey:y,xKey:f,xValue:W,yValue:Z,colorValue:q,datum:et,point:bt,width:B,height:w,fill:G,midPoint:{x:at,y:ot}}),it?.label!=null){const{text:Lt,fontSize:wt,lineHeight:le,height:Pt}=it.label,{fontStyle:jt,fontFamily:ce,fontWeight:yi,color:Fi}=this.properties.label,he=bt.x+U*(B-2*I),Jt=bt.y+Y*(w-2*I)-(it.height-Pt)*.5;R.push({series:this,itemId:y,datum:et,text:Lt,fontSize:wt,lineHeight:le,fontStyle:jt,fontFamily:ce,fontWeight:yi,color:Fi,textAlign:x,verticalAlign:S,x:he,y:Jt})}}return[{itemId:(r=this.properties.yKey)!=null?r:this.id,nodeData:k,labelData:R,scales:Ht(oc.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}nodeFactory(){return new dg}updateDatumSelection(t){return C(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)})}updateDatumNodes(t){return C(this,null,function*(){var e;const{isHighlight:i}=t,{id:o,ctx:{callbackCache:a}}=this,{xKey:n,yKey:r,colorKey:l,formatter:c,highlightStyle:{item:{fill:d,stroke:u,strokeWidth:p,strokeOpacity:g,fillOpacity:f}}}=this.properties,m=this.axes[me.X],[y,M]=(e=m?.visibleRange)!=null?e:[],A=!(y!==0||M!==1);t.datumSelection.each((x,S)=>{var I,D,b,L,N;const{point:E,width:T,height:_}=S,O=i&&d!==void 0?gg.interpolate(S.fill,d)(f??1):S.fill,z=i&&u!==void 0?u:this.properties.stroke,P=i&&g!==void 0?g:this.properties.strokeOpacity,k=i&&p!==void 0?p:this.properties.strokeWidth;let R;c&&(R=a.call(c,{datum:S.datum,fill:O,stroke:z,strokeOpacity:P,strokeWidth:k,highlighted:i,xKey:n,yKey:r,colorKey:l,seriesId:o})),x.crisp=A,x.x=Math.floor(E.x-T/2),x.y=Math.floor(E.y-_/2),x.width=Math.ceil(T),x.height=Math.ceil(_),x.fill=(I=R?.fill)!=null?I:O,x.stroke=(D=R?.stroke)!=null?D:z,x.strokeOpacity=(L=(b=R?.strokeOpacity)!=null?b:P)!=null?L:1,x.strokeWidth=(N=R?.strokeWidth)!=null?N:k})})}updateLabelSelection(t){return C(this,null,function*(){const{labelData:e,labelSelection:i}=t,{enabled:o}=this.properties.label,a=o?e:[];return i.update(a)})}updateLabelNodes(t){return C(this,null,function*(){t.labelSelection.each((e,i)=>{e.text=i.text,e.fontSize=i.fontSize,e.lineHeight=i.lineHeight,e.fontStyle=i.fontStyle,e.fontFamily=i.fontFamily,e.fontWeight=i.fontWeight,e.fill=i.color,e.textAlign=i.textAlign,e.textBaseline=i.verticalAlign,e.x=i.x,e.y=i.y,e.pointerEvents=ug.None})})}getTooltipHtml(t){var e,i,o;const a=this.axes[me.X],n=this.axes[me.Y];if(!this.properties.isValid()||!a||!n)return"";const{xKey:r,yKey:l,colorKey:c,xName:d,yName:u,colorName:p,stroke:g,strokeWidth:f,colorRange:m,formatter:y,tooltip:M}=this.properties,{colorScale:v,id:A,ctx:{callbackCache:x}}=this,{datum:S,xValue:I,yValue:D,colorValue:b}=t,L=this.isColorScaleValid()?v.convert(b):m[0];let N;y&&(N=x.call(y,{datum:t,xKey:r,yKey:l,colorKey:c,fill:L,stroke:g,strokeWidth:f,highlighted:!1,seriesId:A}));const E=(i=(e=N?.fill)!=null?e:L)!=null?i:"gray",T=(o=this.properties.title)!=null?o:u,_=ci(a.formatDatum(I)),O=ci(n.formatDatum(D));let z=`<b>${ci(d||r)}</b>: ${_}<br><b>${ci(u||l)}</b>: ${O}`;return c&&(z=`<b>${ci(p||c)}</b>: ${ci(b)}<br>`+z),M.toTooltipHtml({title:T,content:z,backgroundColor:E},{seriesId:A,datum:S,xKey:r,yKey:l,xName:d,yName:u,title:T,color:E,colorKey:c})}getLegendData(t){var e;return t!=="gradient"||!((e=this.data)!=null&&e.length)||!this.properties.isValid()||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue").index],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}};_o.className="HeatmapSeries",_o.type="heatmap";var Sg=_o;import{_Theme as _i}from"ag-charts-community";var Mg={series:{__extends__:_i.EXTENDS_SERIES_DEFAULTS,label:{__overrides__:_i.OVERRIDE_SERIES_LABEL_DEFAULTS,enabled:!1,color:_i.DEFAULT_LABEL_COLOUR,fontSize:_i.FONT_SIZE.SMALL,fontFamily:_i.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},vg={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:Sg,seriesDefaults:{axes:[{type:li.CARTESIAN_AXIS_TYPE.CATEGORY,position:li.POSITION.LEFT},{type:li.CARTESIAN_AXIS_TYPE.CATEGORY,position:li.POSITION.BOTTOM}]},themeTemplate:Mg,paletteFactory:({takeColors:s,colorsCount:t,userPalette:e,themeTemplateParameters:i})=>{var o;const{properties:a}=i,n=a.get(li.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),r=a.get(li.DEFAULT_BACKGROUND_COLOUR),l=(o=Array.isArray(r)?r[0]:r)!=null?o:"white",{fills:c,strokes:d}=s(t);return{stroke:e?d[0]:l,colorRange:e?[c[0],c[1]]:n}}};import{_Theme as Eo}from"ag-charts-community";import{_Scene as Ag}from"ag-charts-community";import{_ModuleSupport as Lo,_Scale as Ig,_Scene as Dg,_Util as Ng}from"ag-charts-community";var{isDefined:bg,ChartAxisDirection:fe,PolarAxis:Tg,diff:_g,fixNumericExtent:Eg,groupAccumulativeValueProperty:Er,keyProperty:Lg,normaliseGroupTo:Og,resetLabelFn:Rg,seriesLabelFadeInAnimation:kg,seriesLabelFadeOutAnimation:Cg,valueProperty:wg,animationValidation:Pg}=Lo,{BandScale:zg}=Ig,{motion:Lr}=Dg,{isNumber:Or,normalizeAngle360:Rr,sanitizeHtml:kr}=Ng,Bg=class extends Lo.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey}},Cr=class extends Lo.PolarSeries{constructor(s,{animationResetFns:t}){super({moduleCtx:s,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:_t(K({},t),{label:Rg})}),this.NodeClickEvent=Bg,this.nodeData=[],this.groupScale=new zg,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var s,t;this.destroyFns.push((s=this.ctx.chartEventManager)==null?void 0:s.addListener("legend-item-click",e=>this.onLegendItemClick(e)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}getSeriesDomain(s){const{axes:t,dataModel:e,processedData:i}=this;if(!i||!e)return[];if(s===fe.X)return e.getDomain(this,"angleValue","key",i);{const o=t[fe.Y],a=e.getDomain(this,"radiusValue-end","value",i),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return Eg(n,o)}}processData(s){return C(this,null,function*(){var t;if(!this.properties.isValid())return;const e=this.getStackId(),i=`${e}-trailing`,{angleKey:o,radiusKey:a,normalizedTo:n,visible:r}=this.properties,l=[];bg(n)&&l.push(Og(this,[e,i],Math.abs(n),"range"));const c=!this.ctx.animationManager.isSkipped();c&&this.processedData&&l.push(_g(this.processedData)),c&&l.push(Pg(this));const d=r||!c?{}:{forceValue:0};yield this.requestDataModel(s,(t=this.data)!=null?t:[],{props:[Lg(this,o,!1,{id:"angleValue"}),wg(this,a,!0,K({id:"radiusValue-raw",invalidValue:null},d)),...Er(this,a,!0,"normal","current",K({id:"radiusValue-end",invalidValue:null,groupId:e},d)),...Er(this,a,!0,"trailing","current",K({id:"radiusValue-start",invalidValue:null,groupId:i},d)),...l],dataVisible:r||c}),this.animationState.transition("updateData")})}didCircleChange(){const s=this.radius,t=this.centerX,e=this.centerY,i=this.circleCache;return s===i.r&&t===i.cx&&e===i.cy?!1:(this.circleCache={r:s,cx:t,cy:e},!0)}isRadiusAxisReversed(){var s;return(s=this.axes[fe.Y])==null?void 0:s.isReversed()}maybeRefreshNodeData(){return C(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const s=this.axes[fe.Y];return s instanceof Tg?this.radius*s.innerRadiusRatio:0}createNodeData(){return C(this,null,function*(){var s;const{processedData:t,dataModel:e,groupScale:i}=this;if(!t||!e||!this.properties.isValid())return[];const o=this.axes[fe.X],a=this.axes[fe.Y],n=o?.scale,r=a?.scale;if(!n||!r)return[];const l=e.resolveProcessedDataIndexById(this,"radiusValue-start").index,c=e.resolveProcessedDataIndexById(this,"radiusValue-end").index,d=e.resolveProcessedDataIndexById(this,"radiusValue-raw").index;let u=0,p=0;o instanceof Ze&&(u=o.groupPaddingInner,p=o.paddingInner);const f=((s=n.bandwidth)!=null?s:0)*(1-p),{index:m,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:y}).map((T,_)=>String(_)),i.range=[-f/2,f/2],i.paddingInner=y>1?u:0;const M=this.isRadiusAxisReversed(),v=M?this.radius:this.getAxisInnerRadius(),A=M?this.getAxisInnerRadius():this.radius,x=A+v,{angleKey:S,radiusKey:I,angleName:D,radiusName:b,label:L}=this.properties,N=(T,_,O,z)=>{const P=this.getLabelText(L,{value:_,datum:T,angleKey:S,radiusKey:I,angleName:D,radiusName:b},k=>Or(k)?k.toFixed(2):String(k));if(P)return{x:O,y:z,text:P,textAlign:"center",textBaseline:"middle"}},E=t.data.map((T,_,O)=>{const{datum:z,keys:P,values:k}=T,R=P[0],B=k[d],w=k[l],U=k[c];let Y,V;if(O.length===1)Y=-.5*Math.PI,V=1.5*Math.PI;else{const bt=n.convert(R);Y=Rr(bt+i.convert(String(m))),V=Rr(Y+i.bandwidth)}const F=Y+i.bandwidth/2,et=x-r.convert(w),W=x-r.convert(U),Z=(et+W)/2,at=Math.cos(F),ot=Math.sin(F),q=at*Z,G=ot*Z,nt=this.properties.label.enabled?N(z,B,q,G):void 0,it=this.getColumnWidth(Y,V);return{series:this,datum:z,point:{x:q,y:G,size:0},midPoint:{x:q,y:G},label:nt,angleValue:R,radiusValue:B,innerRadius:et,outerRadius:W,startAngle:Y,endAngle:V,axisInnerRadius:v,axisOuterRadius:A,columnWidth:it,index:_}});return[{itemId:I,nodeData:E,labelData:E}]})}getColumnWidth(s,t){return NaN}update(s){return C(this,arguments,function*({seriesRect:t}){const e=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(s,t){var e,i,o,a,n;let r=[];if(t){const m=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();m?.datum&&m.series===this&&(r=[m])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,c=(i=l?.fill)!=null?i:this.properties.fill,d=(o=l?.fillOpacity)!=null?o:this.properties.fillOpacity,u=(a=l?.stroke)!=null?a:this.properties.stroke,p=this.properties.strokeOpacity,g=(n=l?.strokeWidth)!=null?n:this.properties.strokeWidth,f=m=>m.angleValue;s.update(r,void 0,f).each((m,y)=>{var M,v,A,x;const S=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:y,fill:c,stroke:u,strokeWidth:g,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(m,y,t,S),m.fill=(M=S?.fill)!=null?M:c,m.fillOpacity=(v=S?.fillOpacity)!=null?v:d,m.stroke=(A=S?.stroke)!=null?A:u,m.strokeOpacity=p,m.strokeWidth=(x=S?.strokeWidth)!=null?x:g,m.lineDash=this.properties.lineDash,m.lineJoin="round"})}updateLabels(){const{label:s}=this.properties;this.labelSelection.update(this.nodeData).each((t,e)=>{s.enabled&&e.label?(t.x=e.label.x,t.y=e.label.y,t.fill=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.text=e.label.text,t.textAlign=e.label.textAlign,t.textBaseline=e.label.textBaseline,t.visible=!0):t.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:s}=this,t=this.getColumnTransitionFunctions();Lr.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),kg(this,"labels",this.ctx.animationManager,[s])}animateClearingUpdateEmpty(){const{itemSelection:s}=this,{animationManager:t}=this.ctx,e=this.getColumnTransitionFunctions();Lr.fromToMotion(this.id,"datums",t,[s],e),Cg(this,"labels",t,[this.labelSelection])}getTooltipHtml(s){var t;const{id:e,axes:i,dataModel:o}=this,{angleKey:a,radiusKey:n,angleName:r,radiusName:l,fill:c,stroke:d,strokeWidth:u,formatter:p,tooltip:g}=this.properties,{angleValue:f,radiusValue:m,datum:y}=s,M=i[fe.X],v=i[fe.Y];if(!this.properties.isValid()||!(M&&v&&Or(m))||!o)return"";const A=M.formatDatum(f),x=v.formatDatum(m),S=kr(l),I=kr(`${A}: ${x}`),{fill:D}=(t=p&&this.ctx.callbackCache.call(p,{seriesId:e,datum:y,fill:c,stroke:d,strokeWidth:u,highlighted:!1,angleKey:a,radiusKey:n}))!=null?t:{fill:c};return g.toTooltipHtml({title:S,backgroundColor:c,content:I},{seriesId:e,datum:y,color:D,title:S,angleKey:a,radiusKey:n,angleName:r,radiusName:l})}getLegendData(s){var t;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||s!=="category")return[];const{radiusKey:e,radiusName:i,fill:o,stroke:a,fillOpacity:n,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:c,label:{text:i??e},marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:n??1,strokeOpacity:r??1,strokeWidth:l}}]}onLegendItemClick(s){const{enabled:t,itemId:e,series:i}=s;i.id===this.id&&this.toggleSeriesItem(e,t)}onLegendItemDoubleClick(s){const{enabled:t,itemId:e,series:i,numVisibleItems:o}=s,n=i.id===this.id||t&&o===1;this.toggleSeriesItem(e,n)}computeLabelsBBox(){return null}};import{_ModuleSupport as jg,_Scene as Fg}from"ag-charts-community";var{Label:Ug}=Fg,{SeriesProperties:Vg,SeriesTooltip:Yg,Validate:At,COLOR_STRING:wr,DEGREE:Hg,FUNCTION:Gg,LINE_DASH:Kg,NUMBER:Wg,OBJECT:Pr,POSITIVE_NUMBER:zr,RATIO:Br,STRING:Ei}=jg,gt=class extends Vg{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new Ug,this.tooltip=new Yg}};h([At(Ei)],gt.prototype,"angleKey",2),h([At(Ei,{optional:!0})],gt.prototype,"angleName",2),h([At(Ei)],gt.prototype,"radiusKey",2),h([At(Ei,{optional:!0})],gt.prototype,"radiusName",2),h([At(wr)],gt.prototype,"fill",2),h([At(Br)],gt.prototype,"fillOpacity",2),h([At(wr)],gt.prototype,"stroke",2),h([At(zr)],gt.prototype,"strokeWidth",2),h([At(Br)],gt.prototype,"strokeOpacity",2),h([At(Kg)],gt.prototype,"lineDash",2),h([At(zr)],gt.prototype,"lineDashOffset",2),h([At(Gg,{optional:!0})],gt.prototype,"formatter",2),h([At(Hg)],gt.prototype,"rotation",2),h([At(Ei,{optional:!0})],gt.prototype,"stackGroup",2),h([At(Wg,{optional:!0})],gt.prototype,"normalizedTo",2),h([At(Pr)],gt.prototype,"label",2),h([At(Pr)],gt.prototype,"tooltip",2);import{_Scene as Xg}from"ag-charts-community";import{_Scene as Qg}from"ag-charts-community";var{motion:$g}=Qg;function jr(){const s={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],e=(n,r,l)=>{t.forEach(c=>{var d,u;const p=s[c];let g=(l==="removed"||l==="updated"?n:r)[c],f=(l==="removed"?n:r)[c];isNaN(f)&&(f=(u=(d=n.previousDatum)==null?void 0:d[c])!=null?u:NaN);const m=g-f;Math.abs(m)>Math.PI&&(g-=Math.sign(m)*2*Math.PI),p.set(r,{from:g,to:f})})},i=(n,r)=>({startAngle:s.startAngle.get(n)[r],endAngle:s.endAngle.get(n)[r]});return{calculate:e,from:n=>i(n,"from"),to:n=>i(n,"to")}}function Fr(s,t,e){if(e==="updated"){if(s.previousDatum==null||isNaN(s.previousDatum.startAngle)||isNaN(s.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return e==="added"&&s.previousDatum!=null?"updated":e}function Zg(s){const t=jr();return{toFn:(o,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,d,u,p,g;return n==="removed"?(c=o.innerRadius,d=o.innerRadius,u=o.columnWidth,p=o.axisInnerRadius,g=o.axisOuterRadius):(c=isNaN(a.innerRadius)?s:a.innerRadius,d=isNaN(a.outerRadius)?s:a.outerRadius,u=isNaN(a.columnWidth)?o.columnWidth:a.columnWidth,p=a.axisInnerRadius,g=a.axisOuterRadius),{innerRadius:c,outerRadius:d,columnWidth:u,axisInnerRadius:p,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(o,a,n)=>{n=Fr(o,a,n),t.calculate(o,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,d,u,p,g;n==="removed"||n==="updated"?(c=o.innerRadius,d=o.outerRadius,u=o.columnWidth,p=o.axisInnerRadius,g=o.axisOuterRadius):(c=s,d=s,u=a.columnWidth,p=a.axisInnerRadius,g=a.axisOuterRadius);const f=$g.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:d,columnWidth:u,axisInnerRadius:p,axisOuterRadius:g,startAngle:r,endAngle:l,phase:f}}}}function qg(s,{innerRadius:t,outerRadius:e,columnWidth:i,axisInnerRadius:o,axisOuterRadius:a,startAngle:n,endAngle:r}){return{innerRadius:t,outerRadius:e,columnWidth:i,axisInnerRadius:o,axisOuterRadius:a,startAngle:n,endAngle:r}}var{motion:Jg}=Xg;function ty(s){const t=jr();return{toFn:(o,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,d;return n==="removed"?(c=s,d=s):(c=isNaN(a.innerRadius)?s:a.innerRadius,d=isNaN(a.outerRadius)?s:a.outerRadius),{innerRadius:c,outerRadius:d,startAngle:r,endAngle:l}},fromFn:(o,a,n)=>{n=Fr(o,a,n),t.calculate(o,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,d;n==="removed"||n==="updated"?(c=o.innerRadius,d=o.outerRadius):(c=s,d=s);const u=Jg.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:d,startAngle:r,endAngle:l,phase:u}}}}function ey(s,{innerRadius:t,outerRadius:e,startAngle:i,endAngle:o}){return{innerRadius:t,outerRadius:e,startAngle:i,endAngle:o}}var{Sector:iy}=Ag,Oo=class extends Cr{constructor(s){super(s,{animationResetFns:{item:ey}}),this.properties=new gt}getStackId(){var s,t;return`nightingale-stack-${(t=(s=this.seriesGrouping)==null?void 0:s.groupIndex)!=null?t:this.id}-yValues`}nodeFactory(){return new iy}updateItemPath(s,t,e,i){s.centerX=0,s.centerY=0,e&&(s.innerRadius=t.innerRadius,s.outerRadius=t.outerRadius,s.startAngle=t.startAngle,s.endAngle=t.endAngle)}getColumnTransitionFunctions(){const s=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return ty(s)}};Oo.className="NightingaleSeries",Oo.type="nightingale";import{_Theme as xe}from"ag-charts-community";var sy={series:{__extends__:xe.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:xe.DEFAULT_FONT_FAMILY,color:xe.DEFAULT_LABEL_COLOUR,__overrides__:xe.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[xe.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:xe.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[xe.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:xe.POLAR_AXIS_SHAPE.CIRCLE}}},oy={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:Oo,seriesDefaults:{axes:[{type:Eo.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:Eo.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:sy,paletteFactory({takeColors:s,userPalette:t}){const{fills:[e],strokes:[i]}=s(1);return{fill:e,stroke:t?i:Eo.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0};import{_ModuleSupport as ay,_Theme as Ur}from"ag-charts-community";import{_ModuleSupport as Vr,_Theme as Li}from"ag-charts-community";var Yr={series:{__extends__:Li.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:Li.DEFAULT_FONT_FAMILY,color:Li.DEFAULT_LABEL_COLOUR,__overrides__:Li.OVERRIDE_SERIES_LABEL_DEFAULTS},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[Li.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},ny=Vr.mergeDefaults({series:{strokeWidth:2}},Yr),ry=Vr.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Yr);import{_ModuleSupport as Hr,_Scene as ly}from"ag-charts-community";import{_ModuleSupport as Ro,_Scene as cy,_Util as hy}from"ag-charts-community";import{_ModuleSupport as dy,_Scene as uy}from"ag-charts-community";var{Label:py}=uy,{SeriesMarker:gy,SeriesProperties:yy,SeriesTooltip:my,Validate:Et,BOOLEAN:fy,COLOR_STRING:xy,DEGREE:Sy,FUNCTION:My,LINE_DASH:vy,OBJECT:ko,POSITIVE_NUMBER:Gr,RATIO:Ay,STRING:xs}=dy,It=class extends yy{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new gy,this.label=new py,this.tooltip=new my,this.connectMissingData=!1}};h([Et(xs)],It.prototype,"angleKey",2),h([Et(xs)],It.prototype,"radiusKey",2),h([Et(xs,{optional:!0})],It.prototype,"angleName",2),h([Et(xs,{optional:!0})],It.prototype,"radiusName",2),h([Et(xy)],It.prototype,"stroke",2),h([Et(Gr)],It.prototype,"strokeWidth",2),h([Et(Ay)],It.prototype,"strokeOpacity",2),h([Et(vy)],It.prototype,"lineDash",2),h([Et(Gr)],It.prototype,"lineDashOffset",2),h([Et(My,{optional:!0})],It.prototype,"formatter",2),h([Et(Sy)],It.prototype,"rotation",2),h([Et(ko)],It.prototype,"marker",2),h([Et(ko)],It.prototype,"label",2),h([Et(ko)],It.prototype,"tooltip",2),h([Et(fy)],It.prototype,"connectMissingData",2);var{ChartAxisDirection:Pe,PolarAxis:Iy,SeriesNodePickMode:Kr,valueProperty:Wr,fixNumericExtent:Dy,seriesLabelFadeInAnimation:Ny,markerFadeInAnimation:by,resetMarkerFn:Ty,animationValidation:_y}=Ro,{BBox:Ey,Group:Ly,Path:Oy,PointerEvents:Ry,Selection:Xr,Text:ky,getMarker:Cy}=cy,{extent:wy,isNumber:Py,isNumberEqual:Qr,sanitizeHtml:$r,toFixed:Zr}=hy,zy=class extends Ro.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey}},Co=class extends Ro.PolarSeries{constructor(s){super({moduleCtx:s,useLabelLayer:!0,pickModes:[Kr.NEAREST_NODE,Kr.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:Ty}}),this.properties=new It,this.NodeClickEvent=zy,this.nodeData=[],this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const t=new Ly;this.contentGroup.append(t),this.lineSelection=Xr.select(t,Oy),t.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:s}=this.properties.marker,t=Cy(s);return new t}addChartEventListeners(){var s,t;this.destroyFns.push((s=this.ctx.chartEventManager)==null?void 0:s.addListener("legend-item-click",e=>this.onLegendItemClick(e)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}getSeriesDomain(s){const{dataModel:t,processedData:e}=this;if(!e||!t)return[];if(s===Pe.X)return t.getDomain(this,"angleValue","value",e);{const i=t.getDomain(this,"radiusValue","value",e),o=wy(i.length===0?i:[0].concat(i));return Dy(o)}}processData(s){return C(this,null,function*(){var t;if(!this.properties.isValid())return;const{angleKey:e,radiusKey:i}=this.properties,o=[];this.ctx.animationManager.isSkipped()||o.push(_y(this)),yield this.requestDataModel(s,(t=this.data)!=null?t:[],{props:[Wr(this,e,!1,{id:"angleValue"}),Wr(this,i,!1,{id:"radiusValue",invalidValue:void 0}),...o]}),this.animationState.transition("updateData")})}didCircleChange(){const s=this.radius,t=this.centerX,e=this.centerY,i=this.circleCache;return s===i.r&&t===i.cx&&e===i.cy?!1:(this.circleCache={r:s,cx:t,cy:e},!0)}getAxisInnerRadius(){const s=this.axes[Pe.Y];return s instanceof Iy?this.radius*s.innerRadiusRatio:0}maybeRefreshNodeData(){return C(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}createNodeData(){return C(this,null,function*(){var s,t;const{processedData:e,dataModel:i}=this;if(!e||!i||!this.properties.isValid())return[];const{angleKey:o,radiusKey:a,angleName:n,radiusName:r,marker:l,label:c}=this.properties,d=(s=this.axes[Pe.X])==null?void 0:s.scale,u=(t=this.axes[Pe.Y])==null?void 0:t.scale;if(!d||!u)return[];const p=i.resolveProcessedDataIndexById(this,"angleValue").index,g=i.resolveProcessedDataIndexById(this,"radiusValue").index,f=this.getAxisInnerRadius(),m=e.data.map(y=>{const{datum:M,values:v}=y,A=v[p],x=v[g],S=d.convert(A),I=this.radius+f-u.convert(x),D=Math.cos(S),b=Math.sin(S),L=D*I,N=b*I;let E;if(c.enabled){const T=this.getLabelText(c,{value:x,datum:M,angleKey:o,radiusKey:a,angleName:n,radiusName:r},_=>Py(_)?_.toFixed(2):String(_));T&&(E={x:L+D*l.size,y:N+b*l.size,text:T,textAlign:Qr(D,0)?"center":D>0?"left":"right",textBaseline:Qr(b,0)?"middle":b>0?"top":"bottom"})}return{series:this,datum:M,point:{x:L,y:N,size:l.size},midPoint:{x:L,y:N},label:E,angleValue:A,radiusValue:x}});return[{itemId:a,nodeData:m,labelData:m}]})}update(s){return C(this,arguments,function*({seriesRect:t}){var e,i;const o=this.checkResize(t),a=!this.ctx.animationManager.isSkipped(),{series:n}=(i=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight())!=null?i:{};this.highlightGroup.visible=(a||this.visible)&&n===this,yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),o&&this.animationState.transition("resize"),this.animationState.transition("update")})}updatePathSelections(){const s=this.visible?[!0]:[];this.lineSelection.update(s)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Xr.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(s){var t;return(t=s?.fill)!=null?t:this.properties.marker.fill}updateMarkers(s,t){var e;const{angleKey:i,radiusKey:o,marker:a,visible:n}=this.properties;let r=[];if(n&&a.shape&&a.enabled)if(t){const c=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();c?.datum&&(r=[c])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0;s.update(r).each((c,d)=>{var u,p,g,f,m,y,M,v,A,x,S,I,D;const b=this.getMarkerFill(l),L=(p=(u=l?.stroke)!=null?u:a.stroke)!=null?p:this.properties.stroke,N=(m=(f=(g=l?.strokeWidth)!=null?g:a.strokeWidth)!=null?f:this.properties.strokeWidth)!=null?m:1,E=a.formatter?this.ctx.callbackCache.call(a.formatter,{datum:d.datum,angleKey:i,radiusKey:o,fill:b,stroke:L,strokeWidth:N,size:a.size,highlighted:t,seriesId:this.id}):void 0;c.fill=(y=E?.fill)!=null?y:b,c.stroke=(M=E?.stroke)!=null?M:L,c.strokeWidth=(v=E?.strokeWidth)!=null?v:N,c.fillOpacity=(x=(A=l?.fillOpacity)!=null?A:a.fillOpacity)!=null?x:1,c.strokeOpacity=(I=(S=a.strokeOpacity)!=null?S:this.properties.strokeOpacity)!=null?I:1,c.size=(D=E?.size)!=null?D:a.size;const{x:T,y:_}=d.point;c.translationX=T,c.translationY=_,c.visible=n&&c.size>0&&!isNaN(T)&&!isNaN(_)})}updateLabels(){const{label:s}=this.properties;this.labelSelection.update(this.nodeData).each((t,e)=>{s.enabled&&e.label?(t.x=e.label.x,t.y=e.label.y,t.fill=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.text=e.label.text,t.textAlign=e.label.textAlign,t.textBaseline=e.label.textBaseline,t.visible=!0):t.visible=!1})}getTooltipHtml(s){var t;if(!this.properties.isValid())return"";const{id:e}=this,{angleKey:i,radiusKey:o,angleName:a,radiusName:n,marker:r,tooltip:l}=this.properties,{datum:c,angleValue:d,radiusValue:u}=s,p=typeof d=="number"?Zr(d):String(d),g=typeof u=="number"?Zr(u):String(u),f=$r(n),m=$r(`${p}: ${g}`),{formatter:y,fill:M,stroke:v,strokeWidth:A,size:x}=r,S=A??this.properties.strokeWidth,{fill:I}=(t=y&&this.ctx.callbackCache.call(y,{datum:c,angleKey:i,radiusKey:o,fill:M,stroke:v,strokeWidth:S,size:x,highlighted:!1,seriesId:e}))!=null?t:{fill:M};return l.toTooltipHtml({title:f,content:m,backgroundColor:I},{datum:c,angleKey:i,angleName:a,radiusKey:o,radiusName:n,title:f,color:I,seriesId:e})}getLegendData(s){var t,e,i,o,a,n,r,l,c,d;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||s!=="category")return[];const{radiusKey:u,radiusName:p,stroke:g,strokeWidth:f,strokeOpacity:m,lineDash:y,visible:M,marker:v}=this.properties;return[{legendType:"category",id:this.id,itemId:u,seriesId:this.id,enabled:M,label:{text:p??u},marker:{shape:v.shape,fill:(o=(i=(e=this.getMarkerFill())!=null?e:v.stroke)!=null?i:g)!=null?o:"rgba(0, 0, 0, 0)",stroke:(n=(a=v.stroke)!=null?a:g)!=null?n:"rgba(0, 0, 0, 0)",fillOpacity:(r=v.fillOpacity)!=null?r:1,strokeOpacity:(c=(l=v.strokeOpacity)!=null?l:m)!=null?c:1,strokeWidth:(d=v.strokeWidth)!=null?d:0,enabled:v.enabled||f<=0},line:{stroke:g,strokeOpacity:m,strokeWidth:f,lineDash:y}}]}onLegendItemClick(s){const{enabled:t,itemId:e,series:i}=s;i.id===this.id&&this.toggleSeriesItem(e,t)}onLegendItemDoubleClick(s){const{enabled:t,itemId:e,series:i,numVisibleItems:o}=s,n=i.id===this.id||t&&o===1;this.toggleSeriesItem(e,n)}pickNodeClosestDatum(s){var t,e;const{x:i,y:o}=s,{rootGroup:a,nodeData:n,centerX:r,centerY:l}=this,c=a.transformPoint(i,o),d=this.radius;if(Math.sqrt(yt(i-r,2)+yt(o-l,2))>d+this.properties.marker.size)return;let p=1/0,g;for(const f of n){const{point:{x:m=NaN,y=NaN}={}}=f;if(isNaN(m)||isNaN(y))continue;const M=Math.sqrt(yt(c.x-m-r,2)+yt(c.y-y-l,2));M<p&&(p=M,g=f)}if(g){const f=Math.max(p-((e=(t=g.point)==null?void 0:t.size)!=null?e:0),0);return{datum:g,distance:f}}}computeLabelsBBox(){return C(this,null,function*(){const{label:s}=this.properties;yield this.maybeRefreshNodeData();const t=[],e=new ky;return this.nodeData.forEach(i=>{if(!s.enabled||!i.label)return;e.text=i.label.text,e.x=i.label.x,e.y=i.label.y,e.setFont(s),e.setAlign(i.label);const o=e.computeBBox();t.push(o)}),t.length===0?null:Ey.merge(t)})}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const s=this.getLineNode();s.fill=void 0,s.lineJoin="round",s.lineCap="round",s.pointerEvents=Ry.None,s.stroke=this.properties.stroke,s.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),s.strokeOpacity=this.properties.strokeOpacity,s.lineDash=this.properties.lineDash,s.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:s,resetInvalidToZero:t}=this,{connectMissingData:e}=this.properties;if(s.length===0)return[];const i=this.axes[Pe.Y],o=this.axes[Pe.X],a=o?.isReversed(),r=i?.isReversed()&&!a?[...s].reverse():s,l=[];let c=!1,d;return r.forEach((u,p)=>{let{x:g,y:f}=u.point;const m=isNaN(g)||isNaN(f);m||(d??(d=u)),m&&!e&&(g=0,f=0);const y=p===0||!t&&!e&&(m||c);l.push({x:g,y:f,moveTo:y}),c=m}),d!==void 0&&l.push({x:d.point.x,y:d.point.y,moveTo:!1}),l}animateSinglePath(s,t,e){const{path:i}=s;i.clear({trackChanges:!0});const o=this.getAxisInnerRadius(),a=this.axes[Pe.Y],r=a?.isReversed()?this.radius+o-a?.scale.convert(0):o;t.forEach(l=>{const{x:c,y:d,arc:u,radius:p=0,startAngle:g=0,endAngle:f=0,moveTo:m}=l,y=Math.atan2(d,c),M=r*Math.cos(y),v=r*Math.sin(y),A=e,x=M*(1-A)+c*A,S=v*(1-A)+d*A;u?i.arc(c,d,p,g,f):m?i.moveTo(x,S):i.lineTo(x,S)}),s.checkPathDirty()}animatePaths(s){const t=this.getLinePoints();this.animateSinglePath(this.getLineNode(),t,s)}animateEmptyUpdateReady(){const{itemSelection:s,labelSelection:t}=this,{animationManager:e}=this.ctx;this.beforePathAnimation(),e.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",onUpdate:i=>this.animatePaths(i),onStop:()=>this.animatePaths(1)}),by(this,e,[s],"added"),Ny(this,"labels",e,[t])}animateWaitingUpdateReady(s){super.animateWaitingUpdateReady(s),this.resetPaths()}animateReadyResize(s){super.animateReadyResize(s),this.resetPaths()}resetPaths(){const s=this.getLineNode();if(s){const{path:t}=s,e=this.getLinePoints();s.fill=void 0,s.stroke=this.properties.stroke,s.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),s.strokeOpacity=this.properties.strokeOpacity,s.lineDash=this.properties.lineDash,s.lineDashOffset=this.properties.lineDashOffset,t.clear({trackChanges:!0}),e.forEach(({x:i,y:o,moveTo:a})=>{a?t.moveTo(i,o):t.lineTo(i,o)}),s.checkPathDirty()}}};Co.className="RadarSeries";import{_ModuleSupport as By}from"ag-charts-community";var{RATIO:jy,COLOR_STRING:Fy,Validate:qr}=By,wo=class extends It{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};h([qr(Fy)],wo.prototype,"fill",2),h([qr(jy)],wo.prototype,"fillOpacity",2);var{Group:Uy,Path:Vy,PointerEvents:Yy,Selection:Hy}=ly,{ChartAxisDirection:Jr}=Hr,Po=class extends Co{constructor(s){super(s),this.properties=new wo,this.resetInvalidToZero=!0;const t=new Uy;t.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(t),this.areaSelection=Hy.select(t,Vy)}updatePathSelections(){const s=this.visible?[!0]:[];this.areaSelection.update(s),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(s){var t,e;return(e=(t=s?.fill)!=null?t:this.properties.marker.fill)!=null?e:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const s=this.getAreaNode();s.fill=this.properties.fill,s.fillOpacity=this.properties.fillOpacity,s.pointerEvents=Yy.None,s.stroke=void 0}animatePaths(s){super.animatePaths(s),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),s)}getAreaPoints(){var s,t;const e=this.getLinePoints(),i=l=>{const c=this.axes[l];return c instanceof Hr.PolarAxis?c:void 0},o=i(Jr.Y),a=i(Jr.X);if(!o?.isReversed())return e;const{points:r=[]}=(t=(s=a?.getAxisLinePoints)==null?void 0:s.call(a))!=null?t:{};return e.concat(...r)}resetPaths(){super.resetPaths();const s=this.getAreaNode();if(s){const{path:t}=s,e=this.getAreaPoints();s.fill=this.properties.fill,s.fillOpacity=this.properties.fillOpacity,s.stroke=void 0,s.lineDash=this.properties.lineDash,s.lineDashOffset=this.properties.lineDashOffset,s.lineJoin=s.lineCap="round",t.clear({trackChanges:!0}),e.forEach(({x:i,y:o,moveTo:a,arc:n,radius:r=0,startAngle:l=0,endAngle:c=0})=>{n?t.arc(i,o,r,l,c):a?t.moveTo(i,o):t.lineTo(i,o)}),t.closePath(),s.checkPathDirty()}}};Po.className="RadarAreaSeries",Po.type="radar-area";var{markerPaletteFactory:Gy}=ay,Ky={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:Po,seriesDefaults:{axes:[{type:Ur.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:Ur.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:ry,paletteFactory:s=>{const{marker:t}=Gy(s);return{stroke:t.stroke,fill:t.fill,marker:t}}};import{_Theme as tl}from"ag-charts-community";var zo=class extends Co{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};zo.className="RadarLineSeries",zo.type="radar-line";var Wy={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:zo,seriesDefaults:{axes:[{type:tl.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:tl.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:ny,paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{stroke:t,marker:{fill:t,stroke:e}}}};import{_Theme as el}from"ag-charts-community";import{_ModuleSupport as Bo,_Scale as Xy,_Scene as Qy,_Util as $y}from"ag-charts-community";import{_ModuleSupport as Zy,_Scene as qy}from"ag-charts-community";var{Label:Jy}=qy,{SeriesProperties:tm,SeriesTooltip:em,Validate:Dt,COLOR_STRING:il,DEGREE:im,FUNCTION:sm,LINE_DASH:om,NUMBER:am,OBJECT:sl,POSITIVE_NUMBER:ol,RATIO:al,STRING:Oi}=Zy,St=class extends tm{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new Jy,this.tooltip=new em}};h([Dt(Oi)],St.prototype,"angleKey",2),h([Dt(Oi)],St.prototype,"radiusKey",2),h([Dt(Oi,{optional:!0})],St.prototype,"angleName",2),h([Dt(Oi,{optional:!0})],St.prototype,"radiusName",2),h([Dt(il)],St.prototype,"fill",2),h([Dt(al)],St.prototype,"fillOpacity",2),h([Dt(il)],St.prototype,"stroke",2),h([Dt(ol)],St.prototype,"strokeWidth",2),h([Dt(al)],St.prototype,"strokeOpacity",2),h([Dt(om)],St.prototype,"lineDash",2),h([Dt(ol)],St.prototype,"lineDashOffset",2),h([Dt(sm,{optional:!0})],St.prototype,"formatter",2),h([Dt(im)],St.prototype,"rotation",2),h([Dt(Oi,{optional:!0})],St.prototype,"stackGroup",2),h([Dt(am,{optional:!0})],St.prototype,"normalizedTo",2),h([Dt(sl)],St.prototype,"label",2),h([Dt(sl)],St.prototype,"tooltip",2);import{_Scene as nm}from"ag-charts-community";var{motion:rm}=nm;function lm(s,t,e){if(e==="updated"){if(s.previousDatum==null||isNaN(s.previousDatum.innerRadius)||isNaN(s.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return e==="added"&&s.previousDatum!=null?"updated":e}function nl(s){return{toFn:(i,o,a)=>{let n,r,l,c;return a==="removed"?(n=s,r=s,l=o.innerRadius,c=o.outerRadius):(n=o.startAngle,r=o.endAngle,l=isNaN(o.innerRadius)?i.innerRadius:o.innerRadius,c=isNaN(o.outerRadius)?i.outerRadius:o.outerRadius),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c}},fromFn:(i,o,a)=>{a=lm(i,o,a);let n,r,l,c;a==="removed"||a==="updated"?(n=i.startAngle,r=i.endAngle,l=i.innerRadius,c=i.outerRadius):(n=s,r=s,l=o.innerRadius,c=o.outerRadius);const d=rm.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,phase:d}}}}function cm(s,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}}var{ChartAxisDirection:ae,PolarAxis:hm,diff:dm,isDefined:um,groupAccumulativeValueProperty:rl,keyProperty:pm,normaliseGroupTo:gm,valueProperty:ym,fixNumericExtent:mm,resetLabelFn:fm,seriesLabelFadeInAnimation:xm,seriesLabelFadeOutAnimation:Sm,animationValidation:Mm}=Bo,{BandScale:vm}=Xy,{Sector:Am,motion:ll}=Qy,{angleBetween:Im,isNumber:cl,sanitizeHtml:hl}=$y,Dm=class extends Bo.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey}},jo=class extends Bo.PolarSeries{constructor(s){super({moduleCtx:s,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:cm,label:fm}}),this.properties=new St,this.NodeClickEvent=Dm,this.nodeData=[],this.groupScale=new vm,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new Am}addChartEventListeners(){var s,t;this.destroyFns.push((s=this.ctx.chartEventManager)==null?void 0:s.addListener("legend-item-click",e=>this.onLegendItemClick(e)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}getSeriesDomain(s){const{axes:t,dataModel:e,processedData:i}=this;if(!i||!e)return[];if(s===ae.X){const o=t[ae.X],a=e.getDomain(this,"angleValue-end","value",i),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return mm(n,o)}else return e.getDomain(this,"radiusValue","key",i)}processData(s){return C(this,null,function*(){var t;if(!this.properties.isValid())return;const e=this.getStackId(),i=`${e}-trailing`,{angleKey:o,radiusKey:a,normalizedTo:n,visible:r}=this.properties,l=[];um(n)&&l.push(gm(this,[e,i],Math.abs(n),"range"));const c=!this.ctx.animationManager.isSkipped();c&&(this.processedData&&l.push(dm(this.processedData)),l.push(Mm(this)));const d=this.visible||!c?{}:{forceValue:0};yield this.requestDataModel(s,(t=this.data)!=null?t:[],{props:[pm(this,a,!1,{id:"radiusValue"}),ym(this,o,!0,K({id:"angleValue-raw",invalidValue:null},d)),...rl(this,o,!0,"normal","current",K({id:"angleValue-end",invalidValue:null,groupId:e},d)),...rl(this,o,!0,"trailing","current",K({id:"angleValue-start",invalidValue:null,groupId:i},d)),...l],dataVisible:r||c}),this.animationState.transition("updateData")})}didCircleChange(){const s=this.radius,t=this.centerX,e=this.centerY,i=this.circleCache;return s===i.r&&t===i.cx&&e===i.cy?!1:(this.circleCache={r:s,cx:t,cy:e},!0)}maybeRefreshNodeData(){return C(this,null,function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1})}getAxisInnerRadius(){const s=this.axes[ae.Y];return s instanceof hm?this.radius*s.innerRadiusRatio:0}createNodeData(){return C(this,null,function*(){var s,t;const{processedData:e,dataModel:i}=this;if(!e||!i||!this.properties.isValid())return[];const o=this.axes[ae.X],a=this.axes[ae.Y],n=o?.scale,r=a?.scale;if(!n||!r)return[];const l=i.resolveProcessedDataIndexById(this,"angleValue-start").index,c=i.resolveProcessedDataIndexById(this,"angleValue-end").index,d=i.resolveProcessedDataIndexById(this,"angleValue-raw").index;let u=0;a instanceof be&&(u=a.groupPaddingInner);const{groupScale:p}=this,{index:g,visibleGroupCount:f}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);p.domain=Array.from({length:f}).map((E,T)=>String(T)),p.range=[0,Math.abs((s=r.bandwidth)!=null?s:0)],p.paddingInner=f>1?u:0;const m=p.bandwidth>=1?p.bandwidth:p.rawBandwidth,y=(t=this.axes[ae.Y])==null?void 0:t.isReversed(),M=y?this.radius:this.getAxisInnerRadius(),A=(y?this.getAxisInnerRadius():this.radius)+M,{angleKey:x,radiusKey:S,angleName:I,radiusName:D,label:b}=this.properties,L=(E,T,_,O)=>{const z=this.getLabelText(b,{value:T,datum:E,angleKey:x,radiusKey:S,angleName:I,radiusName:D},P=>cl(P)?P.toFixed(2):String(P));if(z)return{x:_,y:O,text:z,textAlign:"center",textBaseline:"middle"}},N=e.data.map((E,T)=>{const{datum:_,keys:O,values:z}=E,P=O[0],k=z[d],R=z[l],B=z[c];let w=Math.max(n.convert(R),n.range[0]),U=Math.min(n.convert(B),n.range[1]);w>U&&([w,U]=[U,w]),k<0&&([w,U]=[U,w]);const V=A-r.convert(P)+p.convert(String(g)),F=V+m,et=(V+F)/2,W=w+Im(w,U)/2,Z=Math.cos(W)*et,at=Math.sin(W)*et,ot=this.properties.label.enabled?L(_,k,Z,at):void 0;return{series:this,datum:_,point:{x:Z,y:at,size:0},midPoint:{x:Z,y:at},label:ot,angleValue:k,radiusValue:P,innerRadius:V,outerRadius:F,startAngle:w,endAngle:U,index:T}});return[{itemId:S,nodeData:N,labelData:N}]})}update(s){return C(this,arguments,function*({seriesRect:t}){const e=this.checkResize(t);yield this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),e&&this.animationState.transition("resize"),this.animationState.transition("update")})}updateSectorSelection(s,t){var e,i,o,a,n;let r=[];if(t){const m=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();m?.datum&&m.series===this&&(r=[m])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,c=(i=l?.fill)!=null?i:this.properties.fill,d=(o=l?.fillOpacity)!=null?o:this.properties.fillOpacity,u=(a=l?.stroke)!=null?a:this.properties.stroke,p=this.properties.strokeOpacity,g=(n=l?.strokeWidth)!=null?n:this.properties.strokeWidth,f=m=>m.radiusValue;s.update(r,void 0,f).each((m,y)=>{var M,v,A,x,S;const I=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:y,fill:c,stroke:u,strokeWidth:g,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;m.fill=(M=I?.fill)!=null?M:c,m.fillOpacity=(v=I?.fillOpacity)!=null?v:d,m.stroke=(A=I?.stroke)!=null?A:u,m.strokeOpacity=p,m.strokeWidth=(x=I?.strokeWidth)!=null?x:g,m.lineDash=this.properties.lineDash,m.lineJoin="round",m.inset=u!=null?((S=I?.strokeWidth)!=null?S:g)/2:0,t&&(m.startAngle=y.startAngle,m.endAngle=y.endAngle,m.innerRadius=y.innerRadius,m.outerRadius=y.outerRadius)})}updateLabels(){const{label:s}=this.properties;this.labelSelection.update(this.nodeData).each((t,e)=>{s.enabled&&e.label?(t.x=e.label.x,t.y=e.label.y,t.fill=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.text=e.label.text,t.textAlign=e.label.textAlign,t.textBaseline=e.label.textBaseline,t.visible=!0):t.visible=!1})}getBarTransitionFunctions(){var s;const t=(s=this.axes[ae.X])==null?void 0:s.scale;let e=0;if(!t)return nl(e);const i=Math.min(t.domain[0],t.domain[1]),o=Math.max(t.domain[0],t.domain[1]);return i<=0&&o>=0&&(e=t.convert(0)),nl(e)}animateEmptyUpdateReady(){const{labelSelection:s}=this,t=this.getBarTransitionFunctions();ll.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),xm(this,"labels",this.ctx.animationManager,[s])}animateClearingUpdateEmpty(){const{itemSelection:s}=this,{animationManager:t}=this.ctx,e=this.getBarTransitionFunctions();ll.fromToMotion(this.id,"datums",t,[s],e),Sm(this,"labels",t,[this.labelSelection])}getTooltipHtml(s){var t;const{id:e,axes:i,dataModel:o}=this,{angleKey:a,angleName:n,radiusKey:r,radiusName:l,fill:c,stroke:d,strokeWidth:u,formatter:p,tooltip:g}=this.properties,{angleValue:f,radiusValue:m,datum:y}=s,M=i[ae.X],v=i[ae.Y];if(!this.properties.isValid()||!(M&&v&&cl(f))||!o)return"";const A=M.formatDatum(f),x=v.formatDatum(m),S=hl(n),I=hl(`${x}: ${A}`),{fill:D}=(t=p&&this.ctx.callbackCache.call(p,{datum:y,fill:c,stroke:d,strokeWidth:u,highlighted:!1,angleKey:a,radiusKey:r,seriesId:e}))!=null?t:{fill:c};return g.toTooltipHtml({title:S,backgroundColor:c,content:I},{seriesId:e,datum:y,color:D,title:S,angleKey:a,radiusKey:r,angleName:n,radiusName:l})}getLegendData(s){var t;if(!((t=this.data)!=null&&t.length)||!this.properties.isValid()||s!=="category")return[];const{angleKey:e,angleName:i,fill:o,stroke:a,fillOpacity:n,strokeOpacity:r,strokeWidth:l,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:c,label:{text:i??e},marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:n??1,strokeOpacity:r??1,strokeWidth:l}}]}onLegendItemClick(s){const{enabled:t,itemId:e,series:i}=s;i.id===this.id&&this.toggleSeriesItem(e,t)}onLegendItemDoubleClick(s){const{enabled:t,itemId:e,series:i,numVisibleItems:o}=s,n=i.id===this.id||t&&o===1;this.toggleSeriesItem(e,n)}computeLabelsBBox(){return null}getStackId(){var s,t;return`radialBar-stack-${(t=(s=this.seriesGrouping)==null?void 0:s.groupIndex)!=null?t:this.id}-xValues`}};jo.className="RadialBarSeries",jo.type="radial-bar";import{_Theme as Ri}from"ag-charts-community";var Nm={series:{__extends__:Ri.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Ri.DEFAULT_FONT_FAMILY,color:Ri.DEFAULT_INVERTED_LABEL_COLOUR,__overrides__:Ri.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[Ri.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},bm={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:jo,seriesDefaults:{axes:[{type:el.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:el.POLAR_AXIS_TYPE.RADIUS_CATEGORY}]},themeTemplate:Nm,paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}},stackable:!0,groupable:!0};import{_Theme as dl}from"ag-charts-community";import{_ModuleSupport as Tm,_Scene as _m}from"ag-charts-community";import{_ModuleSupport as Em}from"ag-charts-community";var{Validate:ul,RATIO:pl}=Em,Fo=class extends gt{};h([ul(pl,{optional:!0})],Fo.prototype,"columnWidthRatio",2),h([ul(pl,{optional:!0})],Fo.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:Lm,PolarAxis:Om}=Tm,{RadialColumnShape:Rm,getRadialColumnWidth:km}=_m,Uo=class extends Cr{constructor(s){super(s,{animationResetFns:{item:qg}}),this.properties=new Fo}getStackId(){var s,t;return`radarColumn-stack-${(t=(s=this.seriesGrouping)==null?void 0:s.groupIndex)!=null?t:this.id}-yValues`}nodeFactory(){return new Rm}getColumnTransitionFunctions(){const s=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return Zg(s)}isRadiusAxisCircle(){const s=this.axes[Lm.Y];return s instanceof Om?s.shape==="circle":!1}updateItemPath(s,t,e){s.isBeveled=this.isRadiusAxisCircle(),s.isRadiusAxisReversed=this.isRadiusAxisReversed(),e&&(s.innerRadius=t.innerRadius,s.outerRadius=t.outerRadius,s.startAngle=t.startAngle,s.endAngle=t.endAngle,s.columnWidth=t.columnWidth,s.axisInnerRadius=t.axisInnerRadius,s.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(s,t){const{columnWidthRatio:e=.5,maxColumnWidthRatio:i=.5}=this.properties;return km(s,t,this.radius,e,i)}};Uo.className="RadialColumnSeries",Uo.type="radial-column";import{_Theme as Se}from"ag-charts-community";var Cm={series:{__extends__:Se.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:Se.DEFAULT_FONT_FAMILY,color:Se.DEFAULT_LABEL_COLOUR,__overrides__:Se.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[Se.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:Se.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[Se.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:Se.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},wm={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:Uo,seriesDefaults:{axes:[{type:dl.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:dl.POLAR_AXIS_TYPE.RADIUS_NUMBER}]},themeTemplate:Cm,paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}},stackable:!0,groupable:!0};import{_ModuleSupport as Pm,_Theme as Ss}from"ag-charts-community";import{_ModuleSupport as ki,_Scene as gl,_Util as zm}from"ag-charts-community";import{_ModuleSupport as Bm,_Scene as jm}from"ag-charts-community";var{DropShadow:Fm,Label:Um}=jm,{CartesianSeriesProperties:Vm,SeriesMarker:Ym,SeriesTooltip:Hm,Validate:rt,BOOLEAN:Gm,COLOR_STRING:yl,LINE_DASH:Km,OBJECT:Ms,PLACEMENT:Wm,POSITIVE_NUMBER:Vo,RATIO:ml,STRING:ze}=Bm,Yo=class extends Um{constructor(){super(...arguments),this.placement="outside",this.padding=6}};h([rt(Wm)],Yo.prototype,"placement",2),h([rt(Vo)],Yo.prototype,"padding",2);var ct=class extends Vm{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Fm().set({enabled:!1}),this.marker=new Ym,this.label=new Yo,this.tooltip=new Hm,this.connectMissingData=!1}};h([rt(ze)],ct.prototype,"xKey",2),h([rt(ze)],ct.prototype,"yLowKey",2),h([rt(ze)],ct.prototype,"yHighKey",2),h([rt(ze,{optional:!0})],ct.prototype,"xName",2),h([rt(ze,{optional:!0})],ct.prototype,"yName",2),h([rt(ze,{optional:!0})],ct.prototype,"yLowName",2),h([rt(ze,{optional:!0})],ct.prototype,"yHighName",2),h([rt(yl)],ct.prototype,"fill",2),h([rt(ml)],ct.prototype,"fillOpacity",2),h([rt(yl)],ct.prototype,"stroke",2),h([rt(Vo)],ct.prototype,"strokeWidth",2),h([rt(ml)],ct.prototype,"strokeOpacity",2),h([rt(Km)],ct.prototype,"lineDash",2),h([rt(Vo)],ct.prototype,"lineDashOffset",2),h([rt(Ms)],ct.prototype,"shadow",2),h([rt(Ms)],ct.prototype,"marker",2),h([rt(Ms)],ct.prototype,"label",2),h([rt(Ms)],ct.prototype,"tooltip",2),h([rt(Gm)],ct.prototype,"connectMissingData",2);var{valueProperty:fl,trailingValueProperty:xl,keyProperty:Xm,ChartAxisDirection:Me,mergeDefaults:Qm,updateLabelNode:$m,fixNumericExtent:Sl,AreaSeriesTag:Ho,buildResetPathFn:Zm,resetLabelFn:qm,resetMarkerFn:Jm,resetMarkerPositionFn:Ml,pathSwipeInAnimation:tf,resetMotion:ef,markerSwipeScaleInAnimation:sf,seriesLabelFadeInAnimation:of,animationValidation:af,diff:nf,updateClipPath:vl}=ki,{getMarker:rf,PointerEvents:Go}=gl,{sanitizeHtml:Be,extent:lf,isNumber:cf}=zm,hf={[ki.ChartAxisDirection.X]:["xKey"],[ki.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},df={[Me.X]:["xName"],[Me.Y]:["yLowName","yHighName","yName"]},uf=class extends ki.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.xKey=i.properties.xKey,this.yLowKey=i.properties.yLowKey,this.yHighKey=i.properties.yHighKey}},Ko=class ac extends ki.CartesianSeries{constructor(t){super({moduleCtx:t,hasMarkers:!0,pathsPerSeries:2,directionKeys:hf,directionNames:df,animationResetFns:{path:Zm({getOpacity:()=>this.getOpacity()}),label:qm,marker:(e,i)=>K(K({},Jm(e)),Ml(e,i))}}),this.properties=new ct,this.NodeClickEvent=uf}processData(t){return C(this,null,function*(){var e;if(!this.properties.isValid())return;const{xKey:i,yLowKey:o,yHighKey:a}=this.properties,{isContinuousX:n,isContinuousY:r}=this.isContinuous(),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(nf(this.processedData)),c&&l.push(af(this)),yield this.requestDataModel(t,(e=this.data)!=null?e:[],{props:[Xm(this,i,n,{id:"xValue"}),fl(this,o,r,{id:"yLowValue",invalidValue:void 0}),fl(this,a,r,{id:"yHighValue",invalidValue:void 0}),xl(this,o,r,{id:"yLowTrailingValue",invalidValue:void 0}),xl(this,a,r,{id:"yHighTrailingValue",invalidValue:void 0}),...l],dataVisible:this.visible}),this.animationState.transition("updateData")})}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:o}=this;if(!(e&&i))return[];const{domain:{keys:[a],values:n}}=e;if(t===Me.X){const r=i.resolveProcessedDataDefById(this,"xValue"),l=o[Me.X];return r?.def.type==="key"&&r.def.valueType==="category"?a:Sl(lf(a),l)}else{const r=i.resolveProcessedDataIndexById(this,"yLowValue").index,l=n[r],c=i.resolveProcessedDataIndexById(this,"yHighValue").index,d=n[c],u=[l[0]>d[0]?d[0]:l[0],d[1]<l[1]?l[1]:d[1]];return Sl(u)}}createNodeData(){return C(this,null,function*(){var t,e;const{data:i,dataModel:o,axes:a,visible:n}=this,r=a[Me.X],l=a[Me.Y];if(!(i&&n&&r&&l&&o))return[];const c=r.scale,d=l.scale,{xKey:u,yLowKey:p,yHighKey:g,connectMissingData:f,marker:m}=this.properties,y=`${p}-${g}`,M=((t=c.bandwidth)!=null?t:0)/2,v=o.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue","yHighTrailingValue","yLowTrailingValue"]),A=(k,R,B)=>{const w=c.convert(k)+M,U=d.convert(R),Y=d.convert(B);return[{point:{x:w,y:U},size:m.size,itemId:"high",yValue:R,xValue:k},{point:{x:w,y:Y},size:m.size,itemId:"low",yValue:B,xValue:k}]},x=k=>{const R=k,{point:B}=R,w=Na(R,["point"]);return _t(K({},w),{point:_t(K({},B),{moveTo:!0})})},S=[],I=[],D={itemId:y,points:[]},b={itemId:y,points:[]},L={itemId:y,labelData:S,nodeData:I,fillData:b,strokeData:D,scales:Ht(ac.prototype,this,"calculateScaling").call(this),visible:this.visible},N=b.points,E=[],T=D.points,_=[];let O,z=-1/0,P=-1/0;return(e=this.processedData)==null||e.data.forEach(({keys:k,datum:R,values:B},w)=>{const U=o.resolveProcessedDataDefsValues(v,{keys:k,values:B}),{xValue:Y,yHighValue:V,yLowValue:F}=U,W=V==null||F==null?[]:A(Y,V,F),Z=F>V;W.forEach(({point:{x:Lt,y:wt},size:le,itemId:Pt="",yValue:jt})=>{I.push({index:w,series:this,itemId:Pt,datum:R,midPoint:{x:Lt,y:wt},yHighValue:V,yLowValue:F,xValue:Y,xKey:u,yLowKey:p,yHighKey:g,point:{x:Lt,y:wt,size:le}});const ce=this.createLabelData({point:{x:Lt,y:wt},value:jt,yLowValue:F,yHighValue:V,itemId:Pt,inverted:Z,datum:R,series:this});S.push(ce)});const at=z!=null&&P!=null,ot=O!=null&&at,q=Y!=null,G=V!=null&&F!=null;let[nt,it]=A(Y,V??0,F??0);if(!f)if(G){if(!at){const[Lt,wt]=A(Y,0,0);N.push(Lt),E.push(wt)}}else{const[Lt,wt]=A(O,0,0);N.push(Lt),E.push(wt)}q&&G&&(N.push(nt),E.push(it)),q&&G&&!ot&&!f&&w>0&&(nt=x(nt),it=x(it)),q&&G&&(T.push(nt),_.push(it)),O=Y,z=V,P=F}),N.length>0&&(N[0]=x(N[0])),N.push(...E.reverse()),_.length>0&&(_[0]=x(_[0])),T.push(..._),[L]})}createLabelData({point:t,value:e,itemId:i,inverted:o,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:d,yName:u,yLowName:p,yHighName:g,label:f}=this.properties,{placement:m,padding:y=10}=f,M=o?i==="low"?"high":"low":i,v=m==="outside"&&M==="high"||m==="inside"&&M==="low"?-1:1;return{x:t.x,y:t.y+y*v,series:n,itemId:i,datum:a,text:this.getLabelText(f,{value:e,datum:a,itemId:i,xKey:r,yLowKey:l,yHighKey:c,xName:d,yLowName:p,yHighName:g,yName:u},A=>cf(A)?A.toFixed(2):String(A)),textAlign:"center",textBaseline:v===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker,e=rf(t);return new e}updatePathNodes(t){return C(this,null,function*(){const{opacity:e,visible:i}=t,[o,a]=t.paths,n=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:Ho.Stroke,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:Go.None,stroke:this.properties.stroke,strokeWidth:n,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),o.setProperties({tag:Ho.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Go.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:n,opacity:e,visible:i}),vl(this,a),vl(this,o)})}updatePaths(t){return C(this,null,function*(){this.updateAreaPaths([t.paths],[t.contextData])})}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(({fillData:i},o)=>{const[a]=t[o],{path:n}=a;n.clear({trackChanges:!0});for(const{point:r}of i.points)r.moveTo?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);n.closePath(),a.checkPathDirty()})}updateStrokePath(t,e){e.forEach(({strokeData:i},o)=>{const[,a]=t[o],{path:n}=a;n.clear({trackChanges:!0});for(const{point:r}of i.points)r.moveTo?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);a.checkPathDirty()})}updateMarkerSelection(t){return C(this,null,function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])})}updateMarkerNodes(t){return C(this,null,function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o,yLowKey:a,yHighKey:n,marker:r,fill:l,stroke:c,strokeWidth:d,fillOpacity:u,strokeOpacity:p}=this.properties,g=Qm(i&&this.properties.highlightStyle.item,r.getStyle(),{fill:l,fillOpacity:u,stroke:c,strokeWidth:d,strokeOpacity:p});e.each((f,m)=>{this.updateMarkerStyle(f,r,{datum:m,highlighted:i,xKey:o,yHighKey:n,yLowKey:a},g)}),i||this.properties.marker.markClean()})}updateLabelSelection(t){return C(this,null,function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,o=>{o.tag=Ho.Label,o.pointerEvents=Go.None})})}updateLabelNodes(t){return C(this,null,function*(){t.labelSelection.each((e,i)=>{$m(e,this.properties.label,i)})})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getHighlightData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}getTooltipHtml(t){const e=this.axes[Me.X],i=this.axes[Me.Y];if(!this.properties.isValid()||!e||!i)return"";const{id:o}=this,{xKey:a,yLowKey:n,yHighKey:r,xName:l,yName:c,yLowName:d,yHighName:u,fill:p,tooltip:g}=this.properties,{datum:f,itemId:m,xValue:y,yLowValue:M,yHighValue:v}=t,A=p??"gray",x=Be(e.formatDatum(y)),S=Be(i.formatDatum(M)),I=Be(i.formatDatum(v)),D=l??a,b=d??n,L=u??r,N=Be(c),E=c?`<b>${Be(D)}</b>: ${x}<br><b>${Be(b)}</b>: ${S}<br><b>${Be(L)}</b>: ${I}<br>`:`${x}: ${S} - ${I}`;return g.toTooltipHtml({title:N,content:E,backgroundColor:A},{seriesId:o,itemId:m,datum:f,xKey:a,yLowKey:n,yHighKey:r,xName:l,yLowName:d,yHighName:u,yName:c,color:A})}getLegendData(t){var e,i;if(t!=="category")return[];const{yLowKey:o,yHighKey:a,yName:n,yLowName:r,yHighName:l,fill:c,stroke:d,strokeWidth:u,strokeOpacity:p,lineDash:g,visible:f,marker:m}=this.properties,y=n??`${r??o} - ${l??a}`;return[{legendType:"category",id:this.id,itemId:`${o}-${a}`,seriesId:this.id,enabled:f,label:{text:`${y}`},marker:{shape:m.shape,fill:(e=m.fill)!=null?e:c,stroke:(i=m.stroke)!=null?i:d,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,strokeWidth:m.strokeWidth},line:{stroke:d,strokeOpacity:p,strokeWidth:u,lineDash:g}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new gl.Group}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:o,paths:a}=t,{animationManager:n}=this.ctx;this.updateAreaPaths(a,o),tf(this,n,a.flat()),ef(e,Ml),sf(this,n,e),of(this,"labels",n,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){const{contextData:e,paths:i}=t;super.animateWaitingUpdateReady(t),this.updateAreaPaths(i,e)}};Ko.className="RangeAreaSeries",Ko.type="range-area";var pf=Ko;import{_Theme as hi}from"ag-charts-community";var gf={series:{__extends__:hi.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:hi.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:hi.DEFAULT_FONT_FAMILY,color:hi.DEFAULT_LABEL_COLOUR,__overrides__:hi.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[hi.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:yf}=Pm,mf={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:pf,seriesDefaults:{axes:[{type:Ss.CARTESIAN_AXIS_TYPE.NUMBER,position:Ss.POSITION.LEFT,crosshair:{enabled:!0,snap:!1}},{type:Ss.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ss.POSITION.BOTTOM}]},themeTemplate:gf,paletteFactory:s=>{const{marker:t}=yf(s);return{fill:t.fill,stroke:t.stroke,marker:t}}};import{_Theme as vs}from"ag-charts-community";import{_ModuleSupport as Ci,_Scene as ff,_Util as xf}from"ag-charts-community";import{_ModuleSupport as Sf,_Scene as Mf}from"ag-charts-community";var{DropShadow:vf,Label:Af}=Mf,{AbstractBarSeriesProperties:If,SeriesTooltip:Df,Validate:lt,COLOR_STRING:Al,FUNCTION:Nf,LINE_DASH:bf,OBJECT:Wo,PLACEMENT:Tf,POSITIVE_NUMBER:As,RATIO:Il,STRING:je}=Sf,Xo=class extends Af{constructor(){super(...arguments),this.placement="inside",this.padding=6}};h([lt(Tf)],Xo.prototype,"placement",2),h([lt(As)],Xo.prototype,"padding",2);var ht=class extends If{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new vf().set({enabled:!1}),this.label=new Xo,this.tooltip=new Df}};h([lt(je)],ht.prototype,"xKey",2),h([lt(je)],ht.prototype,"yLowKey",2),h([lt(je)],ht.prototype,"yHighKey",2),h([lt(je,{optional:!0})],ht.prototype,"xName",2),h([lt(je,{optional:!0})],ht.prototype,"yName",2),h([lt(je,{optional:!0})],ht.prototype,"yLowName",2),h([lt(je,{optional:!0})],ht.prototype,"yHighName",2),h([lt(Al)],ht.prototype,"fill",2),h([lt(Il)],ht.prototype,"fillOpacity",2),h([lt(Al)],ht.prototype,"stroke",2),h([lt(As)],ht.prototype,"strokeWidth",2),h([lt(Il)],ht.prototype,"strokeOpacity",2),h([lt(bf)],ht.prototype,"lineDash",2),h([lt(As)],ht.prototype,"lineDashOffset",2),h([lt(As)],ht.prototype,"cornerRadius",2),h([lt(Nf,{optional:!0})],ht.prototype,"formatter",2),h([lt(Wo)],ht.prototype,"shadow",2),h([lt(Wo)],ht.prototype,"label",2),h([lt(Wo)],ht.prototype,"tooltip",2);var{SeriesNodePickMode:_f,valueProperty:Dl,keyProperty:Ef,ChartAxisDirection:qt,getRectConfig:Lf,updateRect:Of,checkCrisp:Rf,updateLabelNode:kf,CategoryAxis:Cf,SMALLEST_KEY_INTERVAL:Nl,diff:wf,prepareBarAnimationFunctions:bl,midpointStartingBarPosition:Tl,resetBarSelectionsFn:Pf,fixNumericExtent:Qo,seriesLabelFadeInAnimation:_l,resetLabelFn:zf,animationValidation:Bf,createDatumId:jf}=Ci,{ContinuousScale:$o,BandScale:Ff,Rect:Uf,PointerEvents:Vf,motion:El}=ff,{sanitizeHtml:Fe,isNumber:Ll,extent:Yf}=xf,Hf={[Ci.ChartAxisDirection.X]:["xKey"],[Ci.ChartAxisDirection.Y]:["yLowKey","yHighKey"]},Gf={[qt.X]:["xName"],[qt.Y]:["yLowName","yHighName","yName"]},Kf=class extends Ci.SeriesNodeClickEvent{constructor(s,t,e,i){super(s,t,e,i),this.xKey=i.properties.xKey,this.yLowKey=i.properties.yLowKey,this.yHighKey=i.properties.yHighKey}},Zo=class nc extends Ci.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[_f.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:Hf,directionNames:Gf,datumSelectionGarbageCollection:!1,animationResetFns:{datum:Pf,label:zf}}),this.properties=new ht,this.NodeClickEvent=Kf,this.groupScale=new Ff,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===qt.X?t===qt.X?qt.Y:qt.X:t}processData(t){return C(this,null,function*(){var e,i,o,a,n;if(!this.properties.isValid())return;const{xKey:r,yLowKey:l,yHighKey:c}=this.properties,d=$o.is((e=this.getCategoryAxis())==null?void 0:e.scale),u=$o.is((i=this.getValueAxis())==null?void 0:i.scale),p=[];this.ctx.animationManager.isSkipped()||(this.processedData&&p.push(wf(this.processedData)),p.push(Bf(this)));const g=this.visible?{}:{forceValue:0},{processedData:f}=yield this.requestDataModel(t,(o=this.data)!=null?o:[],{props:[Ef(this,r,d,{id:"xValue"}),Dl(this,l,u,K({id:"yLowValue"},g)),Dl(this,c,u,K({id:"yHighValue"},g)),...d?[Nl]:[],...p],groupByKeys:!0});this.smallestDataInterval={x:(n=(a=f.reduced)==null?void 0:a.smallestKeyInterval)!=null?n:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o}=this;if(!(i&&o))return[];const{domain:{keys:[a],values:n}}=i;if(t===this.getCategoryDirection()){const r=o.resolveProcessedDataDefById(this,"xValue");if(r?.def.type==="key"&&r?.def.valueType==="category")return a;const{reduced:{[Nl.property]:l}={}}=i,c=l!=null&&isFinite(l)?l:0,d=(e=Yf(a))!=null?e:[NaN,NaN],u=this.getCategoryAxis(),p=u?.isReversed();if(t===qt.Y){const m=d[0]+(p?0:-c),y=d[1]+(p?c:0);return Qo([m,y],u)}const g=d[0]+(p?-c:0),f=d[1]+(p?0:c);return Qo([g,f],u)}else{const r=o.resolveProcessedDataIndexById(this,"yLowValue").index,l=n[r],c=o.resolveProcessedDataIndexById(this,"yHighValue").index,d=n[c],u=[l[0]>d[0]?d[0]:l[0],d[1]<l[1]?l[1]:d[1]];return Qo(u)}}createNodeData(){return C(this,null,function*(){const{data:t,dataModel:e,groupScale:i,processedData:o,smallestDataInterval:a,ctx:{seriesStateManager:n},properties:{visible:r}}=this,l=this.getCategoryAxis(),c=this.getValueAxis();if(!(t&&r&&l&&c&&e))return[];const d=l.scale,u=c.scale,p=this.getBarDirection()===qt.X,{xKey:g,yLowKey:f,yHighKey:m,fill:y,stroke:M,strokeWidth:v}=this.properties,A=`${f}-${m}`,x=[],S=[],{index:I,visibleGroupCount:D}=n.getVisiblePeerGroupIndex(this);for(let _=0;_<D;_++)S.push(String(_));const b=$o.is(d)?d.calcBandwidth(a?.x):d.bandwidth;i.domain=S,i.range=[0,b??0],l instanceof Cf?i.paddingInner=l.groupPaddingInner:i.padding=0,i.round=i.padding!==0;const L=i.bandwidth>=1?i.bandwidth:i.rawBandwidth,N=e.resolveProcessedDataIndexById(this,"yLowValue").index,E=e.resolveProcessedDataIndexById(this,"yHighValue").index,T=e.resolveProcessedDataIndexById(this,"xValue").index;return o?.data.forEach(({keys:_,datum:O,values:z},P)=>{z.forEach((k,R)=>{var B;(B=x[R])!=null||(x[R]={itemId:A,nodeData:[],labelData:[],scales:Ht(nc.prototype,this,"calculateScaling").call(this),visible:this.visible});const w=_[T],U=Math.round(d.convert(w))+i.convert(String(I)),Y=k[N],V=k[E],F=Math.min(Y,V),et=Math.max(Y,V),W=Math.round(u.convert(F)),at=Math.round(u.convert(et)),ot=W,q=Math.max(v,Math.abs(ot-at)),G={x:p?Math.min(at,ot):U,y:p?U:Math.min(at,ot),width:p?q:L,height:p?L:q},nt={x:G.x+G.width/2,y:G.y+G.height/2},it=this.createLabelData({rect:G,barAlongX:p,yLowValue:F,yHighValue:et,datum:O[R],series:this}),bt={index:P,series:this,itemId:A,datum:O[R],xValue:w,yLowValue:Y,yHighValue:V,yLowKey:f,yHighKey:m,xKey:g,x:G.x,y:G.y,width:G.width,height:G.height,midPoint:nt,fill:y,stroke:M,strokeWidth:v,opacity:1,labels:it};x[R].nodeData.push(bt),x[R].labelData.push(...it)})}),x})}createLabelData({rect:t,barAlongX:e,yLowValue:i,yHighValue:o,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:d,yLowName:u,yHighName:p,yName:g,label:f}=this.properties,m={datum:a,xKey:r,yLowKey:l,yHighKey:c,xName:d,yLowName:u,yHighName:p,yName:g},{placement:y,padding:M}=f,A=M*(y==="outside"?1:-1),x={x:t.x+(e?-A:t.width/2),y:t.y+(e?t.height/2:t.height+A),textAlign:e?"left":"center",textBaseline:e?"middle":"bottom",text:this.getLabelText(f,K({itemId:"low",value:i},m),I=>Ll(I)?I.toFixed(2):""),itemId:"low",datum:a,series:n},S={x:t.x+(e?t.width+A:t.width/2),y:t.y+(e?t.height/2:-A),textAlign:e?"right":"center",textBaseline:e?"middle":"top",text:this.getLabelText(f,K({itemId:"high",value:o},m),I=>Ll(I)?I.toFixed(2):""),itemId:"high",datum:a,series:n};return y==="outside"&&(x.textAlign=e?"right":"center",x.textBaseline=e?"middle":"top",S.textAlign=e?"left":"center",S.textBaseline=e?"middle":"bottom"),[x,S]}nodeFactory(){return new Uf}updateDatumSelection(t){return C(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o,void 0,a=>this.getDatumId(a))})}updateDatumNodes(t){return C(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:a}=this,{yLowKey:n,yHighKey:r,highlightStyle:{item:l}}=this.properties,c=this.axes[qt.X],d=Rf(c?.visibleRange),u=this.getCategoryDirection()===qt.X;e.each((p,g)=>{const{fillOpacity:f,strokeOpacity:m,strokeWidth:y,lineDash:M,lineDashOffset:v,formatter:A,shadow:x}=this.properties,S={fill:g.fill,stroke:g.stroke,fillOpacity:f,strokeOpacity:m,lineDash:M,lineDashOffset:v,fillShadow:x,strokeWidth:this.getStrokeWidth(y),cornerRadius:this.properties.cornerRadius,cornerRadiusBbox:void 0},I=u?g.width>0:g.height>0,D=Lf({datum:g,lowValue:g.yLowValue,highValue:g.yHighValue,isHighlighted:i,style:S,highlightStyle:l,formatter:A,seriesId:o,itemId:g.itemId,ctx:a,yLowKey:n,yHighKey:r});D.crisp=d,D.visible=I,Of({rect:p,config:D})})})}getHighlightLabelData(t,e){const i=t.filter(o=>o.datum===e.datum);return i.length>0?i:void 0}updateLabelSelection(t){return C(this,null,function*(){const e=this.properties.label.enabled?t.labelData:[];return t.labelSelection.update(e,i=>{i.pointerEvents=Vf.None})})}updateLabelNodes(t){return C(this,null,function*(){t.labelSelection.each((e,i)=>{kf(e,this.properties.label,i)})})}getTooltipHtml(t){var e,i;const{id:o,ctx:{callbackCache:a}}=this,n=this.getCategoryAxis(),r=this.getValueAxis();if(!this.properties.isValid()||!n||!r)return"";const{xKey:l,yLowKey:c,yHighKey:d,xName:u,yLowName:p,yHighName:g,yName:f,fill:m,strokeWidth:y,formatter:M,tooltip:v}=this.properties,{datum:A,itemId:x,xValue:S,yLowValue:I,yHighValue:D}=t;let b;M&&(b=a.call(M,{datum:A,xKey:l,yLowKey:c,yHighKey:d,fill:m,strokeWidth:y,highlighted:!1,seriesId:o,itemId:x}));const L=(i=(e=b?.fill)!=null?e:m)!=null?i:"gray",N=Fe(n.formatDatum(S)),E=Fe(r.formatDatum(I)),T=Fe(r.formatDatum(D)),_=u??l,O=p??c,z=g??d,P=Fe(f),k=f?`<b>${Fe(_)}</b>: ${N}<br><b>${Fe(O)}</b>: ${E}<br><b>${Fe(z)}</b>: ${T}<br>`:`${N}: ${E} - ${T}`,R={title:P,content:k,backgroundColor:L};return v.toTooltipHtml(R,{datum:A,xKey:l,xName:u,yLowKey:c,yLowName:p,yHighKey:d,yHighName:g,yName:f,color:L,seriesId:o,itemId:x})}getLegendData(t){const{id:e,visible:i}=this;if(t!=="category")return[];const{fill:o,stroke:a,strokeWidth:n,fillOpacity:r,strokeOpacity:l,yName:c,yLowName:d,yHighName:u,yLowKey:p,yHighKey:g}=this.properties,f=c??`${d??p} - ${u??g}`;return[{legendType:"category",id:e,itemId:`${p}-${g}`,seriesId:e,enabled:i,label:{text:`${f}`},marker:{fill:o,stroke:a,fillOpacity:r,strokeOpacity:l,strokeWidth:n}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){const i=bl(Tl(this.isVertical(),"normal"));El.fromToMotion(this.id,"datums",this.ctx.animationManager,t,i),_l(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){var e;const{datumSelections:i,labelSelections:o}=t,{processedData:a}=this,n=(e=a?.reduced)==null?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=bl(Tl(this.isVertical(),"fade"));El.fromToMotion(this.id,"datums",this.ctx.animationManager,i,r,(l,c)=>jf(c.xValue),n),_l(this,"labels",this.ctx.animationManager,o)}getDatumId(t){return`${t.xValue}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}};Zo.className="RangeBarSeries",Zo.type="range-bar";var Wf=Zo;import{_Theme as wi}from"ag-charts-community";var Xf={series:{__extends__:wi.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:wi.DEFAULT_FONT_FAMILY,color:wi.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside",__overrides__:wi.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[wi.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},Qf={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:Wf,seriesDefaults:{axes:[{type:vs.CARTESIAN_AXIS_TYPE.CATEGORY,position:vs.POSITION.BOTTOM},{type:vs.CARTESIAN_AXIS_TYPE.NUMBER,position:vs.POSITION.LEFT}]},themeTemplate:Xf,paletteFactory:({takeColors:s})=>{const{fills:[t],strokes:[e]}=s(1);return{fill:t,stroke:e}},groupable:!0,swapDefaultAxesCondition:({direction:s})=>s==="horizontal"};import{_Theme as Ol}from"ag-charts-community";import{_ModuleSupport as Rl,_Scene as $f,_Util as Zf}from"ag-charts-community";import{_ModuleSupport as qf}from"ag-charts-community";var{HierarchySeriesProperties:Jf,HighlightStyle:tx,SeriesTooltip:ex,Validate:dt,COLOR_STRING:ix,FUNCTION:sx,NUMBER:kl,OBJECT:di,POSITIVE_NUMBER:Cl,RATIO:Is,STRING:Ds}=qf,ve=class extends tx{constructor(){super(...arguments),this.label=new Wt,this.secondaryLabel=new Wt}};h([dt(Ds,{optional:!0})],ve.prototype,"fill",2),h([dt(Is,{optional:!0})],ve.prototype,"fillOpacity",2),h([dt(ix,{optional:!0})],ve.prototype,"stroke",2),h([dt(Cl,{optional:!0})],ve.prototype,"strokeWidth",2),h([dt(Is,{optional:!0})],ve.prototype,"strokeOpacity",2),h([dt(di)],ve.prototype,"label",2),h([dt(di)],ve.prototype,"secondaryLabel",2);var Ct=class extends Jf{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.highlightStyle=new ve,this.label=new Wt,this.secondaryLabel=new fs,this.tooltip=new ex}};h([dt(Ds,{optional:!0})],Ct.prototype,"sizeName",2),h([dt(Ds,{optional:!0})],Ct.prototype,"labelKey",2),h([dt(Ds,{optional:!0})],Ct.prototype,"secondaryLabelKey",2),h([dt(Is)],Ct.prototype,"fillOpacity",2),h([dt(Cl)],Ct.prototype,"strokeWidth",2),h([dt(Is)],Ct.prototype,"strokeOpacity",2),h([dt(kl,{optional:!0})],Ct.prototype,"sectorSpacing",2),h([dt(kl,{optional:!0})],Ct.prototype,"padding",2),h([dt(sx,{optional:!0})],Ct.prototype,"formatter",2),h([dt(di)],Ct.prototype,"highlightStyle",2),h([dt(di)],Ct.prototype,"label",2),h([dt(di)],Ct.prototype,"secondaryLabel",2),h([dt(di)],Ct.prototype,"tooltip",2);var{fromToMotion:ox}=Rl,{Sector:qo,Group:wl,Selection:Pl,Text:Pi}=$f,{sanitizeHtml:Jo}=Zf,zl=(s,t=0,e=2*Math.PI/s.sumSize,i=Array.from(s,()=>{}))=>{let o=t;for(const a of s.children){const n=o,r=o+a.sumSize*e;i[a.index]={start:n,end:r},zl(a,n,e,i),o=r}return i},ta=class rc extends Rl.HierarchySeries{constructor(){super(...arguments),this.properties=new Ct,this.groupSelection=Pl.select(this.contentGroup,wl),this.highlightSelection=Pl.select(this.highlightGroup,wl),this.angleData=[]}processData(){return C(this,null,function*(){const{childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:a,sizeKey:n,sizeName:r}=this.properties;Ht(rc.prototype,this,"processData").call(this),this.angleData=zl(this.rootNode);const l=c=>typeof c=="number"?c.toFixed(2):typeof c=="string"?c:"";this.labelData=Array.from(this.rootNode,({datum:c,depth:d})=>{let u;if(c!=null&&d!=null&&o!=null){const g=c[o];u=this.getLabelText(this.properties.label,{depth:d,datum:c,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:a,sizeKey:n,sizeName:r,value:g},l)}u===""&&(u=void 0);let p;if(c!=null&&d!=null&&a!=null){const g=c[a];p=this.getLabelText(this.properties.secondaryLabel,{depth:d,datum:c,childrenKey:t,colorKey:e,colorName:i,labelKey:o,secondaryLabelKey:a,sizeKey:n,sizeName:r,value:g},l)}return p===""&&(p=void 0),u!=null||p!=null?{label:u,secondaryLabel:p}:void 0})})}updateSelections(){return C(this,null,function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const i=Array.from(this.rootNode),o=a=>{a.append([new qo,new Pi({tag:0}),new Pi({tag:1})])};this.groupSelection.update(i,o,a=>this.getDatumId(a)),this.highlightSelection.update(i,o,a=>this.getDatumId(a))})}updateNodes(){return C(this,null,function*(){var t;const{chart:e,data:i,maxDepth:o,labelData:a}=this;if(e==null||i==null||a==null)return;const{width:n,height:r}=e.seriesRect,{sectorSpacing:l=0,padding:c=0,highlightStyle:d}=this.properties;this.contentGroup.translationX=n/2,this.contentGroup.translationY=r/2,this.highlightGroup.translationX=n/2,this.highlightGroup.translationY=r/2;const u=l*.5,g=Math.min(n,r)/2/(o+1),f=-Math.PI/2,m=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight();new Pi().setFont(this.properties.label),this.rootNode.walk(x=>{const S=this.angleData[x.index];if(x.depth!=null&&S!=null){const I=S.end-S.start,D=(x.depth+.5)*g;x.midPoint.x=Math.cos(I)*D,x.midPoint.y=Math.sin(I)*D}});const M=(x,S,I)=>{var D,b,L,N,E,T,_,O,z,P;const{depth:k}=x,R=this.angleData[x.index];if(k==null||R==null){S.visible=!1;return}S.visible=!0;let B,w,U,Y,V;I&&(B=d.fill,w=d.fillOpacity,U=d.stroke,Y=d.strokeWidth,V=d.strokeOpacity);const F=this.getSectorFormat(x,I),et=(b=(D=F?.fill)!=null?D:B)!=null?b:x.fill,W=(N=(L=F?.fillOpacity)!=null?L:w)!=null?N:this.properties.fillOpacity,Z=(T=(E=F?.stroke)!=null?E:U)!=null?T:x.stroke,at=(O=(_=F?.strokeWidth)!=null?_:Y)!=null?O:this.properties.strokeWidth,ot=(P=(z=F?.strokeOpacity)!=null?z:V)!=null?P:this.properties.strokeOpacity;S.fill=et,S.fillOpacity=W,S.stroke=Z,S.strokeWidth=at,S.strokeOpacity=ot,S.centerX=0,S.centerY=0,S.innerRadius=k*g,S.outerRadius=(k+1)*g,S.angleOffset=f,S.startAngle=R.start,S.endAngle=R.end,S.inset=u+at*.5};this.groupSelection.selectByClass(qo).forEach(x=>{M(x.datum,x,!1)}),this.highlightSelection.selectByClass(qo).forEach(x=>{const S=x.datum,I=m===S;x.visible=I,x.visible&&M(x.datum,x,I)});const v=Array.from(this.rootNode,(x,S)=>{const{depth:I}=x,D=a[S],b=this.angleData[S];if(I==null||b==null)return;const L=I*g+u,N=(I+1)*g-u,E=L>u?u/L:u,T=N>u?u/N:u,_=b.start+E,z=b.end+E-_,P=b.start+T,R=b.end+T-P,B=G=>{var nt;if(I===0&&((nt=x.parent)==null?void 0:nt.sumSize)===x.sumSize)return{width:2*Math.sqrt(yt(N,2)-yt(G*.5,2)),height:G,meta:0};const bt=G,Lt=2*Math.sqrt(yt(N,2)-yt(L+bt,2)),wt=z<Math.PI?2*L*Math.tan(z*.5):1/0,le=Math.min(Lt,wt);let Pt,jt;return I===0?(Pt=G,jt=Math.sqrt(yt(N,2)-yt(Pt/2,2))-G/(2*Math.tan(R*.5))):(Pt=2*L*Math.tan(z*.5),jt=Math.sqrt(yt(N,2)-yt(Pt/2,2))-L),le>=jt?{width:le,height:bt,meta:1}:{width:jt,height:Pt,meta:2}},w=bo(D?.label,this.properties.label,D?.secondaryLabel,this.properties.secondaryLabel,{padding:c},B);if(w==null)return;const{width:U,height:Y,meta:V,label:F,secondaryLabel:et}=w,W=f+(b.start+b.end)/2,Z=Math.sin(W)>=0,at=Math.cos(W)>=0,ot=(Z?3:12)&(at?6:9);let q;switch(V){case 0:q=0;break;case 1:{const nt=N-(g-Y)*.58,it=Math.sqrt(yt(N-c,2)-yt(U/2,2));q=Math.min(nt,it);break}case 2:if(I===0){const G=Y/(2*Math.tan(z*.5))+U*.5,nt=Math.sqrt(yt(N,2)-yt(Y*.5,2))-U*.5;q=(G+nt)*.5}else q=(L+N)*.5;break}return{width:U,height:Y,labelPlacement:V,circleQuarter:ot,radius:q,theta:W,label:F,secondaryLabel:et}}),A=(x,S,I,D)=>{const{index:b,depth:L}=x,N=v?.[b],E=I===0?this.properties.label:this.properties.secondaryLabel,T=I===0?N?.label:N?.secondaryLabel;if(L==null||N==null||T==null){S.visible=!1;return}const{height:_,labelPlacement:O,circleQuarter:z,radius:P,theta:k}=N;let R;switch(D&&(R=(I===0?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),S.text=T.text,S.fontSize=T.fontSize,S.lineHeight=T.lineHeight,S.fontStyle=E.fontStyle,S.fontFamily=E.fontFamily,S.fontWeight=E.fontWeight,S.fill=R??E.color,O){case 0:S.textAlign="center",S.textBaseline="top",S.translationX=0,S.translationY=(I===0?0:_-T.height)-_*.5,S.rotation=0;break;case 1:{const B=(z&3)!==0,w=I===0==!B?P:P-(_-T.height);S.textAlign="center",S.textBaseline=B?"bottom":"top",S.translationX=Math.cos(k)*w,S.translationY=Math.sin(k)*w,S.rotation=B?k-Math.PI*.5:k+Math.PI*.5;break}case 2:{const B=(z&6)!==0,w=I===0==!B?(_-T.height)*.5:(T.height-_)*.5;S.textAlign="center",S.textBaseline="middle",S.translationX=Math.cos(k)*P+Math.cos(k+Math.PI/2)*w,S.translationY=Math.sin(k)*P+Math.sin(k+Math.PI/2)*w,S.rotation=B?k:k+Math.PI;break}}S.visible=!0};this.groupSelection.selectByClass(Pi).forEach(x=>{A(x.datum,x,x.tag,!1)}),this.highlightSelection.selectByClass(Pi).forEach(x=>{const S=x.datum,I=m===S;x.visible=I,x.visible&&A(x.datum,x,x.tag,I)})})}getSectorFormat(t,e){const{datum:i,fill:o,stroke:a,depth:n}=t,{ctx:{callbackCache:r},properties:{formatter:l}}=this;if(!l||i==null||n==null)return{};const{colorKey:c,labelKey:d,sizeKey:u,strokeWidth:p}=this.properties,g=r.call(l,{seriesId:this.id,depth:n,datum:i,colorKey:c,labelKey:d,sizeKey:u,fill:o,stroke:a,strokeWidth:p,highlighted:e});return g??{}}getTooltipHtml(t){var e;const{id:i}=this,{tooltip:o,colorKey:a,colorName:n=a,labelKey:r,secondaryLabelKey:l,sizeKey:c,sizeName:d=c}=this.properties,{datum:u,depth:p}=t;if(u==null||p==null)return"";const g=r!=null?u[r]:void 0,f=this.getSectorFormat(t,!1),m=(e=f?.fill)!=null?e:t.fill;if(!o.renderer&&!g)return"";const y=[],M=l!=null?u[l]:void 0;M!=null&&l!==a&&l!==c&&y.push(Jo(M));const v=c!=null?u[c]:void 0;v!=null&&y.push(`${d}: ${Jo(v)}`);const A=a!=null?u[a]:void 0;A!=null&&y.push(`${n}: ${Jo(A)}`);const x=y.join("<br>"),S={title:g,color:this.properties.label.color,backgroundColor:m,content:x};return o.toTooltipHtml(S,{depth:p,datum:u,colorKey:a,labelKey:r,secondaryLabelKey:l,sizeKey:c,title:g,color:m,seriesId:i})}createNodeData(){return C(this,null,function*(){return[]})}animateEmptyUpdateReady({datumSelections:t}){ox(this.id,"nodes",this.ctx.animationManager,t,{toFn(e,i,o){return{scalingX:1,scalingY:1}},fromFn(e,i,o){return o==="unknown"&&i!=null&&e.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}})}};ta.className="SunburstSeries",ta.type="sunburst";var ax=ta,{EXTENDS_SERIES_DEFAULTS:nx,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Ns}=Ol,rx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:ax,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:nx,label:{fontSize:14,minimumFontSize:9,color:Ns,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:Ns,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:Ns},secondaryLabel:{color:Ns},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:s,colorsCount:t,themeTemplateParameters:e})=>{const{properties:i}=e,{fills:o,strokes:a}=s(t),n=i.get(Ol.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE);return{fills:o,strokes:a,colorRange:n}}};import{_Theme as lx}from"ag-charts-community";import{_ModuleSupport as cx,_Scene as hx,_Util as dx}from"ag-charts-community";import{_ModuleSupport as ux,_Scene as px}from"ag-charts-community";var{Label:gx}=px,{BaseProperties:bs,HierarchySeriesProperties:yx,HighlightStyle:mx,SeriesTooltip:fx,Validate:j,BOOLEAN:xx,COLOR_STRING:Ts,FUNCTION:Sx,NUMBER:Mx,OBJECT:Ut,POSITIVE_NUMBER:Ae,RATIO:Ie,STRING:Ue,STRING_ARRAY:Bl,TEXT_ALIGN:jl,VERTICAL_ALIGN:vx}=ux,Fl=class extends gx{constructor(){super(...arguments),this.spacing=0}};h([j(Mx)],Fl.prototype,"spacing",2);var Xt=class extends bs{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new Fl}};h([j(Ue,{optional:!0})],Xt.prototype,"fill",2),h([j(Ie)],Xt.prototype,"fillOpacity",2),h([j(Ts,{optional:!0})],Xt.prototype,"stroke",2),h([j(Ae)],Xt.prototype,"strokeWidth",2),h([j(Ie)],Xt.prototype,"strokeOpacity",2),h([j(jl)],Xt.prototype,"textAlign",2),h([j(Ae)],Xt.prototype,"gap",2),h([j(Ae)],Xt.prototype,"padding",2),h([j(xx)],Xt.prototype,"interactive",2),h([j(Ut)],Xt.prototype,"label",2);var Vt=class extends bs{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Wt,this.secondaryLabel=new fs}};h([j(Ue,{optional:!0})],Vt.prototype,"fill",2),h([j(Ie)],Vt.prototype,"fillOpacity",2),h([j(Ts,{optional:!0})],Vt.prototype,"stroke",2),h([j(Ae,{optional:!0})],Vt.prototype,"strokeWidth",2),h([j(Ie)],Vt.prototype,"strokeOpacity",2),h([j(jl)],Vt.prototype,"textAlign",2),h([j(vx)],Vt.prototype,"verticalAlign",2),h([j(Ae)],Vt.prototype,"gap",2),h([j(Ae)],Vt.prototype,"padding",2),h([j(Ut)],Vt.prototype,"label",2),h([j(Ut)],Vt.prototype,"secondaryLabel",2);var Ve=class extends bs{constructor(){super(...arguments),this.label=new Wt}};h([j(Ue,{optional:!0})],Ve.prototype,"fill",2),h([j(Ie,{optional:!0})],Ve.prototype,"fillOpacity",2),h([j(Ts,{optional:!0})],Ve.prototype,"stroke",2),h([j(Ae,{optional:!0})],Ve.prototype,"strokeWidth",2),h([j(Ie,{optional:!0})],Ve.prototype,"strokeOpacity",2),h([j(Ut)],Ve.prototype,"label",2);var De=class extends bs{constructor(){super(...arguments),this.label=new Wt,this.secondaryLabel=new fs}};h([j(Ue,{optional:!0})],De.prototype,"fill",2),h([j(Ie,{optional:!0})],De.prototype,"fillOpacity",2),h([j(Ts,{optional:!0})],De.prototype,"stroke",2),h([j(Ae,{optional:!0})],De.prototype,"strokeWidth",2),h([j(Ie,{optional:!0})],De.prototype,"strokeOpacity",2),h([j(Ut)],De.prototype,"label",2),h([j(Ut)],De.prototype,"secondaryLabel",2);var ea=class extends mx{constructor(){super(...arguments),this.group=new Ve,this.tile=new De}};h([j(Ut)],ea.prototype,"group",2),h([j(Ut)],ea.prototype,"tile",2);var Qt=class extends yx{constructor(){super(...arguments),this.highlightStyle=new ea,this.tooltip=new fx,this.group=new Xt,this.tile=new Vt,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};h([j(Ue,{optional:!0})],Qt.prototype,"sizeName",2),h([j(Ue,{optional:!0})],Qt.prototype,"labelKey",2),h([j(Ue,{optional:!0})],Qt.prototype,"secondaryLabelKey",2),h([j(Sx,{optional:!0})],Qt.prototype,"formatter",2),h([j(Ut)],Qt.prototype,"highlightStyle",2),h([j(Ut)],Qt.prototype,"tooltip",2),h([j(Ut)],Qt.prototype,"group",2),h([j(Ut)],Qt.prototype,"tile",2),h([j(Bl)],Qt.prototype,"undocumentedGroupFills",2),h([j(Bl)],Qt.prototype,"undocumentedGroupStrokes",2);var{Rect:ia,Group:Ul,BBox:_s,Selection:Vl,Text:ui}=hx,{Color:Ax,Logger:Ix,isEqual:Dx,sanitizeHtml:sa}=dx,Yl=new ui;function Nx(s,t){const{fontStyle:e,fontWeight:i,fontSize:o,fontFamily:a}=t;Yl.setProperties({text:s,fontStyle:e,fontWeight:i,fontSize:o,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:n,height:r}=Yl.computeBBox();return{width:n,height:r}}function Hl(s){if(typeof s=="string"&&!Ax.validColorString(s)){const t="black";return Ix.warnOnce(`invalid Treemap tile colour string "${s}". Affected treemap tiles will be coloured ${t}.`),t}return s}function Ne(s){return s.children.length>0?s.sumSize-s.size:s.size}var Gl={left:0,center:.5,right:1},bx={top:0,middle:.5,bottom:1},oa=class lc extends cx.HierarchySeries{constructor(){super(...arguments),this.properties=new Qt,this.groupSelection=Vl.select(this.contentGroup,Ul),this.highlightSelection=Vl.select(this.highlightGroup,Ul)}groupTitleHeight(t,e){var i,o;const a=(o=(i=this.labelData)==null?void 0:i[t.index])==null?void 0:o.label,{label:n}=this.properties.group,r=3;if(a!=null){if(n.fontSize>e.width/r||n.fontSize>e.height/r)return;{const{height:l}=Nx(a,n);return Math.max(l,n.fontSize)}}}getNodePadding(t,e){if(t.index===0)return{top:0,right:0,bottom:0,left:0};if(t.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:i},padding:o}=this.properties.group,a=this.groupTitleHeight(t,e),n=a!=null?a+i:0;return{top:o+n,right:o,bottom:o,left:o}}processData(){return C(this,null,function*(){var t;yield Ht(lc.prototype,this,"processData").call(this);const{childrenKey:e,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,tile:c,group:d}=this.properties;if(!((t=this.data)!=null&&t.length)){this.labelData=void 0;return}const u=p=>typeof p=="number"?p.toFixed(2):typeof p=="string"?p:"";this.labelData=Array.from(this.rootNode,({datum:p,depth:g,children:f})=>{const m=f.length===0,y=m?c.label:d.label;let M;if(p!=null&&g!=null&&a!=null){const A=p[a];M=this.getLabelText(y,{depth:g,datum:p,childrenKey:e,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:A},u)}M===""&&(M=void 0);let v;if(m&&p!=null&&g!=null&&n!=null){const A=p[n];v=this.getLabelText(c.secondaryLabel,{depth:g,datum:p,childrenKey:e,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:A},u)}return v===""&&(v=void 0),M!=null||v!=null?{label:M,secondaryLabel:v}:void 0})})}squarify(t,e,i){const{index:o,datum:a,children:n}=t;if(e.width<=0||e.height<=0){i[o]=void 0;return}i[o]=o!==0?e:void 0;const r=Array.from(n,(D,b)=>b).filter(D=>Ne(n[D])>0).sort((D,b)=>Ne(n[b])-Ne(n[D])),l=D=>{const b=r[D];return n[b]},c=r.every(D=>n[D].children.length===0),d=1,u=a!=null?this.getNodePadding(t,e):{top:0,right:0,bottom:0,left:0},p=e.width-u.left-u.right,g=e.height-u.top-u.bottom;if(p<=0||g<=0)return;const f=r.length;let m=0,y=0,M=1/0,v=r.reduce((D,b)=>D+Ne(n[b]),0);const A=new _s(e.x+u.left,e.y+u.top,p,g),x=A.clone();for(let D=0;D<f;D++){const b=Ne(l(D)),L=Ne(l(y)),N=x.width<x.height;m+=b;const E=N?x.height:x.width,T=N?x.width:x.height,_=T*L/m;let O=E*m/v;const z=Math.max(_,O)/Math.min(_,O),P=Math.abs(d-z);if(P<M){M=P;continue}m-=b,O=E*m/v;let k=N?x.x:x.y;for(let R=y;R<D;R++){const B=l(R),w=Ne(B),U=N?k:x.x,Y=N?x.y:k,V=T*w/m,F=N?V:O,et=N?O:V,W=new _s(U,Y,F,et);this.applyGap(A,W,c),this.squarify(B,W,i),v-=w,k+=V}N?(x.y+=O,x.height-=O):(x.x+=O,x.width-=O),y=D,m=0,M=1/0,D--}const S=x.width<x.height;let I=S?x.x:x.y;for(let D=y;D<f;D++){const b=l(D),L=S?I:x.x,N=S?x.y:I,E=Ne(b)/v,T=x.width*(S?E:1),_=x.height*(S?1:E),O=new _s(L,N,T,_);this.applyGap(A,O,c),this.squarify(b,O,i),I+=S?T:_}}applyGap(t,e,i){const o=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,a=c=>({left:c.x,top:c.y,right:c.x+c.width,bottom:c.y+c.height}),n=a(t),r=a(e);["top","right","bottom","left"].forEach(c=>{Dx(n[c],r[c])||e.shrink(o,c)})}createNodeData(){return C(this,null,function*(){return[]})}updateSelections(){return C(this,null,function*(){var t;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:e}=(t=this.chart)!=null?t:{};if(!e)return;const i=Array.from(this.rootNode),o=a=>{a.append([new ia,new ui({tag:0}),new ui({tag:1})])};this.groupSelection.update(i,o,a=>this.getDatumId(a)),this.highlightSelection.update(i,o,a=>this.getDatumId(a))})}getTileFormat(t,e){var i,o;const{datum:a,depth:n,children:r}=t,{colorKey:l,labelKey:c,secondaryLabelKey:d,sizeKey:u,tile:p,group:g,formatter:f}=this.properties;if(!f||a==null||n==null)return{};const m=r.length===0,y=(i=m?p.fill:g.fill)!=null?i:t.fill,M=(o=m?p.stroke:g.stroke)!=null?o:t.stroke,v=m?p.strokeWidth:g.strokeWidth,A=this.ctx.callbackCache.call(f,{seriesId:this.id,depth:n,datum:a,colorKey:l,labelKey:c,secondaryLabelKey:d,sizeKey:u,fill:y,stroke:M,strokeWidth:v,highlighted:e});return A??{}}getNodeFill(t){var e,i,o;if(t.children.length===0)return(e=this.properties.tile.fill)!=null?e:t.fill;const{undocumentedGroupFills:n}=this.properties,r=n[Math.min((i=t.depth)!=null?i:0,n.length)];return(o=this.properties.group.fill)!=null?o:r}getNodeStroke(t){var e,i,o;if(t.children.length===0)return(e=this.properties.tile.stroke)!=null?e:t.stroke;const{undocumentedGroupStrokes:n}=this.properties,r=n[Math.min((i=t.depth)!=null?i:0,n.length)];return(o=this.properties.group.stroke)!=null?o:r}updateNodes(){return C(this,null,function*(){var t,e;const{rootNode:i,data:o}=this,{highlightStyle:a,tile:n,group:r}=this.properties,{seriesRect:l}=(t=this.chart)!=null?t:{};if(!l||!o)return;const{width:c,height:d}=l,u=Array.from(this.rootNode,()=>{});this.squarify(i,new _s(0,0,c,d),u);let p=(e=this.ctx.highlightManager)==null?void 0:e.getActiveHighlight();p!=null&&!this.properties.group.interactive&&p.children.length!==0&&(p=void 0),this.updateNodeMidPoint(u);const g=(y,M,v)=>{var A,x,S,I,D,b,L,N,E,T;const _=u[y.index];if(_==null){M.visible=!1;return}const O=y.children.length===0;let z,P,k,R,B;if(v){const{tile:W,group:Z}=a;z=O?W.fill:Z.fill,P=O?W.fillOpacity:Z.fillOpacity,k=O?W.stroke:Z.stroke,R=O?W.strokeWidth:Z.strokeWidth,B=O?W.strokeOpacity:Z.strokeOpacity}const w=this.getTileFormat(y,v),U=(x=(A=w?.fill)!=null?A:z)!=null?x:this.getNodeFill(y),Y=(I=(S=w?.fillOpacity)!=null?S:P)!=null?I:O?n.fillOpacity:r.fillOpacity,V=(b=(D=w?.stroke)!=null?D:k)!=null?b:this.getNodeStroke(y),F=(N=(L=w?.strokeWidth)!=null?L:R)!=null?N:O?n.strokeWidth:r.strokeWidth,et=(T=(E=w?.strokeOpacity)!=null?E:B)!=null?T:O?n.strokeOpacity:r.strokeOpacity;M.fill=Hl(U),M.fillOpacity=Y,M.stroke=Hl(V),M.strokeWidth=F,M.strokeOpacity=et,M.crisp=!0,M.x=_.x,M.y=_.y,M.width=_.width,M.height=_.height,M.visible=!0};this.groupSelection.selectByClass(ia).forEach(y=>g(y.datum,y,!1)),this.highlightSelection.selectByClass(ia).forEach(y=>{var M;const v=y.datum===p;y.visible=v||((M=p?.contains(y.datum))!=null?M:!1),y.visible&&g(y.datum,y,v)});const f=Array.from(this.rootNode,y=>{var M,v,A,x;const{index:S,children:I}=y,D=u[S],b=(M=this.labelData)==null?void 0:M[S];if(!(D==null||b==null))if(I.length===0){const L={width:D.width,height:D.height,meta:null},N=bo(b.label,this.properties.tile.label,b.secondaryLabel,this.properties.tile.secondaryLabel,{padding:n.padding},()=>L);if(N==null)return;const{height:E,label:T,secondaryLabel:_}=N,{textAlign:O,verticalAlign:z,padding:P}=n,k=(v=Gl[O])!=null?v:.5,R=D.x+P+(D.width-2*P)*k,B=(A=bx[z])!=null?A:.5,w=D.y+P+E*.5+(D.height-2*P-E)*B;return{label:T!=null?{text:T.text,fontSize:T.fontSize,lineHeight:T.lineHeight,style:this.properties.tile.label,x:R,y:w-(E-T.height)*.5}:void 0,secondaryLabel:_!=null?{text:_.text,fontSize:_.fontSize,lineHeight:_.fontSize,style:this.properties.tile.secondaryLabel,x:R,y:w+(E-_.height)*.5}:void 0,verticalAlign:"middle",textAlign:O}}else if(b?.label!=null){const{padding:L,textAlign:N}=r,E=this.groupTitleHeight(y,D);if(E==null)return;const T=D.width-2*L,{text:_}=ui.wrap(b.label,D.width-2*L,1/0,r.label,"never"),O=(x=Gl[N])!=null?x:.5;return{label:{text:_,fontSize:r.label.fontSize,lineHeight:Wt.lineHeight(r.label.fontSize),style:this.properties.group.label,x:D.x+L+T*O,y:D.y+L+E*.5},secondaryLabel:void 0,verticalAlign:"middle",textAlign:N}}else return}),m=(y,M,v,A)=>{const x=y.children.length===0,S=f[y.index],I=v===0?S?.label:S?.secondaryLabel;if(S==null||I==null){M.visible=!1;return}let D;if(A){const{tile:b,group:L}=a;D=x?v===0?b.label.color:b.secondaryLabel.color:L.label.color}M.text=I.text,M.fontSize=I.fontSize,M.lineHeight=I.lineHeight,M.fontStyle=I.style.fontStyle,M.fontFamily=I.style.fontFamily,M.fontWeight=I.style.fontWeight,M.fill=D??I.style.color,M.textAlign=S.textAlign,M.textBaseline=S.verticalAlign,M.x=I.x,M.y=I.y,M.visible=!0};this.groupSelection.selectByClass(ui).forEach(y=>{m(y.datum,y,y.tag,!1)}),this.highlightSelection.selectByClass(ui).forEach(y=>{var M;const v=y.datum===p;y.visible=v||((M=p?.contains(y.datum))!=null?M:!1),y.visible&&m(y.datum,y,y.tag,v)})})}updateNodeMidPoint(t){this.rootNode.walk(e=>{const i=t[e.index];i!=null&&(e.midPoint.x=i.x+i.width/2,e.midPoint.y=i.y)})}getTooltipHtml(t){var e;const{datum:i,depth:o}=t,{id:a}=this,{tooltip:n,colorKey:r,colorName:l=r,labelKey:c,secondaryLabelKey:d,sizeKey:u,sizeName:p=u}=this.properties,g=t.children.length===0,f=g||this.properties.group.interactive;if(i==null||o==null||!f)return"";const m=c!=null?i[c]:void 0,y=this.getTileFormat(t,!1),M=(e=y?.fill)!=null?e:this.getNodeFill(t);if(!n.renderer&&!m)return"";const v=[],A=d!=null?i[d]:void 0;A!=null&&d!==r&&d!==u&&v.push(sa(A));const x=u!=null?i[u]:void 0;x!=null&&v.push(`${p}: ${sa(x)}`);const S=r!=null?i[r]:void 0;S!=null&&v.push(`${l}: ${sa(S)}`);const I=v.join("<br>"),D={title:m,color:g?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:M,content:I};return n.toTooltipHtml(D,{depth:o,datum:i,colorKey:r,labelKey:c,secondaryLabelKey:d,sizeKey:u,title:m,color:M,seriesId:a})}};oa.className="TreemapSeries",oa.type="treemap";var Tx=oa,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:_x,DEFAULT_FONT_FAMILY:aa,DEFAULT_HIERARCHY_FILLS:Ex,DEFAULT_HIERARCHY_STROKES:Lx,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Es,EXTENDS_SERIES_DEFAULTS:Ox,DEFAULT_LABEL_COLOUR:Kl,FONT_WEIGHT:Wl}=lx,Rx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:Tx,seriesDefaults:{},solo:!0,themeTemplate:{series:{__extends__:Ox,group:{label:{enabled:!0,color:Kl,fontStyle:void 0,fontWeight:Wl.NORMAL,fontSize:12,fontFamily:aa,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:Es,fontStyle:void 0,fontWeight:Wl.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:aa,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:Es,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:aa,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:Kl},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:Es},secondaryLabel:{color:Es},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:({takeColors:s,colorsCount:t,themeTemplateParameters:e})=>{const{properties:i}=e,{fills:o,strokes:a}=s(t),n=i.get(_x),r=i.get(Ex),l=i.get(Lx);return{fills:o,strokes:a,colorRange:n,undocumentedGroupFills:r,undocumentedGroupStrokes:l}}};import{_Theme as Ye}from"ag-charts-community";import{_ModuleSupport as He,_Scene as Xl,_Util as kx}from"ag-charts-community";import{_ModuleSupport as Cx,_Scene as wx}from"ag-charts-community";var{DropShadow:Px,Label:zx}=wx,{AbstractBarSeriesProperties:Bx,BaseProperties:zi,PropertiesArray:jx,SeriesTooltip:Fx,Validate:H,BOOLEAN:Ux,COLOR_STRING:na,FUNCTION:Ql,LINE_DASH:$l,NUMBER:Vx,OBJECT:ne,OBJECT_ARRAY:Yx,POSITIVE_NUMBER:pi,RATIO:ra,STRING:gi,UNION:Zl}=Cx,Ls=class extends zi{};h([H(Zl(["subtotal","total"],"a total type"))],Ls.prototype,"totalType",2),h([H(Vx)],Ls.prototype,"index",2),h([H(gi)],Ls.prototype,"axisLabel",2);var ql=class extends zi{};h([H(Ql,{optional:!0})],ql.prototype,"renderer",2);var la=class extends zx{constructor(){super(...arguments),this.placement="end",this.padding=6}};h([H(Zl(["start","end","inside"],"a placement"))],la.prototype,"placement",2),h([H(pi)],la.prototype,"padding",2);var Nt=class extends zi{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Px().set({enabled:!1}),this.label=new la,this.tooltip=new ql}};h([H(gi,{optional:!0})],Nt.prototype,"name",2),h([H(na)],Nt.prototype,"fill",2),h([H(na)],Nt.prototype,"stroke",2),h([H(ra)],Nt.prototype,"fillOpacity",2),h([H(ra)],Nt.prototype,"strokeOpacity",2),h([H($l)],Nt.prototype,"lineDash",2),h([H(pi)],Nt.prototype,"lineDashOffset",2),h([H(pi)],Nt.prototype,"strokeWidth",2),h([H(pi)],Nt.prototype,"cornerRadius",2),h([H(Ql,{optional:!0})],Nt.prototype,"formatter",2),h([H(ne)],Nt.prototype,"shadow",2),h([H(ne)],Nt.prototype,"label",2),h([H(ne)],Nt.prototype,"tooltip",2);var Ge=class extends zi{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};h([H(Ux)],Ge.prototype,"enabled",2),h([H(na)],Ge.prototype,"stroke",2),h([H(ra)],Ge.prototype,"strokeOpacity",2),h([H($l)],Ge.prototype,"lineDash",2),h([H(pi)],Ge.prototype,"lineDashOffset",2),h([H(pi)],Ge.prototype,"strokeWidth",2);var Os=class extends zi{constructor(){super(...arguments),this.positive=new Nt,this.negative=new Nt,this.total=new Nt}};h([H(ne)],Os.prototype,"positive",2),h([H(ne)],Os.prototype,"negative",2),h([H(ne)],Os.prototype,"total",2);var re=class extends Bx{constructor(){super(...arguments),this.item=new Os,this.totals=new jx(Ls),this.line=new Ge,this.tooltip=new Fx}};h([H(gi)],re.prototype,"xKey",2),h([H(gi)],re.prototype,"yKey",2),h([H(gi,{optional:!0})],re.prototype,"xName",2),h([H(gi,{optional:!0})],re.prototype,"yName",2),h([H(ne)],re.prototype,"item",2),h([H(Yx)],re.prototype,"totals",2),h([H(ne)],re.prototype,"line",2),h([H(ne)],re.prototype,"tooltip",2);var{adjustLabelPlacement:Hx,SeriesNodePickMode:Gx,fixNumericExtent:ca,valueProperty:Jl,keyProperty:Kx,accumulativeValueProperty:Rs,trailingAccumulatedValueProperty:Wx,ChartAxisDirection:Ke,getRectConfig:Xx,updateRect:Qx,checkCrisp:$x,updateLabelNode:Zx,prepareBarAnimationFunctions:qx,collapsedStartingBarPosition:Jx,resetBarSelectionsFn:tS,seriesLabelFadeInAnimation:eS,resetLabelFn:iS,animationValidation:sS}=He,{ContinuousScale:tc,Rect:oS,motion:aS}=Xl,{sanitizeHtml:Bi,isContinuous:ec,isNumber:nS}=kx,ha=class cc extends He.AbstractBarSeries{constructor(t){super({moduleCtx:t,pickModes:[Gx.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:tS,label:iS}}),this.properties=new re,this.seriesItemTypes=new Set(["positive","negative","total"]),this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===Ke.X?t===Ke.X?Ke.Y:Ke.X:t}processData(t){return C(this,null,function*(){var e,i,o;const{xKey:a,yKey:n,totals:r}=this.properties,{data:l=[]}=this;if(!this.properties.isValid())return;const c=v=>ec(v)&&v>=0,d=v=>ec(v)&&v<0,u=v=>v==="total"||v==="subtotal",p={missingValue:void 0,invalidValue:void 0},g=[],f=r.reduce((v,A)=>{const x=v.get(A.index);return x?x.push(A):v.set(A.index,[A]),v},new Map);l.forEach((v,A)=>{var x;g.push(v),(x=f.get(A))==null||x.forEach(S=>g.push(_t(K({},S.toJson()),{[a]:S.axisLabel})))});const m=tc.is((e=this.getCategoryAxis())==null?void 0:e.scale),y=[];this.ctx.animationManager.isSkipped()||y.push(sS(this));const{processedData:M}=yield this.requestDataModel(t,g,{props:[Kx(this,a,m,{id:"xValue"}),Rs(this,n,!0,_t(K({},p),{id:"yCurrent"})),Rs(this,n,!0,_t(K({},p),{missingValue:0,id:"yCurrentTotal"})),Rs(this,n,!0,_t(K({},p),{id:"yCurrentPositive",validation:c})),Rs(this,n,!0,_t(K({},p),{id:"yCurrentNegative",validation:d})),Wx(this,n,!0,_t(K({},p),{id:"yPrevious"})),Jl(this,n,!0,{id:"yRaw"}),Jl(this,"totalType",!1,{id:"totalTypeValue",missingValue:void 0,validation:u}),...m?[He.SMALLEST_KEY_INTERVAL]:[],...y],dataVisible:this.visible});this.smallestDataInterval={x:(o=(i=M.reduced)==null?void 0:i.smallestKeyInterval)!=null?o:1/0,y:1/0},this.updateSeriesItemTypes(),this.animationState.transition("updateData")})}getSeriesDomain(t){var e;const{processedData:i,dataModel:o}=this;if(!(i&&o))return[];const{domain:{keys:[a],values:n},reduced:{[He.SMALLEST_KEY_INTERVAL.property]:r}={}}=i,l=o.resolveProcessedDataDefById(this,"xValue");if(t===this.getCategoryDirection()){if(l?.def.type==="key"&&l?.def.valueType==="category")return a;const c=r!=null&&isFinite(r)?r:0,d=(e=He.extent(a))!=null?e:[NaN,NaN],u=this.getCategoryAxis(),p=u?.isReversed();if(t===Ke.Y){const m=d[0]+(p?0:-c),y=d[1]+(p?c:0);return ca([m,y],u)}const g=d[0]+(p?-c:0),f=d[1]+(p?0:c);return ca([g,f],u)}else{const c=o.resolveProcessedDataIndexById(this,"yCurrent").index,d=n[c],u=[d[0]>0?0:d[0],d[1]<0?0:d[1]];return ca(u)}}createNodeData(){return C(this,null,function*(){var t,e,i;const{data:o,dataModel:a,smallestDataInterval:n}=this,{visible:r,line:l}=this.properties,c=this.getCategoryAxis(),d=this.getValueAxis();if(!(o&&r&&c&&d&&a))return[];const u=c.scale,p=d.scale,g=c.isReversed(),f=this.getBarDirection()===Ke.X,m=(t=tc.is(u)?u.calcBandwidth(n?.x):u.bandwidth)!=null?t:10;if(((e=this.processedData)==null?void 0:e.type)!=="ungrouped")return[];const y=[],M=a.resolveProcessedDataIndexById(this,"yRaw").index,v=a.resolveProcessedDataIndexById(this,"xValue").index,A=a.resolveProcessedDataIndexById(this,"totalTypeValue").index,x=new Map,S=[],I=a.resolveProcessedDataIndexById(this,"yCurrent").index,D=a.resolveProcessedDataIndexById(this,"yPrevious").index,b=a.resolveProcessedDataIndexById(this,"yCurrentTotal").index;function L(k,R,B){return k||R?{cumulativeValue:B[b],trailingValue:R?E:0}:{cumulativeValue:B[I],trailingValue:B[D]}}function N(k,R,B,w,U){return k?w:R?(w??0)-(U??0):B}let E=0;const{xKey:T,yKey:_,xName:O,yName:z}=this.properties;(i=this.processedData)==null||i.data.forEach(({keys:k,datum:R,values:B},w)=>{var U;const Y=B[A],V=this.isSubtotal(Y),F=this.isTotal(Y),et=F||V,W=k[v],Z=Math.round(u.convert(W)),at=B[M],{cumulativeValue:ot,trailingValue:q}=L(F,V,B);et&&(E=ot??0);const G=Math.round(p.convert(ot)),nt=Math.round(p.convert(q)),it=N(F,V,at,ot,q),bt=(it??0)>=0,Lt=this.getSeriesItemType(bt,Y),{fill:wt,stroke:le,strokeWidth:Pt,label:jt}=this.getItemConfig(Lt),ce=bt?G:nt,yi=bt?nt:G,Fi=Math.max(Pt,Math.abs(yi-ce)),he=Lt;let Jt=x.get(he);Jt===void 0&&(Jt=y.length,x.set(he,Jt)),(U=y[Jt])!=null||(y[Jt]={itemId:he,nodeData:[],labelData:[],pointData:[],scales:Ht(cc.prototype,this,"calculateScaling").call(this),visible:this.visible});const Tt={x:f?Math.min(ce,yi):Z,y:f?Z:Math.min(ce,yi),width:f?Fi:m,height:f?m:Fi},hc={x:Tt.x+Tt.width/2,y:Tt.y+Tt.height/2},fa=et?G:nt,Ui=Math.floor(l.strokeWidth)%2/2,xa=g?G:fa,Sa=g?fa:G;let We,Xe;f?(We={x:xa+Ui,y:Tt.y},Xe={x:Sa+Ui,y:Tt.y+Tt.height}):(We={x:Tt.x,y:xa+Ui},Xe={x:Tt.x+Tt.width,y:Sa+Ui});const dc={x:g?Xe.x:We.x,y:g?Xe.y:We.y,x2:g?We.x:Xe.x,y2:g?We.y:Xe.y,size:0};S.push(dc);const uc=this.getLabelText(jt,{itemId:he==="subtotal"?"total":he,value:it,datum:R,xKey:T,yKey:_,xName:O,yName:z},Cs=>nS(Cs)?Cs.toFixed(2):String(Cs)),Ma={index:w,series:this,itemId:he,datum:R,cumulativeValue:ot??0,xValue:W,yValue:it,yKey:_,xKey:T,x:Tt.x,y:Tt.y,width:Tt.width,height:Tt.height,midPoint:hc,fill:wt,stroke:le,strokeWidth:Pt,opacity:1,label:K({text:uc},Hx({isPositive:(it??-1)>=0,isVertical:!f,placement:jt.placement,padding:jt.padding,rect:Tt}))};y[Jt].nodeData.push(Ma),y[Jt].labelData.push(Ma)});const P=this.properties.line.enabled;return y.length>0&&I!==void 0&&P&&(y[0].pointData=S),y})}updateSeriesItemTypes(){var t,e;const{dataModel:i,seriesItemTypes:o,processedData:a}=this;if(!i||!a)return;o.clear();const n=i.resolveProcessedDataIndexById(this,"yCurrentPositive").index,r=i.resolveProcessedDataIndexById(this,"yCurrentNegative").index,l=i.resolveProcessedDataIndexById(this,"totalTypeValue").index,c=(t=a.domain.values[n])!=null?t:[],d=(e=a.domain.values[r])!=null?e:[];c.length>0&&o.add("positive"),d.length>0&&o.add("negative");const u=a?.domain.values[l];u&&u.forEach(p=>{(p==="total"||p==="subtotal")&&o.add("total")})}isSubtotal(t){return t==="subtotal"}isTotal(t){return t==="total"}nodeFactory(){return new oS}getSeriesItemType(t,e){return e??(t?"positive":"negative")}getItemConfig(t){switch(t){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(t){return C(this,null,function*(){const{nodeData:e,datumSelection:i}=t,o=e??[];return i.update(o)})}updateDatumNodes(t){return C(this,null,function*(){const{datumSelection:e,isHighlight:i}=t,{id:o,ctx:a}=this,{yKey:n,highlightStyle:{item:r}}=this.properties,l=this.getCategoryAxis(),c=$x(l?.visibleRange),d=this.getCategoryDirection()===Ke.X;e.each((u,p)=>{const g=p.itemId,{fillOpacity:f,strokeOpacity:m,strokeWidth:y,lineDash:M,lineDashOffset:v,cornerRadius:A,formatter:x,shadow:S}=this.getItemConfig(g),I={fill:p.fill,stroke:p.stroke,fillOpacity:f,strokeOpacity:m,lineDash:M,lineDashOffset:v,fillShadow:S,strokeWidth:this.getStrokeWidth(y),cornerRadius:A,cornerRadiusBbox:void 0},D=d?p.width>0:p.height>0,b=Xx({datum:p,isHighlighted:i,style:I,highlightStyle:r,formatter:x,seriesId:o,itemId:p.itemId,ctx:a,value:p.yValue,yKey:n});b.crisp=c,b.visible=D,Qx({rect:u,config:b})})})}updateLabelSelection(t){return C(this,null,function*(){const{labelData:e,labelSelection:i}=t;if(e.length===0)return i.update([]);const o=e[0].itemId,{label:a}=this.getItemConfig(o),n=a.enabled?e:[];return i.update(n)})}updateLabelNodes(t){return C(this,null,function*(){t.labelSelection.each((e,i)=>{Zx(e,this.getItemConfig(i.itemId).label,i.label)})})}getTooltipHtml(t){var e,i,o;const a=this.getCategoryAxis(),n=this.getValueAxis();if(!this.properties.isValid()||!a||!n)return"";const{id:r}=this,{xKey:l,yKey:c,xName:d,yName:u,tooltip:p}=this.properties,{datum:g,itemId:f,xValue:m,yValue:y}=t,{fill:M,strokeWidth:v,name:A,formatter:x}=this.getItemConfig(f);let S;x&&(S=this.ctx.callbackCache.call(x,{datum:g,value:y,xKey:l,yKey:c,fill:M,strokeWidth:v,highlighted:!1,seriesId:r,itemId:t.itemId}));const I=(i=(e=S?.fill)!=null?e:M)!=null?i:"gray",D=Bi(a.formatDatum(m)),b=Bi(n.formatDatum(y)),L=this.isTotal(f),N=this.isSubtotal(f),E=L?"Total":N?"Subtotal":(o=A??u)!=null?o:c,T=Bi(u),_=`<b>${Bi(d??l)}</b>: ${D}<br/><b>${Bi(E)}</b>: ${b}`;return p.toTooltipHtml({title:T,content:_,backgroundColor:I},{seriesId:r,itemId:f,datum:g,xKey:l,yKey:c,xName:d,yName:u,color:I})}getLegendData(t){if(t!=="category")return[];const{id:e,seriesItemTypes:i}=this,o=[],a=n=>n.charAt(0).toUpperCase()+n.substring(1);return i.forEach(n=>{const{fill:r,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u,name:p}=this.getItemConfig(n);o.push({legendType:"category",id:e,itemId:n,seriesId:e,enabled:!0,label:{text:p??a(n)},marker:{fill:r,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u}})}),o}toggleSeriesItem(){}animateEmptyUpdateReady({datumSelections:t,labelSelections:e,contextData:i,paths:o}){const a=qx(Jx(this.isVertical(),this.axes,"normal"));aS.fromToMotion(this.id,"datums",this.ctx.animationManager,t,a),eS(this,"labels",this.ctx.animationManager,e),i.forEach(({pointData:n},r)=>{if(r!==0||!n)return;const[l]=o[r];this.isVertical()?this.animateConnectorLinesVertical(l,n):this.animateConnectorLinesHorizontal(l,n)})}animateConnectorLinesHorizontal(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),a=o?.isReversed(),n=a?(d,u)=>d<u:(d,u)=>d>u,r=o?.scale.convert(0),l=e.reduce((d,u)=>(n(u.x,d)&&(d=u.x),d),a?1/0:0),c=(d,u,p,g,f)=>(d-u)/(p-u)*(f-g)+g;this.ctx.animationManager.animate({id:`${this.id}_datums`,groupId:this.id,phase:"initial",from:r,to:l,ease:He.Motion.easeOut,onUpdate(d){i.clear({trackChanges:!0}),e.forEach((u,p)=>{const g=c(d,r,l,r,u.x),f=c(d,r,l,r,u.x2);p!==0&&i.lineTo(g,u.y),i.moveTo(f,u.y2)}),t.checkPathDirty()}})}animateConnectorLinesVertical(t,e){const{path:i}=t;this.updateLineNode(t);const o=this.getValueAxis(),a=o?.isReversed(),n=a?(d,u)=>d>u:(d,u)=>d<u,r=o?.scale.convert(0),l=e.reduce((d,u)=>(n(u.y,d)&&(d=u.y),d),a?0:1/0),c=(d,u,p,g,f)=>(d-u)/(p-u)*(f-g)+g;this.ctx.animationManager.animate({id:`${this.id}_datums`,groupId:this.id,phase:"initial",from:r,to:l,ease:He.Motion.easeOut,onUpdate(d){i.clear({trackChanges:!0}),e.forEach((u,p)=>{const g=c(d,r,l,r,u.y),f=c(d,r,l,r,u.y2);p!==0&&i.lineTo(u.x,g),i.moveTo(u.x2,f)}),t.checkPathDirty()}})}animateReadyResize(t){super.animateReadyResize(t),this.resetConnectorLinesPath(t)}updatePaths(t){return C(this,null,function*(){this.resetConnectorLinesPath({contextData:[t.contextData],paths:[t.paths]})})}resetConnectorLinesPath({contextData:t,paths:e}){if(e.length===0)return;const[i]=e[0];this.updateLineNode(i);const{path:o}=i;o.clear({trackChanges:!0});const{pointData:a}=t[0];a&&(a.forEach((n,r)=>{r!==0&&o.lineTo(n.x,n.y),o.moveTo(n.x2,n.y2)}),i.checkPathDirty())}updateLineNode(t){const{stroke:e,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}=this.properties.line;t.setProperties({fill:void 0,stroke:e,strokeWidth:this.getStrokeWidth(i),strokeOpacity:o,lineDash:a,lineDashOffset:n,lineJoin:"round",pointerEvents:Xl.PointerEvents.None})}isLabelEnabled(){const{positive:t,negative:e,total:i}=this.properties.item;return t.label.enabled||e.label.enabled||i.label.enabled}onDataChange(){}};ha.className="WaterfallSeries",ha.type="waterfall";var rS=ha;import{_Theme as ic}from"ag-charts-community";var lS={series:{__extends__:ic.EXTENDS_SERIES_DEFAULTS,item:{positive:{strokeWidth:0,label:{enabled:!1}},negative:{strokeWidth:0,label:{enabled:!1}},total:{strokeWidth:0,label:{enabled:!1}}},line:{stroke:ic.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},cS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:rS,seriesDefaults:{axes:[{type:Ye.CARTESIAN_AXIS_TYPE.CATEGORY,position:Ye.POSITION.BOTTOM},{type:Ye.CARTESIAN_AXIS_TYPE.NUMBER,position:Ye.POSITION.LEFT}]},themeTemplate:lS,swapDefaultAxesCondition:({direction:s})=>s==="horizontal",paletteFactory:({takeColors:s,colorsCount:t,userPalette:e,themeTemplateParameters:i})=>{const{properties:o}=i,{fills:a,strokes:n}=s(t);return e?{item:{positive:{fill:a[0],stroke:n[0]},negative:{fill:a[1],stroke:n[1]},total:{fill:a[2],stroke:n[2]}}}:{item:{positive:o.get(Ye.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:o.get(Ye.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:o.get(Ye.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};function hS(){X.registerModule(qc),X.registerModule(hh),X.registerModule($h),X.registerModule(rd),X.registerModule(Np),X.registerModule(jp),X.registerModule(dd),X.registerModule(Ed),X.registerModule(Rd),X.registerModule($d),X.registerModule(ru),X.registerModule(Zu),X.registerModule(vg),X.registerModule(oy),X.registerModule(Ky),X.registerModule(Wy),X.registerModule(bm),X.registerModule(wm),X.registerModule(jh),X.registerModule(Wh),X.registerModule(Qf),X.registerModule(mf),X.registerModule(rx),X.registerModule(yu),X.registerModule(Rx),X.registerModule(cS),X.registerModule(ku),X.enterpriseModule.isEnterprise=!0,X.enterpriseModule.licenseManager=s=>{var t,e;return new Ju((e=(t=s.container)==null?void 0:t.ownerDocument)!=null?e:typeof document<"u"?document:void 0)},X.enterpriseModule.injectWatermark=sp}export*from"ag-charts-community";hS();export{xc as AgCharts,Sc as time};
