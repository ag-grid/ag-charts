---
import { Icon } from '@components/icon/Icon';
import { FeatureTitle } from './FeatureTitle';
import styles from './FeatureComparator.module.scss';
import { createStyle } from '../../utils/styles';
import menuContent from '../../content/menu/data.json';
const { direction, alignItems, justifyContent } = Astro.props;

const containerStyle = createStyle({
    'align-items': alignItems,
    'justify-content': justifyContent,
});

const features = [
    ...menuContent.main.items.slice(1),
    ...menuContent.charts.items,
];

---

<table class:list={[styles.featureTable]}>
    <tr>
        <th></th>
        <th>Community</th>
        <th>Enterprise <Icon name="enterprise" svgClasses={styles.enterpriseIcon} /></th>
    </tr>
    {features.map(({title, path, isEnterprise, items}) => {
        const isRootNode = Array.isArray(items) && items.length > 0;
        return (
            <>
                <tr>
                    <td colspan="3">
                        <FeatureTitle title={title} path={path} isRoot={isRootNode} isEnterprise={isEnterprise} />
                    </td>
                </tr>
                <>
                    {isRootNode && (
                        items.map((node) => (
                            <tr>
                                <td>
                                    <FeatureTitle title={node.title} path={node.path} isEnterprise={node.isEnterprise} />
                                </td>
                                <td>{node.isEnterprise ? <Icon name="cross" svgClasses={[styles.featureNotAvailableIcon]} /> : <Icon name="tick" svgClasses={[styles.featureAvailableIcon]} />}</td>
                                <td><Icon name="tick" svgClasses={[styles.featureAvailableIcon]} /></td>
                            </tr>
                        ))
                    )}
                </>
            </>
        );
    })}
</table>
