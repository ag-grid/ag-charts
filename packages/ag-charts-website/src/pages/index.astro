---
import Layout from '@layouts/Layout.astro';
import styles from '@pages-styles/homepage.module.scss';

import InstallText from '@features/homepage/components/InstallText';
import IndexGalleryExampleRunner from '@features/homepage/components/IndexGalleryExampleRunner.astro';

import { getGalleryExamples } from '@features/gallery/utils/filesData';
import { getEntry } from 'astro:content';
import { Icon } from '@ag-website-shared/components/icon/Icon';
import { AutomatedIntegratedChartsWrapper } from '@ag-website-shared/components/automated-examples/AutomatedIntegratedChartsWrapper';

import IndexDocsExampleRunner from '@features/homepage/components/IndexDocsExampleRunner.astro';
const { data: whatsNewData } = await getEntry('versions', 'ag-charts-versions');

// Fetch gallery data
const galleryEntry = await getEntry('gallery', 'data');
const galleryExamples = getGalleryExamples({ galleryData: galleryEntry.data });

// Prepare examples data for IndexGalleryExampleRunner
const seriesExampleMap = {
    bar: 'stacked-horizontal-bar',
    line: 'multiple-line-series-large-data',
    area: 'stacked-area',
    scatter: 'scatter-with-large-data',
    bubble: 'bubble-with-categories',
    pie: 'pie-with-variable-radius',
    donut: 'donut-with-variable-radius',
};

const exampleData = galleryEntry.data.series
    .flatMap((seriesGroup) => seriesGroup)
    .filter((series) => series.seriesName in seriesExampleMap)
    .map((series) => {
        const exampleName = seriesExampleMap[series.seriesName];
        const example = series.examples.find((ex) => ex.name === exampleName);
        return {
            title: example.title,
            exampleName: example.name,
            buttonText: series.title,
        };
    });

/**
 * Version of `ag-grid-charts-enterprise` to use
 *
 * NOTE: Fix version so we can upgrade outside of grid/charts releases
 */
const AG_GRID_CHARTS_VERSION = '32.1.0';
const AG_GRID_CHARTS_CDN_URL = `https://cdn.jsdelivr.net/npm/ag-grid-charts-enterprise@${AG_GRID_CHARTS_VERSION}/dist/ag-grid-charts-enterprise.min.js`;
---

<script is:inline src={AG_GRID_CHARTS_CDN_URL}></script>

<Layout
    title="JavaScript Charts | High-Performance & Feature-Rich Charting Library - AG Charts"
    description="Create beautiful, high-performance JavaScript charts quickly with AG Charts. Free forever; upgrade to enterprise for advanced features and dedicated support."
>
    <div class:list={[styles.container]}>
        <div class={styles.section}>
            <div class:list={[styles.heroSectionInner, 'layout-max-width-small']}>
                <div class={styles.whatsNewTagContainer}>
                    <span class={styles.whatsNewVersion}>v{whatsNewData[0].version}</span>
                    <span class={styles.whatsNewText}>
                        {whatsNewData[0].highlightSummary}
                    </span>
                    <Icon svgClasses={[styles.whatsNewArrow]} name="arrowRight" />
                </div>
                <div class={styles.headingContainer}>
                    <h1>JavaScript Charts</h1>
                    <h2>High Performance, Feature Rich JavaScript Charting Library</h2>
                    <h3>
                        AG Charts is a high-performance JavaScript charting library that lets you create stunning
                        visualizations, including <a>bar</a>, <a>line</a>, <a>pie</a>, and <a>map</a> charts, within
                        minutes. <a>Get started</a> for free with essential features or <a>upgrade to Enterprise</a> for
                        advanced features, series types and dedicated support.
                    </h3>
                </div>
                <div class={styles.ctaContainer}>
                    <button aria-label="Get Started with Free JavaScript Charts">Get Started</button>
                    <div class={styles.installCta}>
                        <InstallText client:load />
                    </div>
                </div>
                <img
                    class={styles.heroImage}
                    src="charts/images/readme-assets/gallery.gif"
                    alt="AG Charts Examples - JavaScript Bar, Line, Pie, and Map Charts"
                />
                <a href="./gallery" class={styles.galleryCta}
                    >JavaScript Charts Gallery <Icon svgClasses={[styles.whatsNewArrow]} name="arrowRight" />
                </a>
            </div>
        </div>
        <div class={styles.section}>
            <div class:list={[styles.communityFeaturesSectionInner, 'layout-max-width-small']}>
                <div class={styles.sectionHeaderContainer}>
                    <h2>Free JavaScript Charting Library - Quick & Easy Setup</h2>
                    <h3>Build Beautiful Charts in Minutes, for Free</h3>
                    <h4>
                        AG Charts Community supports multiple series types, customizable axes, real-time updates, and
                        accessibility features. Use it to create dynamic visualizations for data analysis, financial
                        reporting, and interactive dashboards.
                    </h4>
                </div>
                <IndexGalleryExampleRunner examples={exampleData} pageName={galleryExamples[0].page.chartSeriesName} />
            </div>
        </div>
        <div class={styles.section}>
            <div class:list={[styles.enterpriseFeaturesSectionInner, 'layout-max-width-small']}>
                <div class={styles.sectionHeaderContainer}>
                    <h2>Enterprise JavaScript Charts - Advanced Features & Support</h2>
                    <h3>Upgrade for Advanced Features, Series Types and Dedicated Enterprise Support</h3>
                    <h4>
                        Enterprise features include advanced chart types such as candlestick and OHLC for financial
                        data, multi-layered map visualizations, and integrated cross-chart interactions. Enjoy dedicated
                        enterprise support and continuous updates.
                    </h4>
                </div>
                <div class={styles.cardContainer}>
                    <div class={styles.card}>
                        <h4>Advanced Features</h4>
                        <p>
                            Unlock powerful tools for data visualization and analysis, including advanced annotations,
                            interactive zooming, and cross-chart interactions.
                        </p>
                        <button class={styles.learnMoreBtn}>Learn More</button>
                    </div>
                    <div class={styles.card}>
                        <h4>Additional Series Types</h4>
                        <p>
                            Access a wider range of chart types, including candlestick, OHLC, and multi-layered map
                            visualizations for comprehensive data representation.
                        </p>
                        <button class={styles.learnMoreBtn}>Learn More</button>
                    </div>
                    <div class={styles.card}>
                        <h4>Dedicated Support</h4>
                        <p>
                            Get priority assistance from our expert team, ensuring quick resolution of issues and
                            guidance for optimal chart implementation.
                        </p>
                        <button class={styles.learnMoreBtn}>Learn More</button>
                    </div>
                </div>

                <!-- <div class={styles.twoColumnContainer}>
                    <div class={styles.columnLarge}>
                        <IndexDocsExampleRunner name={'../../vanilla/maps/examples/world-colour-map'} />
                    </div>
                    <div class={styles.columnSmall}>
                        <h4>JavaScript Map Charts</h4>
                        <h5>Visualise geographic data...</h5>
                        <hr />
                        <p>
                            <b>Geographic Areas</b>
                            <ul>
                                <li>
                                    Visualise data representing geographic areas such as countries, using colours to
                                    denote distinct series or the magnitude of the values.
                                </li>
                            </ul>
                        </p>
                        <p>
                            <b>Routes and Connections</b>
                            <ul>
                                <li>
                                    Draw geographic lines, such as roads or flight paths, with the ability to vary width
                                    and colour to represent data values.
                                </li>
                            </ul>
                        </p>
                        <p>
                            <b>Markers and Points of Interest</b>
                            <ul>
                                <li>Add geographic points, with varying sizes to represent data values.</li>
                            </ul>
                        </p>
                    </div>
                </div> -->
                <button>View Pricing</button>
            </div>
        </div>
        <div class={styles.section}>
            <div class:list={[styles.financialChartsSectionInner, 'layout-max-width-small']}>
                <div class={styles.sectionHeaderContainer}>
                    <h2>JavaScript Financial Charts - Create Trading Views in Minutes</h2>
                    <h3>Flexible, Interactive Financial Charts for Trading and Analysis</h3>
                    <h4>
                        Build interactive financial charts featuring advanced annotations with minimal configuration.
                    </h4>
                </div>
                <div class={styles.twoColumnContainer}>
                    <div class={styles.columnSmall}>
                        <p>
                            <b>Drawings and Annotations</b>
                            <ul>
                                <li>
                                    Add and manage Trend Lines and Text Annotations from the intuitive toolbar for
                                    enhanced data analysis.
                                </li>
                            </ul>
                        </p>
                        <p>
                            <b>Interactive Charts</b>
                            <ul>
                                <li>
                                    Interactive analysis is enhanced with advanced Zoom capabilities and Range Buttons
                                    for seamless time period navigation.
                                </li>
                            </ul>
                        </p>
                        <p>
                            <b>Financial Chart types</b>
                            <ul>
                                <li>
                                    The default chart type is Candlestick, with additional types like OHLC and Line
                                    available from the Toolbar for versatile data visualisation.
                                </li>
                            </ul>
                        </p>
                    </div>
                    <div class={styles.columnLarge}>
                        <IndexDocsExampleRunner
                            name={'../../vanilla/financial-charts/examples/financial-charts-showcase'}
                        />
                    </div>
                </div>
            </div>
        </div>
        <div class={styles.section}>
            <div class:list={[styles.benchmarkSectionInner, 'layout-max-width-small']}>
                <div class={styles.sectionHeaderContainer}>
                    <h2>JavaScript Chart Performance Benchmarks - AG Charts vs. Competitors</h2>
                    <h3>Unbeatable Features, Uncompromised Performance</h3>
                    <h4>
                        AG Charts delivers unbeatable performance and unmatched features, outperforming competitors in
                        speed, efficiency & reliability.
                    </h4>
                </div>
                <span>TODO: Benchmark charts w/ Highcharts, etc...</span>
            </div>
        </div>
        <div class={styles.section}>
            <div class:list={[styles.benchmarkSectionInner, 'layout-max-width-small']}>
                <div class={styles.sectionHeaderContainer}>
                    <h2>Integrated JavaScript Charts</h2>
                    <h3>AG Grid Integrated Charts, powered by AG Charts</h3>
                    <h4>AG Charts powers integrated charts...</h4>
                </div>
                <AutomatedIntegratedChartsWrapper client:visible />
            </div>
        </div>
        <div class={styles.section}></div>
    </div>
</Layout>
