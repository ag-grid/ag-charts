---
import type { Framework } from '@ag-grid-types';
import APIViewLayout from '@layouts/APIViewLayout.astro';
import { getDeprecateLookupFiles } from '@utils/devFiles';
import { ChartsApiExplorer } from '@features/api-explorer/components/ChartsApiExplorer';
import { pathJoin } from '@utils/pathJoin';
import { SITE_BASE_URL } from '@constants';

const { interfaceLookup, codeLookup } = getDeprecateLookupFiles();

const siteUrl = Astro.site ? pathJoin(Astro.site, SITE_BASE_URL) : '/';
// TODO: Figure out framework
const framework: Framework = 'javascript';
---

<APIViewLayout>
    <div class="page-margin container">
        <h1>API Explorer</h1>

        <p>
            The API explorer can be used to gain familiarity with the AG Charts API and see in real-time how different
            <code>options</code> affect charts. A code snippet showing the use of the API is produced based on the point
            and click configurations specified in the explorer.
        </p>

        <ChartsApiExplorer
            client:only
            framework={framework}
            codeLookup={codeLookup}
            interfaceLookup={interfaceLookup}
            siteUrl={siteUrl}
        />
    </div>
</APIViewLayout>

<style lang="scss">
    @use '../design-system' as *;

    .container {
        margin-top: $size-4;
        margin-bottom: $size-4;
    }

    p {
        --font-size-extra-large: 1.5rem;
        font-size: var(--font-size-extra-large);
        margin-bottom: $size-4;
    }
</style>
