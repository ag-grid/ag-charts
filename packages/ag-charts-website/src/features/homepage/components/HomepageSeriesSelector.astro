---
import { getEntry } from 'astro:content';
import { Icon, IconName } from '@components/icon/Icon';
import type { GalleryHomepageExample, GalleryData } from '@ag-grid-types';
import HomepageGalleryExampleRunner from '@features/homepage/components/HomepageGalleryExampleRunner.astro';
import { getSeriesExampleGroup } from '@utils/getSeriesExampleGroup';

const galleryDataEntry = await getEntry('gallery', 'data');
const galleryData: GalleryData = galleryDataEntry?.data;
const { homepage } = galleryData;

---

<div class="seriesChart">
    <div class="dummy">
        <HomepageGalleryExampleRunner exampleName="line-with-gaps" />
    </div>
</div>

<div class="seriesList">
    <ul class="list-style-none">
        {
            homepage.map(({seriesExampleName}: GalleryHomepageExample) => {
                const seriesExample = getSeriesExampleGroup({
                    seriesExampleName, galleryData
                });

                if (!seriesExample) {
                    throw new Error(`No series example found for: ${seriesExampleName}`);
                }

                const { icon, title } = seriesExample;

                return (
                    <li>
                        <button class="button-secondary">
                            <Icon name={icon as IconName} />
                            <span>{title}</span>
                        </button>
                    </li>
                )
            })
            
        }
    </ul>
</div>

<style lang="scss">
    @use '../../../design-system' as *;

    .seriesChart {
        width: 50%;
        padding-right: $size-7;
    }

    .dummy {
        display: flex;
        justify-content: center;
        align-items: center;
        aspect-ratio: 4 / 3;
        border-radius: var(--border-radius);
        background-color: var(--border-color);
    }

    .seriesList {
        width: 50%;

        ul {
            display: flex;
            flex-wrap: wrap;
            gap: $size-2;
        }
    }
</style>
