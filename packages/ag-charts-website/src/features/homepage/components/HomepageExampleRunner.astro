---
import { InternalFramework } from '@ag-grid-types';
import { getExampleUrl } from '@features/docs/utils/urlPaths';
import HomepageChart from './HomepageChart.astro';
import { getGeneratedDocsContents } from '@features/docs/utils/examplesGenerator';

interface Props {
    internalFramework: InternalFramework;
    pageName: string;
    exampleName: string;
}

const { internalFramework, pageName, exampleName } = Astro.props;

const id = `example-${exampleName}`;
const exampleUrl = getExampleUrl({
    internalFramework,
    pageName,
    exampleName,
});
const generatedContents =
    (await getGeneratedDocsContents({
        internalFramework,
        pageName,
        exampleName,
    })) || {};
const { scriptFiles, styleFiles, files } = generatedContents;
const indexFragment = files && files['index.html'];
const appLocation = exampleUrl;
---

<div class="container">
    <HomepageChart
        scriptFiles={scriptFiles}
        styleFiles={styleFiles}
        indexFragment={indexFragment!}
        appLocation={appLocation}
    />
</div>

<style lang="scss">
    .container {
        width: 100%;
        height: 100%;
        position: relative;

        :global(.logomark) {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(2);
        }
    }
</style>
