---
import { getEntry } from 'astro:content';
import type { Framework } from '@ag-grid-types';
import { JsObjectPropertiesView } from './JsObjectPropertiesView';
import { getJsonFromDevFile } from '@utils/getJsonFromDevFile';

const interfaceLookup = getJsonFromDevFile('ag-charts-community/interfaces.AUTO.json');
const codeLookup = getJsonFromDevFile('ag-charts-community/doc-interfaces.AUTO.json');

const optionsData = (await getEntry('options-reference', 'data')).data;

const framework = Astro.params.framework as Framework;
const { config: configString, breadcrumbs: breadcrumbsString, ...props } = Astro.props;
const breadcrumbs = breadcrumbsString ? JSON.parse(breadcrumbsString) : undefined;
const config = configString ? JSON.parse(configString) : undefined;
---

<JsObjectPropertiesView
    client:load
    interfaceLookup={interfaceLookup}
    codeLookup={codeLookup}
    breadcrumbs={breadcrumbs}
    config={config}
    framework={framework}
    optionsData={optionsData}
    {...props}
/>
