---
import LoadingLogo from '@ag-website-shared/images/inline-svgs/ag-grid-logomark-loading.svg?react';
import RemoveLogoOnInitScript from './RemoveLogoOnInitScript.astro';
import { getLoadingLogoId } from '@features/example-runner/utils/getLoadingLogoId';

interface Props {
    exampleHeight?: number;
    exampleWidth?: number;
    pageName: string;
    exampleName: string;
}

const DEFAULT_HEIGHT = 500;
const FRAME_WRAPPER_HEIGHT = 42 + 16;

const { exampleHeight = DEFAULT_HEIGHT, exampleWidth, pageName, exampleName } = Astro.props as Props;
const minHeight = exampleHeight + FRAME_WRAPPER_HEIGHT;
const maxWidth = exampleWidth;
const loadingLogoId = getLoadingLogoId({ pageName, exampleName });
---

<div
    class="container example-runner-outer"
    style={{ minHeight: `${minHeight}px`, maxWidth: maxWidth != null ? `${maxWidth}px` : undefined }}
>
    <LoadingLogo id={loadingLogoId} />
    <slot />
</div>

<style lang="scss">
    @use 'design-system' as *;

    .container {
        position: relative;

        :global(.logomark) {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(2);
        }
    }

    .example-runner-outer {
        margin-bottom: $spacing-size-4;
    }

    :global(.tabs-content) .example-runner-outer {
        margin-bottom: 0;
    }
</style>

<RemoveLogoOnInitScript pageName={pageName} exampleName={exampleName} />
